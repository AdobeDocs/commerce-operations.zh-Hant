---
title: 拆分資料庫效能解決方案
description: 閱讀Adobe Commerce和Magento Open Source的分割資料庫解決方案相關資訊。
source-git-commit: d263e412022a89255b7d33b267b696a8bb1bc8a2
workflow-type: tm+mt
source-wordcount: '632'
ht-degree: 0%

---


# 拆分資料庫解決方案概述

{{ee-only}}

{{deprecate-split-db}}

Adobe Commerce提供數種可擴充性優點，包括可針對商務應用程式的不同功能區域使用三個不同的主資料庫。

結帳、訂購和產品資料都可使用單獨的主資料庫，您可以選擇複製該資料庫。 這項區隔可根據您的需求，獨立調整網站結帳、訂單管理活動、網站瀏覽和銷售活動的負載。 這些更改在如何擴展資料庫層方面提供了相當大的靈活性。

>[!INFO]
>
>Adobe Commerce雲基礎架構 _not_ 支援此功能。

此 `ResourceConnections` 類提供統一的MySQL資料庫連接到Commerce應用程式。 對於主資料庫的查詢，我們實現了命令查詢責任分離(CQRS)資料庫模式。 此模式處理將讀取和寫入查詢路由到相應資料庫的邏輯。 開發人員不需要知道正在使用哪個配置，並且沒有單獨的讀寫資料庫連接。

如果您設定了可選的資料庫複製，您將獲得以下優勢：

- 資料備份
- 不影響主資料庫的資料分析
- 可擴充性

MySQL資料庫非同步複製，這意味著從伺服器不需要永久連接以接收主伺服器的更新。

下圖顯示此功能的運作方式。

![Adobe Commerce使用不同的資料庫來儲存表格](../../assets/configuration/split-db-diagram-ee.png)

在Magento Open Source中，只使用一個主資料庫。

Adobe Commerce使用三個主資料庫和可配置數量的從資料庫進行複製。 Adobe Commerce有單一的資料庫連線介面，因此可提供更快的效能和更佳的擴充性。

## 配置選項

由於拆分資料庫效能解決方案的設計方式，您的自定義代碼和安裝的元件 _不能_ 執行下列任一操作：

- 直接寫入資料庫(而必須使用Adobe Commerce資料庫介面)
- 使用影響銷售或 [報價](https://glossary.magento.com/quote) 資料庫
- 在結帳、銷售或主資料庫中使用表的外鍵

>[!WARNING]
>
>請聯絡元件開發人員，確認其元件是否執行前述任何操作。 如果是，您只需選擇下列其中一項：
>
>- 請元件開發人員更新其元件。
>- 按原樣使用元件 _無_ 拆分資料庫解決方案。
>- 移除元件，以便使用拆分資料庫解決方案。


這也表示您可以：

- 配置拆分資料庫解決方案 _befor_ 將商業投入生產。

   Adobe建議您在安裝商務軟體後，盡快配置拆分資料庫。

- [手動配置](multi-master-manual.md) 拆分資料庫解決方案。

   如果已安裝元件或已在生產中，則必須執行此任務。 (_不要_ 更新生產系統；在開發系統中進行更新，並在您測試後同步變更。)

   >[!WARNING]
   >
   >您必須手動備份另外兩個資料庫實例。 商務僅備份主資料庫實例。 此 [`magento setup:backup --db`](../../installation/tutorials/backup.md) 命令和管理選項不備份其他表。

## 必要條件

拆分資料庫要求您在任何主機上設定三個MySQL主資料庫（Commerce伺服器上的全部三個資料庫、單獨伺服器上的每個資料庫等等）。 這些是 _主版_ 資料庫，其使用方式如下：

- 一個主資料庫 [簽出](https://glossary.magento.com/checkout) 表
- 一個用於銷售表的主資料庫(又稱為 _訂單管理系統_，或 _OMS。_，表格)
- Commerce 2應用程式表其餘部分的一個主資料庫

此外，您也可以選擇設定 _從_ 用作負載平衡器和備份的資料庫。

本指南討論如何僅設定主資料庫。 我們提供示例配置和參考，以便您根據需要設定從資料庫。

在本指南中，三個主資料庫的名稱為：

- `magento_quote`
- `magento_sales`
- `magento`

（您可以為資料庫命名任何您想要的名稱。）
