---
title: 使用CLI命令的範例
description: 請參閱如何使用命令列在開發系統中設定共用、系統專屬和敏感值的範例。
exl-id: d0058e9f-a5a9-48a6-9c66-c61515666335
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '1019'
ht-degree: 0%

---

# 使用CLI命令的範例

此範例說明如何在開發系統中設定共用、系統專屬和敏感的值，然後將這些值部署至生產系統。
這是透過使用共用組態( `config.php` 檔案和Commerce CLI命令。

此範例使用下列組態設定：

- **Vat編號** 和 **存放區名稱** 共用組態設定的。

  這些檔案位於 **商店** >設定> **設定** >一般> **一般**.

- **傳送電子郵件至** 敏感設定值的。

  您可在此找到： **商店** >設定> **設定** >一般> **連絡人**.

- **預設電子郵件網域** 系統特定組態值的設定值。

  您可在此找到： **商店** >設定> **設定** >客戶> **客戶組態** > **建立新帳戶選項**.

您可以使用本範例中所示的相同程式，來設定下列參照中的任何設定：

- [敏感和系統特定設定路徑參考](../reference/config-reference-sens.md)
- [付款設定路徑參考](../reference/config-reference-payment.md)
- [其他設定路徑參考](../reference/config-reference-general.md)
- [Commerce Enterprise B2B擴充功能設定路徑參考](../reference/config-reference-b2b.md)

## 開始之前

開始之前，請設定檔案系統許可權和擁有權，如中所述 [開發、建置和生產系統的先決條件](../deployment/prerequisites.md).

## 假設

本主題提供修改生產系統組態的範例。 您可以視需要選擇不同的組態選項。

在本範例中，我們假設如下：

- 您使用Git原始檔控制
- 開發系統可在名為的Git遠端存放庫中使用 `mconfig`
- 您的Git工作分支已命名 `m2.2_deploy`

## 步驟1：在開發系統中設定設定

若要在開發系統中設定預設語言環境及加權單位：

1. 登入管理員。
1. 按一下 **商店** >設定> **設定** >一般> **一般**.
1. 如果您有多個可用網站，請使用 **存放區檢視** 清單位於左上角，可切換至不同的網站，如下圖所示。

   ![切換網站](../../assets/configuration/split-deploy-switch-website.png)

1. 在右窗格中，展開 **存放區資訊**.
1. 如有必要，請清除 **使用預設** 核取方塊旁的 **VAT編號** 和 **存放區名稱** 欄位。
1. 在欄位中輸入數字(例如， `12345`)。
1. 在 **存放區名稱** 欄位，輸入值(如 `My Store`)。
1. 按一下 **儲存設定**.
1. 在左側導覽的「一般」底下，按一下 **連絡人**.
1. 在右窗格中，展開 **電子郵件選項**.
1. 如有必要，請清除 **使用預設** 核取方塊旁的 **傳送電子郵件至** 欄位。
1. 在欄位中輸入電子郵件地址。
1. 按一下 **儲存設定**.
1. 使用 **存放區檢視** 清單以選取 **預設設定** 如下圖所示。

   ![切換到預設設定](../../assets/configuration/split-deploy-default-config.png)

1. 在左窗格中，按一下客戶> **客戶組態**.
1. 在右窗格中，展開 **建立新帳戶選項**.
1. 如有必要，請清除 **使用系統值** 核取方塊旁的 **預設電子郵件網域** 欄位。
1. 在欄位中輸入網域名稱。
1. 按一下 **儲存設定**.
1. 如果出現提示，請排清快取。

## 步驟2：更新設定

現在您已變更管理員中的設定，請使用下列步驟將共用設定寫入檔案：

{{$include /help/_includes/config-save-config.md}}

即使 `app/etc/env.php` （系統特定組態）已更新，請勿將其簽入原始檔控制。
稍後在本程式中，您將在生產系統上建立相同的組態設定。

## 步驟3：更新您的建置系統並產生檔案

現在您已確認將共用組態的變更提交至原始檔控制，您可以將這些變更提取至您的建置系統、編譯程式碼並產生靜態檔案。

{{$include /help/_includes/config-update-build-system.md}}

## 步驟4：更新生產系統

該流程的最後一步是更新您的生產系統。 您必須分成兩個部分來執行：

- 更新敏感和系統專屬設定
- 更新共用設定

### 更新敏感和系統專屬設定

若要使用環境變數設定敏感和系統專屬設定，您必須知道以下事項：

- 每個設定的範圍

  如果您依照步驟1中的指示進行， **傳送電子郵件至** 是網站及其範圍 **預設電子郵件網域** 是全域的（即預設設定範圍）。

  您需要網站程式碼以設定 **傳送電子郵件至** 設定值。

  如需尋找此值的詳細資訊，請參閱： [使用環境變數覆寫組態設定](../reference/override-config-settings.md#environment-variables).

- 此範例中使用的設定的設定路徑：

  | 設定名稱 | 設定路徑 |
  | -------------------- | -------------------------------------- |
  | 傳送電子郵件至 | `contact/email/recipient_email` |
  | 預設電子郵件網域 | `customer/create_account/email_domain` |

  如需所有敏感和特定系統的組態路徑，請參閱： [敏感和系統特定設定路徑參考](../reference/config-reference-sens.md).

### 使用CLI命令設定變數

使用下列CLI指令來設定系統特定和敏感的組態設定：

- `magento config:set` 用於系統特定設定
- `magento config:sensitive:set` 敏感設定的

設定系統特定設定 **預設電子郵件網域**，位於預設範圍內，請使用以下命令：

```bash
bin/magento config:set customer/create_account/email_domain <email domain>
```

您不需要在命令中使用範圍，因為它是預設範圍。

若要設定值 **傳送電子郵件至**&#x200B;但是，您必須知道範圍型別(`website`)和範圍程式碼，每個網站上的該程式碼可能都不相同。

範例：

```unix
bin/magento config:sensitive:set contact/email/recipient_email --scope=website --scope-code=<website code> <email address>
```

### 更新共用設定

本節探討如何將您在開發及建置系統上所做的所有變更提取至生產環境，這會更新共用組態設定（商店名稱及VAT編號）。

{{$include /help/_includes/config-update-prod-system.md}}

### 驗證Admin中的組態設定

若要驗證組態設定：

1. 登入生產系統的管理員。
1. 按一下 **商店** >設定> **設定** >一般> **一般**.
1. 使用 **存放區檢視** 清單位於左上角，可切換至其他網站。

   您在開發系統中設定的共用組態選項顯示如下。

   ![檢查生產系統中的設定](../../assets/configuration/split-deploy-verify-storeinfo.png)

   >[!INFO]
   >
   >此 **存放區名稱** 欄位在網站範圍中可編輯，但如果您切換至預設設定範圍，則無法編輯。 這是您在開發系統中設定選項的結果。 的值 **VAT編號** 無法在網站範圍中編輯。

1. 如果您尚未這樣做，請切換到預設設定範圍。
1. 在左側導覽的「一般」底下，按一下 **連絡人**.

   此 **傳送電子郵件至** 欄位不可編輯，如下圖所示。 此為敏感設定。

   ![檢查生產系統中的設定](../../assets/configuration/split-deploy-verify-contacts.png)

1. 在左窗格中，按一下客戶> **客戶組態**.
1. 在右窗格中，展開 **建立新帳戶選項**.

   的值 **預設電子郵件網域** 欄位顯示如下。 此為系統專屬設定。

   ![檢查生產系統中的設定](../../assets/configuration/split-default-domain.png)
