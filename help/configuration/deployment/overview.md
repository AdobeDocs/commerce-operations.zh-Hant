---
title: 部署概觀
description: 閱讀Commerce應用程式的部署策略。
feature: Configuration, Deploy
exl-id: d5ed6fb3-2dd2-49df-802b-6d712ecd9ccf
source-git-commit: dcc283b901917e3681863370516771763ae87462
workflow-type: tm+mt
source-wordcount: '816'
ht-degree: 0%

---

# 部署概觀

以下主題說明將Commerce應用程式部署到Adobe Commerce 2.2版及更新版本的生產網站的程式。 Adobe建議任何擁有大型網站，但不想在部署期間經歷停機時間的人，使用此部署方法。

如果您在單一電腦上部署Commerce，並且可以容忍部署期間的某些停機，請參閱 [單一電腦部署](../deployment/single-machine.md).

## 管道部署

Commerce 2.2版推出Adobe _管道部署_ 以最短停機時間部署到生產環境的新方式。 此部署過程發生在不同的系統上，並為所有管道部署系統提供保持一致配置的方法。 這是簡單但功能強大的模型，可讓您將一般組態設定與系統特定設定（例如主機和連線埠）或敏感設定（例如名稱和密碼）區分開來。

若要使用管道部署，Adobe假設您為：

- 經驗豐富的系統整合商，精通Adobe Commerce設定選項。
- 管理大型商務網站(數千個庫存單位(SKU))，並想要將生產網站的停機時間降至最低。
- 瞭解PHP程式設計。
- 使用原始檔控制方法的經驗。
- 您的程式碼位於原始檔控制存放庫中。 在本指南中，我們假設您使用的是以Git為基礎的存放庫。

### 減少停機時間

當您在不同於生產系統的電腦上部署靜態資產並編譯程式碼時，可將停機時間縮到最短。 生產系統上的停機時間以傳輸靜態檔案和編譯的程式碼至伺服器所需的時間為限。

## 部署系統

我們使用下列辭彙來說明與部署有關的系統。

- **開發系統** — 開發人員用來自訂程式碼的機器；以及從Commerce Marketplace安裝擴充功能、主題和語言套件。 此外，您也會在開發系統上變更所有設定。 您可以有許多開發系統。

- **建置系統** — 一個系統，您可在其上部署靜態資產並編譯生產系統的程式碼。 由於您是在非生產環境中建立這些資產，因此可將生產系統的停機時間減至最少。

   您的組建系統不需要安裝Commerce。 它只需要Commerce程式碼，不需要資料庫連線。 此外，您的組建系統不需要是實體上獨立的伺服器。

- **中繼系統**—_可選_. 您可以選擇設定測試系統，用於所有整合程式碼的最終測試，包括使用者驗收測試(UAT)。 設定中繼系統的方式與設定生產系統的方式相同。 除了預備不是您的即時商店，也不會處理客戶的訂單之外，它與生產環境完全相同。

- **生產系統** — 您的即時商店。 您應該在這裡進行最小的直接設定變更，並且肯定沒有在測試執行個體上測試的任何設定。 如有可能，請使用以下專案變更設定： [資料修補程式](https://developer.adobe.com/commerce/php/development/components/declarative-schema/patches/) 已在中繼/開發執行個體上測試的。

## 其他部署方法

或者，您也可以使用其他部署方法，包括：

- 使用SCP或rsync進行安全複製
- [Capistrano](https://capistranorb.com/documentation/overview/what-is-capistrano)
- 此 [部署器工具](https://deployer.org/)

## 管理設定

在以下時間後建模： [12因素應用程式設計中的因素3](https://12factor.net/config)，Commerce現在會將每個系統的設定儲存在系統本身中。 （開發組態設定儲存在開發系統上，生產設定儲存在生產系統上。）

我們提供同步處理系統設定的方式：

- **共用設定** — 非系統特有或不敏感的設定。

   共用設定是您想要在開發和生產系統上保持一致的設定。 在開發的管理員(或雲端基礎結構上的Adobe Commerce)中設定共用設定 _整合_)系統。

   共用組態檔， `app/etc/config.php`應該包含在原始檔控制中，以便在開發、建置和生產系統之間共用。

- **系統特定設定** — 依系統而異的設定，例如搜尋引擎主機名稱和連線埠。

- **敏感設定** — 應具備的設定 _not_ 因為原始檔控制會公開個人識別資訊(PII)或API金鑰或密碼等設定。

   系統特定組態檔， `app/etc/env.php`，應該 _not_ 包含在原始檔控制中，或在系統之間共用。 請改用 [`magento config:set` 和 `magento:sensitive:set` 命令](../cli/set-configuration-values.md) 來為您的生產系統中的這些設定提供值。

>[!INFO]
>
>這些管理設定的新方法是選用的。 您不必這麼做，但強烈建議您使用這兩項功能。

在大多數情況下，您在共用、系統特定或敏感設定中設定的設定選項，無法在Admin中編輯。 這有助於讓您的設定在所有系統中保持一致。 (您可以選擇使用 [`magento config:set` 命令](../cli/set-configuration-values.md) 不含 `--lock` 選項來設定可在Admin中編輯的設定。)

每個Commerce設定選項都有唯一的 _設定路徑_. 若要設定組態選項的值，您可以使用CLI命令或環境變數來設定特定系統上該組態路徑的值。
