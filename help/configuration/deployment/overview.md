---
title: 部署概觀
description: 閱讀Commerce應用程式的部署策略。
feature: Configuration, Deploy
exl-id: d5ed6fb3-2dd2-49df-802b-6d712ecd9ccf
source-git-commit: dcc283b901917e3681863370516771763ae87462
workflow-type: tm+mt
source-wordcount: '816'
ht-degree: 0%

---

# 部署概觀

以下主題會討論將Commerce應用程式部署至Adobe Commerce 2.2版和更新版本的生產網站的程式。 Adobe建議將此部署方法用於擁有大型網站，但不想在部署期間經歷停機時間的使用者。

如果您在單一電腦上部署Commerce，並且可以在部署期間忍受某些停機時間，請參閱 [單一機器部署](../deployment/single-machine.md).

## 管道部署

透過Commerce 2.2版，引入Adobe _管道部署_ 以最短停機時間部署到生產環境的新方式。 此部署過程發生在不同的系統中，並為所有管道部署系統提供維護一致配置的方法。 這是簡單但功能強大的模型，可讓您將一般組態設定與系統特定設定（例如主機和連線埠）或敏感設定（例如名稱和密碼）分開。

若要使用管道部署，Adobe假設您是：

- 經驗豐富的系統整合商，精通Adobe Commerce設定選項。
- 管理大型Commerce網站(數千個庫存單位(SKU))，並想要將生產網站的停機時間降至最低。
- 瞭解PHP程式設計。
- 使用原始檔控制方法的經驗豐富。
- 您的程式碼位於原始檔控制存放庫中。 在本指南中，我們假設您使用Git型存放庫。

### 減少停機時間

當您在不同於生產系統的電腦上部署靜態資產並編譯程式碼時，可將停機時間縮到最短。 生產系統的停機時間以傳輸靜態檔案和編譯的程式碼至伺服器所需的時間為限。

## 部署系統

我們使用下列辭彙來說明與部署有關的系統。

- **開發系統** — 開發人員用來自訂程式碼的機器；以及從Commerce Marketplace安裝擴充功能、主題和語言套件。 此外，您也會在開發系統上變更所有設定。 您可以有許多開發系統。

- **建置系統** — 您可在其中部署靜態資產，並為生產系統編譯程式碼的系統。 由於您是在非生產用的系統上建置這些資產，因此可將生產系統的停機時間減至最少。

  您的組建系統不需要安裝Commerce。 它只需要Commerce程式碼，不需要資料庫連線。 此外，您的組建系統不需要是實體上獨立的伺服器。

- **中繼系統**—_可選_. 您可以選擇設定測試系統，用於所有整合程式碼的最終測試，包括使用者驗收測試(UAT)。 以設定生產系統的相同方式設定中繼系統。 除了測試不是您的即時商店且不會處理客戶訂單外，測試與生產完全相同。

- **生產系統** — 您的即時商店。 您應該在這裡進行最小的直接設定變更，並且肯定沒有未在測試執行個體上測試的任何設定。 如有可能，請使用以下專案變更設定： [資料修補程式](https://developer.adobe.com/commerce/php/development/components/declarative-schema/patches/) 這些元件已在測試/開發執行個體上測試。

## 其他部署方法

您可以選擇使用其他部署方法，包括：

- 使用SCP或rsync進行安全複製
- [卡皮斯特拉諾](https://capistranorb.com/documentation/overview/what-is-capistrano)
- 此 [Deployer工具](https://deployer.org/)

## 管理設定

在以下時間後建模： [12因素應用程式設計中的因素3](https://12factor.net/config)，Commerce現在會將每個系統的設定儲存在系統本身中。 （開發組態設定儲存在開發系統上，生產設定儲存在生產系統上。）

我們提供同步處理系統組態的方法：

- **共用組態** — 非系統專屬或不敏感的設定。

  共用設定是您想要在開發和生產系統上一致的設定。 在開發的管理員(或雲端基礎結構上的Adobe Commerce)中設定共用設定 _整合_)系統。

  共用組態檔， `app/etc/config.php`：應該包含在原始檔控制中，以便在開發、組建和生產系統之間共用。

- **系統特定設定** — 根據系統而異的設定，例如搜尋引擎主機名稱和連線埠。

- **敏感設定** — 設定應該 _非_ 因為原始檔控制會公開個人識別資訊(PII)或API金鑰或密碼等設定。

  系統特定組態檔， `app/etc/env.php`，應該 _非_ 包含在原始檔控制中或在系統之間共用。 請改用 [`magento config:set` 和 `magento:sensitive:set` 命令](../cli/set-configuration-values.md) 以便為生產系統中的這些設定提供值。

>[!INFO]
>
>這些管理設定的新方法是選用的。 您不必這麼做，但強烈建議您使用這兩項功能。

在大多數情況下，您無法在管理員中編輯在共用、系統特定或敏感設定中設定的設定選項。 這有助於讓您的設定在所有系統中保持一致。 (您可以選擇使用 [`magento config:set` 命令](../cli/set-configuration-values.md) 不使用 `--lock` 選項來配置可在「管理員」中編輯的設定。)

每個Commerce設定選項都有唯一的 _設定路徑_. 若要設定組態選項的值，您可以使用CLI指令或環境變數來設定特定系統上該組態路徑的值。
