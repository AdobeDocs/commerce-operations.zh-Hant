---
title: 部署概述
description: 閱讀有關Commerce應用程式的部署策略的資訊。
exl-id: d5ed6fb3-2dd2-49df-802b-6d712ecd9ccf
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '816'
ht-degree: 0%

---

# 部署概述

這些主題討論了將Commerce應用程式部署到Adobe Commerce2.2版及更高版本的生產站點的過程。 Adobe建議，對於具有大型站點且不想在部署期間經歷停機的任何人，都使用此部署方法。

如果您在單台電腦上部署Commerce，並且能夠容忍部署期間的一些停機時間，請參閱 [單機部署](../deployment/single-machine.md)。

## 管道部署

隨著Commerce 2.2版的推出，Adobe _管道部署_ 作為一種新的方法，可在最短的停機時間內部署到生產環境。 此部署過程發生在不同的系統上，並提供了維護所有管道部署系統的一致配置的方法。 它是一個簡單但功能強大的模型，使您能夠將普通配置設定與系統特定設定（如主機和埠）或敏感設定（如名稱和密碼）分開。

要使用管道部署，Adobe假定您：

- 經驗豐富的系統整合商，對Adobe Commerce配置選項有極好的瞭解。
- 管理大型商務站點(數千個庫存單位(SKU))，並希望將生產站點停機時間減至最小。
- 瞭解PHP寫程式。
- 在原始碼管理方法方面經驗豐富。
- 您的代碼位於原始碼管理儲存庫中。 在本指南中，我們假定您使用的是基於Git的儲存庫。

### 減少停機時間

在與生產系統分離的電腦上部署靜態資產和編譯代碼時，可最大限度地減少停機時間。 生產系統上的停機時間僅限於將靜態檔案和已編譯代碼傳輸到伺服器所需的時間。

## 部署系統

我們使用以下術語來描述與部署相關的系統。

- **開發系統** — 開發人員在其上自定義代碼的機器；並安裝來自Commerce Marketplace的擴展、主題和語言包。 此外，您在開發系統上進行所有配置更改。 你可以有很多開發系統。

- **生成系統** — 一個系統，在該系統上為生產系統部署靜態資產並編譯代碼。 由於您在非生產系統上構建這些資產，因此生產系統的停機時間將最小化。

   您的生成系統不必安裝Commerce。 它只需要Commerce代碼，但不需要資料庫連接。 此外，您的生成系統不需要是物理上獨立的伺服器。

- **分級系統**—_可選_。 您可以根據需要設定一個分段系統，以用於所有整合代碼(包括用戶接受測試(UAT))的最終測試。 設定登台系統的方式與設定生產系統的方式相同。 除了分段不是您的即時商店且不處理客戶訂單這一事實之外，它與生產是相同的。

- **生產系統** — 您的現場商店。 您應該在此對直接配置進行最少的更改，當然也不要在轉移實例上測試過任何內容。 如果可能，請使用 [資料修補程式](https://developer.adobe.com/commerce/php/development/components/declarative-schema/patches/) 已在Staging/Development實例上測試。

## 其他部署方法

（可選）您可以使用其他部署方法，包括：

- 使用SCP或rsync進行安全複製
- [卡皮斯特拉諾](https://capistranorb.com/documentation/overview/what-is-capistrano)
- 的 [Deployer工具](https://deployer.org/)

## 管理配置

後建模 [12因子應用程式設計中的因子3](https://12factor.net/config),Commerce現在將系統本身中每個系統的配置儲存起來。 （開發配置設定儲存在開發系統上，生產設定儲存在生產系統上。）

我們提供了一種同步系統配置的方法：

- **共用配置** — 既不特定於系統也不敏感的設定。

   共用設定是您希望在開發和生產系統上保持一致的設定。 在開發中的管理中(或在雲基礎架構上的Adobe Commerce)設定共用配置 _整合_)系統。

   共用配置檔案， `app/etc/config.php`，應包括在原始碼管理中，以便在開發、構建和生產系統之間共用。

- **系統特定配置** — 因系統而異的設定，如搜索引擎主機名和埠。

- **敏感配置** — 應設定 _不_ 處於原始碼管理中，因為它們會公開個人身份資訊(PII)或設定（如API密鑰或密碼）。

   特定於系統的配置檔案， `app/etc/env.php`, _不_ 包含在原始碼管理中或在系統之間共用。 而是使用 [`magento config:set` 和 `magento:sensitive:set` 命令](../cli/set-configuration-values.md) 為生產系統中的這些設定提供值。

>[!INFO]
>
>這些管理配置的新方法是可選的。 不必，但強烈建議您使用它們。

大多數情況下，您在共用配置、系統特定配置或敏感配置中設定的配置選項無法在管理員中編輯。 這有助於在所有系統中保持設定的一致性。 (您可以選擇使用 [`magento config:set` 命令](../cli/set-configuration-values.md) 沒有 `--lock` )的正文。

每個Commerce配置選項都具有唯一 _配置路徑_。 要為配置選項設定值，可以使用CLI命令或環境變數來為特定系統上的配置路徑設定值。
