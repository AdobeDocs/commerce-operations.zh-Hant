---
title: 準備啟動
description: 了解如何設定KPI以啟動您的Adobe商務和Adobe Experience Manager解決方案。
source-git-commit: 1cff7359ddb4caeca6773ff74b92048c89676f12
workflow-type: tm+mt
source-wordcount: '1147'
ht-degree: 0%

---


# 準備啟動

若要評估上述所有變更的成效，應在正式上線之前，以及日後任何主要部署至您的生產環境之前，執行徹底的效能測試。 在規劃負載測試時，請務必盡可能模擬真實的消費者流量。

AEM/CIF/Adobe商務網站中資源密集度最高的區域是無法快取的區域，例如結帳程式和網站搜尋。 一般而言，靜態且因此可快取的頁面瀏覽(例如用於產生詳細資料頁面(PDP)和產品清單頁面(PLP))佔電子商務網站的大部分流量，因此測試中的指令碼和案例應反映該量度平台的限制。

如果您為載入測試執行單一指令碼，且在步驟之間沒有等候時間的情況下導覽至網站，且每次都會完成結帳程式，就不會提供平台限制的可靠指示，因為這不是真實情境中的情況。

定義KPI應是效能測試計畫的第一步：定義您可在初始測試期間測試的量度，然後在網站上線後再次測量。 這可讓您追蹤網站在啟動前後的效能隨時間的變化。 要定義的範例KPI可以是：

- 平均響應時間 — 到第一個位元組或最後一個位元組的時間
- 延遲性
- 位元組/秒（直通）
- 錯誤率
- 每小時訂購量
- 每小時頁面檢視次數
- 每小時不重複使用者（同時購物者）

## Jmeter指南

開發AEM/CIF/Adobe商務負載測試時，應考量下列Jmeter高階准則：

- 將指令碼分割為可設定的藍本，其中應包括：
   - 開啟首頁
   - 開啟類別頁面(PLP)
   - 檢視簡單產品(PDP) — 每個迭代內2個循環
   - 查看可配置產品 — 每個迭代內的2個循環
      - 例如，將上述步驟設為流量的60%
   - 產品搜尋
      - 例如，將搜尋目錄設為流量的37%
   - 購物車和結帳
      - 例如，完成指令碼的購物車和結帳部分的使用者，應預設為約3%的業界標準電子商務網站轉換率
      - 由於結帳流程不會執行，且通常是耗用大量資源的作業，因此若將完成訂單的人數與網站瀏覽器的數量設為不切實際的高數字，網站可處理的流量結果將不可靠。
- 在每次測試運行前清除所有快取：
   - AEM Dispatcher快取應已完全清除
   - Adobe商務的「快速」和內部快取應已完全清除 — 這可透過Adobe商務管理員中的快取控制來完成。
- 在Jmeter測試中包括斜坡週期：若未設定漸層期間，表示流量不會逐步增加，網站也不會將頁面中任何經常造訪的頁面和元件快取。 在真實情況中，所有尖峰流量完全同時到達未經過緩衝的網站會不尋常，因此，Jmeter測試指令碼中應包含漸進期間，以便讓快取按照真實電子商務網站的情況建立。
- 應使用迭代內每個步驟之間的「等待時間」，實際上，使用者不會
在使用者的歷程中，會立即跳至網站上的下一個頁面 — 當使用者閱讀頁面並決定其下一個動作時，會有等候時間。
- 將線程組設定為無限循環，但在設定的時間x（例如60分鐘）內，將提供可重複的測試，其中中值響應時間與以前的測試運行相當。 這表示在設定的上升週期後，將會有同時運行的虛擬用戶目標數量，並且在設定的循環時間內，這將繼續。
- 應使用中值時間來改善/減少平均回應時間，而非平均。 若
有幾種邊緣結果需要比其他結果長得多的時間，這樣會扭曲此平均結果，但我們對大多數用戶在最終用戶響應時間方面感興趣，這更適合於中值測量。
- 依預設，系統不會在Jmeter中收集內嵌資源（例如，當實際使用者造訪頁面時下載的JS、CSS和其他資源）。 這可以啟用，但僅限於您測試的網域 — 仍應排除外部資源呼叫(例如，我們不想包含來自外部托管服務的回應時間，例如 google analytics代碼，因為我們無法控制這些代碼)。
- HTTP快取管理器，如此可讓Jmeter在歷程期間快取頁面元素，如
在使用者自己的瀏覽器瀏覽網站期間，實際使用者的歷程。 在使用者瀏覽網站的歷程中，使用者的瀏覽器只會下載一次所儲存的相關內嵌資源，然後使用者的瀏覽器就會快取這些資源。 此外，如果同一位使用者在原始造訪後某段時間回訪網站，則系統仍可能快取這些資產。
- 偵聽器應保留在實際負載測試運行中（例如「查看結果樹」和「聚合報告」）。 在非GUI實際負載測試運行中包括此操作可能會影響Jmeter報告的效能結果，因為在實際測試運行期間使用資源生成報告。 這些接聽程式已從測試指令碼中移除，將替換為JTL結果檔案，然後可使用Jmeter的「報表控制面板」功能加以處理。
- 要評估的目標回應時間，以便控制面板報表的「Apdex分數」可用來作為快速方式，以測量測試執行之間變更對效能的影響。 Apdex分數以可容忍時間記憶體取網站之特定人數為基礎。 如果回應時間超過特定「令人沮喪」的量，則分數會降低。 可使用「apdex_issued_threshold」和「apdex_learted_threshold」參數來設定時間。
- 設定目標「每小時訂單數」量度以向業務使用者呈現，而非虛擬使用者計數。 「虛擬用戶」可能是一個複雜的主題，以了解測試在現實生活中要測量的內容。 透過計算網站轉換率、每小時訂購、使用者在網站上的平均時間，以及每個頁面載入之間的思考時間，可使用業界標準計算，根據要達成的訂單數，呈現不同的負載測試情境。
- 最後，您的Jmeter測試伺服器應運行在地理位置上靠近您的大多數用戶流量來自和雲基礎架構托管位置的伺服器上 — 希望這些位置相同。
