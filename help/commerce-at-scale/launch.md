---
title: 效能測試秘訣
description: 瞭解如何設定KPI以啟動您的Adobe Commerce和Adobe Experience Manager解決方案。
exl-id: 4b0d9c4f-e611-452d-a80f-27f82705935d
topic: Commerce, Performance
source-git-commit: 76ccc5aa8e5e3358dc52a88222fd0da7c4eb9ccb
workflow-type: tm+mt
source-wordcount: '1147'
ht-degree: 0%

---

# 效能測試秘訣

若要評估上述所有變更的成效，應在上線之前，以及在未來對生產環境進行任何重大部署之前，執行徹底的效能測試。 規劃負載測試時，請務必儘可能模擬真實的客戶流量。

AEM/CIF/Adobe Commerce網站中資源最密集的區域是無法快取的區域，例如結帳程式和網站搜尋。 一般而言，靜態且因此可快取的頁面瀏覽(例如生產詳細資料頁面(PDP)和產品清單頁面(PLP))會構成電子商務網站的大部分流量，因此測試中的指令碼和情境應反映這一點，以測量平台的限制。

讓單一指令碼執行負載測試，導覽網站而不需要等候，並且每次都完成結帳程式，並不會提供平台限制的可靠指示，因為這並非現實情況。

定義KPI應該是效能測試計畫中的第一個步驟：定義您可在初始測試期間測試，但日後可再次測量的量度，並可在網站上線後重複測量。 這可讓您追蹤網站效能在一段時間內的表現 — 啟動前和啟動後。 要定義的範例KPI可以是：

- 平均回應時間 — 到第一個位元組或最後一個位元組的時間
- 延遲
- 位元組/秒（輸送量）
- 錯誤率
- 每小時訂單數
- 每小時的頁面檢視次數
- 每小時不重複使用者（同時購買者）

## Jmeter指南

開發AEM/CIF/Adobe Commerce負載測試時，應考慮下列Jmeter高階准則：

- 將指令碼分割成可設定的案例，例如，應涵蓋：
   - 開啟首頁
   - 開啟類別頁面(PLP)
   - 檢視簡單產品(PDP) — 每個反複專案內有2個回圈
   - 檢視可設定的產品 — 每個反複專案內有2個回圈
      - 例如，將上述步驟設定為流量的60%
   - 產品搜尋
      - 例如，將搜尋目錄設定為流量的37%
   - 購物車與結帳
      - 例如，完成指令碼購物車和結帳部分的使用者應預設為約3%的業界標準電子商務網站轉換率
      - 由於結帳流程未快取，且通常是資源密集的作業，因此設定完成訂單的人數與網站瀏覽器人數之間的不切實際高數值，會造成網站可處理的流量結果不可靠。
- 在每次測試執行前清除所有快取：
   - 應該完全清除AEM Dispatcher快取
   - Adobe Commerce的Fastly和內部快取應完全清除和清理 — 這可以透過Adobe Commerce管理員中的快取控制完成。
- 在Jmeter測試中包含遞增期間：沒有遞增期間設定表示沒有流量的逐步遞增，網站也沒有機會快取任何經常造訪的頁面和頁面元件。 在實際情況中，所有尖峰流量完全同時抵達完全未快取的網站是不尋常的，因此Jmeter測試指令碼中應包含斜坡期，以允許快取建立，就像實際電子商務網站中發生的情況一樣。
- 應使用疊代內每個步驟之間的「等待時間」 — 實際上，使用者不會在其歷程中立即跳至網站上的下一個頁面 — 使用者會有一段等待時間來閱讀頁面並決定他們的下一個動作。
- 將執行緒群組設定為無限回圈，但在設定的x時間（例如60分鐘）內，將會提供可重複的測試，其中位回應時間可與先前的測試回合比較。 這表示在設定提升期間之後，將會有同時執行的目標虛擬使用者數量，且在設定回圈時間中將繼續進行。
- 應該使用中位時間，來改善/降低平均回應時間，而非平均回應時間。 如果有數個邊緣結果比其他結果需要更長的時間，那麼這會扭曲這個平均結果，但我們感興趣的是大多數使用者的一般使用者回應時間，這更適合中位數測量。
- 預設不會在Jmeter中收集內嵌資源（例如，實際使用者造訪頁面時下載的JS、CSS和其他資源）。 這可以啟用，但僅適用於您正在測試的網域 — 仍應排除外部資源呼叫(例如，我們不想包含來自外部託管服務的回應時間，例如 google analytics程式碼)，因為我們無法控制它們。
- 應該啟用HTTP快取管理員，如此可讓Jmeter在歷程中快取頁面元素，如同在使用者自己的瀏覽器上瀏覽網站時實際使用者的歷程一樣。 在使用者瀏覽網站的歷程中，使用者的瀏覽器只會下載一次相關的內嵌資源，然後這些資源就會由使用者的瀏覽器快取。 此外，如果同一位使用者在最初造訪後回到網站，則仍可能是這些資產被快取的快取。
- 監聽器應保留在實際負載測試執行中（例如「檢視結果樹狀結構」和「彙總報告」）。 將此專案包含在非GUI實際負載測試回合中可能會影響Jmeter報告的效能結果，因為實際測試回合期間會使用資源來產生報告。 這些接聽程式已從測試指令碼中移除，將替換為JTL結果檔案，然後可以使用Jmeter的報表儀表板功能進行處理。
- 評估的目標回應時間，以便控制面板報表的「Apdex分數」可作為快速方法，衡量測試執行之間變更對效能的影響。 Apdex分數是根據一定人數的人能在容許的時間記憶體取網站。 如果回應時間超過某個「令人沮喪」的數量，這會降低分數。 可使用「apdex_satisfied_threshold」和「apdex_tolerated_threshold」引數來設定時間。
- 設定目標的「每小時訂單數」量度，以呈現給業務使用者，而非虛擬使用者計數。 「虛擬使用者」可能是一個複雜的主題，以瞭解測試在現實生活中所測量的內容。 透過計算網站轉換率、每小時訂單數、使用者在網站上花費的平均時間，以及思考每個頁面載入之間的時間，可使用業界標準計算，根據每小時訂單數呈現不同的載入測試案例。
- 最後，您的Jmeter測試伺服器應在地理位置鄰近您大部分使用者流量來源和雲端基礎架構託管位置的伺服器上執行 — 希望兩者相同。
