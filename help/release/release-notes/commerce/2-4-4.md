---
title: Adobe Commerce2.4.4發行說明
description: 瞭解Adobe Commerce版中的新功能、增強功能、錯誤修復和已知問題。
exl-id: 03d68115-b847-4744-a989-8e16d8d80e45
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '12453'
ht-degree: 0%

---

# Adobe Commerce2.4.4發行說明

Adobe Commerce2.4.4推出對八點一菲律賓比索的支援。已更新所有項目庫和依賴項，以與PHP 8.1相容。Core Composer依賴項和第三方庫也已升級到與PHP 8.1相容的最新版本。此版本還支援OpenSearch 1.2。

此版本包含近250個質量修復和增強功能。

>[!NOTE]
>
>多虧我們的搭檔 [阿特維](https://www.atwix.com/) 為使我們的框架與八點一菲律2.4.4比索相容作出了重大貢獻。

{{bics}}

## 應用 `AC-3022.patch` 繼續提供DHL作為航運公司

DHL已引入架構版本6.2，並將在不久的將來棄用架構版本6.0。 Adobe Commerce2.4.4和支援DHL整合的早期版本僅支援6.0版。部署這些版本的商家應適用 `AC-3022.patch` 盡早便繼續提供敦豪作為航運公司。 查看 [應用修補程式以繼續將DHL作為運輸承運商提供](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 有關下載和安裝修補程式的資訊，請參閱知識庫文章。

## 其他發佈資訊

儘管這些功能的代碼與Adobe Commerce核心代碼的季度版本捆綁在一起，但其中幾個項目(例如B2B、頁面生成器和Progressive Web Application(PWA)Studio)也是獨立發佈的。 這些項目的錯誤修復程式都記錄在每個項目文檔中提供的獨立、特定於項目的發行資訊中。

>[!NOTE]
>
>除Braintree外，所有供應商捆綁的擴展都已從Adobe Commerce2.4.4中刪除。

>[!NOTE]
>
>Composer 2.2引入了一種安全功能，要求商戶在其中標識受信任的插件 `composer.json` 檔案，然後執行插件。 當前，包含在 `composer.json` 自動安裝檔案，但未標籤為受信任。 但是，從2022年7月起，除非明確允許，否則Composer將不載入插件。 查看 [升級到Adobe Commerce時Composer插件問題2.4.4](https://support.magento.com/hc/en-us/articles/6215997614093-Composer-plugins-issues-when-upgrading-to-Adobe-Commerce-2-4-4) 有關如何修改 `composer.json` 檔案，以明確允許載入插件。

### 此版本中包含的修補程式

Adobe Commerce2.4.4包括解決Adobe Commerce和第2.4.3、2.4.3-p1和2.3.7-p2號Magento Open Source所提及的下列問題：

* 由 `MDVA-43395_EE_2.4.3-p1_COMPOSER_v1.patch` 和 `MDVA-43443_EE_2.4.3-p1_COMPOSER_v1.patch` 已在此版本中解決。

* `AC-384_Fix_Incompatible_PHP_Method__2.4.3_ce.patch`. 此修補程式解決了升級期間發生的致命PHP錯誤。 查看 [Adobe Commerce升級2.4.3, 2.3.7-p1 PHP錯誤修補程式](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) 知識庫文章。

### 安裝2.4.4後應用此修補程式

我們建議您在安裝Adobe Commerce2.4.4後應用以下修補程式：

* `braintree-disabled-partial-capture-for-applepay-googlepay.patch`.  商戶無法提交通過Braintree支付Apple支付的訂單的部分退款。 當商家嘗試從訂單發票建立部分退款的貸項通知單時， **退款數量** 欄位不可編輯。 此修補程式解決了該問題。 查看 [Adobe Commerce2.4.4:無法建立部分發票](https://support.magento.com/hc/en-us/articles/4487952754957-Adobe-Commerce-2-4-4-Unable-to-create-partial-invoices) 知識庫文章。  <!-- BUNDLE-3088-->

## Adobe Commerce2.4.4

在此版本中查找以下亮點。

### 安全增強

此版本包括一個安全修復和平台安全改進。 此安全修復程式已支援到Adobe Commerce2.4.3-p2和Adobe Commerce2.3.7-p3。

迄今未發生與這些問題相關的已確認攻擊。 但是，某些漏洞可能被利用來訪問客戶資訊或接管管理員會話。 大多數這些問題都要求攻擊者首先獲得對管理員的訪問權限。 因此，我們提醒您採取一切必要步驟保護您的管理員，包括但不限於以下工作：

* IP允許
* [雙因素認證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* 使用VPN
* 使用唯一位置，而不是 `/admin`
* 密碼衛生

請參閱 [Adobe安全公告](https://helpx.adobe.com/security/products/magento/apsb22-13.html) 來討論這些固定問題。

#### 其他安全增強功能

此版本的安全改進改進了對最新安全最佳做法的遵守，包括：

* 在2.3.4中，電子郵件變數的使用已被棄用，作為安全風險緩解的一部分，支援更嚴格的變數語法。 此舊行為已在此版本中完全刪除，作為降低安全風險的延續。

   因此，在升級到Adobe Commerce或Magento Open Source2.4.4後，以前版本的Adobe Commerce中使用的電子郵件或通訊模板可能無法正2.4.4工作。受影響的模板包括來自自定義模組或第三方擴展的管理員覆蓋、主題、子主題和模板。 即使使用 [升級相容性工具](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html?lang=en) 修復不建議使用的用法。 請參閱 [遷移自定義電子郵件模板](https://developer.adobe.com/commerce/frontend-core/guide/templates/email-migration/) 有關遷移受影響模板的潛在影響和指導原則的資訊。

* 整合令牌不能再用於API承載令牌身份驗證。 以前，整合令牌可用作基於令牌的身份驗證的獨立密鑰。 但是，由於從未過期的訪問令牌的安全影響，預設情況下已禁用此行為。 可以通過命令行或Admin啟用以前的行為。 請參閱 [基於令牌的身份驗證](https://developer.adobe.com/commerce/webapi/get-started/authentication/gs-authentication-token/)。 <!-- AC-1619 -->

* 會話ID不再儲存在資料庫中。 <!-- AC-522-->

* OAuth訪問令牌和密碼重置令牌現在儲存在資料庫中時已加密。 <!-- AC-520 1323-->

* 已加強驗證，以防止上載非字母數字檔案副檔名。 <!-- AC-479-->

* 已將reCAPTCHA支援添加到優惠券代碼。 <!-- AC-461-->

* 現在，當Adobe Commerce處於生產模式時，預設情況下禁用Swagger。 <!-- AC-1450-->

* 現在，預設情況下，Adobe Commerce店面啟用了HTTPS。 的 **在店面上使用安全URL** 和 **在管理中使用安全URL** 預設情況下啟用設定，所有內置cookie現在都設定為安全。  <!-- AC-1173-->

* 現在，所有Adobe Commerce安裝都需要依賴項混淆插件。 以前，此插件僅對基於Composer的安裝是必需的。 現在它允許受信任的版本。 商家可以繞過此插件中設定的禁止某些Composer安裝組合的約束。 可以繞過受信任版本的約束，Adobe Commerce現在在繼續安裝之前顯示警告。  <!-- AC-501 970-->

* 開發人員現在可以配置對每個端點接受的Adobe CommerceREST風格端點的陣列大小的限制。 請參閱 [API安全](https://developer.adobe.com/commerce/webapi/get-started/api-security/)。 <!-- AC-465-->

* 添加了機制，用於限制用戶可通過Web API在系統範圍內請求的資源大小和數量，並覆蓋各個模組的預設值。 這解決了由 `MC-43048__set_rate_limits__2.4.3.patch`。 請參閱 [API安全](https://developer.adobe.com/commerce/webapi/get-started/api-security/)。 <!-- AC-1120-->

### 平台增強

Adobe Commerce2.4.4現在支援八點一菲律賓比索。已更新所有項目庫和依賴項，以與PHP 8.1相容。其他平台增強功能包括：

* Adobe Commerce2.4.4支援第7.16號Elasticsearch和OpenSearch 1.2號決議。部署在內部的Adobe Commerce商戶可以使用兩種解決方案。 但是，OpenSearch現在是雲中托管的Adobe Commerce2.4.4部署的預設搜索引擎。 所有升級到2.4.4版的雲部署客戶都必須使用OpenSearch。 請參閱 [在雲上切換到OpenSearch for 2.4.4](https://support.magento.com/hc/en-us/articles/4419942355725-Switching-to-OpenSearch-for-Adobe-Commerce-on-Cloud-2-4-4)

* 的 `JQuery` 庫已升級到3.6版。的 `jquery-ui` 庫已升級到1.13.0版。其他幾個JavaScript庫已更新為最新版本。

* 現在支援TinyMCE 5.8.1。 TinyMCE4已從代碼庫中移除。 <!-- AC-41-->

* 的 `RequireJS` 庫已升級到最新版本(v2.3.6)。 [GitHub-33672](https://github.com/magento/magento2/issues/33672) <!-- AC-40 422-->

* PHPUnit已升級到最新版本(9.5.x)。 Test和test框架已更新為與新版本相容。 <!-- AC-404-->

* 大多數Laminas依賴項已升級到與PHP 8.1相容的最新版本。從基底庫中去除了3個Laminas依賴項，減少了依賴項數。

#### jQuery UI升級

jQuery UI已升級到最新版本(v1.13.0)。 已刪除以下v1.10.0 jQuery元件：

* `ajaxOptions` 和 `cache` 頁籤。 請參閱 [頁籤](https://jqueryui.com/changelog/1.10.0/#tabs)。

* `.zIndex()`. jQuery UI v1.12.1包括 `jquery/z-index.js`，支援使用 `.zIndex()`。 請參閱 [UI核心](https://jqueryui.com/changelog/1.12.0/#ui-core)。

* 小部件名稱的資料回退。 必須使用 `.data()` 按鈕

* 類的硬編碼，例如 `ui-corner-all` 在小部件中。

### 效能和可擴充性增強

Adobe Commerce效能增強提高了高吞吐量訂單處理和消息隊列優化。 此版本中引入的非同步訂單功能支援每小時建立大約60,000個訂單。 Adobe Commerce早期版本支援每小時處理約10 000份訂單，這給閃電銷售帶來了潛在的瓶頸。 新的多用戶功能支援擴展單個雲實例上的消息隊列使用者的數量，並增加每小時處理的訂單數。

此版本中的效能增強：

* AsyncOrder功能支援比同步執行提供的更快的訂單放置。 啟用AsyncOrder後，在後台執行訂單放置，而購物者在店面完成其他任務。

* 新 **啟用購物車裝貨時的庫存檢查** 配置選項在將產品裝入購物車時提供可切換的清單檢查。 預設情況下啟用它。 禁用此選項時，Adobe Commerce會隨著報價的載入而跳過清單檢查，這會加快結帳速度，尤其是對於包含許多物料的購物車。

* 新 `multiple_processes` 配置選項支援在多個進程中運行並行使用者。 以前， `cron` 在需要時運行單個用戶。 啟動多個使用者並行運行進程可以提高任務執行速度。 要啟用此功能，請添加 `multiple_processes` 到 `app/etc/env.php` 的子菜單。

* 通過增加由 `max_input_vars` 的 `php.ini` 檔案以支援輸入變數卷。

* 通過延遲總計計算優化結帳期間的銷售規則處理。 通常，每次購物者將產品添加到購物車、更新產品數量或按一下  **下單** 按鈕 商戶可以通過設定 `checkout/deferred_total_calculating` 變數 `env.php` 的子菜單。 或者，您可以 `bin/magento setup:config:set --deferred-total-calculating 1|0`。  <!-- MCP-573-->

* 在非同步訂單放置期間對受購物車價格規則影響的訂單的驗證流程進行改進。 <!-- MCP-304-->

請參閱 [高吞吐量訂單處理](../../../performance/high-throughput-order-processing.md)。

### GraphQL

此版本包括以下GraphQL增強功能：

* **完成GraphQL可轉讓報價範圍**。  B2B公司用戶現在可以使用GraphQL完成與可轉讓報價有關的所有任務。 此API的早期版本支援協商流，但不支援簽出。 <!-- PWA-2101-->

#### 新突變

* [`assignCustomerToGuestCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/assign-customer-to-guest-cart.html) 突變

* [`placeNegotiableQuoteOrder`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/place-negotiable-quote-order.html) 突變

* [`setNegotiableQuoteBillingAddress`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-billing-address.html) 突變

* [`setNegotiableQuotePaymentMethod`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-payment-method.html) 突變<!-- PWA-2114-->

* [`setNegotiableQuoteShippingMethods`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-methods.html) 突變

* [`setNegotiableQuoteShippingAddress`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-address.html) 突變

* **效能改進**:

   * GraphQL購物車操作的效能已得到改善。 的 `collectQuoteTotals()` 現在，在GraphQL請求期間只調用一次方法，這減少了響應時間。 <!-- PWA-2110-->

   * 對GraphQL請求快取方式的更改提高了店面效能。 現在，Ampeist和清漆可快取與 `auth` 標籤。 <!-- PWA-1817-->

* **新的與店面相關的管理配置設定**。 的 `storeConfig` 查詢現在返回零小計結帳和支票/貨幣訂單付款方法的配置設定。 <!-- PWA-1576-->

* **更新核心GraphQL圖書館**。 的 `webonyx` 使核心GraphQL能夠運行的庫已升級到^14.9版。 <!-- PWA-2137 2184 -->

* **GraphQL多站點多語言商店的固定翻譯問題**。 現在，GraphQL解析程式將根據預期的儲存範圍返回已轉換的字串。 <!-- PWA-1946-->

* GraphQL現在為New Relic提供描述性事務名稱，這對調試很有幫助。 [GitHub-30915](https://github.com/magento/magento2/issues/30915) <!-- PWA-1311-->

查看 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 獲取這些增強功能的詳細資訊。

### B2B

此版本包含多個錯誤修復。 請參閱 [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html)。

### 供應商捆綁的擴展

除非 [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)，已從Adobe Commerce2.4.4代碼庫中刪除所有供應商捆綁的擴展。 商戶應遷移到官方分機， [Commerce Marketplace](https://marketplace.magento.com/extensions.html)。 <!-- AC-1165-->

[Amazon](https://docs.magento.com/user-guide/payment/payments.html)

[數位](https://docs.magento.com/user-guide/marketing/communications.html)

[克拉爾納](https://docs.magento.com/user-guide/payment/payments.html)

[頂點](https://docs.magento.com/user-guide/tax/taxes.html)

[育浦](https://docs.magento.com/user-guide/marketing/product-reviews.html)

### PWA Studio

PWA Studio12.3.0版與Adobe Commerce2.4.4相容。它包括對reCaptcha、頁面生成器內容優化和個性化內容的支援。 有關增強和錯誤修復的資訊，請參見 [PWA Studio版本](https://github.com/magento/pwa-studio/releases)。 請參閱 [版本相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 清單中的「PWA Studio」版本及其相容的Adobe Commerce核心版本。

### PayPal支付增強功能

* 現在支援Venmo付款選項。  <!-- AC-1229-->

* Pay Later已被添加為基於購物者所在位置而非商家所在地的購物者選擇。

* 現在，商人可以在測試自己選擇的國家的購物體驗時，為購物者設定國家。 以前，test只能測試商戶所在國。 此更改僅在沙盒模式下有效。

* 現在，結帳頁上的消息顯示在使用「以後付款」時購物者預期支付的金額和增量的精確消息。

### 即時搜索

Live Search現在支援PHP 8.1。

新 `Magento_ElasticsearchCatalogPermissionsGraphQl` 在更新的Live Search期間禁用模組 [安裝](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/onboard/install.html)。 必須將現有的Live Search安裝升級為Live Search 2.0.0以利用這些功能。 有關詳細資訊，請參閱即時搜索 [發行說明](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/release-notes.html)。

### 輔助功能更新

此版本提高了對標準輔助功能指南的遵守程度。 這些增強功能改善了視力有限或語言、認知和學習能力有限的用戶的體驗。  螢幕Reader工具的效能也得到提高。

輔助功能增強包括：

* 工具提示連結與文本以及針對輸入的準確、以任務為重點的可見標籤
* 編輯按鈕現在具有唯一的文本。
* 管理按鈕現在具有獨特的、可訪問的和描述性的用途，符合AA標準
* 傳遞意義的表徵圖影像現在提供了文本替代。
* 「管理」按鈕和表單域的對比度增強，與相鄰顏色的對比度至少為3:1。

### 頁面生成器

* 商家現在可以添加替代文本(`alt_text`)到影像（影像、橫幅、幻燈片），以增強內容可訪問性。 [GitHub-746](https://github.com/magento/magento2-page-builder/issues/746) <!-- PB-1193-->

## 已修復問題

我們正在解決Adobe Commerce核心代2.4.4中的數百個問題。 下面對這些已修復問題進行了說明。

### 安裝、升級、部署

<!-- MC-42026-->

* Adobe Commerce現在按照預期在生成日誌檔案中記錄靜態內容部署錯誤。

<!-- MC-43094-->

* 資料修補程式不能再忽略表的唯一約束並將重複值插入到MySQL資料庫表中。 以前，修補程式可能會插入重複值，從而損壞資料庫。

<!-- AC-1480-->

* 現在，商戶可以成功地從Adobe Commerce的Klarna部2.4.2部署升級到Adobe Commerce2.4.3。 [GitHub-33760](https://github.com/magento/magento2/issues/33760)

<!-- ACP2E-77-->

* 現在，可以從命令行成功更改站點地圖生成器配置。 以前，當您嘗試更改管理員以外的站點地圖配置時，Adobe Commerce顯示了以下錯誤： `Import failed: Notice: Trying to access array offset on value of type null in app/code/Magento/Cron/Model/Config/Backend/Sitemap.php on line 78`。  [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-215-->

* 的 `bin/magento app:config:import` 命令現在在更新時執行而不出錯 `time` 值 `config.php`。 以前，通過手動編輯（即不使用管理員）更改產品警報配置會導致錯誤。

### 輔助功能

<!-- AC-1589-->

* 已解決購物車和結帳頁上導航的輔助功能錯誤。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* 螢幕閱讀器現在可以讀取產品頁面上的所有相關表單元素。

<!-- AC-1277-->

* 影像刪除和表徵圖按鈕在整個商店中的移動對比度已經得到改進，以提高低視覺用戶的可讀性。

<!-- AC-1272-->

* 已為用於在整個產品介面中執行搜索的放大鏡表徵圖指定一個可訪問的名稱和文本替代選項。

<!-- AC-1275-->

* 現在可以使用Tab鍵訪問富格文本編輯器工具欄。

<!-- AC-1283-->

* 的 **此物料具有重量** 在 **目錄** > **產品** 詳細資訊頁面現在具有可見的標籤和可訪問的名稱。

<!-- AC-1284-->

* 控制項的可訪問名稱現在包括其可見標籤的文本，用於顯示每頁下拉的項數。

<!-- AC-1287-->

* 上的表控制項 **目錄** > **產品** 「詳細資訊」(details)頁面現在具有可見的標籤和折疊表時可訪問的名稱。

<!-- AC-1288-->

* 「產品」(Products)表格中的「編輯」(Edit)連結現在具有唯一且有意義的連結文本。

<!-- AC-1276-->

* 展開工具提示的觸發器現在提供文本名稱。

<!-- AC-1285-->

* 整個店面的按鈕現在有唯一、描述性的可訪問名稱。 以前，帶有文本按鈕和相鄰的向下箭頭表徵圖按鈕的拆分按鈕具有相同的可訪問名稱。

<!-- AC-1277-->

* 影像刪除和表徵圖按鈕在整個商店中的移動對比度已經得到改進，以提高低視覺用戶的可讀性。

<!-- AC-1279-->

* 文本選項已添加到鉛筆表徵圖中，當商家編輯搜索引擎優化折疊面板的輸入時，該表徵圖會顯示。

<!-- AC-1272-->

* 已為用於在整個產品介面中執行搜索的放大鏡表徵圖指定一個可訪問的名稱和文本替代選項。

<!-- AC-1286-->

* 產品頁面 **新建視圖** 文本輸入欄位現在具有可訪問的名稱。

<!-- AC-1283-->

* 的 **此物料具有重量** 在 **目錄** > **產品** 詳細資訊頁面現在具有可見的標籤和可訪問的名稱。

### 管理GWS

<!-- MC-42239-->

* 具有受限權限的管理員現在可以按預期建立返回。

### 後端

<!-- MC-43161-->

* 管理員現在可以在配置了自定義管理員路徑並啟用了密鑰的部署中登錄到管理員。 以前，Adobe Commerce顯示了以下錯誤： `Invalid security or form key. Please refresh the page`。

<!-- MC-41949-->

* Adobe Commerce在多儲存層次結構發生更改時不再重定向到「所有儲存」視圖範圍。 以前，在保存層次結構後，購物者被重定向到錯誤的商店URL，並且在多商店部署中選擇了「所有商店視圖」範圍。

### 捆綁產品

<!-- MC-42885-->

* 購物者現在可以將捆綁產品添加到購物車中，其中包含固定產品稅和兩個選項。 以前，Adobe Commerce未添加產品並顯示以下錯誤： `We can't add this item to your shopping cart right now`。

<!-- MC-42249-->

* 窗體驗證 `data-validate` 和 `min` 屬性已添加到購物車數量欄位，以防止捆綁產品出現負值。

<!-- MC-41794-->

* 的 `products` 查詢現在可以在商店視圖級別上禁用子產品時正確篩選捆綁產品。 以前，查詢返回在商店視圖級別禁用的子產品。

<!-- MC-42811-->

* `cron` 現在，按照預期清除產品類別快取 `indexer_update_all_views` 執行。 以前，在成批更新該類別中的許多產品後，Adobe Commerce在類別頁上顯示了不正確的產品計數。

<!-- MC-42811-->

* Adobe Commerce現在會在捆綁產品重新出現在庫存中時按預期方式更新類別產品快取。

<!-- MC-42811-->

* 優化了在重新索引過程中運行的快取清除算法。 當在重新索引過程中快取類別時，捆綁產品現在會按預期顯示。 以前，在重新編製索引期間快取產品類別後，捆綁產品在數小時內不會顯示。

<!-- AC-715-->

* 貨幣兌換現在按使用不同貨幣的多商店部署中捆綁產品購買的電子郵件確認中的預期進行。 [GitHub-33426](https://github.com/magento/magento2/issues/33426)

<!-- ACP2E-64-->

* 現在，對於產品網格中前置詞為%的捆綁產品，高級定價特價折扣將正確顯示。 以前，在產品網格中，%折扣錯誤地顯示為$前置詞而不是%。

<!-- ACP2E-262-->

* 當相關產品更改其狀態時，管理員中的捆綁產品狀態現在會自動更新。

<!-- ACP2E-326-->

* 捆綁產品的GraphQL解析程式現在檢查子捆綁產品是否已禁用。 以前，未進行此檢查，並且查詢 `categoryList` 不暢銷的兒童產品。

<!-- MC-43223-->

* `cart` 查詢響應現在可以為具有動態價格的捆綁產品返回準確折扣。 以前，查詢響應包括單獨應用於每個捆綁產品的折扣。

### 快取

<!-- AC-328-->

* 在典型使用下，頁面快取不再快速增長。 [GitHub-9458](https://github.com/magento/magento2/issues/9458)

<!-- magento/magento2/pull/33468-->

* 下訂單不再導致從清漆快取中刪除與訂購產品相關的所有快取標籤。 [GitHub-30128](https://github.com/magento/magento2/issues/30128)

<!-- AC-1478-->

* 當您從頂級類別更新產品或運行索引以更新產品屬性或庫存狀態時，全站點頁面快取不再被清除。 以前，清漆快取將頂級菜單類別ID添加到所有頁面快取標籤。 [GitHub-33465](https://github.com/magento/magento2/issues/33465)

### 購物車和結帳

<!-- MC-41494-->

* 最低廣告價格 **這是什麼？** 購物車頁面上的連結現在可以按一下，並按預期開啟資訊彈出窗口。 以前，按一下此連結無效。

<!-- MC-42639-->

* 在啟用持久購物車的部署中，會話超時後，購物者現在可以無錯誤地下單。 以前，Adobe Commerce在會話超時後顯示付款錯誤。

<!-- MC-42638-->

* 將高排序順序值分配給客戶地址屬性不再導致簽出頁上的效能下降。

<!-- MC-42813-->

* 如果更新的數量無效，Adobe Commerce現在將購物車產品數量還原為上一值。

<!-- MC-42347-->

* 按一下 **添加到購物車** 「最近查看」部分中的按鈕現在根據預期重定向到產品詳細資訊頁面。 以前，購物者被重定向到產品清單頁面。

<!-- MC-33705-->

* 客戶購物者現在可以成功地使用包含多種類型自定義客戶地址屬性的客戶地址簽出。 以前，在簽出期間顯示自定義屬性的值時格式不正確。 [GitHub-30290](https://github.com/magento/magento2/issues/30290)

<!-- MC-24379-->

* Adobe Commerce現在在啟用表費率時正確將免費發運閾值應用於訂單。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- AC-271-->

* 你現在可以 `POST /V1/guest-carts/:cartId/items` 將具有不同選項的簡單產品添加到購物車。 以前，此調用更改了您添加的第一個簡單產品的數量，而不是添加具有指定選項的第二個簡單產品。 [GitHub-32302](https://github.com/magento/magento2/issues/32302)

<!-- AC-1089-->

* 現在，在為配置部署時，簽出頁的「訂單匯總」部分將顯示正確的幣種和金額 `Poland` 國家和地區 `PLN` 貨幣。 以前，購物車和結帳頁顯示金額 **0茲羅提**。

<!-- MC-32805-->

* Adobe Commerce在購物者點擊時不會再犯錯 **更新購物車** 更改迷你車中的產品數量。 以前，Adobe Commerce顯示了以下錯誤：  `The quote item isn't found. Verify the item and try again`。

<!-- MC-43176-->

* GraphQL `products` 查詢特定商店中的可配置產品時，現在僅返回指定商店中產品的價格範圍。 以前，請求在非指定商店上為簡單產品返回的價格範圍。

<!-- AC-691-->

* 當購物者添加一個缺少街道欄位的帳單地址時，Adobe Commerce不再拋出此錯誤： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`。 [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- AC-1625-->

* Adobe Commerce在從中刪除迷你購物車的商店結帳時不再拋出控制台錯誤。 [GitHub-34513](https://github.com/magento/magento2/issues/34513)

<!-- AC-691-->

* 當開單地址缺少街區欄位值或街區欄位值不是陣列時，在付款階段結帳不再失敗。 以前，簽出失敗，出現以下錯誤： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`。 [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- ACP2E-22-->

* 現在，優惠券報表網格中可以正確計算銷售總額。 以前，銷售總額不包括發運金額。

<!-- ACP2E-44-->

* 現在，當購物者在運輸方法之間切換時，可正確計算全車折扣。

<!-- ACP2E-159-->

* 的下拉清單 **州** 「管理員建立訂單」頁上的欄位現在由選定國家/地區的預定義值填充。 以前，此欄位是輸入文本欄位，而不是下拉菜單。

<!-- ACP2E-172-->

* Adobe Commerce在您使用後不再拋出錯誤 `addConfigurableProductsToCart` 更改商店視圖後將可配置產品直接添加到購物車中。

<!-- ACP2E-176-->

* Adobe Commerce在使用 `addConfigurableProductsToCart` 用於將可配置產品的禁用子級添加到購物車的變異。 以前，Adobe Commerce拋出了完整性約束違反錯誤。

<!-- ACP2E-206-->

* 交叉銷售產品在購物車頁面上不再顯示 **在購物車中顯示交叉銷售項目** 配置設定已禁用。

<!-- ACP2E-157-->

* 如果已應用優惠券的訂單失敗，贈券使用值將不再更改。  以前，在購物車中應用優惠券後，一次性自動生成的優惠券被標籤為無效，但未下訂單。

<!-- ACP2E-137-->

* 已將驗證添加到結帳工作流中，以將客戶的街道地址與預設值進行比較。 如果驗證流程標識了更改，則它將設定 `customer_address_id` 至 `null` 將其視為新客戶地址。 以前，如果客戶在結帳時未驗證地址，而同一客戶在將驗證應用於結帳欄位後嘗試使用同一地址下單，則Adobe Commerce不接受編輯的地址並引發異常。

### 購物車價格規則

<!-- MC-42288-->

* 現在，在將相關購物車價格規則與 `auto` 選項。 如果嘗試保存此規則而未啟用 `auto` 選項，Adobe Commerce顯示此消息： `Rule is not saved with auto generate option enabled. Please save the rule and try again`。

<!-- MC-42743-->

* 已添加用於確認正確應用購物車價格規則折扣的test。

<!-- ACP2E-213-->

* 使用SKU條件的購物車價格規則 **如果在購物車中發現/未發現物料，且所有/任何這些條件都為真** 現在，可配置產品可以按預期工作。

<!-- ACP2E-225-->

* 現在，對於固定價格捆綁產品，可以正確應用購物車價格規則。 以前，當至少一個子產品具有在規則條件中指定的相同屬性集時，購物車價格規則不適用於這些產品。

<!-- ACP2E-285-->

* 現在，當Adobe Commerce配置為 **整個購物車的固定金額折扣** 購物車價格規則。 以前，Adobe Commerce顯示了以下錯誤： `report.ERROR: Warning: Division by zero in /home/mer33515/public_html/ee24develop/app/code/Magento/SalesRule/Helper/CartFixedDiscount.php on line 85`。

<!-- ACP2E-306-->

* 更正了 `cart` 在激活具有固定金額折扣的購物車規則時，查詢返回了不準確的折扣金額。

### 目錄

<!-- MC-41796-->

* Adobe Commerce在產品具有成批屬性更新操作時不再引發異常 `datetime` 屬性。

<!-- MC-42571-->

* GraphQL查詢現在根據子產品的可見性過濾器設定返回可配置產品的子產品的結果。

<!-- MC-41853-->

* Adobe Commerce在可配置產品屬性更改時不再修改相關產品價格。 以前，可配置產品的最低廣告價格(MAP)會覆蓋店面相關產品的價格。

<!-- MC-42659-->

* 管理員現在可以重新分配類別中剩餘的最後一個產品並保存空類別。

<!-- MC-42132-->

* 管理產品網格和篩選器的下拉清單/多選屬性值現在按預期從管理設定中派生。 以前，屬性值是從預設儲存設定派生的。

<!-- MC-43010-->

* GraphQL類別查詢返回有關按預期對暫存類別所做的更改的資訊。

<!-- AC-711-->

* 現在，在部署時，產品清單將準確地呈現在管理員中，產品既分配給父類別，又分配給其子類別，但位於每個類別中的不同位置。 以前，產品清單呈現失敗，錯誤為： `Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "<ID>" already exists`。 [GitHub-33145](https://github.com/magento/magento2/issues/33145)

<!-- AC-1148-->

* 現在，可以將具有多個選項（超過150個）的多選屬性分配給新產品。 以前，屬性選項保存在 `catalog_product_entity_varchar` 表，並且並非所有選項在您在管理中重新開啟產品時都存在。 [GitHub-33486](https://github.com/magento/magento2/issues/33486)

<!-- AC-904-->

* 當路由器無法實例化從URL收集的操作類時，添加了案例驗證。 Adobe Commerce現在顯示標準錯誤消息。 以前，Adobe Commerce顯示了以下錯誤：  `PHP Error: Cannot instantiate abstract class Magento\Catalog\Controller\Product\Compare`。

<!-- ACP2E-10-->

* Adobe Commerce現在在滿足以下條件的訂單上應用兩個購物車規則時正確計算折扣：一個購物車規則與優惠券代碼一起應用 **整個購物車的固定價格**  條件和第二個購物車價格規則沒有優惠券和 **產品價格折扣百分比** 的子菜單。 以前，當前的購物車規則已對某些產品應用折扣時，相關算法無法將折扣按比例地分攤到購物車產品中。

<!-- ACP2E-115-->

* 將許多產品（大約10,000個）分配給某個類別不再導致瀏覽器崩潰。

<!-- ACP2E-122-->

* 現在，無論是從管理員保存還是導入，映像屬性都始終如一地保存在資料庫中。 以前，影像ALT文本值保存不一致。 如果影像存在且標籤設定為空，則不會在資料庫中重置標籤值。

<!-- ACP2E-155-->

* 目錄小部件SQL查詢已優化。 以前，大型MySQL查詢減慢了頁面負載並導致MySQL中斷。

<!-- ACP2E-165-->

* 價格篩選器現在可以正確使用庫存不足的可配置產品。 以前，庫存不足的可配置產品未在其正確的價格範圍內顯示。

<!-- ACP2E-330-->

* 更新子產品不再刪除在部分索引過程中從其父可配置產品繼承的目錄規則折扣。 以前，當我們將可配置產品分配給某個類別，而不是其關聯的簡單產品，然後使用該類別建立目錄規則時，Adobe Commerce在部分索引編製過程中刪除了分配給該簡單產品的目錄規則。

<!-- ACP2E-216-->

* 添加產品選項時，分組和可配置產品的網格視圖清單現在僅包含簡單和虛擬產品。 以前，應用程式套件括帶選項的簡單產品。

### 目錄規則

<!-- MC-41807-->

* 每日更新目錄規則不再導致效能下降。 以前，部分目錄產品價格索引沒有刪除舊價格或日期。

<!-- MC-38263-->

* Adobe Commerce在部分重新索引期間不再刪除可配置產品的目錄價格規則。 以前，只有子產品在可配置產品重新編製索引時被重新編製索引。

<!-- ACP2E-331-->

* 目錄價格規則 **類別不是category_id** 條件現在適用於不屬於任何類別的產品。

### 可配置產品

<!-- MC-42188-->

* 可配置產品選項標籤名稱現在基於在建立管理訂單期間所選的商店視圖。 以前，Adobe Commerce使用預設儲存視圖中的標籤名稱。

<!-- MC-42187-->

* 當啟用了用於顯示出貨產品的全局標誌時，產品清單現在正確地包括出貨產品的子產品。 以前，如果啟用此標誌時，多個子產品選項之一的庫存不足，則產品清單不包括子產品。

<!-- MC-42340-->

* 您現在可以使用 `addConfigurableProductsToCart` 用於在非預設儲存視圖中將可配置產品添加到購物車中的變異。 以前，當網站ID和商店ID不同時，您無法將可配置產品添加到購物車。 [GitHub-30948](https://github.com/magento/magento2/issues/30948)

<!-- MC-43051-->

* GraphQL `products` 查詢不再返回有關可配置產品的禁用子產品的資料。

<!-- ACP2E-101-->

* 為可配置產品建立新配置不再覆蓋現有配置中的更改。 以前，現有變體的狀態已用預設狀態覆蓋 `enabled` 新變體生成後。

<!-- ACP2E-175-->

* Adobe Commerce在嘗試將可配置產品的禁用子項添加到購物車時不再拋出內部錯誤。

### 客戶

<!-- MC-24204-->

* Adobe Commerce現在在建立訂單期間考慮管理區域設定的網站範圍。 以前，訂單詳細資訊（如客戶地址屬性）僅在一個網站上在多站點部署中正常工作。 [GitHub-23254](https://github.com/magento/magento2/issues/23254)

### 客戶細分

<!-- MC-42241-->

* 在您建立公司帳戶時，新客戶段的匹配客戶計數現在會自動更新。 以前，您必須刷新段資料以獲得準確的計數。

### 電子郵件

<!-- MC-42592-->

* 當客戶嘗試使用無效的電子郵件帳戶登錄時，簽出登錄彈出菜單上的電子郵件欄位驗證錯誤現在與客戶登錄頁上的電子郵件驗證錯誤匹配。

<!-- MC-42764-->

* Adobe Commerce在從管理員添加發運注釋時不再在發運詳細資訊電子郵件中包含錯誤消息， **通知客戶** 複選框。 以前，發運確認電子郵件包含以下消息： `We're sorry, an error has occurred while generating this content`。

<!-- MC-42486-->

* 區域和國家/地區ID值現在在電子郵件模板中正確轉換。 以前，當你點擊 **預覽連結** 未正確顯示管理員電子郵件模板中的國家/地區和區域名稱。

<!-- MC-36262-->

* 從管理員為非預設商店視圖發送的銷售更新電子郵件現在包含正確的訂單狀態標籤。 以前，這些電子郵件始終顯示預設儲存的狀態。 [GitHub-29263](https://github.com/magento/magento2/issues/29263)

<!-- AC-721-->

* Adobe Commerce現在包括 `Content-Disposition: inline` 電子郵件中的標題。 [GitHub-29258](https://github.com/magento/magento2/issues/29258)

<!-- magento/magento2/pull/32720-->

* 在使用MicrosoftOutlook和MS Exchange Server的部署中，訂單和發運通知電子郵件現在可以按預期工作。 以前，電子郵件正文為空，但包含帶ATT*標籤的附件。 [GitHub-25076](https://github.com/magento/magento2/issues/25076)

<!-- ACP2E-47-->

* 訂購電子郵件現在包含按照預期使用購物者所在區域本地化的資料。 以前，訂單電子郵件使用管理區域設定。

<!-- ACP2E-107-->

* 按一下任何電子郵件模板的預覽，現在將按照預期在單獨的窗口中開啟模板預覽。  以前，Adobe Commerce從電子郵件模板網格和彈出窗口中同時開啟了模板預覽。

<!-- ACP2E-127-->

* 從非預設網站發送的非同步訂單電子郵件現在包括來自相應網站的徽標URL。 以前，這些電子郵件始終包含預設網站或主要網站的徽標。 (帶有 `storeCode` 值已分配給傳遞給 `UrlInterface` `getUrl` 的子菜單。 此值區分不同儲存/網站的URL，並生成正確的 `baseUrl` )。

### 框架

<!-- AC-515-->

* 數字和非數字字串之間的非嚴格比較現在可以通過將數字轉換為字串和比較字串起作用。 數字和數字字串之間的比較仍然像以前一樣有效。 這意味著 `0 == "not-a-number"` 現在被認為是假的。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-1338-->

* 幫助程式 `Magento\Payment\Helper\Data` 不再在建構子中建立新佈局。 以前，當在自定義命令中使用此幫助程式而不指定區域代碼時，Adobe Commerce拋出了一個錯誤。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1068-->

* 已更新 `allure-framework/allure-php-api` 作曲家依賴性。

<!-- MC-42091-->

* Adobe Commerce現在在引導檔案中出現異常時返回500響應代碼。 以前，Adobe Commerce返回了200 OK狀態代碼。 [GitHub-22196](https://github.com/magento/magento2/issues/22196)

<!-- AC-1318-->

* 貨幣符號現在按預期載入在店面產品詳細資訊頁面上。 以前，在重新載入JavaScript頁後，此符號有時會消失。

<!-- AC-719-->

* 更新 `symfony/console` 運行時不再導致故障 `bin/magento setup:di:compile`。 [GitHub-33595](https://github.com/magento/magento2/issues/33595)

<!-- AC-1504-->

* 已將新的必需選項添加到 `.htaccess` 和 `nginx.conf` 隨Adobe Commerce分發的檔案，以獲得PHP 8.x支援。 已刪除過時的選項。 [GitHub-34358](https://github.com/magento/magento2/issues/34358)

<!-- MC-42448-->

* 商家現在可以上傳多種產品的視頻。 現在，僅當上載的檔案名包含副檔名時，檔案生成過程才會將副檔名附加到檔案名。 以前，當一家商戶嘗試上傳，然後為兩種不同的產品保存同一視頻時，Adobe Commerce拋出了以下錯誤： `Notice: Undefined index: extension in /app/7ha7zds7wvqys_stg/vendor/magento/framework/File/Uploader.php on line 699`。 出現此情況是因為Adobe Commerce試圖將檔案副檔名追加到名稱中，而不管上載的檔案名是否具有副檔名。

<!-- magento/magento2/pull/34106-->

* 已更正問題 `sprintf(__())` 和 `sprintf(Magento\Framework\Phrase())` 構造以在整個代碼庫中與PHP 8.x相容。 以前，Adobe Commerce拋出了此類錯誤： `Expected parameter of type 'string', 'Magento\Framework\Phrase' provided`。 [GitHub-34085](https://github.com/magento/magento2/issues/34085)

<!-- AC-1605-->

<!-- MC-42934-->

* 改進了高級搜索查詢參數的驗證。 [GitHub-33589](https://github.com/magento/magento2/issues/33589)

<!-- ACP2E-69-->

* 正在執行 `bin/magento support:backup:code` 現在按預期建立備份。 以前，Adobe Commerce建立了備份，但拋出了錯誤。

<!-- ACP2E-82-->

* 已成功執行 `cron` 進程現在已分配狀態 `success`。 以前，相同 `cron` 進程可以運行兩次，因為成功 `cron` 進程已分配 `pending` 狀態。

<!-- ACP2E-170-->

* 的 `staging_synchronize_entities_period` `cron` 工作現在按預期工作。 以前，第一次轉移更新已成功應用，但Adobe Commerce隨後更新了此錯誤： `report.ERROR: Cron Job staging_synchronize_entities_period has an error: The active update can't be deleted`。

<!-- ACP2E-102-->

* 的 `Magento_Logging` 模組現在支援IPv6。

### 常規修復

<!-- MC-42506-->

* Adobe Commerce現在在複製產品時，會根據其定義的範圍複製所有產品欄位。 以前， **名稱** 和 **描述** 欄位重置為 `global` 範圍。

<!-- MC-42612-->

* 當產品價格為0時，Adobe Commerce不再對折扣應用增量捨入。 此前，Adobe Commerce計算了負折扣金額。

<!-- MC-42215-->

* 具有 **設定為新** 現在可以成功保存分配了空開始日期和過期結束日期的屬性。 以前，Adobe Commerce在您保存具有以下設定的產品時拋出了此錯誤： `Make sure the To Date is later than or the same as the From Date`。

<!-- MC-41803-->

* Adobe Commerce在更改其SEO URL標識符時，不再複製CMS層次結構中的現有CMS頁。 以前，Adobe Commerce在CMS層次結構中建立了一個新節點，複製了現有節點。

<!-- MC-42775-->

* 管理員現在可以重試已在最大處理時間內運行的操作。 預設最大值為12小時。

<!-- MC-42514-->

* 批量操作處理期間不再出現管道中斷錯誤，原因是用戶的未確認消息。 預回遷計數屬性現在會限制使用者的這些消息，並避免出錯。 以前，運行 `bin/magento queue:consumers:start async.operations.all` 生成此錯誤：  `Broken pipe or closed connection`。

<!-- MC-42075-->

* 第二次登錄嘗試失敗後，購物者將按照預期重定向回登錄頁面。 以前，在第二次登錄嘗試失敗後，購物者被重定向到404頁。 [GitHub-32885](https://github.com/magento/magento2/issues/32885)

<!-- magento/magento2/pull/25279-->

* 已擴展密碼重置令牌有效性以避免在提交密碼更改頁期間出現競爭情況。 [GitHub-29647](https://github.com/magento/magento2/issues/29647)

<!-- AC-1316-->

* 分配給新整合的權限現在受到尊重。 [GitHub-33347](https://github.com/magento/magento2/issues/33347)

<!-- AC-1328-->

* 已更正影響「聯繫我們」表單的例外日誌中留下的郵件的回歸問題。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- magento/magento2/pull/31654-->

* 解決了JavaScript載入客戶資料時的多個問題。 [GitHub-30498](https://github.com/magento/magento2/issues/30498)

<!-- magento/magento2/pull/33324-->

* 使用 `QuoteIdToMaskedQuoteId` 在擴展中不再顯著增加響應時間。 [GitHub-33676](https://github.com/magento/magento2/issues/33676)

<!-- AC-720-->

* 類 `BundleDiscountPrice` 在 `magento2/app/code/Magento/Bundle/Pricing/Price/ConfiguredPrice.php` 現在已按預期聲明。 此前，Adobe Commerce拋出了這個錯誤： `Class Magento\Bundle\Pricing\Price\BundleDiscountPrice not found`。 [GitHub-33334](https://github.com/magento/magento2/issues/33334)

<!-- AC-1239-->

* 由AWSS3適配器編寫的轉義CSV欄位值現在與由其他檔案系統適配器編寫的資料相匹配。

<!-- MC-43046-->

* 現在支援S3相容儲存。 [GitHub-32114](https://github.com/magento/magento2/issues/32114)

<!-- ACP2E-123-->

* 從一台設備註銷不再自動從其他設備註銷購物者。

<!-- ACP2E-168-->

* Adobe Commerce現在成功保存了CMS頁面，當您在儲存視圖級別上從網格內聯編輯時， **使用父節點層次結構** 配置設定已禁用。 以前，Adobe Commerce顯示了此錯誤，但未保存CMS頁面編輯： `A technical problem with the server created an error. Try again to continue what you were doing. If the problem persists, try again later`。

<!-- ACP2E-171-->

* 現在，包含相同頁的節點將正確顯示Breadcrums。 以前，Adobe Commerce顯示屬於多個節點的頁面的節點名稱相同。 Adobe Commerce僅檢索了頁面的第一個節點，即使每個頁面存在多個節點。

<!-- ACP2E-202-->

* URL重寫內聯編輯事件現在已記錄在報告中。

<!-- ACP2E-290-->

* 的 `mage-messages` 如果沒有新消息，則不重置cookie。

### 禮品卡

<!-- MC-42327-->

* 在購物者輸入無效的禮品卡時添加了更詳細的錯誤資訊。

### GraphQL

<!-- PWA-1938-->

* 的 `generateCustomerToken` 和 `revokeCustomerToken` 現在，突變為用戶狀態提供了正確的快取ID。 以前，這些突變使用的 `x-magento-cache-id`效能下降。

<!-- PWA-1506-->

* 的 `setBillingAddressToCart` 變異現在正確使用 `same_as_shipping` 參數，以設定與發運地址匹配的開單地址。 以前，Adobe Commerce顯示了以下錯誤： `The shipping method is missing. Select the shipping method and try again`。 [GitHub-30924](https://github.com/magento/magento2/issues/30924)

<!-- PWA-1980-->

* GraphQL購物車操作現在僅在查詢請求時計算購物車總計。 以前，購物車工序始終計算總計，這是一個資源密集型工序。

<!-- MC-42781-->

* 的 `addProductsToCart` 現在，變異只會將分配給標題中定義的商店的產品添加到購物車中。

<!-- MC-42783-->

* `products` 使用分層導航過濾器的查詢現在會返回正確的子類別清單。 [GitHub-33387](https://github.com/magento/magento2/issues/33387)

<!-- MC-42831-->

* 返回的查詢和突變 `ConfigurableCartItem` 對象包含與預期相關的已配置變型資訊。

<!-- MC-42082-->

* 的 `products` query現在返回配置產品選項值和變型屬性值。 以前，這些值在查詢響應中為空。

<!-- MC-41794-->

* 的 `products` 查詢現在可以在商店視圖級別上禁用子產品時正確篩選捆綁產品。 以前，查詢返回在商店視圖級別禁用的子產品。

<!-- PWA-1311-->

* GraphQL現在為New Relic提供描述性事務名稱，這對調試很有幫助。 [GitHub-30915](https://github.com/magento/magento2/issues/30915)

<!-- MC-42903-->

* 的 `setShippingAddressesOnCart` 變異現在支援在購物車上設定送貨地址，當 **顯示電話** 管理配置設定設定為可選。 此前，Adobe Commerce拋出了這個錯誤： `Field CartAddressInput.telephone of required type String! was not provided`。

<!-- MC-42970-->

* 更正了 `addSimpleProductsToCart` 變異允許您將簡單產品添加到未分配給目標網站的購物車中。

<!-- MC-42600-->

* MySQL查詢已針對GraphQL優化 `products` 使用搜索參數來細化搜索結果的查詢。

<!-- MC-43189-->

* 的 `addConfigurableProductToCart` 如果產品未包括在請求的範圍內，則變異不再支援將產品添加到購物車。

<!-- MC-42666-->

* 的 `products` 查詢現在只返回分配給請求的儲存視圖的可配置變型。 以前，已返回請求的可配置產品的所有變型。

<!-- MC-42652-->

* `addSimpleProductsToCart` 請求現在可以並行運行。 以前，對同一SKU的多個請求為同一購物車ID建立了重複的行項目，而不是像預期的那樣增加產品數量。

<!-- AC-856-->

* 的 `addProductsToCompareList` 現在，變異可以用來比較可配置產品的變型。

<!-- MC-42443-->

* 從後端更新層產品的價格時，新價格將在客戶的購物車上正確更新。 以前，雖然已正確更新購物車摘要部分中的小計，但未更新行小計。

<!-- AC-697-->

* 的 `addProductsToCart` 現在，當用於添加具有多個選擇選項的捆綁產品時，突變會將所有選定選項添加到購物車中。 以前，變異只添加了最後一個選擇。 [GitHub-33123](https://github.com/magento/magento2/issues/33123)

<!-- MC-38815-->

* GraphQL查詢現在將可選電話欄位的值設定為空字串時，按預期返回計費地址。 以前，查詢返回一個空地址值。 [GitHub-30218](https://github.com/magento/magento2/issues/30218)

<!-- ACP2E-51-->

* 的 `products` 當多個產品具有相同的相關性或價格值時，查詢響應現在根據指定的排序順序列出產品。

<!-- ACP2E-75-->

* 併發 `addSimpleProductsToCart` 和 `addProductsToCart` 請求不再導致重複的報價項。

<!-- ACP2E-76-->

* `products` 查詢分層導航篩選器現在可返回正確的子類別清單。 現在，在 `includeDirectChildrenOnly` 在請求中提供標誌。 以前，當產品被分配到多個類別時，所有類別都包括在匯總部分中。

<!-- ACP2E-132-->

* 為GraphQL搜索查詢添加了搜索建議功能。

<!-- ACP2E-288-->

* 的 `OrderAddress.telephone` 欄位現在是可選的 `customer` 查詢或其他查詢和變異，以返回或修改客戶訂單地址。

<!-- ACP2E-278-->

* 現在，當通過API更改組ID時，將在店面和管理員中為指定組中的客戶正確更新價格。 以前，當通過API更改組ID時，未正確更新這些價格。

### 影像

<!-- MC-42080-->

* 具有透明背景的水印影像不再在其覆蓋的透明產品影像上具有白色背景。 以前，當水印影像和產品影像都具有透明背景時，水印以白色背景顯示。

<!-- AC-1240-->

* 現在，在啟用AWSS3時，發票和發運收據的徽標將按預期上載並顯示。

<!-- MC-42160-->

* 與添加到部署中CMS頁面的映像關聯的媒體標籤，在該部署中，管理員設定為與儲存URL不同的域，現在按預期包含儲存URL。 以前，媒體標籤包含靜態管理URL，而不是預期的儲存URL。 [GitHub-32930](https://github.com/magento/magento2/issues/32930)

<!-- ACP2E-315-->

* Adobe Commerce在刷新映像快取的同時同時在店面上載入映像時，不會再拋出錯誤。

### 導入/導出

<!-- AC-1486-->

* `bin/magento remote-storage:sync` 當檔案名相似但只差一兩個字元時，不再失敗。 以前，第一個映像已正確儲存，但第二個類似命名的映像觸發了同步失敗，並出現以下錯誤： `Notice: Undefined index: media/catalog/product/5/_ in /src/vendor/magento/module-remote-storage/Driver/Adapter/Cache/Generic.php on line 197`。 [GitHub-34337](https://github.com/magento/magento2/issues/34337)

<!-- MC-41672-->

* Adobe Commerce現在在計畫導出後將導出檔案名中的時間戳轉換為用戶的時區。 以前，這些值未轉換，Adobe Commerce顯示UTC時間戳。

<!-- MC-42330-->

* 當多次導入同一CSV檔案時，Adobe Commerce不再在遠程儲存中建立重複的映像。

<!-- AC-1045-->

* 導入不再失敗，但出現以下消息： `Import failed: Area code not set: Area code must be set before starting a session`。 [GitHub-16171](https://github.com/magento/magento2/issues/16171)

<!-- AC-988-->

* 您現在可以在運行後成功導入 `bin/magento app:config:dump` 和手動編輯 `config.php`。 [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- MC-41672 23734-->

* 非預設的多值分隔符現在可用於自定義的多選擇屬性。 以前，導入期間驗證失敗。 [GitHub-23156](https://github.com/magento/magento2/issues/23156)

<!-- ACP2E-86-->

* 現在，在從CSV導入期間，可以正確分配類別中的產品位置。

### 索引

<!-- MC-42791-->

* Adobe Commerce現在在重新編製索引後在店面上按預期顯示產品。 此前，當前被重新編製索引的前500種產品處於庫存狀態，而後500種產品處於庫存狀態時，店面沒有顯示任何附加產品。

<!-- magento/magento2/pull/27212-->

* 已解決合併中的一致性問題 `indexer.xml` 的子菜單。 中允許的值 `classType` 在未合併和合併時是相同的 `indexer.xml` 的子菜單。 [GitHub-29609](https://github.com/magento/magento2/issues/29609)

<!-- AC-190-->

* 在類別索引器中實現了同步機制，以防止完全索引器和部分索引器並行運行。 以前，當這些索引器並行運行時，可以暫時省略儲存在前面的類別頁中的產品，或者類別頁可以臨時空出產品。

### 基礎設施

<!-- AC-1172-->

* 不支援 `str_contains` 方法已替換為支援的函式。 這是Adobe Commerce已知的問2.4.3。 [GitHub-33680](https://github.com/magento/magento2/issues/33680)

<!-- magento/partners-magento2ee/pull/573-->

* 重構代碼庫以正確使用關鍵字 `match`，是PHP 8.x中的保留關鍵字。 [GitHub-33626](https://github.com/magento/magento2/issues/33626)

* HTML標籤現在已正確嵌套和關閉，以滿足JQuery 3.5.x中包括自定義元素的非void元素的標準。 <!-- AC-1942-->

<!-- magento/magento2/pull/34234)-->

* 固定 `abs()` 和 `round()` 函式，與PHP7.x和PHP8.x相容。  [GitHub-34322](https://github.com/magento/magento2/issues/34322)

<!-- AC-719-->

* 更新 `symfony/console` 運行時不再導致故障 `bin/magento setup:di:compile`。 [GitHub-33595 ](https://github.com/magento/magento2/issues/33595)

<!-- magento/magento2/pull/34175-->

* 已更正 `colinmollenhour/cache-backend-redis` 作曲家依賴性。 [GitHub-34177](https://github.com/magento/magento2/issues/34177)

<!-- magento/magento2/pull/33932 magento/magento2/pull/33992-->

* 已重新構造代碼庫，以刪除對 `phpunit/phpunit`。 [GitHub-33916](https://github.com/magento/magento2/issues/33916)

<!-- MC-42960-->

* Adobe Commerce現在顯示一個只讀管理員 `pubs/media` 嘗試訪問包含映像的產品的產品詳細資訊頁面。 以前，Adobe Commerce拋出PHP錯誤。 [GitHub-32819](https://github.com/magento/magento2/issues/32819)

<!-- AC-853-->

* 所有成員級別 `@api` 注釋在整個代碼庫中都移到了他們的類中。

<!-- AC-1977-->

* `gift-card Cms` 構件資料已從 `Magento/WidgetSampleData` (Magento Open Source)至 `Magento/GiftCardSampleData` (Adobe Commerce) 這解決了在PHP8.1上安裝(Magento Open Source)示例資料時出現的問題。

<!-- AC-1001-->

* 在Adobe Stock整合代碼庫中 `@api` 按需要。 [GitHub-32875](https://github.com/magento/magento2/issues/32875)

<!-- AC-1770-->

* 現在，使用模擬預準備語句時，使用本機PHP類型而不是字串返回結果集中的整數和浮點。 [GitHub-34625](https://github.com/magento/magento2/issues/34625)

<!-- AC-1697-->

* 已禁用從假值自動建立陣列，以確保與PHP 8.1相容。

<!-- AC-1338-->

* 幫助程式 `Magento\Payment\Helper\Data` 不再在建構子中建立新佈局。 以前，當在自定義命令中使用此幫助程式而不指定區域代碼時，Adobe Commerce拋出了一個錯誤。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1077-->

* 你現在可以通過 `data` 塊實例建構子的參數 `di.xml`。

<!-- MC-43096-->

* 優化 `Generator.php` 可讀性。 [GitHub-33809](https://github.com/magento/magento2/issues/33809)

<!-- AC-1313-->

* 改進了JWK簽入 `JwsManager` 類，以處理直接在標題中設定算法的情況。 以前，此檢查忽略了此有效方案。 [GitHub-32636](https://github.com/magento/magento2/issues/32636)

#### 升級PHP 8.1相容性

<!-- AC-1605-->

* PHP 8.1中已棄用的函式已從代碼庫中刪除。 [GitHub-34497](https://github.com/magento/magento2/issues/34497)

* 為了與PHP 8.1相容，將返回類型聲明添加到不完整的內部方法。 [GitHub-34498](https://github.com/magento/magento2/issues/34498) <!-- AC-1606-->

<!-- AC-1147-->

* 已更新根 `composer.json` 元包  `composer.json` 檔案到PHP 8.1。 [GitHub-34009](https://github.com/magento/magento2/issues/34009)

* 第三方 `jquery.tabs` 庫（最新版本）

* NPM包（最新版本） [GitHub-33512](https://github.com/magento/magento2/issues/33512)。 [GitHub-33972](https://github.com/magento/magento2/issues/33972) <!-- magento/magento2/pull/33515 33998-->

* `jquery.cookie` 第三方庫（最新版本） [GitHub-34427](https://github.com/magento/magento2/issues/34427) <!-- AC-101-->

#### 合成器依賴項更新

* 所有Composer依賴項都已更新為與PHP 8.1相容的版本。

* PHPUnit已升級到最新版本(9.5.x)。 Test和test框架已更新為與新版本相容。 <!-- AC-404-->

#### JavaScript依賴關係更新

<!-- magento/magento2/pull/33871-->

* `jquery-validate` 第三方圖書館  [GitHub-33853](https://github.com/magento/magento2/issues/33853)

<!-- ENGCOM-8667-->

* `Less.js` (v3.13.1) [GitHub-32845](https://github.com/magento/magento2/issues/32845)

#### 庫刪除和棄用

* 已刪除以下庫，因為Adobe Commerce2.4.x支援的所有瀏覽器都內置了對此功能的支援：

   * `es6-collections.js`   <!-- AC-18-->
   * `MutationObserver.js` <!-- AC-15-->
   * `Modernizr` <!-- AC-12-->
   * `FormData.js`

* 已刪除未使用的 `jquery.hoverIntent` JavaScript庫。 [GitHub-33732](https://github.com/magento/magento2/issues/33732) <!-- AC-97-->

* `lib/internal/Magento/Framework/Filter/Money.php` 已棄用。 它包含 `money_format()` 函式，已在PHP 8.x中刪除。 [GitHub-33870](https://github.com/magento/magento2/issues/33870)<!-- magento/magento2/pull/34366)-->

* 已刪除不建議使用且不受支援 `grunt-autoprefixer` 檔案。 [GitHub-34037](https://github.com/magento/magento2/issues/34037) <!-- magento/magento2/pull/34032-->

#### 庫升級

* 以下庫已升級到更新的版本：

   * `script.aculo.us` <!-- AC-363-->
   * `Chart.js`  <!-- AC-361-->
   * `moment.js` <!-- AC-11-->
   * `moment-timezone-with-data.js`   <!-- AC-10-->
   * `matchMedia.js` <!-- AC-8-->
   * `underscore.js`  <!-- AC-13-->
   * `PrototypeJS`  <!-- AC-17-->
   * `RequireJS`
   * `LessCSS`

### 發票

<!-- AC-1564-->

* 轉換到 `int` 已刪除自動遞增的發票ID（如果前置詞為字串）。 因此，對於以字串為前置詞的數字，發票現在顯示0。 [GitHub-34451](https://github.com/magento/magento2/issues/34451)

### 記錄

<!-- MC-42360-->

* Adobe Commerce不再為失敗的API調用建立執行批量操作的日誌條目 **系統** > **批量操作**。 以前，失敗的API調用的永久條目已添加到批量操作日誌中。

<!-- AC-1607-->

* 不再允許從false值自動建立陣列。 [GitHub-34499](https://github.com/magento/magento2/issues/34499)。 [GitHub-34589](https://github.com/magento/magento2/issues/34589)

### Adobe Commerce編碼標準

<!-- magento/magento-coding-standard/pull/219-->

* 已更新 `phpunit/ phpunit` 至 `magento-coding-standard` 儲存庫。 [GitHub-33622](https://github.com/magento/magento2/issues/33622)

<!-- magento/magento2/pull/33858-->

* 已更新 `webonyx/graphql-php` 對Adobe Commerce編碼標準儲存庫中^14.9版的依賴項。 [GitHub-32863](https://github.com/magento/magento2/issues/32863)

<!-- magento/magento-coding-standard/pull/322-->

* 添加新嗅探 `Magento2.PHP.ArrayAutovivification` 對Adobe Commerce編碼標準進行識別，從錯誤值中自動建立陣列。 [GitHub-34509](https://github.com/magento/magento2/issues/34509)

<!-- magento/magento-coding-standard/pull/325-->

* 添加新嗅探 `Magento2.Functions.DeprecatedFunction` Adobe Commerce編碼標準。 [GitHub-34547](https://github.com/magento/magento2/issues/34547)

<!-- magento/magento-coding-standard/pull/326-->

* 添加了不建議使用的函式以偵查 `Magento2.Functions.DiscouragedFunction` 在Adobe Commerce編碼標準中。 [GitHub-34548](https://github.com/magento/magento2/issues/34548)

<!-- magento/magento-coding-standard/pull/335-->

* 的 `Magento2.Annotation.MethodAnnotationStructure` 嗅覺不再失敗，出現假陽性。 [GitHub-34679](https://github.com/magento/magento2/issues/34679)

### 媒體集

<!-- AC-1054-->

* 的 `bin/magento media-gallery:sync` 命令在啟用AWSS3的部署中不再失敗。

<!-- AC-1000-->

* 當菜單項超過11且 **啟用舊媒體集** 配置設定已啟用。 [GitHub-33889](https://github.com/magento/magento2/issues/33889)

<!-- MC-42837-->

* 編輯具有多個影像的產品時，「媒體集」頁籤的載入時間已縮短。 [GitHub-33434](https://github.com/magento/magento2/issues/33434)

### MFTF

<!-- AC-516-->

* `CURLOPT_POSTFIELDS` 不再將對象作為陣列接受。 要將對象解釋為陣列，請執行顯式(`array`)cast。 此做法也適用於接受陣列的其他選項。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

* `curl_init()` 現在返回 `CurlHandle` 對象，而不是資源。 的 `curl_close()` 函式不再有效。 相反， `CurlHandle` 如果實例不再被引用，則會自動銷毀它。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

<!-- AC-1397-->

* 已修復可下載產品的MFTFtest中的錯誤。 [GitHub-34270](https://github.com/magento/magento2/issues/34270)

<!-- magento/magento2/pull/33530-->

* 已刪除 `CliCacheFlushActionGroup` 從 `CatalogSearch`。 `GroupedProduct`。 `Newsletter`。 `Paypal`。 `Quote`, `Review` 模組。 [GitHub-33531](https://github.com/magento/magento2/issues/33531)

<!-- AC-515-->

* 數字和非數字字串之間的非嚴格比較現在可以通過將數字轉換為字串和比較字串起作用。 數字和數字字串之間的比較仍然像以前一樣有效。 這意味著0 == &quot;not-a-number&quot;現在被視為false。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-517-->

* `parse_url()` 現在區分缺失查詢和空查詢和片段。 [GitHub-33782](https://github.com/magento/magento2/issues/33782)

<!-- magento/magento2-functional-testing-framework/pull/873-->

* 已更新代碼庫，以避免在使用 `ReflectionType::isBuiltin()` 的雙曲餘切值。 [GitHub-34194](https://github.com/magento/magento2/issues/34194)

#### 新建操作組

`AdminCheckOrderStatusInGridActionGroup` [GitHub-33747](https://github.com/magento/magento2/issues/33747)

`StorefrontSelectFirstShippingMethodActionGroup` [GitHub-33773](https://github.com/magento/magento2/issues/33773)

`AdminClickUpdateChangesOnCreateOrderPageActionGroup` [GitHub-33689](https://github.com/magento/magento2/issues/33689)

#### 操作組

重複性操作已替換為以下test中的操作組：

`AdminAddInStockProductToTheCartTest` [GitHub-34512](https://github.com/magento/magento2/issues/34512)

`AdminAddBundleItemsTest` [GitHub-34312](https://github.com/magento/magento2/issues/34312)

`AdminConfigurableProductAddConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductBulkUpdateTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminConfigurableProductDisableAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductOutOfStockAndDeleteCombinationTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductOutOfStockTestDeleteChildrenTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductRemoveAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductRemoveConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminCreateAndEditSimpleProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateAndEditVirtualProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateInactiveFlatCategoryTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminCreateInactiveInMenuFlatCategoryTest` [GitHub-34510](https://github.com/magento/magento2/issues/34510)

`AdminCreateDuplicateCategoryTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminCreateDuplicateProductTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminDeleteSimpleProductTest` [GitHub-33783](https://github.com/magento/magento2/issues/33783)

`AdminEditRelatedBundleProductTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminMassDeleteBundleProductsTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminNavigateMultipleUpSellProductsTest` [GitHub-34314](https://github.com/magento/magento2/issues/34314)

`AdminSimpleProductSetEditContentTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminSimpleProductTypeSwitchingToConfigurableProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminConfigurableProductTypeSwitchingToVirtualProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminCreateConfigurableProductWithDisabledChildrenProductsTest` [GitHub-33775](https://github.com/magento/magento2/issues/33775)

`AdminUpdateFlatCategoryAndAddProductsTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminUpdateTopCategoryUrlWithNoRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`AdminUpdateTopCategoryUrlWithRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`CatalogProductListWidgetOperatorsTest`  [GitHub-34579](https://github.com/magento/magento2/issues/34579)

`CreateProductAttributeEntityWithReservedKeysTest`[GitHub-34422](https://github.com/magento/magento2/issues/34422)

`EnableDisableBundleProductStatusTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`StorefrontCheckRefundGrandTotalActionGroup` [GitHub-34315](https://github.com/magento/magento2/issues/34315)

`StorefrontInactiveCatalogRuleTest` [GitHub-33556](https://github.com/magento/magento2/issues/33556)

`StorefrontConfigurableProductCantAddToCartTest` [GitHub-33786](https://github.com/magento/magento2/issues/33786)

`StorefrontConfigurableProductOptionsTest` [GitHub-33785](https://github.com/magento/magento2/issues/33785)

`StorefrontConfigurableProductCanAddToCartTest` [GitHub-33784](https://github.com/magento/magento2/issues/33784)

`StorefrontConfigurableProductGridViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontConfigurableProductListViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontProductNameWithHTMLEntitiesTest` [GitHub-33806](https://github.com/magento/magento2/issues/33806)

`StorefrontProductNameWithDoubleQuoteTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

#### 新test

`AdminCreateOrderWithCheckedAppendCommentCheckboxTest` [GitHub-32381](https://github.com/magento/magento2/issues/32381)

`CheckoutWithEnabledCaptchaTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

`StorefrontAddProductWithBackordersAllowedOnProductLevelToCartTest` [GitHub-33635](https://github.com/magento/magento2/issues/33635)

`StorefrontGiftMessageForOrderOnCheckoutCartPageTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCaptchaCheckoutWithEnabledCaptchaTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCheckoutWithEnabledMinimumOrderAmountOptionTest` [GitHub-33460](https://github.com/magento/magento2/issues/33460)

#### 重構test

`CaptchaWithDisabledGuestCheckoutTest` [GitHub-30828](https://github.com/magento/magento2/issues/30828)

### 通訊

<!-- ACP2E-147-->

* 具有適當權限的用戶現在可以按預期管理客戶新聞稿訂閱。 以前，只有具有完全權限的管理員才能在「管理」客戶帳戶頁面上管理客戶新聞稿訂閱。

### 訂單

<!-- MC-41981-->

* 現在，購物者可以成功重新訂購現有訂單，該訂單包含一個產品，該產品包含從店面和管理員中選擇的檔案類型和類型下拉清單的自定義選項。 以前，Adobe Commerce拋出錯誤，未處理重新訂購。

<!-- MC-42746-->

* 現在，按商店貸項支付並已核銷固定產品稅(FPT)的訂單的發票包括正確的總計。

<!-- MC-42332-->

* 現在將按預期載入「管理訂單詳細資訊」頁。 以前，Adobe Commerce在為具有某些稅的訂單載入訂單詳細資訊頁時拋出以下錯誤： `Call to a member function getId() on array`。

<!-- MC-38521-->

* 具有限制權限（包括訂單和發運權限）的管理員現在可以按預期查看訂單頁。 以前，Adobe Commerce在具有這些權限的管理員嘗試查看訂單時拋出錯誤。 [GitHub-14633](https://github.com/magento/magento2/issues/14633)

<!-- ACP2E-74-->

* 當設定了允許的最大數量限制時，購物者現在可以下單，該訂單包括子可配置產品。

### 付款方法

<!-- AC-1830-->

* 購物者現在可以使用Braintree在啟用3DS的部署中使用未設定區域的計費地址下單。 以前，購物者點擊結帳時，結帳會凍結 **訂單**，且無法完成購買。 [GitHub-34204](https://github.com/magento/magento2/issues/34204)

<!-- AC-1229-->

* 現在支援Venmo付款選項。

<!-- AC-1228-->

* PayPal現在可以通過BN代碼跟蹤。

<!-- AC-493-->

* `bin/magento setup:upgrade` 現在從Adobe Commerce2.4.2-p1升級時按預期運行。 此前，Adobe Commerce拋出了這個錯誤： `Unable to apply data patch Magento\Paypal\Setup\Patch\Data\UpdateBmltoPayLater for module Magento_Paypal`。 [GitHub-33678](https://github.com/magento/magento2/issues/33678)

<!-- MC-42830-->

* 現在，正確的儲存ID用於在管理訂單發放期間檢索保存的信用卡。 現在，根據網站範圍配置設定，在訂購期間顯示儲存的信用卡。 以前，當管理員嘗試從管理員為客戶建立訂單並選擇「儲存的信用卡」方法時，儲存的信用卡沒有可用的選項。

<!-- AC-344-->

* PayPal信用顯示禮品卡金額的異常現象已得到解決。 以前，當啟用PayPal信用並配置了多張禮品卡金額時，如果購物者更改了禮品卡價值的金額，則店面不會更新分期付款金額。 這是Adobe Commerce已知的問2.4.3。

#### 貝帕爾

<!-- MC-42154-->

* Adobe Commerce在使用PayPal Express付款方法結帳時不再顯示錯誤。 以前，儘管簽出過程已完成，但Adobe Commerce顯示了以下錯誤： `Something went wrong`。

<!-- AC-722-->

* PayPal Express現在可以按預期從購物車中使用。 以前，當您按一下 **貝帕爾** 按鈕，Adobe Commerce拋出此錯誤：  `To check out, please sign in with your email address`。 [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42279-->

* PayPal Payflow Pro現在在PayPal Payflow Pro網關與 **付款活動** 設定為 **授權**。 A **銷售** 事務將按照預期發送到Payflow，其父事務ID是在簽出時建立的保管庫令牌。 以前， **延遲捕獲**  事務已建立併發送到PayPal Payflow。 [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42442-->

* PayPal Payments Advanced付款完成後，購物者現在將重定向到成功頁面。 以前，即使付款已成功處理且未記錄任何錯誤，購物者也不會重定向到此頁。

### 效能

<!-- AC-705-->

* 已將索引添加到 `magento_giftcardaccount.code` 以提高效能。

<!-- MC-42158-->

* 模組清單負載執行時間得到改善。

<!-- AC-932-->

* 熱門搜索項快取的效能已得到改善。 以前， `search_query` 表，完成搜索查詢所花的時間越長。 [GitHub-27559](https://github.com/magento/magento2/issues/27559)

<!-- MC-42892-->

* Adobe Commerce預設情況下，在產品保存期間同步調整影像大小。 商家現在可以通過對影像進行少量編輯，將影像調整為背景非同步過程 `di.xml` 的子菜單。

<!-- ENGCOM-9168-->

* 在多商店部署中，類別產品索引器的效能已得到改善。 [GitHub-33984](https://github.com/magento/magento2/issues/33984)

<!-- AC-1179-->

* 用於 `glob()` 系統調用通過減少 `glob()` 呼叫。  [GitHub-34025](https://github.com/magento/magento2/issues/34025)

<!-- ACP2E-63-->

* 改進了非同步順序網格重索引過程的效能。

<!-- ACP2E-117-->

* 已優化產品導出過程中的記憶體消耗。

<!-- ACP2E-325-->

* 已優化將產品詳細資訊頁面與相關產品一起載入。 相關產品條件查詢也已優化。

### 定價

<!-- MC-42243-->

* 當產品價格接近或等於零且啟用了共用目錄時，價格排序現在會按預期工作。 以前，零層價格在重新編製價格指數時被忽略。

<!-- ACP2E-87-->

* 如果「類別」頁上的價格篩選器不包含第二個值，Adobe Commerce將不再引發錯誤。 以前，Adobe Commerce在日誌檔案中引發異常。

### 產品警報

<!-- MC-41917-->

* 新 `product_alert` consumer通過建立隊列消息、運行consumer和縮短執行時間來改進客戶警報的發送。 此前，Adobe Commerce在發送超過10萬份產品警報時拋出了記憶體不足的異常。 Adobe Commerce還花了20多小時發送所有警報。

### 產品視頻

<!-- MC-42105-->

* Adobe Commerce現在 **保存** 在添加視頻時輸入不完整的URL時，按鈕和自動完成欄位（管理） **目錄**  > **產品** > **添加視頻**)。 以前， **保存** 按鈕已禁用，且未填充欄位。

### 退貨授權(RMA)

<!-- MC-42987-->

* 「管理員建立退貨產品」網格現在顯示稅，包括僅配置為使用價格顯示稅的產品的價格。 以前，Adobe Commerce未檢查 `tax/calculation/price_includes_tax` 。

### 評論

* 產品清單視圖現在顯示產品的正確星號評級。 [GitHub-30196](https://github.com/magento/magento2/issues/30196)

<!-- ACP2E-89-->

* 當購物者點擊時，評論現在可以像預期一樣看到 **審閱** 在店面產品頁面上。

<!-- ACP2E-111-->

* 現在，產品星級評級在店面產品清單頁面的「網格」和「清單」視圖中保持一致。 以前，同一產品在「網格」和「清單」視圖模式下可能有不同的分級。

### 獎勵

<!-- ACP2E-129-->

* 獎勵積分平衡和獎勵積分歷史記錄現在顯示相同的平衡。 現在，已正確扣除過期點。 以前，獎勵積分餘額沒有準確反映過期積分。

<!-- ACP2E-158-->

* 過期的獎勵積分現在標籤為 **已過期** 在「獎勵積分歷史記錄」網格的「原因」部分。

### 銷售

<!-- MC-42025-->

* 升級到MariaDB 10.2.34後，具有大資料集的表在非同步模式下銷售網格更新的效能得到了改善。

<!-- MC-42531-->

* Adobe Commerce現在按預期從店面刪除HTML標籤 **帳戶** > **我的命令** > **查看訂單** 的子菜單。 以前，Adobe Commerce在店面客戶訂單注釋部分顯示HTML標籤。

<!-- MC-42377-->

* 自動test範圍，以驗證是否存在 `sales_shipment_grid.order_id` 已添加。

<!-- MC-43163-->

* `POST V1/orders` 調用立即更新擴展屬性，無錯誤。 以前發生SQL語法錯誤。

### 搜索 {#search-heading}

<!-- MC-42799-->

* 價格範圍的分層導航選項現在與自定義價格屬性一樣適用。 Adobe Commerce在篩選自定義價格屬性時使用價格導航步驟的配置。 以前，Adobe Commerce使用手動步驟配置。

<!-- MC-42545-->

* 現在，儲存面在分層導航中顯示當前類別的所有子類別，而不管目錄中可用的類別數。

<!-- MC-41706-->

* Elasticsearch目錄搜索現在不區分音調符號。 以前，搜索沒有強調文字的詞時，結果與搜索具有相同強調文字的詞時的結果不同。

<!-- ACP2E-8-->

* 現在，對包含特殊字元的SKU屬性正確設定了搜索權重。

<!-- ACP2E-36-->

* `category_name` 已添加到系統保留的產品屬性代碼中。 Adobe Commerce現在顯示用戶嘗試使用屬性代碼建立產品屬性時的錯誤 `category_name`。 以前，產品未列在預期類別中，並且記錄了Elasticsearch錯誤。

<!-- ACP2E-68-->

* 熱門搜索詞現在在每次GraphQL搜索查詢後更新。

<!-- ACP2E-249-->

* Adobe Commerce現在在Elasticsearch價格指數映射中添加了正確的價格欄位。 以前，將錯誤的價格欄位添加到具有儲存ID而不是網站ID的索引中。

### 裝運

<!-- MC-42758-->

* 發運電子郵件現在僅包括當前發運的跟蹤編號。 以前，當訂單包括多個發運時，每個發運的電子郵件都包括與訂單相關的所有發運的跟蹤編號。

<!-- MC-42396-->

* Adobe Commerce現在可以在購物者在多送貨模式下從購物車中刪除產品時成功更新迷你購物車，然後切換到單個送貨地址。 此前，產品價格未按預期更新。

<!-- AC-267-->

* 使用S3儲存適配器時，現在可以按預期導入表速率。 以前，Adobe Commerce顯示了以下錯誤： `File "https://[bucket].s3.eu-central-1.amazonaws.com/[prefix]/tmp/phpLjGmHf" not found`。 [GitHub-33072](https://github.com/magento/magento2/issues/33072)

<!-- MC-42577-->

* 您現在可以按照預期從 **商店**  > **配置**  >  **銷售**  >  **銷售電子郵件**。 [GitHub-33165](https://github.com/magento/magento2/issues/33165)

<!-- ACP2E-31-->

* Adobe Commerce現在在管理和店面發票頁合計上顯示免費發運成本(0)。 以前，當訂單的發運為零時，Adobe Commerce未在發票頁發運合計中顯示發運金額。

<!-- ACP2E-120-->

* 對線上運輸承運人的費率請求已從幾個請求減少到一個。 現在，可以正確計算每個項目/包的包裝保險和手續費。 以前，Adobe Commerce顯示FedEx運輸方法的運費不正確。

<!-- ACP2E-174-->

* Adobe Commerce現在在建立從波多黎各發運的發運標籤時顯示UPS費率。 以前，Adobe Commerce沒有顯示這些UPS費率。

<!-- ACP2E-227-->

* 現在，從輸入框中刪除後，發運街道地址將完全按預期清除。 以前，在刪除地址後，文本框將保留一個或多個字元。

### 暫存

<!-- MC-42194  -->

* 產品計畫的更新映像和視頻現在已正確保存。 以前，在建立新的計畫更新後，會刪除視頻、URL、標題和說明。

<!-- MC-42501-->

* Adobe Commerce現在在為其啟用該屬性的商店視圖的「計畫新更新」表單中顯示「最低廣告價格」屬性。

<!-- MC-42590-->

* Adobe Commerce現在在產品「計畫更新」表單中只顯示一個「映像」頁籤。 以前，Adobe Commerce重複了此標籤。

<!-- MC-23994-->

* 現在，「計畫更新」預覽中正確顯示產品庫存狀態。 以前，在建立「計畫更新」期間啟用以前禁用的產品時，產品狀態顯示為庫存不足。

### 儲存

<!-- MC-42884-->

* 「作為客戶登錄」功能現在可以在包含不同URL上的多個儲存的部署中按預期工作。 以前，Adobe Commerce未載入正確的儲存，即使訪問正確的儲存域也是如此。

### 站點範圍分析工具

<!-- ACP2E-240-->

* 商家現在可以按預期訪問站點範圍分析工具。 以前，破壞的密鑰對阻止某些商家訪問該工具。

### 稅

<!-- MC-41924-->

* Adobe Commerce現在在客戶選擇將物料發運至多個地址後刪除時，可以正確計算迷你購物車小計。

<!-- MC-41945-->

* 當購物車僅包含虛擬產品時，Adobe Commerce現在在所有結帳頁上顯示相同的稅率。

<!-- AC-714-->

* 可配置產品的層價現在在店面上顯示準確的包括和排除的稅值。 以前，所包括和排除的稅都顯示相同的值。 [GitHub-33673](https://github.com/magento/magento2/issues/33673)

### Test

<!-- magento/magento2/pull/34798-->

* WebAPItest現在與PHP 8.1相容。 [GitHub-34653](https://github.com/magento/magento2/issues/34653)

<!-- magento/magento2/pull/34820-->

* 整合test現在相容於PHP 8.1。 [GitHub-34567](https://github.com/magento/magento2/issues/34567)。 [GitHub-34569](https://github.com/magento/magento2/issues/34569)

<!-- AC-1225-->

* 商家現在可以test購物者所在國的購物體驗，而不是商家所在地。

<!-- AC-266-->

* 整合test儲存器消耗已經減少，這提高了test效能並減少了test完成所需的時間。

<!-- MC-41955-->

* 已添加test，以驗證儲存前端和管理員的自定義日期屬性格式。

<!-- AC-1517-->

* 已更正錯誤 `StorefrontPOWorkflowVerifyApprovalFlowTabTest`。 [GitHub-34378](https://github.com/magento/magento2/issues/34378)

<!-- AC-1571-->

* 功能test因相容PHP 8.x而穩定下來。 [GitHub-34327](https://github.com/magento/magento2/issues/34327)。 [GitHub-34188](https://github.com/magento/magento2/issues/34188)

<!-- magento/magento2/pull/34198-->

* 已修復WebAPItest中的功能問題。 [GitHub-34196](https://github.com/magento/magento2/issues/34196)

<!-- AC-1207-->

* 已修復導致誤報靜態test的錯誤。 [GitHub-34056](https://github.com/magento/magento2/issues/34056)

<!-- magento/magento2/pull/34300-->

* Test範圍已更新 `call_user_func_array`。 [GitHub-34301](https://github.com/magento/magento2/issues/34301)

<!-- AC-1978-->

* 的 `Magento\GraphQl\CatalogGraphQl\ProductSearchTest` test使用AWSElasticsearch運行時不再拋出此錯誤： `Magento\GraphQl\CatalogGraphQl\ProductSearchTest::testSearchSuggestions Failed asserting that an array is not empty. /var/www/html/dev/tests/api-functional/testsuite/Magento/GraphQl/CatalogGraphQl/ProductSearchTest.php:94 /var/www/html/dev/tests/api-functional/framework/Magento/TestFramework/TestCase/GraphQlAbstract.php:257`。

<!-- magento/magento2/pull/33699-->

* 通過更名所有模擬變數以包含以下項，修復了大量非關鍵設備test警告 `Mock` 尾碼並刪除對已過時的對象管理器類的引用。 [GitHub-33695](https://github.com/magento/magento2/issues/33695)

* 的 `Magento\Framework\MessageQueue\TopologyTest` test現在相容AWSMQ [!DNL RabbitMQ] 服務。 以前，此test失敗並顯示以下消息： `Invalid exchange configuration: magento-topic-based-exchange1 Failed asserting that two arrays are equal`。 <!-- AC-1248-->

<!-- magento/magento2/pull/34454-->

* 設備test現在相容於8.1菲律賓比索。 [GitHub-34441](https://github.com/magento/magento2/issues/34441)

#### 設備test

以下單位test已重新分解為使用 `PHPUnit` 而不是 `AspectMock`:

`AllureHelperTest` [GitHub-33294](https://github.com/magento/magento2/issues/33294)

`ObjectHandlerUtil` [GitHub-33584](https://github.com/magento/magento2/issues/33584)

`MockModuleResolverBuilder` [GitHub-33583](https://github.com/magento/magento2/issues/33583)

`MagentoTestCase`  [GitHub-33582](https://github.com/magento/magento2/issues/33582)

`ModuleResolverTest` [GitHub-33308](https://github.com/magento/magento2/issues/33308)

`ParallelGroupSorterTest` [GitHub-33306](https://github.com/magento/magento2/issues/33306)

`SuiteGeneratorTest` [GitHub-33299](https://github.com/magento/magento2/issues/33299)

`OperationDataArrayResolverTest`  [GitHub-33296](https://github.com/magento/magento2/issues/33296)

### 主題

<!-- MC-41887-->

* 現在，當Adobe Commerce在其基URL中配置了子路徑時，通知消息將正確顯示。

<!-- MC-42469-->

* 已添加 `aria-label` 元素，以指示在按一下連結時購物者將導航到的頁面。 以前，同一連結文本用於指向不同頁面的連結。 [GitHub-33075](https://github.com/magento/magento2/issues/33075)

<!-- ACP2E-73-->

* Adobe Commerce在載入具有預先存在的自定義主題的商店首頁時不再顯示錯誤消息。 以前，Adobe Commerce顯示了以下資訊：  `The store will not work correctly in the case when cookies are disabled`。

### 翻譯和區域設定

<!-- AC-285 MC-41400-->

* 的 `UserExpiration` 驗證程式不再失敗 `de_DE` 和 `uk_UA` 區域設定。 以前，當管理員嘗試在Admin中建立新用戶時，如果將語言環境設定為，Adobe Commerce會出錯 `de_DE` 或 `uk_UA`。 [GitHub-32497](https://github.com/magento/magento2/issues/32497)

<!-- MC-41583 AC-989-->

* 瑞士地區名稱現在在建立或編輯地址表單中始終以英文顯示。 [GitHub-32602](https://github.com/magento/magento2/issues/32602)

<!-- magento/magento2/pull/33128-->

* 已更新 `zip_codes.xml` 格恩西島支援GY10郵編的模式。 [GitHub-33144](https://github.com/magento/magento2/issues/33144)

<!-- AC-1080-->

* 已將白俄羅斯區域添加到 `directory_country_region` 的子菜單。 [GitHub-33924](https://github.com/magento/magento2/issues/33924)

<!-- AC-1178-->

* 菲律賓（菲律賓）地點的店面顯示異常問題已得到解決。 [GitHub-33996](https://github.com/magento/magento2/issues/33996)

<!-- AC-1308-->

* 現在，在設定為葡萄牙語（葡萄牙）區域設定的商店中建立新帳戶時，您可以成功輸入客戶出生日期。 以前，Adobe Commerce在嘗試建立帳戶時出錯。 [GitHub-34130](https://github.com/magento/magento2/issues/34130)

<!-- ACP2E-457-->

* 現在，產品詳細資訊頁面已成功與阿拉伯語（沙烏地阿拉伯）區域設定一起顯示。 以前，此區域設定會破壞產品詳細資訊頁面。

### UI

<!-- AC-258-->

* 已更正使用的MFTFtest的錯誤 `maps.googleapis.com`。

<!-- MC-41850-->

* Adobe Commerce現在從「聯繫我們」電子郵件輸入欄位中裁剪不斷空格字元。 以前，提交表單時未從電子郵件輸入中刪除非中斷空格字元（如果已提供），這會導致日誌檔案中出現錯誤。 的 **回復** 生成給儲存管理員的聯繫人電子郵件中也缺少欄位。

<!-- MC-42793-->

* Adobe Commerce現在根據其在管理員中的位置顯示相關產品、追加銷售產品和交叉銷售產品。

<!-- MC-42502-->

* `.action-close` 按鈕現在可以按預期工作 `Multiselect` 在模式中使用。 以前， `action-close` 按鈕無效，因為它繼承了  `.action-close` 按鈕 [GitHub-27240](https://github.com/magento/magento2/issues/27240)

<!-- AC-1217-->

* 「提供」富格代碼段現在出現在「產品」視圖的主價格欄位中。 以前，此段在「產品」視圖的相關產品塊中丟失，導致Google搜索結果顯示不正確的價格。 [GitHub-34063](https://github.com/magento/magento2/issues/34063)

<!-- AC-1584-->

* 已解決運行iOS的裝置的模態高度問題。 [GitHub-34467](https://github.com/magento/magento2/issues/34467)

<!-- MC-40106-->

* 現在，操作下拉菜單在整個店面中正確定位。 [GitHub-31379](https://github.com/magento/magento2/issues/31379)

<!-- AC-1589-->

* 已解決購物車和結帳頁上導航的輔助功能錯誤。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* 螢幕閱讀器現在可以讀取產品頁面上的所有相關表單元素。

<!-- AC-872-->

* 店面目錄產品小部件排序順序(**目錄** > **類別** > **產品**)現在與Admin中配置的順序匹配。 [GitHub-27126](https://github.com/magento/magento2/issues/27126)

<!-- AC-725-->

* 區域選擇器現在可以在「建立帳戶」頁上按預期工作。 [GitHub-30099](https://github.com/magento/magento2/issues/30099)

<!-- MC-42750-->

* 管理客戶網格現在顯示所有客戶資料，包括新添加的資料 `date` 自定義屬性（如預期）。 以前，Adobe Commerce拋出錯誤，在 `date` 屬性集已設定為列。

<!-- AC-1280-->

* 在 **目錄**  >  **產品** 已更改詳細資訊頁面，以準確反映輸入的目的。 不需要用戶輸入的欄位不再顯示帶星號的標籤。

<!-- AC-1275-->

* 現在可以使用Tab鍵訪問富格文本編輯器工具欄。

<!-- AC-1284-->

* 控制項的可訪問名稱現在包括其可見標籤的文本，用於顯示每頁下拉的項數。

<!-- AC-1287-->

* 上的表控制項 **目錄** > **產品** 「詳細資訊」(details)頁面現在具有可見的標籤和折疊表時可訪問的名稱。

<!-- AC-1285-->

* 整個店面的按鈕現在有唯一、描述性的可訪問名稱。 以前，帶有文本按鈕和相鄰的向下箭頭表徵圖按鈕的拆分按鈕具有相同的可訪問名稱。

<!-- AC-1168-->

* 已添加 **今天** 查看「管理訂單和金額」控制面板圖表的選項，以提供全天的銷售和訂單匯總。 [GitHub-34008](https://github.com/magento/magento2/issues/34008)

<!-- AC-1481-->

* 多選項的活動（按一下）狀態 **關閉** 按鈕現在可以始終工作。 [GitHub-34338](https://github.com/magento/magento2/issues/34338)

<!-- magento/magento2/pull/31879-->

* Adobe Commerce在禁用Cookie限制模式後，升級後不再顯示此消息： `The store will not work correctly in the case when cookies are disabled`。 [GitHub-33811](https://github.com/magento/magento2/issues/33811)

<!-- ACP2E-7-->

* 現在，在移動設備上具有垂直縮略圖導航方向的主題上正確顯示全屏產品影像。 以前，在全屏模式下，移動設備上具有垂直縮略圖導航方向的主題上，產品影像被錯誤地縮放或不可見。

<!-- ACP2E-23-->

* 產品詳細資訊頁面中的錯誤消息在 **將小部件產品與後端儲存同步** 配置設定已啟用。

<!-- ACP2E-70-->

* 負值的驗證已添加到 **要退貨的數量** 欄位。

<!-- ACP2E-105-->

* Adobe Commerce購物者點擊時不再顯示重複的地址 **更改地址** 部署中的「複查和付款」頁 **地址搜索** 配置設定已啟用。

<!-- ACP2E-136-->

* 的 **添加產品** 在「管理類別」頁的「在儲存區視圖範圍中工作」時，按預期啟用具有限制權限的管理員的按鈕。

<!-- ACP2E-169-->

* 查看斷點現在在Adobe Commerce一致。

<!-- ACP2E-199-->

* Adobe Commerce現在可以在「管理客戶」頁上正確顯示具有自定義區域設定的自定義客戶日期屬性。

<!-- MC-41760-->

* 使用頁面生成器添加的影像在以768像素的瀏覽器窗口寬度顯示時不再複製到店面。 以前，在瀏覽器窗口寬度為此時，Adobe Commerce通過顯示移動和案頭版本的影像在店面上複製影像。

### URL重寫

<!-- AC-1510-->

* 執行新儲存視圖時，在建立新儲存視圖期間不再為所有儲存視圖重新生成URL重寫 `bin/magento setup:upgrade`。 [GitHub-32954](https://github.com/magento/magento2/issues/32954)

### 視覺跟蹤器

<!-- ACP2E-19-->

* 視覺跟蹤者 **從庫存到底部** 當所有簡單產品都缺貨時，自動排序選項現在對可配置產品按預期工作。

<!-- ACP2E-61-->

* 當未添加任何條件時，不再保存可視跟單程式規則。

### Web API框架

<!-- MC-42008-->

* 啟用永久購物車時，針對自授權客戶資源的Web API請求不再引發授權錯誤。

<!-- MC-42313-->

* 現在，可以使用的子類建立對象 `\Magento\Framework\Api\AbstractSimpleObjectBuilder` 七點三菲律賓比索。以前， `preg_match` 當Adobe Commerce以PHP 7.3托管在Redhat上時拋出此警告消息： `Warning: preg_match(): Compilation failed: unrecognized character follows...`。

<!-- MC-24548-->

* 由 `PUT /V1/guest-carts/:cartId/collect-totals` 請求現在由正確的 `shippingMethod`。 [GitHub-18508](https://github.com/magento/magento2/issues/18508)

<!-- MC-30627 AC-796-->

* 向REST API添加新反序列化程式不再刪除其他反序列化程式。 以前，REST API接受了新的內容類型，但CORE為API定義的內容類型不再有效，並返回400錯誤。 [GitHub-26433](https://github.com/magento/magento2/issues/26433)

<!-- AC-698-->

* 現在，您可以刪除在 `webapi.xml`的子菜單。 [GitHub-33843](https://github.com/magento/magento2/issues/33843)

<!-- AC-1212-->

* Adobe Commerce現在 `customertoken` 按GraphQL或REST API請求執行，如多次連續失敗登錄嘗試後預期的那樣。 此前，Adobe Commerce沒有檢查 `lock_expires_at` 在 `oauth_token_request_log` 大於當前日期和時間，並始終返回失敗嘗試的次數，這使客戶無法登錄。 [GitHub-34067](https://github.com/magento/magento2/issues/34067)

<!-- AC-1190-->

* 將掩碼的報價ID添加到 `QuoteRepository::getList` 不再導致無限循環。 以前，使用依賴REST API更新訂單的付款處理器觸發此行為。 [GitHub-33675](https://github.com/magento/magento2/issues/33675)

<!-- MC-41612-->

* 的 `/rest/all/V1/categories/<above_created_category_id>`  PUT調用現在尊重由 `available_sort_by`。  以前，已在「類別」(Category)頁面上選擇了「可用產品清單排序依據」(Available Product Listing Sort By)下拉清單，以及 **全部使用** 複選框。 [GitHub-32596](https://github.com/magento/magento2/issues/32596)

<!-- ACP2E-11-->

* REST API請求建立客戶令牌的效能已得到改善。

<!-- ACP2E-91-->

* 更正了在 **將儲存代碼添加到URL** 設定為 **是** 而REST呼叫不包含儲存代碼。 儘管負載有效，但調用返回了以下錯誤： `Fatal error: Allowed memory size of ********** bytes exhausted (tried to allocate **** bytes) in vendor/magento/module-store/Model/StoreRepository.php on line 75`。

<!-- ACP2E-153-->

* 現在，可以使用REST API同時建立同一訂單的部分發票。

### 願望清單

<!-- MC-41880-->

* Adobe Commerce不再在類別提要欄中提供希望清單， **在提要欄中顯示** 「wish list（希望清單）」選項已禁用。 以前，Adobe Commerce忽略了這個選項。

### 威西威格

<!-- ACP2E-17-->

* PageBuilder現在可以使用WYSIWYG編輯器正確呈現自定義小部件。

## 已知問題

**問題**:在從Adobe Commerce升級到Adobe Commerce2.4.4-p1期間，商家可能注意到包版本降級通知。 可以忽略這些消息。 軟體包版本的差異源於軟體包生成過程中的異常。 未影響任何產品功能。 查看 [從2.4.4升級到2.4.4-p1的包降級](https://support.magento.com/hc/en-us/articles/8214752983949)  知識庫文章，用於討論受影響的情形和解決方法。

**問題**:商戶無法提交通過Braintree支付Apple支付的訂單的部分退款。 當商家嘗試從訂單發票建立部分退款的貸項通知單時， **退款數量** 欄位不可編輯。  **解決方法**:應用修補程式 `braintree-disabled-partial-capture-for-applepay-googlepay.patch`。 查看 [Adobe Commerce2.4.4:無法建立部分發票](https://support.magento.com/hc/en-us/articles/4487952754957-Adobe-Commerce-2-4-4-Unable-to-create-partial-invoices) 知識庫文章。  <!-- BUNDLE-3088-->

**問題**:在「管理」中未選擇任何選項時，購物者無法將產品添加到購物車 **儲存** >  **配置** > **常規** > **國家/地區選項** > **允許國家/地區**。 Adobe Commerce顯示以下控制台錯誤： `Failed to load resource: the server responded with a status of 400 (Bad Request)`。 <!-- AC-2564-->

**問題**:Dotdigital在 **查找合作夥伴和擴展** > **Magento Marketplace** 已過時。 下面是更新的說明：

Dotdigital是一個客戶參與平台，幫助數字營銷人員和開發人員在整個客戶旅程中提供通信。 我們利用客戶資料的威力，推動品牌的參與、轉化和忠誠度隨其增長和擴展而提高。 客戶喜歡我們易於使用的平台，該平台將第一方資料跨系統連接起來，提供強大的洞察力，並自動化預測性跨渠道消息。

Dotdigital的350多名員工為世界各地和各個行業的中端市場和企業公司服務。 我們渴望激勵負責任的營銷，並致力於可持續性、隱私和安全。 Dotdigital公司自豪地成為世界上第一個碳中和營銷自動化平台，獲得ISO 14001、ISO 27701和ISO 27001認證。

請參閱 [Dotdigital — 營銷自動化](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html) 購買和下載資訊。

## 社區捐款

我們感謝廣大Magento Open Source，並願承認他們對本新聞稿的貢獻。

社區工程團隊 [Magento撰稿人](https://magento.com/magento-contributors) 按月、季度和年度保存一份最佳貢獻個人和合作夥伴清單。 在該「參與者」頁中，您可以在GitHub上跟蹤到其合併公關的連結。

### 合作夥伴貢獻

下表重點介紹了合作夥伴的貢獻。 此表列出了提供拉請求的合作夥伴、外部拉請求編號以及與其關聯的GitHub發行編號（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-4-partner.md}}

### 個人捐款人

下表列出了社區成員的貢獻。 此表列出了提供拉請求的社區成員、外部拉請求編號和與其關聯的GitHub發行編號（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-4-issues.md}}

### 系統要求

我們的技術堆棧構建在PHP和MySQL上。 有關詳細資訊，請參見 [系統要求](../../../installation/system-requirements.md)。

### 安裝和升級說明

您可以使用 [作曲家](../../../installation/composer.md)。

## 遷移工具包

資料遷移工具幫助將現有Magento1.x儲存資料傳輸到Magento2.x。此命令行介面包括驗證、進度跟蹤、日誌記錄和測試功能。 有關安裝說明，請參見 [安裝資料遷移工具](../../../tools/data-migration-tool/install.md)。 考慮探索或幫助 [資料遷移儲存庫](https://github.com/magento/data-migration-tool)。

的 [代碼遷移工具包](https://github.com/magento-commerce/code-migration) 幫助將現有Magento1.x儲存擴展和自定義內容傳輸到Magento2.x。命令行介面包括用於轉換Magento1.x模組和佈局的指令碼。
