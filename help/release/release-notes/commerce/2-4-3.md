---
title: Adobe Commerce2.4.3發行說明
description: 瞭解Adobe Commerce版中的新功能、增強功能、錯誤修復和已知問題。
exl-id: 34b1248f-a44e-489b-94ae-945d31abecea
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '15953'
ht-degree: 0%

---

# Adobe Commerce2.4.3發行說明

Adobe Commerce2.4.3對效能和安全性進行了增強，並對平台進行了重大改進。 安全增強包括擴大reCAPTCHA覆蓋範圍和包括內置速率限制。 核心合成器依賴項和第三方庫已升級到與PHP 8.x相容的最新版本。

此版本包括370多個針對核心代碼的新修復和33個安全增強功能。 本版本中已解決了Adobe Commerce2.4.2發行說明中確定的所有已知問題。

{{bics}}

請參閱 [Adobe Commerce2.4.2-p2發行說明](../security/2-4-2-p2.md) 有關Adobe Commerce2.4.2-p2的資訊。

## 其他發佈資訊

雖然這些功能的代碼與季度版本捆綁在一起，但其中幾個項目(例如B2B、頁面生成器和Progressive Web Application(PWA)Studio)也是獨立發佈的。 這些項目的錯誤修復程式都記錄在每個項目文檔中提供的獨立、特定於項目的發行資訊中。

## 應用MC-43048_set_rate_limits_2.4.3.patch以通過API速率限制解決問題

此修補程式為Web API無法處理陣列中包含20個以上項的請求的問題提供瞭解決方案。 此問題影響運行Magento Open Source2.4.3、Adobe Commerce2.4.3或2.3.7-p1的部署。 已將內置速率限制添加到這些版本中以防止拒絕服務(DoS)攻擊，並將預設最大值設定為20。 此修補程式將預設限制恢復為較高的值。 如果您懷疑您的商店遇到DoS攻擊，Adobe建議將預設輸入限制降低到較低值，以限制可請求的資源數。 查看 [Web API無法處理陣列中20個以上項的請求](https://support.magento.com/hc/en-us/articles/4406893342093) 知識庫文章。

## 應用AC-384_Fix_Incomplative_PHP_Method_2.4.3_ce.patch以解決升級時出現的PHP致命錯誤

升級到Adobe Commerce2.4.3時可能出現以下致命錯誤：

```terminal
PHP Fatal error: Uncaught Error: Call to undefined function Magento\Framework\Filesystem\Directory\str_contains() in [...]/magento/vendor/magento/framework/Filesystem/Directory/DenyListPathValidator.php:74
```

此錯誤源於 `str_contains` 函式，即PHP 8.x函式。 Adobe Commerce2.4.3不支援8.x菲律賓比索。此修補程式將此函式替換為受支援的PHP 7.x函式。 查看 [Adobe Commerce升級2.4.3, 2.3.7-p1 PHP錯誤修補程式](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) 知識庫文章。

## 應用 `AC-3022.patch` 繼續提供DHL作為航運公司

DHL已引入架構版本6.2，並將在不久的將來棄用架構版本6.0。 Adobe Commerce2.4.4和支援DHL整合的早期版本僅支援6.0版。部署這些版本的商家應適用 `AC-3022.patch` 盡早便繼續提供敦豪作為航運公司。 查看 [應用修補程式以繼續將DHL作為運輸承運商提供](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 有關下載和安裝修補程式的資訊，請參閱知識庫文章。

## 亮點

在此版本中查找以下亮點。

### 大量安全增強

此版本包括33個安全修復和平台安全改進。 其中許多安全修復都已備份到2.4.2-p2和2.3.7-p1。

#### 33項安全增強功能，可幫助關閉遠程代碼執行(RCE)和跨站點指令碼(XSS)漏洞

迄今未發生與這些問題相關的已確認攻擊。 但是，某些漏洞可能被利用來訪問客戶資訊或接管管理員會話。 大多數這些問題都要求攻擊者首先獲得對管理員的訪問權限。 因此，我們提醒您採取一切必要步驟保護您的管理員，包括但不限於以下工作：IP允許， [雙因素認證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)，使用VPN，使用唯一位置而不是 `/admin`以及良好的密碼衛生。 請參閱 [Adobe安全公告](https://helpx.adobe.com/security/products/magento/apsb21-64.html) 來討論這些固定問題。

#### 其他安全增強功能

此版本的安全改進改進了對最新安全最佳做法的遵守，包括：

* A **新建作曲家插件** 有助於防止依賴項混淆，並識別與公共軟體包儲存庫中的內部軟體包具有相同名稱的惡意軟體包。 查看 [Adobe版本新Composer插件2.4.3版](https://magento.com/blog/best-practices/adobe-releases-new-composer-plugin-magento-243-release) 部落格帖子。

* **速率限制現在內置到API** 防止拒絕服務(DoS)攻擊。 Web API現在對客戶端可請求的資源大小或數量施加限制（預設最大值設定為20，並可以根據業務需要配置為其他值）。 請參閱 [速率限制](https://developer.adobe.com/commerce/webapi/get-started/api-security/) 有關配置這些限制的資訊。 <!-- MC-35358-->

* **ReCAPTCHA覆蓋範圍已擴展** 要包括：

   * 通過ReCAPTCHA覆蓋具有相應HTML頁的Web API。 （這不包括由整合訪問的Web API。） ReCAPTCHA覆蓋可保護端點免受垃圾郵件攻擊。 當使用OAuth的第三方整合服務訪問Web API時，ReCAPTCHA被禁用。<!-- MC-34472-->

   * Place Order storefront頁和與付款相關的Web API。 預設情況下禁用了這些頁面的ReCAPTCHA保護，並可以從管理員啟用。 此覆蓋增加了反暴力機制以保護商店免受梳理攻擊。

{{cve-notice}}

### 基礎架構改進

本版本包含一些增強功能，可提高框架的質量和以下功能領域：

* 客戶帳戶

* 目錄

* CMS

* OMS

* 導入/導出

* 促銷和目標

* 購物車和結帳

* B2B

* 暫存和預覽

**現在支援PayPal Later** 在包含PayPal的部署中。 此功能允許購物者按雙週分期付款支付訂單，而不是在購買時支付全部金額。 <!-- MC-40556-->

**新建 `use_application_lock` 索引模式**。 的 `use_application_lock` 模式允許通過使用環境變數或通過配置 `app/etc/env.php` 的子菜單。 啟用此模式後，您不再需要在失敗後手動重置索引器。 請參閱 [使用應用程式鎖定模式重新索引進程](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes)。

### 平台增強

2.4.3版尚未與PHP 8.x相容，但以下平台升級使我們更接近與PHP 8.x的未來相容性。

* Core Composer依賴項和第三方庫已升級到與PHP 8.x相容的最新版本。 <!-- MC-39514-->

* KnowkoJS庫已升級到v3.5.1（最新版本）。 <!-- MC-40694-->

* 已刪除已棄用的TinyMCE v3庫。 的 `Magento_Tinymce3Banner` 從Adobe Commerce刪除了與TinyMCE v3.x相關的模組和MFTFtest。 <!-- MC-42199 42170 -->

* 已測試2.4.3版並確認與Redis 6.0.12相容。 （版本2.4.x仍與Redis 5.x相容。）

* Laminas庫依賴項已升級為PHP 8.x相容版本。 已從 `composer.json` 的子菜單。 **Adobe Commerce2.4.3用海帶3.4.0**。 <!-- MC-39513-->

### 效能增強

此版本包括一些增強功能，可縮短產品價格和目錄規則索引器的索引時間。 商家現在可以從客戶組或共用目錄中排除網站，這減少了索引記錄的數量並改進了索引時間。

### 即時搜索

[即時搜索](https://docs.magento.com/user-guide/live-search/overview.html) 由 [Adobe Sensei](https://www.adobe.com/sensei.html) 通過使用人工智慧和機器學習算法對聚集的訪問者資料進行深入分析，提供直觀的搜索體驗。 請參閱 [Live Search發行說明](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/release-notes.html)。

### GraphQL

此版本增加了GraphQL對以下功能的支援：

* **共用目錄**<!-- PWA-1294-->

* **願望清單**。 的 [addWishlistItemsToCart變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-wishlist-items-to-cart.html) 將物料從指定的希望清單移到客戶的購物車。 <!-- magento/partners-magento2ee#449-->

* **禮品登記處**。 涵蓋的任務包括： <!-- PWA-1290-->

   * 使用 [giftRegistry查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry.html) 返回客戶禮品登記冊的內容。

   * 搜索禮品登記表 [類型](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-type-search.html)。 [電子郵件](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-email-search.html)或 [ID](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-id-search.html)。

   * [建立](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-gift-registry.html)。 [更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry.html)或 [刪除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry.html) 禮品登記。

   * [更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry-items.html) 或 [刪除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry-items.html) 禮品登記處的物品。

   * [移動所有項目](https://devdocs.magento.com/guides/v2.4/graphql/mutations/move-cart-items-to-gift-registry.html) 從手推車到禮品登記處。 <!-- ENGCOM-9082 9087-->

   * [添加](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-gift-registry-registrants.html)。 [更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry-registrants.html)或 [刪除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry-registrants.html) 禮品登記處的註冊人。

   * [共用](https://devdocs.magento.com/guides/v2.4/graphql/mutations/share-gift-registry.html) 有被邀請者的禮品登記處。

* **可轉讓報價**。 查看 [`negotiableQuote`](https://devdocs.magento.com/guides/v2.4/graphql/queries/negotiable-quote.html) 和 [`negotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/queries/negotiable-quotes.html) 的下界。 <!-- PWA-1292-->

   新的突變包括：

   * [`requestNegotiableQuote`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-negotiable-quote.html)

   * [`setNegotiableQuoteShippingAddresses`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-address.html)

   * [`updateNegotiableQuoteQuantities`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-negotiable-quote-quantities.html)

   * [`removeNegotiableQuoteItems`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-negotiable-quote-items.html)

   * [`closeNegotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/close-negotiable-quotes.html)

   * [`deleteNegotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-negotiable-quotes.html).

* **共用路由**。 的 [路由查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/route.html) 和 [可路由介面](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/routable-interface.html) 支援產品、類別和CMS頁上的路由請求。 的 `urlResolver` 查詢已被棄用，其功能已被 `route` 的子菜單。

查看 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 獲取這些增強功能的詳細資訊。

### B2B

2.4.3版引入了B2B v1.3.2。此版本包含多個錯誤修復。 請參閱 [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html)。

### 頁面生成器

頁面生成器現在可作為Magento Open Source中的捆綁擴展。 它現在是Adobe Commerce和Magento Open Source的默2.4.3內容編輯工2.4.3。它可以用任何第三方模組替換WYSIWG編輯器。

頁面生成器將在以下管理區域替換TinyMCE編輯器：

* CMS頁
* CMS塊
* 類別說明
* 產品說明

在TinyMCE中建立的所有內容都作為HTML遷移到頁面生成器中。

### PWA Studio

有關增強和錯誤修復的資訊，請參見 [PWA Studio版本](https://github.com/magento/pwa-studio/releases)。 請參閱 [相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 的子菜單。

### 升級相容性工具

範圍 [升級相容性工具](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html) 已根據社區的反饋進行擴展。 加入我們 [#upgrade相容性工具](https://magentocommeng.slack.com/archives/C019Y143U9F) Slack渠道，以獲得Adobe產品團隊和社區的支援，並幫助指導工具的未來方向。

### 雲托管服務更新

此版本包括對我們對Amazon簡單儲存服務(AWSS3)和AmazonAurora雲托管服務的支援的增強。 它為AWSElastiCache、AWSElasticsearch和AWS管理隊列(Rabbit MQ)提供認證支援。 (我們已測試了這些服務與Adobe Commerce的功能、效能和整合。)

### Adobe Stock整合

本版本包括Adobe Stock整合v2.1.1。

### 供應商開發的擴展

有關此版本的功能和更改的更新，請參閱以下主題：

* [Amazon](https://docs.magento.com/user-guide/payment/amazon-pay.html)。 Amazon支付已棄用，將在更高版本的2.4.x中刪除。 版本2.4.3及更高版本將僅包含相容性更新和主要錯誤修復。

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [Dotdigital Engagement雲](../../../upgrade/modules/upgrade.md)

* [克拉爾納](https://docs.magento.com/user-guide/payment/klarna.html)

* [頂點雲](https://docs.magento.com/user-guide/tax/vertex.html)

* [Yotpo產品評論](../../../upgrade/modules/upgrade.md)

## 已修復問題

我們解決了核心代碼中的數2.4.3問題。

### 安裝、升級、部署

<!-- MC-41154-->

* 的 `bin/magento setup:db:status` 命令現在返回一條消息，指出成功升級後所有內容都是最新的。 以前，應用程式顯示以下錯誤： `Declarative Schema is not up to date`。

<!-- MC-40031 -->

* 當新可配置產品的建立失敗時，配置值現在將保留在表單重新載入時。 以前，在重新載入表單期間丟失了值，應用程式顯示了以下錯誤： `The value specified in the URL Key field would generate a URL that already exists`。 [GitHub-32102](https://github.com/magento/magento2/issues/32102)

<!-- MC-37596-->

* 運行時，應用程式不再引發異常 `bin/magento setup:upgrade` 從與雷迪斯的Magento Open Source部署升級到Adobe Commerce。

<!-- MC-34453-->

* 將部署從Magento Open Source升級到Adobe Commerce後，先前建立的購物車價格規則現在顯示在「內容轉移」儀表板頁面上。

<!-- ENGCOM-8508 -->

* 在Galera群集上運行的部署現在支援更多客戶。 [GitHub-31038](https://github.com/magento/magento2/issues/31038)

<!-- ENGCOM-9036 MC-41938 -->

* 現在，管理員可以在安裝應用程式時成功登錄到部署 `—use-rewrites=0` 選項或 `web/seo/use_rewrites` 設定為0 `core_config_data_table`。 [GitHub-32100](https://github.com/magento/magento2/issues/32100)

<!-- ENGCOM-8451 -->

* 已更新 `sortOrder` 載入 `AsyncCssPlugin`。 應用程式現在載入 `AsyncCssPlugin` 先 `JsFooterPlugin`。 [GitHub-30882](https://github.com/magento/magento2/issues/30882)

<!-- ENGCOM-8701 -->

* `Magento\Config\Model\Config\PathValidator` 現在檢查顯示路徑以確定元素是否存在，如果元素具有配置路徑，則使用 `config.xml` 路徑代替驗證。 [GitHub-27678](https://github.com/magento/magento2/issues/27678)

<!-- ENGCOM-8684 -->

* 使用Grunt或按伺服器端編譯的Less檔案現在會生成相同的結果。 前情提要。 `.abs- styles`，擴展其他 `.abs- styles` 在 `_extends.less`，與Grunt編譯時未正確輸出。 這導致生產和開發部署之間存在差異。 [GitHub-7231](https://github.com/magento/magento2/issues/7231)

### 管理GWS

<!-- MC-40703-->

* 管理員GWS現在使用 `int` 值 `website_id` 具有自定義權限的管理員的管理集合中的SQL條件。

### Adobe Stock整合

<!-- MC-39754-->

* 應用程式現在顯示一條資訊性消息和指向管理員的連結 **商店** > **配置** > **高級** > **系統** 在「搜索Adobe Stock」頁上，當 **API密鑰（客戶端ID）** 和 **客戶端密碼** 未設定。 以前，應用程式顯示以下錯誤： `We couldn't find any records` 沒有連結。

### 後端

<!-- MC-40389-->

* 具有限制訪問權限的管理員（例如，只將訪問權限分配給一個網站的管理員）無法再編輯設定為「全局」範圍的類別。

<!-- MC-39037-->

* 生成的系統報告(**系統** > **支援** > **系統報告**)現在正確呈現。 以前，報告內容未對齊。

<!-- MC-30152 ENGCOM-8625-->

* 應用程式現在關閉 **價格** 欄位 **動態價格** 在建立捆綁包產品期間啟用設定。 以前，當您從中刪除值時，應用程式引發驗證錯誤 **價格** 欄位 **動態價格** 設定已啟用。 [GitHub-26214](https://github.com/magento/magento2/issues/26214)

<!-- MC-24840-->

* 當管理URL與部署中預設網站URL不同時，不再發生無限重定向，在部署中，應用程式配置為可從兩個URL訪問。

### 捆綁產品

<!-- MC-41810-->

* 您現在可以使用 `addProductsToCart` 變異：將具有多個複選框選項的捆綁產品添加到購物車。

<!-- MC-41614-->

* 捆綁產品的價格索引現在使用臨時表執行，這避免了鎖定資料庫表。 以前，應用程式使用物理表，導致表被鎖定。

<!-- MC-41177 magento/magento2#32594-->

* 捆綁產品的價格現在可以設定為0.00。以前，當將價格設定為0.00後返回到編輯頁時，價格將返回到其預設值。 [GitHub-32383](https://github.com/magento/magento2/issues/32383)

<!-- MC-40603-->

* 包含捆綁產品的訂單的訂單詳細資訊現在顯示在下單之前更改價格時捆綁產品的正確價格。

<!-- MC-40035-->

* 捆綁產品庫存狀態現在根據其子產品的庫存狀態進行更新。 以前，當從產品中刪除一個選項時，捆綁產品會顯示為庫存不足，並且捆綁產品有兩個具有相同SKU的選項。

<!-- MC-39276-->

* 管理員現在可以更改捆綁產品的值 `Shipment Type` 屬性已移到其他屬性組後。 以前，此屬性始終與 `Together` 值。

<!-- MC-38900-->

* GraphQL `setGuestEmailOnCart` 突變現在可以正確更新來賓電子郵件。 以前，未更新報價和報價地址表。

<!-- MC-37719-->

* 通過REST API調用將子產品添加、刪除或更新到捆綁產品，現在會觸發按預期重新編製索引。 以前，這些操作不會觸發重新索引，因此，在執行手動重新索引之前，捆綁產品不會更改其庫存狀態。

<!-- MC-35725 ENGCOM-8568-->

* 應用產品現在顯示具有層價格的捆綁產品的正確價格範圍。 [GitHub-30284](https://github.com/magento/magento2/issues/30284)

<!-- MC-35638-->

* 此時，應用產品將在購物車頁面和結帳工作流的發運步驟中，在捆綁包選項的價格更改後顯示與預期相同的總價格。

<!-- MC-32617-->

* 現在，您可以通過從客戶購物車訪問捆綁產品來成功配置捆綁產品。 以前，「配置產品」頁從未完全載入，您無法保存設定。

<!-- MC-30317 ENGCOM-7141-->

* 商家現在可以在多商店部署的每個商店視圖上為捆綁產品指定唯一的價格。 網站特定價格保存在 `catalog_product_bundle_selection_price` 的子菜單。 以前，即使在以下情況下，應用程式也不會將捆綁產品的價格基於網站範圍  **商店** > **配置** > **目錄** > **目錄** > **價格** > **目錄價格範圍** 已設定為 `Website`。 未將特定於網站的價格保存在 `catalog_product_bundle_selection_price`。 [GitHub-12584](https://github.com/magento/magento2/issues/12584)

<!-- ENGCOM-8705 MC-38953-->

* 捆綁產品的發票現在顯示關聯簡單產品的正確數量 **動態定價** 已禁用。 以前，與捆綁產品關聯的簡單產品具有父產品的數量，而不是捆綁產品)。 [GitHub-30802](https://github.com/magento/magento2/issues/30802)

<!-- magento/magento2#30374 MC-36930-->

* 的 `updateProductsInWishlist` 現在，突變成功更新了屬於希望清單中捆綁產品的項目。 以前，此變異不會更新希望清單項，而是刪除了項並建立了新項，從而更改了項ID。

<!-- MC-38575-->

* 現在可以設定 `required_options` 和 `has_options` 使用建立或更新捆綁產品時的捆綁包屬性與預期相同 `POST /V1/product/:sku` 端點。 以前，儘管已將這些自定義屬性設定為1(1)，但這些自定義屬性仍設定為0（零）。

<!-- MC-38483-->

* 以前缺少的捆綁產品資料現在包含在轉移過程中。 這解決了當購物者從產品清單頁面購買捆綁產品與直接從產品頁面添加捆綁產品時，產品行為的不一致問題。

### 快取

<!-- ENGCOM-8554-->

* 的 `varnish6.vcl` 已更新檔案以繞過客戶頁的快取。

### 驗證碼

<!-- MC-41572-->

* 現在，驗證碼正確驗證購物者提供的資料，在購物者多次嘗試使用PayPal Payflow Pro簽出失敗後，驗證碼欄位將按預期顯示。

<!-- MC-41281-->

* 驗證碼驗證不再在結帳工作流的付款頁面上隨機失敗。

<!-- MC-41001-->

* 在您超過失敗的完成嘗試次數後，應用程式現在會按預期顯示驗證碼欄位。 以前，雖然應用程式提示您再次嘗試驗證碼質詢，但它未顯示驗證碼欄位。

<!-- MC-40359-->

* 驗證碼現在在簽出頁面上按預期工作。 以前，在購物者正確回答驗證碼質詢後，結帳頁上的載入程式始終未完成，應用程式顯示以下錯誤： `captchaData[formId] is undefined`。 (僅當購物者使用以前訪問運行2.3.5-p1的部署的同一瀏覽器時，才出現此錯誤。)

<!-- ENGCOM-8630-->

* `_.isEmpty()` 簽入 `defaultCaptcha.js` 檔案現在成功完成。 以前，這些檢查未完成，因此，升級後無法載入簽出頁。 [GitHub-31641](https://github.com/magento/magento2/issues/31641)

### 購物車和結帳

<!-- MC-41911-->

* 現在，在轉換和更新購物車中的產品數量時，應用程式將考慮特定於區域設定的小數位。

<!-- MC-41574-->

* 訂單不再省略具有發運地址的提供的客戶名稱。 以前，由於 `same_as_billing` 標籤未保存在資料庫中。

<!-- MC-40946-->

* 在購物車中編輯產品時，到禮品登記處的連結現在會按預期持續。 以前，當您按一下 **更新購物車** 按鈕

<!-- MC-40696-->

* 使用者的所有隊列消息 `quoteItemCleaner` 現在將其狀態更改為 `complete` 刪除幾個產品後預期的情況。 以前，只有一條消息將此消費者的狀態更改為 `complete`，其餘的狀態更改為 `in progress`。

<!-- MC-40657-->

* 現在，只有在購物者按一下「條款和條件」時，應用產品才會在相關塊中顯示「條款和條件」驗證消息 **下單** 按鈕 以前，每當購物者在結帳工作流中更改付款方式時，應用產品就會在「應用折扣代碼」塊中顯示此消息： `The order wasn't placed. First, agree to the terms and conditions, then try placing your order again`。

<!-- MC-40271 magento/partners-magento2ee#476-->

* 現在，在從「計畫更新」預覽中將捆綁產品添加到購物車並按一下購物車後，您將按照預期重定向到結帳頁。 [GitHub-447](https://github.com/magento/partners-magento2ee/issues/447)

<!-- MC-39581-->

* 如果購物者未能按一下 **更新** 按鈕並返回發運步驟。

<!-- MC-39517  magento/partners-magento2ee#460-->

* 此時，應用產品將顯示一條資訊性錯誤消息，並且當購物者添加無效的產品數量並按一下 **更新物料和數量** 按鈕。 以前，應用程式已升級產品數量，但未顯示錯誤消息。 [GitHub-459](https://github.com/magento/partners-magento2ee/issues/459)

<!-- MC-37807 ENGCOM-8530-->

* 具有可定製選項的產品 `(File)` 現在，在多發運結帳流程中應包括活動連結。 以前，此連結丟失。 [GitHub-31095](https://github.com/magento/magento2/issues/31095)

<!-- MC-37689-->

* 管理購物車現在以正確貨幣顯示支援多種貨幣的商店的產品價格。 以前，價格會多次轉換為指定貨幣 — 首先是當產品從店面添加到購物車時，然後是隨後在管理員上呈現訂單時。

<!-- MC-36703  magento/partners-magento2ee#439-->

* 管理員完成管理員在店面上購物者建立的訂單後，應用程式現在會按預期清空購物車。 以前，當管理員完成訂單後客戶重新登錄時，店面購物車仍包含訂單內容。 [GitHub-30262](https://github.com/magento/magento2/issues/30262)

<!-- MC-35640-->

* 購物者現在可以將「最低廣告價格」(MAP)超過其常規產品價格的產品添加到購物車中。

<!-- MC-35289-->

* 購物者現在可以在簽出多個地址時，從簽出工作流成功更改其帳單地址。

<!-- MC-29335-->

* 現在，所有由來賓建立的付款交易記錄都將保存到資料庫，並在管理員中按預期顯示。 以前，只有一小部分併發訂單被保存在資料庫中，而且大多數訂單由於資料庫鎖導致超時而丟失。 [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-23989 magento/magento2#32251 -->

* 當來賓將產品放在迷你購物車中時，應用程式現在可以正確顯示包含特殊字元的內聯歡迎消息。 以前，應用程式未將產品添加到迷你購物車或顯示歡迎消息。 [GitHub-32250](https://github.com/magento/magento2/issues/32250)

<!-- MC-41165-->

* 啟用店內交貨後，現在可成功載入簽出工作流的發運頁。 以前，應用程式引發JavaScript錯誤，並且發運簽出頁未完全呈現。

<!-- ENGCOM-9006-->

* 已添加 `itemResolvers` 目錄的參數 `di.xml` 的子菜單。 因此，如果禁用可配置和分組的產品模組，則不再中斷簽出。 [GitHub-30860](https://github.com/magento/magento2/issues/30860)

<!-- ENGCOM-8944-->

* 應用程式現在顯示 **付款和發運資訊** 按管理員重新排序工作流期間的要求。 [GitHub-30257](https://github.com/magento/magento2/issues/30257)

<!-- MC-39158 ENGCOM-8493-->

* 當購物車包含具有多個選項的捆綁產品時，應用產品現在可以正確應用購物車價格規則和購物車級固定折扣。 以前，購物車價格規則未完全應用於訂單。 [GitHub-30952](https://github.com/magento/magento2/issues/30952)

<!-- MC-40983 ENGCOM-8828-->

* 的 **添加到購物車** 清單視圖中的「 CSV文本」。 [GitHub-32232](https://github.com/magento/magento2/issues/32232)

<!-- ENGCOM-8490-->

* 現在可以使用POST `/V1/carts/mine/items` 將已分組產品的自定義數量添加到購物車。 [GitHub-26909](https://github.com/magento/magento2/issues/26909)

<!-- ENGCOM-8886-->

* 應用產品不再使用發運地址填充結帳工作流的開單地址區域。 以前，當 **省/自治區** 帳單地址的欄位為空，發運地址和開單地址不同，應用程式填充了開單地址 **省/自治區** 的子菜單。 [GitHub-31608](https://github.com/magento/magento2/issues/31608)

### 目錄

<!-- MC-36787-->

* 成批更新 **啟用數量增量** 和 **數量增量** 屬性現在按預期工作。 [GitHub-29544](https://github.com/magento/magento2/issues/29544)

<!-- MC-41801-->

* 現在，您可以成功複製包含僅數字SKU的共用目錄。 以前，當您嘗試複製共用目錄時，應用程式引發錯誤，因為 `\Magento\Catalog\Model\ProductIdLocator` 類在僅數字SKU中無法正常工作。

<!-- MC-41575-->

* 在您啟用與Admin的最近產品同步後，應用程式不再引發JavaScript錯誤。 以前，應用程式顯示此JavaScript錯誤： `Cannot read property 'status' of undefined`。

<!-- MC-41534-->

* 現在將按預期應用自定義主題佈局更新。 以前，會忽略自定義主題佈局更新。

<!-- MC-41499-->

* 產品類別快取現在按預期清除 `cron` 在 `indexer_update_all_views` 執行。 以前，重新編製索引後「類別」頁上的產品計數不正確。

<!-- MC-41422-->

* 當在儲存視圖的產品更新REST API請求中未指定屬性時，屬性值現在保持不變。 以前，如果未指定屬性，應用程式會將屬性值重置為其預設範圍值。

<!-- MC-41284-->

* 管理產品網格(管理 **目錄** > **產品**)現在按SKU篩選產品時顯示正確的產品計數。

<!-- MC-40873-->

* 在啟用「類別權限」後，當產品添加到CMS頁時，應用產品現在會顯示準確的庫存狀態，並阻止顯示指定客戶組的價格。 以前，所有產品都顯示為庫存不足，而不考慮實際庫存狀況。

<!-- MC-40859-->

* 「高級定價客戶組價格」塊價格輸入欄位現在的最小寬度為五位數。 以前，在低解析度顯示中，此欄位中只顯示兩個符號。

<!-- MC-40825-->

* 應用程式現在在刪除產品後成功刪除產品介質映像。 以前，在成功刪除產品後，產品介質映像仍保留在資料夾中。

<!-- MC-40811 magento/magento2#32042-->

* 當您在管理中建立或編輯產品，然後建立計畫設計更新時，頁面佈局將按預期更新。 [GitHub-32007](https://github.com/magento/magento2/issues/32007)

<!-- MC-40773-->

* 現在，值為零的自定義產品屬性可以成功保存為空。 以前，應用程式未將此值更新為空。

<!-- MC-40736 ENGCOM-8789-->

* 自定義類別佈局更新檔案現在應用於預期的產品。 以前，更新檔案句柄(`catalog_category_view_*`)與產品句柄不匹配。 [GitHub-27285](https://github.com/magento/magento2/issues/27285)

<!-- MC-40679-->

* 已為「管理產品」清單的「固定產品稅」(FPT)列禁用排序。 以前，在對FPT列排序後無法重新載入「產品」頁。

<!-- MC-40443-->

* 當匹配產品在每個網站上的價格不同時，頁面生成器產品小部件預覽現在可以像預期的那樣在多網站部署中工作。

<!-- MC-40344 ENGCOM-8629-->

* 使用GET按產品搜索位置排序 `/rest/V1/products/?searchCriteria[filterGroups]` 現在按預期工作。 以前，產品集合沒有欄位 `position` 值。 [GitHub-31591](https://github.com/magento/magento2/issues/31591)

<!-- MC-40122-->

* 管理員用戶現在可以在 **名稱** 和 **SKU** 的子菜單。 以前，應用程式將多個空格折疊為一個空格。

<!-- MC-39869-->

* 當管理員上的可售數量為0時，產品現在在店面上顯示為庫存不足。 以前，這些產品在店面上以庫存狀態列出，並且應用程式顯示一個活動 **添加到購物車** 按鈕 [GitHub-31117](https://github.com/magento/magento2/issues/31117)

<!-- MC-39809-->

* 管理員現在可以添加具有可定製選項的產品 `(File)` 從「管理客戶」頁的「購物車」部分（「客戶的活動」列）到「訂購物品」網格。 以前，應用程式未將項添加到清單中，因為在插入到中之前，該值的格式不正確 `\Magento\Catalog\Model\Product\Type\AbstractType::_prepareOptions`。

<!-- MC-39619-->

* 該應用程式不再提示購物者為僅具有一個選項的捆綁產品選擇產品選項。

<!-- MC-39617-->

* 在建立新小部件期間，應用程式現在將顯示佈局更新中的所有子類別（錨點類別和非錨點類別）。

<!-- MC-39481-->

* 的 `product` 當僅為一個儲存視圖更新產品名稱時，查詢不再覆蓋多儲存部署中所有儲存視圖的預設值。 [GitHub-31083](https://github.com/magento/magento2/issues/31083)

<!-- MC-39470 magento/magento2#31492-->

* Adobe Commerce在更改「管理相關產品」、「追加銷售」和「交叉銷售」清單的每頁值時，會按預期更新總頁數。 [GitHub-31059](https://github.com/magento/magento2/issues/31059)

<!-- MC-39444-->

* 管理員現在可以添加具有兩個或多個可定製選項的產品 `(File)` 按SKU訂購。

<!-- MC-39140-->

* 當具有限制權限的管理員將產品構件添加到管理員的CMS頁時，應用程式不再引發錯誤。 以前，當管理員按一下 **保存** 按鈕：  `We are sorry, an error has occurred while generating the content`。

<!-- MC-39134-->

* 現在，開啟產品詳細資訊頁面，其中日期可自定義選項填充了上一訂單的日期， **使用JavaScript日曆** 的子菜單。 如果自定義日期選項值解析器未根據當前配置格式化，則它現在會回退到替代格式。 以前，自定義日期選項值為空。

<!-- MC-39104-->

* 當產品出貨時，應用產品現在在購物車中僅顯示一個錯誤。 以前，應用程式顯示冗餘消息。 [GitHub-27469](https://github.com/magento/magento2/issues/27469)

<!-- MC-35717  magento/partners-magento2ee#427-->

* 管理員現在可以添加具有可定製選項的產品 `(File)` 按SKU訂購。 [GitHub-30285](https://github.com/magento/magento2/issues/30285)

<!-- MC-30625-->

* 您現在可以保存產品和價格，而無需指定 `type_id`。 [GitHub-13639](https://github.com/magento/magento2/issues/13639)

<!-- MC-39024-->

* 當REST時，組產品現在可在店面按預期提供 `PUT /V1/products/:sku/links` 請求用於將新子產品與新組產品關聯。 以前，產品在運行後未正確索引 `bin/magento cron:run`。

<!-- ENGCOM-9010 8947-->

* 您無法再使用 `NULL` SKU值。 以前，您可以通過自定義導入程式或直接在資料庫中建立沒有SKU值的產品，但是當您嘗試從管理員編輯產品時，應用程式拋出了錯誤。 [GitHub-27411](https://github.com/magento/magento2/issues/27411)。 [GitHub-32525](https://github.com/magento/magento2/issues/32525)

<!-- ENGCOM-8902-->

* 將所需的自定義選項添加到簡單產品中不再會刪除父複合產品，而不會出現警告。 應用程式現在顯示一個資訊性警告，並且不保存產品。  以前，應用程式保存了產品更改，但未顯示警告。 [GitHub-30492](https://github.com/magento/magento2/issues/30492)

### 目錄規則

<!-- MC-39896-->

* 的 `products` 當目錄價格規則應用於物料時，query現在返回當前值。 [GitHub-26738](https://github.com/magento/magento2/issues/26738)

<!-- ENGCOM-8367-->

* 以開頭的臨時表 `catalogrule_product__temp` 當在購物車或目錄規則過期、禁用或變為非活動狀態後重新索引失敗時，現在會按預期刪除。 [GitHub-22273](https://github.com/magento/magento2/issues/22273)

<!-- ENGCOM-8949-->

* 現在，時區的應用方式與 `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexById` 和 `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexByIds`。 [GitHub-29549](https://github.com/magento/magento2/issues/29549)

### CMS內容

<!-- MC-41471-->

* 現在，在上載期間，當 **啟用前端調整大小** 配置設定已啟用。

<!-- MC-40663 ENGCOM-8883-->

* 已修復CMS頁保存控制器的錯誤處理。 以前，當 `Error` 對象被拋出 `cms_page_prepare_save` 事件，應用程式將此對象傳遞給 `addExceptionMessage` 函式，因為此函式需要 `Exception`。 通過使用 `addErrorMessage` 的子菜單。 [GitHub-30149](https://github.com/magento/magento2/issues/30149)

<!-- MC-33490 magento/partners-magento2ee#435 -->

* 現在，您可以從「CMS編輯」頁的「層次結構」頁籤將新頁分配給多個節點。 以前，嘗試將頁面分配給節點時會發生唯一約束衝突。 [GitHub-363](https://github.com/magento/partners-magento2ee/issues/363)

### 可配置產品

<!-- MC-40719-->

* 當您按一下產品的可配置選項時，應用程式不再在產品的影像庫中複製產品縮略圖。

<!-- MC-37418-->

* 當您從希望清單中編輯可配置產品時，應用程式將顯示的配置彈出窗口現在會像您按一下 **確定** 按鈕

<!-- MC-39878  magento/magento2#31472-->

* 此時，應用產品將為只包含一個可配置產品的訂單正確生成發票。 [GitHub-31143](https://github.com/magento/magento2/issues/31143)

<!-- ENGCOM-8673-->

* 購物者現在可以從非預設商店視圖將可配置產品添加到購物車。 以前，當非預設商店視圖上的購物者嘗試添加可配置產品時，應用程式顯示以下錯誤： `Could not add item to cart. Please check required options and try again`。 [GitHub-31660](https://github.com/magento/magento2/issues/31660)

### 內容安全策略CSP)

<!-- ENGCOM-8577-->

* 內容安全策略現在支援通過 `data: scheme`。

### 克隆

<!-- MC-30804-->

* Cron清理查詢已重新構造，以減少或消除以下效能問題： `cron` 作業仍處於掛起狀態，MySQL查詢速度越來越慢，CPU使用率也在增加。 [GitHub-26507](https://github.com/magento/magento2/issues/26507)

<!-- ENGCOM-8571-->

* `cronjobs` 已經處於狀態 `running` 超過24小時後，現在將自動更改為狀態 `error`。  因此，該作業的新實例可以再次運行，當作業錯誤地保持為狀態時，您不需要手動更改作業狀態 `running`。 以前，如果 `cronjob` 被卡在地位上 `running`，應用程式阻止同一作業的新實例啟動，您必須手動更改作業狀態。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` 作業現在按預期完成，不再引發此序列化錯誤：  `[Magento\Framework\DB\Adapter\DeadlockException]SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction, query was: DELETE FROM cron_schedule WHERE (status = 'missed') AND (job_code in ('indexer_reindex_all_invalid', 'indexer_update_all_views', 'indexer_clean_all_changelogs')) AND (created_at < '2018-09-28 18:32:28')`。 [GitHub-18409](https://github.com/magento/magento2/issues/18409)

<!-- ENGCOM-8571-->

* `indexer_update_all_views`  cron作業在先前的失敗後現在按預期運行。 失敗的運行在 `cron_schedule schedule`，後續運行不會自動失敗。 以前， `cron_schedule` 表中填充了待定作業，和 `indexer_update_all_views` cron作業未運行。 [GitHub-23054](https://github.com/magento/magento2/issues/23054)

<!-- ENGCOM-8571-->

* `cron` 由於 `cron` 嘗試在組重疊的大型部署中設定鎖定。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` 死鎖不再出現在 `cron_schedule` 只待幾分鐘 `cron` 作業已運行。 [GitHub-22438](https://github.com/magento/magento2/issues/22438)

### 自定義客戶屬性

<!-- MC-41611-->

* 的 **州** 「客戶帳戶」地址簿上的欄位現在已載入為，並且仍為下拉頁元素。 的 **提交** 按鈕現在處於禁用狀態，直到所有頁面元素都完全載入。 以前，應用程式在將此欄位呈現為下拉元素之前將其作為文本框載入，購物者可以在文本欄位中輸入和保存值，這在稍後的簽出過程中導致錯誤。

<!-- MC-40906 magento/partners-magento2ee#509-->

* 應用程式現在可以在店面和管理訂單頁上正確顯示自定義客戶地址屬性。 以前，「地址資訊」部分中缺少下拉屬性的選定選項，而輸入屬性的值包含屬性代碼。 [GitHub-508](https://github.com/magento/partners-magento2ee/issues/508)

<!-- MC-40329-->

* 在上載檔案時，在「管理客戶地址」欄位中保存帶有檔案附件的客戶地址屬性時，應用程式不再引發錯誤。 出現此情況的原因是控制器操作中缺少返回語句。 以前，應用程式引發了以下錯誤： `Something went wrong while saving the file`。

<!-- MC-39354-->

* RESTGET車API調用現在會為開單和發運地址返回正確的自定義屬性值。 以前，自定義地址屬性在「我的帳戶」儲存首頁和「管理」中的「訂單詳細資訊」頁中顯示不正確。

<!-- MC-24495-->

* 應用程式現在已成功處理包含具有輸入類型的客戶地址屬性的檔案 `file (attachment)`。 以前，應用程式在上載附加檔案時拋出此錯誤： `Something went wrong while saving the file`。

### 客戶

<!-- MC-41216-->

* 現在，儲存信用電子郵件將考慮所選範圍，並從正確的電子郵件地址發送。

<!-- MC-40579-->

* 現在，按帳戶建立日期篩選將生成符合配置的時區設定並捕獲所有相關建立帳戶的結果。

<!-- MC-40502-->

* 如果以前快取過資料，則客戶網格篩選器現在為受限用戶使用正確的網站選項。 以前，客戶網格過濾器從快取中檢索網站參數，並為受限用戶包括不正確的資料。

<!-- MC-39189-->

* 當在多網站部署中刪除一個網站時，應用程式不再在「管理客戶」頁面上引發異常。 以前，當管理員嘗試訪問全面的客戶清單時，應用程式未顯示所有客戶並顯示以下錯誤： `The website with id 2 that was requested wasn't found. Verify the website and try again`。

<!-- MC-38913-->

* 現在，具有權限的管理員可以從客戶的「帳戶資訊」頁籤將客戶重新分配到不同的網站。

<!-- MC-39852-->

* 現在，在建立輸入類型為「」的客戶地址屬性時，您可以成功上載檔案 `(File)`。 以前，當您嘗試上載和保存檔案時，應用程式拋出了以下錯誤： `Something went wrong while saving the file`。

### 客戶細分

<!-- MC-40999-->

* 應用程式現在會按預期在店面上根據客戶細分顯示相關產品。 以前，在為特定客戶段建立相關產品規則時，應用程式未顯示此部分。

<!-- MC-40503-->

* 現在，當對來賓和已註冊客戶應用相應的客戶段時，在其購物車中為已註冊客戶顯示動態塊。 以前，應用程式只為來賓顯示該塊。

<!-- MC-40385-->

* 現在，在從管理員處下訂單後，客戶段將自動更新。 以前，在建立管理訂單後，管理員用戶必須通過導航到相關客戶段並按一下 **刷新段資料** 按鈕

<!-- MC-39490-->

* 應用程式現在在購物車中為相關客戶細分的所有客戶顯示動態塊。 以前，客戶群既包括客人，也包括註冊客戶，客人也看不到街區。

<!-- MC-39464-->

* 使用 `Product was Ordered` 條件已解決。

<!-- MC-38895-->

* 已添加REST/SOAP API的客戶段事件觀察器。 因此，如果在通過REST/SOAP API下單時匹配段中定義的條件，則客戶段現在會按預期自動更新。

<!-- MC-38346-->

* 已為GraphQL請求添加客戶段事件處理器。 以前，在購物車價格規則條件中使用客戶段時，購物車價格規則折扣不會應用於購物車。 [GitHub-371](https://github.com/magento/partners-magento2ee/issues/371)

### 目錄

<!-- MC-39520-->

* 當購物者在結帳工作流的發貨部分輸入無效的郵遞區號時，此應用程式不再引發異常。 [GitHub-23371](https://github.com/magento/magento2/issues/23371)

### 可下載

<!-- MC-35779-->

* 當訂單包含可下載產品和帶有可下載選項的可配置產品時，應用程式現在會在新訂單電子郵件中顯示可下載產品的連結。 以前，應用程式顯示到獨立可下載產品的連結，但不顯示帶有可下載選項的到可配置產品的連結。

### 動態塊（以前的標題）

<!-- MC-40327-->

* 現在，僅在指定頁上顯示動態塊。 以前，如果未指定動態塊，應用程式將在所有頁面上顯示分配給該構件的所有橫幅。

<!-- MC-39839-->

* 現在，您可以保存包含空內容的動態塊。

### 電視

<!-- MC-41756-->

* 客戶地址屬性日期值現在以四位格式而不是兩位格式保存。

### 電子郵件

<!-- MC-39757-->

* 「管理員重置密碼」頁上的密碼重置連結現在可以按預期工作。 以前，當將自定義模板用於重置管理員密碼頁時，管理員按一下電子郵件內的連結時，應用程式將顯示此消息： `Your password reset link has expired`。 出現此情況是因為自定義電子郵件模板包含的用戶ID變數錯誤。

<!-- MC-41588-->

* 如果在儲存視圖級別啟用，則從管理員發送客戶電子郵件現在可以正常工作。 以前，當在儲存視圖級別而非全局級別啟用電子郵件通知設定時，應用程式不會發送客戶電子郵件。

<!-- MC-40950-->

* 現在，在並非所有網站都啟用了非同步電子郵件發送的多站點部署中，應用程式會按照預期發送電子郵件。 以前，如果至少一個網站禁用了此設定，則即使已啟用，也不會從任何網站發送電子郵件。 發票、發運和貸項通知單電子郵件也存在類似問題。 但是，已成功發送訂單注釋、發票注釋、發運注釋和貸項通知單注釋電子郵件。 [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-34323 magento/partners-magento2ee#505-->

* 當您從管理員共用禮品註冊時，應用程式發送的電子郵件現在包含到註冊位置的有效連結。 以前，獲取此連結會導致404錯誤。 [GitHub-504](https://github.com/magento/partners-magento2ee/issues/504)

<!-- MC-30127 magento/magento2#31455-->

* 發票和發票PDF現在包括與預期相同的捆綁產品價格。 以前，發票PDF包括捆綁產品的不正確價格。 [GitHub-12856](https://github.com/magento/magento2/issues/12856)

<!-- ENGCOM-9021-->

* 已將字串轉換添加到電子郵件模板篩選方法中，以確保返回值為 `string`。 以前，當在未處於開發人員模式時捕獲到異常時，應用程式返回 `phrase` 的雙曲餘切值。 這反過來又引發了致命 `Uncaught TypeError`。 [GitHub-32671](https://github.com/magento/magento2/issues/32671)

<!-- ENGCOM-8807-->

* 啟用非同步發送時，現在會按預期發送訂單確認電子郵件(**商店**  >  **配置**  >  **銷售**  > **銷售電子郵件**  >  **常規設定**  >  **非同步發送**)中的一個網站。 [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-18023 ENGCOM-9000-->

* 當客戶嘗試從「聯繫我們」表單發送電子郵件時，應用程式現在會按預期記錄錯誤。 [GitHub-23645](https://github.com/magento/magento2/issues/23645)

### 框架

<!-- MC-41712-->

* 現在，將檢查Admin中的父類以及原始類和繼承的介面的docblock注釋。 以前，由於未選中父類，因此在管理員中執行觸發事件的任何與客戶相關的操作都會導致錯誤。 應用程式在異常日誌中記錄了此錯誤： `report.CRITICAL: Method's return type must be specified using @return annotation.`。

<!-- MC-41192-->

* 在啟用了Redis頁快取的部署中停止Redis伺服器時，應用程式不再引發致命錯誤。

<!-- MC-40739-->

* 現在申請表 **從備份中排除介質資料夾** 在啟用備份時設定 `bin/magento config:set system/backup/functionality_enabled 1`。 以前，儘管設定了此設定，但仍備份了介質資料夾，因為 `/magento` 格式不正確，帶有雙//。

<!-- MC-40654 ENGCOM-8881-->

* 應用程式現在按「管理購物車」頁的預期轉換所有可翻譯的字串。 以前，翻譯載入發生得太遲，跳過訂閱控制器操作預調度的所有觀察器。 [GitHub-31849](https://github.com/magento/magento2/issues/31849)

<!-- MC-39776-->

* 在「建立新客戶帳戶」頁上的表單驗證現在在 **以客戶身份登錄** 啟用擴展設定已禁用。 以前，應用程式引發JavaScript錯誤。

<!-- MC-39537-->

* 使用 `bin/magento setup:db-schema:split-sales` 移動資料庫表時，將按預期工作。 現在可以建立並正確填充資料表。 以前，由於檢查表是否存在不正確，應用程式引發 `SQLSTATE` 運行時出錯 `bin/magento setup:db-schema:split-sales`。

<!-- MC-39193-->

* 由分類的子進程的異常處理 `ProcessManager` 已經改善。 當現在出現異常時，主進程將退出，並且只顯示一次錯誤消息。 以前，記錄了多個索引器故障並顯示了多條消息。 [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- MC-39132-->

* 全球Adobe Commerce插件(例如， `webapi_rest` 和 `graphql` )不再觸發新自定義區域類型 `di.xml` 的插件。

<!-- MC-38770-->

* 初始化期間發生的異常不再快取，現在觸發500響應代碼。

<!-- MC-33179  magento/partners-magento2ee#431-->

* 商家現在可以按儲存視圖將影像分配到目錄事件或從目錄事件中刪除該影像。 以前，在編輯目錄事件時更改儲存視圖時， **刪除影像** 複選框未處於活動狀態，應用程式顯示以下錯誤： `Uncaught ReferenceError: toggleValueElements is not defined at HTMLInputElement.onclick`。 [GitHub-364](https://github.com/magento/partners-magento2ee/issues/364)

<!-- ENGCOM-8232-->

* 最後一個處理程式合併到 `communication.xml` 檔案不再覆蓋以前建立的所有處理程式。 [GitHub-29528](https://github.com/magento/magento2/issues/29528)

### 常規修復

<!-- MC-41194-->

* 應用程式現在在「我的產品評論」頁面和「我的帳戶」頁面上顯示正確的星號數。 以前，應用程式僅將審閱星號應用於第一次審閱，而將頁面上的其他審閱保留為無標籤。

<!-- MC-40653-->

* 標題中的帳戶連結現在遵循WCAG標準。 以前，標頭中的帳戶連結包含重複的ID，這導致WCAG驗證失敗。

<!-- MC-40528-->

* 應用程式現在將目錄事件日期保存在UTC時區中。 以前，應用程式保存的目錄事件日期在用戶的時區中。

<!-- MC-39765-->

* 當來賓購物者使用無效地址時，應用程式不再引發系統日誌生成的錯誤。 以前，應用程式間歇性地顯示此錯誤，而不是呈現頁面： `No such entity with addressId`。 [GitHub-15115](https://github.com/magento/magento2/issues/15115)

<!-- MC-39747-->

* 調整影像大小過程不再停止不支援格式的影像。 以前， `catalog:images:resize` 遇到不支援的影像格式，進程停止，應用程式顯示以下錯誤： `bin/magento catalog:images:resize Unsupported image format`。

<!-- ENGCOM-8925-->

* 已將WEBP和AVIF對徽標影像的支援添加到管理員中。 [GitHub-32495](https://github.com/magento/magento2/issues/32495)

<!-- MC-38156-->

* 您不能再更改 `media_gallery` 屬性。 以前，當您更改 `media_gallery` 屬性返回 `global`，應用程式引發錯誤。

<!-- MC-36818  magento/partners-magento2ee#470-->

* 作為計畫更新添加的相關產品在更新結束日期後不再顯示在店面產品頁面上。 [GitHub-469](https://github.com/magento/partners-magento2ee/issues/469)

<!-- MC-34489 magento/partners-magento2ee#491-->

* 當您按一下時，應用程式現在會顯示一條準確的資訊消息 **管理項目** 「我的帳戶禮品註冊」頁面和註冊表產品庫存不足。 以前，應用程式引發了以下錯誤： `Error: Call to a member function getId() …`。 [GitHub-490](https://github.com/magento/partners-magento2ee/issues/490)

<!-- MC-33667-->

* 現在，您可以按照預期將CMS頁從「添加新頁」頁添加到網站根層次結構。

<!-- MC-33499 magento/partners-magento2ee#446-->

* 選擇實體類型時，篩選現在在計畫導出清單中按預期工作。 以前，篩選器不工作，應用程式引發JavaScript錯誤。 [GitHub-361](https://github.com/magento/partners-magento2ee/issues/361)

<!-- MC-30084 ENGCOM-8674-->

* 現在，將按照預期從 `catalog/tmp/category` 目錄 `catalog/category` 目錄。 中的影像行 `media_storage_file_storage` 表現在也正確 `directory_id`。 [GitHub-11995](https://github.com/magento/magento2/issues/11995)

<!-- MC-24768-->

* 在將更改提交到CMS層次結構後，商家現在按預期通知無效快取。 以前，應用程式在保存CMS層次結構時不會使快取無效。

<!-- MC-24725-->

* 對購AJAX物車購物車部分的冗餘請求已減少。 以前，應用程式未正確載入購物車小計，這再次觸發了購物車重新載入。

<!-- MC-23740-->

* 已添加URL驗證，以防止保留字包含在URL鍵中。 請參閱 [定義眾所周知的統一資源標識符(URI)](https://tools.ietf.org/html/rfc5785)

<!-- ENGCOM-9037-->

* 在運行PHP 7.4的部署中，應用程式現在返回404錯誤， **生成「類別/產品」URL重寫** 設定設定為 **否**&#x200B;而購物者則試圖訪問不存在的類別路徑。 以前，應用程式返回500錯誤，指出： `Trying to access array offset on value of type bool`。 [GitHub-31984](https://github.com/magento/magento2/issues/31984)

<!-- MC-32257 magento/partners-magento2ee#507-->

* 現在，您可以成功編輯使用屬性集建立的產品， **設計組和計畫設計更新** 已刪除組。  以前，當您嘗試編輯從該屬性集建立的產品時，應用程式拋出了一個致命錯誤。 [GitHub-44](https://github.com/magento/partners-magento2ee/issues/44)

<!-- ENGCOM-8901-->

* `nowdoc` 已更換 `heredoc` 的 `Magento_Backend` 儲存切換器。 [GitHub-32262](https://github.com/magento/magento2/issues/32262)

<!-- ENGCOM-8539-->

* 現在，管理員登錄後將直接重定向到請求的「管理員」頁。  以前，當管理員登錄時，他們被重定向到「管理」儀表板（或任何配置為啟動頁的頁面），必須手動導航到目標。 [GitHub-31042](https://github.com/magento/magento2/issues/31042)

<!-- ENGCOM-8685-->

* 阿根廷、玻利維亞、智利、厄瓜多、蓋亞那、巴拉圭、秘魯、蘇利南和委內瑞拉等地區 `directory_country_region` 的子菜單。 [GitHub-31169](https://github.com/magento/magento2/issues/31169)

<!-- ENGCOM-8505-->

* 此外，阿爾巴尼亞、丹麥、希臘、冰島、葡萄牙和瑞典也加入了 `directory_country_region` 的子菜單。 [GitHub-31040](https://github.com/magento/magento2/issues/31040)

<!-- MC-30104 magento/magento2#31480 -->

* 當出現異常時，MysqlMQ消息隊列中的消息現在被標籤為錯誤。 [GitHub-18140](https://github.com/magento/magento2/issues/18140)

<!-- ENGCOM-8579-->

* 現在，在為管理貸項通知單和發票頁載入稅資訊時，應用產品將引用正確的分類對象。 [GitHub-31197](https://github.com/magento/magento2/issues/31197)

<!-- MC-40346-->

* Royal Mail Click &amp; Drop整合現在按預期工作。 以前，當您嘗試激活其整合時，應用程式拋出此錯誤： `Sorry! Something went wrong. Please try again later`。 [GitHub-28996](https://github.com/magento/magento2/issues/28996)

<!-- ENGCOM-8498-->

* 當在URL中傳遞不正確的發運、貸項通知單或發票ID時，應用產品現在會顯示一條資訊性錯誤消息。 以前，應用程式引發了致命錯誤。 [GitHub-30424](https://github.com/magento/magento2/issues/30424)

<!-- ENGCOM-8632-->

* 已刪除靜態檔案位置中的遞歸。  應用程式現在顯示404頁，而不是500錯誤。 以前，預設NGINX配置中的錯誤會導致無限遞歸。 [GitHub-31530](https://github.com/magento/magento2/issues/31530)

<!-- ENGCOM-8550-->

* 名稱 `cms_index_noroute.xml` 檔案已更正為 `cms_noroute_index.xml`。 [GitHub-31300](https://github.com/magento/magento2/issues/31300)

<!-- ENGCOM-8516-->

* 的 `.editorconfig` 已重新構造檔案以更正自動格式 `db_schema_whitelist.json` 的子菜單。 [GitHub-31171](https://github.com/magento/magento2/issues/31171)

<!-- ENGCOM-9018-->

* 調整瀏覽器窗口大小不再觸發重複的綁定放大器事件。 [GitHub-30788](https://github.com/magento/magento2/issues/30788)

<!-- ENGCOM-8722-->

* 篩選時，應用程式不再引發SQL異常 `Magento\Users\Model\ResourceModel\Users\Collection` 按 `user_id`。 [GitHub-31216](https://github.com/magento/magento2/issues/31216)

### 禮品卡

<!-- MC-40412-->

* 現在，在取消禮品卡時，將按照預期從禮品卡中刪除待定付款費用。 以前，應用程式在 `cron` 在刪除禮品卡後運行。

<!-- MC-37658-->

* 購物者現在可以在簽出多個地址時，從「複查訂單」頁上的訂單中刪除禮品卡。 此前，當購物者選擇禮品卡並按一下時，申請程式未從訂單中刪除禮品卡 **刪除**。

<!-- MC-34407-->

* 當您在購物車中添加禮品卡後更改禮品卡的值時，應用產品現在將在購物車中顯示禮品卡的新價格。

<!-- MC-32651-->

* 價格範圍驗證邏輯已添加到禮品卡建立頁面。 以前，管理員可以建立具有超過最大值的最小值的卡。 [GitHub-493](https://github.com/magento/partners-magento2ee/issues/493)

<!-- MC-32638979 magento/partners-magento2ee#40851-->

* 的 `addRequisitionListItemsToCart` 查詢現在將返回在請求不包含的值時所需的自定義禮品卡金額 `allow_open_amount`。

<!-- MC-32373-->

### 禮品消息

<!-- MC-38655-->

* 的 `setGiftOptionsOnCart` 變異現在正確地生成禮物資訊。 [GitHub-388](https://github.com/magento/partners-magento2ee/issues/388)

### 禮品登記

<!-- MC-33057 magento/partners-magento2ee#467-->

* **事件日期** 在建立禮品註冊表或編輯禮品時，庫面和管理員上的值現在相同。 以前，每次您編輯和保存禮品註冊表時，應用程式都會調整 **事件日期** 在店面和管理員上倒退一天。 [GitHub-466](https://github.com/magento/partners-magento2ee/issues/466)

<!-- MC-32587  magento/partners-magento2ee#511-->

* 應用程式不再在禮品登記處顯示禁用的產品。 以前，如果產品在添加到禮品註冊表後被禁用，則當購物者訪問註冊表時，應用程式會顯示以下消息： `Error: Call to a member function getId() …`。 [GitHub-510](https://github.com/magento/partners-magento2ee/issues/510)

### 禮品包裝

<!-- MC-38260-->

* 現在，翻譯用於商店視圖的禮品包裝標籤將按預期工作。

<!-- MC-36749-->

* 禮品包裝現在按預期應用於將訂單發運至多個地址。

<!-- MC-34820-->

* 當所有產品都被刪除時，應用產品現在將從購物車中刪除禮品包裝費。

<!-- MC-32259 magento/partners-magento2ee#500-->

* 當貸項通知單包含禮品包裝和可配置產品費用時，貸項通知單合計現在是正確的。 以前，禮品包裝稅金額並不總是包括在貸項通知單合計中。 [GitHub-34](https://github.com/magento/partners-magento2ee/issues/34)

### Google Analytics

<!-- ENGCOM-8450-->

* 啟用Google Analytics後，當管理員嘗試在店面上載入頁面時，應用程式不再引發錯誤。 用於 `connect-src` 已添加以允AJAX許請求www.google-analytics.com。 [GitHub-30880](https://github.com/magento/magento2/issues/30880)

### Google標籤經理

<!-- MC-39072-->

* 啟用「Google標籤管理器」後，結帳工作流付款頁上的帳單地址的UI元件現在正確使用報價地址。 以前，付款頁上發生JavaScript錯誤。

### GraphQL

<!-- MC-41885-->

* GraphQL `products` query現在返回按與屬性編輯頁上使用的排序順序相同排序的屬性選項。

<!-- MC-41473-->

* 對 `{ category(id: 2){ children { name children { name } } } }` GraphQL請求現在包含正確排序的類別樹。

<!-- MC-41030-->

* 的 `CartItemPrices` 對象現在包含新的GraphQL欄位 `fixed_product_taxes`，它返回應用於購物車物料的固定產品稅的陣列。 以前，應用於購物車物料的固定產品稅未包括在購物車查詢中。

<!-- MC-40920-->

* 現在，向GraphQL發出的空請求會引發響應代碼200，而不是500。 以前，GraphQL分析器在生成查詢結果之前引發異常。

<!-- MC-40867 magento/partners-magento2ee#532 -->

* 的 `applyRewardPointsToCart` 變異現在會更新購物車的總數，以準確反映所扣回的獎勵點值。 [GitHub-486](https://github.com/magento/partners-magento2ee/issues/486)

<!-- MC-40379-->

* 當GraphQL用於連結追加銷售產品時，GraphQL響應中不再包含禁用產品。

<!-- MC-40262-->

* 商人現在可以利用GraphQL `setShippingAddressesOnCart` 在禁用來賓結帳時為購物車設定計費和送貨地址的方法。

<!-- MC-39508-->

* 的 `categoryList` 當查詢包含多個段時，不再引發異常 `CategoryTree` 的雙曲餘切值。 [GitHub-31086](https://github.com/magento/magento2/issues/31086)

<!-- MC-38995-->

* GraphQL `product` 查詢現在返回正確的客戶組價格。

<!-- MC-38822-->

* GraphQL `products` 查詢響應現在根據產品屬性位置對聚合進行排序。

<!-- ENGCOM-8462-->

* 當產品和類別URL尾碼包含空值時，應用程式在GraphQL查詢期間不再拋出類型錯誤。 [GitHub-30909](https://github.com/magento/magento2/issues/30909)

<!-- magento/magento2#31164-->

* 的 `CustomizableDateValue` 對象現在包含 `type` 屬性。 其值是可設定為DATE、DATE_TIME或TIME的枚舉。

<!--  magento/partners-magento2ee#421-->

* 的 [`dynamicBlocks` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/dynamic-blocks.html) 返回與指定篩選器匹配的動態塊的內容。

<!-- ENGCOM-8603-->

* POST `V1/products/special-price-delete` 請求現在只刪除具有指定價格的 `store_id` 如預期。 以前，呼叫從所有商店中刪除了指定SKU的所有特價。 [GitHub-25907](https://github.com/magento/magento2/issues/25907)

<!--  magento/partners-magento2ee#280 -->

* 修復了 `country_code` 屬性 `createGiftRegistry` 變異。

<!-- magento/partners-magento2ee#280 -->

* 已修復 `giftRegistryUid` 屬性 `updateGiftRegistryItems` 變異。

<!-- magento/partners-magento2ee#280 -->

* 已添加附加檢查，以防止 `updateGiftRegistryRegistrants` 用於將隨機用戶作為註冊者添加到禮品登記處的變異。

<!-- magento/magento2#31380 -->

* 的 `addConfigurableProductsToCart` 現在，突變將返回指定產品的正確縮略圖。 以前，它返回父產品的縮略圖。

<!-- ENGCOM-8477-->

* 的 `products` 當為將來日期設定特殊價格期間時，查詢不再顯示產品的特殊價格。 [GitHub-30210](https://github.com/magento/magento2/issues/30210)。 [GitHub-29631](https://github.com/magento/magento2/issues/29631)

<!-- magento-engcom/magento2ee#576-->

* 的 `customer` 查詢響應現在包括 `total_giftcard` 屬性 `OrderTotal` 的雙曲餘切值。

<!-- MC-41084 ENGCOM-9042 -->

* 已更正導致 `products` 查詢以返回有關沒有層定價集的項目的價格層的錯誤資訊。 [GitHub-32279](https://github.com/magento/magento2/issues/32279)

### 影像

<!-- MC-38951-->

* 現在，在使用POST建立或更新捆綁產品時，可以按預期設定required_options和has_options捆綁產品屬性 `/V1/product/:sku` 端點。 以前，儘管已將這些自定義屬性設定為1(1)，但這些自定義屬性仍設定為0（零）。

### 導入/導出

<!-- MC-41576-->

* 「導出」頁面「實體屬性」網格中產品實體的「類別ID」篩選器現在可以按預期方式工作。

<!-- MC-41439 ENGCOM-9005-->

* 當所有子產品都出貨時，分組產品庫存狀態現在按預期更新為出貨。 [GitHub-32647](https://github.com/magento/magento2/issues/32647)

<!-- MC-41184-->

* 當通過導入更新子產品庫存狀態時，可配置產品庫存狀態現在將按預期自動更新。 以前，當導入更新子產品庫存狀態時，不會自動更新產品庫存狀態。

<!-- MC-41151-->

* 現在，您可以在計畫導出中保存空值。 以前，應用程式在建立或保存導出後更新了空篩選器值。 兩者 `no` 和 `not specified` 值在資料庫中以零表示，值 `not selected` 已覆蓋 `no`。

<!-- MC-41092-->

* 導出過程現在在導出產品、庫存來源和客戶實體時考慮用戶角色範圍。 以前，導出過程忽略了用戶角色範圍，這允許導出專用用戶角色導出實體。

<!-- MC-40943-->

* 應用產品現在將產品稅分類設定為 `None` 如果產品 `tax_class_name` 值 `None` 或 `0`。 以前，如果 `product tax_class_name` 是 `None` 在CSV檔案中，應用產品建立了新稅類 `None`，它複製了現有稅類。 如果 `product tax_class_name` 是 `0` 在CSV檔案中，應用程式忽略該值，導入後產品稅類沒有更改。

<!-- MC-40898-->

* 管理員現在可以成功更改 `name` 捆綁產品 `bundle_values` 從管理員。 以前，在您更改管理員的名稱后，應用程式將產品顯示為庫存不足。 產品還與同一SKU合併到單個捆綁包選項部分。

<!-- MC-40333-->

* 在導出客戶資料時，應用程式現在考慮用戶範圍。 以前，當您嘗試導出客戶時，應用程式會從所有網站導出客戶資料。

<!-- MC-40305-->

* 應用程式現在將在CSV檔案導入期間刪除追加銷售、交叉銷售和相關產品之間的產品關係 `__EMPTY__VALUE__` 在CSV檔案中指定。

<!-- MC-40012-->

* 導出許多客戶的自定義地址資料(管理 **系統** > **導出**)不再經常導致記憶體錯誤。 以前，在導出自定義地址資料時，應用程式嘗試載入所有客戶資料，這導致記憶體耗盡，並且應用程式拋出了無法分配記憶體的錯誤。

<!-- MC-39977-->

* 在預設的CSV導入過程中不再導入重複的層價。 以前，缺少驗證來防止導入重複層價，當出現重複層價時，商家無法保存產品。 商家在嘗試安排產品更改時也發現了此錯誤： `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry…`。

<!-- MC-39609  magento/magento2#31397-->

* 現在，所有產品映像都在導入過程中得到驗證。 以前，當產品具有多個映像時，應用程式僅驗證第一個映像。 [GitHub-28236](https://github.com/magento/magento2/issues/28236)

<!-- MC-39483-->

* 現在，您可以按照導入期間的預期從客戶地址中刪除區域。 以前，在導入客戶地址時，分配的區域不會更改，但區域為空。

<!-- MC-38810-->

* 將JSON或HTML內容作為附加產品屬性的產品現在正確導出到CSV檔案。 以前，CSV檔案包含錯誤欄位中重疊的資料字串。

### 索引

<!-- MC-39718 ENGCOM-8567-->

* 當子進程失敗時，進程管理器現在退出，但出現錯誤。 以前，如果傳遞給進程管理器的函式數（例如，索引器維）低於進程管理器的值，則進程管理器始終成功退出 `MAGE_INDEXER_THREADS_COUNT` 環境變數。 [GitHub-30964](https://github.com/magento/magento2/issues/30964)

<!-- MC-39272-->

* 當使用RESTPUT連結產品時，產品現在可在店面搜索結果中按預期提供 `/V1/products/:sku/links` 索引器模式設定為時的請求 **保存時更新**。

<!-- MC-38310 magento/magento2#32693-->

* 目錄價格規則索引器現在在索引器模式設定為時按預期工作 **保存時更新**。 [GitHub-370](https://github.com/magento/partners-magento2ee/issues/370)

<!-- ENGCOM-8890-->

* 刪除不包括產品的禁用類別現在對目錄搜索和類別平面索引表沒有影響。 以前，刪除非活動類別會觸發完全重新索引。 [GitHub-23297](https://github.com/magento/magento2/issues/23297)

<!-- ENGCOM-8599 8474-->

* 自定義索引器現在可以為預訂使用不同的實體列名。 以前，資料庫觸發器使用索引器上次設定的列名 **按計畫更新** 而不是指定索引器。 [GitHub-21853](https://github.com/magento/magento2/issues/21853)

<!-- ENGCOM-8887-->

* 應用程式不再發AJAX送重新載入客戶資料節的請求(`Magento_Customer/js/section-config`)不受請求影響。 [GitHub-31948](https://github.com/magento/magento2/issues/31948)

<!-- MC-39569-->

* 添加、刪除或重新排序類別中的產品後，以下索引器不再失效： `catalog_category_product` 和 `catalogsearch_fulltext` （及其家屬）。 以前，這些意外刪除會觸發對站點的完全重新索引。 現在，在未啟用平面目錄時，在這些情況下將禁止完全重新索引。

### 基礎設施

<!-- MC-41445-->

* 依賴關係 `pelago/emogrifier` 已從3.1.0版更新為5.0.0。此更新導致對 `Magento\Email\Model\Template\Filter` 類。 更改的代碼在電子郵件模板呈現期間執行。 請參閱 [BIC引用](https://developer.adobe.com/commerce/php/development/backward-incompatible-changes/reference/)。

<!-- MC-42212-->

* 已更正問題 `\Magento\CatalogInventory\Model\Indexer\Stock\CacheCleaner::getCategoryIdsByProductIds` 阻止了保存新產品。

<!-- MC-42199-->

* 已刪除已棄用的TinyMCE v3庫。 的 `Magento_Tinymce3Banner` 從Adobe Commerce刪除了與TinyMCE v3.x相關的模組和MFTFtest。

<!-- MC-41497-->

* 應用程式不再拋出 `Invalid header value detected` 當購物者輸入包含法文變音符號（如「é」、「è」）的電子郵件地址時，聯繫我們表單上出現錯誤。 應用程式現在將用戶名中的UTF-8字母轉換為ASCII編碼。 以前，UTF-8字母在電子郵件地址的唯一部分中未轉換為ASCII編碼。

<!-- MC-39947-->

* 將插件添加到父類時，應用程式不再引發PHP致命錯誤。 [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-9012-->

* 已更新這些模組的README.md檔案： `Magento_Msrp`。 `Magento_MsrpConfigurableProduct`。 `Magento_MsrpGroupedProduct`。 `Magento_Multishipping`。 `Magento_MysqlMq`。 [GitHub-32577](https://github.com/magento/magento2/issues/32577)

<!-- magento/partners-magento2ee#501-->

* `phpcpd` 已更新為v6.0.3以與PHP 8相容。

<!-- ENGCOM-9073-->

* `ramsey/uuid` 已更新以與PHP 8.0相容。 [GitHub-31777](https://github.com/magento/magento2/issues/31777)。 [GitHub-826](https://github.com/magento/magento2-functional-testing-framework/issues/826)

<!-- ENGCOM-8997-->

* `colinmollenhour/php-redis-session-abstract` 已更新為v1.4.4以與PHP 8相容。 [GitHub-32709](https://github.com/magento/magento2/issues/32709)

<!-- ENGCOM-8527-->

* 已更正 `phpstan.neon` 的子菜單。 [GitHub-31239](https://github.com/magento/magento2/issues/31239)

<!-- ENGCOM-8668-->

* 已刪除過時屬性的使用 `$_isScopePrivate` 整個代碼庫。 [GitHub-30506](https://github.com/magento/magento2/issues/30506)

<!-- ENGCOM-8551-->

* 頁面佈局不再硬編碼  `Magento\Widget\Block\Adminhtml\Widget\Instance\Edit\Chooser\Container`。  因此， `getPageLayouts()` 函式現在將返回不同模組聲明的頁面佈局的實際清單。 以前，它只返回硬編碼佈局。 [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8509-->

* 的 `composer.lock` 檔案已更新為最新版本的編碼標準。 [GitHub-31152](https://github.com/magento/magento2/issues/31152)

<!-- ENGCOM-9015 -->

* 已添加缺少對 `web-token/jwt-framework` 包到 `magento/module-jwt-framework-adapter`。 [GitHub-32578](https://github.com/magento/magento2/issues/32578)

<!-- ENGCOM-9019 -->

* 已將被動偵聽器添加到 `fotorama.js` 改善燈塔指標評分的圖書館。 [GitHub-31140](https://github.com/magento/magento2/issues/31140)

<!-- ENGCOM-9014 -->

* 已更新Google Analytics模組的README.md檔案。 [GitHub-32616](https://github.com/magento/magento2/issues/32616)

<!-- ENGCOM-8375 -->

* 進程管理器現在可以正確處理被隔離進程中的異常。 主進程現在退出，應用程式現在只顯示一次錯誤消息。 另外，在主進程中拋出被隔離進程時，現在將處理這些進程的異常。 以前，應用程式記錄了多個索引器故障並顯示了多個錯誤消息。  [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- ENGCOM-8544 -->

* 將插件添加到父類時，應用程式不再引發錯誤。 ( `optionsProvider` 參數現在在之後聲明 `getContentIdentities` 在 `Assest.php`。) 以前，應用程式引發了以下錯誤：  `Error: Cannot instantiate interface Magento\Framework\Data\OptionSourceInterface`。 [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-8549 -->

* 正在執行 `Magento\Framework\Filesystem\Io\Ftp::ls()` 現在，空資料夾上會按預期返回空陣列。 以前，應用程式引發此異常： `Invalid argument supplied for foreach() in vendor/magento/framework/Filesystem/Io/Ftp.php…`。 [GitHub-31288](https://github.com/magento/magento2/issues/31288)

<!-- ENGCOM-8791 -->

* 的 `update` 角色和規則的方法已標籤為不建議使用 `app/code/Magento/Authorization/Model/Role.php`。 [GitHub-30756](https://github.com/magento/magento2/issues/30756)

<!-- ENGCOM-8946 -->

* 已更正SameSite Cookie參數的串聯。 以前，附加了不正確的連接 `lex` 尾碼 `value`。 `domain`和其他參數。 [GitHub-26377](https://github.com/magento/magento2/issues/26377)。 [GitHub-32440](https://github.com/magento/magento2/issues/32440)

<!-- ENGCOM-8698 ENGCOM-9034 -->

* `allure-framework/allure-phpunit` 已升級到整個代碼庫中的v1.3.1。 以前，應用程式顯示以下錯誤：  `Warning: Use of undefined constant GLOB_BRACE - assumed 'GLOB_BRACE' (this will throw an Error in a future version of PHP) in /var/www/html/src/vendor/allure-framework/allure-phpunit/src/Yandex/Allure/Adapter/AllureAdapter.php:74.` [GitHub-24635](https://github.com/magento/magento2/issues/24635)

<!-- ENGCOM-8783 -->

* 應用程式現在在運行錯誤時顯示更多資訊性錯誤 `bin/magento` 命令。 以前，應用程式不顯示任何錯誤消息或顯示缺少資訊的消息。 [GitHub-32786](https://github.com/magento/magento2/issues/32786)

<!-- ENGCOM-8953 -->

* 的 `ArrayIterator` PHP對象已更新為與PHP 7.4一起按預期工作。 [GitHub-32088](https://github.com/magento/magento2/issues/32088)

<!-- ENGCOM-8469 -->

* 當客戶嘗試完成訂單時，當沒有可用的運輸承運人時，應用程式不再引發錯誤。 相反，它顯示簽出頁和此消息： `Sorry, no quotes are available for this order at this time`。 以前，應用程式顯示一個空白簽出頁，並在異常日誌中記錄以下消息： `array_keys() expects parameter 1 to be array, null given`。 [GitHub-30830](https://github.com/magento/magento2/issues/30830)

<!-- ENGCOM-8557 -->

* 應用程式不再將每個cookie記錄為單獨的上下文。 的 `$_COOKIE` 陣列也已轉換為字串。 以前，由於每個cookie都作為單獨的上下文記錄，因此當cookie數超過50時，應用程式會記錄以下消息： `Unable to send the cookie. Maximum number of cookies would be exceeded`。 [GitHub-31334](https://github.com/magento/magento2/issues/31334)

### 發票

<!-- ENGCOM-8472 -->

* 在管理員中建立新發票時， **電子郵件副本** 複選框現在按預期工作。 以前，如果在中啟用了發送發票電子郵件的全局設定，則會忽略該複選框 **銷售電子郵件**。 它現在與發運和貸項通知單建立頁一致，並以相同方式運行。 [GitHub-28511](https://github.com/magento/magento2/issues/28511)

### 媒體集

<!-- MC-41728-->

* `bin/magento media-gallery:sync` 現在在處理缺少資訊的PNG影像時會按預期XMP失敗。

<!-- ENGCOM-8814-->

* 中的條目 `catalog_product_entity_media_gallery` 刪除相關產品時，表會按預期刪除。 [GitHub-17727](https://github.com/magento/magento2/issues/17727)

<!-- ENGCOM-8945-->

* 啟用JavaScript微型化後，現在可以在媒體庫中更新映像詳細資訊。 以前未保存影像詳細資訊，應用程式顯示以下錯誤： `TypeError: Cannot read property 'call' of undefined in jquery.validate`。 [GitHub-31633](https://github.com/magento/magento2/issues/31633)

### MFTF

中介紹了新功能和MFTF核心錯誤修復 [功能測試框架更改日誌](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md)。

<!-- ENGCOM-8496-->

* 的 `magento indexer:reindex` 和 `cache:flush` 命令 `AdminReindexAndFlushCache` 操作組已從test中刪除，以改進以下模組的執行： `Bundle`。 `Catalog`。 `CatalogRule`。 `CatalogRuleConfigurable`。 `CatalogUrlRewrite`。 `Downloadable`。 `Indexer`。 `Paypal`, `Sales`。 [GitHub-31031](https://github.com/magento/magento2/issues/31031)

<!-- ENGCOM-8562-->

* `AdminSubmitCategoriesPopupActionGroup` 已添加到test，以防止test失敗。 [GitHub-31251](https://github.com/magento/magento2/issues/31251)

<!-- ENGCOM-8562-->

* Test已與 `StorefrontCheckQuickSearchStringActionGroup` 和 `StorefrontAssertProductNameOnProductMainPageActionGroup` （現有操作組）。 [GitHub-31251](https://github.com/magento/magento2/issues/31251)

#### 重構test

為縮短執行時間，已重新考慮以下test:

`AddOutOfStockProductToCompareListTest`  <!-- ENGCOM-8547-->

`AdminApplyTierPriceToProductWithPercentageDiscountTest` <!-- ENGCOM-8522-->

`AdminCheckingCreditMemoTotalsTest` <!-- ENGCOM-8606-->

`AdminCheckDashboardWithChartsTest` <!-- ENGCOM-8897-->

`AdminConfigDefaultProductLayoutFromConfigurationSettingTest`  <!-- ENGCOM-8891-->

`AdminCreateInvoiceTest` <!-- ENGCOM-8581-->

`AdminCreateOrderAddProductCheckboxTest` <!-- ENGCOM-8492-->

`AdminMassOrdersCancelCompleteAndClosedTest` <!-- ENGCOM-8538-->

`AdminMassOrdersCancelProcessingAndClosedTest`  <!-- ENGCOM-8670-->

`AdminMassOrdersHoldOnCompleteTest`  <!-- ENGCOM-8897-->

`AdminMassOrdersHoldOnPendingAndProcessingTest`  (已棄用的替換 `AdminMassOrdersHoldOnPendingAndProcessingTest`) <!-- ENGCOM-8669-->

`AdminMassOrdersUpdateCancelPendingOrderTest` <!-- ENGCOM-8602-->

`AdminMassProductPriceUpdateTest` <!-- ENGCOM-8587-->

`AdminMassUpdateProductAttributesMissingRequiredFieldTest` <!-- ENGCOM-8511-->

`AdminOrdersReleaseInUnholdStatusTest`  <!-- ENGCOM-8592—-->

`AdminPanelIsFrozenIfStorefrontIsOpenedViaCustomerViewTest`  <!-- ENGCOM-8601-->

`AdminSortingByWebsitesTest`  <!-- ENGCOM-8583-->

`AdminUpdateSimpleProduct` <!-- ENGCOM-8536-->

`AdminUpdateSimpleProductWithRegularPriceInStockEnabledFlatTest`  <!-- ENGCOM-8533-->

`AdminValidateShippingTrackingNumberTest`  <!-- ENGCOM-8593-->

`CancelOrdersInOrderSalesReportTest`  <!-- ENGCOM-8591-->

`ProductsQtyReturnAfterOrderCancelTest` <!-- ENGCOM-8506-->

`StorefrontConfigurableProductBasicInfoTest`  <!-- ENGCOM-8711-->

#### 操作組

重複性操作已替換為以下test中的操作組：

`AdminCheckConfigurableProductPriceWithDisabledChildProductTest`  <!-- ENGCOM-8574-->

`AdminConfigurableProductCreateTest` <!-- ENGCOM-9013-->

`AdminConfigurableProductRemoveAnOptionTest` <!-- ENGCOM-9038-->

`AdminCreateProductDuplicateUrlkeyTest` <!-- ENGCOM-9007-->

`AdminCreateSimpleProductNegativePriceTest` <!-- ENGCOM-900-->

`AdminCreateSimpleProductZeroPriceTest`  <!-- ENGCOM-9040-->

`AdminCreateVirtualProductFillingRequiredFieldsOnlyTest` <!-- ENGCOM-9003-->

`AdminUpdateSimpleProductWithRegularPriceInStockDisabledProductTest` <!-- ENGCOM-9002-->

`AdminUpdateSimpleProductWithRegularPriceInStockNotVisibleIndividuallyTest`  <!-- ENGCOM-9011-->

`AdminUpdateSimpleProductWithRegularPriceInStockVisibleInCatalogOnlyTest`  <!-- ENGCOM-9041-->

#### 新建操作組

`AdminClearFiltersOnGridActionGroup` <!-- ENGCOM-8604-->

`AdminClickAddNewPageOnPagesGridActionGroup`  <!-- ENGCOM-8613-->

`AdminClickInsertWidgetActionGroup` <!-- ENGCOM-8614-->

`AdminClickRefundOfflineOnNewMemoPageActionGroup` <!-- ENGCOM-8580-->

`AdminFillAccountInformationOnCreateOrderPageActionGroup` <!-- ENGCOM-8495-->

`AdminGoToOrderStatusPageActionGroup`  <!-- ENGCOM-8615-->

`AdminOpenCMSPagesGridActionGroup`<!-- ENGCOM-8682-->

`AdminSelectAttributeSetOnEditProductPageActionGroup` <!-- ENGCOM-8566-->

`AssertAdminProductIsAssignedToCategoryActionGroup`  (用SKU替換篩選產品網格並按一下第一行(以減少test執行時間) <!-- ENGCOM-8535 8534-->

`AssertLinkActionGroup` <!-- ENGCOM-8457-->

`AssertStorefrontCartDiscountActionGroup` <!-- ENGCOM-8431-->

`ClickPlaceOrderActionGroup` <!-- ENGCOM-8671-->

`SaveCmsPageActionGroup` <!-- ENGCOM-8683-->

`StorefrontAssertProductNameIsNotOnProductMainPageActionGroup` <!-- ENGCOM-8562-->

`StorefrontGuestCheckoutProceedToPaymentStepActionGroup` <!-- ENGCOM-8582-->

`StorefrontHoverProductOnCategoryPageActionGroup` <!-- ENGCOM-8575-->

`StorefrontSelectCustomizeAndAddToTheCartButtonActionGroup` <!-- ENGCOM-8573-->

#### 已刪除的操作組

<!-- ENGCOM-8525 8558 8608 8546 8695 8889 8681 8627 8714-->

* 已刪除  `CliIndexerReindexActionGroup` （或更改值）從test開始，以縮短執行時間 `Backend`。 `Bundle`。 `BundleImportExport`。 `Catalog`。 `CatalogRule`。 `CatalogSearch`。 `Checkout`。 `Downloadable`。  `Elasticsearch`。  `Elasticsearch6`。  `Indexer`。 `LayeredNavigation`。  `LoginAsCustomer`。  `Newsletter`。 `Sales`。 `SalesRule`。 `Search`。 `Store`。  `Swatches`。 `UrlRewrite`。 `Weee`, `Wishlist`模組。

<!-- ENGCOM-8893 8951 8893 9001 8715 8724 8721 8843-->

* 已刪除 `CliCacheFlushActionGroup` 從 `Catalog`。 `CatalogUrlRewrite`。 `Checkout`。 `Config`。 `ConfigurableProduct`。`Contact`。 `Cookie`。 `CurrencySymbol`。 `Customer`。 `Downloadable`。 `Elasticsearch`。 `Elasticsearch6`。 `Fedex`。 `Indexer`。 `LayeredNavigation`。`LoginAsCustomer`。 `Msrp`。 `Multishipping`。 `Sales`。 `Swatches`。 `Translation`。 `UrlRewrite`。 `Vault`。 `Weee`, `Wishlist` 模組。

### 新聞稿

<!-- ENGCOM-8948 MC-40885-->

* 該應用程式不再向在新聞稿隊列建立和新聞稿發送之間的時間段內未訂閱該新聞稿的客戶發送電子郵件。 [GitHub-32116](https://github.com/magento/magento2/issues/32116)

<!-- ENGCOM-8675-->

* 該應用程式現在支援新聞稿啟用設定(**商店**  >  **設定**  >  **配置**  >  **客戶**  >  **新聞稿**  >  **常規選項**)。 以前，這些設定始終從多儲存部署中的預設作用域中檢索。 [GitHub-31188](https://github.com/magento/magento2/issues/31188)

<!-- ENGCOM-8551-->

* REST呼叫GET `/V1/customers/search` 現在，為訂閱了多份新聞稿的客戶返回正確的資訊。 [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8817-->

* 快取訂閱狀態已從新聞稿插件中刪除。 [GitHub-19345](https://github.com/magento/magento2/issues/19345)

### 訂單

<!-- MC-40963-->

* 現在，在將部分開票訂單的商店貸項退回到客戶帳戶時，應用產品將正確計算已開票的客戶餘額。

<!-- ENGCOM-8710-->

* 現在，當應用程式保存退款的客戶餘額時，它會按預期保存修改後的訂單。 [GitHub-393](https://github.com/magento/partners-magento2ee/issues/393)

### 付款方法

<!-- MC-41525-->

* 應用程式現在將付款塊 `frontend` 無論電子郵件從哪個區域發送。 (現在模擬當前區域為 `frontend` )。 以前，在電子郵件發送區域中提供付款塊。 因此，無論是從管理員觸發銷售電子郵件還是由REST API觸發，資產的URL都試圖從錯誤區域載入它們(`webapi_rest` 或 `adminhtml`)。

<!-- MC-40810-->

* 應用程式現在將可下載產品的連結發送到在簽出期間指定的電子郵件地址。 以前，當客購者使用PayPal Express Checkout並輸入不同的電子郵件地址來提交訂單和結帳時，應用程式將可下載的產品連結發送到第一個地址。

<!-- MC-38051-->

* 此時，在支援多種貨幣的部署中，應用產品將在「付款方法」頁上顯示可用儲存貸項的準確值。

<!-- MC-37820-->

* 付款方法清單現在按預期更新，當客戶購物者在結帳期間將訂單的發運地址更改到不同的國家/地區時。 以前，更改開單地址不會觸發對可能付款方法的更新。

#### 貝帕爾

<!-- MC-39895-->

* 購物者現在可以成功簽出PayPal Payflow Pro訂單，訂單的送貨地址包含特殊字元。 此前，申請拒絕為這些訂單付款。

<!-- MC-39861-->

* 使用PayPal成功付款後，購物者現在將重定向回訂單成功頁面。 以前，購物者被重定向到空白頁面，因為會話資料丟失。

### 效能

<!-- MC-41647-->

* 管理SKU搜索大型目錄的效能已提高。 查詢優化程式提示現在在執行查詢期間強制使用索引。

<!-- MC-41440-->

* 的效能 `catalog_product_alert` `cron` 在大型表（幾百萬行）上運行時的進程已得到改進。 以前， `catalog_product_alert` 已載入所有產品警報，導致記憶體不足異常。

<!-- ENGCOM-8752-->

* 當僅需要一個編輯頁來呈現管理表單時，應用程式不再載入所有CMS頁。  這些頁面現在載入得更快。 [GitHub-30936](https://github.com/magento/magento2/issues/30936)

<!-- ENGCOM-8510-->

* 中的數字值 `WHERE IN` 表達式現在轉換為數字，而不是字串，這樣可提高MariaDB某些版本的查詢效能。 [GitHub-31135](https://github.com/magento/magento2/issues/31135)

* 的 `use_application_lock` 模式允許通過使用環境變數或通過配置 `app/etc/env.php` 的子菜單。 啟用此模式後，您不再需要在失敗後手動重置索引器。 未啟用此模式時，必須在失敗後手動重置索引器。 請參閱 [使用應用程式鎖定模式重新索引進程](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes)。

### 定價

<!-- MC-41767-->

* 當購物者在店面更新產品數量時，應用程式現在會使用分組價格正確更新產品價格。 [GitHub-32669](https://github.com/magento/magento2/issues/32669)

<!-- MC-39282-->

* 現在，在為產品分配了層價和 `Magento\Framework\Api\ExtensibleDataObjectConverter` 用於轉換產品資料。 以前， `Magento\Framework\Api\ExtensibleDataObjectConverter` 用於在保存產品時將產品資料轉換為陣列，應用程式未保存產品並顯示以下錯誤： `Notice: Undefined index: price in app/code/Magento/Catalog/Model/Product/Type/Price.php on line 382.`

<!-- MC-36811-->

* 計畫價格更新現在應用於購物車中已有的產品。 [GitHub-356](https://github.com/magento/partners-magento2ee/issues/356)

<!-- MC-24693-->

* 當啟用數量增量且小數庫存小於1時，層價格現在按預期應用於產品。 以前，最小層價格數量設定為1。

### 產品視頻

<!-- MC-39755-->

* 您現在可以使用 **添加視頻** 按鈕（管理員） **目錄** > **產品**)連續添加多個視頻。 以前，視頻欄位保留上一視頻的詳細資訊。

<!-- MC-40817-->

* 在產品頁面上輸入產品視頻的全屏模式現在可以在移動設備上正常工作。 以前，進入全屏模式會導致視頻在退出全屏模式之前暫停。

<!-- MC-39759-->

* 導航箭頭按鈕(**下一個** 和 **上**)現在按預期顯示在店面產品視頻中。

<!-- MC-40463-->

* 商家現在可以使用 **插入視頻** 按鈕 以前，應用程式顯示404錯誤。 [GitHub-31753](https://github.com/magento/magento2/issues/31753)

### 報價

<!-- MC-39531-->

* 的 `/V1/guest-carts/examplecartid/items` 呼叫現在返回請求的儲存視圖。 以前，它返回了商店中的第一個商店視圖，而不是請求的。

<!-- MC-33893 ENGCOM-8992-->

* 發票發送現在可配置。 以前，發票發送不可配置，並且在建立發票後，應用產品始終會發送發票。 發票和訂單電子郵件均在一個觀察員範圍內發送。 現在，單獨的觀察員負責訂單電子郵件和發票電子郵件的發送。 [GitHub-27656](https://github.com/magento/magento2/issues/27656)

### 報告

<!-- MC-40998-->

* 現在，所有系統報告都可以在Adobe Commerce的雲基礎設施項目上查看和下載。 以前，您無法下載日誌、資料、設計或儲存的系統報告。

<!-- MC-39737-->

* 管理員的上次審核日期 **報告** > **評論** > **按產品** 現在顯示正確的審閱日期。 以前，應用產品顯示的是產品建立日期，而不是審閱日期。

### 退貨授權(RMA)

<!-- MC-41866-->

* RMA `resolution` 屬性欄位值時不再按需要顯示屬性 `required` 設定為 **不**。

<!-- MC-41808-->

* 您現在可以從管理員中選擇多個訂單以進行退貨。 以前，當您按一下時，應用程式引發錯誤 **提交** 選擇多個返回並從「操作」下拉菜單中選擇「關閉」。

<!-- MC-41759-->

* 在您使用REST API更改退貨狀態後，應用程式現在會按照預期向客戶發送電子郵件通知。

<!-- MC-39981  magento/partners-magento2ee#442 -->

* 應用程式現在根據管理員客戶返回網格中的篩選器值篩選記錄。 以前，應用程式將您定向到「管理所有客戶」頁，然後按一下 **重置篩選器** 按鈕也重定向到此頁。 [GitHub-436](https://github.com/magento/partners-magento2ee/issues/436)

### 評論

<!-- MC-40116-->

* 現在，在「我的帳戶」頁的「審閱詳細資訊」部分中正確計算產品審閱評級星號。

<!-- MC-39763-->

* 現在，產品審閱詳細資訊頁面的「平均產品評級」和「產品評級」部分會正確呈現。 以前，在應用程式計算店面評級時未設定審核ID，並且未正確呈現產品審核模板。

<!-- MC-36149-->

* 的 **首先查看此產品** 連結現在在管理員批准審閱後根據預期更改為審閱計數。

<!-- ENGCOM-8501 MC-30270-->

* 管理員現在可以按照預期對產品編輯頁面的「產品審閱」(Product Reviews)部分的產品審閱進行排序。 [GitHub-30270](https://github.com/magento/magento2/issues/30270)

<!-- MC-41003  magento/magento2#32259-->

* 管理員批准並保存來自與儲存區不同域的審閱後，現在將使用正確的儲存ID保存審閱。 [GitHub-17510](https://github.com/magento/magento2/issues/17510)

### 獎勵

<!-- MC-41159-->

* 商家現在可以取消在下單的客戶從系統中刪除後全部或部分使用獎勵積分下達的訂單。

<!-- MC-40037-->

* 商家現在可以從購物車價格規則中刪除獎勵積分。 以前，當商人試圖 **獎勵積分** 建立購物車價格規則時，前一個獎勵點數量值將保持為0。

<!-- MC-39890-->

* 當從管理員處批准多個審閱時，產品審閱的獎勵積分現在與相關網站關聯 **營銷** > **待定審閱** 的下界。 以前，獎勵積分不顯示在店面上，也未連結到管理員中的相關網站。

<!-- MC-39820-->

* 當購物者用多個地址簽出時，該應用程式現在會更新付款方法清單 **儲存積分（獎勵積分）** 的雙曲餘切值。

### 銷售

<!-- MC-39796-->

* 管理員用戶現在可以在 **允許延交訂單** 設定已啟用(**商店** > **配置** > **目錄** > **庫存** > **產品庫存選項**)。 以前，應用程式引發錯誤。

<!-- MC-42280-->

* 當姓氏以空格結尾時，購物者現在可以在「訂單和退貨」頁面上查找訂單。

<!-- MC-41438-->

* 現在，在將分配100%折扣的購物車價格規則應用於訂單時，使用正確的總計建立發票，該訂單還要繳納目錄產品稅和折扣稅，並且符合免費發運資格。 以前訂單有正確的價格，但發票沒有。 [GitHub-30853](https://github.com/magento/magento2/issues/30853)

<!-- MC-40384-->

* 按日期篩選訂單現在會返回準確結果。 以前，在您按訂單日期篩選訂單時，應用程式未返回在00:00 UTC之後下達的訂單。

<!-- MC-40030-->

* 此時，貸項通知單網格將顯示正確的貨幣符號 **網站** 範圍用於 **價格** 屬性。

<!-- MC-40013 ENGCOM-8781-->

* 重新載入「管理員建立新訂單」頁後，「付款和發運資訊」部分的「付款方法」單選按鈕將不再消失。 [GitHub-32106](https://github.com/magento/magento2/issues/32106)

<!-- MC-39891-->

* 阿拉伯文文本現在在發票中正確顯示。

<!-- MC-39864-->

* 此時，應用產品將正確計算部分貸項通知單稅合計，這些貸項通知單基於將PayPal Payment Pro部署為付款網關的商店中的訂單或發票。 以前，對於具有多張發票的訂單，應用產品會在貸項通知單中為部分發票取消核銷該訂單的全部稅。

<!-- MC-39521 ENGCOM-8528-->

* 應用程式在向客戶發送新訂單電子郵件時不再建立隨機資料庫死鎖。 以前，由於應用程式保存了整個對象及其相關對象，而不是更新的SQL列，因此會發生死鎖。 應用程式顯示了此類錯誤： `SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction`。 [GitHub-31090](https://github.com/magento/magento2/issues/31090)

<!-- MC-39353-->

* 現在，「店面訂單詳細資訊」頁會顯示正確的發運產品數量。 以前，產品數量不正確，因為已呈現「訂單發運」頁的模板 **發運數量** 作為 `int`。 此內容已更改為 `float`。

<!-- MC-39026-->

* 在以下情況下，應用程式不再通過電子郵件發送訂單發票的副本： **電子郵件發票副本** 複選框。 以前，應用程式將電子郵件發送到 **客戶** 和 **將發票電子郵件副本發送到**。 [GitHub-28511](https://github.com/magento/magento2/issues/28511)

<!-- MC-38973-->

* 當從管理員為現有客戶建立新訂單時，應用程式不再為客戶帳戶建立重複的地址條目。 的 **在通訊簿中保存** 複選框已更名為 **添加到通訊簿** 現在，預設情況下在管理中未選中。

<!-- MC-38834-->

* 應用程式現在使用已上傳到 **HTML打印視圖徽標** 設定。 以前，應用程式顯示LUMA徽標，而不是上載的徽標。

<!-- MC-38625-->

* 當物料計數超過20時，店面上訂單物料的尋呼機現在按預期工作。 以前，尋呼機將子產品考慮在內，總計數不正確。

<!-- MC-23915 ENGCOM-8713-->

* 此時，應用產品將在「訂單」頁和「貸項通知單」頁網格中顯示小計和發運及處理值的正確貨幣符號。 [GitHub-22662](https://github.com/magento/magento2/issues/22662)

<!-- ENGCOM-8486-->

* 使用Safari的管理員現在可以成功將產品添加到管理員的訂單中。 以前，當管理員按一下 **將所選產品添加到訂單** 按鈕，應用程式將顯示旋轉載入表徵圖，頁面掛起。 [GitHub-30265](https://github.com/magento/magento2/issues/30265)

### 銷售規則

<!-- MC-40671-->

* 應用產品現在將購物車價格規則與 **最大數量折扣應用於** 或 **折扣數量步驟（購買X）** 應用多個購物車價格規則時的條件。 以前，如果購物車價格規則 **最大數量折扣應用於** 或 **折扣數量步驟（購買X）** 在應用另一個購物車價格規則後，總折扣將減少到為 **最大數量折扣應用於** 或 **折扣數量步驟（購買X）** 乘以產品價格。

<!-- MC-39827-->

* 現在，優惠券報告可以準確地反映實施拆分資料庫的部署中的優惠券活動。

<!-- MC-39477-->

* 包含條件的購物車價格規則類別 **不** 現在按預期應用於未分配給類別但已分配其父產品的可配置子/簡單產品。

<!-- MC-39034-->

* GraphQL `cart` 查詢現在將優惠券應用於訂單時返回購物車開單步驟的正確總計。

### 搜索 {#search-heading}

<!-- MC-41138-->

* 類別頁不再包含這些重複的HTML元素ID: `modes-label`。 `mode-list`。 `toolbar-amount`。 `sorter`。 `limiter`。

<!-- MC-40981-->

* 部分字搜索結果不再包含意外或不相關的匹配項，並且搜索在店面和管理員上都會產生一致的結果。 應用程式現在使用不帶空格的其他分析器進行部分字搜索。 以前，搜索結果顯示的產品不包含搜索關鍵字。 （預設分析器以前包括一個精簡器，並且由於在搜索部分詞搜索時使用了同一分析器，因此搜索結果可能會產生意外或不相關的匹配項。）

<!-- MC-40715-->

* 如果搜索查詢包含多個單詞且產品名稱配置為不可搜索，則快速搜索現在將返回結果。 以前，如果產品名稱配置為不可搜索，則應用程式會對具有多個字的搜索查詢引發查詢異常。

<!-- MC-40672-->

* 搜索結果現在包括 `weight` 屬性。

<!-- MC-40409-->

* 當您查看啟用了Elasticsearch的空類別頁時，應用程式不再引發錯誤。 相反，它會按預期呈現頁面並顯示一條資訊性消息。 以前，空全文索引在類別頁上觸發了異常。

<!-- MC-40376-->

* 搜索欄位自動完成功能現在如果購物者開始搜索後在搜索欄位外按一下，將按預期工作。 當購物者繼續鍵入時，自動完成建議現在會重新出現。 以前，應用程式未顯示自動完成建議，而按一下搜索框後，搜索建議不再可見（儘管鍵入了其他字母）。

<!-- MC-34217-->

* 現在，在高級搜索中根據產品的完整或部分SKU搜索產品將返回預期產品。

<!-- MC-31395-->

* 分層導航過濾器現在顯示準確的產品計數。 以前，Elasticsearch中的產品計數值未按目錄權限篩選。

<!-- MC-23881 ENGCOM-8618-->

* Elasticsearch在類別URL頁面參數超過分頁時不再引發錯誤。 [GitHub-23843](https://github.com/magento/magento2/issues/23843)

<!-- MC-24033  magento/magento2#3274-->

* 現在，您可以將自定義Elasticsearch欄位映射器添加到 `Magento\Elasticsearch\Model\Adapter\FieldMapper\Product\FieldProvider\FieldName\Resolver\CompositeResolver`。 [GitHub-24350](https://github.com/magento/magento2/issues/24350)

<!-- ENGCOM-9029 MC-24026-->

* 開發人員現在可以更改Elasticsearch映射。 以前，在預設映射中發送到Elasticsearch伺服器的動態模板是硬編碼的，這防止了開發人員Elasticsearch與自定義模組關聯的任何額外資料而進行索引。 [GitHub-24363](https://github.com/magento/magento2/issues/24363)

<!-- ENGCOM-8464 -->

* 禁用「搜索建議」時，搜索欄位（窗體部件搜索）現在可以按預期工作。 [GitHub-30584](https://github.com/magento/magento2/issues/30584)

### 裝運

<!-- MC-41464-->

* 當購物者在使用多個地址結帳期間刪除產品後導航回購物車頁面時，應用程式現在會按預期更新發運價格。

<!-- MC-41343-->

* 當購物車中的某些物料符合免費發運條件時，應用產品現在將顯示正確的調整發運價格。 以前，當購物車中符合免費發運條件的物料子集時，應用產品不會調整發運價格並向購物者顯示完整的發運價格。

<!-- MC-41186-->

* 受限於特定網站的管理員現在可以為同一網站上的訂單建立發運。 以前，當管理員沒有預設儲存視圖權限而試圖裝運在儲存視圖中的訂單時，應用程式會引發此異常： `Notice: Undefined offset: 1 in /app/code/Magento/Catalog/Model/Product/Attribute/Backend/GroupPrice/AbstractGroupPrice.php on line 293`。

<!-- MC-41069-->

* 在確定訂單是否滿足免費DHL發運條件時，此應用產品現在將考慮相關的購物車價格規則折扣。

<!-- MC-40702 ENGCOM-8728-->

* 當訂單以非基本貨幣下放時，發運標籤現在會按照預期使用基本貨幣，而不是支援多種貨幣的商店的訂單貨幣。 [GitHub-31891](https://github.com/magento/magento2/issues/31891)

<!-- MC-40678 magento/magento2#31925-->

* 當購物者在離開多發貨頁後在結帳期間返回購物車頁時，應用產品現在顯示正確的訂單小計。 [GitHub-31889](https://github.com/magento/magento2/issues/31889)

<!-- MC-40541 magento/magento2#31841 -->

* 在建立管理訂單期間編輯開單資訊不再更改具有不同預設發運和開單地址的客戶的發運資訊。 [GitHub-31786](https://github.com/magento/magento2/issues/31786)

<!-- MC-37385 ENGCOM-8578-->

* 應用程式不再取消檢查 **追加註釋** 複選框 **獲取發運方法和費率** 並在從管理員建立訂單時選擇發運方法。 [GitHub-30256](https://github.com/magento/magento2/issues/30256)

<!-- MC-36425-->

* 購物者現在可以使用「後退瀏覽器」按鈕，在簽出具有多個地址的訂單時返回至「選擇發運方法」頁。 以前，應用程式顯示的「選擇發運方法」頁已損壞。 [GitHub-30268](https://github.com/magento/magento2/issues/30268)

<!-- MC-40021 ENGCOM-8983-->

* 購物者在「發貨至多個地址」頁上更改數量並按一下瀏覽器「後退」按鈕後，產品數量現在仍保持預期不變。 [GitHub-31956](https://github.com/magento/magento2/issues/31956)

<!-- ENGCOM-9096-->

* 在結帳期間應用購物車價格規則時，統一費率發運方法費用不再為零。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- ENGCOM-8537-->

* 當商戶嘗試使用DHL發運訂單時，應用程式不再引發錯誤 **建立發運標籤** 複選框，並且產品名稱包含unicode字元。 以前，應用程式在請求建立標籤時顯示以下錯誤： `The response is in wrong format`。 [GitHub-31032](https://github.com/magento/magento2/issues/31032)

<!-- ENGCOM-8952 -->

* 您可以在多站點部署中成功地從管理員下單， `United States` 在一個網站上啟用，`Disable all countries` 作為其他網站上的預設範圍啟用。 以前，應用程式未下訂單並顯示以下錯誤： `Please check the shipping address information. "regionId" is required. Enter and try again`。 [GitHub-30577](https://github.com/magento/magento2/issues/30577)

### 暫存

<!-- MC-39807-->

* 調度塊更新功能現在可以在實施Appriest的部署中按預期工作。 此前，應用程式沒有更新塊內容，因為Abmeistcache標籤沒有失效，並且Abmestible繼續為過時的內容提供服務。

<!-- MC-41142-->

* 當分配給多個網站商店視圖時，購物車價格規則暫存預覽現在將載入到相應的網站。 以前，無論分配的網站如何，購物車價格規則登台預覽都已載入到預設儲存視圖中。

<!-- MC-40916-->

* 非預設商店視圖中產品的特殊價格現在設定為預定更新結束後預期的預設值。

<!-- MC-40850  magento/partners-magento2ee#489-->

* 在建立具有結束日期的將來分段更新之後，商家現在可以從可下載產品頁面成功保存具有連結樣本的可下載產品。 以前，應用程式未保存產品並顯示以下消息： `The downloadable sample isn't related to the product. Verify the link and try again`。 [GitHub-488](https://github.com/magento/partners-magento2ee/issues/488)

<!-- MC-40734-->

* 應用程式不再執行包含所有產品ID的大型資料庫查詢，以在預覽類別的計畫更新期間執行。 相反，類別篩選器將應用於產品集合，以生成臨時表來暫存類別的預覽。 以前，應用程式將所有產品插入臨時表中以進行臨時預覽，這會降低效能。

<!-- MC-40714-->

* 的 `Magento_SalesRuleStaging` 在從2.3.x升級期間，模組不再觸發錯誤。

<!-- MC-40697-->

* 在查看計畫更新時，應用產品現在顯示包含正確資料的目錄規則條件。 以前，如果您查看的是使用條件建立的計畫更新，則應用產品不會顯示條件或顯示的條件並包含不正確的資料。

<!-- MC-40604-->

* 的 **使用預設值** 在更新前未選中計畫更新後，產品的複選框仍處於選中狀態。

<!-- MC-40588 magento/partners-magento2ee#463-->

* 目錄價格規則現在按預期適用於具有未定義屬性值的產品。 以前，通過目錄價格規則建立的折扣不會應用於具有未定義屬性的產品。 [GitHub-461](https://github.com/magento/partners-magento2ee/issues/461)

<!-- MC-40283-->

* 目錄規則現在可以在不同時區的商店中，按預期工作。 以前，應用程式一次在所有網站上應用或停用目錄規則。

<!-- MC-40054-->

* 為特定網站建立計畫更新時，不再刪除層價。

<!-- MC-39784 magento/partners-magento2ee#475-->

* 現在，在建立具有結束日期的將來臨時更新後，您可以從「可下載產品」頁保存產品。 以前，應用程式未保存產品並顯示以下消息： `The downloadable link isn't related to the product. Verify the link and try again`。 [GitHub-474](https://github.com/magento/partners-magento2ee/issues/474)

### 儲存

<!-- MC-40538-->

* 應用程式不再處理 `0` 顯示儲存首頁時顯示為空值。 以前，應用程式將請求路徑開始處的整數值視為儲存ID，這對SEO產生了意外影響。

<!-- MC-40313  magento/magento2#31970-->

* 插件 `\Magento\Framework\App\ActionInterface` 在 `lib/internal/Magento/Framework/App/Action/Plugin` 已刪除，以遵循應使用插件來自定義另一個模組中一個模組的行為的准則。 [GitHub-28050](https://github.com/magento/magento2/issues/28050)

<!-- MC-24772-->

* 當您嘗試選擇時，應用程式現在顯示此消息 `Website` 預設 `Store View` 在建立網站時禁用： `Please enable your Store View before using this Web Site as Default`。 以前，網站崩潰，應用程式未顯示警報。

### 稅

<!-- MC-39571-->

* 在驗證最小訂單金額期間，此應用產品現在將隱藏稅考慮在內。

<!-- MC-38025 ENGCOM-8612-->

* 現在，當購物者導航回購物車並在將捆綁產品添加到購物車後開始結帳時，此應用產品將按照預期顯示固定產品稅(FPT)。 [GitHub-30250](https://github.com/magento/magento2/issues/30250)

<!-- MC-37657 magento/magento2#31850-->

* 應用程式現在預填充 **增值稅編號** 當管理員為現有客戶建立訂單時，「管理新訂單」頁的「地址資訊」部分的開單地址和發運地址的輸入欄位均具有已保存的增值稅編號。 [GitHub-31846](https://github.com/magento/magento2/issues/31846)

<!-- ENGCOM-8617 magento-engcom/magento2ee#558-->

* 應用程式現在顯示 **增值稅編號** 在 `customer/create_account/vat_frontend_visibility` 的子菜單。 [GitHub-31326](https://github.com/magento/magento2/issues/31326)

### Test

<!-- MC-41393-->

* Test環境已升級到Redis 6.0.12。

<!-- ENGCOM-8529-->

* 已刪除 `CacheCleaner::cleanAll();` 從整合test。 [GitHub-31074](https://github.com/magento/magento2/issues/31074)

<!-- ENGCOM-8898-->

* 已為此方案添加test:管理員用戶可以在客戶訂閱排隊的新聞稿時編輯客戶帳戶。 [GitHub-30645](https://github.com/magento/magento2/issues/30645)

<!-- ENGCOM-8484-->

* 已刪除 `cache:flush` test命令以縮短執行時間 `Catalog`。 `CatalogUrlRewrite`, `LoginAsCustomer` 模組。 [GitHub-31056](https://github.com/magento/magento2/issues/31056)

<!-- ENGCOM-8499-->

* 已刪除冗餘參數，並將POST更改為GET `\Magento\Logging\Model\ProcessorTest::testLoggingProcessorLogsActionShipping`。

### 主題

<!-- MC-41474-->

* 客戶登錄頁在 **將JS代碼移到頁面底部** 設定&#x200B;**儲存** > **配置** > **先進** > **開發人員** > **JavaScript設定**)和cookie都已啟用： `The store will not work correctly in the case when cookies are disabled`。

<!-- MC-40982-->

* 標題中的帳戶連結現在遵循WCAG標準。 以前，標頭中的帳戶連結包含重複的ID，這導致WCAG驗證失敗。

<!-- MC-40278-->

* 應用程式現在將儲存徽標影像的儲存配置優先於佈局配置。 以前，徽標影像的大小是固定的，不會因商店而異。

<!-- MC-35227-->

* 現在，應用程式在使用標準Adobe Commerce主題的店面頁面上一致地顯示頁面元素。 以前，並非所有樣式都應用在「空白」主題中，因此並非所有頁面元素都顯示在使用此主題的頁面中。 （例如，「我的訂單」頁搜索欄位中沒有放大鏡表徵圖。）

### 翻譯和區域設定

<!-- MC-23553 ENGCOM-8839-->

* 配置內聯轉換時，添加到字串的方括弧不再轉義。 以前， `escapeHtmlAttr` 方法將方括弧轉換為HTML實體代碼。 [GitHub-32000](https://github.com/magento/magento2/issues/32000)

<!-- ENGCOM-8694-->

* 管理員中不可翻譯的短語現在可以翻譯。 （此請求有助於使所有管理字串可本地化的持續努力。） [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8584-->

* 模板中用於管理儲存的付款方法的文本字串(**我的帳戶**  >  **儲存的付款方法** )現在可翻譯。 [GitHub-31211](https://github.com/magento/magento2/issues/31211)

<!-- MC-30798 ENGCOM-8717-->

* 從管理員發送的訂購電子郵件現在使用儲存區域設定，而不是與管理員帳戶關聯的區域設定。 [GitHub-26521](https://github.com/magento/magento2/issues/26521)

### UI

<!-- MC-41784-->

* 管理員頁腳現在顯示正確的產品版本。

<!-- MC-41067-->

* 在建立管理員裝運期間，現在按預期顯示源的分頁。

<!-- MC-40240-->

* 使用自定義日期屬性篩選產品時，產品網格篩選器現在可以正常工作，而管理員用戶區域設定為 `en_GB`。

<!-- MC-39279-->

* 現在，在iOS設備上的產品頁面影像庫放大器中，收縮到縮放的手勢可以正常工作。

<!-- MC-38787-->

* 管理產品網格搜索結果的分頁現在按預期從第1頁開始。

<!-- MC-38423-->

* 已解決縮放時購物車顯示的異常。 以前，縮放此頁面時顯示元素會重疊。

<!-- MC-38235 magento/partners-magento2ee#492 -->

* 與「管理員邀請」頁上的頁籤的對齊問題（管理員） **營銷** > **私人銷售** > **邀請**)已解決。 以前，客戶已接受邀請的標籤顯示未對齊。 [GitHub-333](https://github.com/magento/partners-magento2ee/issues/333)

<!-- MC-38226 magento/magento2#32008-->

* PayPal Express Checkout在結帳期間顯示的訂單複查頁現在已成功載入。 以前，模板包含未使用的 **更新傳遞方法** 按鈕，該按鈕僅在頁面呈現期間被指令碼部分隱藏。 [GitHub-32006](https://github.com/magento/magento2/issues/32006)

<!-- MC-37941 magento/magento2#31892-->

* 現在，當存在冗長的評級名稱時，產品頁面「客戶評論」部分中的評級星和審閱文本會被適當地隔開。 [GitHub-31890](https://github.com/magento/magento2/issues/31890)

<!-- MC-37688-->

* 現在，選項將按預期顯示在「存檔發票」、「發運」和「貸項通知單」頁的「活動」下拉清單中。

<!-- MC-23729  magento/magento2#31549-->

* 此時，應用程式將在 `datetime` 元件 `timeOnly` 選項設定為 **是**。 [GitHub-23157](https://github.com/magento/magento2/issues/23157)

<!-- ENGCOM-8514 -->

* 現在，在管理員上建立新小部件後，您可以刪除佈局更新 **內容** > **小部件**。  [GitHub-29936](https://github.com/magento/magento2/issues/29936)

<!-- ENGCOM-8502 MC-35716-->

* 的 **刪除佈局更新** 按鈕現在可以按您從管理員添加的任何佈局的要求工作 **內容** > **小部件**。 以前，添加多個佈局時，此按鈕在除第一個選定佈局之外的任何佈局上都不起作用。 [GitHub-30286](https://github.com/magento/magento2/issues/30286)

<!-- ENGCOM-8524 -->

* 應用程式現在將佈局檔案中設定的頁面標題用作「客戶帳戶編輯」檔案的瀏覽器頁面標題。 以前， `Magento\Customer\Controller\Account\Edit` 控制器操作強制將頁標題值 `Account Information`。 [GitHub-30724](https://github.com/magento/magento2/issues/30724)

<!-- ENGCOM-8896 8826-->

* 允許商家在顯示和隱藏密碼之間切換的複選框已添加到以下頁面：
   * 客戶登錄
   * 客戶註冊
   * 客戶編輯（更改密碼部分）
   * 客戶設定新密碼 [GitHub-31557](https://github.com/magento/magento2/issues/31557)

<!-- ENGCOM-8545 -->

* 刪除了網格單元格中的冗餘標題，當管理員在更改屬性集後將產品添加到分組的產品集時，該標題會出現。 [GitHub-30911](https://github.com/magento/magento2/issues/30911)

<!-- ENGCOM-8895 -->

* 應用程式現在顯示 `DateRange` 篩選器 **客戶**  >  **登錄** 的子菜單。 以前，應用程式顯示 `Text` 的子菜單。 [GitHub-30328](https://github.com/magento/magento2/issues/30328)

<!-- ENGCOM-9009 -->

* JavaScript已從模板檔案中刪除，並移入單獨的檔案，以減少「管理」頁上的呈現問題。 以前，在啟用了HTML縮減的部署中，管理頁未正確呈現。 應用程式顯示了以下錯誤： `An error has happened during application run. See exception log for details`。 [GitHub-32454](https://github.com/magento/magento2/issues/32454)

<!-- ENGCOM-9044 -->

* 的 `dropdownDialog` 現在只載入可拖動和可調整大小的小部件 `jquery-ui` 它需要的塊。 以前，它載入了大量不必要的代碼，從而增加了載入時間，降低了效能。 [GitHub-32810](https://github.com/magento/magento2/issues/32810)

### URL重寫

<!-- MC-41550-->

* 現在，在通過批量更新將產品分配給網站後，將按照預期為多站點部署中的特定網站生成產品URL重寫。

<!-- MC-40780 magento/magento2#32598-->

* 應用程式現在正確生成子類別的URL路徑 **使用預設值** 已為父類別啟用URL鍵的複選框。 以前，在層次結構中移動類別會導致錯誤 `url_path` 在多儲存視圖部署中使用不同的URL鍵時的值。 [GitHub-16202](https://github.com/magento/magento2/issues/16202)

<!-- MC-40371-->

* 應用程式現在更新 `url_path` 在類別層次結構中移動類別時分配給所有儲存範圍的類別。 以前，在層次結構中移動類別會導致錯誤 `url_path`。

<!-- MC-39463-->

* 使用自定義URL從管理員建立的URL重定向現在可以成功運行。 以前，GraphQL快取了來自GraphQL的響應 `urlResolver` 查詢並在URL重寫更新後返回舊值。

<!-- MC-38931  magento/magento2#31106-->

* 現在，當從網站中刪除產品時，將按預期刪除產品URL重寫。 [GitHub-24184](https://github.com/magento/magento2/issues/24184)

<!-- ENGCOM-8719 -->

* 已添加 `main_table` 引用 `store_id` 的 `addStoreFilter` 函式 `app/code/Magento/UrlRewrite/Model/ResourceModel/UrlRewriteCollection.php` 的下界。 以前，每當 `join` 添加到同時包含 `store_id` 的雙曲餘切值。 [GitHub-31853](https://github.com/magento/magento2/issues/31853)

<!-- ENGCOM-8894 -->

* 的 `PUT /V1/products/:sku` 現在，REST終結點將按照預期重新生成產品URL重寫。 以前，端點重新生成的產品 `url_key` 值，但不重寫URL。 [GitHub-30316](https://github.com/magento/magento2/issues/30316)

### 用戶

<!-- MC-40777  magento/magento2#31998-->

* 您現在可以保存一個有效的新用戶角色（管理員） **系統** > **權限** > **用戶角色**) `Catalog` 所選樹排除 `Edit Product Design` ( **目錄** > **庫存** > **產品** > **編輯產品設計**)。 以前，應用程式未保存由此角色中的用戶所做的產品更改並顯示以下錯誤： `Not allowed to edit the product's design attributes`。 [GitHub-31973](https://github.com/magento/magento2/issues/31973)

<!-- MC-38442-->

* 應用程式現在在為新管理員生成電子郵件時使用正確的自定義電子郵件模板。 以前，應用程式使用舊的預設模板，該模板省略了管理員的姓和名。

<!-- MC-38122-->

* 應用程式現在在向新用戶發送電子郵件時使用正確的電子郵件模板。 以前，即使選擇了自定義模板，應用程式也使用預設模板。

### 版本CMS

<!-- MC-39953-->

* 在更改CMS頁面佈局後，應用程式現在將正確的主題應用到該頁面。 以前，在您保存佈局更改後，應用程式會將分配的主題更改為Luma，而不管將哪個主題分配給頁面。

<!-- MC-40431-->

* 具有受限角色的管理員現在可以成功添加、更新或複製他有權訪問的分配給層次結構節點的頁面。 以前，在這些情況下，應用程式引發了致命錯誤。

### 視頻

<!-- MC-42059 ENGCOM-9039-->

* 當啟用和使用高級JavaScript綁定時，視頻現在可在產品庫中按預期提供。 [GitHub-32501](https://github.com/magento/magento2/issues/32501)

<!-- ENGCOM-8532-->

* YouTube視頻中屬於可配置產品的簡單產品，現在可以按預期工作。 以前，影像是按ID而不是位置排序的。 因此，一些視頻被視為影像。 [GitHub-29690](https://github.com/magento/magento2/issues/29690)

### 視覺跟蹤器

<!-- MC-40797-->

* 使用Visual Stlocker載入管理類頁面的效能已經提高。 載入管理類別頁不再生成大型資料庫查詢。

### Web API框架

<!-- MC-41758-->

* 目錄API現在可以通過添加新值和刪除舊值來正確更新產品的自定義選項值。 以前，API未刪除舊值。

<!-- MC-34431-->

* POST `/V1/guest-carts/:cartId/billing-address` 現在，將地址ID返回為整數，而不是字串。

### 網站限制

<!-- MC-38516-->

* 現在，購物者將被重定向到他們試圖訪問的頁面，然後才會被提示登錄。 以前，在啟用了網站限制且將限制模式設定為的部署中 **私人銷售：僅登錄**，購物者被重定向到商店首頁。

### 小部件

<!-- MC-39128-->

* 管理員現在可以刪除小部件的所有佈局更新。 以前，當小部件具有多個佈局更新時，管理員只能刪除第一個佈局更新。

<!-- MC-39107-->

* 按一下 **添加到購物車** 按鈕將不再導致重新載入頁面。 以前，按一下 **添加到購物車** 按鈕導致在將產品添加到購物車之前重新載入當前頁面。

<!-- MC-23590-->

* TinyMCE中的CMS層次結構節點連結構件現在將在 **錨點自定義文本** 欄位為空。

### 願望清單

<!-- MC-40651 ENGCOM-8769-->

* 當您按一下 **編輯項目** 按鈕。 [GitHub-32119](https://github.com/magento/magento2/issues/32119)

<!-- MC-40417-->

* 在您使用希望清單中的可自定義檔案選項更新產品時，應用產品現在會顯示正確的產品價格。 以前，應用程式顯示的產品價格錯誤，並且未顯示到上載檔案的連結。

<!-- MC-39060-->

* 具有多個願望清單的客戶的願望清單中的產品總數現在與願望清單中的項目數相匹配。 以前，庫存不足的產品已包括在產品總數中。

<!-- MC-36779 magento/magento2#31110-->

* 現在，應用程式將產品添加到訂單後從希望清單中刪除它。 [GitHub-30260](https://github.com/magento/magento2/issues/30260)

<!-- MC-34456 ENGCOM-8816-->

* 購物者現在可以從願望清單將相關產品添加到購物車。 以前，當購物者按一下 **全選** 「相關產品」部分的連結。 [GitHub-32274](https://github.com/magento/magento2/issues/32274)

## 已知問題

**問題**: _禁用reCAPTCHA時出現JavaScript錯誤_。 如果為簽出禁用reCAPTCHA，則簽出將繼續，但應用程式將顯示 `Uncaught TypeError` 控制台日誌中出錯。  此問題將在以後的版本中解決。 <!-- MC-42589 42649-->

**問題**: _內容安全策略錯誤_。 在控制台日誌中，儲存前面顯示以下錯誤： `The Content-Security-Policy directive frame-ancestors does not support the source expression unsafe-inline`。 店面效能不受影響。 <!-- MC-42613-->

**問題**: _禮品卡金額的PayPal信用顯示異常_。 啟用PayPal信用並配置多張禮品卡金額時，如果購物者更改了禮品卡值的金額，則商店不會更新分期付款的金額。 此問題的解決辦法將包括在Adobe Commerce2.4.4和Magento Open Source2.4.4。<!-- MC-42499 AC-344-->

**問題**:  _的&#x200B;**添加到訂單**按SKU添加到購物車的產品不適用。_。  當您按一下 **添加到訂單** 按SKU將產品添加到訂單後的按鈕： `An error has happened during application run`。 產品不會添加到購物車。 **解決方法**:使用「添加產品」功能。 <!-- AC-345-->

**問題**:GraphQL `category` 和 `categoryList` 查詢忽略確定共用目錄中的類別是隱藏還是暴露的類別權限。 店面當前顯示已分配或未分配到共用目錄的所有類別。 這影響了Adobe Commerce2.4.3部署，這些部署實施了已為其啟用B2B共用目錄的PWA庫。 <!-- MC-42528-->

## 社區捐款

我們感謝廣大Magento Open Source，並願承認他們對本新聞稿的貢獻。

社區工程團隊 [Magento撰稿人](https://magento.com/magento-contributors) 按月、季度和年度保存一份最佳貢獻個人和合作夥伴清單。 在該「參與者」頁中，您可以在GitHub上跟蹤到其合併公關的連結。

### 合作夥伴貢獻

下表重點介紹了合作夥伴的貢獻。 此表列出了提供拉入請求的合作夥伴、外部拉入請求以及與其關聯的GitHub發行號（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-3-partner.md}}

### 個人捐款人

下表列出了社區成員的貢獻。 此表列出了外部拉入請求、與其關聯的GitHub發行號（如果可用）以及提供拉入請求的社區成員。

{{$include /help/_includes/release-notes/engcomm-2-4-3-issues.md}}

### 系統要求

我們的技術堆棧構建在PHP和MySQL上。 有關詳細資訊，請參見 [系統要求](../../../installation/system-requirements.md)。

### 安裝和升級說明

您可以使用 [作曲家](../../../installation/composer.md)。

## 遷移工具包

資料遷移工具幫助將現有Magento1.x儲存資料傳輸到Magento2.x。此命令行介面包括驗證、進度跟蹤、日誌記錄和測試功能。 有關安裝說明，請參見 [安裝資料遷移工具](../../../tools/data-migration-tool/install.md)。 考慮探索或幫助 [資料遷移儲存庫](https://github.com/magento/data-migration-tool)。

的 [代碼遷移工具包](https://github.com/magento-commerce/code-migration) 幫助將現有Magento1.x儲存擴展和自定義內容傳輸到Magento2.x。命令行介面包括用於轉換Magento1.x模組和佈局的指令碼。
