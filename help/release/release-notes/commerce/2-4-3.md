---
title: Adobe Commerce 2.4.3發行說明
description: 了解2.4.3 Adobe Commerce版本的新功能、增強功能、錯誤修正和已知問題。
source-git-commit: 065c56f20ba5b1eef8c331c5c2f5649902f1442b
workflow-type: tm+mt
source-wordcount: '15953'
ht-degree: 0%

---


# Adobe Commerce 2.4.3發行說明

Adobe Commerce 2.4.3推出效能與安全性增強功能，以及大幅改善平台。 安全性增強包括擴大reCAPTCHA覆蓋範圍並包含內建速率限制。 核心撰寫器相依性和第三方程式庫已升級至與PHP 8.x相容的最新版本。

此版本包含超過370項核心程式碼的新修正，以及33項安全性增強功能。 Adobe Commerce 2.4.2發行說明中識別的所有已知問題已在此版本中修正。

{{bics}}

請參閱 [Adobe Commerce 2.4.2-p2發行說明](../security/2-4-2-p2.md) 以取得Adobe Commerce 2.4.2-p2的相關資訊。

## 其他發行資訊

雖然這些功能的程式碼會與每季發行搭配，但其中幾個專案(例如B2B、Page Builder和Progressive Web Application(PWA)Studio)也會獨立發行。 這些專案的錯誤修正會記錄在每個專案的檔案中，提供個別專案的發行資訊。

## 應用MC-43048__set_rate_limits__2.4.3.patch以解決API速率限制的問題

此Hotfix提供解決方案，解決Web API無法處理陣列中包含超過20個項目之請求的問題。 此問題會影響執行Magento Open Source2.4.3、Adobe Commerce 2.4.3或2.3.7-p1的部署。 這些版本新增了內建速率限制，以防止拒絕服務(DoS)攻擊，而預設最大值設為20。 此修補程式將預設限制還原為較高值。 如果您懷疑您的儲存正在遭受DoS攻擊，Adobe建議將預設輸入限制降低為較低值，以限制可請求的資源數。 請參閱 [Web API無法處理陣列中超過20個項目的請求](https://support.magento.com/hc/en-us/articles/4406893342093) 知識庫文章。

## 應用AC-384__Fix_Implated_PHP_Method__2.4.3_ce.patch以解決升級時的PHP致命錯誤

升級至Adobe Commerce 2.4.3期間可能會發生下列致命錯誤：

```terminal
PHP Fatal error: Uncaught Error: Call to undefined function Magento\Framework\Filesystem\Directory\str_contains() in [...]/magento/vendor/magento/framework/Filesystem/Directory/DenyListPathValidator.php:74
```

此錯誤源自於使用 `str_contains` 函式，即PHP 8.x函式。 Adobe Commerce 2.4.3不支援PHP 8.x。此Hotfix會以支援的PHP 7.x函式取代此函式。 請參閱 [Adobe Commerce升級2.4.3、2.3.7-p1 PHP致命錯誤Hotfix](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) 知識庫文章。

## 套用 `AC-3022.patch` 繼續以DHL為航運承運人

DHL已推出架構6.2版，並將於近期淘汰架構6.0版。 支援DHL整合的Adobe Commerce 2.4.4及舊版僅支援6.0版。部署這些版本的商家應適用 `AC-3022.patch` 以便繼續提供DHL作為航運公司。 請參閱 [應用補丁程式以繼續提供DHL作為運輸承運人](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 有關下載和安裝修補程式的資訊，請參閱知識庫文章。

## 重點

查看此版本中的下列重點。

### 大幅增強安全性

此版本包含33項安全性修正和平台安全性改善。 其中許多安全性修正已支援至2.4.2-p2和2.3.7-p1。

#### 協助關閉遠端程式碼執行(RCE)和跨網站指令碼(XSS)弱點的33項安全性增強功能

迄今未發生與這些問題相關的確認攻擊。 但是，某些漏洞可能會被利用來訪問客戶資訊或接管管理員會話。 這些問題大多要求攻擊者首先獲得管理員的訪問權限。 因此，我們會提醒您採取所有必要步驟來保護您的管理員，包括但不限於這些努力：IP允許清單， [雙因素驗證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)，使用VPN，使用唯一位置，而非 `/admin`以及良好的密碼衛生。 請參閱 [Adobe安全性公告](https://helpx.adobe.com/security/products/magento/apsb21-64.html) 以討論這些已修正的問題。

#### 其他安全性增強功能

此版本的安全性改善改善了對最新安全性最佳實務的合規性，包括：

* A **新撰寫器外掛程式** 有助於防止相關性混淆，並識別與公共包儲存庫上的內部包同名的惡意包。 請參閱 [Adobe發行新的撰寫器外掛程式與2.4.3版](https://magento.com/blog/best-practices/adobe-releases-new-composer-plugin-magento-243-release) 部落格貼文。

* **API現已內建速率限制功能** 防止拒絕服務(DoS)攻擊。 Web API現在對用戶端可請求的資源大小或數量施加限制（預設最大值設為20，並可根據業務需求設定為不同的值）。 請參閱 [速率限制](https://developer.adobe.com/commerce/webapi/get-started/api-security/) 以取得設定這些限制的相關資訊。 <!-- MC-35358-->

* **ReCAPTCHA覆蓋範圍已擴展** 要包括：

   * ReCAPTCHA會涵蓋具有對應HTML頁面的網頁API。 （這不包括整合所存取的網頁API）。 ReCAPTCHA覆蓋可保護端點免受垃圾郵件攻擊。 使用OAuth的協力廠商整合服務存取網頁API時，ReCAPTCHA會停用。<!-- MC-34472-->

   * 下單店面頁面和與付款相關的網頁API。 這些頁面的ReCAPTCHA保護預設為停用，並可從管理員啟用。 該覆蓋增加了反暴力機制，以保護商店免受梳理攻擊。

{{cve-notice}}

### 基礎架構改善

此版本包含改善架構品質的增強功能，以及下列功能領域：

* 客戶帳戶

* 目錄

* CMS

* OMS。

* 匯入/匯出

* 促銷活動與鎖定

* 購物車和結帳

* B2B

* 測試和預覽

**現在支援PayPal Pay Late** 在包括PayPal的部署中。 此功能可讓購物者以每兩週分期付款方式支付訂單，而非在購買時支付全數。 <!-- MC-40556-->

**新增 `use_application_lock` 索引模式**. 此 `use_application_lock` 模式可讓您透過使用環境變數或設定 `app/etc/env.php` 檔案。 啟用此模式後，您不再需要手動重設索引器。 請參閱 [使用應用程式鎖定模式重新索引進程](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### 平台增強功能

2.4.3版尚未與PHP 8.x相容，但以下平台升級使我們更接近於未來與PHP 8.x的相容性。

* 核心撰寫器相依性和第三方程式庫已升級至與PHP 8.x相容的最新版本。 <!-- MC-39514-->

* ThrounkedJS程式庫已升級至v3.5.1（最新版本）。 <!-- MC-40694-->

* 已移除已棄用的TinyMCE v3程式庫。 此 `Magento_Tinymce3Banner` 與TinyMCE v3.x相關的模組和MFTF測試已從Adobe Commerce中移除。 <!-- MC-42199 42170 -->

* 2.4.3版已通過測試，並確認與Redis 6.0.12相容。 （2.4.x版仍與Redis 5.x相容。）

* Laminas庫依賴項已升級為與PHP 8.x相容的版本。 已從 `composer.json` 檔案。 **Adobe Commerce 2.4.3使用Laminas 3.4.0**. <!-- MC-39513-->

### 效能增強功能

此版本包含可縮短產品價格和目錄規則索引器索引時間的增強功能。 商家現在可以從客戶組或共用目錄中排除網站，這樣可減少用於索引的記錄數並改進索引時間。

### 即時搜尋

[即時搜尋](https://docs.magento.com/user-guide/live-search/overview.html) 由 [Adobe Sensei](https://www.adobe.com/sensei.html) 使用人工智慧和機器學習演算法，對匯總的訪客資料執行深入分析，提供直覺式的搜尋體驗。 請參閱 [Live Search發行說明](https://experienceleague.adobe.com/docs/commerce-merchant-services/live-search/release-notes.html).

### GraphQL

此版本新增GraphQL對下列功能的支援：

* **共用目錄**<!-- PWA-1294-->

* **願望清單**. 此 [addWishlistItemsToCart變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-wishlist-items-to-cart.html) 將項目從指定的願望清單移至客戶的購物車。 <!-- magento/partners-magento2ee#449-->

* **禮品登記**. 涵蓋的任務包括： <!-- PWA-1290-->

   * 使用 [giftRegistry查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry.html) 退回客戶禮品登記冊的內容。

   * 按照下列方式搜索禮品登記處 [type](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-type-search.html), [電子郵件](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-email-search.html)，或 [ID](https://devdocs.magento.com/guides/v2.4/graphql/queries/gift-registry-id-search.html).

   * [建立](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-gift-registry.html), [更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry.html)，或 [刪除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry.html) 禮品登記處。

   * [更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry-items.html) 或 [移除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry-items.html) 禮品登記處的物品。

   * [移動所有項目](https://devdocs.magento.com/guides/v2.4/graphql/mutations/move-cart-items-to-gift-registry.html) 從購物車到禮品登記處。 <!-- ENGCOM-9082 9087-->

   * [新增](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-gift-registry-registrants.html), [更新](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-gift-registry-registrants.html)，或 [移除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-gift-registry-registrants.html) 禮品登記處的註冊者。

   * [共用](https://devdocs.magento.com/guides/v2.4/graphql/mutations/share-gift-registry.html) 邀請者的禮品登記處。

* **可轉讓報價**. 請參閱 [`negotiableQuote`](https://devdocs.magento.com/guides/v2.4/graphql/queries/negotiable-quote.html) 和 [`negotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/queries/negotiable-quotes.html) 查詢。 <!-- PWA-1292-->

   新的突變包括：

   * [`requestNegotiableQuote`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-negotiable-quote.html)

   * [`setNegotiableQuoteShippingAddresses`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-negotiable-quote-shipping-address.html)

   * [`updateNegotiableQuoteQuantities`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-negotiable-quote-quantities.html)

   * [`removeNegotiableQuoteItems`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-negotiable-quote-items.html)

   * [`closeNegotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/close-negotiable-quotes.html)

   * [`deleteNegotiableQuotes`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-negotiable-quotes.html).

* **共用路由**. 此 [路由查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/route.html) 和 [可路由介面](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/routable-interface.html) 支援產品、類別和CMS頁面上的路由請求。 此 `urlResolver` 查詢已過時，其功能已由 `route` 查詢。

請參閱 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 以取得這些增強功能的詳細資訊。

### B2B

2.4.3版推出B2B v1.3.2。此版本包含多項錯誤修正。 請參閱 [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### 頁面產生器

頁面產生器現在是Magento Open Source中隨附的擴充功能。 現在，它是Adobe Commerce 2.4.3和Magento Open Source2.4.3的預設內容編輯工具。它可以用任何協力廠商模組取代WYSIWG編輯器。

頁面產生器取代了下列管理區域中的TinyMCE編輯器：

* CMS頁
* CMS塊
* 類別說明
* 產品說明

在TinyMCE中建立的所有內容都已移轉至頁面產生器作為HTML。

### PWA Studio

如需增強功能和錯誤修正的詳細資訊，請參閱 [PWA Studio發行](https://github.com/magento/pwa-studio/releases). 請參閱 [相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 以取得PWA Studio版本及其相容版本的清單。

### 升級相容性工具

範圍 [升級相容性工具](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html) 已根據社群的意見進行擴充。 加入我們的 [#upgrade-compatibility-tool](https://magentocommeng.slack.com/archives/C019Y143U9F) Slack管道，以獲得Adobe產品團隊和社群的支援，並協助引導工具的未來方向。

### 雲管理服務更新

此版本包含對我們對Amazon簡單儲存服務(AWS S3)和Amazon Aurora雲端托管服務的支援的增強功能。 它為AWS ElastiCache、AWSElasticsearch和AWS Managed Queues(Rabbit MQ)提供經認證的支援。 (我們已測試這些服務的功能、效能及與Adobe Commerce的整合。)

### Adobe Stock整合

此版本包含Adobe Stock整合v2.1.1。

### 供應商開發的擴展

請參閱下列主題，了解此版本的功能和變更更新：

* [Amazon Pay](https://docs.magento.com/user-guide/payment/amazon-pay.html). Amazon Pay已遭取代，並將在更新的2.4.x版本中移除。 2.4.3版及更新版本僅包含相容性更新和主要錯誤修正的內容。

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](../../../upgrade/modules/upgrade.md)

* [克拉納](https://docs.magento.com/user-guide/payment/klarna.html)

* [頂點雲](https://docs.magento.com/user-guide/tax/vertex.html)

* [Yotpo產品評論](../../../upgrade/modules/upgrade.md)

## 已修正問題

我們已修正2.4.3核心程式碼中的數百個問題。

### 安裝、升級、部署

<!-- MC-41154-->

* 此 `bin/magento setup:db:status` 命令現在會傳回訊息，指出成功升級後一切都為最新狀態。 之前，應用程式會顯示此錯誤： `Declarative Schema is not up to date`.

<!-- MC-40031 -->

* 現在，當建立新的可設定產品失敗時，配置值會在表單重新載入時保留。 以前，表單重新載入期間會遺失值，而應用程式會顯示此錯誤： `The value specified in the URL Key field would generate a URL that already exists`. [GitHub-32102](https://github.com/magento/magento2/issues/32102)

<!-- MC-37596-->

* 當您執行時，應用程式不再擲回例外狀況 `bin/magento setup:upgrade` 從Redis的Magento Open Source部署升級至Adobe Commerce。

<!-- MC-34453-->

* 部署從Magento Open Source升級至Adobe Commerce後，先前建立的購物車價格規則現在會顯示在「內容測試」控制面板頁面上。

<!-- ENGCOM-8508 -->

* 在Galera叢集上執行的部署現在可支援更多客戶。 [GitHub-31038](https://github.com/magento/magento2/issues/31038)

<!-- ENGCOM-9036 MC-41938 -->

* 現在，當應用程式已安裝且 `—use-rewrites=0` 選項或 `web/seo/use_rewrites` 設定為0英吋 `core_config_data_table`. [GitHub-32100](https://github.com/magento/magento2/issues/32100)

<!-- ENGCOM-8451 -->

* 已更新 `sortOrder` 載入 `AsyncCssPlugin`. 應用程式現在會載入 `AsyncCssPlugin` befor `JsFooterPlugin`. [GitHub-30882](https://github.com/magento/magento2/issues/30882)

<!-- ENGCOM-8701 -->

* `Magento\Config\Model\Config\PathValidator` 現在會檢查顯示路徑，以判斷元素是否存在，若元素具有設定路徑，則會使用 `config.xml` 路徑，而非驗證路徑。 [GitHub-27678](https://github.com/magento/magento2/issues/27678)

<!-- ENGCOM-8684 -->

* 現在，使用Gunt或通過伺服器端編譯來編譯Less檔案會產生相同的結果。 先前。 `.abs- styles`，延伸其他 `.abs- styles` in `_extends.less`，與Grunt編譯時無法正確輸出。 這會導致生產部署與開發部署之間產生差異。 [GitHub-7231](https://github.com/magento/magento2/issues/7231)

### AdminGWS

<!-- MC-40703-->

* 管理員GWS現在使用 `int` 值 `website_id` 具有自訂權限之管理員的管理員集合中的SQL條件。

### Adobe Stock整合

<!-- MC-39754-->

* 應用程式現在會顯示資訊訊息和管理員的連結 **商店** > **設定** > **進階** > **系統** 搜尋Adobe Stock頁面上，當 **API金鑰（用戶端ID）** 和 **用戶端密碼** 未設定。 之前，應用程式會顯示此錯誤： `We couldn't find any records` 沒有連結。

### 後端

<!-- MC-40389-->

* 具有受限訪問權限的管理員（例如，僅分配給一個網站的訪問權限的管理員）無法再編輯設定為全局作用域的類別。

<!-- MC-39037-->

* 生成的系統報告(**系統** > **支援** > **系統報告**)現在已正確呈現。 過去，報表內容不會對齊。

<!-- MC-30152 ENGCOM-8625-->

* 應用程式現在會關閉 **價格** 欄位，如 **動態價格** 在建立套件產品期間會啟用設定。 之前，當您從 **價格** 欄位 **動態價格** 已啟用。 [GitHub-26214](https://github.com/magento/magento2/issues/26214)

<!-- MC-24840-->

* 在部署中，當管理員URL與預設的網站URL不同時，應用程式設為可從兩個URL存取時，就不再發生無限重新導向。

### 捆綁產品

<!-- MC-41810-->

* 您現在可以使用 `addProductsToCart` 變異，可將包含多個核取方塊選項的套件組合產品新增至購物車。

<!-- MC-41614-->

* 捆綁產品的價格索引現在使用臨時表執行，這可避免鎖定資料庫表。 以前，應用程式使用物理表，導致表被鎖定。

<!-- MC-41177 magento/magento2#32594-->

* 捆綁項目的價格現在可以設定為0.00。以前，當您將價格設定為0.00後返回到編輯頁時，該價格將返回到其預設值。 [GitHub-32383](https://github.com/magento/magento2/issues/32383)

<!-- MC-40603-->

* 如果訂單中包含捆綁產品，則訂單的訂單詳細資訊現在會顯示捆綁產品的正確價格（如果在下訂單之前價格已更改）。

<!-- MC-40035-->

* 現在會根據其子產品的庫存狀態來更新捆綁產品的庫存狀態。 以前，從產品中移除一個選項時，套件產品會顯示為無存貨，而套件產品有兩個具有相同SKU的選項。

<!-- MC-39276-->

* 管理員現在可以變更套件產品的值 `Shipment Type` 屬性移至其他屬性群組後，才能將其移除。 以前，此屬性一律會以 `Together` 值（如果該值被移至屬性集中預設組以外的屬性組）。

<!-- MC-38900-->

* GraphQL `setGuestEmailOnCart` 變異現在可以正確更新來賓電子郵件。 以前未更新報價和報價地址表。

<!-- MC-37719-->

* 透過REST API呼叫新增、移除或更新子產品至套件組合產品，現在會如預期觸發重新索引。 以前，這些操作不會觸發重新索引，因此，在執行手動重新索引之前，捆綁產品不會更改其庫存狀態。

<!-- MC-35725 ENGCOM-8568-->

* 應用程式現在會針對具有階層價格的捆綁產品顯示正確的價格範圍。 [GitHub-30284](https://github.com/magento/magento2/issues/30284)

<!-- MC-35638-->

* 套件選項的價格變更後，應用程式現在會在購物車頁面和結帳工作流程的運送步驟中，顯示與預期相同的總價。

<!-- MC-32617-->

* 您現在可以從客戶購物車存取套件產品，以成功設定套件組合產品。 過去，「設定產品」頁面從未完全載入，且您無法儲存設定。

<!-- MC-30317 ENGCOM-7141-->

* 商戶現在可以在多商店部署的每個商店檢視上，為搭售產品指派唯一價格。 網站特定價格會儲存在 `catalog_product_bundle_selection_price` 表格。 以前，即使在  **商店** > **設定** > **目錄** > **目錄** > **價格** > **目錄價格範圍** 設為 `Website`. 未儲存任何網站特定價格 `catalog_product_bundle_selection_price`. [GitHub-12584](https://github.com/magento/magento2/issues/12584)

<!-- ENGCOM-8705 MC-38953-->

* 捆綁產品的發票現在顯示關聯簡單產品的正確數量，當 **動態定價** 已停用。 以前，與捆綁產品關聯的簡單產品具有父產品的數量，而不是捆綁產品)。 [GitHub-30802](https://github.com/magento/magento2/issues/30802)

<!-- magento/magento2#30374 MC-36930-->

* 此 `updateProductsInWishlist` 變異現在可以成功更新希望清單中屬於捆綁產品的項目。 以前，此變異不會更新希望清單項目，而是刪除項目並建立新項目，從而更改了項目ID。

<!-- MC-38575-->

* 您現在可以設定 `required_options` 和 `has_options` 使用建立或更新套件組合產品時，套件屬性如預期 `POST /V1/product/:sku` 端點。 過去，即使已努力將這些自訂屬性設為1(1)，這些自訂屬性仍會設為0（零）。

<!-- MC-38483-->

* 先前遺失的套件產品資料現在包含在測試程式中。 如此可解決購物者從產品清單頁面購買套件組合產品，或直接從產品頁面新增產品時，產品行為不一致的問題。

### 快取

<!-- ENGCOM-8554-->

* 此 `varnish6.vcl` 檔案已更新，可略過客戶頁面的快取。

### 驗證碼

<!-- MC-41572-->

* 現在，驗證碼可正確驗證購物者提供的資料，而在購物者多次嘗試向PayPal Payflow Pro結帳時，驗證碼欄位現在會如預期顯示。

<!-- MC-41281-->

* 驗證碼驗證不再在結帳工作流程的付款頁面上隨機失敗。

<!-- MC-41001-->

* 當您超過失敗的完成嘗試次數後，應用程式現在會如預期顯示驗證碼欄位。 以前，雖然應用程式提示您再次嘗試驗證碼挑戰，但並未顯示驗證碼欄位。

<!-- MC-40359-->

* 驗證碼現在可在結帳頁面上正常運作。 以前，在購物者正確回應驗證碼挑戰後，結帳頁面上的載入器永遠不會完成，而應用程式會顯示此錯誤： `captchaData[formId] is undefined`. （只有當購物者使用先前存取執行2.3.5-p1之部署的相同瀏覽器時，才會發生此錯誤。）

<!-- ENGCOM-8630-->

* `_.isEmpty()` 檢查 `defaultCaptcha.js` 檔案現在已成功完成。 以前，這些檢查未完成，因此，升級後結帳頁面無法載入。 [GitHub-31641](https://github.com/magento/magento2/issues/31641)

### 購物車和結帳

<!-- MC-41911-->

* 轉換和更新購物車中的產品數量時，應用程式現在會考慮地區設定特定的小數位數。

<!-- MC-41574-->

* 訂單不再遺漏提供的客戶名稱及運送地址。 之前，名稱會省略，因為 `same_as_billing` 未在資料庫中保存標誌。

<!-- MC-40946-->

* 現在當您編輯購物車中的產品時，禮品登記處的連結會如預期般持續存在。 以前，當您按一下 **更新購物車** 按鈕。

<!-- MC-40696-->

* 消費者的所有佇列訊息 `quoteItemCleaner` 現在將其狀態變更為 `complete` 如預期。 之前，此消費者只有一則訊息會將其狀態變更為 `complete`，而其餘的狀態變更為 `in progress`.

<!-- MC-40657-->

* 現在，只有當購物者按一下 **下單** 按鈕。 以前，每當購物者在結帳工作流程中變更付款方式時，應用程式會在「套用折扣代碼」區塊中顯示此訊息： `The order wasn't placed. First, agree to the terms and conditions, then try placing your order again`.

<!-- MC-40271 magento/partners-magento2ee#476-->

* 從「排程更新」預覽新增套件產品至購物車，並按一下購物車後，系統現在會將您重新導向至預期的結帳頁面。 [GitHub-447](https://github.com/magento/partners-magento2ee/issues/447)

<!-- MC-39581-->

* 如果購物者無法按一下 **更新** 按鈕並返回到發運步驟。

<!-- MC-39517  magento/partners-magento2ee#460-->

* 當購物者新增無效的產品數量並點按 **更新物料和數量** 按鈕。 以前，應用程式升級了產品數量，並未顯示錯誤消息。 [GitHub-459](https://github.com/magento/partners-magento2ee/issues/459)

<!-- MC-37807 ENGCOM-8530-->

* 具有可自訂選項的產品 `(File)` 現在可在多次運送結帳程式中，如預期納入作用中連結。 之前，此連結遺失。 [GitHub-31095](https://github.com/magento/magento2/issues/31095)

<!-- MC-37689-->

* 管理員購物車現在會針對支援多種貨幣的商店，以正確貨幣顯示產品價格。 以前，價格會多次轉換為指定貨幣 — 首先是從店面將產品新增至購物車時，然後是在隨後向管理員呈現訂單時。

<!-- MC-36703  magento/partners-magento2ee#439-->

* 管理員從管理員完成由店面購物者建立的訂單後，應用程式現在會如預期般空置購物車。 以前，當管理員完成訂單後，當客戶重新登入時，店面購物車仍包含訂單內容。 [GitHub-30262](https://github.com/magento/magento2/issues/30262)

<!-- MC-35640-->

* 購物者現在可新增「最低廣告價格」(MAP)超過其一般產品價格的產品至購物車。

<!-- MC-35289-->

* 購物者現在透過多個地址結帳時，可以從結帳工作流程成功變更其帳單地址。

<!-- MC-29335-->

* 所有來賓建立的付費付款交易記錄現在都會儲存到資料庫，並如預期顯示在管理員中。 以前，資料庫中只保存了少量併發訂單，而且由於資料庫鎖導致的超時，大多數訂單都丟失。 [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-23989 magento/magento2#32251 -->

* 當訪客將產品放入迷你購物車時，應用程式現在會正確顯示包含特殊字元的內嵌歡迎訊息。 之前，應用程式不會將產品新增至迷你購物車或顯示歡迎訊息。 [GitHub-32250](https://github.com/magento/magento2/issues/32250)

<!-- MC-41165-->

* 啟用店內傳送時，結帳工作流程的傳送頁面現在會成功載入。 之前，應用程式擲回JavaScript錯誤，且運送結帳頁面未完全呈現。

<!-- ENGCOM-9006-->

* 新增 `itemResolvers` 目錄的引數 `di.xml` 檔案。 因此，如果可設定和分組的產品模組停用，結帳將不再中斷。 [GitHub-30860](https://github.com/magento/magento2/issues/30860)

<!-- ENGCOM-8944-->

* 應用程式現在會顯示 **付款和發運資訊** 區段（在管理員重新排序工作流程期間）。 [GitHub-30257](https://github.com/magento/magento2/issues/30257)

<!-- MC-39158 ENGCOM-8493-->

* 當購物車包含具有多個選項的捆綁產品時，應用程式現在可正確套用購物車價格規則，並提供購物車層級的固定折扣。 之前，購物車價格規則並未完全套用至訂單。 [GitHub-30952](https://github.com/magento/magento2/issues/30952)

<!-- MC-40983 ENGCOM-8828-->

* 此 **新增至購物車** 「類別」清單檢視上的「 」按鈕現在可如預期般運作。 [GitHub-32232](https://github.com/magento/magento2/issues/32232)

<!-- ENGCOM-8490-->

* 您現在可以使用POST `/V1/carts/mine/items` 新增自訂數量的分組產品至購物車。 [GitHub-26909](https://github.com/magento/magento2/issues/26909)

<!-- ENGCOM-8886-->

* 應用程式不再使用運送地址填入結帳工作流程的帳單地址區域。 先前，當 **州/省** 帳單地址的欄位為空，但發運地址和帳單地址不同，因此應用程式填入了帳單地址 **州/省** 欄位，其中包含發貨地址的資訊。 [GitHub-31608](https://github.com/magento/magento2/issues/31608)

### 目錄

<!-- MC-36787-->

* 大量更新 **啟用數量增量** 和 **數量增加** 屬性現在可如預期運作。 [GitHub-29544](https://github.com/magento/magento2/issues/29544)

<!-- MC-41801-->

* 您現在可以成功複製包含僅數值SKU的共用目錄。 之前，當您嘗試複製共用目錄時，應用程式會擲回錯誤，因為 `\Magento\Catalog\Model\ProductIdLocator` 類別無法搭配僅限數值的SKU正常運作。

<!-- MC-41575-->

* 在您啟用與管理員的最近產品同步後，應用程式不再擲回JavaScript錯誤。 之前，應用程式會顯示此JavaScript錯誤： `Cannot read property 'status' of undefined`.

<!-- MC-41534-->

* 自訂主題配置更新現在可如預期套用。 過去，會忽略自訂主題配置更新。

<!-- MC-41499-->

* 產品類別快取現在會如預期般清除 `cron` 期間 `indexer_update_all_views` 執行。 以前，重新索引後「類別」頁面上的產品計數不正確。

<!-- MC-41422-->

* 當商店檢視的產品更新REST API請求中未指定屬性時，屬性值現在維持不變。 以前，如果未指定屬性，應用程式會將屬性值重置為其預設範圍值。

<!-- MC-41284-->

* 管理產品格線(管理員 **目錄** > **產品**)現在會在依SKU篩選產品時顯示正確的產品計數。

<!-- MC-40873-->

* 現在當啟用「類別權限」時，當產品新增至CMS頁面時，應用程式會顯示正確的庫存狀態，並防止顯示指定客戶群組的價格。 過去，無論實際庫存狀態為何，所有產品都會顯示為無存貨。

<!-- MC-40859-->

* 「高級定價客戶組價格」塊價格輸入欄位現在具有5位數的最小寬度。 以前，在低解析度顯示器上，此欄位中只顯示兩個符號。

<!-- MC-40825-->

* 現在，應用程式會在刪除產品後成功刪除產品媒體影像。 以前，成功刪除產品後，產品媒體影像會保留在資料夾中。

<!-- MC-40811 magento/magento2#32042-->

* 現在當您在「管理員」中建立或編輯產品，然後建立「排程設計更新」時，頁面配置會如預期更新。 [GitHub-32007](https://github.com/magento/magento2/issues/32007)

<!-- MC-40773-->

* 現在，值為零的自訂產品屬性可成功儲存為空白。 以前，應用程式未將此值更新為空白。

<!-- MC-40736 ENGCOM-8789-->

* 自訂類別配置更新檔案現在可如預期套用至產品。 以前是更新檔案句柄(`catalog_category_view_*`)不符合產品控制代碼。 [GitHub-27285](https://github.com/magento/magento2/issues/27285)

<!-- MC-40679-->

* 已對「管理產品」清單的「固定產品稅(FPT)」列禁用排序。 之前，在FPT欄排序後，無法重新載入產品頁面。

<!-- MC-40443-->

* 當符合的產品在每個網站上有不同的價格時，頁面產生器產品介面工具集預覽現在可如預期在多網站部署中運作。

<!-- MC-40344 ENGCOM-8629-->

* 使用GET在產品搜尋上依位置排序 `/rest/V1/products/?searchCriteria[filterGroups]` 現在正如預期般運作。 之前，產品集合沒有欄位 `position` 值。 [GitHub-31591](https://github.com/magento/magento2/issues/31591)

<!-- MC-40122-->

* 管理員使用者現在可以在 **名稱** 和 **SKU** 欄位。 以前，應用程式會將多個空格折疊為一個空間。

<!-- MC-39869-->

* 當管理員上的可售數量為0時，產品現在會在店面顯示為無存貨。 以前，這些產品在店面上以庫存形式列出，應用程式顯示活動 **新增至購物車** 按鈕。 [GitHub-31117](https://github.com/magento/magento2/issues/31117)

<!-- MC-39809-->

* 管理員現在可以新增包含可自訂選項的產品 `(File)` 從「管理客戶」頁面的「購物車」區段（「客戶的活動」欄），重新命名為「已訂購的項目」格線。 之前，應用程式不會將項目新增至清單，因為值插入之前格式不正確 `\Magento\Catalog\Model\Product\Type\AbstractType::_prepareOptions`.

<!-- MC-39619-->

* 應用程式不再提示購物者為僅具有一個選項的套件產品選取產品選項。

<!-- MC-39617-->

* 應用程式現在會在建立新介面工具集期間，顯示版面更新中的所有子類別（錨點和非錨點類別）。

<!-- MC-39481-->

* 此 `product` 當產品名稱僅針對一個商店檢視而更新時，查詢不再覆寫多商店部署中所有商店檢視的預設值。 [GitHub-31083](https://github.com/magento/magento2/issues/31083)

<!-- MC-39470 magento/magento2#31492-->

* Adobe Commerce會在您變更「管理員相關產品」、「追加銷售」和「交叉銷售」清單的每頁值時，依預期更新總頁數。 [GitHub-31059](https://github.com/magento/magento2/issues/31059)

<!-- MC-39444-->

* 管理員現在可以新增兩個或多個可自訂選項的產品 `(File)` 按SKU訂購。

<!-- MC-39140-->

* 具有限制權限的管理員將產品介面工具集新增至「管理員」的CMS頁面時，應用程式不會再擲回錯誤。 以前，管理員按一下 **儲存** 按鈕：  `We are sorry, an error has occurred while generating the content`.

<!-- MC-39134-->

* 現在，產品詳細資訊頁面會開啟，其中可自訂日期選項會填入上次訂單的日期，當 **使用JavaScript日曆** 啟用。 如果自訂日期選項值解析器的格式未根據目前的設定，現在會回復為替代格式。 之前，自訂日期選項值為空。

<!-- MC-39104-->

* 當產品無存貨時，應用程式現在只會在購物車中顯示一個錯誤。 之前，應用程式會顯示冗餘訊息。 [GitHub-27469](https://github.com/magento/magento2/issues/27469)

<!-- MC-35717  magento/partners-magento2ee#427-->

* 管理員現在可以使用可自訂選項來新增產品 `(File)` 按SKU訂購。 [GitHub-30285](https://github.com/magento/magento2/issues/30285)

<!-- MC-30625-->

* 您現在可以儲存產品和價格，而不需指定 `type_id`. [GitHub-13639](https://github.com/magento/magento2/issues/13639)

<!-- MC-39024-->

* 現在，當REST時，店面上可正常使用群組產品 `PUT /V1/products/:sku/links` 請求可用來將新子產品與新組產品關聯。 以前，產品在執行後未正確編列索引 `bin/magento cron:run`.

<!-- ENGCOM-9010 8947-->

* 您無法再使用 `NULL` SKU值。 過去，您可以透過自訂匯入工具或直接在資料庫中建立不含SKU值的產品，但當您嘗試從管理員編輯產品時，應用程式擲回錯誤。 [GitHub-27411](https://github.com/magento/magento2/issues/27411), [GitHub-32525](https://github.com/magento/magento2/issues/32525)

<!-- ENGCOM-8902-->

* 將必要的自訂選項新增至簡單產品時，不再從父複合產品中移除，且不會發出警告。 應用程式現在會顯示資訊性警告，且不會儲存產品。  之前，應用程式會儲存產品變更，且未顯示警告。 [GitHub-30492](https://github.com/magento/magento2/issues/30492)

### 目錄規則

<!-- MC-39896-->

* 此 `products` 目錄價格規則套用至項目時，查詢現在會傳回目前值。 [GitHub-26738](https://github.com/magento/magento2/issues/26738)

<!-- ENGCOM-8367-->

* 以開頭的臨時表 `catalogrule_product__temp` 現在當購物車或目錄規則過期、停用或變為非作用中時，重新索引失敗時，會如預期般刪除。 [GitHub-22273](https://github.com/magento/magento2/issues/22273)

<!-- ENGCOM-8949-->

* 此時區的套用方式與 `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexById` 和 `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexByIds`. [GitHub-29549](https://github.com/magento/magento2/issues/29549)

### CMS內容

<!-- MC-41471-->

* 大型影像現在會在上傳期間，如預期調整大小，當 **啟用前端調整大小** 組態設定已啟用。

<!-- MC-40663 ENGCOM-8883-->

* 修正了CMS頁面儲存控制器的錯誤處理。 先前，當 `Error` 物件被擲回 `cms_page_prepare_save` 事件，應用程式會將此物件傳遞至 `addExceptionMessage` 功能，因為此功能需要 `Exception`. 已借由使用 `addErrorMessage` 函式。 [GitHub-30149](https://github.com/magento/magento2/issues/30149)

<!-- MC-33490 magento/partners-magento2ee#435 -->

* 您現在可以從「CMS編輯」頁層次索引標籤為多個節點分配一個新頁面。 以前，當您嘗試將頁面指派給節點時，會發生唯一的限制違反情形。 [GitHub-363](https://github.com/magento/partners-magento2ee/issues/363)

### 可配置產品

<!-- MC-40719-->

* 當您按一下產品的可設定選項時，應用程式不再在產品的影像庫中複製產品縮圖。

<!-- MC-37418-->

* 當您從願望清單編輯可設定產品時，應用程式所顯示的設定彈出式視窗現在會在您按一下 **確定** 按鈕。

<!-- MC-39878  magento/magento2#31472-->

* 現在，應用程式可以為僅包含一個可配置產品的訂單正確生成發票。 [GitHub-31143](https://github.com/magento/magento2/issues/31143)

<!-- ENGCOM-8673-->

* 購物者現在可以從非預設的商店檢視，將可設定的產品新增至購物車。 以前，當非預設商店檢視的購物者嘗試新增可設定的產品時，應用程式會顯示此錯誤： `Could not add item to cart. Please check required options and try again`. [GitHub-31660](https://github.com/magento/magento2/issues/31660)

### 內容安全性原則CSP)

<!-- ENGCOM-8577-->

* 內容安全性原則現在支援透過 `data: scheme`.

### cron

<!-- MC-30804-->

* 已重構Cron清除查詢，以減少或消除下列效能問題： `cron` 工作仍卡在掛起狀態，MySQL查詢速度越來越慢，CPU使用量也增加。 [GitHub-26507](https://github.com/magento/magento2/issues/26507)

<!-- ENGCOM-8571-->

* `cronjobs` 已處於狀態 `running` 超過24小時時，系統會自動變更為狀態 `error`.  因此，該作業的新實例可以再次運行，而且當作業錯誤地被設定為狀態時，您不需要手動更改作業狀態 `running`. 以前，若 `cronjob` 被卡在狀態 `running`，應用程式會阻止啟動同一作業的新實例，而您必須手動更改作業狀態。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` 作業現已如預期般完成，且不再擲回此序列化錯誤：  `[Magento\Framework\DB\Adapter\DeadlockException]SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction, query was: DELETE FROM cron_schedule WHERE (status = 'missed') AND (job_code in ('indexer_reindex_all_invalid', 'indexer_update_all_views', 'indexer_clean_all_changelogs')) AND (created_at < '2018-09-28 18:32:28')`. [GitHub-18409](https://github.com/magento/magento2/issues/18409)

<!-- ENGCOM-8571-->

* `indexer_update_all_views`  cron作業現在會在先前的失敗後如預期般運作。 失敗的執行在 `cron_schedule schedule`，則後續執行不會自動失敗。 之前， `cron_schedule` 已填充待定作業的表和 `indexer_update_all_views` cron作業未運行。 [GitHub-23054](https://github.com/magento/magento2/issues/23054)

<!-- ENGCOM-8571-->

* `cron` 由於 `cron` 嘗試在群組重疊的大型部署中設定鎖定。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` 死鎖不再發生在 `cron_schedule` 表格 `cron` 作業已運行。 [GitHub-22438](https://github.com/magento/magento2/issues/22438)

### 自訂客戶屬性

<!-- MC-41611-->

* 此 **狀態** storefront客戶帳戶通訊簿上的欄位現在已載入為，且仍為下拉式頁面元素。 此 **提交** 按鈕現在會停用，直到所有頁面元素完全載入為止。 之前，應用程式會在將此欄位轉譯為下拉式元素之前，將此欄位載入為文字方塊，而購物者可在文字欄位中輸入並儲存值，這之後會在結帳期間造成錯誤。

<!-- MC-40906 magento/partners-magento2ee#509-->

* 現在，應用程式可在店面和管理員訂單頁面上正確顯示自訂客戶地址屬性。 以前，地址資訊部分中缺少下拉式清單屬性的選定選項，而輸入屬性的值包含屬性代碼。 [GitHub-508](https://github.com/magento/partners-magento2ee/issues/508)

<!-- MC-40329-->

* 當您在上傳檔案時，在「管理員客戶位址」欄位中儲存含檔案附件的客戶位址屬性時，應用程式不再擲回錯誤。 這是因為控制器操作中缺少返回語句而發生的。 之前，應用程式擲回此錯誤： `Something went wrong while saving the file`.

<!-- MC-39354-->

* RESTGET車API呼叫現在會傳回帳單和運送地址的正確自訂屬性值。 以前，自訂位址屬性在「我的帳戶」店面頁面和「管理員」的訂單詳細資訊頁面中顯示不正確。

<!-- MC-24495-->

* 現在，應用程式已成功處理包含輸入類型的客戶地址屬性的檔案 `file (attachment)`. 之前，應用程式在上傳附加的檔案時擲回此錯誤： `Something went wrong while saving the file`.

### 客戶

<!-- MC-41216-->

* 現在，儲存信用電子郵件會將選取的範圍納入考量，並從正確的電子郵件地址傳送。

<!-- MC-40579-->

* 依帳戶建立日期篩選現在會產生符合已設定時區設定、且擷取所有相關已建立帳戶的結果。

<!-- MC-40502-->

* 如果先前已快取資料，客戶格線篩選器現在會為限制使用者使用正確的網站選項。 之前，客戶格線會從快取中篩選擷取的網站參數，並為受限使用者包含不正確的資料。

<!-- MC-39189-->

* 在多網站部署中刪除一個網站時，應用程式不會再在「管理客戶」頁面上擲回例外狀況。 以前，當管理員嘗試存取完整的客戶清單時，應用程式不會顯示所有客戶並顯示此錯誤： `The website with id 2 that was requested wasn't found. Verify the website and try again`.

<!-- MC-38913-->

* 擁有權限的管理員現在可以從客戶的帳戶資訊標籤，將客戶重新指派至不同的網站。

<!-- MC-39852-->

* 現在，當您建立輸入類型為的客戶地址屬性時，可以成功上傳檔案 `(File)`. 之前，當您嘗試上傳並儲存檔案時，應用程式擲回此錯誤： `Something went wrong while saving the file`.

### 客戶區段

<!-- MC-40999-->

* 應用程式現在會根據店面上的客戶區段，如預期般顯示相關產品。 之前，為特定客戶區段建立相關產品規則時，應用程式不會顯示此區段。

<!-- MC-40503-->

* 現在，當客戶和已註冊客戶同時套用對應的客戶區段時，已註冊客戶的購物車中會顯示動態區塊。 之前，應用程式只會為來賓顯示區塊。

<!-- MC-40385-->

* 從管理員處下訂單後，現在會自動更新客戶區段。 以前，在建立管理員訂單後，管理員使用者必須導覽至相關客戶區段並按一下 **重新整理區段資料** 按鈕。

<!-- MC-39490-->

* 應用程式現在會在購物車中針對相關客戶區段中的所有客戶顯示動態區塊。 以前，即使客戶區段同時包含來賓和已註冊客戶，訪客也看不到區塊。

<!-- MC-39464-->

* 由客戶細分規則(使用 `Product was Ordered` 條件已解決。

<!-- MC-38895-->

* 已新增REST/SOAP API的客戶區段事件觀察器。 因此，如果透過REST/SOAP API下訂單時，區段中定義的條件符合，客戶區段現在會自動如預期更新。

<!-- MC-38346-->

* 已針對GraphQL請求新增客戶區段事件處理器。 以前，當購物車價格規則條件中使用客戶區段時，購物車價格規則折扣不會套用至。 [GitHub-371](https://github.com/magento/partners-magento2ee/issues/371)

### 目錄

<!-- MC-39520-->

* 當購物者在結帳工作流程的運送區段期間輸入無效的郵遞區號時，應用程式不再擲回例外狀況。 [GitHub-23371](https://github.com/magento/magento2/issues/23371)

### 可下載

<!-- MC-35779-->

* 當訂單包含可下載的產品，以及具有可下載選項的可設定產品時，應用程式現在會在「新訂單」電子郵件中顯示可下載產品的連結。 之前，應用程式顯示的是可獨立下載產品的連結，而不是帶有可下載選項的可配置產品的連結。

### 動態區塊（前身為橫幅）

<!-- MC-40327-->

* 動態區塊現在只會顯示在指定的頁面上。 以前，如果沒有指定動態區塊，應用程式會在所有頁面上顯示指派給介面工具集的所有橫幅廣告。

<!-- MC-39839-->

* 您現在可以儲存包含空白內容的動態區塊。

### EAV

<!-- MC-41756-->

* 客戶地址屬性日期值現在以四位數格式儲存，而非兩位數格式。

### 電子郵件

<!-- MC-39757-->

* 管理員重設密碼頁面上的密碼重設連結現在可如預期運作。 以前，當重設管理員密碼頁面使用自訂範本時，當管理員按一下電子郵件內的連結時，應用程式會顯示此訊息： `Your password reset link has expired`. 這是因為自訂電子郵件範本包含錯誤的使用者ID變數。

<!-- MC-41588-->

* 從管理員傳送客戶電子郵件現在會在商店檢視層級啟用時正常運作。 之前，當在商店檢視層級（而非全域層級）啟用電子郵件通知設定時，應用程式不會傳送客戶電子郵件。

<!-- MC-40950-->

* 現在，在並非所有網站都啟用非同步電子郵件傳送的多網站部署中，應用程式會如預期般傳送電子郵件。 以前，如果至少有一個網站已停用此設定，即使已啟用，也不會從任何網站傳送電子郵件。 發票、發運和貸項通知單電子郵件有類似問題。 但是，訂單注釋、發票注釋、發運注釋和貸項通知單注釋電子郵件已成功發送。 [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-34323 magento/partners-magento2ee#505-->

* 現在，當您從管理員共用禮品註冊表時，應用程式會傳送的電子郵件訊息包含到註冊表位置的有效連結。 以前，取用此連結會導致404錯誤。 [GitHub-504](https://github.com/magento/partners-magento2ee/issues/504)

<!-- MC-30127 magento/magento2#31455-->

* 發票和發票PDF現在包括與預期相同的捆綁產品價格。 以前，發票PDF包含的捆綁產品價格不正確。 [GitHub-12856](https://github.com/magento/magento2/issues/12856)

<!-- ENGCOM-9021-->

* 已將字串轉換新增至電子郵件範本篩選方法，以確保傳回值為 `string`. 以前，當未處於開發人員模式時擷取到例外時，應用程式會傳回 `phrase` 物件。 這反過來又引發了致命 `Uncaught TypeError`. [GitHub-32671](https://github.com/magento/magento2/issues/32671)

<!-- ENGCOM-8807-->

* 啟用非同步傳送時，訂單確認電子郵件現在會如預期傳送(**商店**  >  **設定**  >  **銷售**  > **銷售電子郵件**  >  **一般設定**  >  **非同步傳送**)。 [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-18023 ENGCOM-9000-->

* 當客戶嘗試從「聯絡人」表單傳送電子郵件時，應用程式現在會如預期記錄錯誤。 [GitHub-23645](https://github.com/magento/magento2/issues/23645)

### 框架

<!-- MC-41712-->

* 現在，將檢查管理員中的父類，以檢查docblock批注以及原始類和繼承的介面。 以前由於未檢查父類，因此在管理員中執行任何觸發事件的客戶相關動作會導致錯誤。 應用程式在例外記錄中記錄了此錯誤： `report.CRITICAL: Method's return type must be specified using @return annotation.`.

<!-- MC-41192-->

* 在啟用Redis頁面快取的部署中停止Redis伺服器時，應用程式不再擲回嚴重錯誤。

<!-- MC-40739-->

* 申請現在遵循 **從備份中排除介質資料夾** 在啟用備份時設定 `bin/magento config:set system/backup/functionality_enabled 1`. 以前，儘管有此設定，但是仍備份了介質資料夾，因為 `/magento` 錯誤地以double //形成。

<!-- MC-40654 ENGCOM-8881-->

* 應用程式現在會如預期般轉譯管理員購物車頁面的所有可翻譯字串。 以前，翻譯負載發生得太晚，並且跳過了訂閱控制器操作預調度的所有觀察器。 [GitHub-31849](https://github.com/magento/magento2/issues/31849)

<!-- MC-39776-->

* 現在，當 **以客戶身分登入** 「啟用擴充功能」設定已停用。 之前，應用程式擲回JavaScript錯誤。

<!-- MC-39537-->

* 使用 `bin/magento setup:db-schema:split-sales` 要移動資料庫表，現在可以正常工作。 表格現在可正確建立並填入資料。 以前，由於檢查表是否存在不正確，因此應用程式擲回 `SQLSTATE` 運行時出錯 `bin/magento setup:db-schema:split-sales`.

<!-- MC-39193-->

* 由分支的子進程的異常處理 `ProcessManager` 已改善。 現在發生例外時，主要程式會退出，而錯誤訊息只會顯示一次。 以前，記錄了多個索引器故障並顯示了多個消息。 [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- MC-39132-->

* 全域Adobe Commerce外掛程式(例如 `webapi_rest` 和 `graphql` )不再針對新自訂區域類型觸發，當 `di.xml` 此區域檔案中不包含已註冊的插件。

<!-- MC-38770-->

* 初始化期間發生的例外狀況不再進行快取，現在會觸發500回應代碼。

<!-- MC-33179  magento/partners-magento2ee#431-->

* 商家現在可以依商店檢視，將影像指派給目錄事件，或從目錄事件中刪除影像。 以前，當您在編輯目錄事件時變更商店檢視時， **刪除影像** 核取方塊未啟用，且應用程式顯示此錯誤： `Uncaught ReferenceError: toggleValueElements is not defined at HTMLInputElement.onclick`. [GitHub-364](https://github.com/magento/partners-magento2ee/issues/364)

<!-- ENGCOM-8232-->

* 最後一個處理常式合併為 `communication.xml` 檔案不再覆蓋所有先前建立的處理常式。 [GitHub-29528](https://github.com/magento/magento2/issues/29528)

### 一般修正

<!-- MC-41194-->

* 應用程式現在會在「我的產品評論」頁面和「我的帳戶」頁面上顯示最近評論的正確星數。 之前，應用程式只將審核星號套用至第一次審核，而將頁面上的其他審核保留為未標籤。

<!-- MC-40653-->

* 標題中的帳戶連結現已遵循WCAG標準。 以前，標題中的帳戶連結包含重複的ID，導致WCAG驗證失敗。

<!-- MC-40528-->

* 應用程式現在會以UTC時區儲存目錄事件日期。 之前，應用程式儲存的目錄事件日期在使用者的時區中。

<!-- MC-39765-->

* 當訪客購物者使用無效地址時，應用程式不再擲回系統記錄產生的錯誤。 之前，應用程式會間歇性顯示此錯誤，而非轉譯頁面： `No such entity with addressId`. [GitHub-15115](https://github.com/magento/magento2/issues/15115)

<!-- MC-39747-->

* 影像大小調整過程不再停止以不支援的格式顯示影像。 以前，當 `catalog:images:resize` 遇到不支援的影像格式，進程停止，應用程式顯示此錯誤： `bin/magento catalog:images:resize Unsupported image format`.

<!-- ENGCOM-8925-->

* 「管理員」已新增WEBP和AVIF對標誌影像的支援。 [GitHub-32495](https://github.com/magento/magento2/issues/32495)

<!-- MC-38156-->

* 您無法再變更 `media_gallery` 屬性。 以前，當您變更 `media_gallery` 屬性返回 `global`，應用程式擲回錯誤。

<!-- MC-36818  magento/partners-magento2ee#470-->

* 以排程更新新增的相關產品，在更新結束日期後，不會再顯示在店面產品頁面上。 [GitHub-469](https://github.com/magento/partners-magento2ee/issues/469)

<!-- MC-34489 magento/partners-magento2ee#491-->

* 現在，當您按一下 **管理項目** 「我的帳戶禮品註冊」頁和註冊表產品無存貨。 之前，應用程式擲回此錯誤： `Error: Call to a member function getId() …`. [GitHub-490](https://github.com/magento/partners-magento2ee/issues/490)

<!-- MC-33667-->

* 您現在可以從「新增頁面」頁面，依預期將CMS頁面新增至網站根階層。

<!-- MC-33499 magento/partners-magento2ee#446-->

* 選取實體類型時，篩選現在可如預期在排程匯出清單中運作。 之前，篩選器無法運作，而應用程式擲回JavaScript錯誤。 [GitHub-361](https://github.com/magento/partners-magento2ee/issues/361)

<!-- MC-30084 ENGCOM-8674-->

* 類別影像現在會如預期從 `catalog/tmp/category` 目錄 `catalog/category` 目錄。 中的影像列 `media_storage_file_storage` 表格現在也有正確的 `directory_id`. [GitHub-11995](https://github.com/magento/magento2/issues/11995)

<!-- MC-24768-->

* 在將變更提交至CMS階層後，商戶現在會如預期般收到失效快取的通知。 以前，應用程式在儲存CMS階層時不會使快取失效。

<!-- MC-24725-->

* 已減少對購物車購物車區段的備援AJAX請求。 之前，應用程式未正確載入購物車小計，而再次觸發購物車重新載入。

<!-- MC-23740-->

* 新增URL驗證，以防止保留的字詞納入URL索引鍵。 請參閱 [定義眾所周知的統一資源標識符(URI)](https://tools.ietf.org/html/rfc5785)

<!-- ENGCOM-9037-->

* 在執行PHP 7.4的部署中，應用程式現在會在 **產生「類別/產品」URL重新寫入** 設定設為 **否**，而購物者會嘗試存取不存在的類別路徑。 之前，應用程式會傳回500錯誤，指出： `Trying to access array offset on value of type bool`. [GitHub-31984](https://github.com/magento/magento2/issues/31984)

<!-- MC-32257 magento/partners-magento2ee#507-->

* 您現在可以成功編輯使用屬性集建立的產品， **設計組和計畫設計更新** 群組已移除。  以前，當您嘗試編輯從該屬性集建立的產品時，應用程式擲回嚴重錯誤。 [GitHub-44](https://github.com/magento/partners-magento2ee/issues/44)

<!-- ENGCOM-8901-->

* `nowdoc` 已更換 `heredoc` 在 `Magento_Backend` 商店切換器。 [GitHub-32262](https://github.com/magento/magento2/issues/32262)

<!-- ENGCOM-8539-->

* 現在，管理員在登入後會直接重新導向至請求的「管理員」頁面。  以前，當管理員登入時，系統會將他們重新導向至「管理員」控制面板（或以已設為啟動頁面的頁面為準），且必須手動導覽至其目的地。 [GitHub-31042](https://github.com/magento/magento2/issues/31042)

<!-- ENGCOM-8685-->

* 新增阿根廷、玻利維亞、智利、厄瓜多、蓋亞那、巴拉圭、秘魯、蘇利南和委內瑞拉等地區至 `directory_country_region` 表格。 [GitHub-31169](https://github.com/magento/magento2/issues/31169)

<!-- ENGCOM-8505-->

* 新增阿爾巴尼亞、丹麥、希臘、冰島、葡萄牙和瑞典等地區至 `directory_country_region` 表格。 [GitHub-31040](https://github.com/magento/magento2/issues/31040)

<!-- MC-30104 magento/magento2#31480 -->

* 當發生異常時，消息現在會在MysqlMQ消息隊列中標籤為錯誤。 [GitHub-18140](https://github.com/magento/magento2/issues/18140)

<!-- ENGCOM-8579-->

* 現在，在為管理員貸項通知單和發票頁載入稅資訊時，應用產品將參考正確的分類對象。 [GitHub-31197](https://github.com/magento/magento2/issues/31197)

<!-- MC-40346-->

* Royal Mail Click &amp; Drop整合現在可如預期般運作。 之前，當您嘗試啟用其整合時，應用程式會擲出此錯誤： `Sorry! Something went wrong. Please try again later`. [GitHub-28996](https://github.com/magento/magento2/issues/28996)

<!-- ENGCOM-8498-->

* 在URL中傳遞錯誤的發運、貸項通知單或發票ID時，應用產品現在會顯示資訊錯誤訊息。 之前，應用程式擲出錯誤。 [GitHub-30424](https://github.com/magento/magento2/issues/30424)

<!-- ENGCOM-8632-->

* 已移除靜態檔案位置中的遞回。  應用程式現在會顯示404頁面，而非500錯誤。 之前，預設NGINX設定中的錯誤會導致無限遞回。 [GitHub-31530](https://github.com/magento/magento2/issues/31530)

<!-- ENGCOM-8550-->

* 的名稱 `cms_index_noroute.xml` 檔案已更正為 `cms_noroute_index.xml`. [GitHub-31300](https://github.com/magento/magento2/issues/31300)

<!-- ENGCOM-8516-->

* 此 `.editorconfig` 已重構檔案，以修正 `db_schema_whitelist.json` 檔案。 [GitHub-31171](https://github.com/magento/magento2/issues/31171)

<!-- ENGCOM-9018-->

* 調整瀏覽器視窗大小不再觸發重複的捆綁放大器事件。 [GitHub-30788](https://github.com/magento/magento2/issues/30788)

<!-- ENGCOM-8722-->

* 篩選時，應用程式不再擲回SQL例外狀況 `Magento\Users\Model\ResourceModel\Users\Collection` by `user_id`. [GitHub-31216](https://github.com/magento/magento2/issues/31216)

### 禮品卡

<!-- MC-40412-->

* 在禮品卡取消時，將按照預期從禮品卡中移除待付款費用。 之前，應用程式在 `cron` 在禮品卡被刪除後運行。

<!-- MC-37658-->

* 透過多個地址結帳時，購物者現在可以從「檢閱訂單」頁面上的訂單中移除禮品卡。 之前，當購物者選取禮品卡然後按一下時，應用程式不會從訂單中移除禮品卡 **移除**.

<!-- MC-34407-->

* 當您在購物車中新增禮品卡後變更禮品卡的值時，應用程式現在會在購物車中顯示禮品卡的新價格。

<!-- MC-32651-->

* 價格範圍驗證邏輯已新增至禮品卡建立頁面。 以前，管理員可以建立一張卡片，其最小值超過最大值。 [GitHub-493](https://github.com/magento/partners-magento2ee/issues/493)

<!-- MC-32638979 magento/partners-magento2ee#40851-->

* 此 `addRequisitionListItemsToCart` 查詢現在會在要求不包含的值時，如預期傳回自訂禮品卡的金額 `allow_open_amount`.

<!-- MC-32373-->

### 禮品訊息

<!-- MC-38655-->

* 此 `setGiftOptionsOnCart` 變異現在正確地建立禮物訊息。 [GitHub-388](https://github.com/magento/partners-magento2ee/issues/388)

### 禮品登記

<!-- MC-33057 magento/partners-magento2ee#467-->

* **事件日期** 禮品註冊表建立或編輯期間，店面和管理員的值現在相同。 以前，每次您編輯並儲存禮品登記表時，應用程式都會調整 **事件日期** 在店面和管理員上倒退一天。 [GitHub-466](https://github.com/magento/partners-magento2ee/issues/466)

<!-- MC-32587  magento/partners-magento2ee#511-->

* 應用程式不再在禮品登記處顯示禁用的產品。 以前，如果產品在添加到禮品註冊表後被禁用，則當購物者訪問註冊表時，應用程式將顯示此消息： `Error: Call to a member function getId() …`. [GitHub-510](https://github.com/magento/partners-magento2ee/issues/510)

### 禮品包裝

<!-- MC-38260-->

* 商店檢視的禮品包裝標籤現在可如預期般運作。

<!-- MC-36749-->

* 禮品包裝現在可如預期套用至要發運至多個地址的訂單。

<!-- MC-34820-->

* 現在，當所有產品都已移除時，應用程式會從購物車中移除禮品包裝費。

<!-- MC-32259 magento/partners-magento2ee#500-->

* 當貸項通知單包含禮品包裝和可配置的產品費用時，貸項通知單合計現在正確。 以前，禮品包裝稅金額並不總是包含在貸項通知單合計中。 [GitHub-34](https://github.com/magento/partners-magento2ee/issues/34)

### Google Analytics

<!-- ENGCOM-8450-->

* 當管理員嘗試在啟用Google Analytics時，應用程式不會再擲回錯誤。 適用於 `connect-src` 已新增，以允許AJAX要求至www.google-analytics.com。 [GitHub-30880](https://github.com/magento/magento2/issues/30880)

### Google Tag Manager

<!-- MC-39072-->

* 啟用「Google標籤管理器」時，結帳工作流程付款頁面上之計費地址的UI元件現在會正確使用報價地址。 以前，付款頁面上會發生JavaScript錯誤。

### GraphQL

<!-- MC-41885-->

* GraphQL `products` 查詢現在會傳回屬性選項，這些選項的排序順序與屬性編輯頁面上使用的順序相同。

<!-- MC-41473-->

* 回應 `{ category(id: 2){ children { name children { name } } } }` GraphQL請求現在包含正確排序的類別樹。

<!-- MC-41030-->

* 此 `CartItemPrices` 物件現在包含新的GraphQL欄位 `fixed_product_taxes`，會傳回套用至購物車項目的固定產品稅陣列。 以前，應用於購物車項目的固定產品稅未包含在購物車查詢中。

<!-- MC-40920-->

* 對GraphQL的空請求現在會擲回回應代碼200，而非500。 以前，GraphQL剖析器在產生查詢結果之前擲回例外狀況。

<!-- MC-40867 magento/partners-magento2ee#532 -->

* 此 `applyRewardPointsToCart` 變異現在會更新購物車的總計，以準確反映所扣回的獎勵點數值。 [GitHub-486](https://github.com/magento/partners-magento2ee/issues/486)

<!-- MC-40379-->

* 使用GraphQL連結追加銷售產品時，GraphQL回應中不再包含已停用的產品。

<!-- MC-40262-->

* 商家現在可以使用GraphQL `setShippingAddressesOnCart` 當訪客結帳停用時，設定購物車的帳單和運送地址的方法。

<!-- MC-39508-->

* 此 `categoryList` 查詢包含多個片段時，不再擲回例外狀況 `CategoryTree` 物件。 [GitHub-31086](https://github.com/magento/magento2/issues/31086)

<!-- MC-38995-->

* GraphQL `product` 查詢現在會傳回正確的客戶群組價格。

<!-- MC-38822-->

* GraphQL `products` 查詢回應現在會根據產品屬性位置來排序匯總。

<!-- ENGCOM-8462-->

* 當產品和類別URL尾碼包含null值時，應用程式在GraphQL查詢期間不再擲回類型錯誤。 [GitHub-30909](https://github.com/magento/magento2/issues/30909)

<!-- magento/magento2#31164-->

* 此 `CustomizableDateValue` 物件現在包含 `type` 屬性。 其值是可設為DATE、DATE_TIME或TIME的列舉。

<!--  magento/partners-magento2ee#421-->

* 此 [`dynamicBlocks` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/dynamic-blocks.html) 傳回符合指定篩選器的動態區塊內容。

<!-- ENGCOM-8603-->

* POST `V1/products/special-price-delete` 請求現在只會刪除具有指定 `store_id` 如預期。 之前，呼叫從所有商店移除了指定SKU的所有特價。 [GitHub-25907](https://github.com/magento/magento2/issues/25907)

<!--  magento/partners-magento2ee#280 -->

* 修正 `country_code` 屬性 `createGiftRegistry` 變異。

<!-- magento/partners-magento2ee#280 -->

* 修正 `giftRegistryUid` 屬性 `updateGiftRegistryItems` 變異。

<!-- magento/partners-magento2ee#280 -->

* 新增其他檢查，以防止 `updateGiftRegistryRegistrants` 變異，用來將隨機人加入禮品登記處。

<!-- magento/magento2#31380 -->

* 此 `addConfigurableProductsToCart` 變異現在會傳回指定產品的正確縮圖。 之前，它會傳回上層產品的縮圖。

<!-- ENGCOM-8477-->

* 此 `products` 當為將來日期設定特殊價格期間時，查詢不再顯示產品的特殊價格。 [GitHub-30210](https://github.com/magento/magento2/issues/30210), [GitHub-29631](https://github.com/magento/magento2/issues/29631)

<!-- magento-engcom/magento2ee#576-->

* 此 `customer` 查詢回應現在包含 `total_giftcard` 屬性 `OrderTotal` 物件。

<!-- MC-41084 ENGCOM-9042 -->

* 修正 `products` 查詢，在沒有分層定價集的項目上返回有關價格層的錯誤資訊。 [GitHub-32279](https://github.com/magento/magento2/issues/32279)

### 影像

<!-- MC-38951-->

* 使用POST建立或更新套件組合產品時，您現在可以如預期設定required_options和has_options套件組合屬性 `/V1/product/:sku` 端點。 過去，即使已努力將這些自訂屬性設為1(1)，這些自訂屬性仍會設為0（零）。

### 匯入/匯出

<!-- MC-41576-->

* 「匯出」頁面「實體屬性」格線中，產品實體的「類別ID」篩選器現在可如預期運作。

<!-- MC-41439 ENGCOM-9005-->

* 當所有子產品無存貨時，已分組的產品存貨狀態現在會如預期般更新為無存貨。 [GitHub-32647](https://github.com/magento/magento2/issues/32647)

<!-- MC-41184-->

* 當子產品庫存狀態由匯入更新時，可設定的產品庫存狀態現在會如預期自動更新。 以前，當子產品庫存狀態由匯入更新時，產品庫存狀態不會自動更新。

<!-- MC-41151-->

* 您現在可以在排程的匯出中儲存空白值。 以前，應用程式會在建立或儲存匯出後更新空的篩選值。 兩者 `no` 和 `not specified` 值在資料庫中以零表示，值為 `not selected` 被覆寫為 `no`.

<!-- MC-41092-->

* 現在，在導出產品、庫存來源和客戶實體時，導出過程將考慮用戶角色範圍。 以前，導出過程忽略用戶角色範圍，這允許導出專用用戶角色導出實體。

<!-- MC-40943-->

* 此應用產品現在將產品稅分類設定為 `None` 如果產品是以 `tax_class_name` 值 `None` 或 `0`. 以前，如果 `product tax_class_name` was `None` 在CSV檔案中，應用程式建立了新稅類 `None`，與現有稅種重複。 若 `product tax_class_name` wes `0` 在CSV檔案中，應用程式會忽略該值，而產品稅類別在匯入後不會變更。

<!-- MC-40898-->

* 管理員現在可以成功變更 `name` 的 `bundle_values` 從管理員。 之前，當您從管理員變更名稱后，應用程式會在店面上將產品顯示為無存貨。 產品也與相同的SKU合併至單一套件選項區段。

<!-- MC-40333-->

* 現在，在匯出客戶資料時，應用程式會考量使用者範圍。 以前，當您嘗試匯出客戶時，應用程式會從所有網站匯出客戶資料。

<!-- MC-40305-->

* 在CSV檔案匯入期間，應用程式現在會如預期，移除向上銷售、交叉銷售和相關產品之間的產品關係 `__EMPTY__VALUE__` 在CSV檔案中指定。

<!-- MC-40012-->

* 匯出許多客戶的自訂位址資料(管理員 **系統** > **匯出**)不再例行導致記憶體錯誤。 以前，在導出自定義地址資料時，應用程式嘗試載入所有客戶資料，這導致記憶體耗盡，而應用程式擲回了無法分配記憶體錯誤。

<!-- MC-39977-->

* 在預設CSV匯入程式期間，不再匯入重複的層級價格。 以前，缺少驗證來防止導入重複層價，而當發生重複層價時，商家無法保存產品。 商家嘗試排程產品變更時，也發現此錯誤： `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry…`.

<!-- MC-39609  magento/magento2#31397-->

* 所有產品影像現在都會在匯入期間經過驗證。 以前，應用程式只會在產品有多個影像時驗證第一個影像。 [GitHub-28236](https://github.com/magento/magento2/issues/28236)

<!-- MC-39483-->

* 您現在可以如預期在匯入期間從客戶地址中刪除地區。 以前，當匯入客戶地址為空白區域時，指派的地區不會變更。

<!-- MC-38810-->

* 具有JSON或HTML內容作為其他產品屬性的產品，現在會正確匯出至CSV檔案。 先前，CSV檔案包含錯誤欄位中重疊的資料字串。

### 索引

<!-- MC-39718 ENGCOM-8567-->

* 進程管理器現在會在子進程失敗時退出並出現錯誤。 以前，如果傳遞給Process Manager的函式數（例如索引器維）低於 `MAGE_INDEXER_THREADS_COUNT` 環境變數。 [GitHub-30964](https://github.com/magento/magento2/issues/30964)

<!-- MC-39272-->

* 使用RESTPUT連結產品時，產品現在可如預期在店面搜尋結果中使用 `/V1/products/:sku/links` 當索引器模式設定為 **儲存時更新**.

<!-- MC-38310 magento/magento2#32693-->

* 目錄價格規則索引器現在在索引器模式設定為 **儲存時更新**. [GitHub-370](https://github.com/magento/partners-magento2ee/issues/370)

<!-- ENGCOM-8890-->

* 刪除不包含產品的禁用類別現在對目錄搜索和類別平面索引表沒有影響。 以前，刪除非作用中類別會觸發完整的重新索引。 [GitHub-23297](https://github.com/magento/magento2/issues/23297)

<!-- ENGCOM-8599 8474-->

* 自訂索引器現在可以對訂閱使用不同的實體欄名稱。 以前，資料庫觸發器使用索引器上次集的列名 **按計畫更新** 而不是指定索引器。 [GitHub-21853](https://github.com/magento/magento2/issues/21853)

<!-- ENGCOM-8887-->

* 應用程式不再傳送AJAX請求以重新載入客戶資料區段(`Magento_Customer/js/section-config`)不受要求影響。 [GitHub-31948](https://github.com/magento/magento2/issues/31948)

<!-- MC-39569-->

* 在添加、刪除或重新排序類別中的產品後，以下索引器不再失效： `catalog_category_product` 和 `catalogsearch_fulltext` （及其家屬）。 以前，這些意外移除操作會觸發網站的完整重新索引。 現在，若未啟用平面目錄，則在這些情況下，會防止完全重新索引。

### 基礎設施

<!-- MC-41445-->

* 相依性 `pelago/emogrifier` 已從3.1.0版更新至5.0.0版。此更新導致對 `Magento\Email\Model\Template\Filter` 類別。 變更的代碼會在電子郵件範本呈現期間執行。 請參閱 [BIC引用](https://developer.adobe.com/commerce/php/development/backward-incompatible-changes/reference/).

<!-- MC-42212-->

* 修正 `\Magento\CatalogInventory\Model\Indexer\Stock\CacheCleaner::getCategoryIdsByProductIds` 無法儲存新產品。

<!-- MC-42199-->

* 已移除已棄用的TinyMCE v3程式庫。 此 `Magento_Tinymce3Banner` 與TinyMCE v3.x相關的模組和MFTF測試已從Adobe Commerce中移除。

<!-- MC-41497-->

* 應用程式不再擲回 `Invalid header value detected` 購物者輸入包含法文變數標籤（例如「é」、「è」）的電子郵件地址時，「聯絡我們」表單上出現錯誤。 應用程式現在會將使用者名稱中的UTF-8字母轉換為ASCII編碼。 以前，UTF-8字母不會在電子郵件地址的唯一區段中轉換為ASCII編碼。

<!-- MC-39947-->

* 將插件添加到父類時，應用程式不再擲回PHP致命錯誤。 [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-9012-->

* 更新了這些模組的README.md檔案： `Magento_Msrp`, `Magento_MsrpConfigurableProduct`, `Magento_MsrpGroupedProduct`, `Magento_Multishipping`, `Magento_MysqlMq`. [GitHub-32577](https://github.com/magento/magento2/issues/32577)

<!-- magento/partners-magento2ee#501-->

* `phpcpd` 已更新為v6.0.3以獲得PHP 8相容性。

<!-- ENGCOM-9073-->

* `ramsey/uuid` 已更新，以與PHP 8.0相容。 [GitHub-31777](https://github.com/magento/magento2/issues/31777), [GitHub-826](https://github.com/magento/magento2-functional-testing-framework/issues/826)

<!-- ENGCOM-8997-->

* `colinmollenhour/php-redis-session-abstract` 已更新為v1.4.4，與PHP 8相容。 [GitHub-32709](https://github.com/magento/magento2/issues/32709)

<!-- ENGCOM-8527-->

* 修正 `phpstan.neon` 檔案。 [GitHub-31239](https://github.com/magento/magento2/issues/31239)

<!-- ENGCOM-8668-->

* 移除過時屬性的使用 `$_isScopePrivate` 整個程式碼庫。 [GitHub-30506](https://github.com/magento/magento2/issues/30506)

<!-- ENGCOM-8551-->

* 頁面配置不再硬式編碼於  `Magento\Widget\Block\Adminhtml\Widget\Instance\Edit\Chooser\Container`.  因此， `getPageLayouts()` 函式現在會如預期，傳回不同模組所宣告的頁面配置實際清單。 之前，它只傳回硬式編碼版面。 [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8509-->

* 此 `composer.lock` 檔案已更新為最新版的編碼標準。 [GitHub-31152](https://github.com/magento/magento2/issues/31152)

<!-- ENGCOM-9015 -->

* 在 `web-token/jwt-framework` 封裝至 `magento/module-jwt-framework-adapter`. [GitHub-32578](https://github.com/magento/magento2/issues/32578)

<!-- ENGCOM-9019 -->

* 已將被動接聽程式新增至 `fotorama.js` 程式庫，改善燈塔量度分數。 [GitHub-31140](https://github.com/magento/magento2/issues/31140)

<!-- ENGCOM-9014 -->

* 更新Google Analytics模組的README.md檔案。 [GitHub-32616](https://github.com/magento/magento2/issues/32616)

<!-- ENGCOM-8375 -->

* Process Manager現在可以在已取用的流程中正確處理例外。 主要程式現在會退出，而應用程式現在只顯示錯誤訊息一次。 此外，在主進程中將被丟棄的進程中的例外現在將處理它們。 以前，應用程式記錄了多個索引器故障並顯示了多個錯誤消息。  [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- ENGCOM-8544 -->

* 將外掛程式新增至父類別時，應用程式不再擲回錯誤。 ( `optionsProvider` 參數現在會在 `getContentIdentities` in `Assest.php`.) 之前，應用程式擲回此錯誤：  `Error: Cannot instantiate interface Magento\Framework\Data\OptionSourceInterface`. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-8549 -->

* 執行中 `Magento\Framework\Filesystem\Io\Ftp::ls()` 在空白資料夾上，現在會如預期傳回空白陣列。 以前，應用程式擲出此例外： `Invalid argument supplied for foreach() in vendor/magento/framework/Filesystem/Io/Ftp.php…`. [GitHub-31288](https://github.com/magento/magento2/issues/31288)

<!-- ENGCOM-8791 -->

* 此 `update` 「角色」和「規則」的方法已標示為已廢止，於 `app/code/Magento/Authorization/Model/Role.php`. [GitHub-30756](https://github.com/magento/magento2/issues/30756)

<!-- ENGCOM-8946 -->

* 已更正SameSite Cookie參數的串連。 之前，附加了錯誤的串連 `lex` 尾碼 `value`, `domain`和其他參數。 [GitHub-26377](https://github.com/magento/magento2/issues/26377), [GitHub-32440](https://github.com/magento/magento2/issues/32440)

<!-- ENGCOM-8698 ENGCOM-9034 -->

* `allure-framework/allure-phpunit` 已在整個程式碼基底中升級至v1.3.1。 之前，應用程式會顯示此錯誤：  `Warning: Use of undefined constant GLOB_BRACE - assumed 'GLOB_BRACE' (this will throw an Error in a future version of PHP) in /var/www/html/src/vendor/allure-framework/allure-phpunit/src/Yandex/Allure/Adapter/AllureAdapter.php:74.` [GitHub-24635](https://github.com/magento/magento2/issues/24635)

<!-- ENGCOM-8783 -->

* 現在當錯誤執行時，應用程式會顯示更多資訊錯誤 `bin/magento` 命令。 之前，應用程式不會顯示任何錯誤訊息，或顯示缺少資訊的訊息。 [GitHub-32786](https://github.com/magento/magento2/issues/32786)

<!-- ENGCOM-8953 -->

* 此 `ArrayIterator` PHP對象已更新，以與PHP 7.4一樣正常工作。 [GitHub-32088](https://github.com/magento/magento2/issues/32088)

<!-- ENGCOM-8469 -->

* 當客戶嘗試完成訂單時，當沒有可運送承運人時，應用程式不再擲回錯誤。 而是會顯示結帳頁面和此訊息： `Sorry, no quotes are available for this order at this time`. 以前，應用程式會顯示空白結帳頁面，並將此訊息記錄在例外記錄中： `array_keys() expects parameter 1 to be array, null given`. [GitHub-30830](https://github.com/magento/magento2/issues/30830)

<!-- ENGCOM-8557 -->

* 應用程式不再將每個Cookie記錄為個別內容。 此 `$_COOKIE` 陣列也已轉換為字串。 之前，由於每個Cookie都記錄為個別內容，當Cookie數超過50時，應用程式會記錄此訊息： `Unable to send the cookie. Maximum number of cookies would be exceeded`. [GitHub-31334](https://github.com/magento/magento2/issues/31334)

### 發票

<!-- ENGCOM-8472 -->

* 在管理員中建立新發票時， **電子郵件副本** 核取方塊現在可如預期般運作。 以前，如果在中啟用傳送發票電子郵件的全域設定，則會忽略核取方塊 **銷售電子郵件**. 它現在與發運和貸項通知單建立頁面一樣一致，並且運行方式相同。 [GitHub-28511](https://github.com/magento/magento2/issues/28511)

### 媒體集

<!-- MC-41728-->

* `bin/magento media-gallery:sync` 現在處理缺少XMP資訊的PNG影像時，會如預期失敗。

<!-- ENGCOM-8814-->

* 中的項目 `catalog_product_entity_media_gallery` 刪除相關產品時，表格會如預期般移除。 [GitHub-17727](https://github.com/magento/magento2/issues/17727)

<!-- ENGCOM-8945-->

* 啟用JavaScript縮制時，現在可在媒體集中更新影像詳細資料。 以前未儲存影像詳細資訊，而應用程式顯示此錯誤： `TypeError: Cannot read property 'call' of undefined in jquery.validate`. [GitHub-31633](https://github.com/magento/magento2/issues/31633)

### MFTF

若需了解新功能和MFTF核心錯誤修正，請參閱 [功能測試框架更改日誌](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

<!-- ENGCOM-8496-->

* 此 `magento indexer:reindex` 和 `cache:flush` 和 `AdminReindexAndFlushCache` 已從測試中移除動作群組，以改善下列模組的執行： `Bundle`, `Catalog`, `CatalogRule`, `CatalogRuleConfigurable`, `CatalogUrlRewrite`, `Downloadable`, `Indexer`, `Paypal`，和 `Sales`. [GitHub-31031](https://github.com/magento/magento2/issues/31031)

<!-- ENGCOM-8562-->

* `AdminSubmitCategoriesPopupActionGroup` 已新增至測試，以防止測試失敗。 [GitHub-31251](https://github.com/magento/magento2/issues/31251)

<!-- ENGCOM-8562-->

* 已使用 `StorefrontCheckQuickSearchStringActionGroup` 和 `StorefrontAssertProductNameOnProductMainPageActionGroup` （現有動作群組）。 [GitHub-31251](https://github.com/magento/magento2/issues/31251)

#### 重構測試

已重構下列測試以改進執行時間：

`AddOutOfStockProductToCompareListTest`  <!-- ENGCOM-8547-->

`AdminApplyTierPriceToProductWithPercentageDiscountTest` <!-- ENGCOM-8522-->

`AdminCheckingCreditMemoTotalsTest` <!-- ENGCOM-8606-->

`AdminCheckDashboardWithChartsTest` <!-- ENGCOM-8897-->

`AdminConfigDefaultProductLayoutFromConfigurationSettingTest`  <!-- ENGCOM-8891-->

`AdminCreateInvoiceTest` <!-- ENGCOM-8581-->

`AdminCreateOrderAddProductCheckboxTest` <!-- ENGCOM-8492-->

`AdminMassOrdersCancelCompleteAndClosedTest` <!-- ENGCOM-8538-->

`AdminMassOrdersCancelProcessingAndClosedTest`  <!-- ENGCOM-8670-->

`AdminMassOrdersHoldOnCompleteTest`  <!-- ENGCOM-8897-->

`AdminMassOrdersHoldOnPendingAndProcessingTest`  (已取代 `AdminMassOrdersHoldOnPendingAndProcessingTest`) <!-- ENGCOM-8669-->

`AdminMassOrdersUpdateCancelPendingOrderTest` <!-- ENGCOM-8602-->

`AdminMassProductPriceUpdateTest` <!-- ENGCOM-8587-->

`AdminMassUpdateProductAttributesMissingRequiredFieldTest` <!-- ENGCOM-8511-->

`AdminOrdersReleaseInUnholdStatusTest`  <!-- ENGCOM-8592—-->

`AdminPanelIsFrozenIfStorefrontIsOpenedViaCustomerViewTest`  <!-- ENGCOM-8601-->

`AdminSortingByWebsitesTest`  <!-- ENGCOM-8583-->

`AdminUpdateSimpleProduct` <!-- ENGCOM-8536-->

`AdminUpdateSimpleProductWithRegularPriceInStockEnabledFlatTest`  <!-- ENGCOM-8533-->

`AdminValidateShippingTrackingNumberTest`  <!-- ENGCOM-8593-->

`CancelOrdersInOrderSalesReportTest`  <!-- ENGCOM-8591-->

`ProductsQtyReturnAfterOrderCancelTest` <!-- ENGCOM-8506-->

`StorefrontConfigurableProductBasicInfoTest`  <!-- ENGCOM-8711-->

#### 動作群組

這些測試中的重複動作已取代為動作群組：

`AdminCheckConfigurableProductPriceWithDisabledChildProductTest`  <!-- ENGCOM-8574-->

`AdminConfigurableProductCreateTest` <!-- ENGCOM-9013-->

`AdminConfigurableProductRemoveAnOptionTest` <!-- ENGCOM-9038-->

`AdminCreateProductDuplicateUrlkeyTest` <!-- ENGCOM-9007-->

`AdminCreateSimpleProductNegativePriceTest` <!-- ENGCOM-900-->

`AdminCreateSimpleProductZeroPriceTest`  <!-- ENGCOM-9040-->

`AdminCreateVirtualProductFillingRequiredFieldsOnlyTest` <!-- ENGCOM-9003-->

`AdminUpdateSimpleProductWithRegularPriceInStockDisabledProductTest` <!-- ENGCOM-9002-->

`AdminUpdateSimpleProductWithRegularPriceInStockNotVisibleIndividuallyTest`  <!-- ENGCOM-9011-->

`AdminUpdateSimpleProductWithRegularPriceInStockVisibleInCatalogOnlyTest`  <!-- ENGCOM-9041-->

#### 新動作群組

`AdminClearFiltersOnGridActionGroup` <!-- ENGCOM-8604-->

`AdminClickAddNewPageOnPagesGridActionGroup`  <!-- ENGCOM-8613-->

`AdminClickInsertWidgetActionGroup` <!-- ENGCOM-8614-->

`AdminClickRefundOfflineOnNewMemoPageActionGroup` <!-- ENGCOM-8580-->

`AdminFillAccountInformationOnCreateOrderPageActionGroup` <!-- ENGCOM-8495-->

`AdminGoToOrderStatusPageActionGroup`  <!-- ENGCOM-8615-->

`AdminOpenCMSPagesGridActionGroup`<!-- ENGCOM-8682-->

`AdminSelectAttributeSetOnEditProductPageActionGroup` <!-- ENGCOM-8566-->

`AssertAdminProductIsAssignedToCategoryActionGroup`  (以SKU取代篩選產品格線，並按一下第一列（以縮短測試執行時間） <!-- ENGCOM-8535 8534-->

`AssertLinkActionGroup` <!-- ENGCOM-8457-->

`AssertStorefrontCartDiscountActionGroup` <!-- ENGCOM-8431-->

`ClickPlaceOrderActionGroup` <!-- ENGCOM-8671-->

`SaveCmsPageActionGroup` <!-- ENGCOM-8683-->

`StorefrontAssertProductNameIsNotOnProductMainPageActionGroup` <!-- ENGCOM-8562-->

`StorefrontGuestCheckoutProceedToPaymentStepActionGroup` <!-- ENGCOM-8582-->

`StorefrontHoverProductOnCategoryPageActionGroup` <!-- ENGCOM-8575-->

`StorefrontSelectCustomizeAndAddToTheCartButtonActionGroup` <!-- ENGCOM-8573-->

#### 已刪除的動作群組

<!-- ENGCOM-8525 8558 8608 8546 8695 8889 8681 8627 8714-->

* 已移除  `CliIndexerReindexActionGroup` （或變更的值），以改善 `Backend`, `Bundle`, `BundleImportExport`, `Catalog`, `CatalogRule`, `CatalogSearch`, `Checkout`, `Downloadable`,  `Elasticsearch`,  `Elasticsearch6`,  `Indexer`, `LayeredNavigation`,  `LoginAsCustomer`,  `Newsletter`, `Sales`, `SalesRule`, `Search`, `Store`,  `Swatches`, `UrlRewrite`, `Weee`，和 `Wishlist`模組。

<!-- ENGCOM-8893 8951 8893 9001 8715 8724 8721 8843-->

* 已移除 `CliCacheFlushActionGroup` 從 `Catalog`, `CatalogUrlRewrite`, `Checkout`, `Config`, `ConfigurableProduct`,`Contact`, `Cookie`, `CurrencySymbol`, `Customer`, `Downloadable`, `Elasticsearch`, `Elasticsearch6`, `Fedex`, `Indexer`, `LayeredNavigation`,`LoginAsCustomer`, `Msrp`, `Multishipping`, `Sales`, `Swatches`, `Translation`, `UrlRewrite`, `Vault`, `Weee`，和 `Wishlist` 模組。

### 電子報

<!-- ENGCOM-8948 MC-40885-->

* 應用程式不再傳送電子報電子郵件給在電子報佇列建立與傳送電子報之間的時段內，已取消訂閱電子報的客戶。 [GitHub-32116](https://github.com/magento/magento2/issues/32116)

<!-- ENGCOM-8675-->

* 此應用程式現在會遵照電子報啟用設定(**商店**  >  **設定**  >  **設定**  >  **客戶**  >  **電子報**  >  **一般選項**)。 以前，這些設定一律是從多存放區部署中的預設範圍擷取。 [GitHub-31188](https://github.com/magento/magento2/issues/31188)

<!-- ENGCOM-8551-->

* REST呼叫GET `/V1/customers/search` 現在，會針對訂閱多份電子報的客戶傳回正確資訊。 [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8817-->

* 快取訂閱狀態已從電子報外掛程式中移除。 [GitHub-19345](https://github.com/magento/magento2/issues/19345)

### 順序

<!-- MC-40963-->

* 現在，在將儲存貸項退回到部分開票訂單的客戶帳戶時，應用產品將正確計算已開票的客戶餘額。

<!-- ENGCOM-8710-->

* 現在，當應用程式保存退款的客戶餘額時，它將按預期保存修改的訂單。 [GitHub-393](https://github.com/magento/partners-magento2ee/issues/393)

### 付款方法

<!-- MC-41525-->

* 應用程式現在會呈現付款區塊 `frontend` 無論電子郵件傳送的區域為何。 (現在，模擬為 `frontend` )。 之前，會在傳送電子郵件的區域中轉譯付款區塊。 因此，無論是從管理員或REST API觸發銷售電子郵件，資產的URL都會嘗試從錯誤的區域載入(`webapi_rest` 或 `adminhtml`)。

<!-- MC-40810-->

* 應用程式現在會將產品下載連結傳送至結帳期間指定的電子郵件地址。 以前，當訪客購物者使用PayPal Express Checkout並輸入不同的電子郵件地址來提交訂單和結帳時，應用程式會將可下載的產品連結傳送至第一個地址。

<!-- MC-38051-->

* 在支援多種貨幣的部署中，應用程式現在會在「付款方法」頁面上顯示可用存放評分的準確值。

<!-- MC-37820-->

* 現在，當訪客購物者在結帳期間將訂單的運送地址變更為不同的國家/地區時，付款方法清單會如預期更新。 以前，更改帳單地址不會觸發可能付款方法的更新。

#### PayPal

<!-- MC-39895-->

* 購物者現在可以透過包含特殊字元的運送地址，成功結帳PayPal Payflow Pro訂單。 以前，申請拒絕支付這些訂單。

<!-- MC-39861-->

* 使用PayPal成功付款後，購物者現在會重新導向回訂單成功頁面。 之前，由於工作階段資料遺失，購物者會重新導向至空白頁面。

### 效能

<!-- MC-41647-->

* 大型目錄上管理SKU搜尋的效能已有所改善。 查詢優化程式提示現在會在查詢執行期間強制使用索引。

<!-- MC-41440-->

* 的效能 `catalog_product_alert` `cron` 在大型表格（數百萬列）上執行時的程式已得到改善。 以前， `catalog_product_alert` 已載入所有產品警報，導致記憶體不足例外狀況。

<!-- ENGCOM-8752-->

* 只需要一個編輯頁面才能轉譯管理員表單時，應用程式不再載入所有CMS頁面。  這些頁面現在載入速度更快。 [GitHub-30936](https://github.com/magento/magento2/issues/30936)

<!-- ENGCOM-8510-->

* 中的數值 `WHERE IN` 運算式現在會轉換為數字，而非字串，以改善某些MariaDB版本中的查詢效能。 [GitHub-31135](https://github.com/magento/magento2/issues/31135)

* 此 `use_application_lock` 模式可讓您透過使用環境變數或設定 `app/etc/env.php` 檔案。 啟用此模式後，您不再需要手動重設索引器。 未啟用此模式時，必須在失敗後手動重置索引器。 請參閱 [使用應用程式鎖定模式重新索引進程](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### 定價

<!-- MC-41767-->

* 當購物者更新店面上的產品數量時，應用程式現在會以分組價格正確更新產品的價格。 [GitHub-32669](https://github.com/magento/magento2/issues/32669)

<!-- MC-39282-->

* 現在，當產品已獲派階層價格，且 `Magento\Framework\Api\ExtensibleDataObjectConverter` 用於轉換產品資料。 以前，當 `Magento\Framework\Api\ExtensibleDataObjectConverter` 用於在儲存產品時將產品資料轉換為陣列，應用程式未儲存產品，並顯示此錯誤： `Notice: Undefined index: price in app/code/Magento/Catalog/Model/Product/Type/Price.php on line 382.`

<!-- MC-36811-->

* 排程價格更新現在已套用至購物者購物車中的產品。 [GitHub-356](https://github.com/magento/partners-magento2ee/issues/356)

<!-- MC-24693-->

* 當啟用數量增量且小數庫存少於1時，階層價格現在會如預期般套用至產品。 之前，最低層價格數量設為1。

### 產品影片

<!-- MC-39755-->

* 您現在可以使用 **新增影片** 按鈕(管理員 **目錄** > **產品**)，以連續新增數個視訊。 之前，視訊欄位會保留先前視訊的詳細資訊。

<!-- MC-40817-->

* 在產品頁面上輸入產品視訊的全螢幕模式，現在可如預期在行動裝置上運作。 之前，進入全螢幕模式會導致視訊在退出全螢幕模式前暫停。

<!-- MC-39759-->

* 導航箭頭按鈕(**下一個** 和 **Prev**)現在會如預期般顯示在店面產品影片上。

<!-- MC-40463-->

* 商家現在可以使用 **插入視訊** 按鈕（如預期）。 之前，應用程式會顯示404錯誤。 [GitHub-31753](https://github.com/magento/magento2/issues/31753)

### 報價

<!-- MC-39531-->

* 此 `/V1/guest-carts/examplecartid/items` 呼叫現在會傳回請求的存放區檢視。 以前，它會傳回商店中的第一個商店檢視，而非請求的商店檢視。

<!-- MC-33893 ENGCOM-8992-->

* 發票傳送現在可設定。 以前，發票發送不可配置，應用程式在建立發票後始終發送發票。 發票和訂單電子郵件均在一個觀察員的範圍內發送。 現在，訂單電子郵件和發票電子郵件的傳送由獨立的觀察員負責。 [GitHub-27656](https://github.com/magento/magento2/issues/27656)

### 報表

<!-- MC-40998-->

* 現在，您可以在Adobe Commerce雲端基礎架構專案上檢視所有系統報表，並從中下載。 以前，您無法下載記錄檔、資料、設計或商店的系統報告。

<!-- MC-39737-->

* 管理員的上次審核日期 **報表** > **評論** > **按產品** 現在會顯示正確的審核日期。 以前，應用產品顯示的是產品建立日期，而不是審閱日期。

### 退貨授權(RMA)

<!-- MC-41866-->

* RMA `resolution` 屬性欄位值時，屬性不再視需要顯示 `required` 設為 **no**.

<!-- MC-41808-->

* 您現在可以從管理員選取多個訂單以進行退貨。 之前，當您按一下「 」，應用程式會擲回錯誤 **提交** 選取多個傳回，然後從「動作」下拉式功能表中選取「關閉」後，即可執行此作業。

<!-- MC-41759-->

* 在您使用REST API變更回訪的狀態後，應用程式現在會如預期般傳送電子郵件通知給客戶。

<!-- MC-39981  magento/partners-magento2ee#442 -->

* 應用程式現在會根據管理員客戶傳回格線中的篩選值來篩選記錄。 之前，應用程式會將您導向「管理所有客戶」頁面，然後按一下 **重設篩選器** 按鈕。 [GitHub-436](https://github.com/magento/partners-magento2ee/issues/436)

### 評論

<!-- MC-40116-->

* 「我的帳戶」頁面的「檢閱詳細資料」區段現在可正確計算產品檢閱評等星級。

<!-- MC-39763-->

* 產品檢閱詳細資訊頁面的「平均產品評等」和「產品評等」區段現在可正確呈現。 以前，應用程式計算店面評等時未設定審核ID，而且產品審核模板未正確呈現。

<!-- MC-36149-->

* 此 **是第一個審閱此產品的** 管理員核准審核後，連結現在會如預期般變更為審核計數。

<!-- ENGCOM-8501 MC-30270-->

* 管理員現在可以依照預期，對產品編輯頁面的產品審核區段上的產品審核進行排序。 [GitHub-30270](https://github.com/magento/magento2/issues/30270)

<!-- MC-41003  magento/magento2#32259-->

* 管理員核准並儲存來自與商店不同的網域的審核後，審核現在會以正確的存放區ID儲存。 [GitHub-17510](https://github.com/magento/magento2/issues/17510)

### 獎勵

<!-- MC-41159-->

* 在下單的客戶從系統中移除後，商家現在可以取消全部或部分使用獎勵點下單的訂單。

<!-- MC-40037-->

* 商家現在可以從購物車價格規則中移除獎勵點。 以前，當商人嘗試 **獎勵積分** 建立購物車價格規則時，獎勵點數量的先前值會持續存在。

<!-- MC-39890-->

* 產品審核的獎勵點現在與相關網站相關聯，而管理員核准了多個審核 **行銷** > **待審** 格線。 之前，獎勵點不會顯示在店面上，也不會連結至管理員中的相關網站。

<!-- MC-39820-->

* 購物者透過多個地址結帳或結帳時，應用程式現在會更新付款方法清單 **儲存評分（獎勵點數）** 選項。

### 銷售

<!-- MC-39796-->

* 管理員使用者現在可以在 **允許延交訂單** 設定已啟用(**商店** > **設定** > **目錄** > **庫存** > **產品庫存選項**)。 之前，應用程式擲回錯誤。

<!-- MC-42280-->

* 當姓氏以空白字元結尾時，購物者現在可以在「訂購與退貨」頁面上找到訂單。

<!-- MC-41438-->

* 現在，當將分配100%折扣的購物車價格規則應用於同時需要繳納目錄產品稅和折扣稅以及符合免費發運資格的訂單時，將使用正確的總金額建立發票。 以前訂單的價格正確，但發票沒有。 [GitHub-30853](https://github.com/magento/magento2/issues/30853)

<!-- MC-40384-->

* 依日期篩選訂單現在會傳回準確的結果。 以前，在您按訂單日期篩選訂單時，應用程式不會傳回在00:00 UTC之後下的訂單。

<!-- MC-40030-->

* 現在，貸項通知單網格在 **網站** 範圍用於 **價格** 屬性。

<!-- MC-40013 ENGCOM-8781-->

* 重新載入「管理員建立新訂單」頁面後，付款方法選項按鈕在結帳工作流程的「付款與運送資訊」區段中不會再消失。 [GitHub-32106](https://github.com/magento/magento2/issues/32106)

<!-- MC-39891-->

* 阿拉伯文文字現在可以正確顯示在發票中。

<!-- MC-39864-->

* 此應用產品現在可以根據將PayPal Payment Pro部署為付款網關的儲存中的訂單或發票，正確計算貸項通知單的部分貸項通知單稅合計。 以前，對於具有多張發票的訂單，應用產品會為貸項通知單中的部分發票取消核銷該訂單的整個稅。

<!-- MC-39521 ENGCOM-8528-->

* 當向客戶發送新訂單電子郵件時，應用程式不再建立隨機資料庫死鎖。 以前，由於應用程式保存了整個對象及其相關對象，而不是更新的SQL列，因此會發生死鎖。 應用程式顯示了以下類型的錯誤： `SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction`. [GitHub-31090](https://github.com/magento/magento2/issues/31090)

<!-- MC-39353-->

* 現在，店面訂單詳細資訊頁面會顯示正確的已發運產品數量。 以前，產品數量不正確，因為已呈現的「訂單發運」頁的模板 **發運數量** as a `int`. 此項目已變更為 `float`.

<!-- MC-39026-->

* 當 **發票的電子郵件副本** 按鈕。 之前，應用程式會將電子郵件傳送至 **客戶** 和 **將發票電子郵件副本發送到**. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

<!-- MC-38973-->

* 從管理員為現有客戶建立新訂單時，應用程式不再為客戶帳戶建立重複的地址條目。 此 **在通訊簿中保存** 核取方塊已重新命名為 **添加到通訊簿** 和現在預設在「管理員」中取消勾選。

<!-- MC-38834-->

* 此應用程式現在會使用 **HTML打印視圖徽標** 設定。 之前，應用程式會顯示LUMA標誌，而非上傳的標誌。

<!-- MC-38625-->

* 當物料計數超過20時，店面上訂單物料的呼機現在可正常運作。 以前，呼機會將子產品考慮在內，而總計數不正確。

<!-- MC-23915 ENGCOM-8713-->

* 現在，應用產品將在「訂單」頁和「貸項通知單」頁網格中顯示小計、發運和處理值的正確貨幣符號。 [GitHub-22662](https://github.com/magento/magento2/issues/22662)

<!-- ENGCOM-8486-->

* 使用Safari的管理員現在可以成功將產品新增至管理員的訂單。 以前，當管理員按一下 **添加選定產品以訂購** 按鈕，應用程式顯示旋轉載入表徵圖，並掛起頁面。 [GitHub-30265](https://github.com/magento/magento2/issues/30265)

### 銷售規則

<!-- MC-40671-->

* 此應用程式現在可套用購物車價格規則，搭配 **最大數量折扣適用於** 或 **折扣數量步驟（購買X）** 條件。 以前，如果購物車價格規則包含 **最大數量折扣適用於** 或 **折扣數量步驟（購買X）** 套用至另一個購物車價格規則後，總折扣會降至所設定的值 **最大數量折扣適用於** 或 **折扣數量步驟（購買X）** 乘以產品價格。

<!-- MC-39827-->

* 「抵用券」報表現在可準確反映實作分割資料庫之部署中的抵用券活動。

<!-- MC-39477-->

* 包含條件「類別」的購物車價格規則 **不** 現在會如預期般套用至未指派給類別，但已指派其父產品的可設定子/簡單產品。

<!-- MC-39034-->

* GraphQL `cart` 當優惠券套用至訂單時，查詢現在會傳回購物車之計費步驟的正確總量。

### 搜尋 {#search-heading}

<!-- MC-41138-->

* 類別頁面不再包含下列重複的HTML元素ID: `modes-label`, `mode-list`, `toolbar-amount`, `sorter`, `limiter`.

<!-- MC-40981-->

* 部分字詞搜尋結果不再包含非預期或無關的相符項目，且搜尋會在店面和管理員中產生一致的結果。 現在，應用程式使用不同的分析器，而不用加粗器來搜尋部分字詞。 以前，搜尋結果顯示的產品不含搜尋關鍵字。 （預設分析器以前包含一個簡化器，並且由於搜索時使用了同一個分析器進行部分字搜索，因此搜索結果可能會生成意外或無關的匹配。）

<!-- MC-40715-->

* 如果搜尋查詢有多個單字，且產品名稱設定為無法搜尋，快速搜尋現在會傳回結果。 以前，如果產品名稱設定為不可搜索，則應用程式會對含有多個單詞的搜索查詢引發查詢異常。

<!-- MC-40672-->

* 搜尋結果現在包含 `weight` 屬性設為可搜尋時，即可正常運作。

<!-- MC-40409-->

* 當您檢視已啟用Elasticsearch的空白類別頁面時，應用程式不會再擲回錯誤。 而是會如預期般轉譯頁面並顯示資訊訊息。 之前，空白全文索引會在類別頁面上觸發例外狀況。

<!-- MC-40376-->

* 如果購物者開始搜尋後在搜尋欄位外點按，搜尋欄位自動完成功能現在會如運期般運作。 購物者繼續輸入時，自動完成建議現在會重新出現。 以前，應用程式未顯示自動完成建議，而點按搜尋方塊後，搜尋建議不會再次顯示（雖然已輸入其他字母）。

<!-- MC-34217-->

* 現在，在「進階搜尋」中根據產品的完整或部分SKU來搜尋產品，會傳回預期的產品。

<!-- MC-31395-->

* 分層導覽篩選器現在可顯示正確的產品計數。 之前，Elasticsearch中的產品計數值不會依目錄權限篩選。

<!-- MC-23881 ENGCOM-8618-->

* 當類別URL頁面參數超過分頁時，Elasticsearch不再擲回錯誤。 [GitHub-23843](https://github.com/magento/magento2/issues/23843)

<!-- MC-24033  magento/magento2#3274-->

* 您現在可以新增自訂Elasticsearch欄位對應程式至 `Magento\Elasticsearch\Model\Adapter\FieldMapper\Product\FieldProvider\FieldName\Resolver\CompositeResolver`. [GitHub-24350](https://github.com/magento/magento2/issues/24350)

<!-- ENGCOM-9029 MC-24026-->

* 開發人員現在可以變更Elasticsearch對應。 以前，以預設對應傳送至Elasticsearch伺服器的動態範本會進行硬式編碼，因此開發人員無法Elasticsearch與自訂模組相關聯的任何額外資料。 [GitHub-24363](https://github.com/magento/magento2/issues/24363)

<!-- ENGCOM-8464 -->

* 停用「搜尋建議」時，搜尋欄位（表單部署搜尋）現在可正常運作。 [GitHub-30584](https://github.com/magento/magento2/issues/30584)

### 裝運

<!-- MC-41464-->

* 現在，當購物者在使用多個地址結帳期間刪除產品後，再導覽回購物車頁面時，應用程式會如預期更新出貨價格。

<!-- MC-41343-->

* 當購物車中的某些物料符合免運費時，應用產品現在會顯示正確調整的運費價格。 以前，當購物車中符合免費運送資格的項目子集時，應用程式不會調整運送價格，並向購物者顯示完整的運送價格。

<!-- MC-41186-->

* 受限於特定網站的管理員現在可以為同一網站上下的訂單建立裝運。 以前，當管理員沒有預設儲存視圖的權限時，應用程式會發出此異常，因為管理員嘗試發送一個在儲存視圖中放置的訂單，該訂單由管理員訪問： `Notice: Undefined offset: 1 in /app/code/Magento/Catalog/Model/Product/Attribute/Backend/GroupPrice/AbstractGroupPrice.php on line 293`.

<!-- MC-41069-->

* 在確定訂單是否符合免費DHL運送條件時，應用產品現在將考慮相關的購物車價格規則折扣。

<!-- MC-40702 ENGCOM-8728-->

* 對於以非基本貨幣下單時支援多種貨幣的商店，發運標籤現在使用基本貨幣作為預期貨幣，而不是訂單貨幣。 [GitHub-31891](https://github.com/magento/magento2/issues/31891)

<!-- MC-40678 magento/magento2#31925-->

* 現在，當購物者離開多次運送頁面導覽後於結帳期間返回購物車頁面時，應用程式會顯示正確的訂單小計。 [GitHub-31889](https://github.com/magento/magento2/issues/31889)

<!-- MC-40541 magento/magento2#31841 -->

* 在建立管理訂單期間編輯帳單資訊不再更改具有不同預設發運地址和帳單地址的客戶的發運資訊。 [GitHub-31786](https://github.com/magento/magento2/issues/31786)

<!-- MC-37385 ENGCOM-8578-->

* 應用程式不再取消檢查 **附加註釋** 購物者點按時的核取方塊 **獲取運送方法和價格** ，並在從管理員建立訂單時選取發運方法。 [GitHub-30256](https://github.com/magento/magento2/issues/30256)

<!-- MC-36425-->

* 購物者現在可以使用「上一頁」瀏覽器按鈕，在結帳含有多個地址的訂單時，返回「選擇運送方法」頁面。 以前，應用程式顯示了損壞的「選擇發運方法」頁。 [GitHub-30268](https://github.com/magento/magento2/issues/30268)

<!-- MC-40021 ENGCOM-8983-->

* 當購物者將「發貨至多個地址」頁面上的數量變更為多個地址頁面，並按一下瀏覽器「返回」按鈕後，產品數量現在仍如預期一樣不變。 [GitHub-31956](https://github.com/magento/magento2/issues/31956)

<!-- ENGCOM-9096-->

* 在結帳期間套用購物車價格規則時，固定費率發運方法費用不再為零。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- ENGCOM-8537-->

* 當商家嘗試使用DHL發運訂單時，應用程式不再擲回錯誤 **建立裝運標籤** 核取方塊已啟用，而產品名稱包含unicode字元。 以前，應用程式在請求建立標籤時會顯示此錯誤： `The response is in wrong format`. [GitHub-31032](https://github.com/magento/magento2/issues/31032)

<!-- ENGCOM-8952 -->

* 您可以在多網站部署中，成功向管理員下單， `United States` 在單一網站上啟用，且`Disable all countries` 已啟用，作為其他網站的預設範圍。 之前，應用程式未下訂單，並顯示此錯誤： `Please check the shipping address information. "regionId" is required. Enter and try again`. [GitHub-30577](https://github.com/magento/magento2/issues/30577)

### 測試

<!-- MC-39807-->

* 「排程區塊更新」功能現在可如預期，在實作Abmey的部署中運作。 以前，應用程式不會更新區塊內容，因為Abmetly快取標籤沒有失效，而Abmetly會繼續提供過時的內容。

<!-- MC-41142-->

* 現在，當指派給多個網站商店檢視時，購物車價格規則測試預覽會載入適當的網站。 之前，無論指派的網站為何，購物車價格規則測試預覽都會載入預設商店檢視中。

<!-- MC-40916-->

* 在非預設商店檢視中，產品的特殊價格現在會在排程更新結束後，如預期般設為預設值。

<!-- MC-40850  magento/partners-magento2ee#489-->

* 在透過結束日期建立未來的測試更新後，商家現在可以從可下載產品頁面成功儲存含有連結範例的可下載產品。 之前，應用程式未儲存產品並顯示此訊息： `The downloadable sample isn't related to the product. Verify the link and try again`. [GitHub-488](https://github.com/magento/partners-magento2ee/issues/488)

<!-- MC-40734-->

* 在預覽類別的計畫更新期間，應用程式不再執行包含所有產品ID的大型資料庫查詢。 相反地，類別篩選器會套用至產品集合，以建立類別的測試預覽的臨時表格。 以前，應用程式將所有產品插入臨時表中以進行測試預覽，這會降低效能。

<!-- MC-40714-->

* 此 `Magento_SalesRuleStaging` 從2.3.x升級期間，模組不再觸發錯誤。

<!-- MC-40697-->

* 當您檢視排程更新時，應用程式現在會顯示包含正確資料的目錄規則條件。 以前，如果您檢視的是使用條件建立的排程更新，應用程式不會顯示條件或顯示的條件包含不正確的資料。

<!-- MC-40604-->

* 此 **使用預設值** 在更新前取消勾選排程更新後，產品的核取方塊會維持勾選狀態。

<!-- MC-40588 magento/partners-magento2ee#463-->

* 目錄價格規則現在可如預期般套用至具有未定義屬性值的產品。 以前，透過目錄價格規則建立的折扣不會套用至具有未定義屬性的產品。 [GitHub-461](https://github.com/magento/partners-magento2ee/issues/461)

<!-- MC-40283-->

* 目錄規則現在可在不同時區的商店，以多網站部署時如預期般運作。 之前，應用程式會一次在所有網站上套用或停用目錄規則。

<!-- MC-40054-->

* 為特定網站建立排程更新時，不再移除層級價格。

<!-- MC-39784 magento/partners-magento2ee#475-->

* 現在，在建立未來的測試更新並設定結束日期後，您可以從「可下載的產品」頁面儲存產品。 之前，應用程式未儲存產品並顯示此訊息： `The downloadable link isn't related to the product. Verify the link and try again`. [GitHub-474](https://github.com/magento/partners-magento2ee/issues/474)

### 商店

<!-- MC-40538-->

* 應用程式不再處理 `0` 顯示商店首頁時顯示為空白值。 之前，應用程式在請求路徑的開頭會將整數值視為儲存ID，這會對SEO造成非預期的影響。

<!-- MC-40313  magento/magento2#31970-->

* 外掛程式 `\Magento\Framework\App\ActionInterface` 在 `lib/internal/Magento/Framework/App/Action/Plugin` 已移除，以符合准則，告知應使用外掛程式來自訂另一個模組中某個模組的行為。 [GitHub-28050](https://github.com/magento/magento2/issues/28050)

<!-- MC-24772-->

* 當您嘗試選取 `Website` 預設時 `Store View` 在網站建立期間停用： `Please enable your Store View before using this Web Site as Default`. 之前網站當機，而應用程式未顯示警報。

### 稅

<!-- MC-39571-->

* 在驗證最低訂單金額期間，應用產品現在會考慮隱藏稅。

<!-- MC-38025 ENGCOM-8612-->

* 當購物者導覽回其購物車，並在將套裝產品新增至購物車後繼續結帳時，應用程式現在會如預期般顯示固定產品稅(FPT)。 [GitHub-30250](https://github.com/magento/magento2/issues/30250)

<!-- MC-37657 magento/magento2#31850-->

* 應用程式現在會預先填入 **增值稅編號** 管理員為現有客戶建立訂單時，「管理員新訂單」頁的「地址資訊」部分的開單地址和發運地址的輸入欄位將保存增值稅編號。 [GitHub-31846](https://github.com/magento/magento2/issues/31846)

<!-- ENGCOM-8617 magento-engcom/magento2ee#558-->

* 應用程式現在會顯示 **增值稅編號** 欄位，當 `customer/create_account/vat_frontend_visibility` 啟用。 [GitHub-31326](https://github.com/magento/magento2/issues/31326)

### 測試

<!-- MC-41393-->

* 測試環境已升級至Redis 6.0.12。

<!-- ENGCOM-8529-->

* 已移除 `CacheCleaner::cleanAll();` 從整合測試。 [GitHub-31074](https://github.com/magento/magento2/issues/31074)

<!-- ENGCOM-8898-->

* 已新增此案例的測試：當客戶訂閱佇列的電子報時，管理員使用者可以編輯客戶帳戶。 [GitHub-30645](https://github.com/magento/magento2/issues/30645)

<!-- ENGCOM-8484-->

* 移除 `cache:flush` 命令，以改進 `Catalog`, `CatalogUrlRewrite`，和 `LoginAsCustomer` 模組。 [GitHub-31056](https://github.com/magento/magento2/issues/31056)

<!-- ENGCOM-8499-->

* 已移除備援參數，且POST已變更為GET（如有需要） `\Magento\Logging\Model\ProcessorTest::testLoggingProcessorLogsActionShipping`.

### 主題

<!-- MC-41474-->

* 當 **將JS程式碼移至頁面底部** 設定(**商店** > **配置** > **進階** > **開發人員** > **JavaScript設定**)和cookie皆已啟用： `The store will not work correctly in the case when cookies are disabled`.

<!-- MC-40982-->

* 標題中的帳戶連結現已遵循WCAG標準。 以前，標題中的帳戶連結包含重複的ID，導致WCAG驗證失敗。

<!-- MC-40278-->

* 應用程式現在會優先處理商店標誌影像的商店配置而非佈局配置。 之前，標誌影像的大小是固定的，不會因商店而異。

<!-- MC-35227-->

* 應用程式現在會在使用標準Adobe Commerce主題的店面頁面上，一致地顯示頁面元素。 之前，並非所有樣式都已套用至空白主題，因此並非所有頁面元素都會使用此主題顯示在頁面中。 （例如，「我的訂單」頁面搜尋欄位中沒有放大鏡圖示。）

### 翻譯和地區設定

<!-- MC-23553 ENGCOM-8839-->

* 設定內嵌轉譯時，新增至字串的方括弧不再逸出。 之前， `escapeHtmlAttr` 方法將方括弧轉換為HTML實體代碼。 [GitHub-32000](https://github.com/magento/magento2/issues/32000)

<!-- ENGCOM-8694-->

* 管理員中不可翻譯的片語現在可翻譯。 （此提取請求有助於持續努力讓所有管理員字串都可本地化。） [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8584-->

* 用於管理儲存支付方法的模板中的文本字串(**我的帳戶**  >  **儲存的付款方法** )現在可翻譯。 [GitHub-31211](https://github.com/magento/magento2/issues/31211)

<!-- MC-30798 ENGCOM-8717-->

* 從管理員傳送的訂單電子郵件現在會使用商店地區，而非與管理員帳戶相關聯的地區。 [GitHub-26521](https://github.com/magento/magento2/issues/26521)

### UI

<!-- MC-41784-->

* 管理員頁尾現在會顯示正確的產品版本。

<!-- MC-41067-->

* 在建立管理員裝運期間，來源的分頁現在會如預期般顯示。

<!-- MC-40240-->

* 當您使用自訂日期屬性來篩選產品，且管理員使用者地區為時，產品格線篩選現在會正確運作 `en_GB`.

<!-- MC-39279-->

* 現在，iOS裝置上的產品頁面影像庫放大鏡中，縮放至縮放手勢可如預期運作。

<!-- MC-38787-->

* 管理員產品格線搜尋結果的分頁現在會如預期，從每個搜尋的第1頁開始。

<!-- MC-38423-->

* 已解決縮放時購物車顯示的異常。 以前，顯示元素在縮放此頁面時會重疊。

<!-- MC-38235 magento/partners-magento2ee#492 -->

* 「管理邀請」頁面上的標籤出現對齊問題(管理員 **行銷** > **私人銷售** > **邀請**)已解決。 之前，客戶已接受之邀請的標籤顯示內容不會對齊。 [GitHub-333](https://github.com/magento/partners-magento2ee/issues/333)

<!-- MC-38226 magento/magento2#32008-->

* 透過「PayPal Express結帳」結帳期間顯示的訂單審核頁面現在已成功載入。 之前，範本包含未使用的 **更新傳送方法** 按鈕，此按鈕在頁面呈現期間僅被指令碼部分隱藏。 [GitHub-32006](https://github.com/magento/magento2/issues/32006)

<!-- MC-37941 magento/magento2#31892-->

* 產品頁面的「客戶審核」區段中的評等星級和審核文字現在會在有冗長的評等名稱時適當間隔。 [GitHub-31890](https://github.com/magento/magento2/issues/31890)

<!-- MC-37688-->

* 「存檔發票」、「發運」和「貸項通知單」頁的「活動」下拉清單中，現在將按預期顯示選項。

<!-- MC-23729  magento/magento2#31549-->

* 應用程式現在會在 `datetime` 元件 `timeOnly` 選項設為 **是**. [GitHub-23157](https://github.com/magento/magento2/issues/23157)

<!-- ENGCOM-8514 -->

* 現在，在「管理員」上建立新介面工具集後，您可以移除版面更新 **內容** > **介面工具集**.  [GitHub-29936](https://github.com/magento/magento2/issues/29936)

<!-- ENGCOM-8502 MC-35716-->

* 此 **刪除佈局更新** 按鈕現在可如預期般在您從管理員新增的任何版面上運作 **內容** > **介面工具集**. 以前，新增多個配置時，此按鈕無法用於第一個選取的配置以外的任何配置。 [GitHub-30286](https://github.com/magento/magento2/issues/30286)

<!-- ENGCOM-8524 -->

* 應用程式現在會使用配置檔案中設定的頁面標題，作為客戶帳戶編輯檔案的瀏覽器頁面標題。 之前， `Magento\Customer\Controller\Account\Edit` 控制器動作將頁面標題值強制為 `Account Information`. [GitHub-30724](https://github.com/magento/magento2/issues/30724)

<!-- ENGCOM-8896 8826-->

* 允許商戶在顯示和隱藏密碼之間切換的核取方塊已新增至下列頁面：
   * 客戶登入
   * 客戶註冊
   * 客戶編輯（「更改密碼」部分）
   * 客戶設定新密碼 [GitHub-31557](https://github.com/magento/magento2/issues/31557)

<!-- ENGCOM-8545 -->

* 移除網格儲存格中的備援標題，此標題在管理員變更屬性集後將產品新增至分組產品集時顯示。 [GitHub-30911](https://github.com/magento/magento2/issues/30911)

<!-- ENGCOM-8895 -->

* 應用程式現在會顯示 `DateRange` 篩選 **客戶**  >  **登入** 頁面。 之前，應用程式會顯示 `Text` 篩選。 [GitHub-30328](https://github.com/magento/magento2/issues/30328)

<!-- ENGCOM-9009 -->

* JavaScript已從範本檔案中移除，並移至個別檔案中，以減少管理頁面上的轉譯問題。 過去，在已啟用HTML縮制的部署中，管理頁面無法正確呈現。 應用程式顯示此錯誤： `An error has happened during application run. See exception log for details`. [GitHub-32454](https://github.com/magento/magento2/issues/32454)

<!-- ENGCOM-9044 -->

* 此 `dropdownDialog` 介面工具集現在只會載入可拖曳和可調整大小 `jquery-ui` 它需要的塊。 以前，它載入了大量不必要的代碼，這會誇大載入時間並降低效能。 [GitHub-32810](https://github.com/magento/magento2/issues/32810)

### URL重新寫入

<!-- MC-41550-->

* 現在，在透過大量更新將產品指派給網站後，多網站部署中特定網站的產品URL重新寫入會如預期產生。

<!-- MC-40780 magento/magento2#32598-->

* 現在，當 **使用預設值** 已為父類別啟用URL鍵的核取方塊。 以前，在階層中移動類別會導致錯誤 `url_path` 值。 [GitHub-16202](https://github.com/magento/magento2/issues/16202)

<!-- MC-40371-->

* 應用程式現在會更新 `url_path` 在類別層次結構中移動類別時分配給所有儲存範圍的類別。 以前，在階層中移動類別會導致錯誤 `url_path`.

<!-- MC-39463-->

* 使用自訂URL從管理員建立的URL重新導向現在可以成功運作。 之前，GraphQL會快取來自GraphQL的回應 `urlResolver` 查詢，並在URL重寫更新後傳回舊值。

<!-- MC-38931  magento/magento2#31106-->

* 現在從網站移除產品時，產品URL重寫會如預期移除。 [GitHub-24184](https://github.com/magento/magento2/issues/24184)

<!-- ENGCOM-8719 -->

* 新增 `main_table` 參考 `store_id` 在 `addStoreFilter` 函式 `app/code/Magento/UrlRewrite/Model/ResourceModel/UrlRewriteCollection.php` 集合。 以前，每當 `join` 會新增至表格上的集合，而表格中也包含 `store_id` 欄。 [GitHub-31853](https://github.com/magento/magento2/issues/31853)

<!-- ENGCOM-8894 -->

* 此 `PUT /V1/products/:sku` REST端點現在會如預期重新產生產品URL重新寫入。 以前，端點會重新產生產品 `url_key` 值而非URL會重新寫入。 [GitHub-30316](https://github.com/magento/magento2/issues/30316)

### 使用者

<!-- MC-40777  magento/magento2#31998-->

* 您現在可以儲存有效的新使用者角色(管理員 **系統** > **權限** > **使用者角色**)和 `Catalog` 所選樹排除 `Edit Product Design` ( **目錄** > **庫存** > **產品** > **編輯產品設計**)。 之前，應用程式不會儲存此角色中使用者所做的產品變更，並顯示此錯誤： `Not allowed to edit the product's design attributes`. [GitHub-31973](https://github.com/magento/magento2/issues/31973)

<!-- MC-38442-->

* 為新管理員產生電子郵件時，應用程式現在會使用正確的自訂電子郵件範本。 以前，應用程式使用舊的預設模板，該模板忽略了管理員的名字和姓氏。

<!-- MC-38122-->

* 現在，當傳送電子郵件給新使用者時，應用程式會使用正確的電子郵件範本。 以前，即使選擇了自定義模板，應用程式仍使用預設模板。

### 版本CMS

<!-- MC-39953-->

* 現在，在您更改CMS頁面佈局後，應用程式將正確的主題應用到該頁面。 以前，在您儲存版面變更後，應用程式會將指派的主題變更為Luma，無論哪個主題已指派給頁面皆然。

<!-- MC-40431-->

* 具有限制角色的管理員現在可以成功新增、更新或複製指派給階層節點之他有權存取的頁面。 以前，應用程式在這些條件下會擲出致命錯誤。

### 影片

<!-- MC-42059 ENGCOM-9039-->

* 現在，當啟用和使用進階JavaScript捆綁時，視訊可如預期在產品庫中提供。 [GitHub-32501](https://github.com/magento/magento2/issues/32501)

<!-- ENGCOM-8532-->

* 屬於可設定產品的簡單產品的YouTube影片現在可如預期般運作。 以前影像是依ID排序，而非依位置排序。 因此，有些視頻被視為影像。 [GitHub-29690](https://github.com/magento/magento2/issues/29690)

### Visual Stulder

<!-- MC-40797-->

* 使用Visual Stlider載入「管理員」類別頁面的效能已有所改善。 載入管理類別頁面不再產生大型資料庫查詢。

### Web API架構

<!-- MC-41758-->

* 目錄API現在可新增新值並移除舊值，以正確更新產品的自訂選項值。 過去，API並未刪除舊值。

<!-- MC-34431-->

* POST `/V1/guest-carts/:cartId/billing-address` 現在會以整數傳回位址ID，而非字串。

### 網站限制

<!-- MC-38516-->

* 系統現在會將購物者重新導向至他們嘗試存取的頁面，之後才會提示他們登入。 以前，在啟用網站限制且將限制模式設為的部署中 **私人銷售：僅登入**，購物者會重新導向至商店首頁。

### 介面工具集

<!-- MC-39128-->

* 管理員現在可以刪除介面工具集的所有版面更新。 以前，當介面工具集有多個版面更新時，管理員只能刪除第一個版面更新。

<!-- MC-39107-->

* 按一下 **新增至購物車** 「產品介面工具集」上的「 」按鈕不再導致頁面重新載入。 之前，按一下 **新增至購物車** 「產品介面工具集」上的「 」按鈕會在產品新增至購物車之前，導致目前頁面重新載入。

<!-- MC-23590-->

* TinyMCE中的CMS階層節點連結介面工具集現在會在 **錨點自訂文字** 欄位為空。

### 願望清單

<!-- MC-40651 ENGCOM-8769-->

* 當您按一下 **編輯項目** 按鈕。 [GitHub-32119](https://github.com/magento/magento2/issues/32119)

<!-- MC-40417-->

* 現在，當您使用願望清單中的可自訂檔案選項更新產品時，應用程式會顯示正確的產品價格。 之前，應用程式顯示的產品價格錯誤，且未顯示上傳檔案的連結。

<!-- MC-39060-->

* 具有多個願望清單之客戶的願望清單中的產品總數現在符合願望清單中的項目數。 過去，無庫存產品會納入產品總數中。

<!-- MC-36779 magento/magento2#31110-->

* 現在，應用程式會在將產品新增至訂單後，從願望清單中移除產品。 [GitHub-30260](https://github.com/magento/magento2/issues/30260)

<!-- MC-34456 ENGCOM-8816-->

* 購物者現在可以從願望清單將相關產品新增至購物車。 以前，當購物者按一下 **全選** 「相關產品」區段的連結。 [GitHub-32274](https://github.com/magento/magento2/issues/32274)

## 已知問題

**問題**: _reCAPTCHA停用時出現JavaScript錯誤_. 如果結帳時停用了reCAPTCHA，結帳會繼續，但應用程式會顯示 `Uncaught TypeError` 控制台日誌中出錯。  此問題將在稍後的版本中修正。 <!-- MC-42589 42649-->

**問題**: _內容安全性原則錯誤_. storefront在控制台日誌中顯示以下錯誤： `The Content-Security-Policy directive frame-ancestors does not support the source expression unsafe-inline`. 店面效能不受影響。 <!-- MC-42613-->

**問題**: _禮品卡金額的PayPal信用顯示異常_. 啟用PayPal信用並配置多個禮品卡金額時，如果購物者更改禮品卡價值的金額，則店面不會更新分期付款的金額。 Adobe Commerce 2.4.4和Magento Open Source2.4.4將修正此問題。<!-- MC-42499 AC-344-->

**問題**:  _此&#x200B;**按順序添加**按SKU新增至購物車的產品無法使用按鈕_.  當您按一下 **按順序添加** 按SKU向訂單中添加產品後按鈕： `An error has happened during application run`. 產品不會新增至購物車。 **因應措施**:使用「新增產品」功能。 <!-- AC-345-->

**問題**:GraphQL `category` 和 `categoryList` 查詢會忽略類別權限，該權限決定共用目錄中的類別是隱藏還是公開。 店面目前會顯示已指派或未指派給共用目錄的所有類別。 這會影響Adobe Commerce 2.4.3部署，這些部署會實作已啟用B2B共用目錄的PWA店面。 <!-- MC-42528-->

## 社群投稿

我們感謝廣大的Magento Open Source社群，並感謝他們對本版的貢獻。

社群工程團隊 [Magento貢獻者](https://magento.com/magento-contributors) 依月、季和年維護最佳貢獻個人和合作夥伴的清單。 在該「貢獻者」頁面中，您可以在GitHub上追蹤合併PR的連結。

### 合作夥伴貢獻

下表重點介紹合作夥伴的貢獻。 下表列出提取請求、外部提取請求以及與其相關聯的GitHub問題編號（若有）的貢獻者。

{{$include /help/_includes/release-notes/engcomm-2-4-3-partner.md}}

### 個人貢獻者貢獻內容

下表列出社群成員的貢獻。 下表列出外部提取請求、與其相關聯的GitHub問題編號（若有），以及提供提取請求的社群成員。

{{$include /help/_includes/release-notes/engcomm-2-4-3-issues.md}}

### 系統需求

我們的技術堆棧構建在PHP和MySQL上。 如需詳細資訊，請參閱 [系統需求](../../../installation/system-requirements.md).

### 安裝和升級指示

您可以使用 [撰寫器](../../../installation/composer.md).

## 遷移工具包

資料移轉工具可協助將現有Magento1.x儲存資料至Magento2.x。此命令列介面包括驗證、進度追蹤、記錄和測試功能。 如需安裝指示，請參閱 [安裝資料移轉工具](../../../tools/data-migration-tool/install.md). 考慮探索或協助 [資料移轉存放庫](https://github.com/magento/data-migration-tool).

此 [代碼遷移工具包](https://github.com/magento-commerce/code-migration) 協助將現有Magento1.x儲存擴充功能和自訂項目傳輸至Magento2.x。命令行介面包括用於轉換Magento1.x模組和佈局的指令碼。
