---
title: Adobe Commerce 2.4.3發行說明
description: 瞭解2.4.3 Adobe Commerce版本中的新功能、增強功能、錯誤修正和已知問題。
exl-id: 34b1248f-a44e-489b-94ae-945d31abecea
source-git-commit: 2e62c49dd0c338f0913ce5f725f396c2cfa95122
workflow-type: tm+mt
source-wordcount: '15112'
ht-degree: 0%

---

# Adobe Commerce 2.4.3發行說明

Adobe Commerce 2.4.3引進了效能和安全性的增強功能，以及重要的平台改善。 安全性增強功能包括擴充reCAPTCHA涵蓋範圍及納入內建速率限制。 核心撰寫器相依性和協力廠商程式庫已升級至與PHP 8.x相容的最新版本。

此版本包含370多項核心程式碼的新修正及33項安全性增強功能。 此版本已修正Adobe Commerce 2.4.2發行說明中確認的所有已知問題。

{{bics}}

如需Adobe Commerce 2.4.2-p2的相關資訊，請參閱[Adobe Commerce 2.4.2-p2發行說明](../security/2-4-2-patches.md)。

## 其他發行資訊

雖然這些功能的程式碼已隨季度發行套件提供，但其中幾個專案(例如B2B、Page Builder和Progressive Web Applications (PWA) Studio)也獨立發行。 這些專案的錯誤修正記錄在每個專案檔案中提供的個別專案特定發行資訊中。

## 套用MC-43048__set_rate_limits__2.4.3.patch以解決API速率限制問題

此Hotfix針對Web API無法處理陣列中包含超過20個專案的請求問題提供解決方案。 此問題會影響執行Magento Open Source 2.4.3、Adobe Commerce 2.4.3或2.3.7-p1的部署。 在這些版本中新增內建速率限制，以防止拒絕服務(DoS)攻擊，且預設上限設為20。 此修補程式將預設限制回覆為較高的值。 如果您懷疑您的存放區遭受DoS攻擊，Adobe建議將預設輸入限制降低至較低的值，以限制可請求的資源數量。 檢視[Web API無法處理陣列](https://support.magento.com/hc/en-us/articles/4406893342093)知識庫文章中超過20個專案的要求。

## 套用AC-384__Fix_Incompatible_PHP_Method__2.4.3_ce.patch以解決升級時發生的PHP嚴重錯誤

升級至Adobe Commerce 2.4.3期間可能會發生下列嚴重錯誤：

```
PHP Fatal error: Uncaught Error: Call to undefined function Magento\Framework\Filesystem\Directory\str_contains() in [...]/magento/vendor/magento/framework/Filesystem/Directory/DenyListPathValidator.php:74
```

此錯誤是因為使用`str_contains`函式所造成，該函式是PHP 8.x函式。 Adobe Commerce 2.4.3不支援PHP 8.x。此Hotfix會以支援的PHP 7.x函式取代此函式。 請參閱[Adobe Commerce升級2.4.3、2.3.7-p1 PHP嚴重錯誤Hotfix](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix)知識庫文章。

## 套用AC-3022.patch以繼續提供DHL作為運送業者

DHL已匯入schema 6.2版，並將在不久的未來淘汰schema 6.0版。 支援DHL整合的Adobe Commerce 2.4.4及舊版僅支援6.0版。部署這些版本的商戶應儘早套用`AC-3022.patch`，以繼續提供DHL作為運送承運商。 請參閱[套用修補程式，以繼續提供DHL作為運送業者](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier)知識庫文章，以取得有關下載和安裝修補程式的資訊。

## 反白顯示

請檢視此版本中的下列重點專案。

### 大幅增強安全性

此版本包含33項安全性修正和平台安全性改善。 其中許多安全性修正已反向移植至2.4.2-p2和2.3.7-p1。

#### 協助關閉遠端程式碼執行(RCE)和跨網站指令碼(XSS)弱點的33項安全性增強功能

目前尚未發生與這些問題相關的已確認攻擊。 但是，某些漏洞可能會被用來存取客戶資訊或接管管理員工作階段。 這些問題大多需要攻擊者先取得Admin的存取權。 因此，我們提醒您採取一切必要步驟來保護您的管理員，包括但不限於：IP允許清單、[雙因素驗證](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)、使用VPN、使用唯一位置而非`/admin`以及良好的密碼衛生。 如需這些已修正問題的討論，請參閱[Adobe安全性公告](https://helpx.adobe.com/tw/security/products/magento/apsb21-64.html)。

#### 其他安全性增強功能

此版本的安全性改善專案可改善對最新安全性最佳實務的合規性，包括：

* **新的Composer外掛程式**&#x200B;有助於防止相依性混淆，並識別與公用套件存放庫上的內部套件具有相同名稱的惡意套件。 請參閱[Adobe發行包含2.4.3版](https://magento.com/blog/best-practices/adobe-releases-new-composer-plugin-magento-243-release)部落格的新撰寫器外掛程式。

* **現已內建於API**，以防止拒絕服務(DoS)攻擊。 Web API現在會限制使用者端可請求的資源大小或數量（預設上限設為20，並可根據業務需求設定為不同的值）。 請參閱[速率限制](https://developer.adobe.com/commerce/webapi/get-started/api-security/)，以取得設定這些限制的資訊。<!-- MC-35358-->

* **ReCAPTCHA涵蓋範圍已延伸**&#x200B;以包含：

   * 擁有對應HTML頁面的網頁API會透過ReCAPTCHA涵蓋。 （這不包括透過整合存取的網頁API。） ReCAPTCHA涵蓋範圍可保護端點不受垃圾郵件攻擊。 當使用OAuth的協力廠商整合服務存取Web API時，ReCAPTCHA會停用。<!-- MC-34472-->

   * 下單店面頁面和付款相關網頁API。 預設會停用這些頁面的ReCAPTCHA保護，並可從管理員啟用。 此涵蓋範圍新增了反暴力機制，可保護存放區免受梳理攻擊。

{{cve-notice}}

### 基礎架構改良

此版本包含可改善框架品質的增強功能，以及下列功能區域：

* 客戶帳戶

* 目錄

* CMS

* OMS

* 匯入/匯出

* 促銷活動和目標定位

* 購物車與結帳

* B2B

* 測試和預覽

包含PayPal的部署現在支援&#x200B;**PayPal Pay Later**。 此功能可讓購物者以雙週分期付款的方式支付訂單，而不需在購買時支付全額。<!-- MC-40556-->

**新`use_application_lock`索引模式**。 `use_application_lock`模式可讓您透過使用環境變數或透過設定`app/etc/env.php`檔案來啟用重新索引。 啟用此模式後，您就不需要在失敗後手動重設索引器。 請參閱[使用應用程式鎖定模式重新索引處理序](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes)。

### 平台增強功能

2.4.3版尚未與PHP 8.x相容，但後續的平台升級使我們更接近未來與PHP 8.x的相容性。

* 核心撰寫器相依性和協力廠商程式庫已升級至與PHP 8.x相容的最新版本。<!-- MC-39514-->

* KnokoutJS資料庫已升級至v3.5.1 （最新版本）。<!-- MC-40694-->

* 已遭取代的TinyMCE v3程式庫已移除。 與TinyMCE v3.x相關的`Magento_Tinymce3Banner`模組和MFTF測試已從Adobe Commerce中移除。<!-- MC-42199 42170 -->

* 版本2.4.3已經過測試並被確認與Redis 6.0.12相容。 （版本2.4.x仍與Redis 5.x相容。）

* Laminas程式庫相依性已升級為PHP 8.x相容版本。 已從`composer.json`檔案中移除部分多餘的相依性。 **Adobe Commerce 2.4.3使用Laminas 3.4.0**。<!-- MC-39513-->

### 效能增強功能

此版本包含增強功能，可縮短產品價格和目錄規則索引器的索引時間。 商戶現在可以從客戶群組或共用目錄中排除網站，這減少了索引的記錄數量，並縮短了索引時間。

### 即時搜尋

由[Adobe Sensei](https://experienceleague.adobe.com/zh-hant/docs/commerce/live-search/overview)支援的[即時搜尋](https://www.adobe.com/sensei.html)使用人工智慧和機器學習演演算法，對彙總的訪客資料執行深入分析，提供直覺式的搜尋體驗。 請參閱[即時搜尋發行說明](https://experienceleague.adobe.com/docs/commerce/live-search/release-notes.html?lang=zh-Hant)。

### GraphQL

此發行版本新增GraphQL對下列功能的支援：

* **共用目錄**<!-- PWA-1294-->

* **願望清單**。 [addWishlistItemsToCart突變](https://developer.adobe.com/commerce/webapi/graphql/schema/wishlist/mutations/add-items-to-cart/)會將專案從指定的希望清單移至客戶的購物車。<!-- magento/partners-magento2ee#449-->

* **禮品登記簿**。 涵蓋的任務包括： <!-- PWA-1290-->

   * 使用[giftRegistry查詢](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/queries/gift-registry/)傳回客戶禮品註冊的內容。

   * 依[型別](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/queries/type-search/)、[電子郵件](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/queries/email-search/)或[識別碼](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/queries/id-search/)搜尋禮品登錄檔。

   * [建立](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/mutations/create/)、[更新](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/mutations/update/)或[刪除](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/mutations/remove/)禮品登入。

   * [更新](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/mutations/update-items/)或從禮品登入中[移除](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/mutations/remove-items/)專案。

   * [將所有專案](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/mutations/move-cart-items/)從購物車移至贈品登入。<!-- ENGCOM-9082 9087-->

   * [新增](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/mutations/add-registrants/)、[更新](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/mutations/update-registrants/)或是[從禮品登入中移除](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/mutations/remove-registrants/)個註冊者。

   * [與受邀者共用](https://developer.adobe.com/commerce/webapi/graphql/schema/gift-registry/mutations/share/)禮品登入。

* **可協商的引號**。 檢視[`negotiableQuote`](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/negotiable-quote/queries/quote/)和[`negotiableQuotes`](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/negotiable-quote/queries/quotes/)查詢。<!-- PWA-1292-->

  新的變動包括：

   * [`requestNegotiableQuote`](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/negotiable-quote/mutations/request/)

   * [`setNegotiableQuoteShippingAddresses`](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/negotiable-quote/mutations/set-shipping-address/)

   * [`updateNegotiableQuoteQuantities`](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/negotiable-quote/mutations/update-quantities/)

   * [`removeNegotiableQuoteItems`](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/negotiable-quote/mutations/remove-items/)

   * [`closeNegotiableQuotes`](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/negotiable-quote/mutations/close/)

   * [`deleteNegotiableQuotes`](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/negotiable-quote/mutations/delete/)。

* **共用路由**。 [路由查詢](https://developer.adobe.com/commerce/webapi/graphql/schema/products/queries/route/)和[RoutableInterface](https://developer.adobe.com/commerce/webapi/graphql/schema/products/interfaces/routable/)支援產品、類別和CMS頁面上的路由要求。 `urlResolver`查詢已過時，其功能已由`route`查詢取代。

如需這些增強功能的詳細資訊，請參閱[GraphQL開發人員指南](https://developer.adobe.com/commerce/webapi/graphql/)。

### B2B

2.4.3版引入B2B v1.3.2。此版本包含多項錯誤修正。 請參閱[B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html?lang=zh-Hant)。

### 頁面產生器

頁面產生器現在可作為Magento Open Source中的套件擴充功能使用。 它現在是Adobe Commerce 2.4.3和Magento Open Source 2.4.3的預設內容編輯工具。它可以用任何第三方模組取代WYSIWG編輯器。

「頁面產生器」會在下列「管理」區域中取代TinyMCE編輯器：

* CMS頁面
* CMS區塊
* 類別說明
* 產品說明

在TinyMCE中建立的所有內容都以HTML的形式移轉至頁面產生器。

### PWA Studio

如需有關增強功能和錯誤修正的資訊，請參閱[PWA Studio發行版本](https://github.com/magento/pwa-studio/releases)。 如需PWA Studio版本及其相容版本的清單，請參閱[相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/)。

### 升級相容性工具

[升級相容性工具](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html?lang=zh-Hant)的範圍已根據社群的意見展開。 加入我們的[#upgrade-compatibility-tool](https://magentocommeng.slack.com/archives/C019Y143U9F) Slack頻道，取得Adobe產品團隊和社群的支援，並幫助指引工具的未來方向。

### Cloud Managed Services更新

此版本包含我們對Amazon Simple Storage Service (AWS S3)和Amazon Aurora雲端受管服務的支援增強功能。 它為AWS ElastiCache、AWS Elasticsearch和AWS Managed Queue (Rabbit MQ)提供經認證的支援。 (我們已測試這些服務的功能、效能，以及與Adobe Commerce的整合。)

### Adobe Stock整合

此版本包含Adobe Stock整合v2.1.1。

### 廠商開發的擴充功能

請參閱下列主題，瞭解此版本功能和變更的更新：

* [Amazon支付](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)。 Amazon Pay已淘汰，並將在較新的2.4.x版本中移除。 2.4.3版及更新版本將僅包含相容性的更新及主要錯誤的修正。

* [Braintree](https://experienceleague.adobe.com/zh-hant/docs/commerce-admin/stores-sales/payments/braintree)

* [dotdigital Engagement Cloud](../../../upgrade/modules/upgrade.md)

* [Klarna](https://marketplace.magento.com/klarna-m2-klarna.html)

* [頂點雲](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Yotpo產品評論](../../../upgrade/modules/upgrade.md)

## 已修正的問題

我們已修正2.4.3核心程式碼中的數百個問題。

### 安裝、升級、部署

<!-- MC-41154-->

* `bin/magento setup:db:status`命令現在會傳回訊息，指出成功升級後一切都是最新狀態。 以前，應用程式顯示這個錯誤： `Declarative Schema is not up to date`。

<!-- MC-40031 -->

* 現在，當建立新的可設定產品失敗時，會在表單重新載入時保留設定值。 先前，表單重新載入期間會遺失值，而應用程式會顯示此錯誤： `The value specified in the URL Key field would generate a URL that already exists`。 [GitHub-32102](https://github.com/magento/magento2/issues/32102)

<!-- MC-37596-->

* 當您執行`bin/magento setup:upgrade`從具有Redis的Magento Open Source部署升級至Adobe Commerce時，應用程式不再擲回例外狀況。

<!-- MC-34453-->

* 將部署從Magento Open Source升級為Adobe Commerce後，先前建立的購物車價格規則現在會顯示在內容測試儀表板頁面上。

<!-- ENGCOM-8508 -->

* 在Galera叢集上執行的部署現在可支援更多客戶。 [GitHub-31038](https://github.com/magento/magento2/issues/31038)

<!-- ENGCOM-9036 MC-41938 -->

* 當應用程式已經以`—use-rewrites=0`選項安裝，或在`web/seo/use_rewrites`中將`core_config_data_table`設定為0時，管理員現在可以成功登入部署。 [GitHub-32100](https://github.com/magento/magento2/issues/32100)

<!-- ENGCOM-8451 -->

* 已更新`sortOrder`的`AsyncCssPlugin`載入。 應用程式現在會在`AsyncCssPlugin`之前載入`JsFooterPlugin`。 [GitHub-30882](https://github.com/magento/magento2/issues/30882)

<!-- ENGCOM-8701 -->

* `Magento\Config\Model\Config\PathValidator`現在會檢查顯示路徑以判斷專案是否存在，如果專案具有設定路徑，則會改用`config.xml`路徑進行驗證。 [GitHub-27678](https://github.com/magento/magento2/issues/27678)

<!-- ENGCOM-8684 -->

* 使用Grunt或伺服器端編譯編譯來編譯較少檔案現在會產生相同的結果。 先前版本。 使用Grunt編譯時，延伸`.abs- styles`中其他`.abs- styles`的`_extends.less`無法正確輸出。 這會導致生產部署與開發部署之間的差異。 [GitHub-7231](https://github.com/magento/magento2/issues/7231)

### AdminGWS

<!-- MC-40703-->

* 管理員GWS現在為具有自訂許可權之管理員在管理員集合中使用`int` SQL條件的`website_id`值。

### Adobe Stock整合

<!-- MC-39754-->

* 當&#x200B;**API金鑰（使用者端ID）**&#x200B;和&#x200B;**使用者端密碼**&#x200B;未設定時，應用程式現在會在「搜尋Adobe Stock」頁面上，顯示資訊訊息以及管理員&#x200B;**商店** > **設定** > **進階** > **系統**&#x200B;的連結。 以前，應用程式顯示這個錯誤： `We couldn't find any records`且沒有連結。

### 後端

<!-- MC-40389-->

* 具有受限制存取權（例如，僅被指派存取一個網站的管理員）的管理員無法再編輯設定為全域範圍的類別。

<!-- MC-39037-->

* 產生的系統報告（**系統** > **支援** > **系統報告**）現在已正確呈現。 之前，報表內容不會對齊。

<!-- MC-30152 ENGCOM-8625-->

* 當套件產品建立期間啟用&#x200B;**動態價格**&#x200B;設定時，應用程式現在會依預期關閉&#x200B;**價格**&#x200B;欄位的驗證。 先前，啟用&#x200B;**動態價格**&#x200B;設定時，應用程式在您從&#x200B;**價格**&#x200B;欄位中移除值時擲回驗證錯誤。 [GitHub-26214](https://github.com/magento/magento2/issues/26214)

<!-- MC-24840-->

* 當部署中的管理員URL與預設網站URL不同時，無限重新導向不再發生，應用程式會設定為可從兩個URL存取。

### 套裝產品

<!-- MC-41810-->

* 您現在可以使用`addProductsToCart`突變，將包含多個核取方塊選項的組合產品新增到購物車中。

<!-- MC-41614-->

* 現在，使用暫存表格執行套件產品的價格索引，可避免鎖定資料庫表格。 以前，應用程式使用實體表格，導致鎖定表格。

<!-- MC-41177 magento/magento2#32594-->

* 套件組合專案的價格現在可以設為0.00。先前，當您在設定價格為0.00之後返回編輯頁面時，價格會傳回其預設值。 [GitHub-32383](https://github.com/magento/magento2/issues/32383)

<!-- MC-40603-->

* 現在，如果價格在訂購之前已變更，則包含搭售產品的訂單的訂單詳細資料會顯示搭售產品的正確價格。

<!-- MC-40035-->

* 現在，會根據其子產品的庫存狀態來更新套件組合產品庫存狀態。 先前，當從產品中移除一個選項時，套件組合產品會顯示為無庫存，且套件組合產品具有兩個具有相同SKU的選項。

<!-- MC-39276-->

* 將套件產品移至其他屬性群組後，管理員現在可以變更套件產品`Shipment Type`屬性的值。 以前，如果此屬性被移動到屬性集中預設群組以外的屬性群組，則一律會以`Together`值儲存。

<!-- MC-38900-->

* GraphQL `setGuestEmailOnCart`突變現在可以正確更新來賓電子郵件。 以前，報價和報價地址表格不會更新。

<!-- MC-37719-->

* 透過REST API呼叫新增、移除或更新子產品至套件組合產品現在會如預期觸發重新索引。 以前，這些動作不會觸發重新索引，因此，在執行手動重新索引之前，捆綁產品不會變更其庫存狀態。

<!-- MC-35725 ENGCOM-8568-->

* 應用程式現在會顯示具有層級價格的套件組合產品的正確價格範圍。 [GitHub-30284](https://github.com/magento/magento2/issues/30284)

<!-- MC-35638-->

* 套裝選項的價格變更後，應用程式現在會在購物車頁面和結帳工作流程的出貨步驟中顯示相同的總價。

<!-- MC-32617-->

* 您現在可以從客戶購物車存取套件組合產品以成功設定該產品。 以往， 「設定產品」頁面從未完全載入，且您無法儲存設定。

<!-- MC-30317 ENGCOM-7141-->

* 商戶現在可以在多商店部署的每個商店檢視上，為套件產品指定唯一價格。 網站特定價格儲存在`catalog_product_bundle_selection_price`表格中。 先前，即使當&#x200B;**商店** > **組態** > **目錄** > **目錄** > **價格** > **目錄價格範圍**&#x200B;設定為`Website`，應用程式也不會將套件組合產品的價格設定在網站範圍上。 `catalog_product_bundle_selection_price`中未儲存任何網站特定價格。 [GitHub-12584](https://github.com/magento/magento2/issues/12584)

<!-- ENGCOM-8705 MC-38953-->

* 當停用&#x200B;**動態定價**&#x200B;時，組合產品的商業發票現在會顯示相關簡單產品的正確數量。 以前，與組合產品相關聯的簡單產品具有父產品的數量，而不是組合產品的數量)。 [GitHub-30802](https://github.com/magento/magento2/issues/30802)

<!-- magento/magento2#30374 MC-36930-->

* `updateProductsInWishlist`突變現在已成功更新屬於希望清單中組合產品的專案。 以前，這個變異不是更新希望清單專案，而是刪除該專案並建立新的專案，從而變更了專案ID。

<!-- MC-38575-->

* 使用`required_options`端點建立或更新套件組合產品時，您現在可以依照預期設定`has_options`和`POST /V1/product/:sku`套件組合屬性。 以前，這些自訂屬性設定為0 （零），儘管努力將其設為1 （一）。

<!-- MC-38483-->

* 先前遺失的套件產品資料現在會納入測試程式。 如此可解決當購物者從產品清單頁面購買套裝產品而不是直接從產品頁面新增產品時，產品行為的不一致問題。

### 快取

<!-- ENGCOM-8554-->

* 已更新`varnish6.vcl`檔案以略過客戶頁面的快取。

### 驗證碼

<!-- MC-41572-->

* 現在，驗證碼可正確驗證購物者提供的資料，且購物者多次嘗試透過PayPal Payflow Pro結帳失敗後，驗證碼欄位現在會如預期般顯示。

<!-- MC-41281-->

* 驗證碼驗證不會在結帳工作流程的付款頁面上隨機失敗。

<!-- MC-41001-->

* 在您超過失敗的完成嘗試次數後，應用程式現在會如預期顯示驗證碼欄位。 以前，雖然應用程式提示您再次嘗試驗證碼質詢，它不會顯示驗證碼欄位。

<!-- MC-40359-->

* 驗證碼現在可在結帳頁面上如預期運作。 先前，在購物者正確回應驗證碼質詢後，結帳頁面上的載入器從未完成，且應用程式會顯示此錯誤： `captchaData[formId] is undefined`。 （只有在購物者使用先前存取執行2.3.5-p1之部署的相同瀏覽器時，才會發生此錯誤。）

<!-- ENGCOM-8630-->

* `_.isEmpty()`簽入`defaultCaptcha.js`檔案現在已成功完成。 以前，這些檢查未完成，因此，升級後無法載入簽出頁面。 [GitHub-31641](https://github.com/magento/magento2/issues/31641)

### 購物車與結帳

<!-- MC-41911-->

* 現在，在轉換和更新購物車中的產品數量時，應用程式會考慮地區設定的特定小數位數。

<!-- MC-41574-->

* 訂單不再忽略已提供且有運送地址的客戶名稱。 以前，會省略名稱，因為`same_as_billing`旗標未儲存在資料庫中。

<!-- MC-40946-->

* 現在，當您編輯購物車中的產品時，會如預期般持續提供禮品註冊連結。 先前，當您按一下&#x200B;**更新購物車**&#x200B;按鈕時，這些連結會消失。

<!-- MC-40696-->

* 在刪除數個產品後，消費者`quoteItemCleaner`的所有佇列訊息現在都會如預期將狀態變更為`complete`。 之前，此消費者只有一則訊息將其狀態變更為`complete`，其餘訊息則將其狀態變更為`in progress`。

<!-- MC-40657-->

* 應用程式現在只有在購物者按一下&#x200B;**下訂單**&#x200B;按鈕時，才會顯示相關區塊中的條款與條件驗證訊息。 以前，當購物者在結帳工作流程中變更付款方式時，應用程式會在「套用折扣代碼」區塊中顯示此訊息： `The order wasn't placed. First, agree to the terms and conditions, then try placing your order again`。

<!-- MC-40271 magento/partners-magento2ee#476-->

* 從「排程更新」預覽新增套件產品至購物車並按一下購物車後，您現在會如預期重新導向至結帳頁面。 [GitHub-447](https://github.com/magento/partners-magento2ee/issues/447)

<!-- MC-39581-->

* 如果購物者無法按一下&#x200B;**更新**&#x200B;按鈕並返回送貨步驟，應用程式現在會捨棄結帳付款步驟上的帳單地址表單變更。

<!-- MC-39517  magento/partners-magento2ee#460-->

* 當購物者新增無效的產品數量並按一下「管理購物車」頁面上的&#x200B;**更新專案與數量**&#x200B;按鈕時，應用程式現在會顯示資訊性錯誤訊息，而不會更新產品數量。 以前，應用程式會升級產品數量，並且不會顯示錯誤訊息。 [GitHub-459](https://github.com/magento/partners-magento2ee/issues/459)

<!-- MC-37807 ENGCOM-8530-->

* 具有可自訂選項`(File)`的產品，現在會在多送貨結帳程式中如預期包含作用中的連結。 之前缺少此連結。 [GitHub-31095](https://github.com/magento/magento2/issues/31095)

<!-- MC-37689-->

* Admin購物車現在會針對支援多種貨幣的商店，以正確貨幣顯示產品價格。 先前，價格會多次轉換為指定的貨幣 — 先是從店面將產品新增到購物車時，然後在管理員其後轉譯訂單時再次轉換。

<!-- MC-36703  magento/partners-magento2ee#439-->

* 在管理員完成由店面購物者建立的管理員訂單後，應用程式現在會依預期清空購物車。 先前，當客戶在管理員完成訂單後重新登入時，店面購物車仍包含訂單內容。 [GitHub-30262](https://github.com/magento/magento2/issues/30262)

<!-- MC-35640-->

* 購物者現在可以將最低廣告價格(MAP)超過一般產品價格的商品新增到購物車中。

<!-- MC-35289-->

* 現在，使用多個地址結帳時，購物者可以從結帳工作流程成功變更其帳單地址。

<!-- MC-29335-->

* 來賓建立的所有付費付款交易現在都會儲存到資料庫，並如預期顯示在Admin中。 以前，只有一小部分並行訂單儲存在資料庫中，並且大多數訂單會因為資料庫鎖定造成的逾時而遺失。 [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-23989 magento/magento2#32251 -->

* 當訪客將產品放入迷你購物車時，應用程式現在會正確顯示內嵌歡迎訊息，其中包含特殊字元。 之前，應用程式不會將產品新增至迷你購物車或顯示歡迎訊息。 [GitHub-32250](https://github.com/magento/magento2/issues/32250)

<!-- MC-41165-->

* 現在，啟用店內傳遞時，結帳工作流程的送貨頁面會成功載入。 之前，應用程式擲回JavaScript錯誤，且出貨結帳頁面未完全轉譯。

<!-- ENGCOM-9006-->

* 已將`itemResolvers`引數新增至目錄`di.xml`檔案。 因此，如果可設定和群組的產品模組停用，則簽出不再中斷。 [GitHub-30860](https://github.com/magento/magento2/issues/30860)

<!-- ENGCOM-8944-->

* 應用程式現在會在管理員重新訂購工作流程期間，如預期在&#x200B;**付款和送貨資訊**&#x200B;區段中顯示選項按鈕。 [GitHub-30257](https://github.com/magento/magento2/issues/30257)

<!-- MC-39158 ENGCOM-8493-->

* 當購物車包含具有多個選項的套件產品時，應用程式現在會正確套用具有購物車層級固定折扣的購物車價格規則。 之前，購物車價格規則未完全套用至訂單。 [GitHub-30952](https://github.com/magento/magento2/issues/30952)

<!-- MC-40983 ENGCOM-8828-->

* 類別清單檢視上的&#x200B;**加入購物車**&#x200B;按鈕現在可如預期運作。 [GitHub-32232](https://github.com/magento/magento2/issues/32232)

<!-- ENGCOM-8490-->

* 您現在可以使用POST `/V1/carts/mine/items`，將自訂數量的群組產品加入購物車。 [GitHub-26909](https://github.com/magento/magento2/issues/26909)

<!-- ENGCOM-8886-->

* 應用程式不再以送貨地址填入結帳工作流程的帳單地址區域。 先前，當帳單地址的&#x200B;**州/省**&#x200B;欄位為空白，且送貨地址與帳單地址不同時，應用程式會填入帳單地址&#x200B;**州/省**&#x200B;欄位，其中包含來自送貨地址的資訊。 [GitHub-31608](https://github.com/magento/magento2/issues/31608)

### 目錄

<!-- MC-36787-->

* 大量更新&#x200B;**啟用數量增量**&#x200B;和&#x200B;**數量增量**&#x200B;屬性現在可如預期般運作。 [GitHub-29544](https://github.com/magento/magento2/issues/29544)

<!-- MC-41801-->

* 您現在可以成功複製包含僅限數值SKU的共用目錄。 之前，應用程式在您嘗試複製共用目錄時擲回錯誤，因為`\Magento\Catalog\Model\ProductIdLocator`類別無法正確搭配僅限數值的SKU運作。

<!-- MC-41575-->

* 當您與管理員啟用最近的產品同步化後，應用程式不會再擲回JavaScript錯誤。 以前，應用程式顯示這個JavaScript錯誤： `Cannot read property 'status' of undefined`。

<!-- MC-41534-->

* 自訂主題版面配置更新現在已按預期套用。 以前會忽略自訂佈景主題版面更新。

<!-- MC-41499-->

* 產品類別快取現在已由`cron`在`indexer_update_all_views`執行期間如預期般清除。 先前，重新索引後「類別」頁面上的產品計數不正確。

<!-- MC-41422-->

* 現在，如果在商店檢視的產品更新REST API請求中未指定屬性，屬性值將保持不變。 以前，如果未指定屬性，應用程式會將屬性值重設為預設範圍值。

<!-- MC-41284-->

* 現在當產品由SKU篩選時，管理員產品格線（管理員&#x200B;**目錄** > **產品**）會顯示正確的產品計數。

<!-- MC-40873-->

* 現在，當啟用類別許可權並將產品新增到CMS頁面時，應用程式會顯示準確的庫存狀態，並防止顯示指定客戶群組的價格。 過去，無論實際庫存狀態為何，所有產品都會顯示為無庫存。

<!-- MC-40859-->

* 「進階訂價客戶群組價格」區塊價格輸入欄位現在的最小寬度為5位數。 以前，在低解析度顯示器上，此欄位中只顯示兩個符號。

<!-- MC-40825-->

* 應用程式現在會在刪除產品後，成功刪除產品媒體影像。 先前，成功刪除產品後，產品媒體影像會保留在資料夾中。

<!-- MC-40811 magento/magento2#32042-->

* 當您在「管理員」中建立或編輯產品，然後建立「排程設計更新」時，頁面版面現在會依預期更新。 [GitHub-32007](https://github.com/magento/magento2/issues/32007)

<!-- MC-40773-->

* 值為零的自訂產品屬性現在可以成功儲存為空白。 以前，應用程式不會將此值更新為空白。

<!-- MC-40736 ENGCOM-8789-->

* 自訂類別配置更新檔案現在會如預期套用至產品。 之前，更新檔案控制代碼(`catalog_category_view_*`)不符合產品控制代碼。 [GitHub-27285](https://github.com/magento/magento2/issues/27285)

<!-- MC-40679-->

* 管理員產品清單的「固定產品稅金(FPT)」欄已停用排序。 之前，在排序FPT欄之後，無法重新載入產品頁面。

<!-- MC-40443-->

* 現在，當相符產品在每個網站上的價格不同時，頁面產生器產品Widget預覽可在多網站部署中如預期運作。

<!-- MC-40344 ENGCOM-8629-->

* 使用GET `/rest/V1/products/?searchCriteria[filterGroups]`在產品搜尋上依位置排序現在可如預期運作。 之前，產品集合沒有欄位`position`值可供排序。 [GitHub-31591](https://github.com/magento/magento2/issues/31591)

<!-- MC-40122-->

* 管理員使用者現在可以在產品格線的&#x200B;**名稱**&#x200B;和&#x200B;**SKU**&#x200B;欄位中看到雙空格字元。 之前，應用程式會將多個空格摺疊為單一空格。

<!-- MC-39869-->

* 現在，當管理員的可銷售數量為0時，產品在店面中顯示為無庫存。 以前，這些產品在店面以庫存形式列出，而且應用程式顯示有效的&#x200B;**加入購物車**&#x200B;按鈕。 [GitHub-31117](https://github.com/magento/magento2/issues/31117)

<!-- MC-39809-->

* 管理員現在可以從「管理客戶」頁面的「購物車」區段（客戶的「活動」欄），將具有可自訂選項`(File)`的產品新增至「已訂購專案」格線。 以前，應用程式未將專案加入清單，因為值在插入`\Magento\Catalog\Model\Product\Type\AbstractType::_prepareOptions`之前格式不正確。

<!-- MC-39619-->

* 應用程式不再提示購物者為僅有一個選項的套件產品選取產品選項。

<!-- MC-39617-->

* 在建立新Widget期間，應用程式現在會在版面更新中顯示所有子類別（錨點和非錨點類別）。

<!-- MC-39481-->

* 當產品名稱僅針對一個存放區檢視更新時，`product`查詢不再覆寫多存放區部署中所有存放區檢視的預設值。 [GitHub-31083](https://github.com/magento/magento2/issues/31083)

<!-- MC-39470 magento/magento2#31492-->

* 當您變更「管理員相關產品」、「向上銷售」和「交叉銷售」清單的每頁值時，Adobe Commerce會依預期更新總頁數。 [GitHub-31059](https://github.com/magento/magento2/issues/31059)

<!-- MC-39444-->

* 管理員現在可以將具有兩個或多個可自訂選項`(File)`的產品新增至依SKU排序的訂單。

<!-- MC-39140-->

* 當具有受限制許可權的管理員將產品小工具新增到管理員的CMS頁面時，應用程式不再擲回錯誤。 以前，當管理員按一下&#x200B;**儲存**&#x200B;按鈕時，應用程式擲回此錯誤： `We are sorry, an error has occurred while generating the content`。

<!-- MC-39134-->

* 啟用&#x200B;**使用JavaScript行事曆**&#x200B;時，產品詳細資料頁面現在會以填入前一訂單日期的可自訂選項開啟。 如果值未根據目前組態進行格式，自訂日期選項值解析器現在會退回替代格式。 在以前，自訂日期選項值是空的。

<!-- MC-39104-->

* 產品無庫存時，應用程式現在在購物車中僅顯示一個錯誤。 以前，應用程式會顯示多餘的訊息。 [GitHub-27469](https://github.com/magento/magento2/issues/27469)

<!-- MC-35717  magento/partners-magento2ee#427-->

* 管理員現在可以將具有可自訂選項`(File)`的產品新增至SKU的訂單。 [GitHub-30285](https://github.com/magento/magento2/issues/30285)

<!-- MC-30625-->

* 您現在無需指定`type_id`即可儲存產品與價格。 [GitHub-13639](https://github.com/magento/magento2/issues/13639)

<!-- MC-39024-->

* 使用REST `PUT /V1/products/:sku/links`要求將新的子產品與新的群組產品建立關聯時，現在店面可如預期提供群組產品。 以前，執行`bin/magento cron:run`後未正確索引產品。

<!-- ENGCOM-9010 8947-->

* 您無法再建立具有`NULL` SKU值的產品。 之前，您可以透過自訂匯入工具或直接在資料庫中建立沒有SKU值的產品，但當您嘗試從管理員編輯該產品時，應用程式會擲回錯誤。 [GitHub-27411](https://github.com/magento/magento2/issues/27411)，[GitHub-32525](https://github.com/magento/magento2/issues/32525)

<!-- ENGCOM-8902-->

* 將必要的自訂選項新增至簡單產品時，不會再毫無警告地將其從父複合產品中移除。 應用程式現在會顯示資訊性警告，且不會儲存產品。  之前，應用程式儲存了產品變更，但並未顯示警告。 [GitHub-30492](https://github.com/magento/magento2/issues/30492)

### 目錄規則

<!-- MC-39896-->

* 現在，當型錄價格規則套用至料號時，`products`查詢會傳回目前的值。 [GitHub-26738](https://github.com/magento/magento2/issues/26738)

<!-- ENGCOM-8367-->

* 當購物車或目錄規則過期、停用或變成非使用中後，重新索引失敗時，現在會如預期刪除以`catalogrule_product__temp`開頭的暫存表格。 [GitHub-22273](https://github.com/magento/magento2/issues/22273)

<!-- ENGCOM-8949-->

* 現在在`\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexById`和`\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexByIds`中以相同方式套用時區。 [GitHub-29549](https://github.com/magento/magento2/issues/29549)

### CMS內容

<!-- MC-41471-->

* 啟用&#x200B;**啟用前端調整大小**&#x200B;組態設定時，現在會如預期在上傳期間調整大型影像的大小。

<!-- MC-40663 ENGCOM-8883-->

* 修正CMS頁面儲存控制器的錯誤處理。 先前，在`Error`事件上擲回`cms_page_prepare_save`物件時，應用程式將此物件傳遞給`addExceptionMessage`函式，因為此函式需要`Exception`而違反其合約。 使用`addErrorMessage`函式新增錯誤訊息即可解決此問題。 [GitHub-30149](https://github.com/magento/magento2/issues/30149)

<!-- MC-33490 magento/partners-magento2ee#435 -->

* 您現在可以從CMS的「編輯頁面階層」索引標籤，將新頁面指派給多個節點。 以前，當您嘗試將頁面指派給節點時，會發生唯一限制違規。 [GitHub-363](https://github.com/magento/partners-magento2ee/issues/363)

### 可設定的產品

<!-- MC-40719-->

* 當您按一下產品的可設定選項時，應用程式不會再複製產品影像庫中的產品縮圖。

<!-- MC-37418-->

* 當您從希望清單編輯可設定的產品時，應用程式顯示的設定快顯功能現在會在您按一下&#x200B;**確定**&#x200B;按鈕時按預期關閉。

<!-- MC-39878  magento/magento2#31472-->

* 此應用模組現在會針對僅包含一個可設定產品的訂單，正確產生商業發票。 [GitHub-31143](https://github.com/magento/magento2/issues/31143)

<!-- ENGCOM-8673-->

* 購物者現在可以從非預設商店檢視將可設定產品新增到購物車。 先前，當非預設商店檢視上的購物者嘗試新增可設定的產品時，應用程式會顯示此錯誤： `Could not add item to cart. Please check required options and try again`。 [GitHub-31660](https://github.com/magento/magento2/issues/31660)

### 內容安全性原則(CSP)

<!-- ENGCOM-8577-->

* 內容安全性原則現在支援透過`data: scheme`載入base64編碼的影像和字型。

### cron

<!-- MC-30804-->

* Cron清理查詢已重構，以減少或消除以下效能問題： `cron`個工作仍卡在擱置狀態、MySQL查詢速度越來越慢，以及CPU使用量增加。 [GitHub-26507](https://github.com/magento/magento2/issues/26507)

<!-- ENGCOM-8571-->

* 已處於狀態`cronjobs`超過24小時的`running`現在會自動變更為狀態`error`。  因此，該工作的新執行個體可以再次執行，並且當工作錯誤地保持設定為狀態`running`時，您不需要手動變更工作狀態。 先前，如果`cronjob`停滯在狀態`running`中，應用程式會阻止啟動相同工作的新執行個體，而您必須手動變更工作狀態。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron`個工作現在如預期般完成，且不再擲回此序列化錯誤： `[Magento\Framework\DB\Adapter\DeadlockException]SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction, query was: DELETE FROM cron_schedule WHERE (status = 'missed') AND (job_code in ('indexer_reindex_all_invalid', 'indexer_update_all_views', 'indexer_clean_all_changelogs')) AND (created_at < '2018-09-28 18:32:28')`。 [GitHub-18409](https://github.com/magento/magento2/issues/18409)

<!-- ENGCOM-8571-->

* `indexer_update_all_views`個cron工作現在會在先前的失敗後如預期般執行。 失敗的執行在`cron_schedule schedule`中標籤為失敗，後續執行不會自動失敗。 之前，`cron_schedule`資料表填入擱置中的工作，且`indexer_update_all_views` cron工作未執行。 [GitHub-23054](https://github.com/magento/magento2/issues/23054)

<!-- ENGCOM-8571-->

* `cron`不再發生死結，因為`cron`嘗試在群組重疊的大型部署中設定鎖定。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* 只有少數`cron`個工作執行後，`cron_schedule`資料表上不再發生`cron`死結。 [GitHub-22438](https://github.com/magento/magento2/issues/22438)

### 自訂客戶屬性

<!-- MC-41611-->

* 店面客戶帳戶通訊錄上的&#x200B;**State**&#x200B;欄位現在已載入為，並保留為下拉式頁面元素。 **Submit**&#x200B;按鈕現在已停用，直到所有頁面元素完全載入為止。 以前，應用程式在將此欄位呈現為下拉式元素之前會載入為文字方塊，購物者可以在文字欄位中輸入並儲存值，這稍後會在結帳時造成錯誤。

<!-- MC-40906 magento/partners-magento2ee#509-->

* 應用程式現在會在店面和管理員訂單頁面上正確顯示自訂客戶地址屬性。 以前，地址資訊區段中遺漏下拉式清單屬性的選定選項，而且輸入屬性的值包含屬性代碼。 [GitHub-508](https://github.com/magento/partners-magento2ee/issues/508)

<!-- MC-40329-->

* 上傳檔案時，當您在「管理客戶地址」欄位中儲存具有檔案附件的客戶地址屬性時，應用程式不再擲回錯誤。 發生此狀況是因為控制器動作中遺失傳回陳述式。 之前，應用程式擲回此錯誤： `Something went wrong while saving the file`。

<!-- MC-39354-->

* REST GET購物車API呼叫現在會傳回帳單和運送地址的正確自訂屬性值。 以前，自訂地址屬性在「我的帳戶店面」頁面和「管理員」的訂單詳細資訊頁面中顯示不正確。

<!-- MC-24495-->

* 應用程式現在已成功處理包含輸入型別為`file (attachment)`之客戶位址屬性的檔案。 之前，應用程式在上傳附加檔案時擲回此錯誤： `Something went wrong while saving the file`。

### 客戶

<!-- MC-41216-->

* 商店信用電子郵件現在會考量選取的範圍，並從正確的電子郵件地址傳送。

<!-- MC-40579-->

* 依帳戶建立日期篩選現在產生的結果會符合設定的時區設定，並擷取所有相關建立的帳戶。

<!-- MC-40502-->

* 如果資料先前已快取，客戶格線篩選器現在對受限制使用者使用正確的網站選項。 以前，客戶格線篩選器會從快取中擷取網站引數，並針對受限制的使用者包含不正確的資料。

<!-- MC-39189-->

* 若在多網站部署中刪除一個網站，應用程式不會再在「管理員客戶」頁面上擲回例外狀況。 以前，當管理員嘗試存取完整的客戶清單時，應用程式未顯示所有客戶並顯示此錯誤： `The website with id 2 that was requested wasn't found. Verify the website and try again`。

<!-- MC-38913-->

* 具有許可權的管理員現在可以從客戶的「帳戶資訊」索引標籤，將客戶重新指派至不同的網站。

<!-- MC-39852-->

* 現在當您建立輸入型別為`(File)`的客戶地址屬性時，可以成功上傳檔案。 先前，當您嘗試上傳並儲存檔案時，應用程式擲回此錯誤： `Something went wrong while saving the file`。

### 客戶區段

<!-- MC-40999-->

* 應用程式現在會根據店面的客戶區段，如預期顯示相關產品。 先前，針對特定客戶區段建立相關產品規則時，應用程式不會顯示此區段。

<!-- MC-40503-->

* 當對應的客戶區段同時套用至來賓和註冊客戶時，現在會在購物車中顯示註冊客戶的動態區塊。 以前，應用程式只為來賓顯示區塊。

<!-- MC-40385-->

* 客戶區段現在會在管理員下訂單後自動更新。 先前，建立管理員訂單後，管理員使用者必須手動重新整理相關區段資料，方法是導覽至相關客戶區段並按一下&#x200B;**重新整理區段資料**&#x200B;按鈕。

<!-- MC-39490-->

* 應用程式現在會在相關客戶區段的所有客戶的購物車中顯示動態區塊。 以前，即使客戶區段同時包含來賓和註冊客戶，來賓也不會看到封鎖。

<!-- MC-39464-->

* 使用`Product was Ordered`條件的客戶細分規則所產生的資料庫效能問題已解決。

<!-- MC-38895-->

* 已新增REST/SOAP API的客戶區段事件觀察器。 因此，如果透過REST/SOAP API下訂單時區段中定義的條件相符，現在客戶區段會如預期自動更新。

<!-- MC-38346-->

* 已針對GraphQL請求新增客戶區段事件處理器。 以前，當在購物車價格規則條件中使用客戶區段時，購物車價格規則折扣不會套用到購物車。 [GitHub-371](https://github.com/magento/partners-magento2ee/issues/371)

### 目錄

<!-- MC-39520-->

* 當購物者在結帳工作流程的送貨區段期間輸入無效的郵遞區號時，應用程式不會再擲回例外狀況。 [GitHub-23371](https://github.com/magento/magento2/issues/23371)

### 可下載

<!-- MC-35779-->

* 當訂單包含可下載的產品和具有可下載選項的可設定產品時，應用程式現在會在新訂單電子郵件中顯示可下載產品的連結。 以前，應用程式顯示指向獨立可下載產品的連結，但不會顯示指向具有可下載選項的可設定產品的連結。

### 動態區塊（原為橫幅）

<!-- MC-40327-->

* 動態區塊現在只顯示在指定的頁面上。 之前，若未指定動態區塊，應用程式會顯示所有頁面上指派給Widget的所有橫幅。

<!-- MC-39839-->

* 您現在可以儲存具有空白內容的動態區塊。

### EAV

<!-- MC-41756-->

* 客戶地址屬性日期值現在以四位數格式儲存，而非兩位數格式。

### 電子郵件

<!-- MC-39757-->

* 「管理員重設密碼」頁面上的密碼重設連結現在可如預期運作。 先前，當自訂範本用於重設管理員密碼頁面時，當管理員按一下電子郵件內的連結時，應用程式會顯示此訊息： `Your password reset link has expired`。 發生此狀況是因為自訂電子郵件範本包含使用者ID的錯誤變數。

<!-- MC-41588-->

* 現在，在商店檢視層級啟用時，從管理員傳送客戶電子郵件會正常運作。 以往，在商店檢視層級啟用電子郵件通知設定（而非全域層級）時，應用程式不會傳送客戶電子郵件。

<!-- MC-40950-->

* 應用程式現在會依預期在多網站部署中傳送電子郵件，因為並非所有網站都啟用非同步電子郵件傳送。 先前，如果至少有一個網站停用此設定，則即使已啟用，也不會從任何網站傳送電子郵件。 發票、出貨及銷退折讓單電子郵件有類似的問題。 不過，訂單註解、商業發票註解、出貨註解及銷退折讓單註解電子郵件已順利傳送。 [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-34323 magento/partners-magento2ee#505-->

* 當您從管理員共用禮品登入時，應用程式傳送的電子郵件訊息現在包含登入位置的有效連結。 之前，使用此連結會導致404錯誤。 [GitHub-504](https://github.com/magento/partners-magento2ee/issues/504)

<!-- MC-30127 magento/magento2#31455-->

* 發票和發票PDF現在包含與預期相同的套件組合產品價格。 以前，發票PDF包含不正確的套件組合產品價格。 [GitHub-12856](https://github.com/magento/magento2/issues/12856)

<!-- ENGCOM-9021-->

* 已將字串轉型新增至電子郵件範本篩選方法，以確保傳回值為`string`。 先前，當未處於開發人員模式時攔截到例外狀況時，應用程式會傳回`phrase`物件。 這進而觸發嚴重的`Uncaught TypeError`。 [GitHub-32671](https://github.com/magento/magento2/issues/32671)

<!-- ENGCOM-8807-->

* 在多網站部署中，當啟用非同步傳送時（**商店** > **設定** > **銷售** > **銷售電子郵件** > **一般設定** > **非同步傳送**），訂單確認電子郵件現在會如預期傳送。 [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-18023 ENGCOM-9000-->

* 當客戶嘗試從「聯絡我們」表單傳送電子郵件時發生例外狀況時，應用程式現在會依預期記錄錯誤。 [GitHub-23645](https://github.com/magento/magento2/issues/23645)

### 框架

<!-- MC-41712-->

* 現在會檢查Admin中的父類別是否有docblock註解，以及原始類別和繼承的介面。 之前，由於未檢查父類別，因此在Admin中執行任何與客戶相關的動作時觸發事件，都會導致錯誤。 應用程式在例外狀況記錄檔中記錄此錯誤： `report.CRITICAL: Method's return type must be specified using @return annotation.`。

<!-- MC-41192-->

* 在啟用Redis頁面快取的部署中，當Redis伺服器停止時，應用程式不再擲回嚴重錯誤。

<!-- MC-40739-->

* 使用&#x200B;**啟用備份時，應用程式現在會執行**&#x200B;從備份排除媒體資料夾`bin/magento config:set system/backup/functionality_enabled 1`設定。 先前雖然有此設定，但媒體資料夾仍會進行備份，因為指向`/magento`的路徑格式不正確，帶有double //。

<!-- MC-40654 ENGCOM-8881-->

* 應用程式現在會依預期為Admin cart頁面翻譯所有可翻譯字串。 以前，轉譯載入發生得太晚，並略過訂閱控制器動作預先派單的所有觀察者。 [GitHub-31849](https://github.com/magento/magento2/issues/31849)

<!-- MC-39776-->

* 當停用&#x200B;**以客戶身分登入**&#x200B;啟用擴充功能設定時，[建立新客戶帳戶]頁面上的表單驗證現在可成功運作。 之前，應用程式擲回JavaScript錯誤。

<!-- MC-39537-->

* 使用`bin/magento setup:db-schema:split-sales`行動資料庫表格現在可如預期般運作。 現在可以正確建立表格並填入資料。 先前，由於檢查資料表存在性不正確，應用程式在您執行`SQLSTATE`時擲回`bin/magento setup:db-schema:split-sales`個錯誤。

<!-- MC-39193-->

* 已改善由`ProcessManager`取用的子處理程式的例外狀況處理。 現在發生例外狀況時，主要程式會結束，而錯誤訊息只會顯示一次。 以前，會記錄多個索引器失敗並顯示多個訊息。 [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- MC-39132-->

* 當此區域檔案的`webapi_rest`不含已登入的外掛程式時，將不再針對新的自訂區域型別觸發全域Adobe Commerce外掛程式（例如`graphql`和`di.xml`）。

<!-- MC-38770-->

* 初始化期間發生的例外狀況不再快取，現在會觸發500回應代碼。

<!-- MC-33179  magento/partners-magento2ee#431-->

* 商戶現在可以透過商店檢視，在目錄事件中指派或刪除影像。 先前，當您在編輯目錄事件時變更商店檢視時，**刪除影像**&#x200B;核取方塊未啟用，且應用程式顯示此錯誤： `Uncaught ReferenceError: toggleValueElements is not defined at HTMLInputElement.onclick`。 [GitHub-364](https://github.com/magento/partners-magento2ee/issues/364)

<!-- ENGCOM-8232-->

* 合併至`communication.xml`檔案的最後一個處理常式不再覆寫所有先前建立的處理常式。 [GitHub-29528](https://github.com/magento/magento2/issues/29528)

### 一般修正

<!-- MC-41194-->

* 應用程式現在會在「我的產品評論」頁面和「我的帳戶」頁面顯示最近評論的正確星數。 以前，應用程式只將評論開始套用到第一次評論，並將頁面上的其他評論保留不開始。

<!-- MC-40653-->

* 標題中的帳戶連結現在遵循WCAG標準。 先前，標題中的帳戶連結包含重複的ID，導致WCAG驗證失敗。

<!-- MC-40528-->

* 應用程式現在會以UTC時區儲存目錄事件日期。 以前，應用程式儲存的目錄事件日期是使用者的時區。

<!-- MC-39765-->

* 當訪客購物者使用無效位址時，應用程式不再擲回系統記錄檔產生的錯誤。 之前，應用程式會間歇性地顯示此錯誤，而非轉譯頁面： `No such entity with addressId`。 [GitHub-15115](https://github.com/magento/magento2/issues/15115)

<!-- MC-39747-->

* 對於不支援格式的影像，影像大小調整程式不再暫停。 以前，當`catalog:images:resize`遇到不支援的影像格式時，處理程式會停止，且應用程式會顯示此錯誤： `bin/magento catalog:images:resize Unsupported image format`。

<!-- ENGCOM-8925-->

* 管理員已新增對標誌影像的WEBP和AVIF支援。 [GitHub-32495](https://github.com/magento/magento2/issues/32495)

<!-- MC-38156-->

* 您無法再變更`media_gallery`屬性的範圍。 先前，當您將`media_gallery`屬性的範圍變更回`global`時，應用程式擲回錯誤。

<!-- MC-36818  magento/partners-magento2ee#470-->

* 更新結束日期後，新增為排程更新的相關產品不再顯示在店面產品頁面上。 [GitHub-469](https://github.com/magento/partners-magento2ee/issues/469)

<!-- MC-34489 magento/partners-magento2ee#491-->

* 當您在「我的帳戶禮品登入」頁面上按一下&#x200B;**管理專案**&#x200B;時，應用程式現在會顯示準確、資訊豐富的訊息，而且登入產品已無庫存。 之前，應用程式擲回此錯誤： `Error: Call to a member function getId() …`。 [GitHub-490](https://github.com/magento/partners-magento2ee/issues/490)

<!-- MC-33667-->

* 您現在可以依照預期，從「新增頁面」頁面新增CMS頁面至網站根階層。

<!-- MC-33499 magento/partners-magento2ee#446-->

* 選取實體型別時，篩選功能現在可在排程匯出清單上依預期運作。 之前，篩選器無法運作，且應用程式擲回JavaScript錯誤。 [GitHub-361](https://github.com/magento/partners-magento2ee/issues/361)

<!-- MC-30084 ENGCOM-8674-->

* 使用資料庫儲存方法儲存類別時，類別影像現在會如預期從`catalog/tmp/category`目錄複製到`catalog/category`目錄。 `media_storage_file_storage`表格中的影像列現在也有正確的`directory_id`。 [GitHub-11995](https://github.com/magento/magento2/issues/11995)

<!-- MC-24768-->

* 在提交變更至CMS階層後，商家現在會如預期收到有關快取失效的通知。 先前，應用程式在儲存CMS階層時不會使快取失效。

<!-- MC-24725-->

* 減少購物車的購物車區段的多餘AJAX請求。 以前，應用程式沒有正確載入購物車小計，這會再次觸發購物車重新載入。

<!-- MC-23740-->

* 新增URL驗證，以防止保留字包含在URL索引鍵中。 請參閱[定義已知的統一資源識別碼(URI)](https://tools.ietf.org/html/rfc5785)

<!-- ENGCOM-9037-->

* 在執行PHP 7.4的部署上，當&#x200B;**產生&quot;category/product&quot; URL Rewrites**&#x200B;設定設為&#x200B;**No**，而且購物者嘗試存取不存在的類別路徑時，應用程式現在會傳回404錯誤。 之前，應用程式傳回500錯誤，指出： `Trying to access array offset on value of type bool`。 [GitHub-31984](https://github.com/magento/magento2/issues/31984)

<!-- MC-32257 magento/partners-magento2ee#507-->

* 您現在可以成功編輯使用屬性集建立的產品，其中已移除&#x200B;**設計群組和排程設計更新**&#x200B;群組。  先前，當您嘗試編輯從該屬性集建立的產品時，應用程式擲回嚴重錯誤。 [GitHub-44](https://github.com/magento/partners-magento2ee/issues/44)

<!-- ENGCOM-8901-->

* `nowdoc`已取代`heredoc`存放區切換器中的`Magento_Backend`。 [GitHub-32262](https://github.com/magento/magento2/issues/32262)

<!-- ENGCOM-8539-->

* 現在，管理員在登入後會直接重新導向到請求的「管理員」頁面。  先前，當管理員登入時，系統會將他們重新導向至管理員控制面板（或設定為啟動頁面的頁面），且必須手動導覽至目的地。 [GitHub-31042](https://github.com/magento/magento2/issues/31042)

<!-- ENGCOM-8685-->

* 將阿根廷、玻利維亞、智利、厄瓜多爾、蓋亞那、巴拉圭、秘魯、蘇利南和委內瑞拉地區新增至`directory_country_region`表格。 [GitHub-31169](https://github.com/magento/magento2/issues/31169)

<!-- ENGCOM-8505-->

* 已新增阿爾巴尼亞、丹麥、希臘、冰島、葡萄牙和瑞典等地區至`directory_country_region`表格。 [GitHub-31040](https://github.com/magento/magento2/issues/31040)

<!-- MC-30104 magento/magento2#31480 -->

* 當發生例外狀況時，訊息現在會在MysqlMQ訊息佇列中標示為錯誤。 [GitHub-18140](https://github.com/magento/magento2/issues/18140)

<!-- ENGCOM-8579-->

* 現在，在載入「管理員」銷退折讓單與商業發票頁面的稅捐資訊時，應用模組會參考正確的類別物件。 [GitHub-31197](https://github.com/magento/magento2/issues/31197)

<!-- MC-40346-->

* Royal Mail Click &amp; Drop整合現在可如預期運作。 先前，應用程式在您嘗試啟動其整合時擲回此錯誤： `Sorry! Something went wrong. Please try again later`。 [GitHub-28996](https://github.com/magento/magento2/issues/28996)

<!-- ENGCOM-8498-->

* 在URL中傳遞了錯誤的出貨、銷退折讓單或商業發票識別碼時，應用模組現在會顯示資訊性錯誤訊息。 之前，應用程式擲回嚴重錯誤。 [GitHub-30424](https://github.com/magento/magento2/issues/30424)

<!-- ENGCOM-8632-->

* 已移除靜態檔案位置的遞回。  應用程式現在會顯示404頁面，而不是500錯誤。 先前，預設NGINX設定中的錯誤會導致無限遞回。 [GitHub-31530](https://github.com/magento/magento2/issues/31530)

<!-- ENGCOM-8550-->

* `cms_index_noroute.xml`檔案的名稱已更正為`cms_noroute_index.xml`。 [GitHub-31300](https://github.com/magento/magento2/issues/31300)

<!-- ENGCOM-8516-->

* 已重構`.editorconfig`檔案，以更正`db_schema_whitelist.json`檔案的自動格式設定。 [GitHub-31171](https://github.com/magento/magento2/issues/31171)

<!-- ENGCOM-9018-->

* 調整瀏覽器視窗的大小不再觸發重複的繫結放大鏡事件。 [GitHub-30788](https://github.com/magento/magento2/issues/30788)

<!-- ENGCOM-8722-->

* 由`Magento\Users\Model\ResourceModel\Users\Collection`篩選`user_id`時，應用程式不再擲回SQL例外狀況。 [GitHub-31216](https://github.com/magento/magento2/issues/31216)

### 禮品卡

<!-- MC-40412-->

* 取消禮品卡時，未決付款費用現在會如預期從禮品卡移除。 以前，應用程式會在刪除禮品卡後執行`cron`時擲回錯誤。

<!-- MC-37658-->

* 當顧客結帳使用多個地址時，現在可以從「檢閱訂單」頁面上的訂單中移除禮品卡。 先前，當購物者選取禮卡並按一下&#x200B;**移除**&#x200B;時，應用程式並未從訂單中移除禮卡。

<!-- MC-34407-->

* 現在，當您將禮卡新增到購物車中並變更其價值時，應用程式會在購物車中顯示禮卡的新價格。

<!-- MC-32651-->

* 價格範圍驗證邏輯已新增至禮品卡建立頁面。 過去，管理員可建立卡片的最小值超過最大值。 [GitHub-493](https://github.com/magento/partners-magento2ee/issues/493)

<!-- MC-32638979 magento/partners-magento2ee#40851-->

* 當要求不包含`addRequisitionListItemsToCart`的值時，`allow_open_amount`查詢現在會如預期傳回自訂禮卡金額。

<!-- MC-32373-->

### 禮物訊息

<!-- MC-38655-->

* `setGiftOptionsOnCart`突變現在可以正確建立贈品訊息。 [GitHub-388](https://github.com/magento/partners-magento2ee/issues/388)

### 贈品登入

<!-- MC-33057 magento/partners-magento2ee#467-->

* 在贈品登入建立或編輯期間，**店面和管理員上的**&#x200B;事件日期值現在相同。 以前，每次您編輯並儲存禮品註冊時，應用程式都會在店面和管理員上向後調整一天&#x200B;**活動日期**。 [GitHub-466](https://github.com/magento/partners-magento2ee/issues/466)

<!-- MC-32587  magento/partners-magento2ee#511-->

* 此應用程式不再於禮品註冊中顯示停用的產品。 先前，如果產品在加入禮品登入後停用，當購物者存取登入時，應用程式會顯示此訊息： `Error: Call to a member function getId() …`。 [GitHub-510](https://github.com/magento/partners-magento2ee/issues/510)

### 贈品包裝

<!-- MC-38260-->

* 商店檢視的禮品包裝標籤現在可以如預期般翻譯。

<!-- MC-36749-->

* 贈品包裝現在會依預期套用至運送至多個地址的訂單。

<!-- MC-34820-->

* 應用程式現在會在移除所有產品後，從購物車中移除贈品包裝費用。

<!-- MC-32259 magento/partners-magento2ee#500-->

* 現在，當銷退折讓單包含禮品包裝和可設定產品費用時，銷退折讓單總計是正確的。 以前，贈品包裝稅金額並不一定包含在銷退折讓單總計中。 [GitHub-34](https://github.com/magento/partners-magento2ee/issues/34)

### Google Analytics

<!-- ENGCOM-8450-->

* 啟用Google Analytics後，當管理員嘗試在店面載入頁面時，應用程式不再擲回錯誤。 已新增`connect-src`的CSP專案，以允許AJAX請求至www.google-analytics.com。 [GitHub-30880](https://github.com/magento/magento2/issues/30880)

### Google Tag Manager

<!-- MC-39072-->

* 現在，啟用Google Tag Manager時，結帳工作流程付款頁面上帳單地址的UI元件會正確使用報價地址。 之前，付款頁面上發生JavaScript錯誤。

### GraphQL

<!-- MC-41885-->

* GraphQL `products`查詢現在會傳回以屬性編輯頁面上使用的相同排序順序排序的屬性選項。

<!-- MC-41473-->

* `{ category(id: 2){ children { name children { name } } } }` GraphQL要求的回應現在包含正確排序的類別樹狀結構。

<!-- MC-41030-->

* `CartItemPrices`物件現在包含新的GraphQL欄位`fixed_product_taxes`，這會傳回套用至購物車專案的固定產品稅陣列。 以前，套用至購物車專案的固定產品稅不包含於購物車查詢中。

<!-- MC-40920-->

* 對GraphQL的空白請求現在會擲回回應代碼200，而不是500。 之前，GraphQL剖析器在產生查詢結果之前擲回例外狀況。

<!-- MC-40867 magento/partners-magento2ee#532 -->

* `applyRewardPointsToCart`突變現在會更新購物車的總計，以準確反映扣除的獎勵點數的值。 [GitHub-486](https://github.com/magento/partners-magento2ee/issues/486)

<!-- MC-40379-->

* 使用GraphQL連結追加銷售產品時，停用的產品不再包含在GraphQL回應中。

<!-- MC-40262-->

* 當訪客結帳停用時，商戶現在可以使用GraphQL `setShippingAddressesOnCart`方法，設定購物車的帳單和運送地址。

<!-- MC-39508-->

* `categoryList`查詢在`CategoryTree`物件上包含多個片段時，不再擲回例外狀況。 [GitHub-31086](https://github.com/magento/magento2/issues/31086)

<!-- MC-38995-->

* GraphQL `product`查詢現在會傳回正確的客戶群組價格。

<!-- MC-38822-->

* GraphQL `products`查詢回應現在會根據產品屬性位置來排序彙總。

<!-- ENGCOM-8462-->

* 當產品和類別URL尾碼包含Null值時，應用程式不會再在GraphQL查詢期間擲回型別錯誤。 [GitHub-30909](https://github.com/magento/magento2/issues/30909)

<!-- magento/magento2#31164-->

* `CustomizableDateValue`物件現在包含`type`屬性。 其值是可設定為DATE、DATE_TIME或TIME的列舉。

<!--  magento/partners-magento2ee#421-->

* [`dynamicBlocks`查詢](https://developer.adobe.com/commerce/webapi/graphql/schema/store/queries/dynamic-blocks/)傳回符合指定篩選條件的動態區塊內容。

<!-- ENGCOM-8603-->

* POST `V1/products/special-price-delete`要求現在只會按預期刪除具有指定`store_id`的價格。 之前，該呼叫會從所有商店移除指定SKU的所有特殊價格。 [GitHub-25907](https://github.com/magento/magento2/issues/25907)

<!--  magento/partners-magento2ee#280 -->

* 修正`country_code`突變中`createGiftRegistry`屬性的錯誤。

<!-- magento/partners-magento2ee#280 -->

* 修正`giftRegistryUid`突變的`updateGiftRegistryItems`屬性問題。

<!-- magento/partners-magento2ee#280 -->

* 新增額外檢查，以防止使用`updateGiftRegistryRegistrants`突變將隨機人員新增為贈品登入的登入者。

<!-- magento/magento2#31380 -->

* `addConfigurableProductsToCart`突變現在會傳回指定產品的正確縮圖。 之前，它會傳回父產品的縮圖。

<!-- ENGCOM-8477-->

* 針對未來日期設定特殊價格期間時，`products`查詢不再公開產品的特殊價格。 [GitHub-30210](https://github.com/magento/magento2/issues/30210)，[GitHub-29631](https://github.com/magento/magento2/issues/29631)

<!-- magento-engcom/magento2ee#576-->

* `customer`查詢回應現在包含`total_giftcard`屬性，作為`OrderTotal`物件的一部分。

<!-- MC-41084 ENGCOM-9042 -->

* 修正造成`products`查詢傳回有關沒有層級訂價集之料號之價格層級的錯誤資訊的問題。 [GitHub-32279](https://github.com/magento/magento2/issues/32279)

### 影像

<!-- MC-38951-->

* 使用POST `/V1/product/:sku`端點建立或更新套件組合產品時，您現在可以依照預期設定required_options和has_options套件組合屬性。 以前，這些自訂屬性設定為0 （零），儘管努力將其設為1 （一）。

### 匯入/匯出

<!-- MC-41576-->

* 「匯出頁面實體屬性」網格中產品實體的類別ID篩選器現在可如預期運作。

<!-- MC-41439 ENGCOM-9005-->

* 現在，當所有子產品無庫存，分組產品庫存狀態會如預期一樣更新，以無庫存。 [GitHub-32647](https://github.com/magento/magento2/issues/32647)

<!-- MC-41184-->

* 當匯入更新子產品庫存狀態時，可設定的產品庫存狀態現在會如預期自動更新。 以前，當子項產品庫存狀態由匯入更新時，產品庫存狀態不會自動更新。

<!-- MC-41151-->

* 您現在可以在排程的匯出中儲存空白值。 以前，應用程式會在建立或儲存匯出後更新空白篩選值。 `no`和`not specified`值在資料庫中以零表示，且`not selected`的值已以`no`覆寫。

<!-- MC-41092-->

* 現在，匯出程式在匯出產品、庫存來源和客戶實體時，會考量使用者角色範圍。 以前，匯出程式忽略使用者角色範圍，允許匯出私人使用者角色匯出實體。

<!-- MC-40943-->

* 如果產品是以`None`值`tax_class_name`或`None`匯入，應用程式現在會將產品稅捐類別設定為`0`。 先前，如果CSV檔案中的`product tax_class_name`為`None`，應用程式會建立新的稅捐類別`None`，這複製了現有的稅捐類別。 如果CSV檔案中的`product tax_class_name`為`0`，應用程式會忽略該值，且產品稅捐類別在匯入後並未變更。

<!-- MC-40898-->

* 管理員現在可以從管理員成功變更套件組合產品`name`的`bundle_values`。 先前，在您從管理員變更名稱后，應用程式會在店面將產品顯示為無庫存。 產品也與相同的SKU合併為單一組合選項區段。

<!-- MC-40333-->

* 現在，在匯出客戶資料時，應用程式會考量使用者範圍。 先前，當您嘗試匯出客戶時，應用程式會從所有網站匯出客戶資料。

<!-- MC-40305-->

* 在CSV檔案中指定`__EMPTY__VALUE__`時，應用程式現在會依照預期在CSV檔案匯入期間，移除向上銷售、交叉銷售及相關產品之間的產品關係。

<!-- MC-40012-->

* 匯出許多客戶的自訂位址資料（管理員&#x200B;**系統** > **匯出**）不再會定期導致記憶體錯誤。 先前，在匯出自訂位址資料時，應用程式會嘗試載入所有客戶資料，導致記憶體耗盡，而應用程式擲回無法配置記憶體錯誤。

<!-- MC-39977-->

* 在預設CSV匯入程式期間，不再匯入重複的層級價格。 先前，遺漏驗證以防止匯入重複的層級價格，當發生重複層級價格時，商家無法儲存產品。 商戶嘗試排程產品變更時也看到此錯誤： `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry…`。

<!-- MC-39609  magento/magento2#31397-->

* 所有產品影像現在都會在匯入期間經過驗證。 以前，當產品有多個影像時，應用程式只會驗證第一個影像。 [GitHub-28236](https://github.com/magento/magento2/issues/28236)

<!-- MC-39483-->

* 您現在可以在匯入期間，如預期從客戶地址中刪除區域。 以往，以空白區域匯入客戶地址時，指派的區域未變更。

<!-- MC-38810-->

* 具有JSON或HTML內容作為其他產品屬性的產品現在會正確匯出至CSV檔案。 以前，CSV檔案在不正確的欄位中包含重疊的資料字串。

### 索引

<!-- MC-39718 ENGCOM-8567-->

* 當子處理程式失敗時，「處理程式管理員」現在會結束，並出現錯誤。 以前，如果傳遞給「程式管理員」的函式數（例如索引器維度）低於`MAGE_INDEXER_THREADS_COUNT`環境變數的值，該管理員一律會成功結束。 [GitHub-30964](https://github.com/magento/magento2/issues/30964)

<!-- MC-39272-->

* 當索引器模式設定為`/V1/products/:sku/links`儲存時更新&#x200B;**時，使用REST PUT**&#x200B;要求連結產品時，現在可在店面搜尋結果中如預期提供產品。

<!-- MC-38310 magento/magento2#32693-->

* 當索引器模式設定為&#x200B;**儲存時更新**&#x200B;時，目錄價格規則索引器現在會如預期般運作。 [GitHub-370](https://github.com/magento/partners-magento2ee/issues/370)

<!-- ENGCOM-8890-->

* 刪除不包含產品的已停用類別現在對目錄搜尋和類別平面索引表格沒有影響。 以前，刪除非使用中類別會觸發完整重新索引。 [GitHub-23297](https://github.com/magento/magento2/issues/23297)

<!-- ENGCOM-8599 8474-->

* 自訂索引子現在可以為訂閱使用不同的實體欄名稱。 以前，資料庫觸發程式使用索引器上次設定為&#x200B;**Update by Schedule**&#x200B;的資料行名稱，而不是指定的索引器。 [GitHub-21853](https://github.com/magento/magento2/issues/21853)

<!-- ENGCOM-8887-->

* 應用程式不再傳送AJAX要求來重新載入不受要求影響的客戶資料區段(`Magento_Customer/js/section-config`)。 [GitHub-31948](https://github.com/magento/magento2/issues/31948)

<!-- MC-39569-->

* 您在類別中新增、移除或重新排序產品後，下列索引子不再失效： `catalog_category_product`和`catalogsearch_fulltext` （及其相依專案）。 以前，這些不慎移除會觸發網站的完整重新索引。 現在當未啟用平面目錄時，在這些情況下會防止完全重新索引。

### 基礎架構

<!-- MC-41445-->

* 相依性`pelago/emogrifier`已從版本3.1.0更新至5.0.0。此更新導致對`Magento\Email\Model\Template\Filter`類別引進了回溯不相容的變更。 已變更的程式碼會在電子郵件範本轉譯期間執行。 請參閱[BIC參考](https://developer.adobe.com/commerce/php/development/backward-incompatible-changes/reference/)。

<!-- MC-42212-->

* 修正無法儲存新產品的`\Magento\CatalogInventory\Model\Indexer\Stock\CacheCleaner::getCategoryIdsByProductIds`問題。

<!-- MC-42199-->

* 已遭取代的TinyMCE v3程式庫已移除。 與TinyMCE v3.x相關的`Magento_Tinymce3Banner`模組和MFTF測試已從Adobe Commerce中移除。

<!-- MC-41497-->

* 當購物者輸入包含法語變音符號（例如「é」、「e」）的電子郵件地址時，應用程式不會再在「聯絡我們」表單上擲回`Invalid header value detected`錯誤。 應用程式現在會將使用者名稱中的UTF-8字母轉換為ASCII編碼。 之前，UTF-8字母在電子郵件地址的唯一區段中無法轉換為ASCII編碼。

<!-- MC-39947-->

* 將外掛程式新增到父類別時，應用程式不再擲回PHP嚴重錯誤。 [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-9012-->

* 已更新這些模組的README.md檔案： `Magento_Msrp`、`Magento_MsrpConfigurableProduct`、`Magento_MsrpGroupedProduct`、`Magento_Multishipping`、`Magento_MysqlMq`。 [GitHub-32577](https://github.com/magento/magento2/issues/32577)

<!-- magento/partners-magento2ee#501-->

* 已針對PHP 8相容性將`phpcpd`更新至v6.0.3。

<!-- ENGCOM-9073-->

* 已更新`ramsey/uuid`與PHP 8.0的相容性。[GitHub-31777](https://github.com/magento/magento2/issues/31777)，[GitHub-826](https://github.com/magento/magento2-functional-testing-framework/issues/826)

<!-- ENGCOM-8997-->

* 已針對PHP 8相容性將`colinmollenhour/php-redis-session-abstract`更新至v1.4.4。 [GitHub-32709](https://github.com/magento/magento2/issues/32709)

<!-- ENGCOM-8527-->

* 已修正`phpstan.neon`檔案中索引標籤和空格的無效組合。 [GitHub-31239](https://github.com/magento/magento2/issues/31239)

<!-- ENGCOM-8668-->

* 已移除整個程式碼基底中過時屬性`$_isScopePrivate`的使用。 [GitHub-30506](https://github.com/magento/magento2/issues/30506)

<!-- ENGCOM-8551-->

* 頁面版面配置在中不再使用硬式編碼  `Magento\Widget\Block\Adminhtml\Widget\Instance\Edit\Chooser\Container`。  因此，`getPageLayouts()`函式現在會依預期傳回不同模組宣告的實際版面配置清單。 以前只傳回硬式編碼版面。 [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8509-->

* `composer.lock`檔案已更新至編碼標準的最新版本。 [GitHub-31152](https://github.com/magento/magento2/issues/31152)

<!-- ENGCOM-9015 -->

* 已在`web-token/jwt-framework`封裝上新增遺漏的相依性至`magento/module-jwt-framework-adapter`。 [GitHub-32578](https://github.com/magento/magento2/issues/32578)

<!-- ENGCOM-9019 -->

* 已將被動接聽程式新增至`fotorama.js`資料庫，以改善Lighthouse量度分數。 [GitHub-31140](https://github.com/magento/magento2/issues/31140)

<!-- ENGCOM-9014 -->

* 更新Google Analytics模組的README.md檔案。 [GitHub-32616](https://github.com/magento/magento2/issues/32616)

<!-- ENGCOM-8375 -->

* Process Manager現在可以在取用的流程中正確處理例外。 主程式現在結束，應用程式現在只顯示一次錯誤訊息。 此外，分支處理序的例外狀況現在會在主處理序中擲回時處理。 以前，應用程式會記錄多個索引器失敗，並顯示多個錯誤訊息。  [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- ENGCOM-8544 -->

* 將外掛程式新增到父類別時，應用程式不再擲回錯誤。 （`optionsProvider`中的`getContentIdentities`之後現在已宣告`Assest.php`引數。）之前，應用程式擲回此錯誤： `Error: Cannot instantiate interface Magento\Framework\Data\OptionSourceInterface`。 [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-8549 -->

* 在空白資料夾上執行`Magento\Framework\Filesystem\Io\Ftp::ls()`現在會如預期傳回空白陣列。 之前，應用程式擲回此例外狀況： `Invalid argument supplied for foreach() in vendor/magento/framework/Filesystem/Io/Ftp.php…`。 [GitHub-31288](https://github.com/magento/magento2/issues/31288)

<!-- ENGCOM-8791 -->

* 角色和規則的`update`方法已在`app/code/Magento/Authorization/Model/Role.php`中標示為已棄用。 [GitHub-30756](https://github.com/magento/magento2/issues/30756)

<!-- ENGCOM-8946 -->

* 已更正SameSite Cookie引數的串連。 之前，不正確的串連會將`lex`尾碼附加至`value`、`domain`和其他引數。 [GitHub-26377](https://github.com/magento/magento2/issues/26377)，[GitHub-32440](https://github.com/magento/magento2/issues/32440)

<!-- ENGCOM-8698 ENGCOM-9034 -->

* 在整個程式碼基底中，`allure-framework/allure-phpunit`已升級至v1.3.1。 之前，應用程式顯示這個錯誤： `Warning: Use of undefined constant GLOB_BRACE - assumed 'GLOB_BRACE' (this will throw an Error in a future version of PHP) in /var/www/html/src/vendor/allure-framework/allure-phpunit/src/Yandex/Allure/Adapter/AllureAdapter.php:74.` [GitHub-24635](https://github.com/magento/magento2/issues/24635)

<!-- ENGCOM-8783 -->

* 當在生產模式中執行`bin/magento`命令發生錯誤時，應用程式現在會顯示更多資訊錯誤。 以前，應用程式未顯示錯誤訊息，或顯示的訊息缺少資訊。 [GitHub-32786](https://github.com/magento/magento2/issues/32786)

<!-- ENGCOM-8953 -->

* `ArrayIterator` PHP物件已更新為如預期般搭配PHP 7.4運作。[GitHub-32088](https://github.com/magento/magento2/issues/32088)

<!-- ENGCOM-8469 -->

* 當沒有可用的出貨承運商時，當客戶嘗試完成訂單時，應用程式不會再擲回錯誤。 而是顯示結帳頁面及此訊息： `Sorry, no quotes are available for this order at this time`。 以前，應用程式會顯示空白的結帳頁面，並將此訊息記錄在例外狀況記錄檔中： `array_keys() expects parameter 1 to be array, null given`。 [GitHub-30830](https://github.com/magento/magento2/issues/30830)

<!-- ENGCOM-8557 -->

* 應用程式不再將每個Cookie記錄為個別的內容。 `$_COOKIE`陣列也已轉換為字串。 先前，由於每個Cookie記錄為個別的內容，因此，當Cookie數量超過50時，應用程式會記錄此訊息： `Unable to send the cookie. Maximum number of cookies would be exceeded`。 [GitHub-31334](https://github.com/magento/magento2/issues/31334)

### 發票

<!-- ENGCOM-8472 -->

* 在Admin中建立新發票時，**電子郵件復本**&#x200B;核取方塊現在可如預期運作。 以前，如果在&#x200B;**銷售電子郵件**&#x200B;中啟用了傳送發票電子郵件的全域設定，則會忽略核取方塊。 它現在是一致的，而且運作方式與出貨和銷退折讓單建立頁面相同。 [GitHub-28511](https://github.com/magento/magento2/issues/28511)

### 媒體集

<!-- MC-41728-->

* 處理缺少XMP資訊的PNG影像時，`bin/magento media-gallery:sync`現在會如預期般失敗。

<!-- ENGCOM-8814-->

* 刪除相關產品時，`catalog_product_entity_media_gallery`資料表中的專案會如預期移除。 [GitHub-17727](https://github.com/magento/magento2/issues/17727)

<!-- ENGCOM-8945-->

* 啟用JavaScript縮制後，現在可以在媒體集中更新影像詳細資料。 先前未儲存影像詳細資料，應用程式顯示此錯誤： `TypeError: Cannot read property 'call' of undefined in jquery.validate`。 [GitHub-31633](https://github.com/magento/magento2/issues/31633)

### MFTF

在[功能測試架構變更記錄檔](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md)中說明新功能和MFTF核心錯誤修正。

<!-- ENGCOM-8496-->

* 已從測試中移除`magento indexer:reindex`和`cache:flush`命令以及`AdminReindexAndFlushCache`動作群組，以改善下列模組的執行： `Bundle`、`Catalog`、`CatalogRule`、`CatalogRuleConfigurable`、`CatalogUrlRewrite`、`Downloadable`、`Indexer`、`Paypal`以及`Sales`。 [GitHub-31031](https://github.com/magento/magento2/issues/31031)

<!-- ENGCOM-8562-->

* `AdminSubmitCategoriesPopupActionGroup`已新增至測試，以防止測試失敗。 [GitHub-31251](https://github.com/magento/magento2/issues/31251)

<!-- ENGCOM-8562-->

* 測試已使用`StorefrontCheckQuickSearchStringActionGroup`和`StorefrontAssertProductNameOnProductMainPageActionGroup` （現有的動作群組）重構。 [GitHub-31251](https://github.com/magento/magento2/issues/31251)

#### 重構測試

已重構以下測試以改進執行時間：

`AddOutOfStockProductToCompareListTest`  <!-- ENGCOM-8547-->

`AdminApplyTierPriceToProductWithPercentageDiscountTest` <!-- ENGCOM-8522-->

`AdminCheckingCreditMemoTotalsTest` <!-- ENGCOM-8606-->

`AdminCheckDashboardWithChartsTest` <!-- ENGCOM-8897-->

`AdminConfigDefaultProductLayoutFromConfigurationSettingTest`  <!-- ENGCOM-8891-->

`AdminCreateInvoiceTest` <!-- ENGCOM-8581-->

`AdminCreateOrderAddProductCheckboxTest` <!-- ENGCOM-8492-->

`AdminMassOrdersCancelCompleteAndClosedTest` <!-- ENGCOM-8538-->

`AdminMassOrdersCancelProcessingAndClosedTest`  <!-- ENGCOM-8670-->

`AdminMassOrdersHoldOnCompleteTest`  <!-- ENGCOM-8897-->

`AdminMassOrdersHoldOnPendingAndProcessingTest` （取代已棄用的`AdminMassOrdersHoldOnPendingAndProcessingTest`） <!-- ENGCOM-8669-->

`AdminMassOrdersUpdateCancelPendingOrderTest` <!-- ENGCOM-8602-->

`AdminMassProductPriceUpdateTest` <!-- ENGCOM-8587-->

`AdminMassUpdateProductAttributesMissingRequiredFieldTest` <!-- ENGCOM-8511-->

`AdminOrdersReleaseInUnholdStatusTest`  <!-- ENGCOM-8592—-->

`AdminPanelIsFrozenIfStorefrontIsOpenedViaCustomerViewTest`  <!-- ENGCOM-8601-->

`AdminSortingByWebsitesTest`  <!-- ENGCOM-8583-->

`AdminUpdateSimpleProduct` <!-- ENGCOM-8536-->

`AdminUpdateSimpleProductWithRegularPriceInStockEnabledFlatTest`  <!-- ENGCOM-8533-->

`AdminValidateShippingTrackingNumberTest`  <!-- ENGCOM-8593-->

`CancelOrdersInOrderSalesReportTest`  <!-- ENGCOM-8591-->

`ProductsQtyReturnAfterOrderCancelTest` <!-- ENGCOM-8506-->

`StorefrontConfigurableProductBasicInfoTest`  <!-- ENGCOM-8711-->

#### 動作群組

下列測試中的重複動作已由動作群組取代：

`AdminCheckConfigurableProductPriceWithDisabledChildProductTest`  <!-- ENGCOM-8574-->

`AdminConfigurableProductCreateTest` <!-- ENGCOM-9013-->

`AdminConfigurableProductRemoveAnOptionTest` <!-- ENGCOM-9038-->

`AdminCreateProductDuplicateUrlkeyTest` <!-- ENGCOM-9007-->

`AdminCreateSimpleProductNegativePriceTest` <!-- ENGCOM-900-->

`AdminCreateSimpleProductZeroPriceTest`  <!-- ENGCOM-9040-->

`AdminCreateVirtualProductFillingRequiredFieldsOnlyTest` <!-- ENGCOM-9003-->

`AdminUpdateSimpleProductWithRegularPriceInStockDisabledProductTest` <!-- ENGCOM-9002-->

`AdminUpdateSimpleProductWithRegularPriceInStockNotVisibleIndividuallyTest`  <!-- ENGCOM-9011-->

`AdminUpdateSimpleProductWithRegularPriceInStockVisibleInCatalogOnlyTest`  <!-- ENGCOM-9041-->

#### 新動作群組

`AdminClearFiltersOnGridActionGroup` <!-- ENGCOM-8604-->

`AdminClickAddNewPageOnPagesGridActionGroup`  <!-- ENGCOM-8613-->

`AdminClickInsertWidgetActionGroup` <!-- ENGCOM-8614-->

`AdminClickRefundOfflineOnNewMemoPageActionGroup` <!-- ENGCOM-8580-->

`AdminFillAccountInformationOnCreateOrderPageActionGroup` <!-- ENGCOM-8495-->

`AdminGoToOrderStatusPageActionGroup`  <!-- ENGCOM-8615-->

`AdminOpenCMSPagesGridActionGroup`<!-- ENGCOM-8682-->

`AdminSelectAttributeSetOnEditProductPageActionGroup` <!-- ENGCOM-8566-->

`AssertAdminProductIsAssignedToCategoryActionGroup` (以SKU取代篩選產品格線並按一下第一列（以減少測試執行時間） <!-- ENGCOM-8535 8534-->

`AssertLinkActionGroup` <!-- ENGCOM-8457-->

`AssertStorefrontCartDiscountActionGroup` <!-- ENGCOM-8431-->

`ClickPlaceOrderActionGroup` <!-- ENGCOM-8671-->

`SaveCmsPageActionGroup` <!-- ENGCOM-8683-->

`StorefrontAssertProductNameIsNotOnProductMainPageActionGroup` <!-- ENGCOM-8562-->

`StorefrontGuestCheckoutProceedToPaymentStepActionGroup` <!-- ENGCOM-8582-->

`StorefrontHoverProductOnCategoryPageActionGroup` <!-- ENGCOM-8575-->

`StorefrontSelectCustomizeAndAddToTheCartButtonActionGroup` <!-- ENGCOM-8573-->

#### 已刪除動作群組

<!-- ENGCOM-8525 8558 8608 8546 8695 8889 8681 8627 8714-->

* 已從測試中移除`CliIndexerReindexActionGroup` （或已變更值），以改善`Backend`、`Bundle`、`BundleImportExport`、`Catalog`、`CatalogRule`、`CatalogSearch`、`Checkout`、`Downloadable`、`Elasticsearch`、`Elasticsearch6`、`Indexer`、`LayeredNavigation`、`LoginAsCustomer`、`Newsletter`、`Sales`、`SalesRule`、`Search`、`Store`、`Swatches`、`UrlRewrite`、`Weee`及`Wishlist`模組的執行時間。

<!-- ENGCOM-8893 8951 8893 9001 8715 8724 8721 8843-->

* 已從`CliCacheFlushActionGroup`、`Catalog`、`CatalogUrlRewrite`、`Checkout`、`Config`、`ConfigurableProduct`、`Contact`、`Cookie`、`CurrencySymbol`、`Customer`、`Downloadable`、`Elasticsearch`、`Elasticsearch6`、`Fedex`、`Indexer`、`LayeredNavigation`、`LoginAsCustomer`、`Msrp`、`Multishipping`、`Sales`、`Swatches`、`Translation`、`UrlRewrite`、`Vault`和`Weee`模組移除`Wishlist`。

### 電子報

<!-- ENGCOM-8948 MC-40885-->

* 應用程式不會再傳送電子報電子郵件給已在電子報佇列建立和傳送電子報之間期間取消訂閱電子報的客戶。 [GitHub-32116](https://github.com/magento/magento2/issues/32116)

<!-- ENGCOM-8675-->

* 應用程式現在會遵守電子報啟用設定（**商店** > **設定** > **設定** > **客戶** > **電子報** > **一般選項**）。 以前，這些設定一律會從多存放區部署的預設範圍中擷取。 [GitHub-31188](https://github.com/magento/magento2/issues/31188)

<!-- ENGCOM-8551-->

* REST呼叫GET `/V1/customers/search`現在會傳回已訂閱多份電子報的客戶的正確資訊。 [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8817-->

* 快取訂閱狀態已從Newsletter外掛程式移除。 [GitHub-19345](https://github.com/magento/magento2/issues/19345)

### 訂購

<!-- MC-40963-->

* 針對部份開立商業發票的訂單，應用模組現在會正確計算已開立商業發票的客戶餘額，並將商店信用傳回客戶帳戶。

<!-- ENGCOM-8710-->

* 應用程式現在會在儲存已退款的客戶餘額時，如預期儲存已修改的訂單。 [GitHub-393](https://github.com/magento/partners-magento2ee/issues/393)

### 付款方法

<!-- MC-41525-->

* 應用程式現在會在`frontend`上轉譯付款區塊，無論電子郵件的傳送區域為何。 （目前區域在轉譯付款區塊之前會模擬為`frontend`。） 以前，付款區塊會在傳送電子郵件的區域中轉譯。 因此，無論銷售電子郵件是由管理員或REST API觸發，資產的URL都嘗試從錯誤的區域（`webapi_rest`或`adminhtml`）載入它們。

<!-- MC-40810-->

* 應用程式現在會將可下載產品的連結傳送至結帳時指定的電子郵件地址。 先前，當訪客購物者使用PayPal Express Checkout並輸入不同的電子郵件地址來提交訂單和結帳時，應用程式會將可下載的產品連結傳送到第一個地址。

<!-- MC-38051-->

* 在支援多種貨幣的建置中，應用模組現在會在「付款方式」頁面上，顯示可用商店點數的精確值。

<!-- MC-37820-->

* 當訪客購物者在結帳期間將訂單的運送地址變更為不同的國家/地區時，付款方法清單現在會如預期更新。 以往，變更帳單地址不會觸發可能付款方式的更新。

#### PayPal

<!-- MC-39895-->

* 購物者現在可以成功結帳PayPal Payflow Pro訂單，該訂單的運送地址包含特殊字元。 之前，應用程式會拒絕這些訂單的付款。

<!-- MC-39861-->

* 使用PayPal成功付款後，購物者現在會重新導向回訂購成功頁面。 以前，購物者會因為工作階段資料遺失而重新導向至空白頁面。

### 效能

<!-- MC-41647-->

* 已改善大型目錄上的管理員SKU搜尋效能。 查詢最佳化工具提示現在會在查詢執行期間強制使用索引。

<!-- MC-41440-->

* 已改善在大型資料表（數百萬列）上執行時`catalog_product_alert` `cron`處理序的效能。 以前，`catalog_product_alert`載入所有產品警示，造成記憶體不足的例外狀況。

<!-- ENGCOM-8752-->

* 當僅需要一個編輯頁面來呈現Admin表單時，應用程式不再載入所有CMS頁面。  這些頁面現在載入更快。 [GitHub-30936](https://github.com/magento/magento2/issues/30936)

<!-- ENGCOM-8510-->

* `WHERE IN`運算式中的數值現在會轉型為數字，而非字串，如此可改善某些MariaDB版本中的查詢效能。 [GitHub-31135](https://github.com/magento/magento2/issues/31135)

* `use_application_lock`模式可讓您透過使用環境變數或透過設定`app/etc/env.php`檔案來啟用重新索引。 啟用此模式後，您就不需要在失敗後手動重設索引器。 若未啟用此模式，您必須在失敗後手動重設索引子。 請參閱[使用應用程式鎖定模式重新索引處理序](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes)。

### 定價

<!-- MC-41767-->

* 當購物者更新店面的產品數量時，應用程式現在會以分組價格正確更新產品的價格。 [GitHub-32669](https://github.com/magento/magento2/issues/32669)

<!-- MC-39282-->

* 現在當產品已指派層級價格，且使用`Magento\Framework\Api\ExtensibleDataObjectConverter`來轉換產品資料時，可以儲存套件組合產品。 先前，在儲存產品時使用`Magento\Framework\Api\ExtensibleDataObjectConverter`將產品資料轉換為陣列時，應用程式並未儲存產品，且會顯示此錯誤： `Notice: Undefined index: price in app/code/Magento/Catalog/Model/Product/Type/Price.php on line 382.`

<!-- MC-36811-->

* 排定的價格更新現在套用至購物車中的產品。 [GitHub-356](https://github.com/magento/partners-magento2ee/issues/356)

<!-- MC-24693-->

* 當啟用數量增加且小數點存貨小於1時，層級價格現在會依預期套用至產品。 之前，最小層級價格數量設為1。

### 產品影片

<!-- MC-39755-->

* 您現在可以使用&#x200B;**新增視訊**&#x200B;按鈕（管理員&#x200B;**目錄** > **產品**）來連續新增多個視訊。 以前，視訊欄位會保留上一個視訊的詳細資訊。

<!-- MC-40817-->

* 在產品頁面上進入產品視訊的全熒幕模式，現在可在行動裝置上如預期般運作。 之前，進入全熒幕模式會導致視訊在結束全熒幕模式之前暫停。

<!-- MC-39759-->

* 現在，導覽箭頭按鈕（**下一步**&#x200B;和&#x200B;**上一個**）會如預期般顯示在店面產品影片中。

<!-- MC-40463-->

* 商戶現在可以依預期使用產品頁面上的&#x200B;**插入影片**&#x200B;按鈕新增Vimeo影片。 以前，應用程式顯示404錯誤。 [GitHub-31753](https://github.com/magento/magento2/issues/31753)

### 引用

<!-- MC-39531-->

* `/V1/guest-carts/examplecartid/items`呼叫現在會傳回要求的存放區檢視。 之前，它會傳回存放區中的第一個存放區檢視，而非要求的檢視。

<!-- MC-33893 ENGCOM-8992-->

* 現在可以設定發票傳送。 以前，無法設定發票傳送，且應用模組一律會在發票建立後傳送發票。 發票和訂單電子郵件都在一個觀察者的範圍內傳送。 獨立的觀察者現在控管訂單電子郵件和發票電子郵件的傳送。 [GitHub-27656](https://github.com/magento/magento2/issues/27656)

### 報表

<!-- MC-40998-->

* 現在，您可以從雲端基礎結構專案的Adobe Commerce檢視和下載所有系統報表。 之前，您無法下載記錄、資料、設計或商店的系統報表。

<!-- MC-39737-->

* 管理員&#x200B;**報告** > **檢閱** > **產品檢閱**&#x200B;的上次檢閱日期現在顯示正確的檢閱日期。 以前，應用程式顯示的是產品建立日期，而不是稽核日期。

### 退貨授權(RMA)

<!-- MC-41866-->

* 當屬性欄位值`resolution`設定為`required`no **時，RMA**&#x200B;屬性不再顯示為必要。

<!-- MC-41808-->

* 您現在可以從管理員選取多個退貨訂單。 先前，當您在選取多個傳回專案並從[動作]下拉式功能表選取[關閉]後，按一下&#x200B;**提交**&#x200B;時，應用程式擲回錯誤。

<!-- MC-41759-->

* 使用REST API變更傳回的狀態後，應用程式現在會依預期傳送電子郵件通知給客戶。

<!-- MC-39981  magento/partners-magento2ee#442 -->

* 應用程式現在會根據管理員客戶傳回格線中的篩選值來篩選記錄。 之前，應用程式會將您導向到「管理所有客戶」頁面，然後按一下「**重設篩選器**」按鈕也會重新導向到此頁面。 [GitHub-436](https://github.com/magento/partners-magento2ee/issues/436)

### 評論

<!-- MC-40116-->

* 現在，在「我的帳戶」頁面的「評論詳細資訊」區段中，可以正確計算產品評論評等星級。

<!-- MC-39763-->

* 產品評論詳細資訊頁面的平均產品評等和產品評等區段現在可正確呈現。 先前，應用程式計算店面評等時，稽核ID並未設定，產品稽核範本亦未正確呈現。

<!-- MC-36149-->

* 在管理員核准評論後，**成為第一個評論此產品**&#x200B;連結現在會依預期變更為評論計數。

<!-- ENGCOM-8501 MC-30270-->

* 管理員現在可以在產品編輯頁面的「產品評論」區段，依預期排序產品評論。 [GitHub-30270](https://github.com/magento/magento2/issues/30270)

<!-- MC-41003  magento/magento2#32259-->

* 現在，在管理員核准並儲存來自與存放區不同的網域的稽核後，使用正確的存放區ID來儲存稽核。 [GitHub-17510](https://github.com/magento/magento2/issues/17510)

### 獎勵

<!-- MC-41159-->

* 當下訂單的客戶從系統中移除後，商戶現在可以使用獎勵點來取消全部或部分下單的訂單。

<!-- MC-40037-->

* 商戶現在可以從購物車價格規則中移除獎勵積分。 先前，當商家在建立購物車價格規則時嘗試將&#x200B;**獎勵點數**&#x200B;設定為0時，獎勵點數的先前值持續存在。

<!-- MC-39890-->

* 當管理員&#x200B;**行銷** > **擱置的評論**&#x200B;網格核准多個評論時，產品評論的獎勵點數現在會與相關網站相關聯。 以前，獎勵點數不會顯示在店面上，也不會連結到管理員中的相關網站。

<!-- MC-39820-->

* 當購物者使用多個地址結帳時，應用程式現在會更新付款方法清單，方法是勾選或取消勾選&#x200B;**商店點數（獎勵積分）**&#x200B;選項。

### 銷售

<!-- MC-39796-->

* 啟用&#x200B;**允許延期交貨**&#x200B;設定時，管理員使用者現在可以下無存貨專案的訂單（**商店** > **設定** > **目錄** > **庫存** > **產品庫存選項**）。 之前，應用程式擲回錯誤。

<!-- MC-42280-->

* 當購物者的姓氏以空白結尾時，購物者現在可以在「訂購與退貨」頁面上找到訂單。

<!-- MC-41438-->

* 現在，當指定100%折扣的購物車價格規則套用至同樣受目錄產品與折扣稅約束且符合免費出貨資格的訂單時，會以正確的總計建立商業發票。 以前，訂單價格正確，但商業發票不正確。 [GitHub-30853](https://github.com/magento/magento2/issues/30853)

<!-- MC-40384-->

* 依日期篩選訂單現在會傳回準確的結果。 先前，當您依訂單日期篩選訂單時，應用程式並未傳回在00:00 UTC之後的訂單。

<!-- MC-40030-->

* 在多儲存區部署中，**價格**&#x200B;屬性使用&#x200B;**網站**&#x200B;範圍時，銷退折讓單格線現在會顯示正確的貨幣符號。

<!-- MC-40013 ENGCOM-8781-->

* 重新載入「管理員建立新訂單」頁面後，結帳工作流程的「付款與運送資訊」區段上的付款方法選項按鈕不再消失。 [GitHub-32106](https://github.com/magento/magento2/issues/32106)

<!-- MC-39891-->

* 阿拉伯文字現在可在發票中正確顯示。

<!-- MC-39864-->

* 應用模組現在會正確計算以部署PayPal Payment Pro作為付款閘道之商店中訂單或商業發票為基準之銷退折讓單的部分銷退折讓單稅捐總計。 以前，對於具有多個商業發票的訂單，應用模組會沖銷該訂單的全部稅捐，以取消銷退折讓單中的部份商業發票。

<!-- MC-39521 ENGCOM-8528-->

* 當傳送新訂單電子郵件給客戶時，應用程式不再建立隨機資料庫死結。 以前，發生死鎖是因為應用程式儲存了整個物件及其相關物件，而不是更新的SQL資料行。 應用程式顯示此錯誤型別： `SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction`。 [GitHub-31090](https://github.com/magento/magento2/issues/31090)

<!-- MC-39353-->

* 店面「訂單明細」頁面現在會顯示正確的出貨產品數量。 以前，產品數量不正確，因為訂單出貨頁面的範本已將&#x200B;**數量出貨**&#x200B;轉譯為`int`。 此專案已變更為`float`。

<!-- MC-39026-->

* 取消勾選&#x200B;**電子郵件發票復本**&#x200B;按鈕時，應用模組不再以電子郵件傳送訂單發票復本。 以前，應用程式傳送電子郵件給&#x200B;**客戶**，而&#x200B;**傳送發票電子郵件副本給**。 [GitHub-28511](https://github.com/magento/magento2/issues/28511)

<!-- MC-38973-->

* 從「管理員」為現有客戶建立新訂單時，應用模組不會再建立客戶帳戶的重複地址專案。 「**儲存於通訊錄**」核取方塊已重新命名為「**新增至通訊錄**」，現在預設為「管理員」中取消核取。

<!-- MC-38834-->

* 當購物者從帳戶列印訂單時，應用程式現在會使用已上傳至HTML列印檢視&#x200B;**設定**&#x200B;標誌中的標誌。 以前，應用程式顯示LUMA標誌，而不是上傳的標誌。

<!-- MC-38625-->

* 當專案計數超過20時，店面上的訂單專案傳呼機現在會如預期般運作。 以前，傳呼機會考慮子產品，因此總計數不正確。

<!-- MC-23915 ENGCOM-8713-->

* 應用程式現在會在「訂單」頁面與「銷退折讓單」頁面網格上，針對小計與出貨與處理值顯示正確的貨幣符號。 [GitHub-22662](https://github.com/magento/magento2/issues/22662)

<!-- ENGCOM-8486-->

* 使用Safari的管理員現在可以從管理員成功將產品新增至訂單。 先前，當管理員按一下&#x200B;**將選取的產品新增至訂單**&#x200B;按鈕時，應用程式會顯示旋轉載入圖示，而頁面會擱置。 [GitHub-30265](https://github.com/magento/magento2/issues/30265)

### 銷售規則

<!-- MC-40671-->

* 當購物車套用多個購物車價格規則時，應用程式現在會正確套用購物車價格規則，其中&#x200B;**最大數量折扣套用至**&#x200B;或&#x200B;**折扣數量步驟（購買X）**&#x200B;條件。 先前，如果將&#x200B;**最大數量折扣的購物車價格規則套用到**&#x200B;或&#x200B;**折扣數量步驟（購買X）**&#x200B;套用到另一個購物車價格規則之後，則總折扣會減少到為&#x200B;**最大數量折扣套用到**&#x200B;或&#x200B;**折扣數量步驟（購買X）**&#x200B;乘以產品價格。

<!-- MC-39827-->

* 抵用券報表現在可正確反映實作分割資料庫的部署中的抵用券活動。

<!-- MC-39477-->

* 包含條件「類別&#x200B;**IS NOT**」的購物車價格規則，現在會如預期套用至未指派給類別但已指派其父級產品的可設定子項/簡單產品。

<!-- MC-39034-->

* 當優惠券套用至訂單時，GraphQL `cart`查詢現在會傳回購物車帳單步驟的正確總計。

### 搜尋 {#search-heading}

<!-- MC-41138-->

* 類別頁面不再包含這些重複的HTML元素ID： `modes-label`、`mode-list`、`toolbar-amount`、`sorter`、`limiter`。

<!-- MC-40981-->

* 部分字詞搜尋結果不再包含非預期或不相關的相符專案，搜尋可在店面和管理員上產生一致的結果。 應用程式現在會使用不同的分析器（不含詞幹分析器）進行部分字詞搜尋。 以前，搜尋結果會顯示不含搜尋關鍵字的產品。 （預設分析器先前包含字乾分析器，而且由於在搜尋時間用於部分字詞搜尋，因此搜尋結果可能會產生非預期或不相關的相符專案。）

<!-- MC-40715-->

* 如果搜尋查詢包含多個字詞，且產品名稱設定為無法搜尋，則快速搜尋現在會傳回結果。 先前，如果產品名稱設定為無法搜尋，應用程式會對包含多個字詞的搜尋查詢擲回查詢例外狀況。

<!-- MC-40672-->

* 現在搜尋結果包含`weight`屬性（設定為可搜尋時），如預期般包含。

<!-- MC-40409-->

* 當您在啟用Elasticsearch的情況下檢視空白類別頁面時，應用程式不再擲回錯誤。 相反地，它會如預期般轉譯頁面，並顯示資訊訊息。 之前，空白的全文檢索索引會在類別頁面上觸發例外狀況。

<!-- MC-40376-->

* 如果購物者在開始搜尋後於搜尋欄位外按一下，搜尋欄位自動完成功能現在會如預期運作。 當購物者繼續輸入時，自動完成建議現在會重新出現。 以前，應用程式不會顯示自動完成建議，而且按一下搜尋方塊也不會使搜尋建議再次顯示（雖然輸入其他字母時會顯示出來）。

<!-- MC-34217-->

* 根據進階搜尋中的完整或部分SKU搜尋產品時，現在會傳回預期的產品。

<!-- MC-31395-->

* 階層導覽篩選器現在會顯示精確的產品計數。 過去，Elasticsearch的產品計數值不會依目錄許可權篩選。

<!-- MC-23881 ENGCOM-8618-->

* 類別URL頁面引數超過分頁時，Elasticsearch不再擲回錯誤。 [GitHub-23843](https://github.com/magento/magento2/issues/23843)

<!-- MC-24033  magento/magento2#3274-->

* 您現在可以將自訂Elasticsearch欄位對應程式新增到`Magento\Elasticsearch\Model\Adapter\FieldMapper\Product\FieldProvider\FieldName\Resolver\CompositeResolver`。 [GitHub-24350](https://github.com/magento/magento2/issues/24350)

<!-- ENGCOM-9029 MC-24026-->

* 開發人員現在可以變更Elasticsearch對應。 先前，以預設對應傳送至Elasticsearch伺服器的動態範本採用硬式編碼，如此可防止開發人員在Elasticsearch中編制與自訂模組相關的任何額外資料的索引。 [GitHub-24363](https://github.com/magento/magento2/issues/24363)

<!-- ENGCOM-8464 -->

* 停用搜尋建議時，搜尋欄位（表單小型搜尋）現在會如預期運作。 [GitHub-30584](https://github.com/magento/magento2/issues/30584)

### 送貨

<!-- MC-41464-->

* 當購物者在結帳期間使用多個地址刪除產品後導覽回到購物車頁面時，應用程式現在會依預期更新運費。

<!-- MC-41343-->

* 當購物車中的某些專案符合免費送貨資格時，應用程式現在會顯示正確的調整後送貨價格。 先前，當購物車中的部分專案符合免運費資格時，應用程式不會調整運費並向購物者顯示完整運費。

<!-- MC-41186-->

* 僅限特定網站的管理員現在可以為同一網站上所下的訂單建立出貨。 以前，當沒有預設存放區檢視許可權的管理員嘗試送出放在管理員有權存取的存放區檢視中的訂單時，應用程式會擲回此例外狀況： `Notice: Undefined offset: 1 in /app/code/Magento/Catalog/Model/Product/Attribute/Backend/GroupPrice/AbstractGroupPrice.php on line 293`。

<!-- MC-41069-->

* 應用程式現在會在判斷訂單是否符合免費DHL送貨的條件時，考慮相關的購物車價格規則折扣。

<!-- MC-40702 ENGCOM-8728-->

* 以非基本貨幣下訂單時，出貨標籤現在會使用預期的基本貨幣，而非支援多種貨幣的商店的訂單貨幣。 [GitHub-31891](https://github.com/magento/magento2/issues/31891)

<!-- MC-40678 magento/magento2#31925-->

* 現在，當購物者導覽離開多重送貨頁面後在結帳期間返回購物車頁面時，應用程式會顯示正確的訂單小計。 [GitHub-31889](https://github.com/magento/magento2/issues/31889)

<!-- MC-40541 magento/magento2#31841 -->

* 在管理員訂單建立期間編輯帳單資訊，不再變更具有不同預設出貨與帳單地址之客戶的出貨資訊。 [GitHub-31786](https://github.com/magento/magento2/issues/31786)

<!-- MC-37385 ENGCOM-8578-->

* 當購物者按一下&#x200B;**取得送貨方式和費率**&#x200B;並在管理員建立訂單時選取送貨方式時，應用程式不再取消勾選&#x200B;**附加註解**&#x200B;核取方塊。 [GitHub-30256](https://github.com/magento/magento2/issues/30256)

<!-- MC-36425-->

* 購物者現在可以使用「上一頁」瀏覽器按鈕，在結帳具有多個地址的訂單時返回「選取送貨方法」頁面。 之前，應用程式會顯示損毀的「選取送貨方法」頁面。 [GitHub-30268](https://github.com/magento/magento2/issues/30268)

<!-- MC-40021 ENGCOM-8983-->

* 當購物者變更「送貨地址」多地址頁面上的數量，並按一下瀏覽器的「上一步」按鈕後，產品數量現在會依預期維持不變。 [GitHub-31956](https://github.com/magento/magento2/issues/31956)

<!-- ENGCOM-9096-->

* 結帳期間套用購物車價格規則時，統一費率送貨方法費用不再為零。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- ENGCOM-8537-->

* 啟用&#x200B;**建立出貨標籤**&#x200B;核取方塊且產品名稱包含Unicode字元時，當商家嘗試使用DHL出貨訂單時，應用程式不再擲回錯誤。 先前，應用程式在要求建立標籤時會顯示此錯誤： `The response is in wrong format`。 [GitHub-31032](https://github.com/magento/magento2/issues/31032)

<!-- ENGCOM-8952 -->

* 您可以在多網站部署中，成功向管理員下訂單，其中一個網站已啟用`United States`，而另一個網站已啟用`Disable all countries`作為預設範圍。 之前，應用程式未下訂單，且顯示這個錯誤： `Please check the shipping address information. "regionId" is required. Enter and try again`。 [GitHub-30577](https://github.com/magento/magento2/issues/30577)

### 分段

<!-- MC-39807-->

* 排程區塊更新功能現在可在實施Fastly的部署中按預期運作。 以前，應用程式不會更新區塊內容，因為Fastly快取標籤沒有失效，並且Fastly會繼續提供過時的內容。

<!-- MC-41142-->

* 當購物車價格規則測試預覽指派給多個網站商店檢視時，現在會載入適當的網站中。 以前，無論指派的網站為何，購物車價格規則預備預覽都會載入預設商店檢視中。

<!-- MC-40916-->

* 排程更新結束後，非預設商店檢視中產品的特殊價格現在會如預期設為預設值。

<!-- MC-40850  magento/partners-magento2ee#489-->

* 商戶現在可以透過結束日期建立未來的分段更新後，從可下載產品頁面成功儲存連結樣本的可下載產品。 之前，應用程式未儲存產品並顯示此訊息： `The downloadable sample isn't related to the product. Verify the link and try again`。 [GitHub-488](https://github.com/magento/partners-magento2ee/issues/488)

<!-- MC-40734-->

* 在預覽類別的排程更新期間，應用程式不再執行包含所有產品ID的大型資料庫查詢。 相反地，類別篩選條件會套用至產品集合，以建立類別臨時預覽的表格。 以前，應用程式將所有產品插入臨時表格以進行中繼預覽，這會降低效能。

<!-- MC-40714-->

* 從2.3.x升級期間，`Magento_SalesRuleStaging`模組不再觸發錯誤。

<!-- MC-40697-->

* 當您檢視排程更新時，應用程式現在會顯示具有正確資料的目錄規則條件。 先前，如果您檢視使用條件建立的排程更新，應用程式不會顯示包含不正確資料的條件或條件。

<!-- MC-40604-->

* 在排定的更新取消核取後，產品的&#x200B;**使用預設值**&#x200B;核取方塊仍保持核取狀態。

<!-- MC-40588 magento/partners-magento2ee#463-->

* 目錄價格規則現在會依預期套用至具有未定義屬性值的產品。 先前，透過目錄價格規則建立的折扣不會套用至具有未定義屬性的產品。 [GitHub-461](https://github.com/magento/partners-magento2ee/issues/461)

<!-- MC-40283-->

* 現在，目錄規則可如預期般搭配不同時區的存放區進行多網站部署。 以前，應用程式會一次在所有網站上套用或停用目錄規則。

<!-- MC-40054-->

* 為特定網站建立排程更新時，不再移除層級價格。

<!-- MC-39784 magento/partners-magento2ee#475-->

* 使用結束日期建立未來的測試更新後，您現在可以從可下載產品頁面儲存產品。 之前，應用程式未儲存產品並顯示此訊息： `The downloadable link isn't related to the product. Verify the link and try again`。 [GitHub-474](https://github.com/magento/partners-magento2ee/issues/474)

### 儲存

<!-- MC-40538-->

* 顯示商店首頁時，應用程式不再將`0`的字串視為空白值。 以前，應用程式將請求路徑開頭的整數值視為存放區ID，這對SEO產生非預期的影響。

<!-- MC-40313  magento/magento2#31970-->

* 已移除「`\Magento\Framework\App\ActionInterface`」下`lib/internal/Magento/Framework/App/Action/Plugin`的外掛程式，以符合外掛程式應用來自訂另一個模組之某個模組的行為的准則。 [GitHub-28050](https://github.com/magento/magento2/issues/28050)

<!-- MC-24772-->

* 現在，當您嘗試選取`Website`作為預設值，且網站建立期間停用`Store View`時，應用程式會顯示此訊息： `Please enable your Store View before using this Web Site as Default`。 之前，網站當機，應用程式未顯示警報。

### 稅金

<!-- MC-39571-->

* 應用模組現在會在驗證最小訂單金額時考慮隱藏稅捐。

<!-- MC-38025 ENGCOM-8612-->

* 當購物者導覽回到其購物車並在將套件產品新增到購物車後繼續結帳時，應用程式現在會如預期顯示固定產品稅額(FPT)。 [GitHub-30250](https://github.com/magento/magento2/issues/30250)

<!-- MC-37657 magento/magento2#31850-->

* 當管理員建立現有客戶的訂單時，應用程式現在會以儲存的VAT編號預填管理員新訂單頁面之「地址資訊」區段帳單與送貨地址的&#x200B;**VAT編號**&#x200B;輸入欄位。 [GitHub-31846](https://github.com/magento/magento2/issues/31846)

<!-- ENGCOM-8617 magento-engcom/magento2ee#558-->

* 啟用&#x200B;**時，應用程式現在會在客戶註冊頁面上顯示** VAT編號`customer/create_account/vat_frontend_visibility`欄位。 [GitHub-31326](https://github.com/magento/magento2/issues/31326)

### 測試

<!-- MC-41393-->

* 測試環境已升級至Redis 6.0.12。

<!-- ENGCOM-8529-->

* 已從整合測試中移除`CacheCleaner::cleanAll();`。 [GitHub-31074](https://github.com/magento/magento2/issues/31074)

<!-- ENGCOM-8898-->

* 針對此案例新增測試：當客戶訂閱佇列的Newsletter時，管理員使用者可以編輯客戶帳戶。 [GitHub-30645](https://github.com/magento/magento2/issues/30645)

<!-- ENGCOM-8484-->

* 已從測試中移除`cache:flush`命令，以改善`Catalog`、`CatalogUrlRewrite`和`LoginAsCustomer`模組的執行時間。 [GitHub-31056](https://github.com/magento/magento2/issues/31056)

<!-- ENGCOM-8499-->

* 多餘引數已移除，且POST已在`\Magento\Logging\Model\ProcessorTest::testLoggingProcessorLogsActionShipping`中必要時變更為GET。

### 主題

<!-- MC-41474-->

* 當&#x200B;**將JS程式碼移動到頁面**&#x200B;底部設定(**存放區** > **設定** > **進階** > **開發人員** > **JavaScript設定**)和Cookie皆已啟用時，客戶登入頁面不再顯示此訊息： `The store will not work correctly in the case when cookies are disabled`。

<!-- MC-40982-->

* 標題中的帳戶連結現在遵循WCAG標準。 先前，標題中的帳戶連結包含重複的ID，導致WCAG驗證失敗。

<!-- MC-40278-->

* 應用程式現在會優先處理商店標誌影像的商店設定，而非版面配置。 之前，標誌影像的大小是固定的，不會因商店而異。

<!-- MC-35227-->

* 應用程式現在會在使用標準Adobe Commerce主題的店面頁面上顯示一致的頁面元素。 之前，並非所有樣式都會套用至空白主題，因此並非所有頁面元素都會顯示在使用此主題的頁面中。 （例如，「我的訂單」頁面搜尋欄位中未出現放大鏡圖示。）

### 翻譯與地區設定

<!-- MC-23553 ENGCOM-8839-->

* 設定內嵌轉譯時，新增至字串的方括弧不再逸出。 先前，`escapeHtmlAttr`方法會將方括弧轉換為HTML實體程式碼。 [GitHub-32000](https://github.com/magento/magento2/issues/32000)

<!-- ENGCOM-8694-->

* 管理員中無法翻譯的片語現在可翻譯。 （此提取請求有助於持續努力將所有管理員字串都可當地語系化。）[GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8584-->

* 範本中用來管理儲存的付款方式（**我的帳戶** > **儲存的付款方式** ）的文字字串現在可以翻譯。 [GitHub-31211](https://github.com/magento/magento2/issues/31211)

<!-- MC-30798 ENGCOM-8717-->

* 從管理員傳送的訂購電子郵件現在使用商店地區設定，而不是與管理員帳戶關聯的地區設定。 [GitHub-26521](https://github.com/magento/magento2/issues/26521)

### UI

<!-- MC-41784-->

* 管理員頁尾現在顯示正確的產品版本。

<!-- MC-41067-->

* 來源的分頁現在會在管理員出貨建立期間如預期般顯示。

<!-- MC-40240-->

* 現在當您使用自訂日期屬性來篩選產品，而且管理員使用者地區設定為`en_GB`時，產品格線篩選器可正確運作。

<!-- MC-39279-->

* 捏合以縮放的手勢現在可在iOS裝置上的產品頁面影像中心放大鏡中如預期運作。

<!-- MC-38787-->

* Admin產品格線搜尋結果的分頁現在會依預期從每個搜尋的第1頁開始。

<!-- MC-38423-->

* 已解決縮放時顯示購物車的異常。 以前，縮放此頁面時，顯示元素會重疊。

<!-- MC-38235 magento/partners-magento2ee#492 -->

* 管理員邀請頁面（管理員&#x200B;**行銷** > **私人銷售** > **邀請**）上的索引標籤對齊問題已解決。 以前，客戶已接受的邀請的標籤顯示內容不會對齊。 [GitHub-333](https://github.com/magento/partners-magento2ee/issues/333)

<!-- MC-38226 magento/magento2#32008-->

* 使用PayPal Express結帳時顯示的訂單稽核頁面現在已成功載入。 以前，範本包含未使用的&#x200B;**更新傳遞方法**&#x200B;按鈕，在頁面轉譯期間，指令碼只會部分隱藏該按鈕。 [GitHub-32006](https://github.com/magento/magento2/issues/32006)

<!-- MC-37941 magento/magento2#31892-->

* 當有冗長的評等名稱時，產品頁面「客戶評論」區段中的評等星級和評論文字現在會有適當的間距。 [GitHub-31890](https://github.com/magento/magento2/issues/31890)

<!-- MC-37688-->

* 現在，選項會如預期在「存檔商業發票」、「出貨」及「銷退折讓單」頁面的「作業」下拉式清單中顯示。

<!-- MC-23729  magento/magento2#31549-->

* 當`datetime`元件`timeOnly`選項設為&#x200B;**是**&#x200B;時，應用程式現在會顯示正確的時間值。 [GitHub-23157](https://github.com/magento/magento2/issues/23157)

<!-- ENGCOM-8514 -->

* 在管理員&#x200B;**內容** > **介面工具**&#x200B;上建立新Widget後，您現在可以移除版面配置更新。  [GitHub-29936](https://github.com/magento/magento2/issues/29936)

<!-- ENGCOM-8502 MC-35716-->

* **移除配置更新**&#x200B;按鈕現在可在您從管理員&#x200B;**內容** > **Widget**&#x200B;新增的任何配置上按預期運作。 之前，新增多個版面時，此按鈕無法用於第一個選取的版面以外的任何版面。 [GitHub-30286](https://github.com/magento/magento2/issues/30286)

<!-- ENGCOM-8524 -->

* 應用程式現在會使用在版面配置檔案中設定的頁面標題，作為客戶帳戶編輯檔案的瀏覽器頁面標題。 之前，`Magento\Customer\Controller\Account\Edit`控制器動作強制頁面標題值為`Account Information`。 [GitHub-30724](https://github.com/magento/magento2/issues/30724)

<!-- ENGCOM-8896 8826-->

* 這些頁面已新增核取方塊，允許商家在顯示和隱藏密碼之間切換：
   * 客戶登入
   * 客戶註冊
   * 客戶編輯（「變更密碼」區段）
   * 客戶設定新密碼[GitHub-31557](https://github.com/magento/magento2/issues/31557)

<!-- ENGCOM-8545 -->

* 移除管理員在變更屬性集後將產品新增至分組產品集時出現的網格儲存格中多餘標頭。 [GitHub-30911](https://github.com/magento/magento2/issues/30911)

<!-- ENGCOM-8895 -->

* 應用程式現在會在`DateRange`客戶&#x200B;**>**&#x200B;登入&#x200B;**頁面的登入區域上顯示**&#x200B;篩選器。 之前，應用程式顯示`Text`篩選器。 [GitHub-30328](https://github.com/magento/magento2/issues/30328)

<!-- ENGCOM-9009 -->

* JavaScript已從範本檔案中移除，並移至個別檔案，以減少管理員頁面上的轉譯問題。 以往，在已啟用HTML縮制的部署中，管理員頁面無法正常呈現。 應用程式顯示這個錯誤： `An error has happened during application run. See exception log for details`。 [GitHub-32454](https://github.com/magento/magento2/issues/32454)

<!-- ENGCOM-9044 -->

* `dropdownDialog` Widget現在僅載入其所需的可拖曳且可調整大小的`jquery-ui`區塊。 以前，它會載入大量不必要的程式碼，這會增載入入時間並降低效能。 [GitHub-32810](https://github.com/magento/magento2/issues/32810)

### URL重新寫入

<!-- MC-41550-->

* 透過大量更新將產品指派給網站後，多網站部署中特定網站的產品URL重寫現在會如預期產生。

<!-- MC-40780 magento/magento2#32598-->

* 當父類別啟用URL索引鍵的&#x200B;**使用預設值**&#x200B;核取方塊時，應用程式現在會正確產生子類別的URL路徑。 先前，在多存放區檢視部署中使用不同的URL索引鍵時，在階層中移動類別會導致`url_path`值不正確。 [GitHub-16202](https://github.com/magento/magento2/issues/16202)

<!-- MC-40371-->

* 應用程式現在會在您移動類別階層中的類別時，更新指派給所有存放區範圍的類別`url_path`。 以前，在階層中移動類別會導致`url_path`不正確。

<!-- MC-39463-->

* 使用自訂URL從管理員建立的URL重新導向現在可成功運作。 之前，GraphQL會快取來自GraphQL `urlResolver`查詢的回應，並在URL重寫更新後傳回舊值。

<!-- MC-38931  magento/magento2#31106-->

* 現在當產品從網站移除時，產品URL重寫會如預期移除。 [GitHub-24184](https://github.com/magento/magento2/issues/24184)

<!-- ENGCOM-8719 -->

* 已在`main_table`集合的`store_id`函式中新增`addStoreFilter`的`app/code/Magento/UrlRewrite/Model/ResourceModel/UrlRewriteCollection.php`參考。 先前，將`join`新增至也包含`store_id`欄的資料表上的集合時，就會發生問題。 [GitHub-31853](https://github.com/magento/magento2/issues/31853)

<!-- ENGCOM-8894 -->

* `PUT /V1/products/:sku` REST端點現在會依預期重新產生產品URL重寫。 之前，端點會重新產生產品`url_key`值，但不會重寫URL。 [GitHub-30316](https://github.com/magento/magento2/issues/30316)

### 使用者

<!-- MC-40777  magento/magento2#31998-->

* 您現在可以儲存有效的新使用者角色（管理員&#x200B;**系統** > **許可權** > **使用者角色**），並選取整個`Catalog`樹狀結構，不包括`Edit Product Design` （ **目錄** > **詳細目錄** > **產品** > **編輯產品設計**）。 之前，應用程式沒有儲存此角色的使用者所做的產品變更，且會顯示此錯誤： `Not allowed to edit the product's design attributes`。 [GitHub-31973](https://github.com/magento/magento2/issues/31973)

<!-- MC-38442-->

* 應用程式現在會在為新管理員產生電子郵件時，使用正確的自訂電子郵件範本。 以前，應用程式使用舊的預設範本，省略了管理員的名字和姓氏。

<!-- MC-38122-->

* 應用程式現在會在傳送電子郵件給新使用者時，使用正確的電子郵件範本。 以前，即使選取了自訂範本，應用程式也會使用預設範本。

### VersionCMS

<!-- MC-39953-->

* 應用程式現在會在您變更版面配置後，將正確的主題套用至CMS頁面。 先前，無論指派給頁面的佈景主題為何，應用程式都會在您儲存版面變更後，將指派的佈景主題變更為Luma。

<!-- MC-40431-->

* 現在，具有受限制角色的管理員可以成功新增、更新或複製其有權存取的頁面（這些頁面已指派給階層節點）。 之前，應用程式在這些情況下會擲回嚴重錯誤。

### 影片

<!-- MC-42059 ENGCOM-9039-->

* 現在當進階JavaScript套件組合啟用及使用時，產品庫可如預期提供影片。 [GitHub-32501](https://github.com/magento/magento2/issues/32501)

<!-- ENGCOM-8532-->

* 屬於可設定產品之簡單產品的YouTube影片現在可如預期運作。 之前，影像是依ID而非位置排序。 因此，部分影片被視為影像。 [GitHub-29690](https://github.com/magento/magento2/issues/29690)

### Visual Merchandiser

<!-- MC-40797-->

* 使用Visual Merchandiser載入的「管理員」類別頁面效能已改善。 載入管理員類別頁面不再產生大型資料庫查詢。

### Web API框架

<!-- MC-41758-->

* 目錄API現在可以新增新值和移除舊值，正確更新產品的自訂選項值。 之前API不會刪除舊值。

<!-- MC-34431-->

* POST `/V1/guest-carts/:cartId/billing-address`現在會以整數傳回位址ID，而非字串。

### 網站限制

<!-- MC-38516-->

* 現在，購物者會被重新導向至他們嘗試存取的頁面，然後再被提示登入。 之前，在啟用網站限制且限制模式設定為&#x200B;**私人銷售：僅登入**&#x200B;的部署中，購物者會重新導向至商店首頁。

### Widget

<!-- MC-39128-->

* 管理員現在可以刪除所有Widget版面更新。 先前，當Widget有多個版面更新時，管理員只能刪除第一個版面。

<!-- MC-39107-->

* 按一下產品Widget上的&#x200B;**加入購物車**&#x200B;按鈕不再導致頁面重新載入。 先前，按一下產品Widget上的&#x200B;**加入購物車**&#x200B;按鈕導致目前頁面在產品加入購物車之前重新載入。

<!-- MC-23590-->

* 當&#x200B;**錨點自訂文字**&#x200B;欄位空白時，TinyMCE中的CMS階層節點連結Widget現在會如預期呈現階層連結。

### 希望清單

<!-- MC-40651 ENGCOM-8769-->

* 當您從願望清單按一下產品的&#x200B;**編輯專案**&#x200B;按鈕時，應用程式不再重設可設定產品的組態設定。 [GitHub-32119](https://github.com/magento/magento2/issues/32119)

<!-- MC-40417-->

* 當您在希望清單中使用可自訂的檔案選項來更新產品時，應用程式現在會顯示正確的產品價格。 以前，應用程式顯示錯誤的產品價格，並且不顯示上傳檔案的連結。

<!-- MC-39060-->

* 對於有多個希望清單的客戶，其希望清單中的產品總數現在與希望清單中的專案數量相符。 之前缺貨的產品會包含在產品總數中。

<!-- MC-36779 magento/magento2#31110-->

* 將產品新增至訂單後，應用程式現在會從願望清單中移除產品。 [GitHub-30260](https://github.com/magento/magento2/issues/30260)

<!-- MC-34456 ENGCOM-8816-->

* 購物者現在可以從願望清單新增相關產品至購物車。 以前，當購物者按一下「相關產品」區段的「**選取全部**」連結時，應用程式僅新增可設定的產品，而非可設定的產品及其相關產品。 [GitHub-32274](https://github.com/magento/magento2/issues/32274)

## 已知問題

**問題**： reCAPTCHA停用時出現&#x200B;_JavaScript錯誤_。 如果停用簽出reCAPTCHA，則簽出會繼續進行，但應用程式會在主控台記錄檔中顯示`Uncaught TypeError`錯誤。  此問題將在較新版本中修正。<!-- MC-42589 42649-->

**問題**： _內容安全性原則錯誤_。 店面在主控台記錄檔中顯示下列錯誤： `The Content-Security-Policy directive frame-ancestors does not support the source expression unsafe-inline`。 店面效能不受影響。<!-- MC-42613-->

**問題**： _禮品卡金額的PayPal信用卡顯示異常_。 啟用PayPal信用並設定多個禮品卡金額時，如果購物者變更禮品卡價值的金額，店面不會更新分期付款的金額。 Adobe Commerce 2.4.4和Magento Open Source 2.4.4將修正此問題。<!-- MC-42499 AC-344-->

**問題**： _SKU新增至購物車的產品無法使用&#x200B;**新增至訂單**&#x200B;按鈕_。  在由SKU新增產品至訂單後，當您按一下&#x200B;**新增至訂單**&#x200B;按鈕時，應用程式會顯示此錯誤訊息： `An error has happened during application run`。 產品未新增至購物車。 **因應措施**：使用「新增產品」功能。<!-- AC-345-->

**問題**： GraphQL `category`和`categoryList`查詢會忽略類別許可權，這些許可權會判斷共用目錄中的類別是否已隱藏或公開。 店面目前會顯示已指派或未指派給共用目錄的所有類別。 這會影響Adobe Commerce 2.4.3部署，這些部署會實作已啟用B2B共用目錄的PWA店面。<!-- MC-42528-->

## 社群貢獻

我們感謝更廣泛的Magento Open Source社群，並感謝他們為此版本所作出的貢獻。

社群工程團隊[Magento貢獻者](https://magento.biterg.io/app/kibana)會依月份、季度和年度維護最佳貢獻個人和合作夥伴的清單。 從該貢獻者頁面，您可以前往GitHub上的合併個人資料連結。

### 合作夥伴貢獻

下表重點說明合作夥伴所做的貢獻。 下表列出提出提取請求的合作夥伴、外部提取請求，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-3-partner.md}}

### 個人貢獻者

下表列出我們社群成員的貢獻。 此表格列出外部提取請求、與其相關聯的GitHub問題編號（如果有的話），以及提出提取請求的社群成員。

{{$include /help/_includes/release-notes/engcomm-2-4-3-issues.md}}

### 系統需求

我們的技術棧疊是以PHP和MySQL為基礎所建置。 如需詳細資訊，請參閱[系統需求](../../../installation/system-requirements.md)。

### 安裝和升級指示

您可以使用[Composer](../../../installation/composer.md)安裝Adobe Commerce 2.4.3。

## 移轉工具套件

資料移轉工具可協助將現有Magento 1.x存放區資料傳輸至Magento 2.x。此命令列介麵包含驗證、進度追蹤、記錄和測試功能。 如需安裝指示，請參閱[安裝資料移轉工具](../../../tools/data-migration-tool/install.md)。 請考慮探索或參與[資料移轉存放庫](https://github.com/magento/data-migration-tool)。

[程式碼移轉工具組](https://github.com/magento-commerce/code-migration)可協助將現有的Magento 1.x存放區擴充功能和自訂功能傳輸至Magento 2.x。命令列介麵包含轉換Magento 1.x模組和版面的指令碼。

<!-- Last updated from includes: 2023-06-06 14:26:38 -->
