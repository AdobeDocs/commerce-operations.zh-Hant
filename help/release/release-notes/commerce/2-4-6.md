---
title: Adobe Commerce 2.4.6發行說明
description: 瞭解2.4.6 Adobe Commerce版本的新功能、增強功能、錯誤修正和已知問題。
exl-id: c25f3ad8-da18-421f-a77a-03f1cc9c45e4
source-git-commit: 1d5d0846680b7b810d8ed10f4be3787342baf742
workflow-type: tm+mt
source-wordcount: '9901'
ht-degree: 0%

---

# Adobe Commerce 2.4.6發行說明

Adobe Commerce 2.4.6推出對PHP 8.2的支援。PHP 8.1仍受到完全支援，但對PHP 7.4的支援已移除。 其中包括顯著的效能與擴充性增強功能。 已最佳化大量購物車作業和類別樹狀結構轉譯回應的GraphQL作業。 此發行版本推出Adobe Commerce擴充功能中繼套件。

此版本包含300多項品質修正和增強功能。 核心撰寫器相依性和協力廠商程式庫已升級至與PHP 8.2相容的最新版本。

{{bics}}

## 其他發行資訊

雖然這些功能的程式碼已隨附在Adobe Commerce核心程式碼的發行版本中，但其中幾個專案(例如B2B、頁面產生器和Progressive Web Application(PWA) Studio)也獨立發行。 這些專案的錯誤修正記錄在每個專案專用的單獨發行資訊中，可在每個專案的檔案中找到。

## Adobe Commerce 2.4.6重要功能

請檢視此版本中的下列重點內容。

### 安全性增強功能

此版本包含八項安全性修正和平台安全性改善。

目前尚未發生與這些問題相關的已確認攻擊。 不過，某些漏洞可能會被利用來存取客戶資訊或接管管理員工作階段。 這些問題大多需要攻擊者先取得管理員的存取權。 因此，我們提醒您採取一切必要步驟來保護您的管理員，包括但不限於以下工作：

* IP允許清單
* [雙因素驗證](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* 使用VPN
* 使用唯一位置，而非 `/admin`
* 良好的密碼衛生

另請參閱 [Adobe安全性公告](https://helpx.adobe.com/security/products/magento/apsb23-17.html) 以取得這些已修正問題的最新討論。

#### 其他安全性增強功能

此版本的安全性改善專案透過最新的安全性最佳實務，改善了合規性，包括：

* 已透過對網格檢視、大量動作和匯出中的動作進行更具體的稽核，解決了管理動作記錄中的空白。 <!-- AC-1553 -->

* 在付款處理期間發生未預期的錯誤時，reCAPTCHA驗證不會在結帳期間失敗。 [GitHub-35093](https://github.com/magento/magento2/issues/35093) <!-- AC-2642 -->

* **新的系統設定，可在管理員使用者變更電子郵件時要求電子郵件確認**. 為了減少網站漏洞，新增了新的系統組態設定（預設為停用），以在管理員使用者變更電子郵件時要求電子郵件確認： **[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Customer Configuration]** > **[!UICONTROL Account Information Options]** > **[!UICONTROL Require email confirmation if an email has been changed]**. 啟用此選項後，每當管理員使用者變更其電子郵件地址，應用程式都會要求電子郵件確認。 此變更會影響下列模組： `Magento_Customer`. <!-- AC-3064 -->


### 平台增強功能

Adobe Commerce 2.4.6推出對PHP 8.2的支援。PHP 8.1仍受到完全支援。 <!-- AC-6598 -->

PHP 7.4支援已從此版本中移除。 您無法在PHP 7.4上執行Adobe Commerce 2.4.6。

Adobe Commerce 2.4.6現在支援：

* Composer 2.2.x.已移除Composer 1.x。 <!-- AC-2839 -->

* Redis 7.0.x。雖然與Redis 6.2的相容性依然存在，我們建議將此版本部署為Redis 7.0.x，因為Redis 6.2預期將於2024年結束生命週期。 <!-- AC-6606 -->

* OpenSearch現在支援作為Adobe Commerce內部部署和雲端部署的預設搜尋引擎。 它支援作為Magento Open Source的獨立搜尋引擎。 此版本支援OpenSearch v2.x，並已經過OpenSearch 2.5測試。雖然與OpenSearch 1.x仍相容，我們建議將此版本與OpenSearch 2.x搭配使用。您可以在雲端和內部部署上使用OpenSearch 2.x安裝並執行Adobe Commerce和Magento Open Source2.4.6 [搜尋引擎必要條件](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/prerequisites/search-engine/overview.html). <!-- AC-449 3555 -->

* Elasticsearch8.x。另請參閱 [升級Elasticsearch](../../../upgrade/prepare/prerequisites.md#upgrade-elasticsearch). <!-- AC-6597 -->

* MariaDB 10.6 （LTS版本）。 此版本仍與MariaDB 10.4相容，但建議您升級至MariaDB 10.6。 <!-- AC-6921 -->

#### 其他升級和取代

* DHL結構描述已從v6.2移轉至v10.0。 <!-- AC-3023-->

* 過時的JavaScript程式庫已更新至最新版本，且過時的相依性已移除。 這些變更可回溯相容。 <!-- AC-2036-->

* PHP 7.4相容性已從Commerce程式碼基底中移除。 <!-- AC-2841-->

* Symfony相依性已升級至新的LTS版本。 相依性包括：<!-- AC-2656-->

   * `friendsofphp/php-cs-fixer`
   * `symfony/console`
   * `symfony/event-dispatcher`
   * `symfony/finder`
   * `symfony/process`
   * `web-token/jwt-framework`

* `jquery-migrate` 已從Commerce程式碼基底中移除。 [GitHub-21406](https://github.com/magento/magento2/issues/21406) <!-- AC-1199 -->

* 已升級 `jQuery/fileUpload` 程式庫升級至v10.32。 <!-- AC-2658-->

* 已從程式碼基底中移除已到期的Zend架構(ZF1)元件。 另請參閱 [醒目提示與舊版不相容的變更](https://developer-stage.adobe.com/commerce/php/development/backward-incompatible-changes/highlights/).<!-- AC-1512 -->

* Laminas相依性已更新為支援PHP 8.2。 <!-- AC-7019-->

* 此 `laminas/laminas-dependency-plugin` Composer外掛程式已移除。 [GitHub-36515](https://github.com/magento/magento2/issues/36515) <!-- AC-7100-->

* 已取代 `Zend_Filter` 替換為 `laminas/laminas-filter`. <!-- AC-5922-->

* 已升級 `web-token/jwt-framework` 升級至v3.0.5。 （最新版本） <!-- AC-3772-->

* 已升級 `allure-framework/allure-phpunit` 升級至v2.x。 <!-- AC-2660-->

* 已升級 `Chart-js` 程式庫升級至v3.9.1 <!-- AC-2661-->


### 效能與擴充性增強功能

* **改善影響許多客戶區段的作業效能**. 商戶可透過啟用新的組態設定，改善涉及100多個客戶區段的營運效能。 此 **[!UICONTROL Real-time Check if Customer is Matched by Segment]** 您可以視需要停用設定，以減少根據客戶驗證每個客戶區段來縮短處理時間。 另請參閱 [客戶區段驗證](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/configuration.html#customer-segments-validation). <!-- AC-6832 ACPT-835-->

* **用於限制產品格線中顯示之產品數量的新系統組態設定**. 商家可以使用新的 **[!UICONTROL Limit Number of Products in Grid]** 組態設定以改善產品網格效能。 此限制預設會設定為20000，只會影響UI元件使用的產品集合。 限制顯示的產品數目，可提升填入超過200,000項產品的網格的作業效能。 另請參閱 [限制格線中的產品數量](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/configuration.html#limit-number-of-products-in-grid)<!-- ACPT-42 -->

* **改善匯入效能（每分鐘最多100,000筆記錄）**. 商家可以使用新的 `POST /rest/<store_view_code>/V1/import/csv` REST API端點可將資料匯入Adobe Commerce。 此端點提供與管理員匯入功能相同的功能，並支援使用CSV檔案來建立、更新及移除產品、產品定價和客戶實體。 另請參閱 [匯入資料](https://developer.adobe.com/commerce/webapi/rest/modules/import/). <!-- ACPT-6 -->

* **透過負載平衡改善高輸送量訂單處理效能**. 雲端基礎結構上的Adobe Commerce 2.4.6客戶如果同時有大量的訂單（每分鐘1000個訂單），現在可以透過平衡資料庫上不同節點的負載來改善訂單處理效能。 商家可以為MySQL資料庫和Redis執行個體啟用次要連線，以重新平衡此負載。 另請參閱 [高輸送量訂單處理](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/high-throughput-order-processing.html#load-balancing) <!-- ACPT-495 -->


### Adobe Commerce擴充功能中繼資料

此版本推出Adobe Commerce擴充功能中繼套件v1.1.0，自動將特定Adobe Commerce擴充功能與此核心版本整合。 在下列情況下，將會安裝此中繼資料中包含的這些擴充功能版本： `composer update` 在升級至最新核心版本時，會簡化升級這些擴充功能的程式。 這些擴充功能仍會維持獨立的發行排程。

Adobe Commerce 2.4.6的Adobe Commerce擴充功能中繼資料包含下列兩個擴充功能：

* [Bolt快速簽出](https://experienceleague.adobe.com/docs/commerce-merchant-services/quick-checkout/overview.html)
* [Adobe Commerce的Adobe I/O事件](https://developer.adobe.com/commerce/events/get-started/)

此擴充功能中繼資料包的未來版本將包含其他擴充功能。

### Adobe Commerce的Adobe I/O事件

Adobe Commerce的Adobe I/O事件會擷取Commerce事件，並將資料從Adobe Commerce傳輸至其他Adobe系統。 開發人員可以在Adobe Developer App Builder中建立雲端原生應用程式，訂閱Commerce事件，例如詳細目錄更新、訂單狀態變更和價格更新。 開發人員可以使用此功能交換資料，以協調其關鍵任務系統中的整個購買者歷程。

### 協助工具更新

此版本的重點在於在Venia (PWA)上建立更易感知、可操作、可理解和強大的店面體驗。 這些增強功能包括：

<!-- AC-2479-->

* 的視覺文字標籤 **[!UICONTROL Sign in]** 按鈕現在符合其可存取的名稱。 （最佳實務建議讓UI元素的協助工具名稱以可見的標籤文字開頭。）

<!-- AC-2481 2492-->

* 說明性的可存取名稱已新增至整個店面的按鈕。

<!-- AC-2488-->

* 口頭描述標籤已新增至 **[!UICONTROL Has Video]** 核取方塊。

<!-- AC-2787-->

* 僅限鍵盤的使用者現在可以存取店面上的所有頁面功能。 過去，購物者無法僅使用按鍵來存取子導覽連結。


### Adobe Commerce與Adobe IMS整合

下列Adobe IMS模組已與Adobe Commerce 2.4.6核心程式碼脫鉤，現在封裝為個別的中繼套件：

* `adobe-ims`
* `adobe-ims-api`
* `admin-adobe-ims`

新 `adobe-ims-metapackage` v2.2.0與Adobe Commerce 2.4.6搭配。此版本未變更任何功能。<!-- CABPI-505-->


### B2B

GraphQL API現在已完整公開「公司採購單」功能。 此發行版本引進了兩個GraphQL結構描述：

* 採購單GraphQL結構描述涵蓋B2B公司使用者採購單管理功能，例如建立、編輯和刪除採購單。 另請參閱 [採購單(B2B)](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/purchase-order/).
* 採購單規則GraphQL結構描述可讓您建立、編輯和刪除核准規則，以及手動驗證採購單。 另請參閱 [採購單核准規則(B2B)](https://developer.adobe.com/commerce/webapi/graphql/schema/b2b/purchase-order-rule/).

此版本包含多項錯誤修正。 另請參閱 [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).


### Braintree

<!-- BUNDLE-3107-->

* 此 **[!UICONTROL Pay Later]** 義大利和西班牙的按鈕和橫幅（訊息）已啟用Braintree。

<!-- BUNDLE-3109-->

* 已啟用PayPal Vault的PayLater傳訊。

<!-- BUNDLE-3140-->

* 新增詐騙保護功能和ACH網頁鉤點。 在Braintree中做出風險決定時會觸發詐騙防護Web鉤點。 當ACH付款的狀態更新為，就會觸發ACH網頁鉤點 `settled` 或 `settlement decline`.

<!-- BUNDLE-3141-->

* 新增LPM （本地付款方法） Web鉤點。

### GraphQL

GraphQL效能增強功能包括：

**改善查詢類別時啟用類別許可權的回應時間**. 查詢啟用了類別許可權，且包含許多客戶群組或共用目錄的類別中的產品時，回應時間已有所改善。 支援此效能改善的程式碼變更包括： <!-- B2B-2179 2404 2329-->

* GraphQL解析器操作已最佳化。
* 資料提供者不再為每個處理中的新產品重新設定執行階段快取的資料，進而改善效能。 <!-- B2B-2452-->
* 已在GraphQL解析程式中最佳化產品許可權處理。 產品許可權現在已套用至產品集合，而非依個別產品而定。  <!-- B2B-2404-->
* 已最佳化讀取共用目錄的許可權(在 `addProductsToCart` 突變。 <!-- B2B-2424-->
* 產品許可權已透過產品內嵌片段最佳化。 <!-- B2B-2459-->

**類別樹狀結構演算的最佳化效能**. 此 `categoryList` 查詢已最佳化，以支援具有大量類別的客戶。 使用此查詢來搜尋超過1500個類別（包含最多5個層級的巢狀子類別）的商家將會注意到效能改善。 藉由移除不必要的方法呼叫、改善類別樹狀結構的快取，以及遞回載入類別資料，改善透過重構程式碼來載入類別子系的程式。  支援此效能改善的程式碼變更包括： <!-- B2B-2484 2469 2472-->

* 類別模型的自訂屬性中繼資料擷取功能已獲得改善。 <!-- B2B-2463-->
* 類別ID擷取功能已改善，並且 `getChildren` 通話已減少。 <!-- B2B-2464-->
* 類別子項載入已得到改善。<!-- B2B-2469-->

**減少大量購物車作業查詢回應時間**. 新增產品突變已經過最佳化，在新增最多500個簡單且可設定的產品時可改善查詢效能。 套件組合產品不受影響。 最佳化的突變包括 `addProductsToCart`， `addConfigurableProductsToCart`， `addDownloadableProductsToCart`， `addSimpleProductsToCart`， `addVirtualProductsToCart`，`addWishlistItemsToCart`、和 `updateCartItems`. <!-- B2B-2331 2423-->

**客戶查詢現在支援訂單排序**. 此 `orders` 的輸出物件 `customer` 查詢現在包含排序欄位。 您現在可以依訂單編號或建立日期，以遞增或遞減順序來排序訂單。 <!-- AC-6903-->

新的突變：

`deleteCustomer` <!-- AC-2879-->


### 頁面產生器

Page Builder v.1.7.3與Adobe Commerce 2.4.6相容。


### PWA Studio

PWA Studio v.13.0.x與Adobe Commerce 2.4.6相容。其中包含多項改善協助工具的增強功能。 如需有關錯誤修正的資訊，請參閱 [PWA Studio版本](https://github.com/magento/pwa-studio/releases). 另請參閱 [版本相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 以取得PWA Studio版本及其相容Adobe Commerce核心版本的清單。


### 已知問題

**問題**：New Relic目前與PHP 8.2不相容。執行New Relic的部署可以在PHP 8.1上執行Adobe Commerce 2.4.6，但無法在PHP 8.2上執行。 **因應措施**：在PHP 8.1上執行Adobe Commerce 2.4.6，直到發行支援PHP 8.2的新版New Relic為止。此版本預計於2023年夏季發行。 <!-- AC-7769-->

## 已修正的問題

我們已修正Adobe Commerce 2.4.6核心程式碼中的數百個問題。 Adobe Commerce 2.4.6中包含的部分已修正問題說明如下。

### 安裝、升級、部署

<!-- ACP2E-1168-->

* 在具有多個地區設定和網站的標準或精簡部署期間，靜態內容部署不再逾時或失敗。

<!-- ACP2E-923-->

* 壓縮策略在執行靜態內容部署(`bin/magento set:static-content:deploy -f --strategy compact`)。

<!-- AC-5994-->

* 執行中 `bin/magento setup:di:compile -vvv` (或使用 `-v` 或 `-vv` options)現在會在失敗時傳回資訊性訊息。 [GitHub-35391](https://github.com/magento/magento2/issues/35391)

<!-- AC-5973-->

* Adobe Commerce當您執行 `bin/magento setup:upgrade` 已在執行資料移轉工具的部署中的命令： `PHP Fatal error:  Declaration of Migration\Logger\Logger::addRecord(int $level, string $message, array $context = []): bool must be compatible with Monolog\Logger::addRecord(int $level, string $message, array $context = [], ?Monolog\DateTimeImmutable $datetime = null): bool in /var/www/html/vendor/magento/data-migration-tool/src/Migration/Logger/Logger.php on line 34`. [GitHub-35604](https://github.com/magento/magento2/issues/35604)

<!-- AC-5970-->

* 此 `bin/magento setup:db:status` 命令在執行MySQL 8.0.29的環境中不再失敗。以前，命令輸出錯誤地指出宣告式結構描述已過時。 [GitHub-35671](https://github.com/magento/magento2/issues/35671)

<!-- AC-1377-->

* 此 `composer install` 命令不再覆寫 `.gitignore` 檔案。 [GitHub-32888](https://github.com/magento/magento2/issues/32888)

<!-- AC-6671-->

* 執行中 `bin/magento sampledata:remove` 在Alpine Linux上升級後移除範例資料不再失敗，並出現此錯誤： `Undefined constant "MagentoHackathon\Composer\Magento\Deploystrategy\GLOB_BRACE`. [GitHub-36062](https://github.com/magento/magento2/issues/36062)


<!-- AC-6933-->

* `bin/magento setup:upgrade` 現在會在第一次執行後成功執行 `composer install --no-dev`. [GitHub-36351](https://github.com/magento/magento2/issues/36351)

<!-- AC-6796-->

* 例外狀況與例外狀況棧疊追蹤專案現在包含在中 `var/log/exception.log`. [GitHub-36054](https://github.com/magento/magento2/issues/36054)

<!-- AC-2681-->

* 當您使用命令列設定沒有密碼的Redis連線時，Adobe Commerce現在會擲回引數驗證錯誤。

### 協助工具

<!-- AC-6678 6679 6677-->

* 此 **[!UICONTROL Proceed to Checkout]**， **[!UICONTROL Review Order]**、和 **[!UICONTROL Place Order]** 現在，簽出工作流程中的按鈕可如預期般與鍵盤輸入搭配使用。

<!-- AC-2485-->

* 使用時焦點在按鈕上的視覺指示 **[!UICONTROL TAB]** 或 **[!UICONTROL SHIFT + TAB]** 現在，導覽頁面控制項可如預期般運作。

#### 熒幕朗讀程式

<!-- AC-2498-->

* 訂購記錄頁面的熒幕助讀程式現在會讀取正確的影像說明。

熒幕助讀程式現在會宣佈：

* 搜尋結果中如預期找到的專案總數 <!--- AC-3522-->
* 使用者使用鍵盤控制成功登入時的登入使用者名稱 <!--- AC-6477-->
* 產品搜尋結果頁面標題現在會讀取以下專案的正確值： `<title>` 元素 <!--- AC-2489-->
* 輸入欄位是否為必要欄位 <!--- AC-2494-->
* 更正摺疊式功能表元素的目前狀態（摺疊和展開） <!--- AC-2487-->
* 當使用者按一下 **[!UICONTROL Create an account]** 按鈕 <!---AC-6676-->



### 套裝產品

<!-- ACP2E-906-->

* 透過API更新特定商店檢視的套件產品現在不會覆寫相同套件產品的其他商店檢視資料。 之前，針對其他商店檢視，套件產品選項標題會被第一個選項標題覆寫。

<!-- AC-3769-->

* 現在可從「管理員」成功篩選套件產品 **[!UICONTROL Catalog]** > **[!UICONTROL Products]** 使用荷蘭語言環境時。 之前，當您嘗試篩選時，Adobe Commerce會顯示此錯誤 `Type: Bundle Product`： `Something went wrong with processing the default view and we have restored the filter to its original state`. [GitHub-35704](https://github.com/magento/magento2/issues/35704)

<!-- ACP2E-1038-->

* 當套件產品的特殊價格超過1000時，產品格線不再擲回例外狀況。 之前，當您依SKU搜尋產品或導覽至 **[!UICONTROL Catalog]** > **[!UICONTROL Products]**，Adobe Commerce擲回此錯誤： `Non Numeric value encountered`. [GitHub-36284](https://github.com/magento/magento2/issues/36284))

<!-- ACP2E-1220-->

* 包含組合與簡單產品之訂單的銷退折讓單與商業發票PDF中的欄位，現在可正確呈現。 以前，欄扭曲或不對齊。

<!-- ACP2E-1315-->

* 在GraphQL中包含 `BundleProduct` 片段， `items.options.product` 物件包含預期的資料。 過去，物件在某些情況下可能為Null。

<!-- AC-6548-->

* 現在，在下列情況下，組合選項的小數數量會正確呈現 **[!UICONTROL Quantity uses decimals]** 已啟用。 以前，只演算數量的整數部分，而不是分數元件。 例如，數量1.5會呈現為1.0。 [GitHub-35964](https://github.com/magento/magento2/issues/35964)

<!-- B2B-2453-->

* GraphQL產品查詢現在只會傳回所查詢商店範圍內的套件產品選項。

<!-- B2B-2455-->

* 產品若未指派至類別，但屬於套件或分組產品的產品選項，現在會在回應中傳回，當 **[!UICONTROL Allow Category Browsing]** 已針對傳送查詢的客戶啟用組態設定。

### 快取

<!-- ACP2E-134-->

* 訂單履行後不再排清整頁快取，除非訂購的產品無庫存。 以前，每當建立出貨時，就會清除類別的快取。

<!-- ACP2E-1321-->

* 現在，在設定L2快取記憶體且將遠端資料部分逐出時，可以成功快取資料。 先前，只排清資料快取而沒有這些資料的雜湊後，當資料雜湊存在時，新快取不會儲存。

<!-- B2B-2471-->

* 已修正的瑕疵 `CatalogUrlResolverIdentity` 和 `CmsUrlResolverIdentity` 以防止快取。 這會影響多個請求上的路由查詢快取。

### 購物車與結帳

<!-- ACP2E-965-->

* 當購物車包含最小數量的簡單產品時，購物者現在可以將其他商品新增到購物車中。

<!-- ACP2E-964-->

* 擷取購物車資料的REST API呼叫現在會傳回相同的資料 `grand_total` 和 `base_grand_total` 值（當商店貨幣與基本貨幣相同時）。 [GitHub-34649](https://github.com/magento/magento2/issues/34649)

<!-- ACP2E-962-->

* 的匯出值 **[!UICONTROL Maximum Qty Allowed in Shopping Cart]** 現在符合在管理員設定中設定的預設值。

<!-- ACP2E-889-->

* Adobe Commerce現在可正確計算訂單的退款總計，並附送貨折扣。

<!-- ACP2E-876-->

* Google reCAPTCHA現在對店面訂單如預期般運作。 先前，當購物者首次嘗試下訂單前未先選取Google ReCAPTCHA時，Adobe Commerce會顯示這些錯誤： `ReCaptcha validation failed, please try again` 和 `No such cart with id = ID`.

<!-- AC-2338-->

* 驗證碼影像重新整理現在會遵循管理員組態設定，且在設定停用時不會觸發。 以前，無論設定已啟用或停用，只要付款方式變更就會觸發重新整理。 [GitHub-34855](https://github.com/magento/magento2/issues/34855)

<!-- ACP2E-479-->

* 當購物者變更購物車頁面上的產品數量而未更新購物車，然後嘗試導覽至下一頁時，Adobe Commerce現在會依預期顯示確認快顯視窗，然後將購物者重新導向至下一頁。

<!-- AC-5987-->

* 在「管理員」中減少產品數量後，購物者現在可以從購物車中減少產品數量。 之前，當購物者嘗試減少產品數量時，Adobe Commerce會擲回下列錯誤： `The requested qty is not available`. [GitHub-35780](https://github.com/magento/magento2/issues/35780)

<!-- AC-6744-->

* 當產品數量在多重運送結帳期間超過設定的上限時，Adobe Commerce不再在JavaScript主控台中擲回錯誤。 Adobe Commerce現在改為顯示資訊性錯誤訊息。 [GitHub-36184](https://github.com/magento/magento2/issues/36184)

<!-- ACP2E-1276-->

* 當購物者使用鍵盤上的向下箭頭鍵變更產品數量時，購物車頁面上的專案數量不再以負數表示。 [GitHub-36299](https://github.com/magento/magento2/issues/36299)

<!-- ACP2E-1232-->

* 購物者變更購物者所屬的客戶群組後，無法再將類別中的產品新增至購物車，而此類別現在已不允許使用。 當許可權組態設定變更時，Adobe Commerce現在會檢查特定類別的客戶群組許可權存取權。

<!-- ACP2E-926-->

* 建立管理員訂單前，客戶購物車不再清空，如果訂單取消或放棄，購物車內容現在會還原。 現在，只有在建立訂單後，才會從購物車移除專案。 先前，每當管理員使用者嘗試在管理員管理購物車頁面上建立訂單時，購物車都會被清空。

<!-- AC-6939-->

* 迷你購物車現在會在您執行後顯示正確的產品影像 `bin/magento catalog:image:resize`. 以前，所有影像都會取代為預設的產品預留位置影像。 [GitHub-35535](https://github.com/magento/magento2/issues/35535)

<!-- AC-2376-->

* 當送貨地址包含擴充功能屬性時，簽出現在可以成功完成。 之前，Adobe Commerce擲回此錯誤： `Object of class Magento\Quote\Api\Data\AddressExtension could not be converted to string`. [GitHub-34202](https://github.com/magento/magento2/issues/34202)

<!-- AC-2793-->

* 此 `addBundleProductsToCart` 如果必要的產品選項沒有值，突變就不會再將產品加入報價中。 [GitHub-25676](https://github.com/magento/magento2/issues/25676)

<!-- B2B-2458-->

* Adobe Commerce現在會在以下情況下傳回資訊性訊息： `addProductsToCart` 將產品新增至購物車時許可權不足的變異會失敗。

<!-- ACP2E-1242-->

* 使用「快速訂購」新增數量超過可用存貨的產品時，Adobe Commerce不再在購物車頁面上擲回錯誤。

<!-- AC-6312-->

* 此 `setGiftOptionsOnCart` 變異現在需要客戶授權才能進行客戶購物車操作。

### 購物車價格規則

<!-- AC-2242-->

* 在規則建立期間設定的購物車價格規則免運費選項，現在會依預期套用至訂單。 以前，在建立規則期間套用的免運費選項會在結帳期間被忽略，而且套用規則時不允許免運費。 [GitHub-35013](https://github.com/magento/magento2/issues/35013)

<!-- ACP2E-1074-->

* 此 `discount_percent` 的欄 `sales_order_item` 當料號折扣數量未設定或大於或等於訂單料號數量時，現在會依預期植入產品表格中的折扣百分比。 之前，將購物車價格規則套用至此產品時，系統不會填入此欄。

### 目錄

<!-- ACP2E-1181-->

* 產品清單Widget不再為登入的購物者顯示不正確或快取的價格。 首頁Widget中顯示的價格現在符合購物者的地址，並且會在購物者更新地址時更新。 之前，瀏覽器快取不會根據客戶群組稅捐規則更新首頁上的產品價格。

<!-- ACP2E-1007-->

* 「比較產品」清單功能現在可在多網站部署中正常運作，且須視網站而定。

<!-- ACP2E-900-->

* 當您重新載入產品詳細資料頁面時，Adobe Commerce不再顯示上一頁的資料。 先前，重新載入產品詳細資料頁面時，第一個索引標籤的資料會與新載入的資料合併一秒。

<!-- ACP2E-816-->

* 現在，具有子類別的類別可以如預期在行動裝置上的主功能表中展開。 過去，購物者無法在行動部署中開啟或展開具有子類別的類別。 [GitHub-35329](https://github.com/magento/magento2/issues/35329)

<!-- ACP2E-789-->

* 現在當產品指派至新網站或商店時，類別清單會如預期更新。 之前，產品價格指數器不會標示為無效，隨後會在上重新觸發 `cron` 如預期般執行。 因此，價格指數表格中遺漏了產品的價格專案，且未顯示在新的商店或網站上。

<!-- AC-6395-->

* 店面存貨計數現在於以下情況時準確： **[!UICONTROL Display Out of Stock Products]** 已啟用組態設定。 [GitHub-35899](https://github.com/magento/magento2/issues/35899)

<!-- AC-6384-->

* 類別頁面不再為空白，當 **[!UICONTROL Allow All Products Per Page]** 設定已啟用。 [GitHub-35900](https://github.com/magento/magento2/issues/35900)

<!-- AC-6330-->

* 此 **[!UICONTROL Display Out of Stock Products]** 設定選項現在會在啟用時如預期般運作。 先前，在「管理員」上啟用此選項時，所有產品在店面都會顯示為無庫存。 [GitHub-35898](https://github.com/magento/magento2/issues/35898)

<!-- AC-2631-->

* 當類別許可權允許時，指派給批發群組的客戶現在可以將分組的產品新增到其購物車。 如果沒有為客戶群組定義此許可權，則會優先使用組態設定。

<!-- ACP2E-1306-->

* 依布林屬性排序的產品現在可如預期運作。 [GitHub-36390](https://github.com/magento/magento2/issues/36390)

<!-- ACP2E-1206-->

* 目錄價格規則折扣不再套用至固定價格自訂產品選項，而是僅套用至產品的原始價格。

<!-- ACP2E-1027-->

* 現在，當由相關產品規則針對英數字元產品屬性產生時，相關產品可在店面產品詳細資料頁面上成功擷取。 [GitHub-36285](https://github.com/magento/magento2/issues/36285)

<!-- AC-6810-->

* 目錄價格規則現在會考量選取的範圍，並僅套用至其屬性具有符合規則的選項值的網站的產品。 以前，規則不會在多網站部署中考慮選取的範圍。 [GitHub-36049](https://github.com/magento/magento2/issues/36049)

<!-- ACP2E-891-->

* 當購物者從「我的購物車」頁面修改可設定產品時，現在會在產品詳細資料頁面中預先選取色票選項「顏色」和「大小」屬性。 (jQuery 3.x版現在支援 `swatchRenderer` Widget名稱，現為駝峰式大小寫。) 以前不會預先選取色票選項。

<!-- ACP2E-1361-->

* 客戶訂閱價格下降警報後，現在會收到產品價格下降的通知。 過去，由於應用程式層級的快取，系統不會一律傳送價格下降通知。

<!-- ACP2E-1348-->

* 以具有的SKU為基礎的目錄規則 **[!UICONTROL is not one of]** 條件現在可如預期運作。

<!-- AC-729-->

* Adobe Commerce不再根據類別路徑錯誤地假設一個類別是另一個類別的父類別。 先前，當兩個類別相鄰，且一個類別ID以另一個類別的類別ID開頭時，Adobe Commerce假設這些類別具有相同父類別。 [GitHub-32464](https://github.com/magento/magento2/issues/32464)


### 可設定的產品

<!-- ACP2E-1083-->

* 當管理員使用者手動將產品新增至已指派許多簡單產品的可設定產品時，Adobe Commerce不再擲回錯誤。 Adobe Commerce先前會顯示此錯誤： `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- AC-2877-->

* 在停用延期交貨的部署中，購物者無法再將可銷售數量為0的可設定產品新增至購物車。 Adobe Commerce現在表示產品無庫存。 [GitHub-35319](https://github.com/magento/magento2/issues/35319)

<!-- AC-2678-->

* 現在，透過從不同的商店檢視匯入包含許多選項的可設定產品來建立新產品，會如預期產生第一個產品的精確副本。 之前，新產品可設定選項的排序順序不正確，在具有多個商店檢視和區域設定的部署中，標題未轉換為新商店檢視的區域設定。 [GitHub-35200](https://github.com/magento/magento2/issues/35200)

<!-- AC-535-->

* 可設定的產品與所有無庫存的子產品現在會在店面顯示為無庫存。

<!-- AC-6852-->

* 可設定的產品SKU和產品名稱現在可以正確顯示。 之前，在您將「產品詳細資料」群組上方的「屬性」群組移動後，名稱和SKU會顯示為「未定義」。 **[!UICONTROL Stores]** > **[!UICONTROL Attribute set]**. [GitHub-36309](https://github.com/magento/magento2/issues/36309)

### 優惠券

<!-- ACP2E-1053-->

* 管理優惠券代碼工作流程已新增驗證邏輯，以在產生優惠券時強制執行優惠券代碼設定。 之前，優惠券程式碼產生會忽略 **[!UICONTROL Code Length]** 設定時間 **抵用券數量** 值大於2500。

<!-- ACP2E-1029-->

* 使用PayPal Express付款方式結帳期間套用獎勵券時，現在可如預期將獎勵點數新增至客戶帳戶。

<!-- ACP2E-1225-->

* 當購物車價格規則以權重為條件時，您現在可以在建立管理訂單期間套用優惠券代碼。 以前，如果沒有為產品選擇其他欄位，則不會設定優惠券代碼。 [GitHub-36271](https://github.com/magento/magento2/issues/36271)

<!-- ACP2E-1223-->

* 您現在可以依多個購物車價格規則篩選優惠券報表。 [GitHub-36272](https://github.com/magento/magento2/issues/36272)

<!-- AC-2812-->

* 現在，當管理員使用者按下時，會套用並儲存自訂選項 **[!UICONTROL Enter]** 使用自訂選項設定產品時。 之前，您可以選取選項並將產品新增至訂單，但選項未儲存，且系統會提示管理員使用者重新選取產品選項。 [GitHub-35284](https://github.com/magento/magento2/issues/35284)

<!-- AC-6688-->

* 優惠券代碼現在可以成功匯出至Excel XML。 先前，產生的檔案不包含所有選取的優惠券代碼，但只會包含每個頁面選擇器中選取的專案數。[GitHub-36073](https://github.com/magento/magento2/issues/36073)

### cron

<!-- ACP2E-1243-->

* 此 `catalog_index_refresh_price` cron工作現在已成功執行。 之前，Adobe Commerce會在cron執行期間記錄此錯誤： `report.ERROR: Cron Job catalog_index_refresh_price has an error: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens`.

### 貨幣

<!-- ACP2E-1012-->

* 在店面和管理產品價格中新增了自訂貨幣符號和價格之間缺少的空間。 已新增適當的條件和規則運算式，以允許使用貨幣符號的自訂NBSP。 例如，IDRx 105.00先前顯示為IDRx105.00。

### 客戶區段

<!-- ACP2E-1185-->

* 建立新購物車價格規則期間，「管理員」客戶區段格線上的「是/否」篩選器現在可如預期運作。

### 電子郵件

<!-- ACP2E-1063-->

* 從管理員建立訂單後，Adobe Commerce不再傳送客戶副本電子郵件。

<!-- ACP2E-1200-->

* 管理員訂單電子郵件在 **[!UICONTROL Email order confirmation]** 設定已停用。 [GitHub-36256](https://github.com/magento/magento2/issues/36256)

<!-- ACP2E-1151-->

* 對於具有自訂選項的產品，影像選項不再顯示為銷退折讓單、訂單確認和發票客戶電子郵件（預設範本）中的HTML標籤。

### 框架

<!-- AC-6385-->

* 管理員使用者現在可以成功開啟管理員 **[!UICONTROL Store]** > **[!UICONTROL Configuration]** 中沒有國家/地區時的頁面 **歐盟國家** 設定(**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL General]** > **[!UICONTROL Country options]** > **[!UICONTROL European Union Countries]**)。 之前，當管理員使用者嘗試開啟此頁面時，Adobe Commerce擲回此錯誤： `TypeError: explode(): Argument #2 ($string) must be of type string, null given in /var/www/php/folder/vendor/magento/module-config/ViewModel/CountryFilter.php:46`. [GitHub-35901](https://github.com/magento/magento2/issues/35901)

<!-- AC-6361-->

* `jquery.cookie` 相依性現在可與JavaScript相依性正常運作。 之前，您無法使用別名來 `jquery/jquery.cookie`. [GitHub-35913](https://github.com/magento/magento2/issues/35913)

<!-- AC-3226-->

* 此 `bin/magento i18n:collect-phrases` 命令現在包含 `<title>` 轉存的CSV檔案中的文字。 [GitHub-35462](https://github.com/magento/magento2/issues/35462)

<!-- AC-6841-->

* `Magento\Framework\Code\Reader\ArgumentsReader::getParentCall()` 現在支援具名建構函式引數。 您現在可以透過按名稱設定引數來呼叫函式。

<!-- ACP2E-1287-->

* 錯誤現在會如預期般記錄在 `exception.log` 檔案。 之前，雖然錯誤記錄在 `system.log` 檔案，錯誤未登入 `var/log/exception.log`.

<!-- AC-3758-->

* 商戶現在可以指定自訂外部SMTP提供者。 [GitHub-26104](https://github.com/magento/magento2/issues/26104)

<!-- AC-3752-->

* 在執行Adobe Commerce 2.4.3-p2的部署中，現在可以如預期重新授權OAuth整合。 之前，重新授權失敗，錯誤如下： `The attempt to post data to consumer failed due to an unexpected error. Please try again later`. Adobe Commerce也嘗試解密未加密的值。 [GitHub-35313](https://github.com/magento/magento2/issues/35313)

<!-- ACP2E-1201-->

* 正確的 `rowId` 現在當類別為 `urlKey` 會為具有子類別的類別儲存。 先前，錯誤 `categoryId` 在儲存類別時傳遞 `URLKey`.

<!-- ACP2E-981-->

* 產品屬性代碼 `event` 已新增至保留的產品屬性代碼清單，可消除在店面使用此名稱的屬性相關的錯誤。 以前，當產品詳細資訊和搜尋/產品清單頁面出現下列情況時，應用程式會擲回此錯誤： `event` 已使用：  `report.CRITICAL: Error: Call to a member function getStatus() on string in /home/mer33515/public_html/ee24develop/magento2ee/app/code/Magento/CatalogEvent/Observer/ApplyIsSalableToProduct.php:23`.

<!-- AC-5985-->

* 在下單期間發生的店面驗證錯誤訊息現在會一致地顯示。 以前，訊息會出現、摺疊，然後再次出現。 [GitHub-35651](https://github.com/magento/magento2/issues/35651)

<!-- AC-2943-->

* AMQP消費者不再因過時而失敗 `trim()` 在執行PHP 8.1的部署上函式。先前，當AMQP取用者在安裝後啟動時，Adobe Commerce擲回此錯誤： `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in .../vendor/magento/framework-amqp/Config.php on line 143`. [GitHub-35380](https://github.com/magento/magento2/issues/35380)

<!-- AC-2882-->

* 此 `getFilteredTimerIds` 方法現在可如預期運作。  類別 `Magento\Framework\Profiler\Driver\Standard\Stat` 現在相容於PHP 8.1。之前，Adobe Commerce在呼叫此方法時擲回例外狀況。 [GitHub-35307](https://github.com/magento/magento2/issues/35307)

<!-- AC-2784-->

* 已移除對的相依性 `imagemin-svgo` 資料庫。

<!-- AC-2058-->

* 現在，當第一個註解開頭為時，縮制範本程式會成功處理連續註解 `//`. [GitHub-34880](https://github.com/magento/magento2/issues/34880)

<!-- AC-2241-->

* 更正由下列專案發出的資料庫查詢： `BundleGraphQl` 傳回此錯誤的模組： `"debugMessage": "Notice: Undefined offset: 16 in vendor/magento/module-bundle-graph-ql/Model/Resolver/Options/Collection.php on line 130"`.[GitHub-34991](https://github.com/magento/magento2/issues/34991)

### 一般修正

<!-- ACP2E-1068-->

* Adobe Commerce當管理員使用者選取 **[!UICONTROL Last 24 Hours]** 管理統計儀表板中的選項。 過去，Adobe Commerce顯示錯誤的時間範圍。 發生此狀況是因為資料庫的時區保持不變。

<!-- ACP2E-1066-->

* 現在可以針對整數和小數數量產生銷退折讓單。 以前，僅支援整數數量。

<!-- ACP2E-1001-->

* 型別的客戶郵遞區號輸入驗證規則 **僅限數值** 現在可在中按預期運作 **[!UICONTROL Edit Customer Address]** 欄位(**[!UICONTROL Store]** > **[!UICONTROL Attribute]** > **[!UICONTROL Customer Address]**)。 先前儲存客戶地址資訊時不會進行郵遞區號驗證。

<!-- ACP2E-975-->

* 僅限一個網站存取的管理員使用者現在可以使用「以客戶身分登入」功能，成功登入「管理員」。

<!-- ACP2E-873-->

* 全球共用的客戶帳戶現在擁有的地址，這些地址會根據目前網站的允許國家/地區清單進行驗證，並成功儲存。 之前，這些帳戶是根據客戶註冊所在網站的允許國家/地區進行錯誤驗證。

<!-- AC-3167-->

* CMS頁面階層中的階層連結不再顯示於 **[!UICONTROL Enable Hierarchy Functionality]** 已停用。 以前，會顯示階層連結，當購物者按一下階層連結時，畫面會顯示404頁。 [GitHub-35513](https://github.com/magento/magento2/issues/35513)

<!-- AC-2567-->

* 透過「管理員」從所有網站移除產品不再導致下列錯誤： `SQLSTATE[42000]: Syntax error or access violation`. [GitHub-35133](https://github.com/magento/magento2/issues/35133)

<!-- AC-2235-->

* 密碼重設後，超過最大登入失敗嘗試的客戶現在可以登入。 [GitHub-34981](https://github.com/magento/magento2/issues/34981)

<!-- AC-2020-->

* 現在，當管理員使用者新增元素時，動態列元件的行為會與預期相同。 先前，將新的簡單產品新增至分組產品時，列元件的行為不正確。 [GitHub-34850](https://github.com/magento/magento2/issues/34850)

<!-- magento/magento2/pull/35598-->

* 已更正「 」中的拼字錯誤和語法錯誤 `app/code/Magento/Backend/etc/menu.xsd` 檔案。

<!-- magento/magento2/pull/35818-->

* 此 `app/code/Magento/Authorization/README.md` 檔案已更新，以準確說明表格的建立。

<!-- magento/magento2/pull/35940-->

* 此 `recordLogin` 方法已更新，以在使用者模型上設定登入值，並將正確的值保留在 `logdate` 和 `lognum` 的欄位 `admin_user` 表格。 之前，系統不會記錄更新後Admin使用者的登入嘗試。

<!-- magento/magento2/pull/35990-->

* GitHub問題範本已轉換為開發人員體驗問題和功能請求的問題表單。

<!-- ACP2E-961-->

* 此 `Is required` 現在已依照管理員客戶編輯表單的網站範圍正確實作客戶屬性。

<!-- ACP2E-895-->

* 此 **[!UICONTROL Grid Filter Condition Type]** 當符合以下條件，客戶與客戶地址屬性的欄位不再顯示在屬性編輯頁面上 **[!UICONTROL Use in Filter Option]s** 設定已停用。

<!-- AC-6020-->

* 如果商家在建立產品時無法輸入選用的SKU屬性值，Adobe Commerce現在會顯示資訊性錯誤訊息。 之前，當屬性為選擇性時，應用程式會擲回此例外狀況： `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/html/mg244/project-community-edition/vendor/magento/module-eav/Model/Entity/AbstractEntity.php on line 932`. [GitHub-35810](https://github.com/magento/magento2/issues/35810)

<!-- ACP2E-716-->

* 此 **[!UICONTROL Show my quotes]** 篩選 **[!UICONTROL My Quotes]** 頁面現在可如預期運作。 先前，篩選結果會包含其他管理員使用者的引號。

### 禮品卡

<!-- ACP2E-851-->

* 禮品卡產品金額現在與匯入期間CSV檔案中指定的金額相同。 已新增現有選項的檢查，且現在會根據唯一索引鍵更新舊的值。 以前，當禮品卡多次匯入時，禮品卡金額會加倍。

### 贈品包裝

<!-- AC-3061-->

* 當禮品包裝已在訂單層次套用至包含實體和虛擬產品的訂單時，禮品包裝價格現在會如預期顯示在訂單摘要區塊中。 之前，Adobe Commerce不顯示贈品包裝價格。

### GraphQL

<!-- AC-1730-->

* `Types` 在GraphQL程式碼中實作多個介面的使用者，現在可以用 `&` 簽署及 `,` 根據GraphQL `@doc`規格。

<!-- ACP2E-885-->

* 此 `setShippingAddressesOnCart` 突變現在支援將數值區域代碼設定為 `region`. 之前，此變異不適用於數值區域代碼值。

<!-- ACP2E-1237-->

* 此 `products` query現在只會傳回與指定範圍相關聯的稽核。 以前，查詢會從所有商店傳回評論。

<!-- ACP2E-882-->

* 類別許可權現在會在GraphQL請求期間遵循。

<!-- AC-1805-->

* 此 `customer` 查詢現在會篩選具有指定之訂單 `from` 和 `to` 正確範圍。 [GitHub-31537](https://github.com/magento/magento2/issues/31537)

<!-- AC-5984-->

* 此 `product` 查詢現在會在彙總中傳回正確的類別資料。 先前， `attribute_code.category_uid` 傳回值 `category_id` 而非 `category_uid`.

<!-- AC-6084-->

* 此 `customerOrders` 查詢不再擲回 `\"model\" value should be specified`錯誤。 [GitHub-35852](https://github.com/magento/magento2/issues/35852)

<!-- ACP2E-894-->

* 此 `customer` 查詢現在會根據範圍來篩選訂單。 您現在可以指定查詢是否應該依商店、網站或全域篩選訂單。

<!-- ACP2E-1172-->

* 此 `categoryList` query現在會傳回錨定和非錨定父類別的準確產品計數。 新 `is_anchor` 屬性已新增至類別集合選取欄清單。 之前，請求會傳回0個產品計數。 [GitHub-36300](https://github.com/magento/magento2/issues/36300)

<!-- AC-2500-->

* 此 `generateCustomerTokenAsAdmin` 現在當建立Token以登入多存放區部署中的非預設存放區時，突變會如預期般運作。 [GitHub-35084](https://github.com/magento/magento2/issues/35084)

<!-- AC-1731-->

* 此 `createEmptyCart` 變數現在會在使用過期的權杖時，如預期擲回例外狀況。 [GitHub-26112](https://github.com/magento/magento2/issues/26112)

<!-- AC-1965-->

* 已使購物車查詢錯誤訊息更具資訊性。 [GitHub-34546](https://github.com/magento/magento2/issues/34546)

<!-- AC-2798-->

* 的回應中的彙總資料 `products` 查詢現在包含價格型態屬性的正確值 `attribute_code` 和 `label`. [GitHub-28878](https://github.com/magento/magento2/issues/28878)

<!-- AC-6685-->

* 此 `products` 當資料庫首碼具有非null值時，query會如預期傳回類別資訊。 之前，它會傳回 `Internal server error`. [GitHub-36117](https://github.com/magento/magento2/issues/36117)

<!-- AC-1003-->

* 修正的傳回型別 `getCustomerIsGuest` 方法。 [GitHub-29529](https://github.com/magento/magento2/issues/29529)

<!-- B2B-2221-->

* 此 `Magento\CatalogGraphQl\Plugin\DesignLoader` 外掛程式已重構。

<!-- B2B-2379-->

* 當購物車由GraphQL變動初始化時，購物車重新載入現在只會如預期觸發一次。 以前，購物車載入會針對存貨存貨觸發不必要的購物車重新驗證，這會在每次載入購物車時消耗大量資源。

<!-- AC-1726-->

* 已新增 `gift_message` 輸入到 `OrderItemInterface`. [GitHub-29418](https://github.com/magento/magento2/issues/29418)

<!-- AC-2454-->

* GraphQL回應中傳回的產品選項現在僅包含使用者所屬目錄中的產品。 如果使用者屬於共用目錄，則只會傳回共用目錄中的產品。 如果使用者是訪客或不屬於自訂共用目錄，則只會傳回公用目錄中的產品。


### Google ReCAPTCHA

<!-- AC-3179-->

* 中的reCAPTCHA錯誤 `var/log/exception.log` Google V3 reCAPTCHA管理員登入的檔案已解決，不會記錄任何錯誤訊息。 之前，管理員使用者設定其許可權時，每隔幾秒會擲回以下錯誤 **[!UICONTROL Configuration]** > **[!UICONTROL Security]** > **[!UICONTROL Google reCAPTCHA Admin Panel]** 設定： `main.ERROR: Can not resolve reCAPTCHA parameter. {"exception":"[object] (Magento\Framework\Exception\InputException(code: 0): Can not resolve reCAPTCHA parameter. at /home/xxxxxxx/public_html/vendor/magento/module-re-captcha-ui/Model/CaptchaResponseResolver.php:25)"} []`. [GitHub-34975](https://github.com/magento/magento2/issues/34975)

### 影像

<!-- ACP2E-905-->

* 更新PDF發票單的標誌大小建議。

### 匯入/匯出

<!-- ACP2E-957-->

* 匯入的產品若具有與現有產品相同的數值URL金鑰，但沒有其終端字母字元，則在 **[!UICONTROL Product URL Suffix]** 在「管理員」中設為空白。

<!-- AC-6588-->

* 此 `bin/magento app:config:import`命令現在已成功匯入 `config.php` 當檔案包含特定專案時 `cron` 運算式。 先前，匯入失敗並出現此錯誤： `Import failed: Notice: Trying to access array offset on value of type null in [..]/vendor/magento/module-config/Model/Config/Backend/Currency/Cron.php on line 66`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-1289-->

* 使用AWS S3作為遠端儲存體時，完全匯出現在可以正常運作。 先前，由於上傳的檔案大小，匯出失敗。

<!-- ACP2E-982-->

* 現在，當CSV檔案中的庫存資料欄遺失時，產品狀態可正確匯入。 先前，在產品匯入後，預設來源會自動指派給產品，其數量設為零，且當CSV檔案中的庫存資料欄遺失時，其狀態會列為無庫存。

<!-- ACP2E-841-->

* 現在，當匯入包含100筆以上的記錄時，匯入進階訂價值可提供新記錄與更新記錄的正確計數。 先前，匯入成功訊息會提供錯誤的計數。

<!-- ACP2E-984-->

* 匯出的CSV檔案現在包含以多種語言儲存的類別名稱的正確路徑。 已新增類別集合的商店ID。 先前，匯出的檔案包含不同語言的混合路徑，而不是衍生自預設商店檢視的類別路徑。

<!-- ACP2E-1319-->

* 透過匯入更新特定商店檢視中產品的自訂選項現在已成功完成。 以前，如果將產品相關列分割成多個批次，則會擲回內部伺服器錯誤。

<!-- AC-6926-->

* 此 `Fixer.io` 匯入服務現在可如預期運作。 匯率現在已成功匯入。 [GitHub-36010](https://github.com/magento/partners-magento2ee/issues/36010)


### 索引

<!-- AC-3152-->

* 索引器 `batch_size` 的 `catalogpermissions_category` 索引現在變更為以下專案所提供的值： `env.php` 檔案（如預期）。 以前，索引器的路徑中有拼寫錯誤 `batch_size` 覆寫防止將批次大小變更為中提供的值 `env.php`. [GitHub-652](https://github.com/magento/partners-magento2ee/issues/652)

<!-- ACP2E-1296-->

* 當目錄包含套件產品未指派給任何網站時，價格重新索引現在會成功執行。 先前，執行產品價格指數時發生下列錯誤： `Warning: Undefined array key <bundel product id > in vendor/magento/module-bundle/Model/ResourceModel/Indexer/Price/DisabledProductOptionPriceModifier.php on line 117`. [GitHub-35796](https://github.com/magento/magento2/issues/35796)

### 基礎架構

<!-- ACP2E-869-->

* 已新增的淨化 `DATE` 和 `DATETIME` 資料庫傾印中的值，以支援Adobe Commerce。 以前，資料庫備份表格中的客戶/報價/訂單表格不會清除日期時間型別欄位。

<!-- ACP2E-804-->

* 此 `escaper.js` `escapeHtml` 函式現在會將&amp;特殊字元轉換為 `"$amp;"` 根據 `InnerHtml` 規則。 此通用解決方案解決標題輸入方塊中的特殊字元和字元參考轉換問題，並儲存插入時的確切值。 先前，&amp;字元在內容階層的節點名稱中編碼不正確。

<!-- AC-5972-->

* 與協力廠商的問題 `colinmollenhour/php-redis-session-abstract` 模組和PHP 8.1已解決。 [GitHub-35634](https://github.com/magento/magento2/issues/35634)

### 媒體集

<!-- AC-3034-->

* 舊版媒體庫現在預設為停用。 先前， **[!UICONTROL Enable old Media gallery]** 已設為 **[!UICONTROL Yes]**.

<!-- ACP2E-1302 -->

* 新媒體集已經過最佳化，以改善類別頁面中目錄樹狀結構的載入。

### 記錄

<!-- ACP2E-1312-->

* 您現在可以產生0位元組記錄檔的系統報告。 先前，當一或多個檔案為空白時，Adobe Commerce在為記錄檔集合產生報表時擲回錯誤。

### 訂購

<!-- ACP2E-1107-->

* 「管理銷售訂單銷退折讓單」頁面現在會顯示使用「商店銷退折讓」建立之訂單的正確總計，以及多張商業發票。 以前，總計計算不正確，使用者無法產生銷退折讓單。

<!-- ACP2E-998-->

* 現在，安裝指令碼中傳遞的訂單首碼已正確新增至訂單ID。

<!-- ACP2E-790-->

* 當訂單包含具有長自訂文字值的產品時，訂單詳細資訊頁面現在可成功載入。 先前，訂單詳細資料頁面未載入，且 `sales_order_item.product_options` 如果產品包含文字自訂選項的長值，則欄未正確儲存。

<!-- AC-3178-->

* 店面訂單狀態現在對部份退款的訂單而言是準確的。 先前，在套用部分退款時，訂單在出貨後仍維持處理狀態。 [GitHub-35528](https://github.com/magento/magento2/issues/35528)

<!-- AC-3031-->

* 客戶群組現在精確地表示為 **未登入** 訪客使用者建立的訂單。 以前，訪客訂單摘要中的客戶群組為NULL，這會影響確認電子郵件和訂單匯出。 [GitHub-35440](https://github.com/magento/magento2/issues/35440)

<!-- AC-2811-->

* 狀態 **[!UICONTROL Closed]** 在發出銷退折讓單並退款客戶之後，現在會如預期指派給虛擬訂單。 過去，虛擬產品會顯示為 **[!UICONTROL Complete]** 在「狀態」下拉式清單中，但 **[!UICONTROL Closed]** 從管理員新增註解時，訂單註解的頁尾會顯示。 [GitHub-35283](https://github.com/magento/magento2/issues/35283)

<!-- AC-6641-->

* 來賓現在可以訂購數量少於一個的產品，而且產品數量現在被嚴格輸入為 `float`. 先前，由於產品數量是嚴格輸入為 `int`，產品數量少於一個的訂單失敗並顯示此訊息： `Some of the products are disabled`. [GitHub-36060](https://github.com/magento/magento2/issues/36060)

<!-- ACP2E-1313-->

* 現在，運費退款的計算方式正確無誤， **[!UICONTROL Apply discount on prices]** 組態選項設定為 **[!UICONTROL including taxes]**.

<!-- ACP2E-1199-->

* 現在會在封存訂單後，以非同步方式更新商業發票、出貨及銷退折讓單網格。

<!-- ACP2E-1194-->

* 同時、相同的GraphQL請求不再產生重複訂單。 現在，報價最多可鎖定10秒，以防止建立重複的訂單，而第二個請求會因下列錯誤而失敗： `The cart isn't active` 或 `The order has already been placed and is currently processing`. 此鎖定值可透過的ID進行設定。 `Magento\Quote\Model\PlaceOrderMutex` 類別 `lockWaitTimeout` 引數。 [GitHub-36274](https://github.com/magento/magento2/issues/36274)

<!-- ACP2E-1170-->

* 新增註解至已封存的訂單時，不會再將其傳回至未封存的訂單格線，同時保留其已封存狀態。

<!-- ACP2E-860-->

* 公司屬性值現在會如預期顯示在結帳工作流程的帳單和送貨地址區段中。 以前，公司屬性無法在訂單詳細資料頁面上正確顯示，因為在建立訂單期間未正確設定商店。 屬性值只有在以下情況下才能正確儲存： **顯示公司** 屬性已設定為 **[!UICONTROL optional]** 的 **主要網站** 進行多存放區部署。

<!-- ACP2E-1117-->

* 此 `customer_address_id` 值現在已針對新帳單地址按預期設定 **[!UICONTROL My billing and shipping address are the same]** 核取方塊已勾選。 已引入其他條件，以在設定送貨地址的客戶地址ID之前識別帳單地址是否與送貨地址相同。

<!-- AC-6057-->

* 訂單放置的並行問題已解決。 先前，如果兩個來自不同瀏覽器的訂單同時或幾乎同時下達，則會將相同的訂單ID指派給兩個訂單。 [GitHub-35833](https://github.com/magento/magento2/issues/35833)

<!-- AC-6908-->

* 啟用非同步索引時，為免費產品下自動開立發票的訂單現在可如預期運作。 不會將任何專案新增至 `sales_order_grid or sales_invoice_grid` 這些訂單的表格。 之前，Adobe Commerce擲回例外狀況，因為應用程式嘗試在放置訂單期間索引格點，而不是依賴 `cron`. [GitHub-36334](https://github.com/magento/magento2/issues/36334)

### 頁面產生器

<!-- ACP2E-956-->

* 您現在可以使用頁面產生器拖放功能，將影像大量匯入相簿。

<!-- AC-2074-->

* 頁面產生器滑桿CSS規則的問題已解決。 [GitHub-34527](https://github.com/magento/magento2/issues/34527)

<!-- ACP2E-978-->

* `Dropdown`， `Text area`、和 `Text field` 屬性現在可在Page Builder產品屬性清單中使用。 先前，僅限 `Dropdown` 和 `Text area` 屬性可供使用。

### 付款

<!-- ACP2E-862-->

* 當出貨地址與帳單地址中指定的國家/地區免除COD時，店面結帳工作流程中不再呈現COD付款方法。 先前未實作此功能的管理員組態設定。

<!-- AC-1119-->

* 如果購物者尚未儲存Token，管理訂單建立工作流程的「付款」區段中就不會再顯示儲存庫付款資訊。 [GitHub-33954](https://github.com/magento/magento2/issues/33954)

<!-- AC-2688-->

* 在購物車價格規則套用折扣後，自訂價格不再翻倍。 [GitHub-35154](https://github.com/magento/magento2/issues/35154)

<!-- ACP2E-1120-->

* 使用「零小計結帳」付款方式下訂單時，新訂單擱置狀態現在會如預期般接受。

<!-- ACP2E-1121-->

* 在透過GraphQL使用PayPal Express為訪客購物者建立訂單時，現在會考量訪客電子郵件設定。 在過去，設定的電子郵件地址會由PayPal帳戶中設定的電子郵件地址覆寫。

#### Braintree

<!-- BUNDLE-3186-->

* 現在會將訂單ID新增至付款交易的結算請求。

<!-- AC-3030-->

* 當商家點按時，Adobe Commerce不再擲回以下錯誤 **[!UICONTROL Reports]** > **[!UICONTROL Braintree Settlement]**： `Error: Undefined constant Braintree\PaymentInstrumentType::ANDROID_PAY_CARD in /var/www/html/vendor/paypal/module-braintree-core/Ui/Component/Report/Listing/Column/PaymentType.php:49`. [GitHub-35434](https://github.com/magento/magento2/issues/35434)

<!-- BUNDLE-3043-->

* 此 `customerPaymentTokens` 當管理員的儲存庫關閉時，查詢不再傳回Braintree代號。

<!-- BUNDLE-3107-->

* 此 **[!UICONTROL Pay Later]** 已針對義大利和西班牙啟用按鈕和橫幅。

<!-- BUNDLE-3137-->

* 啟用Braintree付款方式後，管理員使用者現在可以建立訂單或重新排序。 之前，Adobe Commerce擲回此錯誤： `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`.

<!-- BUNDLE-3139-->

* 啟用BraintreeBraintree PayPal且 **[!UICONTROL Enable Card Payments]** 已停用。 之前，進度列永遠不會解析，而Adobe Commerce會顯示此主控台錯誤： `adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66)`. [GitHub-35961](https://github.com/magento/magento2/issues/35961)

<!-- BUNDLE-3140 3141-->

* 已實作詐騙保護、ACH支付和本機支付方式Web鉤點。 欺詐保護Web勾點只有在Braintree中做出風險決定時才會觸發。 ACH網頁鉤點僅在ACH付款更新至 `settled` 或 `settlement decline`.

<!-- BUNDLE-3143-->

* 此 **[!UICONTROL Tagline]** 和 **[!UICONTROL Layout]** 設定欄位已從全部移除 **[!UICONTROL PayPal]** 「管理員樣式」區段中的按鈕。

<!-- ACP2E-1229-->

* 當購物者更新其帳單地址時，結帳工作流程中仍會選取「Braintree儲存庫」付款方式選項。 先前，當購物者取消選取 **[!UICONTROL My billing and shipping address are the same]** 按鈕。

<!-- BUNDLE-3184-->

* 現在針對PayPal交易傳遞明細專案，當 **[!UICONTROL Send Line Items]** 組態設定已從管理員啟用。

<!-- BUNDLE-3187-->

* ACH付款方式的驗證邏輯 **[!UICONTROL Account Number]** 欄位現在支援4到17位數的文字。

<!-- BUNDLE-3043-->

* 此 `customerPaymentTokens` 從管理員關閉儲存庫時，查詢不再傳回Braintree代號。

<!-- BUNDLE-3137-->

* 啟用Braintree付款方式時，管理員使用者現在可以為客戶建立訂單或重新排序。 之前，Adobe Commerce擲回此錯誤： `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`

<!-- BUNDLE-3139-->

* 購物者現在可以在店面中使用Braintree付款方法，其中 **[!UICONTROL Enable Card Payments]** 已停用。 之前，Adobe Commerce擲回此JavaScript錯誤： `_adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66).`

### 效能

<!-- ACP2E-1028-->

* 在對大型目錄進行部分重新編制索引期間，價格索引器現在會如預期刪除過時的資料，並取代記錄。 以前，重新索引程式會在取代過時記錄之前將其移除，這會導致產品偶爾會暫時從店面消失。 [GitHub-35616](https://github.com/magento/magento2/issues/35616)

<!-- ACP2E-963-->

* 的效能 `bin/magento/setup:upgrade` 命令已經過改良。 以前，此命令會重新建立資料庫觸發程式，這會在命令執行期間造成重大停機。 此外，索引器沒有恢復為排程模式，而是維持在儲存模式。 [GitHub-33386](https://github.com/magento/magento2/issues/33386)

<!-- ACP2E-1016-->

* 現在，依API更新層級價格的執行速度更快。 以前，更新層級價格會產生不必要的結果 `SELECT` 查詢，將許多客戶群組指派給產品時會延遲執行。

<!-- ACP2E-1307-->

* 已最佳化載入包含目錄Widget產品清單的頁面。 過去，會直接從資料庫載入非全域屬性。

### 報表

<!-- ACP2E-852-->

* 管理記錄報告現在會顯示正確的資訊 **[!UICONTROL Value before change]** 更新類別規則時的值。

<!-- ACP2E-1104-->

* 「訂單總計」報表 **從** 和 **至** 現在從日期選擇器中選擇後，日期即可正確顯示。

<!-- BUNDLE-3147-->

* 此 `ANDROID_PAY_CARD` 中的常數 `Braintree/Ui/Component/Report/Listing/Column/PaymentType.php` 已取代 `GOOGLE_PAY_CARD`. 這可解決Braintree報表的問題。

### 退貨授權(RMA)

<!-- ACP2E-1285-->

* RMA註解欄位(**[!UICONTROL Orders]** > **[!UICONTROL Return]**)不再包含多餘的空格。 (此 `<textarea>` 和 `<?php` 標籤現在位於一行中。

<!-- ACP2E-1279-->

* 此 **[!UICONTROL Use Config Settings]** 「 」的核取方塊 **[!UICONTROL Enable RMA]** 欄位現在會在儲存產品時依預期儲存其值。

### 評論

<!-- ACP2E-1214-->

* 對特定範圍具有受限存取許可權的管理員使用者現在可以按預期刪除產品評論。

### 角色

<!-- ACP2E-1277-->

* 已新增遺失的ACL **[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL Services]** > **[!UICONTROL OAuth]**. 之前，您在設定角色許可權時無法定義此OAuth組態設定的存取權。

### 搜尋 {#search-heading}

<!-- ACP2E-989-->

* 現在搜尋引號內的字串時，如果 **[!UICONTROL Minimum Terms to Match]** 已啟用組態設定。 之前，Adobe Commerce擲回此錯誤： `{"error":{"root_cause":[{"type":"parsing_exception","reason":"[match_phrase] query does not support [minimum_should_match]' ...`.

<!-- ACP2E-877-->

* 此 **註冊點** 在銷售訂單客戶網格上，搜尋客戶記錄的篩選器現在可在建立訂單期間按預期運作。

<!-- ACP2E-783-->

* 多字查詢的搜尋建議品質已改善。

<!-- AC-6768-->

* 搜尋結果現在包含所有可用產品的無庫存選項輸出 **[!UICONTROL Display Out Of Stock Products]** 已啟用 [GitHub-36055](https://github.com/magento/magento2/issues/36055)

### 送貨

<!-- ACP2E-670-->

* 當免運費購物車規則設為僅符合購物車中專案的子集時，可正確計算FedEx、USPS和UPS的運費。

<!-- AC-937-->

* 當訂單總計小於符合免費送貨條件的指定最低訂單金額時，「管理送貨」頁面不再顯示免費送貨選項。 [GitHub-33697](https://github.com/magento/magento2/issues/33697)

<!-- AC-838-->

* Adobe Commerce現在向管理員客戶致敬 **[!UICONTROL Show Company]** 組態設定（顯示送貨或客戶地址時）。 停用此設定時，出貨公司將不再包含在出貨、客戶地址或資料庫訂單記錄中。 過去，即使設定停用，仍會顯示資訊。 [GitHub-33729](https://github.com/magento/magento2/issues/33729)

<!-- magento/magento2/pull/35631-->

* 在預估出貨時，移除了報價上的多餘儲存操作。

<!-- magento/magento2/pull/35817-->

* `storeId` 範圍現在直接從套用 `$request->getStoreId()` 以確保在管理員使用者建立報價時不會遺失範圍。 以前，使用協力廠商模組從管理員建立報價時，偶爾會發生送貨方法的問題。

<!-- ACP2E-1304-->

* 系統現在會產生適合SEO的URL，以供產品使用， `url_key` 在存放區檢視層級上覆寫設定。 之前，類別產品URL不會重新導向至SEO友善URL。

<!-- ACP2E-1196-->

* 將折扣套用至運送成本時，Adobe Commerce不再擲回最小訂單金額錯誤。

<!-- ACP2E-1190-->

* 在運費已套用折扣後，若套用稅捐，現在可正確計算運費退款。

<!-- ACP2E-910 AC-3182-->

* 透過GraphQL對所要求購物車的所有適用促銷活動 `cart` 查詢會一起傳回。 促銷活動包括明細行專案折扣、購物車規則/折扣、折價券、禮品卡和商店點數。 [GitHub-35545](https://github.com/magento/magento2/issues/35545)

<!-- AC-2363-->

* 已新增 `price_excl_tax` 和 `price_excl_tax` 型別至 `setShippingMethodsOnCart` 突變。 [GitHub-31206](https://github.com/magento/magento2/issues/31206)

<!-- AC-1096-->

* GraphQL回應中現在會依預期傳遞不重複送貨ID，並將訂單的送貨詳細資料傳送至多個地址，以進行GraphQL查詢。

### 分段

<!-- ACP2E-879-->

* 在更新完成後，重新排程測試更新的結束日期不再導致錯誤。 之前，管理員無法開啟產品頁面和產品網格，Adobe Commerce擲回此錯誤： `report.CRITICAL: Exception: Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "1" already exists`.

<!-- ACP2E-776-->

* 測試儀表板現在顯示正確的總記錄數，儀表板分頁現在按預期運作。 先前版本。 儀表板最多可顯示20筆記錄。

<!-- ACP2E-1213-->

* 內容預備預覽現在可在部署許多商店時更快載入。 預覽重新索引現在只會重新索引選取的存放區。

<!-- ACP2E-919-->

* 現在可以在排程預覽模式下將產品新增到購物車。 使用下列引數在排程預覽模式下更新階層連結時，已修正此問題： `version`， `timestamp`、和 `signature`.

### 稅金

<!-- AC-3201-->

* 此 **[!UICONTROL Display Zero Tax Subtotal]** 組態設定現在可如預期套用至提供多種送貨方法的部署中的訂單。 先前，即使停用此設定，在選取送貨方式之前結帳時，零稅費欄位會顯示在購物車頁面上。 [GitHub-35561](https://github.com/magento/magento2/issues/35561)

<!-- AC-3157-->

* Adobe Commerce現在可以在執行PHP 8.1的部署中，在店麵類別頁面上顯示含稅的分組產品。之前，Adobe Commerce不會顯示產品清單，並擲回此例外狀況： `main.CRITICAL: Exception: Deprecated Functionality: ucfirst(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/m24/vendor/magento/module-tax/Pricing/Render/Adjustment.php on line 188 in /var/www/m24/vendor/magento/framework/App/ErrorHandler.php:61`. [GitHub-35500](https://github.com/magento/magento2/issues/35500)

<!-- ACP2E-1258-->

* 商戶無法再將排程更新移動到包含相同規則ID的另一個更新。 先前，當更新移至包含相同規則ID的其他更新時，購物車價格規則的排程更新會建立重複的排程。

<!-- ACP2E-1295-->

* 當沒有與客戶地址相關聯的VAT ID時，自動客戶群組指派現在可以運作。 如果該地址不包含VAT ID，則會將其視為屬於非VAT註冊客戶，而Adobe Commerce會將客戶群組變更為非VAT群組。 先前，當 **[!UICONTROL Enable Automatic Assignment to Customer Group]** 已啟用，客戶帳戶不會自動指派給 `customerGroup` VAT ID從客戶帳戶刪除的時間。

<!-- ACP2E-493-->

* 在中繼預覽模式中，現在會顯示中繼目錄規則的正確動態區塊。 先前會顯示不相關的動態區塊。

<!-- ACP2E-1080-->

* 在結帳期間套用多筆出貨時，現在商業發票與銷退折讓單的「稅捐彙總」區段中可正確顯示多筆稅捐。

<!-- ACP2E-1076-->

* 當訂單小計（包括稅金及「固定產品稅金」金額）超過購物車頁面上的購物車規則條件時，不再套用折扣。 以前，即使總計超過購物車規則條件，也會套用折扣。

<!-- ACP2E-913-->

* 您現在可以指定 `vat_id` 使用GraphQL新增或更新訪客購物者地址時。

### 測試

<!-- ACP2E-1171-->

* 修正不同版本的單元測試錯誤 `ICU` 和 `libxml` 程式庫。

<!-- ACP2E-1134-->

* 開發人員現在可以指示系統在特定存放區檢視中執行資料夾具。 新的選用引數 `scope` 接受 `string` 對應於儲存夾具別名的元件。

<!-- ACP2E-1133-->

* 新增使用選用的產生多個資料夾具例證的功能 `count` 引數。

<!-- AC-6860-->

* 已移除非原生 `array_first` 函式來自MFTF架構中的開發相依性。

### 翻譯與地區設定

<!-- ACP2E-912-->

* 內嵌翻譯現在可正確搭配特殊字元使用，包括位於SCRIPT標籤中片語的延伸Unicode字元。 先前，使用內嵌翻譯時，日文字元在編輯的指令碼中無法正確轉譯。

<!-- ACP2E-844-->

* 此 `ñ` 產品名稱中的字元現在會轉換為 `n` 在URL金鑰產生期間。

<!-- AC-3499-->

* 執行中的輸出 `bin/magento i18n:collect-phrases` 現在包含郵件範本翻譯 `depend` 建構如預期。 [GitHub-35449](https://github.com/magento/magento2/issues/35449)

<!-- ACP2E-1135-->

* 日文字元現在可以直接輸入產品頁面屬性集（下拉式方塊）。 之前，在MacOS上執行Firefox瀏覽器時，直接在此下拉式方塊中輸入日文字元會導致字元變更或刪除。 此 `textInput` HTML屬性可更好地處理所有瀏覽器中的日文字元轉換，已取代 `Value` 和 `valueUpdate` 屬性。

<!-- ACP2E-1238-->

* 此 `getOptions` 方法現在可正確擷取 `price` 根據存放區檢視的屬性標籤值。 先前， `price` 屬性已在GraphQL作業期間因不正確的存放區檢視而轉譯。

### UI

<!-- ACP2E-1018-->

* 網站特定貨幣現在可如預期般用於管理產品網格中的特殊價格、成本和MSRP欄。 先前，依商店檢視篩選是否有特殊價格時，正確的貨幣符號不會顯示在管理目錄產品格線中。

<!-- ACP2E-980-->

* 產品自訂選項的拖放功能現在可如預期運作。 當可自訂選項格線中有多個可用頁面時，您現在可以將可自訂選項從一個頁面移動到另一個頁面。

<!-- ACP2E-866-->

* 管理員儀表板圖表現在會依預期顯示從目前日曆年度開始到目前日期的YTD時間間隔。 過去，日期範圍會包含12個月以上。

<!-- AC-3088-->

* 已新增店面首頁上遺失的預設Favicon。 [GitHub-35493](https://github.com/magento/magento2/issues/35493)

<!-- ACP2E-1025-->

* 管理員現在可以成功顯示每位管理員使用者的最新登入日期。 以前，當管理員使用者首次登入管理員時，管理員使用者網格上顯示一個空的登入日期值。


<!-- AC-3762-->

* 預覽電子郵件範本功能(**[!UICONTROL Marketing]** > **[!UICONTROL Communications]** > **[!UICONTROL Email Templates]**)現在可正確顯示範本。 先前，預覽影像會遭截斷。 [GitHub-35697](https://github.com/magento/magento2/issues/35697)

<!-- magento/magento2/pull/35656-->

* 已新增 `new-shipping-address-modal` 類別以支援新送貨地址模式的樣式。

<!-- magento/magento2/pull/35738-->

* 在下方新增資訊性文字 `Search Weight` 屬性的 `Storefront Properties` 管理員的輸入欄位 **[!UICONTROL Stores]**  > [!UICONTROL Attributes] > **[!UICONTROL Product]**.

<!-- ACP2E-1323-->

* 電子郵件預覽現在會在單獨的標籤中開啟，而不是在快顯視窗中開啟，以更廣闊的視角檢視電子郵件內容。 過去，電子郵件內容會遭到截斷。

<!-- ACP2E-1299-->

* 使用者角色格線（管理員）的篩選功能 **[!UICONTROL System]** > **[!UICONTROL Permissions]** > **[!UICONTROL User roles]** > **[!UICONTROL Administrators]**)現在可如預期運作。 陣列值現在會單獨處理。 先前，當您嘗試在此格線中輸入查詢時，Adobe Commerce擲回此主控台錯誤，頁面未載入： `Uncaught TypeError: Cannot read properties of null`. [GitHub-35993](https://github.com/magento/magento2/issues/35993)

<!-- ACP2E-328-->

* 透過REST API建立客戶時，已新增屬性值的驗證。 提供無效的屬性值時，建立程式現在會失敗。 之前，性別沒有驗證，這不是必填欄位。 在建立客戶期間，傳入的性別值會儲存在 `customer_entity` 表格。

<!-- ACP2E-1105-->

* 結帳時新增的地址現在會保持其預期格式。 以前，會忽略空白行。

<!-- ACP2E-897-->

* 變更產品格線的資料欄格線檢視以及為自訂檢視選取新資料欄時，不再觸發「選取所有格線資料欄」動作。 以前，欄方塊消失，並選取或取消選取格線中的產品。 [GitHub-36302](https://github.com/magento/magento2/issues/36302)

<!-- ACP2E-1245 1405-->

* 管理員使用者現在可以成功清除管理員已完成任務記錄。 管理員之前會顯示此錯誤： `Something went wrong`. [GitHub-36255](https://github.com/magento/magento2/issues/36255)

<!-- AC-7525-->

* 佈景主題標題設定 `Welcome Text` 現在可以包含單引號字元。 之前，Adobe Commerce擲回此JavaScript錯誤： `Uncaught SyntaxError: Unable to process binding "ifnot: function(){return customer().fullname }"`.

### URL重寫

<!-- ACP2E-808-->

* 將產品可見度變更為 **[!UICONTROL Not Visible Individually]** 現在在全域「所有存放區檢視」範圍中，只會移除未覆寫可見性屬性的存放區檢視的URL重寫。 以這種方式變更產品可見度也會為所有商店檢視產生URL重寫，包括已覆寫URL索引鍵屬性（但不包括可見度設定）的檢視。 先前，當可見度設定變更時，不會套用URL重寫規則。

### Visual Merchandiser

<!-- ACP2E-1084-->

* 當產品符合規則時，您無法再手動變更Visual Merchandiser類別清單中的產品位置。

<!-- ACP2E-985-->

* 僅能存取一個商店的管理員使用者無法再將產品拖放到Visual Merchandiser的類別中。 他們現在可以使用 **[!UICONTROL Position]** 欄，以重新排列產品位置。 以前，這些使用者只能透過拖放來變更類別中的產品位置。

<!-- ACP2E-953-->

* 現在，類別編輯頁面的「類別中的產品」區段會顯示可設定產品的正確數量。 現在會使用正確的表格欄來擷取可設定的產品數量。

### Web API框架

<!-- ACP2E-1207-->

* REST API `DELETE /rest/V1/products/:sku/media/:entryId` 如果影像未從產品中移除，則現在會傳回錯誤訊息，因為它已指派給其他商店檢視中的角色。 以前，即使未成功移除影像，API也會傳回成功的回應。

<!-- ACP2E-1155-->

* 商戶現在可以使用REST API來針對總金額為零的訂單建立銷退折讓單。 Adobe Commerce先前會顯示此錯誤： `The order does not allow a credit memo to be created. The credit memo's total must be positive. We can't create a credit memo for the invoice/order`.

<!-- ACP2E-1136-->

* 使用REST API變更產品的網站指派後，「管理員產品編輯」頁面現在會正確反映產品的指派。 [GitHub-36281](https://github.com/magento/magento2/issues/36281)

<!-- ACP2E-863-->

* 在大量更新產品的REST API請求期間，多選屬性無法再包含重複的選項ID。 先前，在傳送大量更新產品的API請求時，您可以為多選屬性設定重複的選項ID。 當多選屬性設定為包含於分層導覽中時，EAV索引失敗，並出現 `Duplicate entry` 錯誤。

<!-- ACP2E-778-->

* 購物車中的產品名稱現在會如預期使用指定的商店檢視值。 以前，購物車中的產品名稱一律會在REST API購物車回應中傳回預設商店檢視值。

<!-- AC-5986-->

* 現在可以使用REST API更新購物車專案自訂選項值。 [GitHub-35768](https://github.com/magento/magento2/issues/35768)

<!-- AC-1330-->

* 超過20個的大量API請求 `sourceItems` 現在已在啟用「詳細目錄」的部署中成功完成。

<!-- ACP2E-1044-->

* 修復程式貨幣服務現在可透過ApiLayer產生的金鑰正常運作，且貨幣匯率可正確匯出。 之前，當商家嘗試透過管理員匯入匯率時，Adobe Commerce會擲回錯誤。

<!-- ACP2E-726-->

* 您現在可以使用REST API `/rest/V1/bulk?searchCriteria[filter_groups]` 請求依搜尋條件查詢大量作業。 之前，系統傳回下列錯誤： `report.CRITICAL: Report ID: webapi-624bbb1db96c4; Message: Item (Magento\AsynchronousOperations\Model\Operation) with the same ID "0" already exists.`

<!-- magento/magento2/pull/36147-->

* 現在，管理員和店面目錄搜尋頁面上皆可使用「管理基本價格API」正確更新產品價格。 [GitHub-33767](https://github.com/magento/magento2/issues/33767)


### 希望清單

<!-- ACP2E-1013-->

* 購物者現在可以在登入後將產品新增至願望清單。 先前，由於登入後表單金鑰驗證出現問題，隨附加至願望清單請求提交的表單金鑰失效。

<!-- ACP2E-341-->

* 當訪客客戶透過確認電子郵件確認其帳戶後，產品現在會如預期從產品清單和檢視頁面新增到願望清單。 以前，產品在帳戶確認後不會新增到願望清單。

<!-- ACP2E-1175-->

* 此 `addProductsToWishlist` 當購物者嘗試將專案新增至具有無效產品值的願望清單時，query現在會傳回資訊性錯誤訊息 `select` 自訂選項。 以前，下拉式清單自訂選項值的伺服器驗證遺失，導致資料庫中的值無效。 因此，端點傳回此內部伺服器錯誤： `GraphQL endpoint returns Internal server error with "Call`.

## 已知問題

**問題**：從2.4.5之前的產品版本升級至Adobe Commerce 2.4.6或更新版本後，階段銷售規則標籤可能會不相符。 **因應措施**：在升級期間在更新中繼資料步驟之前套用ACSD-50625_2.4.5-P1.patch。 另請參閱 [從版本&lt; 2.4.5升級時，salesRules標籤出現問題](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/salesRule-labels-upgrade-from-versions-under-2.4.5.html) 知識庫文章。

解決此問題的一般步驟：

1. 下載必要的修補程式。 請參閱 [從版本&lt; 2.4.5升級時，salesRules標籤出現問題](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/troubleshooting/known-issues-patches-attached/salesRule-labels-upgrade-from-versions-under-2.4.5.html) 知識庫文章。
2. 請依照升級程式管理套件階段中概述的升級步驟操作 [執行升級](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/implementation/perform-upgrade.html).
3. 在升級期間套用此修補程式於管理套裝程式階段之後，以及更新中繼資料階段之前。請參閱 [如何套用Adobe提供的撰寫器修補程式](https://experienceleague.adobe.com/docs/commerce-knowledge-base/kb/how-to/how-to-apply-a-composer-patch-provided-by-magento.html) .
4. 完成升級程式。

**問題**：啟用免運費時，您無法建立銷退折讓單(**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL Sales]** > **[!UICONTROL Delivery Methods]**)和顯示的運費含稅。 當您嘗試建立銷退折讓單時，Adobe Commerce會擲回此例外狀況： `"Division by zero".vendor/magento/module-sales/Model/Order/Creditmemo/Total/Tax.phpLine 139`. [GitHub-36800](https://github.com/magento/magento2/issues/36800)

**因應措施**：此問題的Hot Fix現已推出。 前往 [品質修補程式工具：搜尋修補程式](https://experienceleague.adobe.com/tools/commerce-quality-patches/index.html) 和搜尋修補程式ACSD-50814。

### 合作夥伴協助撰寫

下表重點說明合作夥伴所做的貢獻。 此表格列出提出提取請求的合作夥伴、外部提取請求編號，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-6-partner.md}}

### 個人貢獻者

下表列出我們社群成員的貢獻。 此表格列出提出提取請求的社群成員、外部提取請求編號，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-6-issues.md}}

## 系統需求

我們的技術棧疊是以PHP和MySQL為基礎所建置。 如需詳細資訊，請參閱 [系統需求](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## 安裝和升級指示

您可以使用以下專案安裝Adobe Commerce 2.4.6： [Composer](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
