---
title: Adobe Commerce 2.4.6發行說明
description: 了解2.4.6 Adobe Commerce版本的新功能、增強功能、錯誤修正和已知問題。
hide: true
hidefromtoc: true
source-git-commit: 3815ae65fb86d1730681f63cfa371497a40faf1f
workflow-type: tm+mt
source-wordcount: '10653'
ht-degree: 0%

---


# Adobe Commerce 2.4.6發行說明

>[!NOTE]
>
>針對GA前版本提供的發行說明不完整，且可能因GA而有所變更。

Adobe Commerce 2.4.6引入了對PHP 8.2的支援。PHP 8.1仍完全受支援，但已不再支援PHP 7.4。 其中包括顯著的效能和可擴充性增強功能。 已最佳化大量購物車作業和類別樹狀轉譯回應的GraphQL作業。 此版本推出Adobe Commerce擴充功能元包。

此版本包含超過300項品質修正和增強功能。 核心撰寫器相依性和第三方程式庫已升級至與PHP 8.2相容的最新版本。

{{bics}}

## 其他發行資訊

雖然這些功能的程式碼與Adobe Commerce核心程式碼的發行搭配，但其中幾個專案(例如B2B、Page Builder和Progressive Web Application(PWA)Studio)也是獨立發行。 這些專案的錯誤修正會記錄在每個專案的檔案中，提供個別專案的發行資訊。

## Adobe Commerce 2.4.6亮點

查看此版本中的下列重點。

### 安全性增強功能

此版本包含八項安全性修正和平台安全性改善。

迄今未發生與這些問題相關的確認攻擊。 但是，某些漏洞可能會被利用來訪問客戶資訊或接管管理員會話。 這些問題大多要求攻擊者首先獲得管理員的訪問權限。 因此，我們會提醒您採取所有必要步驟來保護您的管理員，包括但不限於這些努力：

* IP允許清單
* [雙因素驗證](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* VPN的使用
* 使用唯一位置，而非 `/admin`
* 良好的密碼衛生

如需這些已修正問題的最新討論，請參閱Adobe安全性公告。

#### 其他安全性增強功能

此版本的安全性改善改善了對最新安全性最佳實務的合規性，包括：

* 已透過更具體的網格檢視、大量動作和匯出內動作稽核，解決管理員動作記錄中的差距。 <!-- AC-1553 -->

* 付款處理期間發生非預期錯誤時，reCAPTCHA驗證不再於結帳期間失敗。 [GitHub-35093](https://github.com/magento/magento2/issues/35093) <!-- AC-2642 -->

* **新的系統配置，當管理員使用者變更其電子郵件時，需要確認電子郵件**. 為了減少網站漏洞，已新增新的系統組態設定（預設為停用），以在管理員使用者變更電子郵件時要求進行電子郵件確認： **[!UICONTROL Stores]** > **[!UICONTROL Settings:Configuration]** > **[!UICONTROL Customers]** > **[!UICONTROL Customer Configuration]** > **[!UICONTROL Account Information Options]** > **[!UICONTROL Require email confirmation if an email has been changed]**. 啟用此選項後，每次管理員使用者變更其電子郵件地址時，應用程式都會要求電子郵件確認。 下列模組會受此變更影響： `Magento_Customer`. <!-- AC-3064 -->


### 平台增強功能

Adobe Commerce 2.4.6引入了對PHP 8.2的支援。PHP 8.1仍完全受支援。 <!-- AC-6598 -->

此版本已移除PHP 7.4支援。 不能在PHP 7.4上運行Adobe Commerce。

Adobe Commerce 2.4.6現已支援：

* 撰寫器2.2.x。已移除撰寫器1.x。 <!-- AC-2839 -->

* Redis 7.0.x。雖然與Redis 6.2的相容性仍然保持不變，但我們建議使用Redis 7.0.x部署此版本，因為Redis 6.2預計於2024年終止服務。 <!-- AC-6606 -->

* 現在支援OpenSearch作為Adobe Commerce內部部署和雲端部署的預設搜尋引擎。 支援作為獨立的Magento Open Source搜尋引擎。 此版本支援OpenSearch v2.x，並已與OpenSearch 2.5進行測試。雖然與OpenSearch 1.x的相容性仍然存在，但建議將此版本與OpenSearch 2.x搭配使用。您可以在雲端和內部部署上，透過OpenSearch 2.x安裝及執行Adobe Commerce和Magento Open Source2.4.6 [搜尋引擎必要條件](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/prerequisites/search-engine/overview.html). <!-- AC-449 3555 -->

* Elasticsearch8.x <!-- AC-6597 -->

* MariaDB 10.6（LTS版本）。 此版本仍與MariaDB 10.4相容，但建議升級至MariaDB 10.6。 <!-- AC-6921 -->

#### 其他升級和更換

* DHL架構已從v6.2遷移到v10.0。 <!-- AC-3023-->

* 過期的JavaScript程式庫已更新至其最新版本，且已移除過期的相依性。 這些變更可向後相容。 <!-- AC-2036-->

* PHP 7.4相容性已從Commerce代碼庫中刪除。 <!-- AC-2841-->

* Symfony依賴項已升級到新的LTS版本。 相依性包括：<!-- AC-2656-->

   * `friendsofphp/php-cs-fixer`
   * `symfony/console`
   * `symfony/event-dispatcher`
   * `symfony/finder`
   * `symfony/process`
   * `web-token/jwt-framework`

* `jquery-migrate` 已從商務程式碼基底中移除。 [GitHub-21406](https://github.com/magento/magento2/issues/21406) <!-- AC-1199 -->

* 升級 `jQuery/fileUpload` 程式庫至v10.32。 <!-- AC-2658-->

* 已到期的Zend框架(ZF1)元件已從代碼基底中刪除。 請參閱 [反向不相容的變更會反白標示](https://developer-stage.adobe.com/commerce/php/development/backward-incompatible-changes/highlights/).<!-- AC-1512 -->

* 已更新層粘結依賴項以支援PHP 8.2。 <!-- AC-7019-->

* 此 `laminas/laminas-dependency-plugin` 已移除撰寫器外掛程式。 [GitHub-36515](https://github.com/magento/magento2/issues/36515) <!-- AC-7100-->

* 已更換 `Zend_Filter` with `laminas/laminas-filter`. <!-- AC-5922-->

* 升級 `web-token/jwt-framework` 至v3.0.5。 （最新版本） <!-- AC-3772-->

* 升級 `allure-framework/allure-phpunit` 到v2.x。 <!-- AC-2660-->

* 升級 `Chart-js` 程式庫至v3.9.1 <!-- AC-2661-->


### 效能和可擴充性增強功能

* **改善影響許多客戶區段之作業的效能**. 商家可以啟用新的配置設定，從而改善涉及100多個客戶段的操作的效能。 此 **[!UICONTROL Real-time Check if Customer is Matched by Segment]** 您可以視需要停用設定，減少每個客戶區段對客戶的驗證，以縮短處理時間。 請參閱 [客戶區段驗證](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/configuration.html#customer-segments-validation). <!-- AC-6832 ACPT-835-->

* **用於限制產品網格中顯示的產品數量的新系統配置設定**. 商家可以使用 **[!UICONTROL Limit Number of Products in Grid]** 配置設定，以改善產品網格效能。 此限制預設為20000，只會影響UI元件使用的產品集合。 限制顯示的產品數量可以提高包含200,000多種產品的網格的操作效能。 請參閱 [網格中的產品數限制](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/configuration.html#limit-number-of-products-in-grid)<!-- ACPT-42 -->

* **改善匯入效能（每分鐘最多100,000筆記錄）**. 商家可以使用 `POST /rest/<store_view_code>/V1/import/csv` REST API端點，將資料匯入Adobe Commerce。 此端點提供與管理員匯入功能相同的功能，並支援使用CSV檔案來建立、更新和移除產品、產品定價和客戶實體。 <!-- ACPT-6 -->

* **通過負載平衡提高高吞吐量訂單處理效能**. 雲端基礎架構上同時執行大量訂單（每分鐘1000筆訂單）的Adobe Commerce 2.4.6客戶，現在可以跨不同節點平衡其資料庫的負載，借此改善訂單處理效能。 商戶可以通過為MySQL資料庫和Redis實例啟用輔助連接來重新平衡此負載。 請參閱 [高吞吐量訂單處理](https://experienceleague.adobe.com/docs/commerce-operations/performance-best-practices/high-throughput-order-processing.html#load-balancing) <!-- ACPT-495 -->


### Adobe Commerce擴充元包

此版本推出Adobe Commerce擴充功能元資料庫v1.1.0，此元資料庫會自動將此核心版本與特定Adobe Commerce擴充功能捆綁。 安裝此元包中包含的這些擴充功能版本時， `composer update` 會執行，簡化升級至最新核心版本時升級這些擴充功能的程式。 這些擴充功能仍會維持獨立的發行排程。

Adobe Commerce 2.4.6的Adobe Commerce擴充功能元包含以下兩個擴充功能：

* [螺栓快速結帳](https://help.bolt.com/shoppers/about/)
* [適用於Adobe Commerce的Adobe I/O事件](https://developer.adobe.com/commerce/events/get-started/)

此擴充功能集合的未來版本將包含其他擴充功能。

### 適用於Adobe Commerce的Adobe I/O事件

Adobe Commerce的Adobe I/O事件會擷取商務事件，並將資料從Adobe Commerce傳輸至其他Adobe系統。 開發人員可在Adobe Developer App Builder中建立雲端原生應用程式，以訂閱商務事件，例如庫存更新、訂單狀態變更和價格更新。 開發人員可使用此功能來交換資料，以協調其任務關鍵型系統的整個購買者歷程。

### 協助工具更新

此版本的重點在於在Venia(PWA)上建立店面體驗，這種體驗更可感知、可操作、可理解且強大。 這些增強功能包括：

<!-- AC-2479-->

* 的視覺文字標籤 **[!UICONTROL Sign in]** 按鈕現在會符合其可存取的名稱。 （最佳實務建議UI元素的可存取名稱以可見標籤文字開頭。）

<!-- AC-2481 2492-->

* 整個店面的按鈕都新增了描述性的可存取名稱。

<!-- AC-2488-->

* 已在 **[!UICONTROL Has Video]** 搜索篩選器中的複選框。

<!-- AC-2787-->

* 僅限鍵盤的使用者現在可以存取店面上的所有頁面功能。 之前，購物者無法僅使用鍵擊來存取子導覽連結。


### Adobe Commerce與Adobe IMS整合

下列Adobe IMS模組已與Adobe Commerce 2.4.6核心程式碼脫鈎，現在已封裝為個別的元包：

* `adobe-ims`
* `adobe-ims-api`
* `admin-adobe-ims`

新 `adobe-ims-metapackage` v2.2.0與Adobe Commerce 2.4.6搭配。此版本中沒有任何功能變更。<!-- CABPI-505-->


### B2B

GraphQL API現在已完全公開「公司採購訂單」功能。 此版本提供兩種GraphQL結構：

* 採購訂單GraphQL結構涵蓋B2B公司使用者的採購訂單管理功能，例如建立、編輯和刪除採購訂單。
* 採購訂單規則GraphQL架構提供建立、編輯和刪除審批規則以及人工驗證採購訂單的功能。

此版本包含多項錯誤修正。 本主題包含B2B的發行前版本說明。 您將可在以下位置找到Adobe Commerce 2.4.6 GA的B2B發行說明： [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).


### Braintree

<!-- BUNDLE-3107-->

* 此 **[!UICONTROL Pay Later]** 義大利和西班牙的按鈕和橫幅（訊息）已啟用Braintree。

<!-- BUNDLE-3109-->

* 已啟用帶PayPal Vault的PayLater報文傳送。

<!-- BUNDLE-3140-->

* 添加欺詐保護和ACH Web鈎。 在Braintree中作出風險決策時，會觸發欺詐保護Web鈎點。 ACH付款的狀態更新為 `settled` 或 `settlement decline`.

<!-- BUNDLE-3141-->

* 新增LPM（本機付款方法）網頁連結。

### GraphQL

GraphQL效能增強功能包括：

**改善已啟用類別權限查詢類別時的回應時間**. 查詢類別中已啟用類別權限且包含許多客戶群組或共用目錄的產品時，回應時間已有所改善。 支援這項效能改善的程式碼變更包括： <!-- B2B-2179 2404 2329-->

* GraphQL解析器操作已最佳化。
* 資料提供者不再針對每個正在處理的新產品重新設定執行階段快取的資料，這已改善效能。 <!-- B2B-2452-->
* 在GraphQL解析程式中，已最佳化產品權限處理。 產品權限現在會改為每個產品套用至產品集合。  <!-- B2B-2404-->
* 最佳化權限讀取於 `addProductsToCart` 變異。 <!-- B2B-2424-->
* 產品權限已透過產品內嵌片段最佳化。 <!-- B2B-2459-->

**類別樹呈現的最佳效能**. 此 `categoryList` 查詢已最佳化，可支援具有大量類別的客戶。 使用此查詢來搜尋超過1500個類別（含最多五個層級的巢狀子類別）的商戶，將會發現效能有所改善。 通過刪除不必要的方法調用、改進類別樹的快取、遞歸地載入類別資料，改進了通過重構代碼載入類別子項的方法。  支援這項效能改善的程式碼變更包括： <!-- B2B-2484 2469 2472-->

* 類別模型的自訂屬性中繼資料擷取功能已得到改善。 <!-- B2B-2463-->
* 類別ID擷取功能已改善，且 `getChildren` 呼叫已減少。 <!-- B2B-2464-->
* 已改善類別子項載入。<!-- B2B-2469-->

**減少批量購物車操作查詢響應時間**. 添加產品突變已優化，以在添加多達500個簡單且可配置的產品時提高查詢效能。 捆綁產品不受影響。 優化的突變包括 `addProductsToCart`, `addConfigurableProductsToCart`, `addDownloadableProductsToCart`, `addSimpleProductsToCart`, `addVirtualProductsToCart`,`addWishlistItemsToCart`，和 `updateCartItems`. <!-- B2B-2331 2423-->

**客戶查詢現在支援訂單排序**. 此 `orders` 輸出物件 `customer` 查詢現在包含排序欄位。 您現在可以依訂單編號或建立日期，以升序或降序來排序訂單。 <!-- AC-6903-->

新突變：

`deleteCustomer` <!-- AC-2879-->

請參閱 [GraphQL開發人員指南](https://developer.adobe.com/commerce/webapi/graphql/) 以取得這些增強功能的詳細資訊。


### 頁面產生器

Page Builder v.1.7.3與Adobe Commerce 2.4.6相容。


### PWA Studio

PWA Studiov.13.0.x與Adobe Commerce 2.4.6相容。它包含多項增強功能，可改善協助工具。 如需錯誤修正的詳細資訊，請參閱 [PWA Studio發行](https://github.com/magento/pwa-studio/releases). 請參閱 [版本相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 以取得PWA Studio版本及其相容Adobe Commerce核心版本的清單。


## 已修正問題

我們已修正Adobe Commerce 2.4.6核心程式碼中的數百個問題。 以下說明Adobe Commerce 2.4.6中包含的一組已修正問題。

### 安裝、升級、部署

<!-- ACP2E-1168-->

* 透過多個地區設定和網站進行標準或精簡部署期間，靜態內容部署不再逾時或失敗。

<!-- ACP2E-923-->

* 執行靜態內容部署時，精簡策略不再導致對外部域的無效引用(`bin/magento set:static-content:deploy -f --strategy compact`)。

<!-- AC-5994-->

* 執行中 `bin/magento setup:di:compile -vvv` (或搭配 `-v` 或 `-vv` 選項)，現在會在失敗時傳回資訊性訊息。 [GitHub-35391](https://github.com/magento/magento2/issues/35391)

<!-- AC-5973-->

* Adobe Commerce不再在您執行 `bin/magento setup:upgrade` 部署中已運行資料遷移工具的命令： `PHP Fatal error:  Declaration of Migration\Logger\Logger::addRecord(int $level, string $message, array $context = []): bool must be compatible with Monolog\Logger::addRecord(int $level, string $message, array $context = [], ?Monolog\DateTimeImmutable $datetime = null): bool in /var/www/html/vendor/magento/data-migration-tool/src/Migration/Logger/Logger.php on line 34`. [GitHub-35604](https://github.com/magento/magento2/issues/35604)

<!-- AC-5970-->

* 此 `setup:db:status` 命令在運行MySQL 8.0.29的環境中不再失敗。以前，命令輸出錯誤地指出聲明性架構已過時。 [GitHub-35671](https://github.com/magento/magento2/issues/35671)

<!-- AC-1377-->

* 此 `composer install` 不再覆寫 `.gitignore` 檔案。 [GitHub-32888](https://github.com/magento/magento2/issues/32888)

<!-- AC-6671-->

* 執行中 `bin/magento sampledata:remove` 在Alpine Linux上升級後移除範例資料不再因此錯誤而失敗： `Undefined constant "MagentoHackathon\Composer\Magento\Deploystrategy\GLOB_BRACE`. [GitHub-36062](https://github.com/magento/magento2/issues/36062)


<!-- AC-6933-->

* `bin/magento setup:upgrade` 在首次執行後立即成功執行 `composer install --no-dev`. [GitHub-36351](https://github.com/magento/magento2/issues/36351)

<!-- AC-6796-->

* 例外和例外堆疊追蹤項目現已納入 `var/log/exception.log`. [GitHub-36054](https://github.com/magento/magento2/issues/36054)

<!-- AC-2681-->

* 現在，當您使用命令列來設定不含密碼的Redis連線時，Adobe Commerce會擲回參數驗證錯誤。

### 協助工具

<!-- AC-6678 6679 6677-->

* 此 **[!UICONTROL Proceed to Checkout]**, **[!UICONTROL Review Order]**，和 **[!UICONTROL Place Order]** 結帳工作流程中的按鈕現在可如預期般搭配鍵盤輸入運作。

<!-- AC-2485-->

* 使用時按鈕上焦點的視覺指示 **[!UICONTROL TAB]** 或 **[!UICONTROL SHIFT + TAB]** 若要瀏覽頁面控制項，現在可如預期般運作。

#### 螢幕助讀程式

<!-- AC-2498-->

* 訂單歷史記錄頁面的螢幕助讀程式現在會讀取正確的影像說明。

螢幕助讀程式現在會宣佈：

* 在搜索結果中按預期查找的總項計數 <!--- AC-3522-->
* 當使用者使用鍵盤控制項成功登入時，登入的使用者名稱 <!--- AC-6477-->
* 產品搜尋結果頁首現在會為 `<title>` 元素 <!--- AC-2489-->
* 輸入欄位是否為必填欄位 <!--- AC-2494-->
* 折疊式功能表元素的正確目前狀態（折疊和展開） <!--- AC-2487-->
* 當使用者按一下 **[!UICONTROL Create an account]** 按鈕 <!---AC-6676-->

### B2B

此版本包含多項錯誤修正。 此處提供B2B搶鮮版發行說明。 您將可在以下位置找到Adobe Commerce 2.4.6 GA的B2B發行說明： [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

<!-- ACP2E-689-->

* 當啟用「採購訂單」選項，且已選取使用「PayPal付款」選項建立的虛擬報價時，Adobe Commerce現在會在付款期間顯示正確的詳細資訊。 以前，在這些條件下，總計會顯示為零。

<!-- ACP2E-609-->

* 的客戶群組清單 **允許瀏覽類別** 設定不再包含與共用目錄相關的客戶群組。

<!-- ACP2E-1244-->

* 「稅/增值稅編號」客戶屬性現在可如預期般與管理員和店面的公司管理員帳戶搭配使用。 建立公司帳戶不再需要自訂稅/增值稅屬性。 以前，當商家建立具有自訂稅/增值稅屬性的公司帳戶時，Adobe Commerce會在店面和管理員上擲回驗證錯誤。

<!-- ACP2E-1236-->

* 在特定範圍上停用共用目錄功能現在可正常運作。 以前，Adobe Commerce在商家儲存共用目錄設定時，會設定無效的範圍。

<!-- ACP2E-1203-->

* 管理員使用者現在可以儲存公司使用者的客戶自訂屬性值。 以前，無法儲存公司使用者的客戶自訂屬性。

<!-- ACP2E-1221-->

* 我們已解決透過GraphQL提供之公司權限驗證時，若已指派許多公司權限，會發生效能問題。

<!-- ACP2E-1242-->

* 當使用快速訂購來新增數量超過可用庫存的產品時，Adobe Commerce不再在購物車頁面上擲回錯誤。

<!-- ACP2E-1090-->

* 的效能 `SELECT` 公司權限操作已改善。

<!-- B2B-2456-->

* 當未明確設定要查詢的類別權限時，類別查詢現在會根據儲存配置設定傳回產品價格。

<!-- AC-6829-->

* 此 **[!UICONTROL Place Order]** 按鈕現在可如預期般，以核准的報價請求完成購買。 與可轉讓報價有關的問題 `negotiableQuoteCheckoutSessionPlugin` 外掛程式已解決。

### 捆綁產品

<!-- ACP2E-906-->

* 透過API更新特定商店檢視的套件產品，現在不會覆寫相同套件產品的其他商店檢視資料。 以前，捆綁產品選項標題被覆蓋為其他商店視圖的第一個選項標題。

<!-- AC-3769-->

* 現在，您可以從管理員成功篩選套件產品 **[!UICONTROL Catalog]** > **[!UICONTROL Products]** 使用荷蘭語地區設定時。 之前，當您嘗試篩選時，Adobe Commerce會顯示此錯誤 `Type: Bundle Product`: `Something went wrong with processing the default view and we have restored the filter to its original state`. [GitHub-35704](https://github.com/magento/magento2/issues/35704)

<!-- ACP2E-1038-->

* 當捆綁產品的特殊價格超過1000時，產品網格不再擲回例外。 以前，當您依SKU搜尋產品或導覽至 **[!UICONTROL Catalog]** > **[!UICONTROL Products]**,Adobe Commerce擲出此錯誤： `Non Numeric value encountered`. [GitHub-36284](https://github.com/magento/magento2/issues/36284))

<!-- ACP2E-1220-->

* 包含捆綁和簡單產品組合的訂單的貸項通知單和發票PDF中的列現在可正確顯示。 以前，欄會扭曲或不對齊。

<!-- ACP2E-1315-->

* 在 `BundleProduct` 片段， `items.options.product` 物件包含預期的資料。 以前，某些情況下物件可能為null。

<!-- AC-6548-->

* 套件選項的小數數量現在會在 **[!UICONTROL Quantity uses decimals]** 啟用。 以前，只會轉譯數量的整數部分，而不會轉譯分數分量。 例如，1.5的數量呈現為1.0。 [GitHub-35964](https://github.com/magento/magento2/issues/35964)

<!-- B2B-2453-->

* GraphQL回應現在只會傳回查詢之商店範圍內的套件組合產品選項。

<!-- B2B-2455-->

* 未指派給類別但是屬於套件或分組產品之產品選項的產品，現在會在回應中傳回 **[!UICONTROL Allow Category Browsing]** 已為傳送查詢的客戶啟用配置設定。

### 快取

<!-- ACP2E-134-->

* 訂單完成後，除非訂購的產品無存貨，否則不會再刷新全頁快取。 以前，每次建立裝運時都會清除類別的快取。

<!-- ACP2E-1321-->

* 現在，當配置二級快取且部分遷移遠程資料時，資料將成功快取。 以前，在排清僅資料快取而未對這些資料進行雜湊處理之後，當資料雜湊存在時，不會儲存新快取。

<!-- B2B-2471-->

* 修正中的缺陷 `CatalogUrlResolverIdentity` 和 `CmsUrlResolverIdentity` 防止快取。 這會影響多個請求的路由查詢快取。

### 購物車和結帳

<!-- ACP2E-965-->

* 當購物車包含簡單產品的最小數量時，購物者現在可以新增額外項目至購物車。

<!-- ACP2E-964-->

* 擷取購物車資料的REST API呼叫現在會傳回相同的 `grand_total` 和 `base_grand_total` 儲存貨幣和基本貨幣相同時的值。 [GitHub-34649](https://github.com/magento/magento2/issues/34649)

<!-- ACP2E-962-->

* 匯出的值 **[!UICONTROL Maximum Qty Allowed in Shopping Cart]** 現在符合「管理配置」設定中設定的預設值。

<!-- ACP2E-889-->

* Adobe Commerce現在可正確計算帶有運費折扣之訂單退款的總金額。

<!-- ACP2E-876-->

* Google ReCAPTCHA現在可如預期般運作於店面訂單。 以前，當購物者首次嘗試下訂單之前未先選取Google ReCAPTCHA時，Adobe Commerce會顯示以下錯誤： `ReCaptcha validation failed, please try again` 和 `No such cart with id = ID`.

<!-- AC-2338-->

* 驗證碼影像重新整理現在會遵循管理配置設定，且在停用設定時不會觸發。 以前，無論設定是啟用還是停用，只要付款方法變更，就會觸發重新整理。 [GitHub-34855](https://github.com/magento/magento2/issues/34855)

<!-- ACP2E-479-->

* Adobe Commerce現在會在購物者變更購物車頁面上的產品數量而未更新購物車，然後嘗試導覽至下一頁時，如預期般先顯示確認快顯視窗。

<!-- AC-5987-->

* 購物者現在可以在管理員中減少產品後，從購物車減少其數量。 之前，Adobe Commerce會在購物者嘗試減少產品數量時擲回下列錯誤： `The requested qty is not available`. [GitHub-35780](https://github.com/magento/magento2/issues/35780)

<!-- AC-6744-->

* 在多次運送結帳期間，當產品數量超過設定的上限時，Adobe Commerce不再在JavaScript主控台中擲回錯誤。 現在，Adobe Commerce會顯示資訊性錯誤訊息。 [GitHub-36184](https://github.com/magento/magento2/issues/36184)

<!-- ACP2E-1276-->

* 當購物者使用鍵盤上的向下鍵來變更產品數量時，購物車頁面上的項目數量不再顯示為負數。 [GitHub-36299](https://github.com/magento/magento2/issues/36299)

<!-- ACP2E-1232-->

* 購物者無法再從類別新增產品至購物車，在變更購物者所屬的客戶群組後，該類別現在不允許。 Adobe Commerce現在會在權限組態設定變更時，檢查特定類別的客戶群組權限存取權。

<!-- ACP2E-926-->

* 在建立管理員訂單之前，客戶購物車不再清空；如果取消或放棄訂單，購物車內容現在會還原。 現在只有在建立訂單後，才會從購物車中移除項目。 以前，每當管理員使用者嘗試在管理員管理購物車頁面上建立訂單時，購物車就會清空。

<!-- AC-6939-->

* 現在，當您執行時，迷你購物車會顯示正確的產品影像 `bin/magento catalog:image:resize`. 以前，所有影像都會由預設產品預留位置影像取代。 [GitHub-35535](https://github.com/magento/magento2/issues/35535)

<!-- AC-2376-->

* 當運送地址包含擴充功能屬性時，結帳現在可以成功完成。 以前，Adobe Commerce會擲回此錯誤： `Object of class Magento\Quote\Api\Data\AddressExtension could not be converted to string`. [GitHub-34202](https://github.com/magento/magento2/issues/34202)

<!-- AC-2793-->

* 此 `addBundleProductsToCart` 如果所需的產品選項沒有值，查詢將不再將產品添加到報價中。 [GitHub-25676](https://github.com/magento/magento2/issues/25676)

<!-- B2B-2458-->

* Adobe Commerce現在會在 `addProductsToCart` 將產品新增至購物車時，權限不足時，查詢會失敗。

<!-- ACP2E-1242-->

* 當使用快速訂購來新增數量超過可用庫存的產品時，Adobe Commerce不再在購物車頁面上擲回錯誤。

<!-- AC-6312-->

* 此 `setGiftOptionsOnCart` 變異現在需要客戶授權才能執行客戶購物車操作。

### 購物車價格規則

<!-- AC-2242-->

* 在規則建立期間設定的購物車價格規則免運費選項，現在會如預期般套用至訂單。 以前，在建立規則期間應用的免運費選項在結帳期間被忽略，在應用規則時不允許免運費。 [GitHub-35013](https://github.com/magento/magento2/issues/35013)

<!-- ACP2E-1074-->

* 此 `discount_percent` 欄 `sales_order_item` 當未設定項目折扣數量或大於或等於訂單項目數量時，產品的表格現在會以折扣百分比按預期填入。 以前，將購物車價格規則套用至此產品時，不會填入此欄。

### 目錄

<!-- ACP2E-1181-->

* 產品清單介面工具集不再針對已登入的購物者顯示錯誤或快取的價格。 首頁介面工具集中顯示的價格現在符合購物者的地址，當購物者更新該地址時就會更新。 以前，瀏覽器快取不會根據客戶群組稅則更新首頁上的產品價格。

<!-- ACP2E-1007-->

* 「比較產品」清單功能現在可在多網站部署中正常運作，且取決於網站。

<!-- ACP2E-900-->

* 重新載入產品詳細資料頁面時，Adobe Commerce不再顯示上一頁的資料。 之前，重新載入產品詳細資料頁面時，第一個索引標籤的資料會與新載入的資料合併，並持續一秒。

<!-- ACP2E-816-->

* 具有子類別的類別現在可如預期在行動裝置的主功能表中展開。 之前，購物者無法在行動部署中開啟或展開具有子類別的類別。 [GitHub-35329](https://github.com/magento/magento2/issues/35329)

<!-- ACP2E-789-->

* 現在當產品指派給新網站或商店時，類別清單會如預期更新。 之前，產品價格索引器未標示為無效，隨後在 `cron` 如預期般執行。 因此，價格指數表中缺少產品的價格條目，並且未顯示在新商店或網站上。

<!-- AC-6395-->

* 當 **[!UICONTROL Display Out of Stock Products]** 組態設定已啟用。 [GitHub-35899](https://github.com/magento/magento2/issues/35899)

<!-- AC-6384-->

* 若 **[!UICONTROL Allow All Products Per Page]** 設定。 [GitHub-35900](https://github.com/magento/magento2/issues/35900)

<!-- AC-6330-->

* 此 **[!UICONTROL Display Out of Stock Products]** 設定選項現在會在啟用時如預期般運作。 之前，在管理員上啟用此選項時，店面上的所有產品都會顯示為無存貨。 [GitHub-35898](https://github.com/magento/magento2/issues/35898)

<!-- AC-2631-->

* 如果類別權限允許，指派給批發群組的客戶現在可以新增分組產品至其購物車。 如果未為客戶群組定義此權限，則會以配置設定優先。

<!-- ACP2E-1306-->

* 依布林屬性排序的產品現在可如預期運作。 [GitHub-36390](https://github.com/magento/magento2/issues/36390)

<!-- ACP2E-1206-->

* 目錄價格規則折扣不再套用至固定價格的自訂產品選項，而只會套用至產品的原始價格。

<!-- ACP2E-1027-->

* 由字母數字產品屬性的相關產品規則產生時，相關產品現在會在店面產品詳細資料頁面上成功擷取。 [GitHub-36285](https://github.com/magento/magento2/issues/36285)

<!-- AC-6810-->

* 目錄價格規則現在會考量所選範圍，並只會套用至屬性具有符合規則之選項值的網站的產品。 以前，規則沒有考慮多網站部署中選取的範圍。 [GitHub-36049](https://github.com/magento/magento2/issues/36049)

<!-- ACP2E-891-->

* 現在當購物者從「我的購物車」頁面修改可設定的產品時，可在產品詳細資料頁面中預先選取色票選項顏色和大小屬性。 (jQuery 3.x版現在支援 `swatchRenderer` 介面工具集名稱，現在為駝峰式大小寫。) 之前不會預先選取色票選項。

<!-- ACP2E-1361-->

* 現在當客戶訂閱價格下降警報時，系統會通知客戶產品價格下降。 以前，由於應用程式層級快取，不一定會傳送降價通知。

<!-- ACP2E-1348-->

* 以具有 **[!UICONTROL is not one of]** 條件現在可如預期運作。

<!-- AC-729-->

* Adobe Commerce不再錯誤地假設某個類別是根據類別路徑的其他類別的父項。 [GitHub-32464](https://github.com/magento/magento2/issues/32464)

### 可配置產品

<!-- ACP2E-1083-->

* 當管理員使用者手動將產品新增至已指派許多簡單產品至可設定的產品時，Adobe Commerce不再擲回錯誤。 以前，Adobe Commerce顯示此錯誤： `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- AC-2877-->

* 在部署中，購物者無法再將可售數量為0的可設定產品新增至購物車，同時停用後期訂單。 Adobe Commerce現在會指出產品無存貨。 [GitHub-35319](https://github.com/magento/magento2/issues/35319)

<!-- AC-2678-->

* 現在，透過從不同商店檢視匯入具有許多選項的可設定產品來建立新產品時，會如預期產生第一個產品的精確副本。 以前，新產品可配置選項的排序順序不正確，並且在具有多個商店視圖和區域設定的部署中，標題未翻譯為新商店視圖的區域設定。 [GitHub-35200](https://github.com/magento/magento2/issues/35200)

<!-- AC-535-->

* 具有所有無庫存子產品的可配置產品現在在店面顯示為無庫存。

<!-- AC-6852-->

* 可設定的產品SKU和產品名稱現在可正確顯示。 先前，當您將屬性群組移至產品詳細資料群組上方後，名稱和SKU會顯示為未定義 **[!UICONTROL Stores]** > **[!UICONTROL Attribute set]**. [GitHub-36309](https://github.com/magento/magento2/issues/36309)

### 優惠券

<!-- ACP2E-1053-->

* 「管理抵用券代碼」工作流程已新增驗證邏輯，以在產生抵用券時強制執行抵用券代碼設定。 之前，產生抵用券代碼會忽略 **[!UICONTROL Code Length]** 設定時機 **抵用券數量** 值大於2500。

<!-- ACP2E-1029-->

* 現在，當使用PayPal Express付款方法結帳期間套用獎勵抵用券時，會如預期般將獎勵積分新增至客戶帳戶。

<!-- ACP2E-1225-->

* 現在當購物車價格規則具有權重作為條件時，您可以在建立管理訂單時套用優惠券代碼。 過去，如果未為產品選取其他欄位，則不會設定抵用券代碼。 [GitHub-36271](https://github.com/magento/magento2/issues/36271)

<!-- ACP2E-1223-->

* 您現在可以依據多個購物車價格規則來篩選優惠券報表。 [GitHub-36272](https://github.com/magento/magento2/issues/36272)

<!-- AC-2812-->

* 管理員使用者按下時，現在會套用並儲存自訂選項 **[!UICONTROL Enter]** 使用自訂選項設定產品時。 以前，您可以選取選項並將產品新增至訂單，但選項並未儲存，且系統會提示管理員使用者重新選取產品選項。 [GitHub-35284](https://github.com/magento/magento2/issues/35284)

<!-- AC-6688-->

* 抵用券代碼現在可成功匯出至Excel XML。 之前，產生的檔案並未包含所有選取的抵用券代碼，而是只包含每個頁面選擇器中選取的項目數量。[GitHub-36073](https://github.com/magento/magento2/issues/36073)

### cron

<!-- ACP2E-1243-->

* 此 `catalog_index_refresh_price` cron作業現在會成功執行。 以前，Adobe Commerce在cron執行期間記錄此錯誤： `report.ERROR: Cron Job catalog_index_refresh_price has an error: SQLSTATE[HY093]: Invalid parameter number: number of bound variables does not match number of tokens`.

### 貨幣

<!-- ACP2E-1012-->

* 自訂貨幣符號和價格之間缺少的空間已新增至店面和管理產品價格。 已新增適當的條件和規則運算式，以允許貨幣符號中的自訂NBSP。 例如，IDRx 105.00先前顯示為IDRx105.00。

### 客戶區段

<!-- ACP2E-1185-->

* 建立新購物車價格規則期間，「管理員客戶」區段格線上的「是/否」篩選器現在可如運期般運作。

### 電子郵件

<!-- ACP2E-1063-->

* Adobe Commerce從管理員建立訂單後，不再傳送客戶重複的電子郵件。

<!-- ACP2E-1200-->

* 當 **[!UICONTROL Email order confirmation]** 設定已停用。 [GitHub-36256](https://github.com/magento/magento2/issues/36256)

<!-- ACP2E-1151-->

* 對於具有自訂選項的產品，影像選項不再顯示為貸項通知單、訂單確認和發票客戶電子郵件（預設模板）中的HTML標籤。

### 框架

<!-- AC-6385-->

* 管理員使用者現在可以成功開啟管理員 **[!UICONTROL Store]** > **[!UICONTROL Configuration]** 頁面中沒有國家/地區時 **歐盟國家** 設定(**[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL General]** > **[!UICONTROL Country options]** > **[!UICONTROL European Union Countries]**)。 以前，當管理員使用者嘗試開啟此頁面時，Adobe Commerce擲回此錯誤： `TypeError: explode(): Argument #2 ($string) must be of type string, null given in /var/www/php/folder/vendor/magento/module-config/ViewModel/CountryFilter.php:46`. [GitHub-35901](https://github.com/magento/magento2/issues/35901)

<!-- AC-6361-->

* `jquery.cookie` 相依性現在可如預期般搭配JavaScript相依性運作。 以前，您無法將別名用於 `jquery/jquery.cookie`. [GitHub-35913](https://github.com/magento/magento2/issues/35913)

<!-- AC-3226-->

* 此 `bin/magento i18n:collect-phrases` 現在包含 `<title>` 文字。 [GitHub-35462](https://github.com/magento/magento2/issues/35462)

<!-- AC-6841-->

* `Magento\Framework\Code\Reader\ArgumentsReader::getParentCall()` 現在支援命名的建構子引數。 您現在可以依參數名稱來設定參數，以呼叫函式。

<!-- magento/magento2/pull/35567-->

* Adobe Commerce不再根據類別路徑錯誤地假設某個類別為另一個類別的父類別。 以前，當兩個類別相鄰，且一個類別ID以另一個類別的類別ID開頭時，Adobe Commerce會假設這些類別具有相同的父類別。 [GitHub-32464](https://github.com/magento/magento2/issues/32464)

<!-- ACP2E-1287-->

* 錯誤現在會如預期記錄在 `exception.log` 檔案。 以前雖然錯誤記錄在 `system.log` 檔案，未登錄錯誤 `var/log/exception.log`.

<!-- AC-3758-->

* 商家現在可以指定自訂外部SMTP提供者。 [GitHub-26104](https://github.com/magento/magento2/issues/26104)

<!-- AC-3752-->

* 執行Adobe Commerce 2.4.3-p2的部署時，OAuth整合現在可如預期重新授權。 以前，重新授權失敗，此錯誤為： `The attempt to post data to consumer failed due to an unexpected error. Please try again later`. Adobe Commerce也嘗試解密未加密的值。 [GitHub-35313](https://github.com/magento/magento2/issues/35313)

<!-- ACP2E-1201-->

* 正確 `rowId` 類別時，參數現在會傳遞 `urlKey` 會針對具有子類別的類別儲存。 以前是錯的 `categoryId` 儲存類別時傳遞 `URLKey`.

<!-- ACP2E-981-->

* 產品屬性代碼 `event` 已新增至保留產品屬性代碼清單，如此可消除在店面上使用此名稱之屬性的相關錯誤。 之前，當 `event` 已使用：  `report.CRITICAL: Error: Call to a member function getStatus() on string in /home/mer33515/public_html/ee24develop/magento2ee/app/code/Magento/CatalogEvent/Observer/ApplyIsSalableToProduct.php:23`.

<!-- AC-5985-->

* 現在會一致地顯示訂單放置期間發生的店面驗證錯誤訊息。 之前，訊息會出現、收合，然後重新出現。 [GitHub-35651](https://github.com/magento/magento2/issues/35651)

<!-- AC-2943-->

* AMQP消費者不再因已過時而失敗 `trim()` 在執行PHP 8.1的部署上運作。之前，當AMQP使用者在安裝後開始時，Adobe Commerce擲回此錯誤： `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in .../vendor/magento/framework-amqp/Config.php on line 143`. [GitHub-35380](https://github.com/magento/magento2/issues/35380)

<!-- AC-2882-->

* 此 `getFilteredTimerIds` 方法現在可如預期般運作。  類別 `Magento\Framework\Profiler\Driver\Standard\Stat` 現在與PHP 8.1相容。以前，Adobe Commerce在呼叫此方法時擲回例外狀況。 [GitHub-35307](https://github.com/magento/magento2/issues/35307)

<!-- AC-2784-->

* 移除對 `imagemin-svgo` 程式庫。

<!-- AC-2058-->

* 縮制範本程式現在會成功處理第一個註解開頭為時的連續註解 `//`. [GitHub-34880](https://github.com/magento/magento2/issues/34880)

<!-- AC-2241-->

* 更正由 `BundleGraphQl` 返回此錯誤的模組： `"debugMessage": "Notice: Undefined offset: 16 in vendor/magento/module-bundle-graph-ql/Model/Resolver/Options/Collection.php on line 130"`.[GitHub-34991](https://github.com/magento/magento2/issues/34991)

### 一般修正

<!-- ACP2E-1068-->

* Adobe Commerce現在會在管理員使用者選取 **[!UICONTROL Last 24 Hours]** 選項（在「管理統計資料」控制面板中）。 以前，Adobe Commerce顯示的時間範圍不正確。 發生此情況是因為資料庫的時區保持不變。

<!-- ACP2E-1066-->

* 現在可以同時為整數和小數數量生成貸項通知單。 過去，僅支援整數數量。

<!-- ACP2E-1001-->

* 類型的客戶郵遞區號輸入驗證規則 **僅限數值** 現在可如預期般運作 **[!UICONTROL Edit Customer Address]** 欄位()**[!UICONTROL Store]** > **[!UICONTROL Attribute]** > **[!UICONTROL Customer Address]**)。 之前，客戶地址資訊是在未驗證郵遞區號的情況下儲存的。

<!-- ACP2E-975-->

* 具有限制一個網站存取權限的管理員使用者現在可以使用「登入為客戶」功能成功登入管理員。

<!-- ACP2E-873-->

* 全域共用客戶帳戶現在具有地址，這些地址會根據目前網站的允許國家/地區清單進行驗證並成功儲存。 以前，這些帳戶會根據允許的客戶註冊網站國家/地區進行錯誤驗證。

<!-- AC-3167-->

* CMS頁面階層的階層連結在 **[!UICONTROL Enable Hierarchy Functionality]** 已停用。 過去，會顯示階層連結，當購物者點按該連結時，便會顯示404頁面。 [GitHub-35513](https://github.com/magento/magento2/issues/35513)

<!-- AC-2567-->

* 透過管理員從所有網站中移除產品，不再造成下列錯誤： `SQLSTATE[42000]: Syntax error or access violation`. [GitHub-35133](https://github.com/magento/magento2/issues/35133)

<!-- AC-2235-->

* 超過登入失敗次數上限的客戶現在可以在密碼重設後登入。 [GitHub-34981](https://github.com/magento/magento2/issues/34981)

<!-- AC-2020-->

* 管理員使用者新增元素時，動態列元件現在會如預期般運作。 以前，將新簡單產品新增至分組產品時，列元件的行為不正確。 [GitHub-34850](https://github.com/magento/magento2/issues/34850)

<!-- magento/magento2/pull/35598-->

* 修正的錯字和 `app/code/Magento/Backend/etc/menu.xsd` 檔案。

<!-- magento/magento2/pull/35818-->

* 此 `app/code/Magento/Authorization/README.md` 檔案已更新，以準確說明表格建立。

<!-- magento/magento2/pull/35940-->

* 此 `recordLogin` 方法已更新，以在使用者模型上設定登入值，並保留 `logdate` 和 `lognum` 欄位 `admin_user` 表格。 過去，系統不會記錄更新管理員使用者的登入嘗試。

<!-- magento/magento2/pull/35990-->

* GitHub問題範本已轉換為針對開發人員體驗問題和功能要求的問題表單。

<!-- ACP2E-961-->

* 此 `Is required` 「管理員客戶編輯」表單的每個網站範圍現在都能正確實作客戶屬性。

<!-- ACP2E-895-->

* 此 **[!UICONTROL Grid Filter Condition Type]** 當 **[!UICONTROL Use in Filter Option]s** 設定已停用。

<!-- AC-6020-->

* 如果商戶在建立產品時未能輸入選用的SKU屬性值，Adobe Commerce現在會顯示資訊性錯誤訊息。 之前，當屬性為選填時，應用程式會擲出此例外： `Deprecated Functionality: trim(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/html/mg244/project-community-edition/vendor/magento/module-eav/Model/Entity/AbstractEntity.php on line 932`. [GitHub-35810](https://github.com/magento/magento2/issues/35810)

<!-- ACP2E-716-->

* 此 **[!UICONTROL Show my quotes]** 篩選 **[!UICONTROL My Quotes]** 頁面現在可如預期般運作。 以前，篩選結果包含其他管理員使用者的引號。

### 禮品卡

<!-- ACP2E-851-->

* 禮品卡產品金額現在與匯入期間CSV檔案中指定的金額相同。 已新增現有選項的檢查，且先前的值現在會根據唯一索引鍵更新。 此前，當多次進口禮品卡時，禮品卡的金額翻了一番。

### 禮品包裝

<!-- AC-3061-->

* 當將禮品包裝應用於包含物理和虛擬產品的訂單時，禮品包裝價格現在按預期顯示在訂單摘要塊中。 之前，Adobe Commerce不會顯示禮品包裝價格。

### GraphQL

<!-- AC-1730-->

* `Types` 在GraphQL程式碼中實作多個介面時，現在可以 `&` 登入 `,` 根據GraphQL `@doc`規範。

<!-- ACP2E-885-->

* 此 `setShippingAddressesOnCart` 變異現在支援將數值區域代碼設定為 `region`. 以前，此變異對數值區域代碼值的運作不正確。

<!-- ACP2E-1237-->

* 此 `products` 查詢現在只返回與指定範圍關聯的審核。 以前，查詢會從所有儲存區傳回審核。

<!-- ACP2E-882-->

* 現在，在GraphQL請求期間可接受類別權限。

<!-- AC-1805-->

* 此 `customer` 查詢現在會對具有指定之 `from` 和 `to` 範圍正確。 [GitHub-31537](https://github.com/magento/magento2/issues/31537)

<!-- AC-5984-->

* 此 `product` 查詢現在會在匯總中傳回正確的類別資料。 以前， `attribute_code.category_uid` 傳回的值為 `category_id` 而非 `category_uid`.

<!-- AC-6084-->

* 此 `customerOrders` 查詢不再擲回 `\"model\" value should be specified`錯誤。 [GitHub-35852](https://github.com/magento/magento2/issues/35852)

<!-- ACP2E-894-->

* 此 `customer` 查詢現在會根據範圍篩選訂單。 您現在可以指定查詢應依商店、網站或全域篩選訂單。

<!-- ACP2E-1172-->

* `categoryList` 現在會針對錨記和取消錨記的父類別，傳回精確的產品計數。 新 `is_anchor` 屬性已新增至類別集合的「選取的欄」清單。 以前，請求傳回0個產品計數。 [GitHub-36300](https://github.com/magento/magento2/issues/36300)

<!-- AC-2500-->

* 此 `generateCustomerTokenAsAdmin` 現在，在建立代號以登入多存放區部署中的非預設存放區時，變異可如預期般運作。 [GitHub-35084](https://github.com/magento/magento2/issues/35084)

<!-- AC-1731-->

* 此 `createEmptyCart` 使用過期的代號時，變異現在會如預期擲回例外。 [GitHub-26112](https://github.com/magento/magento2/issues/26112)

<!-- AC-1965-->

* 購物車查詢錯誤訊息已提供更多資訊。 [GitHub-34546](https://github.com/magento/magento2/issues/34546)

<!-- AC-2798-->

* `products` 查詢回應匯總資料現在包含價格類型屬性的正確值 `attribute_code` 和 `label`. [GitHub-28878](https://github.com/magento/magento2/issues/28878)

<!-- AC-6685-->

* 此 `products` 當資料庫前置詞具有非空值時，查詢會如預期返回類別資訊。 之前，它會傳回 `Internal server error`. [GitHub-36117](https://github.com/magento/magento2/issues/36117)

<!-- AC-1003-->

* 修正 `getCustomerIsGuest` 方法。 [GitHub-29529](https://github.com/magento/magento2/issues/29529)

<!-- B2B-2221-->

* 此 `Magento\CatalogGraphQl\Plugin\DesignLoader` 外掛程式。

<!-- B2B-2379-->

* 購物車重新載入現在只會在購物車因GraphQL突變而初始化時觸發一次。 之前，購物車載入會針對庫存觸發不必要的購物車重新驗證，而庫存在每次載入購物車時消耗了大量資源。

<!-- AC-1726-->

* 新增 `gift_message` 類型 `OrderItemInterface`. [GitHub-29418](https://github.com/magento/magento2/issues/29418)

<!-- AC-2454-->

* GraphQL回應中傳回的產品選項現在僅包含使用者所屬目錄中的產品。 如果用戶屬於共用目錄，則只返回共用目錄中的產品。 如果使用者是訪客或不是自訂共用目錄的一部分，則只會傳回公用目錄中的產品。


### Google ReCAPTCHA

<!-- AC-3179-->

* 中出現reCAPTCHA錯誤 `var/log/exception.log` 已解決Google V3 reCAPTCHA管理員登入的檔案，且未記錄任何錯誤訊息。 以前，當管理員使用者設定其 **[!UICONTROL Configuration]** > **[!UICONTROL Security]** > **[!UICONTROL Google reCAPTCHA Admin Panel]** 設定： `main.ERROR: Can not resolve reCAPTCHA parameter. {"exception":"[object] (Magento\Framework\Exception\InputException(code: 0): Can not resolve reCAPTCHA parameter. at /home/xxxxxxx/public_html/vendor/magento/module-re-captcha-ui/Model/CaptchaResponseResolver.php:25)"} []`. [GitHub-34975](https://github.com/magento/magento2/issues/34975)

### 影像

<!-- ACP2E-905-->

* 更新PDF發票單標誌大小的建議。

### 匯入/匯出

<!-- ACP2E-957-->

* 匯入與現有產品具有相同數值URL索引鍵，但沒有其終端字母字元的產品，在 **產品URL尾碼** 在「管理」中設為empty 。

<!-- AC-6588-->

* 此 `bin/magento app:config:import`命令現在已成功導入 `config.php` 檔案包含特定 `cron` 運算式。 以前，導入失敗，此錯誤為： `Import failed: Notice: Trying to access array offset on value of type null in [..]/vendor/magento/module-config/Model/Config/Backend/Currency/Cron.php on line 66`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-1289-->

* 使用AWS S3做為遠端儲存時，完整匯出功能現在可正常運作。 以前，由於上傳的檔案大小，匯出失敗。

<!-- ACP2E-982-->

* 現在，當CSV檔案中的庫存資料欄遺失時，產品狀態會正確匯入。 以前，在產品匯入後，系統會自動將預設來源指派給產品，其數量設為零，而當CSV檔案中的庫存資料欄遺失時，其狀態會列為無存貨。

<!-- ACP2E-841-->

* 現在，當匯入包含100多筆記錄時，匯入預先定價值可提供新記錄和更新記錄的正確計數。 以前，匯入成功訊息提供的計數錯誤。

<!-- ACP2E-984-->

* 匯出的CSV檔案現在包含以多種語言儲存之類別名稱的正確路徑。 已為類別集合新增商店ID。 以前，導出的檔案包含不同語言的混合路徑，而不是從預設儲存視圖派生的類別路徑。

<!-- ACP2E-1319-->

* 透過匯入功能更新特定商店檢視中產品的自訂選項後，現已成功完成。 以前，如果將產品相關列分割為多個批次，則會擲回內部伺服器錯誤。

<!-- AC-6926-->

* 此 `Fixer.io` 匯入服務現在如預期般運作。 現在已成功匯入匯率。 [GitHub-36010](https://github.com/magento/partners-magento2ee/issues/36010)


### 索引

<!-- AC-3152-->

* 索引器 `batch_size` 針對 `catalogpermissions_category` 索引現在已變更為 `env.php` 檔案。 以前，索引器路徑中的錯字 `batch_size` 覆蓋防止將批大小更改為 `env.php`. [GitHub-652](https://github.com/magento/partners-magento2ee/issues/652)

<!-- ACP2E-1296-->

* 目錄包含套件產品未指派給任何網站時，價格重新索引現在會成功執行。 以前，產品價格指數執行時會發生下列錯誤： `Warning: Undefined array key <bundel product id > in vendor/magento/module-bundle/Model/ResourceModel/Indexer/Price/DisabledProductOptionPriceModifier.php on line 117`. [GitHub-35796](https://github.com/magento/magento2/issues/35796)

### 基礎設施

<!-- ACP2E-869-->

* 已新增 `DATE` 和 `DATETIME` 資料庫傾印中的值，以供Adobe Commerce支援。 以前，資料庫備份表中的客戶/報價/訂單表未清理日期時間類型欄位。

<!-- ACP2E-804-->

* 此 `escaper.js` `escapeHtml` 函式現在會將&amp;符號的特殊字元轉換為 `"$amp;"` per `InnerHtml` 規則。 此通用解決方案解決了標題輸入框中的特殊字元和字元引用轉換問題，並將確切值保存為插入。 過去，內容階層中的節點名稱中會不正確編碼&amp;字元。

<!-- AC-5972-->

* 第三方的問題 `colinmollenhour/php-redis-session-abstract` 模組和PHP 8.1已解決。 [GitHub-35634](https://github.com/magento/magento2/issues/35634)

### Inventory management

此版本包含多項錯誤修正。 此處提供Inventory management的搶鮮版發行說明。 您可以在以下位置找到Adobe Commerce 2.4.6 GA的Inventory management發行說明： [發行說明](https://experienceleague.adobe.com/docs/commerce-admin/inventory/release-notes.html).

<!-- ACP2E-1106-->

* 現在，當售出的子產品返回至庫存時，店面將複合產品（可配置、捆綁和分組）顯示為庫存。 以前，店面指出，在這些條件下，複合產品無存貨。

<!-- ACP2E-1148-->

* 如果建立的選項的數量設定為0，且 **[!UICONTROL Display out-of-stock products]** 啟用。

<!-- ACP2E-118-->

* 如果產品仍有存貨，存貨量變更時，類別頁面快取不再失效。 Adobe Commerce現在會從快取載入頁面，而非在店麵類別頁面的產品數量（而非其他項目）變更時重新產生頁面。

<!-- ACP2E-1033-->

* 現在，在單一來源模式中使用「庫存」時，搭配 **[!UICONTROL Display Out-Of-Stock Products]** 設定啟用。 Adobe Commerce現在會在計算時檢查產品是否可售。

<!-- ACP2E-1015-->

* 啟用「庫存」時，店內傳送的購物車價格規則現在可如預期運作。 之前，購物車價格規則產生的折扣不會套用在這些條件下。

<!-- ACP2E-1003-->

* 以排程模式更新產品詳細目錄時，不會再清除所有快取。 以前，清單索引器清除了所有配置快取。

<!-- ACP2E-992-->

* 「進階庫存」中產品的「允許多個發運箱」屬性的值現在會如預期般儲存。

<!-- ACP2E-979-->

* Adobe Commerce現在會針對已存放店內提貨的訂單，發出部分退款貸項通知單後，發出準確的預留補償。 之前，儲存至的保留不正確 `inventory_reservation` 管理員用戶建立貸項通知單時不選擇 **[!UICONTROL Return to Stock]** 核取方塊。

<!-- ACP2E-952-->

* 當Adobe Commerce的其中一項變數在實施多來源庫存的部署中，已手動傳回至存貨時，系統不會再在店面上將可設定產品顯示為無存貨。

<!-- ACP2E-925-->

* 產品網格上的列位置(**[!UICONTROL Catalog]** > **[!UICONTROL Products]**)在設定了多個庫存來源的部署中，頁面重新載入後，不再回復到先前的位置。

<!-- ACP2E-908-->

* 現在，在為虛擬產品簽發貸項通知單後，庫存量才正確，當 **[!UICONTROL Back to stock]** 未選取核取方塊。

<!-- ACP2E-859-->

* 您現在可以使用自動產品排序和範圍來儲存類別，並將其指派給非預設庫存。 以前，Adobe Commerce未儲存類別並顯示此錯誤： `Something went wrong while saving the category`.

<!-- ACP2E-813-->

* 當建立產品時，所有無庫存的可設定變數現在會如預期更新可設定產品庫存狀態。

<!-- ACP2E-924-->

* 保留不一致分析工具現在可以與包含可配置、捆綁和分組產品的部分發運訂單正確工作。 現在分析複合產品類型。 以前，取消和退款只保存在父產品，而不保存在可配置和一起發運捆綁產品的子產品訂單項。

<!-- ACP2E-1180-->

* Adobe Commerce不再在管理員使用者嘗試將200個以上的庫存來源指派給存貨或產品時顯示錯誤。

<!-- ACP2E-1138-->

* Adobe Commerce現在支援為已刪除產品的訂單建立貸項通知單。 以前，在建立發票後從訂單中刪除產品時，商家無法建立貸項通知單。 應用程式顯示此錯誤： `Following products with requested skus were not found: s00001`.

<!-- ACP2E-1017 -->

* 系統現在會根據單一和多個存放區ID來篩選存放區。 此 `event` 產品屬性代碼已新增至保留屬性代碼清單。 以前，安裝庫存模組時，低庫存報表會擲回例外狀況。

<!-- ACP2E-748 -->

* 分層導覽篩選器現在可如預期運作，且無庫存產品現在會附加至店麵類別產品清單。 新 `is_out_of_stock` 排序屬性使用Elasticsearch動態欄位映射器來存放店面產品集合。

<!-- ACP2E-1209-->

* 當REST更改子產品庫存狀態時，複合產品（包、分組和可配置）庫存狀態將按預期更新 `POST /rest/V1/inventory/source-items` 呼叫。

### 媒體集

<!-- AC-3034-->

* 現在預設會停用舊版媒體集。 以前， **[!UICONTROL Enable old Media gallery]** 設為 **[!UICONTROL Yes]**.

<!-- ACP2E-1302 -->

* 「新介質庫」已優化，以改進類別頁中目錄樹的載入。

### 記錄

<!-- ACP2E-1312-->

* 您現在可以為0個位元組的記錄檔產生系統報告。 以前，當一或多個檔案為空時，Adobe Commerce為記錄檔集合產生報表時，會擲回錯誤。

### 順序

<!-- ACP2E-1107-->

* 「管理員銷售訂單貸項通知單」頁現在顯示使用「商店貸項」和多張發票建立的訂單的正確總量。 以前，總計計算不正確，用戶無法生成貸項通知單。

<!-- ACP2E-998-->

* 安裝指令碼中傳遞的訂單首碼現在會正確新增至訂單ID。

<!-- ACP2E-790-->

* 訂單包含具有長自訂文字值的產品時，訂單詳細資料頁面現在會成功載入。 之前，訂單詳細資料頁面未載入，而 `sales_order_item.product_options` 欄未正確儲存（如果產品包含文字自訂選項的長值）。

<!-- AC-3178-->

* 現在，部分退貨訂單的店面訂單狀態已準確。 以前，在應用部分退款時，訂單在發運後仍處於處理狀態。 [GitHub-35528](https://github.com/magento/magento2/issues/35528)

<!-- AC-3031-->

* 現在，客戶群組的準確表示為 **未登入** 來賓用戶建立的訂單。 以前，客戶組在訪客訂單摘要中為NULL，這會影響確認電子郵件和訂單匯出。 [GitHub-35440](https://github.com/magento/magento2/issues/35440)

<!-- AC-2811-->

* 狀態 **[!UICONTROL Closed]** 現在，在發出貸項通知單並退款客戶後，會如預期分配給虛擬訂單。 以前，虛擬產品顯示為 **[!UICONTROL Complete]** 中，但 **[!UICONTROL Closed]** 從管理員新增註解時顯示在訂單註解的頁尾中。 [GitHub-35283](https://github.com/magento/magento2/issues/35283)

<!-- AC-6641-->

* 現在，客人可以訂購數量少於1的產品，而產品數量現在嚴格鍵入為 `float`. 之前，由於產品數量嚴格分類為 `int`，產品數量小於1的訂單失敗，並顯示以下訊息： `Some of the products are disabled`. [GitHub-36060](https://github.com/magento/magento2/issues/36060)

<!-- ACP2E-1313-->

* 現在，當 **[!UICONTROL Apply discount on prices]** 配置選項設定為 **[!UICONTROL including taxes]**.

<!-- ACP2E-1199-->

* 現在，在存檔訂單後，發票、發運和貸項通知單網格將非同步更新。

<!-- ACP2E-1194-->

* 同時執行、相同的GraphQL請求不再產生重複訂單。 現在，報價已鎖定最多10秒，以防止建立重複訂單，而第二個請求會因下列錯誤而失敗： `The cart isn't active` 或 `The order has already been placed and is currently processing`. 此鎖定值可透過id來設定，用於 `Magento\Quote\Model\PlaceOrderMutex` 類 `lockWaitTimeout` 參數。 [GitHub-36274](https://github.com/magento/magento2/issues/36274)

<!-- ACP2E-1170-->

* 將註解新增至封存訂單時，不再將其傳回未封存的訂單格線，同時保留其封存狀態。

<!-- ACP2E-860-->

* 公司屬性值現在會如預期顯示在結帳工作流程的帳單和運送地址區段中。 以前，由於建立訂單期間商店未正確設定，公司屬性無法正確顯示在訂單詳細資料頁面上。 僅當 **顯示公司** 屬性設為 **[!UICONTROL optional]** for **主要網站** 在多商店部署中。

<!-- ACP2E-1117-->

* 此 `customer_address_id` 值現在設定為新帳單地址的預期值，當 **[!UICONTROL My billing and shipping address are the same]** 複選框。 已引入其他條件，以在設定運送地址的客戶地址ID之前，識別帳單地址是否與運送地址相同。

<!-- AC-6057-->

* 已解決訂單放置的並行問題。 以前，如果從不同瀏覽器同時下達兩個訂單，或幾乎同一時間，則兩個訂單都會獲派相同的訂單ID。 [GitHub-35833](https://github.com/magento/magento2/issues/35833)

<!-- AC-6908-->

* 啟用非同步索引時，為免費產品下單自動開票的訂單現在可如預期運作。 不會將任何項目新增至 `sales_order_grid or sales_invoice_grid` 表格。 之前，Adobe Commerce會提出例外，因為應用程式嘗試在下訂單時為格線建立索引，而非依賴 `cron`. [GitHub-36334](https://github.com/magento/magento2/issues/36334)

### 頁面產生器

<!-- ACP2E-956-->

* 您現在可以使用「頁面產生器」拖放功能，將影像大量匯入圖庫。

<!-- AC-2074-->

* 已解決頁面產生器滑桿CSS規則的問題。 [GitHub-34527](https://github.com/magento/magento2/issues/34527)

<!-- ACP2E-978-->

* `Dropdown`, `Text area`，和 `Text field` 屬性現在可在Page Builder產品屬性清單中使用。 以前，僅 `Dropdown` 和 `Text area` 屬性可用。

### 付款

<!-- ACP2E-862-->

* 當COD免除時，COD付款方法不再在店面結帳工作流中呈現，而COD是在發運地址和計費地址中指定的國家/地區。 以前未實作此功能的「管理員」組態設定。

<!-- AC-1119-->

* 如果購物者未儲存代號，保管庫付款資訊將不再顯示在管理訂單建立工作流程的「付款」區段中。 [GitHub-33954](https://github.com/magento/magento2/issues/33954)

<!-- AC-2688-->

* 按購物車價格規則套用折扣後，自訂價格不再加倍。 [GitHub-35154](https://github.com/magento/magento2/issues/35154)

<!-- ACP2E-1120-->

* 使用「零小計結帳」付款方法下單時，新訂單待定狀態現在會如預期般執行。

<!-- ACP2E-1121-->

* 透過GraphQL以PayPal Express建立訪客購物者訂單期間，現在會考量訪客電子郵件設定。 以前，PayPal帳戶中設定的電子郵件地址會覆寫設定的電子郵件地址。

#### Braintree

<!-- BUNDLE-3186-->

* 訂單ID現在會新增至付款交易的結算請求。

<!-- AC-3030-->

* 當商戶點按 **[!UICONTROL Reports]** > **[!UICONTROL Braintree Settlement]**: `Error: Undefined constant Braintree\PaymentInstrumentType::ANDROID_PAY_CARD in /var/www/html/vendor/paypal/module-braintree-core/Ui/Component/Report/Listing/Column/PaymentType.php:49`. [GitHub-35434](https://github.com/magento/magento2/issues/35434)

<!-- BUNDLE-3043-->

* 此 `customerPaymentTokens` 當管理員關閉保管庫時，查詢不再傳回BraintreeToken。

<!-- BUNDLE-3107-->

* 此 **[!UICONTROL Pay Later]** 已為義大利和西班牙啟用按鈕和橫幅。

<!-- BUNDLE-3137-->

* 管理員使用者現在可以在啟用Braintree付款方法時建立訂單或重新排序。 以前，Adobe Commerce會擲回此錯誤： `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`.

<!-- BUNDLE-3139-->

* 現在，當啟用BraintreePayPal時，使用Braintree付款方法的結帳已成功完成，並 **[!UICONTROL Enable Card Payments]** 已停用。 以前進度列從未解析，而Adobe Commerce顯示此主控台錯誤： `adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66)`. [GitHub-35961](https://github.com/magento/magento2/issues/35961)

<!-- BUNDLE-3140 3141-->

* 實施了欺詐保護、ACH支付和本地支付方法Web鈎。 欺詐保護Web鈎僅在Braintree中作出風險決策時觸發。 只有在ACH付款更新為 `settled` 或 `settlement decline`.

<!-- BUNDLE-3143-->

* 此 **[!UICONTROL Tagline]** 和 **[!UICONTROL Layout]** 已從所有 **[!UICONTROL PayPal]** 按鈕。

<!-- ACP2E-1229-->

* 當購物者更新其計費地址時，結帳工作流程中仍會選取「Braintree保管庫」付款方法選項。 以前，當購物者取消選取 **[!UICONTROL My billing and shipping address are the same]** 按鈕。

<!-- BUNDLE-3184-->

* 行項目現在會在 **[!UICONTROL Send Line Items]** 組態設定已從「管理員」中啟用。

<!-- BUNDLE-3187-->

* ACH支付方法的驗證邏輯 **[!UICONTROL Account Number]** 欄位現在支援4到17位數的文字。

<!-- BUNDLE-3043-->

* 此 `customerPaymentTokens` 當管理員關閉保管庫時，查詢不再傳回Braintree代號。

<!-- BUNDLE-3137-->

* 現在啟用Braintree付款方法時，管理員使用者可以為客戶建立訂單或重新排序。 以前，Adobe Commerce會擲回此錯誤： `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`

<!-- BUNDLE-3139-->

* 購物者現在可以在商店中使用Braintree付款方法， **[!UICONTROL Enable Card Payments]** 已被禁用。 之前，Adobe Commerce會擲出此JavaScript錯誤： `_adapter.js:66 Uncaught TypeError: Cannot read properties of undefined (reading 'clientToken')at Object.getClientToken (adapter.js:66:66).`

### 效能

<!-- ACP2E-1028-->

* 價格索引器現在會在大型目錄的部分重新索引期間取代記錄後，如預期刪除過時的資料。 以前，重新索引過程在替換過期記錄之前刪除了這些記錄，這偶爾會導致產品從店面中暫時消失。 [GitHub-35616](https://github.com/magento/magento2/issues/35616)

<!-- ACP2E-963-->

* 的效能 `bin/magento/setup:upgrade` 命令已改進。 以前，此命令重新建立了資料庫觸發器，導致命令執行期間出現嚴重停機。 此外，索引器未回復回排程模式，並保留在儲存模式。 [GitHub-33386](https://github.com/magento/magento2/issues/33386)

<!-- ACP2E-1016-->

* 現在，透過API更新層級價格的執行速度會更快。 以前，更新層價格會產生不必要的 `SELECT` 查詢，這會在將許多客戶群組指派給產品時延遲執行。

<!-- ACP2E-1307-->

* 已最佳化載入包含目錄Widget產品清單的頁面。 以前，非全域屬性是直接從資料庫載入。

### 報表

<!-- ACP2E-852-->

* 「管理記錄」報表現在會顯示正確 **[!UICONTROL Value before change]** 值。

<!-- ACP2E-1104-->

* 訂單總計報表 **從** 和 **to** 現在會在從日期選擇器選取之後正確顯示日期。

<!-- BUNDLE-3147-->

* 此 `ANDROID_PAY_CARD` 常數 `Braintree/Ui/Component/Report/Listing/Column/PaymentType.php` 已更換 `GOOGLE_PAY_CARD`. 如此可解決Braintree報表的問題。

### 退貨授權(RMA)

<!-- ACP2E-1285-->

* RMA注釋欄位(**[!UICONTROL Orders]** > **[!UICONTROL Return]**)不再包含多餘的空白字元。 ( `<textarea>` 和 `<?php` 標籤現在位於一行。

<!-- ACP2E-1279-->

* 此 **[!UICONTROL Use Config Settings]** 複選框 **[!UICONTROL Enable RMA]** 欄位現在會在儲存產品時如預期儲存其值。

### 評論

<!-- ACP2E-1214-->

* 具有特定範圍限制存取權限的管理員使用者現在可以如預期刪除產品審核。

### 角色

<!-- ACP2E-1277-->

* 新增遺失的ACL **[!UICONTROL Stores]** > **[!UICONTROL Configuration]** > **[!UICONTROL Services]** > **[!UICONTROL OAuth]**. 之前，設定角色權限時，您無法定義對此OAuth組態設定的存取權。

### 搜尋 {#search-heading}

<!-- ACP2E-989-->

* 引號內的字串搜尋現在可如預期般運作 **[!UICONTROL Minimum Terms to Match]** 組態設定已啟用。 以前，Adobe Commerce會擲回此錯誤： `{"error":{"root_cause":[{"type":"parsing_exception","reason":"[match_phrase] query does not support [minimum_should_match]' ...`.

<!-- ACP2E-877-->

* 此 **註冊點** 在銷售訂單客戶網格上搜索客戶記錄篩選器現在可以在建立訂單期間正常工作。

<!-- ACP2E-783-->

* 已針對多字詞查詢改善搜尋建議的品質。

<!-- AC-6768-->

* 搜尋結果現在包含所有可用產品的無存貨選項輸出，當 **[!UICONTROL Display Out Of Stock Products]** 已啟用 [GitHub-36055](https://github.com/magento/magento2/issues/36055)

### 裝運

<!-- ACP2E-670-->

* 當「免運費購物車」規則設定為僅匹配購物車中的項目子集時，可正確計算FedEx、USPS和UPS的運費。

<!-- AC-937-->

* 當訂單合計小於符合免費發運資格的指定最小訂單金額時，「管理發運」頁將不再顯示免費發運選項。 [GitHub-33697](https://github.com/magento/magento2/issues/33697)

<!-- AC-838-->

* Adobe Commerce現在榮譽管理客戶 **[!UICONTROL Show Company]** 設定。 禁用此設定後，發運公司將不再包含在發運、客戶地址或資料庫訂單記錄中。 以前，儘管設定了禁用，仍顯示資訊。 [GitHub-33729](https://github.com/magento/magento2/issues/33729)

<!-- magento/magento2/pull/35631-->

* 在預估運送時移除對報價的多餘儲存操作。

<!-- magento/magento2/pull/35817-->

* `storeId` 範圍現在直接從 `$request->getStoreId()` 以確保管理員使用者建立報價時不會遺失範圍。 以前，使用協力廠商模組從管理員建立報價時，偶爾會發生運送方法問題。

<!-- ACP2E-1304-->

* 現在會為其產品產生SEO友好URL `url_key` 在商店視圖級別上覆蓋設定。 過去，類別產品URL不會重新導向至適合SEO的URL。

<!-- ACP2E-1196-->

* 當將折扣套用至運送成本時，Adobe Commerce不再擲回最低訂單金額錯誤。

<!-- ACP2E-1190-->

* 現在，當對發運應用折扣後應用稅時，將正確計算發運退款。

<!-- ACP2E-910 AC-3182-->

* 透過GraphQL針對請求的購物車提供的所有適用促銷活動 `cart` 查詢會一起傳回。 促銷活動包括行項目折扣、購物車規則/折扣、抵用券、禮品卡和商店信用。 [GitHub-35545](https://github.com/magento/magento2/issues/35545)

<!-- AC-2363-->

* 此 `setShippingMethodsOnCart` 變異現在會返回選定發運方法（包括稅）的值。 [GitHub-31206](https://github.com/magento/magento2/issues/31206)

<!-- AC-1096-->

* 現在，GraphQL回應中會如預期傳送不重複運送ID，且訂單的運送詳細資料會傳送至GraphQL查詢的多個位址。

### 測試

<!-- ACP2E-879-->

* 重新排程測試更新的結束日期不會在更新完成後導致錯誤。 以前，管理員無法開啟產品頁面和產品格線，而Adobe Commerce擲回了此錯誤： `report.CRITICAL: Exception: Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "1" already exists`.

<!-- ACP2E-776-->

* 測試控制面板現在會顯示正確的記錄總數，控制面板分頁現在可如預期運作。 先前。 控制面板最多顯示20筆記錄。

<!-- ACP2E-1213-->

* 現在，在有許多商店的部署中，內容預備預覽的載入速度更快。 預覽重新索引現在只會重新索引選取的存放區。

<!-- ACP2E-919-->

* 現在，產品可以在排程預覽模式中新增至購物車。 以下參數更新排程預覽模式中的階層連結，已修正此問題： `version`, `timestamp`，和 `signature`.

### 稅

<!-- AC-3201-->

* 此 **[!UICONTROL Display Zero Tax Subtotal]** 在提供多種運送方法的部署中，現在會如預期套用設定設定。 以前，即使停用此設定，在選取運送方法之前，零稅欄位仍會顯示在購物車頁面上。 [GitHub-35561](https://github.com/magento/magento2/issues/35561)

<!-- AC-3157-->

* Adobe Commerce現在可以在執行PHP 8.1的部署中，於店麵類別頁面上顯示含稅的分組產品。之前，Adobe Commerce未顯示產品清單並擲回此例外： `main.CRITICAL: Exception: Deprecated Functionality: ucfirst(): Passing null to parameter #1 ($string) of type string is deprecated in /var/www/m24/vendor/magento/module-tax/Pricing/Render/Adjustment.php on line 188 in /var/www/m24/vendor/magento/framework/App/ErrorHandler.php:61`. [GitHub-35500](https://github.com/magento/magento2/issues/35500)

<!-- ACP2E-1258-->

* 商家無法再將已排程的更新移至包含相同規則ID的其他更新。 以前，當更新移至包含相同規則ID的其他更新時，購物車價格規則的排程更新會建立重複的排程。

<!-- ACP2E-1295-->

* 當沒有與客戶地址關聯的增值稅ID時，自動客戶組分配現在可以工作。 如果地址不包含增值稅ID，則該地址將視為屬於非增值稅註冊客戶，而Adobe Commerce會將客戶組更改為非增值稅組。 以前，當 **[!UICONTROL Enable Automatic Assignment to Customer Group]** 啟用後，客戶帳戶不會自動指派給 `customerGroup` VAT ID從客戶帳戶中刪除時。

<!-- ACP2E-493-->

* 現在，在預備預覽模式中，會針對預備目錄規則顯示正確的動態區塊。 之前會顯示不相關的動態區塊。

<!-- ACP2E-1080-->

* 現在，在結帳期間核銷多發運時，發票和貸項通知單的「稅匯總」部分中會正確顯示多個稅。

<!-- ACP2E-1076-->

* 當包含稅以及固定產品稅額的訂單小計超過購物車頁面上的購物車規則條件時，將不再套用折扣。 過去，即使總計超過購物車規則條件，仍會套用折扣。

<!-- ACP2E-913-->

* `VAT_ID` 現在可在結帳來賓購物者時透過GraphQL請求新增。

### 測試

<!-- ACP2E-1171-->

* 修正不同版本的 `ICU` 和 `libxml` 程式庫。

<!-- ACP2E-1134-->

* 開發人員現在可以指示系統在特定儲存檢視中執行資料夾具。 新的選用參數 `scope` 接受 `string` 與儲存夾具別名對應。

<!-- ACP2E-1133-->

* 新增使用可選項目產生資料夾多個例項的功能 `count` 參數。

<!-- AC-6860-->

* 移除非原生 `array_first` 函式。

### 翻譯和地區設定

<!-- ACP2E-912-->

* 內嵌轉譯現在可搭配特殊字元正常運作，SCRIPT標籤中的片語包含延伸的unicode字元。 以前，使用內嵌翻譯時，編輯的指令碼中的日文字元呈現不正確。

<!-- ACP2E-844-->

* 此 `ñ` 產品名稱中的字元現在會轉換為 `n` 在產生URL金鑰期間。

<!-- AC-3499-->

* 運行的輸出 `bin/magento i18n:collect-phrases` 現在包含郵件範本翻譯 `depend` 構造。 [GitHub-35449](https://github.com/magento/magento2/issues/35449)

<!-- ACP2E-1135-->

* 現在，可以直接在產品頁面屬性集（下拉式方塊）中輸入日文字元。 以前，在此下拉式方塊中直接輸入日文字元，會在MacOS上執行Firefox瀏覽器時導致字元變更或刪除。 此 `textInput` HTML屬性（可更妥善處理所有瀏覽器中的日文字元轉換）已取代 `Value` 和 `valueUpdate` 屬性。

<!-- ACP2E-1238-->

* 此 `getOptions` 現在正確擷取 `price` 屬性標籤值（根據商店視圖）。 之前， `price` 屬性在GraphQL作業期間因不正確的存放區檢視而翻譯。

### UI

<!-- ACP2E-1018-->

* 現在，「管理產品」格線中的「特殊價格」、「成本」及MSRP欄位，會如預期般使用網站專用貨幣。 以前，當依據商店檢視篩選特定價格時，管理目錄產品格線中不會顯示正確的貨幣符號。

<!-- ACP2E-980-->

* 產品自訂選項的拖放功能現在可如預期般運作。 現在，當可自訂選項格線中有多個頁面可用時，您可以將可自訂選項從一個頁面移至另一個頁面。

<!-- ACP2E-866-->

* 管理員控制面板圖表現在會如預期般顯示從目前日曆年度的開始到目前日期的YTD時間間隔。 過去，包含超過12個月的日期範圍。

<!-- AC-3088-->

* 新增了店面首頁上缺少的預設Favicon。 [GitHub-35493](https://github.com/magento/magento2/issues/35493)

<!-- ACP2E-1025-->

* 管理員現在可以成功顯示每位管理員使用者的最新登入日期。 以前，當管理員使用者首次登入管理員時，管理員使用者格線上會顯示空白的登入日期值。


<!-- AC-3762-->

* 預覽電子郵件範本功能(**[!UICONTROL Marketing]** > **[!UICONTROL Communications]** > **[!UICONTROL Email Templates]**)現在可正確顯示範本。 之前預覽影像會遭截斷。 [GitHub-35697](https://github.com/magento/magento2/issues/35697)

<!-- magento/magento2/pull/35656-->

* 新增 `new-shipping-address-modal` 類別，以支援新發貨地址強制回應的樣式。

<!-- magento/magento2/pull/35738-->

* 在 `Search Weight` 屬性 `Storefront Properties` 管理員上的輸入欄位 **[!UICONTROL Stores]**  > [!UICONTROL Attributes] > **[!UICONTROL Product]**.

<!-- ACP2E-1323-->

* 現在，電子郵件預覽會在個別索引標籤中開啟，而非快顯視窗，讓您更了解電子郵件內容。 過去，電子郵件內容會遭截斷。

<!-- ACP2E-1299-->

* 用戶角色網格的篩選函式(管理員 **[!UICONTROL System]** > **[!UICONTROL Permissions]** > **[!UICONTROL User roles]** > **[!UICONTROL Administrators]**)現在可如預期般運作。 陣列值現在會個別處理。 以前，當您嘗試在此格線中輸入查詢時，Adobe Commerce擲回此主控台錯誤，且頁面未載入： `Uncaught TypeError: Cannot read properties of null`. [GitHub-35993](https://github.com/magento/magento2/issues/35993)

<!-- ACP2E-328-->

* 透過REST API建立客戶時，已新增屬性值的驗證。 提供無效屬性值時，建立程式現在會失敗。 以前，沒有對性別進行驗證，這不是必填欄位。 建立客戶期間，針對性別傳入的值會儲存在 `customer_entity` 表格。

<!-- ACP2E-1105-->

* 結帳期間新增的位址現在會保留其預期格式。 以前會忽略空白行。

<!-- ACP2E-897-->

* 更改產品網格的列網格視圖和為自定義視圖選擇新列不再觸發選擇所有網格列操作。 以前，列框會消失，並且網格中的產品被選中或取消選擇。 [GitHub-36302](https://github.com/magento/magento2/issues/36302)

<!-- ACP2E-1245 1405-->

* 管理員使用者現在可以成功清除管理員已完成的工作記錄。 以前，管理員會顯示此錯誤： `Something went wrong`. [GitHub-36255](https://github.com/magento/magento2/issues/36255)

<!-- AC-7525-->

* 主題標題設定 `Welcome Text` 現在可包含單引號字元。 之前，Adobe Commerce會擲出此JavaScript錯誤： `Uncaught SyntaxError: Unable to process binding "ifnot: function(){return customer().fullname }"`.

### URL重新寫入

<!-- ACP2E-808-->

* 將產品可見度變更為 **[!UICONTROL Not Visible Individually]** 現在，在全域「所有商店檢視」範圍中，只會移除未覆寫可見性屬性之商店檢視的URL重新寫入。 以此方式變更產品可見性也會為所有商店檢視產生URL重寫，包括已覆寫URL索引鍵屬性（但非可見性設定）的商店檢視。 以前，可見性設定變更時不會套用URL重新寫入規則。

### Visual Stulder

<!-- ACP2E-1084-->

* 當產品與規則匹配時，您無法再手動更改可視化採購員類別清單中的產品位置。

<!-- ACP2E-985-->

* 僅限一個商店的存取權限管理員使用者無法再將產品拖放至Visual Stlider的類別中。 相反地，他們現在可以使用 **[!UICONTROL Position]** 欄來重新排列產品位置。 過去，這些使用者只能透過拖放來變更類別中的產品位置。

<!-- ACP2E-953-->

* 類別編輯頁面的「類別中的產品」區段現在會顯示正確的可設定產品數量。 現在，正確的表列用於檢索可配置的產品數量。

### Web API架構

<!-- ACP2E-1207-->

* REST API `DELETE /rest/V1/products/:sku/media/:entryId` 如果影像未從產品中移除，因為已指派給其他商店檢視中的角色，現在會傳回錯誤訊息。 過去，即使未成功移除影像，API仍傳回成功回應。

<!-- ACP2E-1155-->

* 商家現在可以使用REST API為零總量的訂單建立貸項通知單。 以前，Adobe Commerce顯示此錯誤： `The order does not allow a credit memo to be created. The credit memo's total must be positive. We can't create a credit memo for the invoice/order`.

<!-- ACP2E-1136-->

* 使用REST API變更產品的網站指派後，管理員產品編輯頁面現在會正確地反映產品的指派。 [GitHub-36281](https://github.com/magento/magento2/issues/36281)

<!-- ACP2E-863-->

* 在大量REST API請求更新產品期間，多選屬性無法再包含重複的選項ID。 之前，您可以在傳送大量API請求以更新產品時，為多選屬性設定重複的選項ID。 將多選屬性配置為包含在分層導航中時，EAV索引失敗， `Duplicate entry` 錯誤。

<!-- ACP2E-778-->

* 購物車中的產品名稱現在會如預期般使用指定的商店檢視值。 之前，購物車中的產品名稱一律會在REST API購物車回應中傳回預設的商店檢視值。

<!-- AC-5986-->

* 現在可以使用REST API更新購物車項目自訂選項值。 [GitHub-35768](https://github.com/magento/magento2/issues/35768)

<!-- AC-1330-->

* 超過20個的大量API請求 `sourceItems` 現在，在啟用「詳細目錄」的部署中成功完成。

<!-- ACP2E-1044-->

* Fucher貨幣服務現在可如預期般運作，透過ApiLayer產生的金鑰，且貨幣匯率可正確匯出。 以前，Adobe Commerce會在商家嘗試透過管理員匯入匯率時擲回錯誤。

<!-- ACP2E-726-->

* 您現在可以使用REST API `/rest/V1/bulk?searchCriteria[filter_groups]` 請求依搜尋條件查詢大量作業。 之前傳回了下列錯誤： `report.CRITICAL: Report ID: webapi-624bbb1db96c4; Message: Item (Magento\AsynchronousOperations\Model\Operation) with the same ID "0" already exists.`

<!-- magento/magento2/pull/36147-->

* 現在，在管理員和店面目錄搜尋頁面上，使用管理基本價格API可正確更新產品價格。 [GitHub-33767](https://github.com/magento/magento2/issues/33767)


### 願望清單

<!-- ACP2E-1013-->

* 購物者現在可以在登入後，將產品新增至其願望清單。 以前，由於登入後表單金鑰驗證發生問題，隨附加至願望清單請求提交的表單金鑰失效。

<!-- ACP2E-341-->

* 客戶透過確認電子郵件確認其帳戶後，產品現在會如預期般新增至產品清單中的願望清單，以及檢視頁面。 之前，帳戶確認後產品不會新增至願望清單。

<!-- ACP2E-1175-->

* 此 `addProductsToWishlist` 當購物者嘗試將項目新增至具有無效產品值的願望清單時，查詢現在會傳回資訊錯誤訊息 `select` 自訂選項。 以前，缺少下拉式自訂選項值的伺服器驗證，這會導致資料庫中的無效值。 因此，端點傳回了此內部伺服器錯誤： `GraphQL endpoint returns Internal server error with "Call`.


### 已知問題

**問題**:New Relic目前與PHP 8.2不相容。執行New Relic的部署可在PHP 8.1上執行Adobe Commerce 2.4.6，但不能在PHP 8.2上執行。 **因應措施**:在PHP 8.1上運行Adobe Commerce 2.4.6 ，直到支援PHP 8.2的新版New Relic發佈。此版本預計於2023年夏季發行。 <!-- AC-7769-->

### 合作夥伴貢獻

下表重點介紹合作夥伴的貢獻。 下表列出提取請求的貢獻者合作夥伴、外部提取請求編號，以及與其相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-6-partner.md}}

### 個人貢獻者貢獻內容

下表列出社群成員的貢獻。 此表格列出提供提取請求的社群成員、外部提取請求編號，以及與其相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-6-issues.md}}

## 系統需求

我們的技術堆棧構建在PHP和MySQL上。 如需詳細資訊，請參閱 [系統需求](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/system-requirements.html).

## 安裝和升級指示

您可以使用 [撰寫器](https://experienceleague.adobe.com/docs/commerce-operations/installation-guide/composer.html).
