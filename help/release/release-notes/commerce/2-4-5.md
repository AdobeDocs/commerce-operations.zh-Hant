---
title: Adobe Commerce 2.4.5發行說明
description: 瞭解2.4.5 Adobe Commerce版本的新功能、增強功能、錯誤修正和已知問題。
exl-id: fafcd266-fb69-450f-8c4f-047109ba8b50
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '9544'
ht-degree: 0%

---

# Adobe Commerce 2.4.5發行說明

Adobe Commerce引進平台品質、支付方式、GraphQL快取效能和協助工具的改善專案。 其中包括整合Google模組和升級相容性工具的更新，並引入即時搜尋B2B支援。

此版本包含400多項品質修正和增強功能。

{{bics}}

## 其他發行資訊

雖然這些功能的程式碼會隨附每季發行的Adobe Commerce核心程式碼，但其中幾個專案(例如B2B、頁面產生器和Progressive Web Application(PWA) Studio)也會獨立發行。 這些專案的錯誤修正記錄在每個專案專用的單獨發行資訊中，可在每個專案的檔案中找到。

### 此版本中包含的Hotfix

Adobe Commerce 2.4.5包含針對Adobe Commerce所提供下列Hotfix解決的所有問題解決方案：

* `Braintree_disabled_partial_capture_for_applepay_googlepay.zip`. 此修補程式解決使用者在使用Apple Pay或Google Pay through Braintree作為付款方式時，無法建立部分商業發票的問題。 請參閱 [Adobe Commerce 2.4.4：無法建立部分發票](https://support.magento.com/hc/en-us/articles/4487952754957-Adobe-Commerce-2-4-4-Unable-to-create-partial-invoices) 知識庫文章。

* `AC-2655_2.4.4.patch.zip`. 此修補程式解決未選取「允許國家/地區」選項時，購物者無法新增產品至購物車的問題。 請參閱 [如果未在允許國家/地區中選取任何專案，使用者無法將產品新增到購物車](https://support.magento.com/hc/en-us/articles/5377681213325-Users-not-able-to-add-product-to-cart-if-nothing-selected-in-Allow-Countries) 知識庫文章。

## Adobe Commerce 2.4.5重要功能

請檢視此版本中的下列重點內容。

### 安全性增強功能

此版本包含20項安全性修正和平台安全性改善。 此安全性修正已反向移植至Adobe Commerce 2.4.3-p3和Adobe Commerce 2.3.7-p4。

目前尚未發生與這些問題相關的已確認攻擊。 不過，某些漏洞可能會被利用來存取客戶資訊或接管管理員工作階段。 這些問題大多需要攻擊者先取得管理員的存取權。 因此，我們提醒您採取一切必要步驟來保護您的管理員，包括但不限於以下工作：

* IP允許清單
* [雙因素驗證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* 使用VPN
* 使用唯一位置，而非 `/admin`
* 良好的密碼衛生

另請參閱 [Adobe安全性公告](https://helpx.adobe.com/security/products/magento/apsb22-38.html) 以取得這些已修正問題的最新討論。

#### 其他安全性增強功能

此版本的安全性改善專案透過最新的安全性最佳實務，改善了合規性，包括：

* 「願望清單共用」、「建立新客戶帳戶」和「禮品卡」表單已新增reCAPTCHA支援。 <!-- AC-1144-->

* ACL資源已新增至詳細目錄。 <!-- AC-1622-->

* 已增強詳細目錄範本安全性。

* 此 `MaliciousCode` 篩選器已升級為使用 `HtmlPurifier` 資料庫。 <!-- AC-1498-->

### 平台增強功能

* **Adobe Commerce內部部署**：Adobe Commerce 2.4.5已經過測試並確認與Elasticsearch7.17相容（~7.17.0具有限制）。 內部部署Adobe Commerce的商家可使用Elasticsearch或OpenSearch 1.2。 <!-- AC-2425-->

* **Adobe Commerce雲端託管的部署**：Adobe Commerce 2.4.5雲端託管部署不支援Elasticsearch7.11或更新版本。 OpenSearch是Adobe Commerce 2.4.5雲端部署的預設搜尋引擎。

Adobe Commerce 2.4.5現在支援

* Composer 2.2  <!-- AC-2033-->

* TinyMCE (5.10.2)。 更新巧盡心思構建的URL或包含巧盡心思構建的URL的影像時，舊版TinyMCE （v5.9.2或更早版本）允許任意JavaScript執行。 <!-- AC-2039 1784 1789-->

* jQueryUI (1.13.1) <!-- AC-2544-->

* `PHPStan` （^1.5.7帶限制） [GitHub-35315](https://github.com/magento/magento2/issues/35315)<!-- AC-2876-->

DHL整合結構描述已從v6.0更新至v6.2。此升級不會導致產品行為變更。  <!-- AC-3022-->

過時的JavaScript程式庫已更新至最新版本，且過時的相依性已移除。 這些變更可回溯相容。 <!-- AC-2036-->

#### Composer依存性更新

<!-- AC-2876 2744 2912 2577-->

下列撰寫器相依性已更新至具有限制的最新版本：

* `colinmollenhour/credis`  (1.13.0)? <!-- AC-2732-->
* `guzzlehttp/guzzle` (^7.4.2)
* `laminas/laminas-captcha` （以限制^2.12更新） <!-- AC-2625-->
* `laminas/laminas-db`   (^2.15.0)
* `laminas/laminas-di` (^3.7.0)
* `laminas/laminas-escaper` (~2.10.0)
* `laminas/laminas-eventmanager`  (^3.5.0)
* `laminas/laminas-feed`   (^2.17.0)
* `laminas/laminas-mail` (^2.16.0)
* `laminas/laminas-mvc`  (^3.3.3)
* `laminas/laminas-server` (^2.11.1)
* `laminas/laminas-servicemanager`  (^3.11.0)
* `laminas/laminas-validator` (^2.17.0)
* `league/fly`  (2.4.3) <!-- AC-2744-->
* `monolog/monolog`  (^2.5)
* `phpmd/phpmd`   (^2.12.0)
* `phpstan/phpstan`  (^1.5.7)
* `phpunit/phpunit`  (~9.5.20)
* `php-cs-fixer` (^3.4.0) <!-- AC-2259-->
* `webonyx/graphql-php`  (14.11.6)

此 `laminas/laminas-session`， `laminas/laminas-text`、和 `laminas/laminas-view` 相依性已移除。 <!-- AC-2598-->

#### 其他升級和取代

* DHL整合結構描述已從v6.0更新至v6.2。 <!-- AC-3022-->

* USPS送貨的預設閘道URL已更新為使用 `https` 而非 `http`. <!-- AC-2426-->

* 此 `Froogaloop` 資料庫已更換為Vimeo `Player.js` 資料庫(2.16.4)。 <!-- AC-2527 2262-->

* 此 `grunt-eslint` (NPM)程式庫已升級至最新版本。 <!-- AC-2700-->

* 此 `jQuery Storage` 資料庫已取代為 `julien-maurel/js-storage`. <!-- AC-2627-->

* 此 `php-cs-fixer` 和 `phpcs` 靜態程式碼分析工具現在與PHP 8.x相容。 <!-- AC-2259-->

* `glob.js` 相依性（以限制升級至~7.2.0） <!-- AC-2547-->

* `serve-static.js` 相依性（已升級，但限製為~1.14.2） <!-- AC-2548-->

* `underscore.js` 相依性(NPM) (1.14.2) <!-- AC-2546 2549-->

* `moment-timezone-with-data.js` (0.5.34) <!-- AC-2545-->

* 資料庫 `jquery/jquery-cookie` 已取代為 `js-cookie/js-cookie`. <!-- AC-2626-->

* 此 `jarallax.js` 和 `jaralax-video.js` 程式庫已更新為使用最新版Vimeo REST API。 <!-- AC-2590-->

### 效能與擴充性增強功能

#### 價格索引器最佳化

主要索引效能已改善，將的主要索引數目從3個減少為1個 `catalog_product_index_price_tmp` 表格。 此增強功能可減少共用目錄所產生的eSKU乘數，藉此減少價格指數中建立的記錄數。 索引時間已大幅縮短。 <!-- MCP-653 MC-43342-->

### 協助工具更新

此版本的重點在於在Venia (PWA)上建立更易感知、可操作、可理解和強大的店面體驗。 這些增強功能包括：

* 熒幕助讀程式的使用者現在可得知搜尋結果摘要資訊
* 現在會在新頁面檢視載入時通知熒幕閱讀程式
* 對比和鍵盤協助工具已有所改善

### Adobe Sign

商戶現在可以在Adobe Commerce結帳期間，允許客戶以電子方式簽署自訂合約，例如保固檔案、購買合約及條款與條件。

### Adobe Commerce與Adobe IMS整合

擁有Adobe ID且想要簡化登入Adobe Commerce和Adobe商業產品的Adobe Commerce商家，可將Commerce驗證與Adobe IMS驗證工作流程整合。 為您的Commerce商店啟用此整合後，每個管理員使用者都必須使用其Adobe憑證（而不是其Commerce憑證）才能登入。  另請參閱 [AdobeIdentity Management服務(IMS)整合概述](https://experienceleague.adobe.com/docs/commerce-admin/start/admin/ims/adobe-ims-integration-overview.html).

### 品牌和樣式變更

已更新管理員，以符合Adobe的品牌策略。 變更會影響頁首、頁尾、資料格線顏色更新和導覽元素。

### B2B

我們已最佳化實作共用目錄功能所需的標準化資料庫資料。 減少eSKU乘法運算量可提升效能，因為必須儲存的資料庫列更少。 之前，Adobe Commerce會為每個共用目錄複製目錄中的每個SKU。 Adobe Commerce現在會為直接指派至共用目錄的使用者建立唯一的eSKU。

啟用新的 **啟用共用目錄直接產品價格指派** 設定選項也能改善產品價格指數器效能。 <!-- MCP-946-->

此版本包含多項錯誤修正。 另請參閱 [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### Google Analytics

Google已透過與GTag的整合更新網頁應用程式中AdWords和Analytics的追蹤和整合機制。 Google功能整合至網站頁面，增加了透過Google服務追蹤及管理內容的機會。 Adobe Commerce有一組內建模組，包括Google AdWords、Analytics、Optimizer和TagManager，可運用前API與Google服務整合。  在此版本中，我們已使用GTag方法重新實施作業這項整合&#x200B;。 另請參閱 [從analytics.js移轉至gtag.js (Universal Analytics)](https://developers.google.com/analytics/devguides/migration/ua/analyticsjs-to-gtagjs).

### GraphQL

GraphQL效能增強功能包括：

* 開發人員和管理員在部署或變更生產環境中的屬性時，可更快重建統一的店面GraphQL架構。 如果因為任何原因必須重建GraphQL結構描述，購物者體驗到的頁面載入速度也會大幅加快。

* 新增透過在GraphQL API中使用JSON Web權杖(JWT)來使用授權權杖到期日/時間的功能。

* 此 `bin/magento config:set graphql/session/disable 1` command可讓商家針對所有GraphQL作業完全停用工作階段Cookie的建立。 依預設，Adobe Commerce會建立這些Cookie並仰賴它們來取得授權，而這會影響效能。 日後，我們建議使用Token作為GraphQL要求的唯一授權形式。 我們不建議單獨使用工作階段Cookie或將其與授權Token搭配使用。 另請參閱 [GraphQL Authorization](https://devdocs.magento.com/guides/v2.4/graphql/authorization-tokens.html). <!-- B2B-2204 -->

* 現在，工作階段Cookie只會在需要時使用類別代理程式在GraphQL作業中啟動。 <!-- B2B-2217 -->

* 工作階段使用量已從 `http` GraphQL中的頁首處理器，例如商店、客戶或貨幣。 <!-- B2B-2224 -->

請參閱 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 這些增強功能的詳細資訊。

### 詳細目錄

已增強詳細目錄範本安全性。

### 即時搜尋

此版本推出B2B客戶群組和自訂定價的支援。 「即時搜尋」現在會遵循客戶群組的產品指派，以及為特定客戶群組/共用目錄設定的定價。

### 頁面產生器

Page Builder v.1.7.2與Adobe Commerce 2.4.5相容。

頁面產生器欄版面配置包含下列增強功能： <!-- PB-547-->

* 欄現在已公開，允許使用者控制店面的欄設定。

* 欄大小調整現在支援由使用者動作觸發的換行。

### 付款

Apple Pay現在可供所有執行部署並啟用Payment Services的商家使用。 此付款方式不會要求購物者輸入信用卡或扣帳卡詳細資料。 Apple Pay可在產品詳細資料頁面、迷你購物車、購物車和結帳工作流程中取得。 商家可以開啟此功能。

#### PayPal

* 西班牙和義大利的商戶現在可以提供PayPal Pay Later給購物者。  <!-- AC-2521-->

* Admin現在可以在結帳、迷你購物車、購物車和產品頁面中預覽PayPal、點數和「稍後付款」按鈕。 預覽會顯示這些按鈕在店面啟用和呈現時的外觀。

#### Braintree

* Braintree已終止KOUNT詐騙保護整合。 已從Adobe Commerce程式碼基底中移除。

* 此 **一律要求3DS** 選項已新增至「管理員」。

### PWA Studio

PWA Studio v.12.5.x與Adobe Commerce 2.4.5相容。

此版本的新功能包括：

* 購物者行為資料會收集到PWA Studio店面，以供網站分析服務使用。  商戶現在可視需要訂閱及擴充這些活動。

* 商家現在可以從管理員(Google Tag Manager)選取要部署的服務。

如需有關增強功能和錯誤修正的資訊，請參閱 [PWA Studio版本](https://github.com/magento/pwa-studio/releases). 另請參閱 [版本相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 以取得PWA Studio版本及其相容Adobe Commerce核心版本的清單。

### 升級相容性工具

增強功能包括：

* 方法簽章驗證現在會識別方法或建構函式簽章內不相容的變更。 <!-- AC-2632-->

* 資料庫結構描述驗證現在會識別結構描述變更和不相容性。 <!-- AC-58-->

* DI設定驗證現在會驗證對中已移除或已棄用非API核心類別的參考 `di.xml` 核心類別和介面的和偏好設定。  <!-- AC-438-->

* UCT現在會識別程式碼淘汰，並提供解決每個問題的特定建議。  <!-- AC-3147-->

## 已修正的問題

我們已修正Adobe Commerce 2.4.5核心程式碼中的數百個問題。

### 安裝、升級、部署

<!-- ACP2E-49-->

* 您現在可以重新命名資料修補程式，並將舊類別名稱新增為別名 `patch_list` 資料庫表格。 Adobe Commerce現在會在套用修正程式之前，檢查資料庫中是否已有資料修正程式別名。 之前，Adobe Commerce在這些情況下會擲回錯誤。

<!-- AC-3036-->

* 當您嘗試從管理員將管理員URL變更為自訂URL時，Adobe Commerce不再擲回例外狀況。 之前，在變更管理員URL後，您無法登入。 [GitHub-35416](https://github.com/magento/magento2/issues/35416)

<!-- AC-1480-->

* 商家現在可以成功從具有Klarna的Adobe Commerce 2.4.2部署升級至Adobe Commerce 2.4.3。 [GitHub-33760](https://github.com/magento/magento2/issues/33760)

<!-- AC-2905-->

* Adobe Commerce Analytics的路徑不再以硬式編碼顯示。 以前，當一台伺服器上安裝多個Adobe Commerce執行個體時，此硬式編碼路徑會導致衝突。 [GitHub-29373](https://github.com/magento/magento2/issues/29373)

### 協助工具

<!-- AC-2786-->

* 此 **購物袋** 按鈕現在會提供其狀態的程式化或文字指示。 熒幕助讀程式使用者會收到通知，得知按一下此按鈕即可展開其他內容，或是相關內容已展開或收合。 以前，此按鈕不提供其狀態的程式化或文字指示。

<!-- AC-2496-->

* 付款資訊信用卡選項文字元素或文字影像現在符合WCAG 2.0的要求，標準文字的最低色彩對比率為4.5:1 (24px)或14pt (19px) （若是粗體字）。 之前，這些量度不符合預期的對比率。

<!-- AC-2483-->

* **通訊錄**  >  **通訊**  > **帳戶資訊** 自訂焦點指示器現在會提供至少相對於背景顏色3:1的對比率。

<!-- AC-2486-->

* **篩選** 和 **排序** 按鈕文字現在符合WCAG 2.0的要求，標準文字的最低色彩對比率為4.5:1 (24px)或14pt (19px) （若是粗體）。 以前，輪播的導覽按鈕不符合這些最低對比度要求。

<!-- AC-2499-->

* 熒幕助讀程式在導覽至Venia頁首和頁尾時，只會朗讀「Venia」一詞一次。 之前，同一個字詞會連續宣佈兩次。

<!-- AC-2585-->

* 觸發下拉式清單的按鈕現在會向熒幕朗讀程式提供資訊，指出其展開或收合狀態以及可存取的名稱。

<!-- AC-2482-->

* 轉譯新頁面檢視時，會通知熒幕助讀程式使用者。 先前，當頁面標題變更時，不會宣佈標題變更。

### Adobe Stock

<!-- AC-2926-->

* 使用者現在可以成功登出Adobe Stock。

### 套裝產品

<!-- ACP2E-465-->

* 您現在可以使用 `PUT /V1/products` 端點來更新特定網站的產品價格屬性。 先前，如果針對特定商店檢視覆寫了某些產品屬性，您就無法在同一商店檢視中更新該產品的價格屬性。

<!-- ACP2E-780-->

* 套用產品子選取規則時，Adobe Commerce現在可以正確計算套件組合產品的購物車總計。

### 快取

<!-- ACP2E-684-->

* 清除Adobe Commerce快取後，Admin中不再顯示全頁快取為停用，並且 `use_stale_cache` 已啟用。

<!-- AC-2410-->

* 快取清除後，New Relic部署標籤現在可如預期運作。 [GitHub-32649](https://github.com/magento/magento2/issues/32649)

### 購物車與結帳

<!-- ACP2E-455-->

* 結帳工作流程帳單步驟上的地址搜尋快顯視窗不再造成DOM錯誤。

<!-- ACP2E-368-->

* 此 `addProductsToCart` 變異現在可正確用於多個產品。 以前，此查詢傳回第一個具有精確小計的產品，但傳回其他產品的小計0。

<!-- ACP2E-245-->

* 現在會處理由SKU新增之受限制產品的許可權例外狀況。 購物者現在會在店面看到適當的訊息，而且錯誤表格中的「數量」欄位已停用。 之前，Adobe Commerce擲回類似以下的例外狀況： `There has been an error processing your request`.

<!-- ACP2E-148-->

* 在停用購物車價格規則後更新受影響報價的SQL查詢已最佳化，以避免鎖定整個報價表。

<!-- ACP2E-98-->

* 當訪客結帳停用時，具有全域帳戶共用的購物者不再需要登入多站台部署中的次要網站。 現在，當購物者導覽至子網域時，系統會載入客戶資料。 購物者不再被要求重新登入，並且會顯示先前的購物車內容。

<!-- ACP2E-94-->

* 在多重地址結帳中移除單一數量的地址專案時，結帳工作流程中的地址下拉式清單值不再變更報價中的剩餘專案。 先前，當產品在多位址結帳期間從報價單中移除時，所有產品的地址下拉式清單值都會變更為預設值。

<!-- ACP2E-42-->

* 此 `cart` 產品無庫存時，查詢不再傳回null回應。 新 `errors` 已將包含錯誤訊息的元素引入回應。 先前，當您使用無庫存產品執行查詢時，Adobe Commerce會顯示 `null` 下的值 `items` 區段中的回應。 另請參閱 [購物車查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/cart.html).

<!-- ACP2E-38-->

* 當訪客購物者在繼續結帳前將產品新增至購物車後建立帳戶時，現在可如預期使用送貨方法。 以前，當訪客在建立帳戶之前將產品加入購物車時，結帳期間沒有送貨方法。 將其他產品新增到購物車後，即可使用送貨方法。

<!-- AC-2564-->

* 購物者現在可以在沒有選項的情況下，將產品新增至購物車。 **允許國家/地區** 欄位已選取。

<!-- AC-2622-->

* 在工作階段逾時，購物車內容和登入狀態現在會如預期重新載入 **啟用持續性** 設為 **是**. [GitHub-35182](https://github.com/magento/magento2/issues/35182)

<!-- AC-428-->

* 當購物者針對具有多個送貨地址的訂單從送貨頁面導覽至結帳工作流程中的購物車頁面時，迷你購物車小計現在會正確更新。 之前，小計是翻倍。

<!-- AC-2619-->

* 迷你購物車現在會在工作階段逾時 **啟用持續性** 已啟用。 [GitHub-35183](https://github.com/magento/magento2/issues/35183)

<!-- ACP2E-707-->

* 商戶現在可以建立銷退折讓單，其中  **退款運送(包括 Tax)** 設為–0.01，且現在可將此數量設為0。 以前，無法在這些條件下建立銷退折讓單。

### 購物車價格規則

<!-- ACP2E-680-->

* 此 `Parent Only` 屬性範圍現在已在購物車規則條件中正確使用。

### 目錄

<!-- ACP2E-758-->

* 透過更新產品名稱時，產品URL金鑰現在保持不變 `PUT /V1/products/` 以取得商店檢視。 之前，系統會根據新產品名稱產生新的URL金鑰並指派給產品，這會覆寫該商店檢視中的URL金鑰。

<!-- ACP2E-712-->

* 規則型向上銷售產品不會再在產品頁面上顯示兩次。

<!-- ACP2E-703-->

* 將產品從「頁面產生器」產品Widget設定為輪播模式新增至類別時，不再觸發頁面重新載入。

<!-- ACP2E-685-->

* 產品設定為 **無法個別顯示** 不再出現在目錄進階搜尋結果中。

<!-- ACP2E-679-->

* 現在可在「大量屬性更新」頁面上正確更新動態套件組合屬性。 先前， **動態SKU** 屬性仍設為 **是** 即使「大量更新」頁面已停用這些功能。

<!-- ACP2E-673-->

* 目錄規則現在可使用增量索引器正確套用，而非完整重新索引。

<!-- ACP2E-657-->

* 您現在可以成功在多頁產品清單的清單和格線檢視之間切換。 先前，當您在切換至網格檢視之前導覽至多頁產品清單檢視的最後一頁時，Adobe Commerce會顯示此錯誤： `Unfortunately there are no products in this category on our website currently`.

<!-- ACP2E-635-->

* 管理員動作記錄報告現在會依預期顯示更新的產品ID和更新的狀態資訊。

<!-- ACP2E-633-->

* 觸發器現在會如預期般還原為 `catalogrule_product_price` 表格進行完整重新索引之後。 之前，觸發程式是從 `catalogrule_product_price` 表格晚於 `catalogrule_rule` 或 `catalogrule_product` 完整重新索引。

<!-- ACP2E-629-->

* 用於將產品指派至類別的類別規則不再隨機變更。

<!-- ACP2E-522-->

* 當類別規則將產品指派給隨後在多網站部署中排序的類別時，Adobe Commerce不再擲回錯誤。

<!-- ACP2E-516-->

* 具有範圍限制存取許可權的管理員無法再全域更新類別。 先前，當多個網站使用相同類別但不同產品，以及許可權僅限於一個商店的管理員變更類別中的產品時，其他商店的產品選擇也會變更。

<!-- ACP2E-508-->

* 當使用指定地區設定的非預設貨幣時，產品詳細資訊頁面現在會顯示正確的價格。 之前，店面上的數字未如預期般本地化。

<!-- ACP2E-468-->

* 現在可以使用排程更新來啟用產品。

<!-- ACP2E-392-->

* 嘗試擷取具有重複記錄之產品的層級價格時，API和店面現在會顯示相同的錯誤訊息。 先前， `PUT /V1/products/tier-prices` 傳回不正確的錯誤訊息。

<!-- ACP2E-345-->

* Adobe Commerce現在會在您嘗試新增含有尾端連字型大小的產品URL金鑰時提供驗證錯誤訊息。 也提供資訊性工具提示文字。

<!-- ACP2E-267-->

* 新 `ConfigurableWishlistItem.configured_variant` 欄位已取代 `ConfigurableWishlistItem.child_sku` 欄位。 當客戶願望清單包含未設定的可設定產品時，後一個欄位會觸發內部錯誤。

<!-- ACP2E-84-->

* 現在，在整批屬性更新以變更產品可見度期間，只會為選取的存放區產生URL重寫。 之前，大量屬性更新會為錯誤的存放區建立URL重寫。

<!-- ACP2E-39-->

* 當 `Synchronize widget products with backend storage` 設定已啟用，Adobe Commerce會將最近檢視的產品資料新增至 `catalog_product_frontend_action` 資料庫表格。 新增記錄時包含客戶或訪客ID。 此 `recently_viewed_product` 如果客戶ID和訪客ID為Null，回應中的區段現在會空白。 因此，當 `customer/section/load` Ajax要求已傳送，Adobe Commerce可以根據客戶或訪客ID正確篩選最近檢視的產品。 以前，回應會包含 `catalog_product_frontend_action` 資料庫表格，因為沒有檢查空白的客戶或訪客ID。

<!-- ACP2E-28-->

* 具有的類別規則 `Quantity` 現在，實施測試時，可配置產品的屬性可正確運作。 先前，當產品的值不同 `row_id` 和 `entity_id` 在 `catalog_product_entity` 資料表因中繼更新而變更，視覺化銷售工具 **依規則比對產品** 功能未正確篩選產品。

<!-- ACP2E-13-->

* 管理員現在可以從「管理員」幻燈片面板變更購物車中可設定的產品選項。 以前，幻燈片面板無法正常運作。

<!-- AC-1705-->

* 現在儲存對子產品的變更時，可設定產品父項的頁面快取會如預期般清除。 先前，由於未清除快取，因此不會在storefront設定產品頁面上選取變更。 [GitHub-34508](https://github.com/magento/magento2/issues/34508)

<!-- AC-711-->

* 產品清單現在可在Admin中正確呈現。 之前，產品清單不會呈現，而Adobe Commerce會顯示此錯誤：  `Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "<ID>" already exists`. [GitHub-33145](https://github.com/magento/magento2/issues/33145)

<!-- AC-1214-->

* 產品價格現在在目錄價格範圍從變更後，產品詳細資料頁面和多商店部署中的店面搜尋是相同的 **網站** 至 **全域**. 「目錄搜尋結果」頁面先前會顯示 **全域** 價格，產品詳細資訊頁面隨即顯示 **網站** 價格。 [GitHub-34074](https://github.com/magento/magento2/issues/34074)

<!-- ACP2E-316-->

* 階層式導覽現在會依預期顯示價格最高的產品， **價格瀏覽步驟計算** 設為 **手動**.

<!-- ACP2E-711-->

* 您現在可以在以下情況下變更類別中顯示的每頁產品限制： **記住類別分頁**  已啟用。 先前的Cookie `form_key` 和UI `form_key` 不同，Adobe Commerce會顯示此錯誤：  `Invalid Form Key. Please refresh the page`.

<!-- ACP2E-807-->

* EAV索引子現在會以型別處理產品ID `int` 以防止可能的效能問題。

<!-- AC-2597-->

* 現在當您新增名稱包含「。」的新影像後，就能成功產生新產品快取  然後儲存產品並清除影像快取。 [GitHub-32699](https://github.com/magento/magento2/issues/32699)

<!-- AC-1205-->

* 當您嘗試從產品頁面建立屬性而未完成「管理員」欄位時，Adobe Commerce現在會如預期顯示錯誤訊息。 [GitHub-33099](https://github.com/magento/magento2/issues/33099)

* 當首頁包含多個目錄清單時，所有目錄產品清單上的產品評等現在都正確。 [GitHub-33867](https://github.com/magento/magento2/issues/33867)

### CMS內容

<!-- ACP2E-106-->

* 商家無法再從實體編輯頁面編輯作用中的排程更新。

<!-- ACP2E-65-->

* 具有受限制許可權的管理員現在可以在排程更新後檢視CMS階層中的CMS頁面。

### 可設定的產品

<!-- ACP2E-687-->

* 在產品詳細資訊頁面上變更數量後，Adobe Commerce現在會針對已選取選項的可設定產品顯示正確的產品價格。 以前，價格會在數量變更後重設為初始值。

<!-- ACP2E-461-->

* 此 `products` query現在會擷取可設定產品的價格，準確地反映 **顯示無庫存** 組態設定。 以前，查詢不會傳回準確的價格。

<!-- ACP2E-412-->

* 可設定選項現在連結至在「管理員」中建立的可設定產品，使用 `POST /V1/configurable-products/configurable1/child`.

<!-- ACP2E-360-->

* 多選屬性現在會在產品編輯期間正確儲存。 之前，Adobe Commerce會在儲存產品時儲存非選取屬性的預設選項以及選取的屬性。

<!-- ACP2E-55-->

* Adobe Commerce現在會在建立全域時依預期顯示可設定的屬性 `select` 屬性修補指令碼。 以前，會隱藏符合條件的全域屬性。

<!-- AC-2521-->

* 此 `addConfigurableProductsToCart` 突變現在可用於新增具有自訂選項的可設定產品。 之前，Adobe Commerce擲回此錯誤： `Magento 2.3.4 graphql Notice: Undefined index: option_value in /var/www/html/mg234/vendor/magento/module-configurable-product-graph-ql/Model/Resolver/ConfigurableCartItemOptions.php on line 62`. [GitHub-28860](https://github.com/magento/magento2/issues/28860)

<!-- ACP2E-43-->

* 當可設定產品的某個子產品的可用性因排程更新而變更時，Adobe Commerce現在可以正確顯示可設定產品的庫存狀態、可用設定和顯示的價格。 先前，當可設定產品有兩個子項，且已排程更新停用一個子項產品的可用性時，父產品的庫存狀態會錯誤地顯示為 **無庫存** 當更新作用中時，在更新完成後，其設定的顯示價格和可用性計算錯誤。

* 您現在可以使用選用的自訂選項來重新排序可設定的產品。 以前，重新排序嘗試失敗，表示顯示此錯誤：  `Some of the selected options are not currently available`. [GitHub-35409](https://github.com/magento/magento2/issues/35409)

<!-- AC-959-->

* 此 `addConfigurableProductsToCart` 變異現在可如預期般用於多個產品。 以前，會傳回不正確的產品資訊，或傳回無效的錯誤訊息。 [GitHub-30948](https://github.com/magento/magento2/issues/30948)

### 客戶

<!-- ACP2E-390-->

* Adobe Commerce現在會根據店面的網站設定，正確顯示預先定義的EAV系統屬性。 以前，為一個網站啟用並為另一個網站停用的網站層級客戶屬性，在兩個網站中都顯示為已啟用。

### 客戶區段

<!-- ACP2E-473-->

* 客戶區段特定的「相關產品」規則現在可如預期運作。 已呼叫方法為特定網站新增訪客 — 區段關係來修正此問題。 過去，此規則的區段只會根據已註冊的客戶和網站來擷取。

### 可下載

<!-- MC-40675-->

* 您現在可以從可下載的產品中移除範例連結和檔案。 [GitHub-31887](https://github.com/magento/magento2/issues/31887)

### 電子郵件

<!-- ACP2E-717-->

* 系統核發的電子郵件現在已成功傳送給具有「」的收件者。 — 」時，不會顯示錯誤訊息。

<!-- ACP2E-184-->

* 客戶現在會收到電子郵件提醒，提醒他們依照正確排程放棄的購物車。 新 `TIMESTAMPDIFF(DAY, ,)` SQL函式已取代 `TO_DAYS()` 函式並根據日期和時間計算時間戳記中的差異。 先前，因為兩個購物車放棄的日期時間值（任何時區）和伺服器時間(UTC)計算不正確，所以不會根據排程傳送電子郵件提醒。

<!-- AC-776-->

* 當購物者按一下後輸入無效的電子郵件格式時，Adobe Commerce現在會在「運送」頁面上顯示錯誤訊息 **下訂單**. 以前，錯誤訊息會顯示在「付款」頁面上。 [GitHub-33590](https://github.com/magento/magento2/issues/33590

### 框架

<!-- ACP2E-658-->

* 此 `bin/magento setup:config:set` 命令不再覆寫中設定的快取ID首碼 `app/etc/env.php`.

<!-- ACP2E-517-->

* 此 `bin/magento setup:static-content:deploy -s compact` command現在會如預期包含子主題中的樣式。 先前，布建後，佈景主題CSS檔案不會出現在店面上。

<!-- AC-1999-->

* 已新增新的斜線，以檢查中是否使用結尾斜線 `void` 元素。

<!-- AC-2896-->

* 將新來源指派給產品並變更其數量後，Adobe Commerce不再擲回SQL錯誤。 [GitHub-35262](https://github.com/magento/magento2/issues/35262)

<!-- AC-401-->

* 屬性排序順序現在可以如以下所指定： `di.xml` 更新後的檔案。

<!-- AC-1716-->

* 此 `updateCartCurrency` 函式現在會設定字串，而不是cart物件內的物件。 之前，Adobe Commerce不會使用載入引號 `getQuote` 因為 `updateCartCurrency` 函式會設定一個物件，而不是在cart物件內的字串。 [GitHub-34199](https://github.com/magento/magento2/issues/34199)

<!-- AC-2428-->

* 由於下列原因，裝置測試中不再出現淘汰通知`\DateTimeFormatter::formatObject()`. 此方法現在可如預期搭配下列專案的數值運作： `$format`.

<!-- AC-2893-->

* Adobe Commerce不再顯示 `preg_replace()` 管理員錯誤。 第三個引數(`$subject`)現在屬於型別 `array|string` 而非 `bool`.

<!-- AC-2583-->

* 此 `isFreeShipping` 方法現在會傳回整數而非布林值。[GitHub-35164](https://github.com/magento/magento2/issues/35164)

<!-- AC-2855-->

* 當您為任何類別方法建立外掛程式時，Adobe Commerce不再擲回下列錯誤 `vendor/magento/module-backend/Model/Menu.php`： `Error: Call to undefined method ReflectionUnionType::getName()`. [GitHub-35292](https://github.com/magento/magento2/issues/35292)

<!-- AC-1518-->

* Adobe Commerce現在會在您導覽至時傳回404錯誤，而不是500錯誤 `/checkout/sidebar/updateItemQty/?item_qty=error` 在店面。 之前，系統擲回此錯誤：  `Warning: A non-numeric value encountered in /vendor/magento/module-checkout/Controller/Sidebar/UpdateItemQty.php on line 69`. [GitHub-34380](https://github.com/magento/magento2/issues/34380)

<!-- ACP2E-847-->

* Adobe Commerce不再觸發 `trim(): Passing null to parameter #1 ($string) of type string is deprecated` 在沒有SSL設定的情況下設定AMPQ連線時發生錯誤。

<!-- AC-2414-->

* 已更正 `longblog` 資料庫定義至 `long blob`. [GitHub-35108](https://github.com/magento/magento2/issues/35108)

<!-- AC-1526-->

* 包含單引號的去底色文字現在可以翻譯。 [GitHub-34319](https://github.com/magento/magento2/issues/34319)

<!-- AC-2505-->

* A `TypeError` 在 `magento2/app/code/Magento/Security/Model/AdminSessionsManager.php` 已更正自 `int` 至 `string`.  [GitHub-34415](https://github.com/magento/magento2/issues/34415)

<!-- AC-2511-->

* `.htpasswd` 已新增至中禁止的位置 `nginx` 設定檔。 [GitHub-35150](https://github.com/magento/magento2/issues/35150)

<!-- AC-2013-->

* 類別產品清單頁面的載入時間已藉由新增來改善 `Magento_Ui/js/core/app` as a `deps` 至 `app/code/Magento/Ui/view/frontend/requirejs-config.js`. [GitHub-34847](https://github.com/magento/magento2/issues/34847)

<!-- AC-2101-->

* 此 `ProductRepository.php:get` 方法現在會傳回一次快取金鑰。 之前會傳回兩次。 [GitHub-34958](https://github.com/magento/magento2/issues/34958)

<!-- AC-2507-->

* 新增錯誤訊息至在cron作業的例外狀況處理常式中建立的新例外狀況。 [GitHub-34941](https://github.com/magento/magento2/issues/34941)

<!-- AC-2247-->

* 的讀我檔案 `GraphQl-GroupedProductGraphQl` 模組已更新。 [GitHub-34951](https://github.com/magento/magento2/issues/34951)

<!-- AC-2079-->

* 店面列印訂單/發票/銷退折讓單頁面不再顯示預設的Luma標誌，而是已指定要在網站上顯示的標誌。 [GitHub-34942](https://github.com/magento/magento2/issues/34942)

### 一般修正

<!-- AC-2883-->

* 將工作階段大小上限設為0 （管理員） **儲存**  >  **設定**  >  **設定 — 進階**)不再登出管理員。 [GitHub-35312](https://github.com/magento/magento2/issues/35312)

<!-- ACP2E-675-->

* 現在，當您從管理員新增指派給非預設網站的客戶地址時，系統會根據指派給客戶的網站正確載入客戶地址屬性組態設定。

<!-- ACP2E-630-->

* 現在，受限管理員無法在「類別」頁面和「產品編輯」頁面上建立類別。 之前，在類別頁面上會封鎖類別建立，但您仍可透過產品編輯頁面來建立類別。

<!-- ACP2E-448-->

* 當您透過Page Builder新增套件組合產品時，Adobe Commerce不再擲回例外狀況。

<!-- ACP2E-427-->

* 現在可以從類別樹狀結構中選取類別，作為客戶區段的條件。

<!-- ACP2E-381-->

* 您現在可以在iOS裝置上建立客戶帳戶，並在其名字中加上斜線撇號(&#39;)。 之前，只允許使用直撇號，使用iOS 11+預設斜撇號會導致 `Name is not valid!` 錯誤。

<!-- ACP2E-378-->

* 此 `products` query現在會傳回正確反映「顯示相關產品」設定的產品資訊。 此 `related_products`， `upsell_products`、和 `crosssell_products` GraphQL ProductInterface中的欄位現在分別根據「顯示相關產品」、「顯示追加銷售產品」和「顯示交叉銷售產品」設定來解析。

<!-- ACP2E-234-->

* 此 **將產品設為新的開始日期** 屬性現在會顯示正確的日期，當 **將產品設定為新產品** 屬性是透過大量產品大量更新設定的。 先前， **將產品設為新的開始日期** 顯示為 **1970年1月1日**.

<!-- ACP2E-277-->

* 不再自動授予具有受限制角色的使用者存取新模組的許可權。

<!-- ACP2E-50-->

* 根據類別的目標規則只會顯示規則中宣告之類別的產品。 先前，「相關產品」規則會顯示指派給產品且未在規則中定義的類別中的產品。

<!-- ACP2E-16-->

* 相關產品規則條件現在與包含下列專案的產品搭配使用時可如預期運作 `multiselect` 屬性。

<!-- AC-2719-->

* 商戶現在可以新增層級價格屬性(`tier_price`)和產品比較的資料進行比對。 以前，產品比較頁面會在以下錯誤發生時當機： **店面可供比較** 已啟用此屬性的設定。 [GitHub-35244](https://github.com/magento/magento2/issues/35244)

<!-- AC-2441-->

* Adobe Commerce現在，當您設定無效的Cookie網域(**儲存**  > **設定**  >  **Web**  >  **預設Cookie設定Cookie網域**)。 之前，網站會當機。 [GitHub-35048](https://github.com/magento/magento2/issues/35048)

<!-- AC-2765-->

* 當具有角色範圍的管理員將產品新增到PageBuilder的內容元素時，Adobe Commerce不再擲回錯誤。 之前，Adobe Commerce擲回SQL錯誤。

<!-- AC-197-->

* 已在編輯和新增地址頁面上的街道地址第二行新增驗證。 現在會強制執行在第二個指定的最小和最大文字長度。

<!-- ACP2E-798-->

* 升級後，Adobe Commerce在Admin中建立目錄規則的過程中不再擲回以下錯誤： `A technical problem with the server created an error. Try again to continue what you were doing. If the problem persists, try again later`.

<!-- AC-2445-->

* 當您啟用「 」時，Adobe Commerce不再擲回錯誤  **在此處核取，將RSS摘要連結至您的願望清單** 核取方塊 **分享願望清單**. [GitHub-34998](https://github.com/magento/magento2/issues/34998)

<!-- AC-2019-->

* 的標題 **顯示密碼** 核取方塊(客戶登入、客戶註冊、客戶編輯（變更密碼區段）和客戶設定新密碼表單)現在可翻譯。 [GitHub-34857](https://github.com/magento/magento2/issues/34857)

<!-- ENGCOM-9062-->

* 更新中的標籤和註解說明 `app/code/Magento/NewRelicReporting/etc/adminhtml/system.xml`. [GitHub-31947](https://github.com/magento/magento2/issues/31947)

<!-- ENGCOM-8600-->

* 已移除（不需要） `csp_whitelist.xml` 檔案。 [GitHub-30607](https://github.com/magento/magento2/issues/30607)

### 禮品卡

<!-- AC-560-->

* `products` 查詢現在可正確傳回包含禮品卡產品的產品資料，並附上 `gift-card` URL索引鍵。

### GraphQL

<!-- AC-2361-->

* 遺失 `price_range` 屬性已新增至GraphQL `BundleItemOption` 型別。 [GitHub-35010](https://github.com/magento/magento2/issues/35010)

<!-- AC-2367-->

* 此 `products` 當符合下列條件時，查詢不再傳回屬性作為彙總 **在搜尋結果中使用** 圖層導覽設定已停用。 [GitHub-33318](https://github.com/magento/magento2/issues/33318)

<!-- AC-1760-->

* A `price_including_tax` 欄位已新增至 `CartItemPrices`. [GitHub-29057](https://github.com/magento/magento2/issues/29057)

<!-- AC-2520-->

* 此 `new_from_data` 和 `new_to_datefields` 在 `ProductInterface` 已不再過時。 [GitHub-34783](https://github.com/magento/magento2/issues/34783)

<!-- AC-2364 1456-->

* 此 `categories` 擷取類別清單時，查詢不再擲回例外狀況，其中一個類別包含無法在檔案系統上找到的影像。 之前，Adobe Commerce擲回此例外狀況： `Category image not found`. [GitHub-34266](https://github.com/magento/magento2/issues/34266)

<!-- AC-2368-->

* 此 `products` 查詢現在會傳回 `category_uid` 如預期般作為彙總。 [GitHub-32557](https://github.com/magento/magento2/issues/32557)

<!-- AC-2373-->

* 此 `updateCartItems` 突變現在會在產品庫存達到最大庫存量時如預期移除產品。 [GitHub-30220](https://github.com/magento/magento2/issues/30220)

<!-- AC-2366 734 MC-42964 -->

* 此 `urlResolver` 當多個首頁具有相同的識別碼時，查詢現在可以正確解析路徑分隔符號(/)。 以前，查詢未解析分隔符號並傳回null。 [GitHub-33615](https://github.com/magento/magento2/issues/33615)

<!-- AC-1881-->

* `customer` 查詢現在會在查詢訂單時，如預期擷取套件產品多選選項。 [GitHub-34717](https://github.com/magento/magento2/issues/34717)

<!-- AC-1668-->

* 發出Adobe Commerce請求後，GraphQL工作階段不再結束。 先前， `ClearCustomerSessionAfterRequest` 外掛程式已將購物者登出。 [GitHub-34550](https://github.com/magento/magento2/issues/34550)

<!-- AC-818-->

* 此 `products` 查詢不再傳回 `price_range` 受停用變體影響的可設定產品值。 [GitHub-33629](https://github.com/magento/magento2/issues/33629)

<!-- ACP2E-634-->

* 中的可設定產品價格範圍 `products` 現在，當以下情況時，可以正確計算查詢回應： **顯示無庫存產品** 已啟用組態設定。 過去，停用的選項會在計算最小和最大價格時納入考量。

<!-- ACP2E-531-->

* 此 `products` 依位置排序時，查詢現在會傳回正確篩選的多個類別。

<!-- ACP2E-499-->

* `setShippingAddressesOnCart` 要求現在可成功驗證地區ID。 之前，當您使用地區ID而非地區代碼時，Adobe Commerce會擲回錯誤。

<!-- ACP2E-470-->

* `products` 查詢現在只會傳回與請求中傳遞的存放區相關聯的類別。

<!-- ACP2E-363-->

* 此 `categoryList` 現在，當在標頭中指定存放區時，query會傳回反映查詢存放區根類別的結果。 以前，即使標頭中指定了其他存放區，預設根類別中的類別也會包含在結果中。

<!-- AC-1955-->

* 此 `products` 當符合下列條件時，查詢不再傳回屬性作為彙總 **用於搜尋結果分層導覽** 設定已停用。 [GitHub-33318](https://github.com/magento/magento2/issues/33318)

<!-- AC-2365-->

* 此 `cart` query現在只傳回免費訂單的一種付款方式。 以前，查詢回應會傳回所有使用中的付款方法。 [GitHub-34036](https://github.com/magento/magento2/issues/34036)

<!-- AC-210-->

* 在之前新增外掛程式 `collectQuoteTotals` 呼叫以確保不會多次套用商店積分。

<!-- ACP2E-636-->

* 此 `generateCustomerTokenAsAdmin` 突變現在會如預期擷取客戶Token。 以前不會傳回Token，而是傳回此錯誤： `Customer email provided does not exist`.

<!-- AC-2371-->

* GraphQL結構描述現在適用於自訂 `type` 產品屬性已定義。 先前，結構描述無效，因為 `type` 自訂已覆寫產品型別上的屬性 `type` 屬性。 [GitHub-34929](https://github.com/magento/magento2/issues/34929)

<!-- AC-2797-->

* 客戶新增或更新了 `createCustomer`， `createCustomerV2`， `updateCustomer`，或 `updateCustomerV2` 突變現在與活躍電子報訂閱一起新增。 以前，即使請求包含正確的輸入引數，客戶也會取消訂閱電子報。 [GitHub-33599](https://github.com/magento/magento2/issues/33599)

<!-- AC-1883-->

* 此 `products` 查詢特定商店檢視現在只會傳回多網站部署中位於特定網站根目錄的類別。 以前，查詢會從其他網站的根類別中傳回類別。 [GitHub-34570](https://github.com/magento/magento2/issues/34570)

<!-- AC-2712-->

* 此 `products` query現在只會傳回所提供類別ID的子類別。 之前，它會傳回所有類別。 [GitHub-35220](https://github.com/magento/magento2/issues/35220)

<!-- AC-2794-->

* 此 `customerOrders` 現在查詢會如預期般回應，當 `gift_message` 物件已在回應中指定，但禮品訊息不存在。 以前，查詢會傳回以下訊息： `Can't load gift message for order is returned`. [GitHub-28957](https://github.com/magento/magento2/issues/28957)

<!-- AC-2515-->

* 修正的錯誤 `catalog_category_product` 索引子導致 `products` 查詢以從其他存放區傳回類別。 [GitHub-31253](https://github.com/magento/magento2/issues/31253)

<!-- AC-2063-->

* 此 `generateCustomerToken` 突變現在會在 `customer_log` 產生客戶Token後如預期般運作。 [GitHub-33378](https://github.com/magento/magento2/issues/33378)

### Google Analytics

<!-- AC-2574 2685-->

* 程式碼基底已新增Google標籤模組，其支援在2023年7月轉換至Google Analytics4。  您目前可以在Google Universal Analytics屬性中使用和收集新資料，但Google Universal將於2023年7月終止服務。 [GitHub-35204](https://github.com/magento/magento2/issues/35204)， [GitHub-35376](https://github.com/magento/magento2/issues/35376)

### 影像

<!-- ACP2E-71-->

* 產品詳細資料頁面上的影像不再閃爍，且影像會如預期般保持置中。 先前，在產品詳細資料頁面完成載入影像後，影像會明顯向下位移。

### 匯入/匯出

<!-- ACP2E-676-->

* 在重新產生CSV檔案之前，從管理員中刪除交叉銷售產品後，匯出CSV中相關的、追加銷售和交叉銷售產品位置現在都正確。 先前，移除交叉銷售產品後不會重新計算交叉銷售產品位置，且產品位置訂單不正確。

<!-- ACP2E-632-->

* Adobe Commerce現在會在匯出報表時篩選欄之前，檢查自訂檢視。 以前，匯出的報告不考慮自訂檢視，而且匯出的欄不正確。

<!-- ACP2E-502-->

* Adobe Commerce現在可成功匯入檔案名稱較長的影像。 之前，Adobe Commerce未匯入影像，並擲回此錯誤： `Imported resource (image) could not be downloaded from external resource due to timeout or access permissions in row(s):`.

<!-- ACP2E-294-->

* 類別識別碼屬性現在可用於排程的匯出篩選器。

<!-- ACP2E-59-->

* 包含問號(？)的套件組合產品 由於改進了內的查詢產生器，現在可以成功匯入選項標題中的 `populateExistingOptions` 方法。 選項標題也會正確顯示。 先前，初次匯入後，後續的匯入會導致行為損毀，並加倍選項。 購物者也無法新增產品至購物車。

<!-- ACP2E-766-->

* 在匯入期間新增類別名稱的驗證。 之前，Adobe Commerce不會驗證類別名稱，導致類別名稱超過255個字元時發生錯誤。

<!-- AC-2096-->

* 中的現有記錄 `catalog_url_rewrite_product_category` 表格現在會在插入新表格之前刪除。 之前，多商店產品匯入期間發生下列錯誤： `SQLSTATE[23000]: Integrity constraint violation`. [GitHub-34210](https://github.com/magento/magento2/issues/34210)

### 基礎架構

<!-- ACP2E-2039-->

* 已棄用的內容功能表外掛程式已從外掛程式清單中移除。

<!-- ACP2E-2039-->

* 由於推出新功能，頁面產生器模組中的TinyMCE編輯器工具列相關邏輯已更新 `delayedRender` TinyMCE中工具列的邏輯。

<!-- MC-42655-->

* 競爭條件不再中斷建立 `contentUpdated` 事件監聽器。 [GitHub-32068](https://github.com/magento/magento2/issues/32068)

<!-- AC-3044-->

* 此 `getTypeID` 函式現在會傳回產品型別ID而非產品ID。 [GitHub-35458](https://github.com/magento/magento2/issues/35458)

<!-- AC-2911-->

* jQuery UI滑桿和 `SelectMenu` 已在中更正對應 `vendor/magento/module-theme/view/base/requirejs-config.js`.

* 觀察者置於 `sales_order_state_change_before` 現在支援從order物件擷取資料。 此 `sales_order_state_change_before` `event` 引數已更新。 [GitHub-26789](https://github.com/magento/magento2/issues/26789)

<!-- AC-2239-->

* `indexer:reset` 已重構為呼叫 `$indexer->invalidate()`. [GitHub-34988](https://github.com/magento/magento2/issues/34988)

<!-- AC-2055-->

* 您現在可以在以下專案中使用冒號符號： `htmlClass` 屬性值，可支援使用其他元件，例如Tailwind UI。 [GitHub-34430](https://github.com/magento/magento2/issues/34430)

### 記錄

<!-- ACP2E-203-->

* 客戶、客戶地址及訂單動作現在會在管理員動作報表中正確記錄。 Adobe Commerce之前，如果 `postDispatch` 組態設定中未指定處理常式。

### MFTF

#### 動作群組

下列測試中的重複式動作已取代為動作群組：

`AdminConfigurableProductChildrenOutOfStockTest` [GitHub-32378](https://github.com/magento/magento2/issues/32378)
`AdminCreateStoreViewTest` [GitHub-34631](https://github.com/magento/magento2/issues/34631)

#### 新測試

`AdminUnlockAdminUserEntityTest` [GitHub-34836](https://github.com/magento/magento2/issues/34836)

`StorefrontNewsletterSubscriptionWithEnabledNeedToConfirmConfigTest` [GitHub-33344](https://github.com/magento/magento2/issues/33344)

#### 重構測試

`AdminCancelTheCreatedOrderWithCashOnDeliveryPaymentMethodTest` [GitHub-33692](https://github.com/magento/magento2/issues/33692)

### 電子報

<!-- ACP2E-35-->

* 登入的客戶不再在「管理員>」中標示為來賓 **行銷** > **電子報訂閱者**.

<!-- AC-2102-->

* Newsletter訂閱確認電子郵件現在的 **從** 如果客戶被指派到非預設商店並且已從管理員訂閱或取消訂閱，則為欄位。 之前，客戶收到一封電子郵件，其中包含中的預設電子郵件 **從** 標頭。 [GitHub-34963](https://github.com/magento/magento2/issues/34963)

<!-- AC-2509-->

* 新聞稿電子郵件範本中的取消訂閱URL現在可如預期運作。 [GitHub-33310](https://github.com/magento/magento2/issues/33310)

### 訂購

<!-- ACP2E-550-->

* 您現在可以使用隱藏在店面的自訂客戶屬性，從新訂單成功建立新客戶。 過去，Adobe Commerce沒有儲存自訂客戶屬性的正確值。

<!-- ACP2E-279-->

* 編輯訂單後，現在即可成功儲存訪客客戶詳細資料。 以前，某些客戶詳細資料會遺失，包括 `customer_firstname` 和 `customer_lastname, x_forwarded_for`.

<!-- ACP2E-92-->

* 在下列情況下，商戶無法再建立具有小數總數量的銷退折讓單： **十進位數量** 在產品或全域設定層級上停用。 以前，商家可以建立小數總數量的銷退折讓單，但不適用。

<!-- ACP2E-56-->

* 當偏好設定中的時區與本機電腦上設定的時區不同時，依日期篩選現在可正確用於發票、出貨、銷退折讓單、CMS頁面及CMS區塊格點。 以前，日期剖析不正確，篩選的結果包含設定日期範圍以外的資料。

<!-- AC-1536-->

* 當您在管理員帳戶編輯頁面上變更指派給客戶的主要電子郵件地址時，Adobe Commerce不再變更指派給訂單的自訂電子郵件地址。 先前，當您編輯客戶的主要電子郵件地址時，新電子郵件地址會指派給為該客戶建立的每個訂單。 [GitHub-34397](https://github.com/magento/magento2/issues/34397)

<!-- AC-2664-->

* Adobe Commerce現在會在執行PHP 7.4的部署中，於銷退折讓單網格頁面上顯示要求的存放區中的記錄。之前，在您建立銷退折讓單並嘗試檢視後，Adobe Commerce擲回下列錯誤： `The store that was requested wasn't found. Verify the store and try again`.

<!-- AC-2442-->

* Adobe Commerce現在會在「銷退折讓單」網格頁面上，顯示從商店檢視建立的訂單（其名稱會加上數字）的銷退折讓單。 Adobe Commerce先前會顯示錯誤： `The store that was requested wasn't found. Verify the store and try again. Exception in /var/www/html/vendor/magento/module-store/Model/StoreRepository.php:75`. [GitHub-35122](https://github.com/magento/magento2/issues/35122)

<!-- ACP2E-31-->

* Adobe Commerce現在會在「管理員」和「店面」發票頁的總數上顯示免運費(0)。 先前，當訂單的出貨量為零時，Adobe Commerce不會在發票頁面上的出貨總金額中顯示出貨總金額。

<!-- ACP2E-740-->

* 使用客戶商店信用時，Adobe Commerce現在會在結帳期間顯示正確的訂單狀態。

<!-- AC-1778-->

* 此 `increment_id` 中的欄 `sales_order` 表格已增加。 之前，第三方模組會假設 `sales_order.increment_id` 「 」的長度只有50個字元，僅儲存的前32個字元 `increment_id`. [GitHub-34521](https://github.com/magento/magento2/issues/34521)

### 付款方法

<!-- ACP2E-25-->

* 管理員現在可以使用PayPal PayflowPro付款方式向管理員下訂單。 Adobe Commerce先前會顯示此錯誤： `No such entity with cartId = 0`.

<!-- AC-2093-->

* 使用Venmo、PayPal Later或PayPal付款時，結帳工作流程中的「付款複查」頁面現在會顯示正確的付款方式名稱。

<!-- AC-1195-->

* 此 `cart` 查詢不再傳回免費訂單的所有有效付款方式。 [GitHub-34036](https://github.com/magento/magento2/issues/34036)

#### Braintree

<!-- BUNDLE-3088-->

* 商戶現在可以針對透過Braintree以Apple Pay支付的訂單，提交部分退款。 這是Adobe Commerce 2.4.4中的已知問題。

#### PayPal

<!-- ACP2E-296-->

* Adobe Commerce現在會在透過PayPal支付的訪客訂單中顯示正確的客戶名稱。 之前，客戶名稱會顯示為Guest。

<!-- AC-2606-->

* createPaypalExpressToken變異的解析程式已更新，以正確使用use_paypal_credit輸入欄位中指定的值。 之前，它嘗試使用無效的 `paypal_credit` 欄位。 [GitHub-35180](https://github.com/magento/magento2/issues/35180)

### 效能

<!-- ACP2E-474-->

* 已改善動態區塊載入的效能。 以前，訪客區段不會按照網站進行快取，這會導致對資料庫重複查詢相同的資料。

<!-- ACP2E-52-->

* 針對可設定產品相關聯的產品資料快取，新增TTL （到期日）以改善Redis快取管理。 以前，如果Redis金鑰驅逐原則設定為變動性驅逐原則，則這些快取不會因為缺少TTL值而被驅逐。

<!-- ACP2E-464-->

* 新 `Grid Filter Condition Type` 客戶/客戶地址屬性控制屬性篩選器與資料庫中屬性值的比對方式，選項包括 `Partial Match`， `Prefix Match`、和 `Full Match`.

<!-- AC-1136-->

* 「目錄搜尋」全文檢索索引器已重新放置到存放區回圈之外，這會簡化重新索引的程式。 [GitHub-33984](https://github.com/magento/magento2/issues/33984)

<!-- AC-2508-->

* 已修正的問題 `array_merge` 在回圈中。 [GitHub-33929](https://github.com/magento/magento2/issues/33929)

### 定價

<!-- ACP2E-445-->

* 預設範圍中沒有值的價格屬性（但在存放區檢視層級定義）現在可正確編制索引。 先前，從EAV表格擷取價格屬性值的SQL運算式並未考慮預設範圍中未定義值的案例。

<!-- ACP2E-313-->

* 產品詳細資料頁面上列出的價格，現在與結帳工作流程中針對層級價格列出的價格相同，而這些層級價格會因所選數量而異（例如，某產品的定價會因購買2個專案而有所不同，而不是5個專案）。 以前，結帳價格會反映最低產品數量的價格。

### 促銷活動

<!-- ACP2E-690-->

* 此 **使用次數** 當訪客客戶下含折扣的訂單並隨後註冊帳戶時，折扣值不再增加兩次。

### ReCAPTCHA

* 此 **提交** 「登入」和「建立帳戶」頁面上的按鈕現在處於非使用中狀態，直到ReCaptcha完全載入為止。

### 退貨授權(RMA)

<!-- MC-40432-->

* 此 `GET /V1/returnsAttributeMetadata` 現在，端點可在以下情況下正常運作： `rma_item` 實體預設屬性集ID與預設安裝ID不同。 以前，如果這些ID不同，此端點會傳回空白結果。

<!-- ACP2E-247-->

* 此 **使用預設值** 用來在產品編輯頁面上啟用RMA的核取方塊現在對Default Store按預期運作。 以前，儲存產品後會立即清除核取方塊。

### 獎勵

<!-- ACP2E-433-->

* 當商店積分功能停用時，現在可以退還獎勵積分。

<!-- ACP2E-757-->

* 套用獎勵分數時，結帳效能已有所改善。 時間 `entity` 為null，則不會執行資料庫查詢，因為查詢 `magento_reward_history` 在此情況下，表格不是強制性的。

<!-- ACP2E-674-->

* 客服訂單的銷退折讓單不再檢查 `customer_id`，會略過查詢 `magento_reward_history` 獎勵分數的資料庫表格表格。 此變更已改善效能。

### 角色

* 此 **儲存** >  **設定** > **服務** 「資源存取」設定為時，頁面現在會如預期顯示Adobe Commerce Web API資訊  **自訂** 在「角色資源」標籤上。 [GitHub-35506](https://github.com/magento/magento2/issues/35506)

### 搜尋 {#search-heading}

<!-- ACP2E-645-->

* 在分層導覽上依色票篩選產品，可在修正後顯示產品的正確影像。

<!-- ACP2E-615-->

* Elasticsearch查詢現在在以下情況下可按預期運作： `int` 已設定為可搜尋的後端 `type` 屬性。 之前，Adobe Commerce擲回 `Elasticsearch\Common\Exceptions\BadRequest400Exception` 例外。

<!-- ACP2E-99-->

* 您現在可以將搜尋同義字與 **要比對的最少字詞** 引數於Elasticsearch查詢。 以前，如果在設定中指定此引數，並為特定關鍵字新增搜尋詞，則搜尋未傳回任何結果。

<!-- ACP2E-72-->

* Adobe Commerce現在會在部署中的店面顯示準確的搜尋結果建議計數，其中搜尋建議和 **顯示每個建議的結果計數** 設定已啟用。 以前，關鍵字旁邊顯示的計數為零。

<!-- AC-700-->

* 目錄頁面上依自訂屬性排序的產品現在會依預期順序顯示。 之前，產品會依其屬性選項值ID排序，以反映將其新增至屬性的順序。 [GitHub-33810](https://github.com/magento/magento2/issues/33810)

<!-- AC-645-->

* 在分層導覽中依色票篩選產品現在會顯示正確的產品影像。 之前，圖層導覽 `PageCache` 索引鍵不包含可設定產品的篩選引數。

<!-- AC-2051-->

* 修正PHP錯誤 `catalogsearch/advanced/result` 和  `catalogsearch/advanced/index` 頁面。  之前，在任何進階搜尋字串中傳遞陣列時，Adobe Commerce會顯示此錯誤：  `Warning: trim() expects parameter 1 to be string, array given | magento/module-catalog-search`. [GitHub-33586](https://github.com/magento/magento2/issues/33586)

### 送貨

<!-- AC-2052-->

* 若未選取允許的送貨方法，Adobe Commerce在載入UPS運費時就不會再擲回錯誤。 先前，在這些條件下，當購物者在結帳工作流程中輸入送貨地址時，沒有顯示其他送貨方法，而Adobe Commerce在店面顯示錯誤。 [GitHub-34411](https://github.com/magento/magento2/issues/34411)

<!-- AC-2621-->

* 計算表格費率運費金額現在不包含虛擬產品價格。 以前，這些產品的運費計算不正確。[GitHub-35185](https://github.com/magento/magento2/issues/35185)

<!-- ACP2E-209-->

* 對於已套用折扣券的訂單，價格為零的表格費率出貨費率現在會在結帳工作流程「訂單彙總」區塊中正確顯示。 以前不顯示送貨方法。

### 分段

<!-- ACP2E-404-->

* 針對快取頁面維持不變的銷售規則套用測試更新後，Adobe Commerce不再清理整頁快取。

<!-- ACP2E-304-->

* 內容中繼儀表板不再顯示非使用中的永久更新。

<!-- ACP2E-257-->

* 現在，從測試儀表板變更測試更新的結束日期時，會成功將這些變更套用至測試更新及其實體。 （已引入佇列來處理中繼更新變更。）

<!-- ACP2E-238-->

* 商戶現在可以移除排程更新的結束日期，或刪除並重新建立更新。 先前，移除結束日期時，實體仍會排程在該時間。 Adobe Commerce現在會移除已移除復原的過時更新。

<!-- ACP2E-149-->

* CMS頁面的作用中排程更新現在會如預期在CMS頁面的「排程變更」區段中顯示。

<!-- ACP2E-81-->

* 此 `custom_design_to` 當排程更新變更時，屬性值現在會如預期更新。 之前，沒有結束時間的兩個獨立類別設計更新會被視為一個更新。 當其中一個排定的更新在執行時刪除時， `custom_design_from` 時間值變得大於 `custom_design_to` 下次排程更新的時間值。

<!-- ACP2E-58-->

* 編輯已排程的更新後，Forms現在會依預期填入資料。

<!-- ACP2E-18-->

* 此 `vendor/magento/module-catalog-staging/Setup/Patch/Data/MigrateCatalogProducts.php` 當資料庫包含具有自訂選項的產品和 `special_from_date` 屬性已設定。

<!-- ACP2E-741-->

* 現在，當執行中的更新新增變更時，會在第二次排程更新期間儲存變更。 以前，變更不會儲存，商家需要重新輸入並儲存變更。

<!-- ACP2E-21-->

* 大量動作記錄現在會顯示有關失敗的資訊 `to be moved` 排程更新。 之前，這些失敗的相關資訊可在以下連結中取得： `cron.log` 僅限檔案。

<!-- ACP2E-420-->

* 商戶現在限制在排程更新中編輯產品價格時使用逗號分隔的價格，無論地區設定為何。 先前，根據地區設定，排程更新中包含逗號的價格會除以1000。

<!-- AC-3214-->

* 在執行PHP 8.1的部署中，DHL國內運送的問題已透過僅要求國際運送的應課稅標籤來解決。

### 稅金

<!-- ACP2E-735-->

* 購物車中的產品現在會正確顯示「固定產品稅」(FPT)。 先前，如果購物車中有多個產品具有 **固定產品稅金(FPT)** 和 **將稅金套用至FPT** 已啟用，所有FPT都已指派給購物車中的最後一個產品，並重設其他產品。

<!-- ACP2E-350-->

* 結帳工作流程之訂單摘要區段的「固定產品稅捐(FPT)」總計現已正確計算。

<!-- ACP2E-291-->

* Adobe Commerce現在會在簡單產品的數量變更後，依預期在產品頁面上更新簡單產品的排除稅捐層級價格。

<!-- ACP2E-182-->

* 已將驗證新增至商店設定頁面，以驗證從下拉式清單中選取的國家是否位於歐盟國家/地區清單上。 此 **驗證VAT編號** 按鈕現在僅對EU國家可見。 之前，按鈕在所有國家/地區皆可見，包括英國。

<!-- ACP2E-45-->

* 層級價格現在會在以下情況下正確計算： **在目錄中顯示產品價格** 設為 **排除稅金** 或 **包含與排除稅金**. 以前，產品詳細資訊頁面會顯示包含稅捐的層級價格，無論設定為何。

<!-- AC-1925-->

* 現在，使用葡萄牙語地區設定的訂單，可正確套用稅捐至店面中的任何有效地址。 [GitHub-34271](https://github.com/magento/magento2/issues/34271)

<!-- AC-1084-->

* 此 `cart` 傳回時查詢不再包含稅捐 `subtotal_with_discount_excluding_tax`. [GitHub-33905](https://github.com/magento/magento2/issues/33905)

<!-- ACP2E-651-->

* 訂單資料的網站API請求(`GET /V1/orders/`)不再傳回列總計的負值。

### 測試

<!-- AC-2004-->

* 已更正的錯誤，包括 `Magento.GraphQl.CatalogGraphQl.ProductSearchTest.testSearchSuggestions` 使用AWSElasticsearch設定執行時。

<!-- AC-1113-->

* 此 `testCreateProductOnStoreLevel` 整合測試不再造成資料庫上的巢狀交易。

* 未在PHP 8.1上設定產品影像時，針對Send Friend功能執行WebAPI測試時不再發生下列例外狀況：  `exception main.ERROR: /var/www/html/lib/internal/Magento/Framework/DataObject.php:131 strpos(): Passing null to parameter #1 ($haystack) of type string is deprecated`. [GitHub-34864](https://github.com/magento/magento2/issues/34864)

### 翻譯與地區設定

<!-- ACP2E-537-->

* 您現在可以使用翻譯內嵌工具多次編輯相同的元素。 以前，只包括使用此工具進行的第一次變更。

<!-- ACP2E-437-->

* 當您編輯管理員文字或標籤時，商店檢視選擇器不再封鎖翻譯窗格。 您現在可以從翻譯窗格編輯這些功能，而且介面會在您按一下時顯示這些變更 **提交**.

<!-- ACP2E-362-->

* 巴西葡萄牙文和法文地區設定的管理日期時間格式現在有效。

<!-- ACP2E-785-->

* 新增抑音符號 [ \` ] 字元至名稱驗證器，以便為包含此重音符號的名字或姓氏建立客戶帳戶。

<!-- ACP2E-682-->

* 上的文字 **加入購物車** 「產品詳細資料」頁面上的按鈕現在仍會翻譯成相關地區設定中指定的語言。 翻譯檔案現在會根據區域、主題和區域設定轉換為對應的JavaScript檔案。 `translate_strategy=embedded`. 之前，將產品新增到購物車後，文字會回覆為英文。

<!-- ACP2E-752-->

* 搜尋同義字現在會遵循其指派的存放區範圍。 以前，指派給特定存放區的同義字可在任何其他存放區上搜尋。

<!-- AC-1178-->

* 菲律賓（菲律賓）地區設定的問題已解決。 [GitHub-33996](https://github.com/magento/magento2/issues/33996)

### UI

<!-- ACP2E-557-->

* 中冗長的產品名稱 **目錄** > **產品** 格點現在以文字換行，而非以單行顯示。

<!-- ACP2E-347-->

* 最小和最大出生日期範圍現在會儲存為正確的時間戳記，然後從有效的時間戳記轉換為有效的日期格式。

<!-- ACP2E-280-->

* 無法使用 `magento.com` 不會再於管理員登入期間導致效能問題。 已新增擷取版本通知要求的逾時。

<!-- ACP2E-88-->

* 現在，當管理員訂單、客戶和產品格線篩選器的結果顯示在Chrome瀏覽器中時，會如預期般持續存在。

<!-- AC-2750-->

* 您現在可以在以下情況下從管理員建立客戶 `Magento_LoginAsCustomerAdminUi` 已啟用且 **要登入的存放區檢視** 設為手動選取。 之前，Adobe Commerce擲回此錯誤： `(Magento\Framework\Exception\LocalizedException): Unable to get Customer ID`. [GitHub-33096](https://github.com/magento/magento2/issues/33096)

<!-- AC-2076-->

* 當購物者達到產品影像庫中的最後一個縮圖影像時，「下一步」箭頭現在會如預期般停用。

<!-- AC-2060-->

* 此 **依關鍵字搜尋** 輸入欄位現在有 `aria-label` 元素，而不是上的預留位置 **目錄** > **產品** 頁面。

<!-- AC-3058-->

* 管理員頁尾的隱私權政策連結現在會連結至新的Adobe隱私權政策。

<!-- AC-2880-->

* 在生產模式下啟用JavaScript套件組合時，管理員現在可以存取管理員功能表選項。  [GitHub-35325](https://github.com/magento/magento2/issues/35325)

<!-- AC-2851-->

* 管理員現在可以將目前使用者的到期日設定為高於2038年，並成功儲存使用者。 之前，到期日變更的使用者無法在登出後重新登入。

<!-- AC-751-->

* 當管理員嘗試在「管理員」中儲存街道過多的地址時，Adobe Commerce現在會顯示資訊性錯誤訊息 **儲存** > **屬性**  > **客戶地址**.  管理員現在可以刪除額外的位址資訊，並成功儲存位址。 以前，Adobe Commerce會確認額外的行，但不會儲存資料。

<!-- ACP2E-546-->

* 更新資料庫和本機儲存體中的產品清單檢視組態。 自訂格點檢視現在會在頁面重新載入和檢視變更期間儲存。

<!-- ACP2E-747-->

* 啟用網站限制後，您現在可以在商店檢視之間切換。 以前，存放區檢視切換器的問題會阻止切換存放區檢視。

<!-- AC-2042-->

* Favicon圖示上傳表單現在支援 `.ico` 檔案型別。 先前，當您嘗試在管理員中上傳具有此副檔名型別的Favicon檔案時，Adobe Commerce會顯示此錯誤： `Warning: imagecreatefromstring(): one parameter to a memory allocation multiplication is negative or zero, failing operation gracefully in /var/www/html/vendor/magento/module-media-storage/Model/File/Validator/Image.php on line 64`. [GitHub-34858](https://github.com/magento/magento2/issues/34858)

<!-- AC-3122-->

* 修正管理格線中下拉式選取功能表的顯示問題。 [GitHub-35386](https://github.com/magento/magento2/issues/35386)

<!-- AC-2055-->

* [GitHub-34430](https://github.com/magento/magento2/issues/34430)

### URL重寫

<!-- AC-2535-->

* 現在起，系統會將特定商店檢視中產品的URL從 `url_rewrite` 表格和管理員（在特定商店檢視的屬性代碼可見性狀態變更為後） **無法個別顯示**.  之前，已移除的產品的所有URL， `url_rewrite` 表格。 [GitHub-34937](https://github.com/magento/magento2/issues/34937)

### 視訊

<!-- ACP2E-485-->

* 您現在可以使用Page Builder使用YouTube URL引數來新增影片。 以前，這些引數會自動從URL中移除。

<!-- AC-2251-->

* 您現在可以設定Vimeo視訊，以便在背景中執行 `banner` 元素(當CSP設定為 `restrict mode`. 之前，Adobe Commerce擲回JavaScript錯誤。

### Web API框架

<!-- ACP2E-694-->

* 已針對訂單實作Mutex，以防止在並行請求更新期間出現競爭條件。 先前，並行REST API呼叫期間的競爭條件會導致「訂購的管理專案」表格中的出貨狀態資訊遭到覆寫。

<!-- ACP2E-677-->

* 產品影像角色繼承現在會保留，除非透過REST API更新特定商店檢視中的產品時，在裝載中明確定義。

<!-- AC-2231-->

* Swagger結構描述(`/rest/schema`)現在使用不重複作業ID。

<!-- AC-2845-->

* 透過建立的購物車價格規則 `POST /V1/salesRules/` 將狀態從「停用」變更為「已啟用」後，端點現在會保留現有的優惠券代碼值。 [GitHub-35298](https://github.com/magento/magento2/issues/35298)

<!-- AC-2764-->

* 透過建立的購物車價格規則 `POST /V1/salesRules/` 端點現在包含有效的 `from_date` 和 `to_date` 值。 [GitHub-35265](https://github.com/magento/magento2/issues/35265)

<!-- AC-2522-->

* `CartItemInterface` 現在包含 `customizable_options`. [GitHub-31180](https://github.com/magento/magento2/issues/31180)

<!-- AC-2898-->

* REST API大量PUT和DELETE請求現在可在以下情況下按預期運作： `Magento_ReCaptchaWebapiRest` 模組已啟用。 [GitHub-35348](https://github.com/magento/magento2/issues/35348)

<!-- AC-763-->

* 大量Rest API現在可搭配 `bySku` 可設定產品的選項。 先前傳回500錯誤。

<!-- AC-1169-->

* 此 `/V1/products/base-prices` 端點現在可如預期般運作，搭配 **目錄價格模式 — 網站**. [GitHub-30132](https://github.com/magento/magento2/issues/30132)

<!-- AC-441-->

* 使用建立新的特殊價格排程 `POST /V1/products/special-price` 端點現在可如預期般運作。 之前，端點會傳回此錯誤： `Future Update already exists in this time range. Set a different range and try again`.

### 希望清單

<!-- ACP2E-459-->

* 現在，從願望清單頁面更新料號數量時，會如預期更新產品詳細資料頁面上的數量。 Adobe Commerce現在會從產品URL中挑選更新的值，並填入 `qty` 來自願望清單本身的產品詳細資料頁面欄位。

## 已知問題

**問題**：啟用Braintree後，管理員使用者無法從管理員建立客戶訂單或重新訂單。 當管理員使用者按一下 **訂購** 或 **重新排序**，Adobe Commerce不會提交訂單，而且  `system.log` 顯示此錯誤： `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`.  **因應措施**：  `BUNDLE-3137-composer.patch` 現已推出。 請參閱 [啟用Braintree付款時，管理員無法建立訂單/重新訂單](https://support.magento.com/hc/en-us/articles/8322266352525) 知識庫文章，討論此問題並存取修補程式。 雲端商戶應下載Commerce v1.0.18適用的Cloud Patches。Adobe Commerce 2.4.5-p1也將包含修正。 <!-- AC-6222-->

**問題**： [!DNL RabbitMQ] Adobe Commerce 2.4.5全新安裝（未升級）後，基礎結構元素（交換、佇列）可能未初始化。這個不正確的設定 [!DNL RabbitMQ] 執行非同步操作或產生效能設定檔時，可能會導致嚴重錯誤。 雲端部署不受影響。 **因應措施**：執行全新安裝Adobe Commerce 2.4.5內部部署的商戶應執行 `bin/magento setup:upgrade --keep-generated` 使用後 `bin/magento setup:config:set` 進行設定 [!DNL RabbitMQ] 或透過傳遞以安裝Adobe Commerce [!DNL RabbitMQ] 的設定選項 `setup:install` 命令。 另請參閱 [[!DNL RabbitMQ]](../../../installation/prerequisites/rabbitmq.md).

## 社群貢獻

我們感謝更廣泛的Magento Open Source社群，並感謝他們為此版本所做的貢獻。

社群工程團隊 [Magento貢獻者](https://magento.com/magento-contributors) 維護按月、季和年排列的優秀貢獻個人和合作夥伴清單。 在「貢獻者」頁面中，您可以透過連結前往GitHub上合併的PR。

### 合作夥伴協助撰寫

下表重點說明合作夥伴所做的貢獻。 此表格列出提出提取請求的合作夥伴、外部提取請求編號，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-5-partner.md}}

### 個人貢獻者

下表列出我們社群成員的貢獻。 此表格列出提出提取請求的社群成員、外部提取請求編號，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-5-issues.md}}

## 系統需求

我們的技術棧疊是以PHP和MySQL為基礎所建置。 如需詳細資訊，請參閱 [系統需求](../../../installation/system-requirements.md).

## 安裝和升級指示

您可以使用以下專案安裝Adobe Commerce 2.4.5： [Composer](../../../installation/composer.md).
