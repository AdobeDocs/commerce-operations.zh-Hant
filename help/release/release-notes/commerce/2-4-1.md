---
title: Adobe Commerce 2.4.1發行說明
description: 了解2.4.1 Adobe Commerce版本的新功能、增強功能、錯誤修正和已知問題。
source-git-commit: 065c56f20ba5b1eef8c331c5c2f5649902f1442b
workflow-type: tm+mt
source-wordcount: '16726'
ht-degree: 0%

---


# Adobe Commerce 2.4.1發行說明

Adobe Commerce 2.4.1推出效能與安全性增強功能，以及B2B功能集的大幅新增。 安全性增強功能包括 `SameSite` 屬性，並為支付相關和訂單相關API端點以及「下單」店面頁面新增驗證碼驗證保護。 B2B改良著重於訂單核准程式、B2B運送方法、擴充管理動作記錄，以及加強店面安全性。

此版本包含2.4.0版中包含的所有核心品質改善項目、150項核心程式碼的新修正項目，以及15項安全性增強項目。 其中包括社群成員解決近300個GitHub問題。 這些社群貢獻內容從微幅清理核心程式碼，到GraphQL的重大增強功能。

2.4.0版中識別的所有已知問題已在此版本中修正。

{{bics}}

## 套用 `AC-3022.patch` 繼續以DHL為航運承運人

DHL已推出架構6.2版，並將於近期淘汰架構6.0版。 支援DHL整合的Adobe Commerce 2.4.4及舊版僅支援6.0版。部署這些版本的商家應適用 `AC-3022.patch` 以便繼續提供DHL作為航運公司。 請參閱 [應用補丁程式以繼續提供DHL作為運輸承運人](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 有關下載和安裝修補程式的資訊，請參閱知識庫文章。

## 可用安全補丁

商家現在無需套用完整每季版（例如2.4.0-p1）所提供的數百項功能修正和增強功能，即可安裝具時效性的安全性修正。 修補程式2.4.0.1（撰寫器套件2.4.0-p1）是一個安全性修補程式，可針對先前每季版2.4.0中所識別的弱點提供修正。套用至2.4.0版本的所有Hotfix都包含在此安全性修補程式中。 (A) *修補程式* 針對已發行版本提供修正，可解決特定問題或錯誤。)

有關安全補丁程式的一般資訊，請參見 [新安全性修補程式版本簡介](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). 有關下載和應用安全補丁程式（包括補丁程式2.3.5-p2）的說明，請參見 [快速啟動本地安裝](../../../installation/composer.md). 安全性修補程式僅包括安全性錯誤修正，而不包括完整修補程式中包含的其他安全性增強功能。

## 其他發行資訊

雖然這些功能的程式碼會與每季發行搭配，但其中幾個專案(例如B2B、Page Builder和Progressive Web Application(PWA)Studio)也會獨立發行。 這些專案的錯誤修正會記錄在每個專案的檔案中，提供個別專案的發行資訊。

## 重點

查看此版本中的下列重點。

### 大幅增強安全性

此版本包含超過15項安全性修正和平台安全性改善。 所有安全性修正都已支援至2.4.0-p1和2.3.6。

#### 超過15項安全性增強功能，可協助關閉遠端程式碼執行(RCE)和跨網站指令碼(XSS)漏洞

迄今未發生與這些問題相關的確認攻擊。 但是，某些漏洞可能會被利用來訪問客戶資訊或接管管理員會話。 這些問題大多要求攻擊者首先獲得管理員的訪問權限。 因此，我們會提醒您採取所有必要步驟來保護您的管理員，包括但不限於這些努力：IP允許清單， [雙因素驗證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)，使用VPN，使用唯一位置，而非 `/admin`以及良好的密碼衛生。 請參閱 [可用於Magento的安全更新](https://helpx.adobe.com/security/products/magento/apsb20-59.html) 以討論這些已修正的問題。

#### 其他安全性增強功能

此版本的安全性改善包括：

* **驗證碼** 以下產品區域已新增保護：

   * 下單店首頁、REST和GraphQL端點 <!-- MC-36067-->
   * 與付款相關的REST和GraphQL端點。<!-- MC-36064-->

   預設會停用這些額外頁面的驗證碼保護。 您可在管理員上啟用，其方式與CAPTCHA涵蓋的其他頁面相同。 此保護已作為反暴力力機制而添加，以保護商店免受梳理攻擊。 請參閱 [驗證碼](https://docs.magento.com/user-guide/stores/security-captcha.html).

* **支援SameSite的Cookie屬性**. 為了支援新Cookie分類系統的Google Chrome實作，處理Cookie的應用程式類別已更新，以支援 `SameSite` cookie屬性。 此屬性設定為 `Lax` 預設情況下，但可以顯式覆蓋。 <!-- MC-35389-->

* **增強安全掃描工具**. Adobe已與 [樂觀安全](https://sansec.io/)是防止數字盜取的領頭羊，將其包含8700多個威脅簽名的資料庫整合到安全掃描工具中。 此合作關係可讓商戶透過主動偵測惡意軟體和減少誤判，即時掌握其網站的安全狀態。 商戶可以通過訪問註冊工具 `https://account.magento.com/scanner`. 如需詳細資訊，請參閱 [使用增強的安全掃描工具保護您的店面](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool) 部落格貼文。

{{cve-notice}}

### 基礎架構改善

此版本包含核心品質的增強功能，可改善架構品質和這些功能領域：客戶帳戶、目錄、CMS、OMS、匯入/匯出、促銷和鎖定、購物車和結帳、B2B以及測試和預覽。

* **整個網站的分析工具與管理員整合**. 此 [工具](https://docs.magento.com/user-guide/reports/site-wide-analysis-tool.html) 通過24/7即時效能監控、報告和自助服務建議，為Adobe雲基礎架構安裝提供系統見解和工具。 商戶可以使用新的管理員 [角色資源](https://docs.magento.com/user-guide/system/permissions-role-resources.html) 以透過管理員安全地存取其「客戶詳細資料」頁面。 請參閱 [常見問題集](https://support.magento.com/hc/en-us/articles/360048646671) 以取得概述。 <!-- SWAT-807-->

### 效能改善

* **減少Redis與Magento之間的網路傳輸**. 外掛程式清單設定現在會在執行 `bin/magento di:compile` 命令。 此配置資訊根據範圍寫入生成的元資料資料夾。 以前，此資訊會儲存在快取中。 結果的效能改進包括減少網路快取大小和許多情況的執行時間。<!-- MC-31617-->

* **增強的消息隊列用戶效能**. 有三種新的配置設定支援減少消費者隊列CPU消耗。 這些選用參數可增強對使用者的控制並儲存伺服器資源。 請參閱 [配置消息隊列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) 的 `maxIdleTime`, `sleep`，和 `onlySpawnWhenMessageAvailable` 參數。

* **縮短執行時間** for `bin/magento` 命令。

### Adobe Stock整合

此版本包含Adobe Stock整合v2.1.0。

### 新媒體集

「管理員」現在預設會啟用「新媒體庫」。 商家現在可以在媒體庫中對影像執行下列動作：

* 大量刪除影像
* 識別商店前未使用的重複影像和影像，以最佳化媒體儲存
* 依照其使用的店面區域篩選影像，包括產品和類別內容及CMS區塊
* 使用影像中繼資料
   * 檢視上傳至媒體集之影像的中繼資料
   * 編輯影像中繼資料（標題、說明和關鍵字）
   * 依影像的中繼資料搜尋影像

### 頁面產生器

頁面產生器現在支援全螢幕模式，可讓您更輕鬆編輯內容，並在管理員中提供一致的體驗編輯內容。 請參閱 [工作區](https://docs.magento.com/user-guide/cms/page-builder-workspace.html). <!-- PB-543-->

### GraphQL

此版本新增GraphQL涵蓋下列功能：

* **產品評論**. 客戶和客人可以撰寫產品評論。 客戶可擷取其產品審核記錄。 請參閱 [建立產品審核](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) 和 [productReviewRatingsMetadata查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) 以獲取有關檢查基礎架構的資訊。<!-- MC-32349-->

* **禮品選項**. 所有客戶和客人都可以在訂單中添加禮品資訊。 在Adobe Commerce安裝程式中，您也可以將禮品包裝、禮品收據和印刷卡新增至訂單。 請參閱 [`setGiftOptionsOnCart` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) 和 [`updateCartItems` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html) <!-- MC-32345-->

* **獎勵積分**. 客戶可對購物車套用或移除獎勵點數。 他們也可以查看自己的獎勵點歷史。 請參閱 [`applyRewardPointsToCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/apply-reward-points.html) 和 [`removeRewardPointsFromCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-reward-points.html) 以討論如何管理購物車中的獎勵點。<!-- MC-23366-->

* **訂單歷史記錄**. 所有客戶都可以查看其訂單記錄的詳細資訊，包括發票、發運和退款。<!-- MC-20635-->

* **新增至購物車**. 此 [`addProductsToCart` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) 可讓您將任何類型的產品新增至使用中的購物車。 我們建議用這種突變代替單用途突變，例如 `addSimpleProductsToCart`. _由Yaroslav Rogoza在提取請求中提交的修正 [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)  <!-- MC-21513-->

* **儲存的支付方法**. 登入的客戶現在可以將付款詳細資料(包括Braintree信用卡和PayPal的Braintree)儲存在我的帳戶中。 <!-- MC-32348 35945 35946-->

* **支援Magento Open Source中的願望清單**.  您可以 [新增項目](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) 到 [更新項目](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) 在和 [移除項目](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) 從願望清單。

* **改善客戶帳戶管理**. 我們已新增 [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) 和 [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) 管理客戶賬戶的突變。 這些新的突變需要不同於 `createCustomer` 和 `updateCustomer` 突變。 若要變更客戶的電子郵件地址，請使用 [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) 變異。

* **支援Payflow Pro Vault**. 新增GraphQL Vault支援至 [Payflow Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) 付款方法。 _Oleh Usik在提取請求中提交的修正 [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* 更新GraphQL [`storeConfig` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) 加入新客戶組態設定。 _Oleh Usik在提取請求中提交的修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 新增 [`requestPasswordResetEmail` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html)，會針對提供的電子郵件地址觸發密碼重設電子郵件。 _Oleh Usik在提取請求中提交的修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **克拉娜·GraphQL**. 在中新增或更新有關Klarna GraphQL的主題 [克拉納的支付方法](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) 和 [`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

請參閱 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 以取得這些增強功能的詳細資訊。

### PWA Studio

PWA Studio8.0.0導入了新功能和增強：

* 更新適用於設計代號、印刷樣式、顏色、核心元件和頁面配置的Venia樣式指南 <!-- PWA-519 419-->

* 改善Venia迷你購物車體驗 <!-- PWA-236-->

* Venia店面上多個地區設定和本地化內容的初始支援 <!-- PWA-295-->

* 對Venia店面的MyAccount體驗進行多項改善 <!-- PWA-247-->

請參閱 [相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 以取得PWA Studio版本及其相容版本的清單。 如需增強功能和錯誤修正的詳細資訊，請參閱 [PWA Studio發行](https://github.com/magento/pwa-studio/releases).

### B2B

2.4.1版推出B2B v1.3.0。此版本包含對訂單核准、運送方法、購物車和管理員動作記錄的改善。

#### 訂單核准的改善

已增強B2B訂單核准，以改善可用性，並允許對採購訂單執行大量動作。
訂單核准和拒絕的改善項目包括：

* **「新建視圖規則」頁面，適用於沒有編輯權限的用戶**. B2B購買者現在可以在沒有編輯權限的情況下，在新的「檢視規則」頁面上檢視套用至其公司的規則。 <!-- BUNDLE-104 -->

* **「需要我的批准」頁簽上的計數警報表徵圖**. 「我的採購訂單」視圖中的「需要我的審批」頁簽現在會顯示一個計數器，指明待審批活動的數量。 <!-- BUNDLE-102 -->

* **批量訂單批准和拒絕**. B2B經理和公司管理員現在可以執行大量拒絕和核准採購訂單。 這些更改允許批准者在單個操作中批准或拒絕多個採購訂單。 <!-- BUNDLE-140 128 111 153 -->

* 商戶現在可以搜尋 **套用至** 和 **需要獲得** 「我的採購訂單」視圖的欄位，可以在建立規則期間選擇多個用戶角色。 <!-- BUNDLE-105 106-->

* 「規則設定」頁面上提供如何設定訂單核准規則的範例。 <!-- BUNDLE-103 -->

請參閱 [核准規則](https://docs.magento.com/user-guide/customers/account-dashboard-approval-rules.html)

#### B2B運送方法增強功能

B2B商戶現在可以控制提供給每家公司的運送方法。 商家可從管理員設定下列項目：<!-- BUNDLE-160 161 162 -->

* B2B公司帳戶的一組特定發運方法
* 對每個公司帳戶使用All或B2B特定發運方法
* 每個公司帳戶的B2B運送方法的特定清單

#### 購物車改良

* 商家現在可以讓使用者透過單一動作來清除其購物車的內容，並且可以在每個網站上獨立設定此功能。 <!-- BUNDLE-108 -->

* B2B購買者現在可以直接將個別項目或其購物車的整個內容新增至申請清單。 <!-- BUNDLE-145 144-->

#### 新管理功能

* B2B商戶可以代表客戶以「帳戶付款」作為付款方法，從管理員建立訂單。 <!-- BUNDLE-166 178-->
* 商家現在可以從客戶的詳細資訊頁面直接檢視與使用者相關聯的所有報價。 <!-- BUNDLE-139 -->
* 商家現在可以依公司篩選「客戶即時線上」格線。 <!-- BUNDLE-137 -->
* 管理員現在可以依銷售代表篩選管理員中的客戶。 <!-- BUNDLE-110 -->

請參閱 [B2B功能](https://docs.magento.com/user-guide/configuration/general/b2b-features.html).

#### 加強店面安全性

為了減少假帳或垃圾郵件帳戶的建立，商戶現在可以在店面的「新公司請求」表單上啟用Google reCAPTCHA。 請參閱 [reCAPTCHA](https://docs.magento.com/user-guide/configuration/security/google-recaptcha-storefront.html).<!-- BUNDLE-154 -->

#### 擴充管理動作記錄

「公司」模組中採取的管理動作現在會記錄在「管理動作記錄」中。 動作會從所有相關的公司模組記錄： `Company`, `NegotiableQuote`, `CompanyCredit`, `SharedCatalog`.
<!-- BUNDLE-180 181 182 183 -->

此版本也包含多項錯誤修正。 請參閱 [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### 功能測試框架

MFTF 3.1.0現已可用。 請參閱 [功能測試框架更改日誌](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### 供應商開發的擴展

請參閱下列文章，了解此版本的功能和變更更新：

* [Amazon Pay](https://docs.magento.com/user-guide/payment/amazon-pay.html)

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](https://docs.magento.com/user-guide/marketing/dotdigital/engagement-cloud.html)

* [克拉納](https://docs.magento.com/user-guide/payment/klarna.html)

* [頂點雲](https://docs.magento.com/user-guide/tax/vertex.html)

* [Yotpo產品評論](https://docs.magento.com/user-guide/marketing/yotpo-reviews-intro.html)

## 已修正問題

我們已修正2.4.1核心程式碼中的數百個問題。

### 安裝、升級、部署

<!-- MC-36113-->

* 使用依賴CLI命令中儲存模組API的協力廠商擴充功能進行安裝時不再失敗。 以前，應用程式會顯示此錯誤訊息： `The default website isn't defined. Set the website and try again`. 這是2.4.0的已知問題。

<!-- MC-33273-->

* `bin/magento setup:di:compile` 不再擲回致命錯誤。 以前，在您第一次運行此命令時，應用程式擲回錯誤，但第二次執行導致編譯成功。

<!-- MC-34429-->

* 在上宣告外掛程式時，升級不再失敗 `Magento\Framework\Encryption\Encryptor`.

<!-- MC-36231-->

* 當執行後未部署某些主題時，應用程式現在會顯示資訊性錯誤訊息 `bin/magento setup:static-content:deploy`. 以前，當部署成功完成，但並非部署了所有包時，應用程式未顯示錯誤。 當此命令在啟用並行處理的情況下執行且每個主題需要更多時間部署，然後需要指定的最大執行時間時，儘管主題未部署，但此命令仍可成功完成。

<!-- MC-35001-->

* 此 **使用預設值** Klarna支付複選框(**商店** > **設定** > **銷售** > **付款方法** > **克拉納**)現在會在網站範圍變更時如預期般加以檢查。

<!-- MC-17959 ENGCOM-7629-->

* 執行中 `/bin/magento config:show vendor_module/general/value` 現在傳回 `0` 或空白字串。 之前，它會傳回 `Configuration for path: "vendor_module/general/value" doesn't exist`. _Vadim Malesh在提取請求中提交的修正 [28549](https://github.com/magento/magento2/pull/28549)._ [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- MC-33788-->

* 升級不再導致Galera群集突然失敗。 以前，Galera群集在升級後立即重新索引後突然退出。 在升級期間，索引表被更改，引擎從 `MEMORY` to `InnoDB`. 此時，這些表的內容在Galera群集的節點之間變得不同步。 [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* 停用PageBuilder模組不再影響產品頁面的轉譯。 以前，當模組停用時，產品頁面上的自訂配置會消失，而應用程式會顯示空白頁面。

<!-- ENGCOM-7219-->

* 您現在可以使用 `bin/magento sampledata:deploy` 使用撰寫器安裝Adobe Commerce後，如預期部署範例資料。 之前，應用程式擲回此錯誤： `Git installations must deploy sample data from GitHub; see https://devdocs.magento.com/guides/v2.3/install-gde/install/sample-data-after-clone.html for more information`. _Andrii Beziazychnyi在提取請求中提交的修正 [27481](https://github.com/magento/magento2/pull/27481)_. [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* 店面效能已通過消除 `Datepicker` 元件。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27860](https://github.com/magento/magento2/pull/27860)_. [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* 執行中 `bin/magento setup:upgrade` 現在可如預期般完成。 以前，應用程式顯示用於快取的打印陣列內容。 _由Sathish Subramanian在提取請求中提交的修正 [27567](https://github.com/magento/magento2/pull/27567)_. [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all` 現在會部署店面上使用的所有語言，以及未設定語言參數時管理員使用者設定的所有語言。 (`en_US` 預設會一律部署。) _提取請求中由Anton Evers提交的修正 [28922](https://github.com/magento/magento2/pull/28922)_. [GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* 禁用「備份」功能時，應用程式不再顯示「備份」菜單。 _由Eden Duong在提取請求中提交的修正 [29222](https://github.com/magento/magento2/pull/29222)_. [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* 目錄影像輔助程式初始化現在使用產品模型，而非 `DataObject`. _提取請求中由jmonteros422提交的修正 [29435](https://github.com/magento/magento2/pull/29435)_. [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* 管理員使用者現在可以儲存空白 **客戶代號期限（小時）** 欄位(管理員 **商店**  >  **配置**  >  **服務**  >  **OAuth**  >  **存取權杖過期**)。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* 此 **為舊URL建立永久重新導向** 現在預設會停用類別的設定。 _Vadim Malesh在提取請求中提交的修正 [28752](https://github.com/magento/magento2/pull/28752)_. [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### AdminGWS

<!-- MC-36164-->

* 應用程式不再顯示 **新增屬性** 按鈕(**商店** > **屬性** 或 **添加屬性集** 按鈕(**商店** > **屬性** > **客戶**)時，登入的管理員缺少建立這些實體的適當權限。 之前，當沒有適當權限的網站管理員嘗試建立 **屬性集** 或 **客戶** 屬性。

<!-- MC-36230-->

* 當具有特定網站之限制角色的管理員嘗試從管理員建立子類別時，應用程式不會再擲回錯誤。

### Adobe Stock整合

<!-- ENGCOM-7776-->

* 清除篩選器後，Adobe Stock影像格線中的影像現在會正確對齊。 _Nazar Klovanych在提取請求中提交的修正 [28366](https://github.com/magento/magento2/pull/28366)_. [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824), [GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* 此 **用於** 「Adobe Stock圖庫影像詳細資訊」頁面的區段現在可精確識別影像是否與產品相關聯。 _Nazar Klovanych在提取請求中提交的修正 [28798](https://github.com/magento/magento2/pull/28798)_. [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute` 現在會刪除參數上未指定之關鍵字的連結，並在編輯影像詳細資料時刪除關鍵字標籤時插入新的連結。 _提取請求中由jmonteros422提交的修正 [29207](https://github.com/magento/magento2/pull/29207)_. [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* 此 `Login failed` 商戶點按時，應用程式顯示的訊息 **授權** 針對先前儲存的未授權Adobe Stock影像，不再包含HTML標籤。 _由Yolouise在提取請求中提交的修正 [29398](https://github.com/magento/magento2/pull/29398)_. [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* 按一下 **用於** 「影像詳細資訊」頁面的區段現在會顯示一個格線，顯示依影像篩選的所有實體。 資產篩選器也可正確設定和顯示。 之前，應用程式不會在 **套用的篩選器** 區段。 _Nazar Klovanych在提取請求中提交的修正 [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* 應用程式不再顯示 **用於** 區段（在未使用影像時）。 _Nazar Klovanych在提取請求中提交的修正 [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* 修正新增超過字元數上限的影像標籤時的顯示問題。 _Nazar Klovanych在提取請求中提交的修正 [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* 您現在可以使用影像詳細資料的資產篩選條件，如預期檢查資產 **用於** 區段。 _Nazar Klovanych在提取請求中提交的修正 [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* 不同實體所使用影像的相關資訊(例如 `page` 和 `category`)，已更正在影像詳細資料頁面中。 _Nazar Klovanych在提取請求中提交的修正 [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-7778-->

* 您現在可以使用 `UrlFilterApplier` 元件，在產品上套用篩選器，`cms_page`，和 `cms_block` 使用GETURL參數建立網格。 _Gabriel da Gama在提取請求中提交的修正 [28932](https://github.com/magento/magento2/pull/28932)_. [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-8019-->

* 按一下 **用於** 「媒體庫」中影像的區段現在會開啟依影像篩選的實體格線。 之前，影像標題不會顯示在格線的套用篩選器區段中。 _Nazar Klovanych在提取請求中提交的修正 [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* 當您連續在媒體庫中編輯多個影像時，應用程式現在會正確新增標籤。 _Nazar Klovanych在提取請求中提交的修正 [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* 現在，在商家刪除標籤並儲存影像詳細資訊後，應用程式會移除Adobe Stock影像的標籤。 之前，在重新整理頁面之前，不會刪除標籤。 _Honeymay Louiese Ignacio在提取請求中提交的修正 [29400](https://github.com/magento/magento2/pull/29400)_. [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon Pay

* Amazon Pay現在會在呈現付款選項之前檢查使用者是否已登入。

* 多因素驗證和放棄購物車的問題已解決。

* Amazon Pay現在會正確填入 `store name` 在電子郵件和其他顯示位置中。 若 **商店名稱** 「Amazon支付」設定中的欄位空白，擴充功能會擷取商店的預設名稱（即您在「管理員」中提供商店的名稱）。

* 已解決「拒絕」案例的本地化/翻譯問題。 顯示的文字不再一律以英文顯示。

### Analytics

<!-- MC-33314-->

* 擁有正確權限的管理員現在可以存取「進階報表」和「區段報表」。

<!-- MC-34352-->

* Adobe Commerce成功產生預先報告資料檔案，並如預期傳送至清單中含有分割資料庫的部署。 之前，應用程式不會產生或傳送 `quotes.csv` 檔案傳送至Inventory，因此Inventory未產生預期的報表。

### Braintree

* Braintree現在會在結帳頁面上套用促銷代碼時，將正確的金額傳送至PayPal。

* 當結帳頁面上啟用「條款與條件」時，Apple Pay現在可正常運作。

* 從管理員啟用Venmo時，在案頭裝置上結帳期間不再發生瀏覽器錯誤。

* 當購物者在 **名稱** 結帳工作流程的欄位。 以前，由於Braintree3DS API不支援非ASCII字元，身份驗證失敗。

* 使用PayPal下訂單時，應用程式現在會在結帳工作流程的運送區段中顯示正確的收件者名稱。

* 當購物者在結帳期間多次變更運送方法時，應用程式現在會如預期更新「訂單檢閱」頁面。

### 捆綁產品

<!-- MC-36281-->

* 當您嘗試在已安裝Inventory的部署中建立產品，但是 `Magento_InventoryBundleProduct` 模組已停用。

<!-- MC-34261-->

* 現在，應用程式可以正確計算包含捆綁產品的訂單的離線退款。

<!-- MC-24363-->

* 現在，當為簡單產品分配了層級價格時，迷你購物車會顯示捆綁產品的正確價格。 [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* 商家現在可以為捆綁產品建立貸項通知單，該通知單提供退款而不要求退貨。 之前，應用程式擲回錯誤。 _Dzung Nguyen在提取請求中提交的修正 [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* 當購物者在未選取必要選項的情況下新增套件產品至購物車時，應用程式不再顯示重複的驗證訊息。 _Dzung Nguyen在提取請求中提交的修正 [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 MC-29908-->

* GraphQL現在支援訂購選項類型的套件組合產品 `radio` 和 `dropdown` 多種選擇。 之前，應用程式會顯示有關的無效輸入訊息 `BundleItem.type: radio/dropdown`. _Michał Derlatka在提取請求中提交的修正 [29256](https://github.com/magento/magento2/pull/29256)_. [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### 快取

<!-- MC-36096-->

* 本機快取儲存現在會保留在 **商店** > **設定** > **一般** > **Web** > **預設Cookie設定**. 之前，Cookie的到期日會硬式編碼為一天，因此會與此設定不同步。 因此，歡迎訊息不會在預期的期間保留回訪的客戶資訊。

<!-- ENGCOM-7780-->

* 對頁面快取的呼叫數 `config` 已減少。 _Lukasz Bajsarowicz在提取請求中提交的修正 [28992](https://github.com/magento/magento2/pull/28992)_. [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* 清漆不再擲出 `Connection reset by peer` 按計畫重新索引大型目錄時出錯。 _由Matthew O&#39;Loughlin在提取請求中提交的修正 [26256](https://github.com/magento/magento2/pull/8815)_. [GitHub-26255](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* 在「管理員」中編輯產品時，不再清除不相關產品的完整頁面快取。 [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### 購物車和結帳

<!-- ENGCOM-7950-->

* 直接SQL查詢已由資料提供者取代，已改善結帳效能。 _Lukasz Bajsarowicz在提取請求中提交的修正 [29376](https://github.com/magento/magento2/pull/29376)_. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* 比較中的產品和最近比較的產品清單現在可如預期般運作。 以前，在展開比較清單時，應用程式不會顯示產品，即使區段指出清單包含產品亦然。

<!-- MC-35329-->

* 此 **刪除** 按鈕 **依SKU新增至購物車** 客戶的區段 **管理購物車** 選取多列時，頁面現在可正常運作。

<!-- MC-34999-->

* 當您嘗試按SKU訂購產品時，當輸入的位數符合有效SKU，但這些位數的大小寫不同時，應用程式不再擲回錯誤。 之前，當您在 **我的帳戶** > **按SKU訂購** 如果與有效的SKU不完全匹配，應用程式會擲回錯誤。

<!-- MC-25042-->

* 當客戶的運送地址位於「允許國家/地區」清單上所識別的國家/地區，且該清單僅包含該國家/地區時，現在預設會在結帳時選取客戶的運送地址。 之前，應用程式未選取預設地址，並顯示以下錯誤訊息： `Please specify a regionId in shipping address`.

<!-- MC-24043-->

* 商戶現在可以 **應用於發運金額** (在 **行銷** > **購物車價格規則** > **新增規則** when **整個購物車的固定金額折扣** 中所有規則的URL區段。 [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* 當購物者開始結帳後，接著導覽至店面首頁，嘗試取消設定永續性Cookie時，應用程式不再擲回例外狀況。 之前，當購物者點按 **不是你？** 連結時，應用程式擲回此例外狀況： `The shipping address is missing. Set the address and try again`. [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* 當客戶新增無存貨產品至購物車時，應用程式現在會顯示附加至購物車成功訊息。 之前已新增產品，但應用程式未顯示成功訊息。

<!-- MC-35989-->

* 結帳工作流程中，付款步驟所顯示的表單現在會如預期般包含自訂位址屬性。

<!-- MC-36060-->

* 此 **州/省/地區** 輸入方塊現在會如預期在啟用 **我的帳戶** > **通訊簿** > **添加新地址**.

<!-- ENGCOM-7746-->

* 現在，折扣按預期套用，當 **應用於發運金額** 啟用。 _由Andrii Kalinich提交的提取請求修正 [28839](https://github.com/magento/magento2/pull/28839)_. [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* 支援關閉迷你購物車的程式碼已重構，以移除 `closeSidebar` 函式。 已將適當的點按捆綁新增至 `[data-action="close"]` 元素。 _提取請求中由lumn提交的修正 [28906](https://github.com/magento/magento2/pull/28906)_. [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* 新 **顯示購物車頁面上的「清除購物車」按鈕** 配置設定提供顯示控制 **清除購物車** 按鈕。 此設定預設為停用。 _Pavlo Sydorenko在提取請求中提交的修正 [27917](https://github.com/magento/magento2/pull/27917)_. [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* 已將驗證新增至結帳工作流程中的電話欄位。 _Oleh Usik在提取請求中提交的修正 [27537](https://github.com/magento/magento2/pull/27537)_. [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* 購物車包含可下載的產品時，訪客結帳現在會如預期停用 **可共用** 和 **如果購物車包含可下載的項目，則停用訪客結帳** 設定已停用。 _拉尼·普里亞在提取請求中提交的修正 [23972](https://github.com/magento/magento2/pull/23972)_. [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* 購物者從客戶帳戶側欄新增產品至購物車時，應用程式顯示的成功訊息現在包含該購物者購物車的連結。 _Ajith在提取請求中提交的修正 [27977](https://github.com/magento/magento2/pull/27977)_. [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* 現在，應用程式預設會為結帳工作流程的首碼下拉式選項功能表選取空白值。 _Vadim Malesh在提取請求中提交的修正 [28238](https://github.com/magento/magento2/pull/28238)_. [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* 現在，當您從購物車中刪除多個項目時，應用程式所顯示的彈出式訊息可準確說明您選取要刪除的實體數目和類型。 _Nazar Klovanych在提取請求中提交的修正 [29490](https://github.com/magento/magento2/pull/29490)_. [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* 現在，當來賓用戶完成結帳時，應用程式會顯示客戶註冊表。

<!-- MC-35607-->

* 自訂客戶地址屬性欄位現在會如預期顯示在店面結帳工作流程中。

<!-- ENGCOM-7793-->

* 應用程式現在會在結帳期間擷取作用中報價的目前客戶群組。 以前，應用程式使用的客戶群組是產品首次新增至購物車時處於作用中狀態，如果該客戶群組在結帳前被刪除，應用程式會擲回錯誤。 _Konstantin在提取請求中提交的修復 [28902](https://github.com/magento/magento2/pull/28902)_. [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### 目錄

<!-- MC-31068-->

* 應用程式現在會在結帳前，從購物車中移除已停用的產品。 以前，當購物者新增產品至購物車時（結帳完成前已停用），應用程式會從購物車中移除已停用的產品，但產品仍保留在報價中，而購物者無法結帳。 [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* 該應用程式現在按預期對暢銷產品進行排序。 之前，產品計數和排序結果的分頁皆不正確。 [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* 購物者現在可以按一下比較產品側欄中的產品名稱，以開啟產品的詳細資訊頁面。 _由Eduard Chitoraga在提取請求中提交的修正 [27451](https://github.com/magento/magento2/pull/27451)_. [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* `children_count` 管理員刪除類別時，值現在會保持正數。 以前，當管理員刪除類別時， `children_count` 其餘類別為負數。 _Vitaliy Prokopov在提取請求中提交的修正 [28044](https://github.com/magento/magento2/pull/28044)_. [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* 應用程式現在會使用預設選項(**設定** > **Web** > **預設配置** > **預設產品配置**)，您已為 `page_layout` 屬性。 之前未套用您選取的預設值。

<!-- MC-34258-->

* 您現在可以成功對庫存產品庫存執行成批活動。 以前，當您嘗試對庫存產品庫存執行成批操作時，應用程式將顯示一個空白頁。 如果您以開發人員模式對應用程式執行此動作，應用程式會擲回此錯誤： `Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`

<!-- MC-32552-->

* 按一下「 」時顯示的記錄總數 **新增產品** 在「產品」索引標籤中，將產品新增至目錄類別時，不會再根據產品排序順序變更。

<!-- ENGCOM-7854 -->

* 此 `{products(filter: {sku: {eq: "some sku"}}) {…}` 查詢現在會傳回已轉換為預期貨幣的值。 以前， `price_tiers.final_price.value` 以基本貨幣顯示特價。 _Petkovski Marjan在提取請求中提交的修正 [28890](https://github.com/magento/magento2/pull/28890)_. [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### 目錄規則

<!-- MC-33487-->

* 當您儲存目錄規則時，應用程式不再擲回嚴重錯誤，且包含下列條件： `If ALL of these conditions are FALSE:, If ALL of these conditions are TRUE:, Attribute set is default`

### 清除

<!-- ENGCOM-7281-->

* 修正「管理員銷售訂單」網格複選框的未對齊問題。 _Tu Nguyen在提取請求中提交的修正 [27642](https://github.com/magento/magento2/pull/27642)_. [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* 更正銷售訂單地址保存處理程式中發送地址IDgetter中的拼寫錯誤。 _Konstantin在提取請求中提交的修復 [28810](https://github.com/magento/magento2/pull/28810)_. [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* 修正 `getRegionNameExpresion` 方法名稱 `getRegionNameExpression`. _Pierre Grimaud在提取請求中提交的修正 [28832](https://github.com/magento/magento2/pull/28832)_. [GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* 冗餘 `init` 方法已從 `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php` 和 `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php`. _Oleh Usik在提取請求中提交的修正 [28650](https://github.com/magento/magento2/pull/28650)_. [GitHub-29009](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* `localStorage` 多填 `base` to `frontend`. _Ihor Sviziev在提取請求中提交的修正 [28749](https://github.com/magento/magento2/pull/28749)_. [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* 更新Adobe Commerce標誌，並從README檔案中移除多餘的空格。 _拉斐爾·科雷亞·戈r̻梅斯提交的提取請求修正 [28891](https://github.com/magento/magento2/pull/28891)_. [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* 不必要的 `overflowed` 類別已從mini cart側欄widget中移除。 _提取請求中由lumn提交的修正 [28963](https://github.com/magento/magento2/pull/28963)_. [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* 已更正「發運」頁面中的錯誤CSS選取器。 _Tu Nguyen在提取請求中提交的修正 [28639](https://github.com/magento/magento2/pull/28639)_. [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* 此 `lib/internal/Magento/Framework/App/Request/Http.php` 已借由最佳化邏輯和移除冗餘變數指派，以及在函式內過度使用傳回來簡化檔案。 _由Chris Snedaker提交的提取請求修正 [28608](https://github.com/magento/magento2/pull/28608)_. [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* 此 `bin/magento module:status` 命令現在接受多個模組名稱作為參數。 _Chandru Rajendran在提取請求中提交的修正 [28250](https://github.com/magento/magento2/pull/28250)_. [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* 修正的類別說明錯誤 `\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable`. _Benjamin Rosenberger在提取請求中提交的修正 [29451](https://github.com/magento/magento2/pull/29451)_. [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* 此 `TierPriceManagement` 類別已重構，以移除多餘的程式碼。 _Lukasz Bajsarowicz在提取請求中提交的修正 [29202](https://github.com/magento/magento2/pull/29202)_. [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* `autoload.php` 已重構，以改善可讀性和傳回速度。 _Vitaliy Ryaboy在提取請求中提交的修正 [28923](https://github.com/magento/magento2/pull/28923)_. [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### CMS內容

<!-- MC-35971-->

* 所選預設儲存檢視的階層索引標籤現在會如預期顯示所選的上層頁面。

<!-- ENGCOM-7602-->

* 當新商店檢視包含的CMS頁面與不同商店檢視中的頁面具有相同的URL索引鍵時，應用程式在建立商店檢視期間不會再擲回錯誤。 _Vadim Malesh在提取請求中提交的修正 [28421](https://github.com/magento/magento2/pull/28421)_. [GitHub-28357](https://github.com/magento/magento2/issues/28357)

<!-- MC-35480-->

* 當商家建立的CMS頁面與「公司結構」頁面的URL相同時，應用程式現在會擲回錯誤。 之前，應用程式會顯示CMS頁面，而非「公司結構」頁面。

### 可配置產品

<!-- MC-33523-->

* 已修正「可設定產品編輯目前變異」清單的分頁問題。

<!-- MC-33406-->

* 每當購物者為可設定產品選取選項時，應用程式就不再更新「相關產品」價格方塊。 以前，每當購物者為可設定產品選項時，應用程式就會更新價格方塊。

<!-- MC-29882-->

* 應用程式現在會在「管理員建立訂單」頁面上顯示可配置產品的正確價格，並提供可自定義選項。 如預期，顯示的價格是子產品價格和自訂選項價格的總和。 過去，應用程式只會顯示自訂選項價格。 [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* 現在，當套用購物車價格規則時，訂單摘要會顯示正確的折扣金額。 以前，規則在計算運送折扣時無法正確捨入金額。

<!-- MC-33765-->

* 從具有限制範圍的管理員帳戶建立的管理員使用者帳戶現在可以如預期建立具有屬性的可設定產品。 之前，應用程式擲回此錯誤： `Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`.

<!-- ENGCOM-7787-->

* 當您使用POST時，應用程式不再擲回驗證錯誤 `/V1/products` 至可設定產品(使用 `int` 值0。 之前，應用程式擲回此錯誤： `Product with id "%1" does not contain required attribute "%2"."` _Vadim Malesh在提取請求中提交的修正 [29001](https://github.com/magento/magento2/pull/29001)_. [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* 不再將父產品的配置選項屬性分配給新可配置產品的 `size` 屬性。 _Abel Truong在提取請求中提交的修正 [27339](https://github.com/magento/magento2/pull/27339)_. [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### Cookie

<!-- ENGCOM-7156-->

* 應用程式現在最多會建立一個 `mage-translation-file-version` 和 `mage-translation-storage` 每個工作階段的cookie。 _Ihor Sviziev在提取請求中提交的修正 [27364](https://github.com/magento/magento2/pull/27364)_. [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### cron

<!-- MC-35884-->

* 消息隊列用戶配置已擴展，新參數有助於控制用戶並節省伺服器資源，並可能降低用戶隊列CPU消耗。 請參閱 [配置消息隊列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) 的 `maxIdleTime`, `sleep`，和 `onlySpawnWhenMessageAvailable` 參數。

<!-- ENGCOM-7863-->

* `cron` 運算式，例如  `3/10 * * * *` 現在已如預期般排程。 _提取請求中由Anton Evers提交的修正 [28930](https://github.com/magento/magento2/pull/28930)_. [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes` 不再一次載入所有過期的引號。 以前，應用程式因此錯誤而失敗，因為同時載入了所有過期的引號： `PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`,

### CSS

<!-- ENGCOM-7678-->

* 當 **關鍵CSS** 啟用。 _Tu Nguyen在提取請求中提交的修正 [28480](https://github.com/magento/magento2/pull/28480)_. [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* 伺服器端LESS編譯器現在會在您執行時如預期匯入所有遠端CSS檔案 `bin/magento setup:static-content:deploy -f`. 之前，應用程式未匯入遠端檔案並擲回錯誤。 [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### 自訂客戶屬性

<!-- MC-36387-->

* 修正密碼和 **職務** 欄位（在「客戶編輯帳戶資訊」頁面上）。

<!-- MC-33645-->

* 現在，當新客戶點按 **建立帳戶** 按鈕（位於「店面客戶註冊」頁面上）。 之前，應用程式並未建立客戶帳戶，當客戶按一下按鈕時會顯示錯誤。

<!-- MC-34024-->

* 當客戶未輸入任何資料時，結帳工作流程不再顯示自訂客戶位址屬性值。

### 客戶

<!-- MC-33679-->

* 管理員客戶地址中的地區名稱現在會如預期般翻譯。

<!-- MC-36226-->

* 此 **州/省** 欄位現在會如預期在「編輯位址」頁面填入(**我的帳戶** > **通訊簿**)。

<!-- MC-34655-->

* 當客戶點按 **提交** 在整個店面上多次按鈕，但已啟用不可見的reCAPTCHA。 之前，多次按一下此按鈕會導致類似以下的內部錯誤： `Internal error: Make sure you are using reCaptcha V3 api keys`.

<!-- MC-33522-->

* 現在，從管理員儲存已刪除的客戶只會產生錯誤訊息。 之前，應用程式會顯示空白頁面並產生包含此字串的報表： `"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`.

<!-- MC-33357-->

* 管理員嘗試儲存其帳戶剛被刪除之客戶的地址時，應用程式現在會如預期顯示錯誤訊息。 之前，應用程式會顯示空白訊息方塊。

<!-- MC-33150-->

* 已編輯結帳工作流程和通訊簿中地址欄位的標籤，以保持一致。

<!-- ENGCOM-7244 -->

* 如果前端標籤的值非空值，則現在會回復到儲存標籤。 之前，客戶屬性使用預設前端標籤。 _Toan Nguyen在提取請求中提交的修正 [27064](https://github.com/magento/magento2/pull/27064)_. [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* 此 `sortOrder`已更正佈局XML中的連結數。 之前，此順序會反轉並使用降序順序。 _Tu Nguyen在提取請求中提交的修正 [27340](https://github.com/magento/magento2/pull/27340)_. [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### 客戶區段

<!-- MC-33184-->

* 已重構大量作業，以非同步儲存和重新整理客戶區段，這已改善部署（包括許多客戶）時（超過3,000,000個）這些工作的效能。

<!-- MC-36224-->

* 在分割資料庫部署中，客戶區段條件現在可如預期運作。 之前，當您嘗試透過新增條件來編輯客戶區段時，應用程式擲回錯誤： `SQLSTATE[42S02]: Base table or view not found`.

### 目錄

<!-- MC-32271-->

* 「州/省」下拉式功能表的格式現在在整個管理員中都保持一致。

### dotdigital

* 當訂單包含目錄中已不存在的產品SKU時，訂單同步不會再失敗。

* 網頁分析資料中不再包含空白的產品類別。

* 網路行為追蹤現在適用於具有特定主題設定的商家。 新的後援選擇器可解決此問題。

* 使用cron執行客戶同步時，訂閱者狀態資料欄位不再包含空值。 （應用程式模擬可解決此問題。）

* 當網路數位帳戶在預設層級啟用，但主要網站已停用時，通訊簿對應現在可正常運作。

* 現在會為包含加號(「+」)的電子郵件地址產生抵用券（使用外部動態內容URL產生抵用券）。

* 當聯繫人 `last_subscribed_at` 值為null。

* 已解決影響舊版的升級錯誤（4.5.2起）。

* 修正了4.5.3中引入的回歸問題，在準備訂閱者匯出時，使用方法取得訂閱者狀態會受到影響。

* 同步訂閱者的總數（顯示在記錄檔和畫面上）現已正確計算。

### 可下載

<!-- MC-35026-->

* 「我的可下載產品」區域現在會依照預期顯示屬於分組產品一部分的已購買可下載產品連結。

<!-- MC-34262-->

* 按一下可下載產品的 **範例** 按鈕，即可如預期下載範例。 先前，當您按一下 **範例**，應用程式會顯示此錯誤： `The product that was requested doesn't exist. Verify the product and try again`.

<!-- ENGCOM-7757-->

* 購物者現在可以下載無存貨的可下載產品範例。 之前，當購物者嘗試下載範例時，應用程式會開啟新的分頁，但未顯示資訊訊息或開始下載程式。 _Vadim Malesh在提取請求中提交的修正 [28898](https://github.com/magento/magento2/pull/28898)_. [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* 改善購物者嘗試為可下載產品設定運送地址時，應用程式顯示的例外訊息。 _Michał Derlatka在提取請求中提交的修正 [28904](https://github.com/magento/magento2/pull/28904)_. [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* 產品的 `stock_item` 使用RESTPUT呼叫更新時，資料會更新，而可下載的產品連結和範例會如預期保留 `stock_item` 值。 之前，產品更新後，產品不再包含下載內容的連結。 _Vadim Malesh在提取請求中提交的修正 [28799](https://github.com/magento/magento2/pull/28799)_. [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* 當客戶為僅包含可下載產品的訂單設定運送地址時，應用程式現在會顯示更具資訊性的訊息。

### 動態區塊（前身為橫幅）

<!-- MC-33266-->

* 現在當您建立動態區塊並新增相關目錄價格規則時，表格標題會符合資料表格（如預期）。

### 電子郵件

<!-- MC-32789-->

* 如果客戶電子郵件在建立訂單後變更，應用程式現在會傳送訂單變更的電子郵件通知給正確的客戶電子郵件。

<!-- MC-36015-->

* 傳送給客戶的訂單更新電子郵件現在包含正確的訂單狀態。 以前，如果訂單狀態從 `processing` 至其他狀態時，訂單電子郵件未反映狀態變更。

<!-- MC-34107-->

* 在訪客結帳期間，應用程式不再顯示有關現有帳戶的誤導性訊息。 以前，當訪客導覽至結帳頁面，然後導覽回運送頁面時，應用程式會顯示此錯誤： `You already have an account with us. Sign in or continue as guest`.

<!-- MC-33905-->

* 自訂電子郵件範本現在會載入與原生預設電子郵件範本相同的元素。 以前會遺失某些元素，包括變數值。

<!-- MC-33700-->

* 您現在可以建立電子郵件範本，透過 `Content-Type: "text/plain"`. 之前，應用程式會忽略範本中指定的內容類型。 _由twoonesixdigital提交的修正（提取請求） [26474](https://github.com/magento/magento2/pull/26474)_. [GitHub-26471](https://github.com/magento/magento2/issues/26471)

<!-- ENGCOM-7576-->

* 已從電子郵件預覽範本中移除不必要的CSS。 _Tu Nguyen在提取請求中提交的修正 [27828](https://github.com/magento/magento2/pull/27828)_. [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* 電子郵件範本中重複頁尾已顯示的文字的文字已移除。 _Paweł Tylek在提取請求中提交的修正 [27356](https://github.com/magento/magento2/pull/27356)_. [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* 現在會從訂閱警報的商店傳送產品警報電子郵件。 之前，此電子郵件一律從預設商店傳送。 _Maciej Pawłowski在提取請求中提交的修正 [26534](https://github.com/magento/magento2/pull/26534)_. [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* 重複 `customer.name` 變數已從電子郵件範本中移除。 _Paweł Tylek在提取請求中提交的修正 [29054](https://github.com/magento/magento2/pull/29054)_. [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33232-->

* 傳送給指派給公司之銷售代表的通知電子郵件現在包含指派的公司標誌。 之前，通知電子郵件包含預設的LUMA標誌，而非上傳的公司標誌電子郵件。

### 框架

<!-- MC-35893-->

* 此 **傳送資料的時間** 管理員欄位 **商店** > **設定** >一般> **進階報表** 頁面現在已正確呈現。

<!-- MC-34153-->

* 當「訂單」清單涵蓋多個頁面時，購物者現在可以變更每頁顯示的訂單數量。 以前，當您導覽至訂單的最後一頁，並嘗試變更每頁顯示的訂單數時，應用程式會顯示此訊息： `You have placed no orders`. 這是2.4.0的已知問題。

<!-- MC-35020-->

* 現在實作2級快取時，您可以將產品新增至類別。

<!-- MC-29755-->

* `X-Magento-Tags` 標題不再超過HTTP規格允許的大小。 過去，包含許多產品的類別頁面會傳回 `X-Magento-Tag` 導致503錯誤的標題。

<!-- MC-34257-->

* `sales_order_shipment_track_save_commit_after` 現在會在您使用REST API建立裝運時如預期觸發。

<!-- MC-33898-->

* 應用程式現在會在 `di compile` 由於不存在依賴關係而失敗。 以前，顯示的消息未標識發生異常的類。

<!-- MC-32929-->

* 當Redis使用所有允許的記憶體時，應用程式不再擲回下列嚴重錯誤： `report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'`.

<!-- MC-18021-->

* 購物者現在可以在 `Persistent` 模組已停用。 [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### 一般修正

<!-- MC-36048-->

* 在管理員上排序產品(**商店** > **屬性** > **產品**)現在會顯示符合您搜尋條件的所有產品。 之前，應用程式不顯示記錄，而要對記錄進行排序，您必須導覽至搜尋結果的第一頁。

<!-- MC-36343-->

* 中不必要的引號和URL周圍的逸出 `tracking.phtml` 已移除。

<!-- MC-35998-->

* 此 `var/log/system.log` 現在，當使用者嘗試存取靜態目錄下的非現有資源檔案，並啟用SCD OnDemand和生產模式時，會顯示更精確的訊息。 應用程式現在會記錄404錯誤。 以前，應用程式記錄的訊息與在開發人員模式中發生錯誤時記錄的訊息相同。

<!-- ENGCOM-7286-->

* JavaScript縮制現在可正常運作。 縮制檔案解析器不再將變數洩漏至全域範圍。 以前， `ctx`, `origNameToUrl`，和 `baseUrl` 窗口下的變數被洩露。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27622](https://github.com/magento/magento2/pull/27622)_. [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* 當您調試阻止建立對象的錯誤時，應用程式現在會打印並記錄原始異常消息。 以前只記錄訊息。 _Marvin Hinz在提取請求中提交的修正 [26572](https://github.com/magento/magento2/pull/26572)_. [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* 提交資料庫變更後的回呼執行已得到改善。 以前，如果一個回呼失敗並出現例外狀況，則所有回呼都會失敗。 _Alok Patel在提取請求中提交的修正 [27134](https://github.com/magento/magento2/pull/27134)_. [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* 未定義相依性之模組的Mixin不再擲回此錯誤： `TypeError: Cannot read property 'map' of null`. _Mateusz Krzeszowiak在提取請求中提交的修正 [27690](https://github.com/magento/magento2/pull/27690)_. [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* 現在，只有在 `localStorage` 或 `sessionStorage` 無法使用。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27619](https://github.com/magento/magento2/pull/27619)_. [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* 當購物者從第二個或後續結果頁面變更每頁顯示的結果數時，多頁店面訂單清單現在會如預期般運作。 之前，當購物者變更顯示於 **我的帳戶** > **我的訂單** 清單： `You have placed no orders`. _Vadim Malesh在提取請求中提交的修正 [28417](https://github.com/magento/magento2/pull/28417)_. [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* 已棄用 `addWarning` 方法已取代為 `addWarningMessage` 方法。 _Kishorekumarkesavan在提取請求中提交的修正 [28264](https://github.com/magento/magento2/pull/28264)_. [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* 使用 `bin/magento` 命令行命令現在與要求和編碼標準一致。 _Lukasz Bajsarowicz在提取請求中提交的修正 [28351](https://github.com/magento/magento2/pull/28351)_. [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- MC-33744-->

* 如果將頁面指派給多個商店檢視，應用程式就不會再在網站階層中顯示多次CMS頁面。

<!-- ENGCOM-7511-->

* 使用儲存屬性 `backend_type = static` 不再移除 `frontend_class` 欄位。 _提取請求中由jiten-patel提交的修正 [27369](https://github.com/magento/magento2/pull/27369)_. [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* 不必要的程式碼和 `responsive.js` 已從主題載入的檔案中移除。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27617](https://github.com/magento/magento2/pull/27617)_. [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* 驗證已新增至 **符號數** 「管理驗證碼」設定頁面上的欄位。 _由Eden Duong在提取請求中提交的修正 [29199](https://github.com/magento/magento2/pull/29199)_. [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* RSS饋送現在可正確載入。 之前，摘要雖然在重新整理頁面時如預期般載入，但並未首次載入。 _Vadim Malesh在提取請求中提交的修正 [29455](https://github.com/magento/magento2/pull/29455)_. [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* 當購物者重新登入時，過期的永久性工作階段現在會如預期般續約。

<!-- MC-35230-->

* 密碼期限(如 **商店** > **設定** > **進階** > **管理** 現在很榮幸。 先前若您按一下 **忘記密碼？** 提示重置密碼時，可以繞過密碼重置。

<!-- MC-34369-->

* 抵用券代碼現在只會套用至指定的產品。 之前，應用程式會將抵用券代碼套用至購物車中的所有產品。 [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* 存貨或價格更新發生時，購物車到期設定不再重新設定。 以前，當購物車設定為在24小時後到期，且發生庫存更新或價格更新時，索引器會填入 `updated_at table`，會重新設定到期時間。

<!-- MC-33313-->

* 當管理員將具有作用中購物車的客戶指派給客戶群組時，應用程式不再擲回致命錯誤。

<!-- ENGCOM-7834 -->

* 從 **開發人員工具**  >  **網路**  執行Chrome瀏覽器時，產品頁面上的不再初始化 `toolbar.js` 兩次。 _Paweł Tylek在提取請求中提交的修正 [28838](https://github.com/magento/magento2/pull/28838)_. [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* 應用程式現在會將管理員使用者的ACL角色ID新增至產品類別樹狀結構快取ID。 這會限制範圍有限的管理員可如預期看到的類別樹。 _Quangdo-aligent在提取請求中提交的修正 [27429](https://github.com/magento/magento2/pull/27429)_. [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### 禮品卡

<!-- MC-36118-->

* 禮品卡帳戶現在可如預期擷取訂單編號。 之前， **更多資訊** 「歷史記錄」頁簽中的欄位未顯示訂單ID。

<!-- MC-34519-->

* 使用逗號作為小數分隔符號，現在可如預期運作。 以前，逗號分隔符號會忽略小數值。

<!-- MC-34469-->

* 禮品卡現在可如預期顯示在迷你購物車中。 以前，應用程式呈現的HTML對象為文本。

<!-- MC-33851-->

* 貸項通知單現在正確反映涉及折扣產品、通過禮品卡和商店信用組合支付的訂單的總額。

### Google Tag Manager

<!-- MC-33729-->

* 當 **Cookie限制模式** 設定和Google標籤管理。

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* 購物者可在結帳時選取禮品訊息和包裝選項。 GraphQL現在包含不同購物車項目類型的禮品訊息選項。 請參閱 [`setGiftOptionsOnCart` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) 和 [`updateCartItems` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html). _Oleh Usik在提取請求中提交的修正 [28519](https://github.com/magento/magento2/pull/28105), [27956](https://github.com/magento/magento2/pull/27956), [28072](https://github.com/magento/magento2/pull/28072), [28072](https://github.com/magento/magento2/pull/28072)、和246（位於私人存放庫合作夥伴 — magento2ee）_. [GitHub-253](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* 客戶和客人可以撰寫產品評論。 客戶也可以擷取其產品審核記錄。 請參閱 [建立產品審核](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) 和 [productReviewRatingsMetadata查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) 以獲取有關檢查基礎架構的資訊。 _由Eduard Chitoraga在提取請求中提交的修正 [27882](https://github.com/magento/magento2/pull/27882)_. [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7800 7841-->

* 客戶可對購物車套用或移除獎勵點數。 他們也可以查看自己的獎勵點歷史。 請參閱 [`applyRewardPointsToCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/apply-reward-points.html) 和 [`removeRewardPointsFromCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-reward-points.html) 以討論如何管理購物車中的獎勵點。 _由Petkovski Marjan在提取請求中提交的修正 — 私人回購合作夥伴 — magento2ee中的285，以及提取請求中的Dmitriy Gallyamov（284和281），在私人回購合作夥伴 — magento2ee中_. [GitHub-28835](https://github.com/magento/magento2/issues/28835), [GitHub-28833](https://github.com/magento/magento2/issues/28833)

<!-- ENGCOM-7968 -->

* 此 [`addProductsToCart` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) 可讓您將任何類型的產品新增至使用中的購物車。 我們建議用這種突變代替單用途突變，例如 `addSimpleProductsToCart`. _由Yaroslav Rogoza在提取請求中提交的修正 [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- ENGCOM-7801 7816-->

* 相關產品的GraphQL查詢現在會傳回從target規則建立之相關產品的值。 以前，只有從產品設定新增相關產品時，相關產品（向上銷售和交叉銷售）的查詢才會傳回值。 _由Ulzii在私人存放庫合作夥伴 — magento2ee提取請求288中提交的修正_. [GitHub-28566](https://github.com/magento/magento2/issues/28566)

<!-- MC-34187-->

* 新 `availableStores` 查詢會針對相同網站下可用的多個存放區（根據目前存放區）傳回設定屬性清單。 它不會公開網站清單。 請參閱 [`availableStores` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/available-stores.html). _Dmitriy Gallyamov在提取請求中提交的修正 [28794](https://github.com/magento/magento2/pull/28794)_. [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* GraphQL現在只使用授權Token來擷取使用者類型及其ID。 之前，GraphQL會使用作用中客戶的Cookie，在授權Token空白時擷取此資訊。 _由Alexander Taranovsky提交的提取請求修正 [27373](https://github.com/magento/magento2/pull/27373)_. [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* 我們已新增 [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) 和 [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) 管理客戶賬戶的突變。 這些新的突變需要不同於 `createCustomer` 和 `updateCustomer` 突變。 若要變更客戶的電子郵件地址，請使用 [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) 變異。 _Michał Derlatka在提取請求中提交的修正 [28888](https://github.com/magento/magento2/pull/28888)_. [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* `updateCustomer` 不再允許您設定無效 `INT` 值 `gender` 引數。 _由Alexander Taranovsky提交的提取請求修正 [28487](https://github.com/magento/magento2/pull/28487)_. [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* 您可以使用 `subscribeEmailToNewsletter` 使客戶訂閱電子報的變異。 請參閱 [`subscribeEmailToNewsletter` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/subscribe-email-to-newsletter.html). _由Alexander Taranovsky提交的提取請求修正 [27586](https://github.com/magento/magento2/pull/27586)_. [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* 移除 `setShippingMethodsOnCart` 變異解析器。 _由Alexander Taranovsky提交的提取請求修正 [27349](https://github.com/magento/magento2/pull/27349)_. [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* 新增 `Please provide Email of sender` 與 `sendEmailToFriend` 變異。 _由Alexander Taranovsky提交的提取請求修正 [28034](https://github.com/magento/magento2/pull/28034)_. [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* 此 `products` 查詢現在會如預期傳回預設商店檢視的產品屬性選項標籤。 以前，此查詢會傳回為管理員設定的產品屬性選項標籤。 _Dmitriy Gallyamov在提取請求中提交的修正 [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* 自訂屬性匯總現在會傳回商店專屬的選項值。 _Dmitriy Gallyamov在提取請求中提交的修正 [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* 產品匯總中傳回的價格區間現在只能是數值（不允許使用萬用字元）。 _Dmitriy Gallyamov在提取請求中提交的修正 [28745](https://github.com/magento/magento2/pull/28745)_. [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* 此 `categoryList` 使用片段時，查詢現在會傳回正確的回應。 _Ulzii在提取請求中提交的修正 [28710](https://github.com/magento/magento2/pull/28710)_. [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* GraphQL產品搜尋現在會考量已設定的類別權限。 之前，產品搜尋會忽略 **啟用** 設定(**商店**  >  **設定**  >  **目錄**  >  **目錄** > **類別權限**)。 _Petkovski Marjan在提取請求中提交的修正 [28757](https://github.com/magento/magento2/pull/28757) 和在私人存放庫提取請求271`partners-magento2ee`_. [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* 您現在可以使用 `addSimpleProductToCart` 購物車中的其他物品無存貨時。 以前，應用程式傳回此錯誤： `Some of the products are out of stock`. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* 預設GraphQL `Category` 方法現在會依預期的類別位置排序。 _Derrik Nyomo在提取請求中提交的修正 [29301](https://github.com/magento/magento2/pull/29301)_. [GitHub-104](https://github.com/magento/catalog-storefront/issues/104)

* 新增對Magento Open Source中願望清單的支援。 您可以 [新增項目](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) 到 [更新項目](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) 在和 [移除項目](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) 從願望清單。 _由Eduard Chitoraga在提取請求中提交的修正 [28205](https://github.com/magento/magento2/pull/28205) 及264，位於私人回購合作夥伴 — magento2ee_. [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* 此 [`addProductsToCart` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) 可讓您將任何類型的產品新增至使用中的購物車。 我們建議用這種突變代替單用途突變，例如 `addSimpleProductsToCart`. _由Yaroslav Rogoza在提取請求中提交的修正 [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)

* 新增GraphQL Vault支援至 [Payflow Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) 付款方法。 _Oleh Usik在提取請求中提交的修正 [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* 更新GraphQL [`storeConfig` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) 加入新客戶組態設定。 _Oleh Usik在提取請求中提交的修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 新增 [`resetPassword` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html). _Oleh Usik在提取請求中提交的修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 新增 [`requestPasswordResetEmail` 變異](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html)，會針對提供的電子郵件地址觸發密碼重設電子郵件。 _Oleh Usik在提取請求中提交的修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 在 [克拉納的支付方法](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) 和[`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

### 影像

<!-- ENGCOM-7691-->

* 改善縮圖影像的HTML標籤。 _Tu Nguyen在提取請求中提交的修正 [28642](https://github.com/magento/magento2/pull/28642)_. [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### 匯入/匯出

<!-- MC-35479-->

* 此 `error_report.csv` 檔案現在會下載內容，並可在內使用 `var/import_history/` 目錄。 以前，匯入後不會產生此檔案。

<!-- ENGCOM-7616-->

* 使用CSV檔案匯入產品現在會產生 `error_report.csv` 檔案。 之前，應用程式會產生檔案，但在匯入完成後將其移除。 _Vadim Malesh在提取請求中提交的修正 [28460](https://github.com/magento/magento2/pull/28460)_. [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* 刪除代碼庫中的冗餘類導入。 _Oleh Usik在提取請求中提交的修正 [28696](https://github.com/magento/magento2/pull/28696)_. [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* 現在，應用程式已成功導入包含未定義地區的國家/地區的地區的客戶地址。 之前，應用程式擲回此錯誤： `Please enter a valid region`.

<!-- MC-33277-->

* 現在，當商家在計畫新導出時選擇實體類型時，應用程式將載入正確的實體屬性集。

<!-- MC-32956-->

* 產品在 `catalog_category_product` 當管理員在「管理員」中建立產品並將其指派給類別時，表格現在會如預期更新。 過去，新產品的位置一律會獲派0值。

<!-- MC-34939-->

* 客戶資料現在已成功從管理員匯出，而匯出資料格線會如預期顯示客戶資料。 以前，在導出過程中發生與記憶體分配相關的錯誤。

<!-- MC-34657-->

* 匯入的CSV檔案現在會如預期擷取相關產品資訊。 以前，在首次匯入CSV檔案時，無法一致地上傳相關產品資訊。

<!-- MC-37424-->

* 移除中未使用的建構參數 `AdvancedPricing.php`. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### 索引

<!-- ENGCOM-7073-->

* `Magento_CacheInvalidate` 現在，在執行 `PURGE`. `sendPurgeRequest` 已重構以處理標籤陣列，而不要求呼叫者使用 `implode()`. _由Matthew O&#39;Loughlin在提取請求中提交的修正 [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* 共用索引器現在會顯示 **有效** 你跑完 `bin/magento indexer:status` 重新索引之後。 以前，共用索引器有 **無效** 完整重新索引後的狀態。

### 基礎設施

<!-- MC-37243-->

* 在執行PHP 7.4.9的部署上載入目錄和產品頁面的問題不再發生。 之前，當您嘗試載入目錄和產品頁面時，應用程式會擲回此錯誤： `There has been an error processing your request. Exception printing is disabled by default for security reasons`. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* 現在，在生產模式中呈現版面時發生的所有例外都會記錄在例外記錄檔中(`var/report`)。 以前，應用程式會將這些訊息記錄在系統記錄中，作為重大問題。

<!-- ENGCOM-7154-->

* 規則運算式現在可針對大型頁面正常運作，因為 `ipcre.backtrack_limi`t和 `pcre.recursion_limit` 約1000000。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27270](https://github.com/magento/magento2/pull/27270)_. [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* 攔截器的生成已得到改進。 `} else {` 從攔截器中刪除了語句， `array_map` 已更換 `foreach`. _Lukasz Bajsarowicz在提取請求中提交的修正 [27902](https://github.com/magento/magento2/pull/27902)_. [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* 陣列建立現在在整個類中都保持一致(`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`)。 _內森·德·格拉夫在提取請求中提交的修正 [28515](https://github.com/magento/magento2/pull/28515)_. [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* 外掛程式已移轉出架構，以遵循在Framework命名空間中禁止外掛程式的最佳實務。 _Lukasz Bajsarowicz在提取請求中提交的修正 [27965](https://github.com/magento/magento2/pull/27965)_. [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7713-->

* 應用程式不再擲回 `Undefined class constant` 生成偵聽器時出錯。 _Vova Yatsyuk在提取請求中提交的修正 [28797](https://github.com/magento/magento2/pull/28797)_. [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* 當您使用已使用的名稱儲存整合時，當應用程式擲回整合例外狀況時，表單資料現在會持續存在。 _提取請求中由Aditya Yadav提交的修正 [26660](https://github.com/magento/magento2/pull/26660)_. [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* 應用程式不再截斷 `X-Forwarded-For` 標題至32個字元。 _Ihor Sviziev在提取請求中提交的修正 [27221](https://github.com/magento/magento2/pull/27221)_. [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* 使用自訂管理員網域時，用來檢查重新導向是否為內部的邏輯，現在可在管理員中正常運作。 之前，此邏輯的問題會導致許多管理員重新導向至預設商店的首頁。 _Vadim Malesh在提取請求中提交的修正 [29066](https://github.com/magento/magento2/pull/29066)_. [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* 問題 `styles-old.less` 檔案已刪除，而linting不再識別錯誤。 _Tu Nguyen在提取請求中提交的修正 [28895](https://github.com/magento/magento2/pull/28895)_. [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php` 已重構。 _Vitaliy Ryaboy在提取請求中提交的修正 [28975](https://github.com/magento/magento2/pull/28975)_. [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* `ResourceConnection.php` 已重構以改善類別可讀性。 _Lukasz Bajsarowicz在提取請求中提交的修正 [29341](https://github.com/magento/magento2/pull/29341)_. [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* 內建Web伺服器的自述檔案已更新，以包含所有Elasticsearch參數。 _Yevheni Dumskyi在提取請求中提交的修正 [29300](https://github.com/magento/magento2/pull/29300)_. [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* 此 `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave` 外掛程式現在會如預期傳回值。 之前，此外掛程式不會傳回值，因此儲存商店檢視會導致錯誤。 _Pieter Hoste在提取請求中提交的修正 [29035](https://github.com/magento/magento2/pull/29035)_. [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* 已針對的魔術方法新增下列支援 `DataObject`:

   * 支援新擴充功能 `get/set/has/uns` 魔術方法(與用法 `__call`)
   * 支援SessionManager，可將所有調用轉發到DataObject容器
   * 擴展測試覆蓋
   * 更新篩選錯誤檢查的測試
   * 將PHPStan檢查級別從0提高到1。 _Oleksandr Kravchuk在提取請求中提交的修正 [27905](https://github.com/magento/magento2/pull/27905)_. [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface` 現在可以超過字串。 限制 `magentoConfigFixture` 「僅字串」是先前提取請求的意外結果，已還原。 _Kristof, Fooman提交的提取請求修正 [29305](https://github.com/magento/magento2/pull/29305)_. [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* 此 `convertConfigTimeToUtc` 方法不再因將錯誤參數傳送至 `Phrase` 建構子。 _Kos Rafał在提取請求中提交的修正 [29483](https://github.com/magento/magento2/pull/29483)_. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* 價格篩選器現在可如預期般在格線資料上運作，當 `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition` 和 `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()` 返回包含索引的陣列 `from` 或 `to` 字串資料。 之前，應用程式擲回此錯誤： `Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`. _Nikita Sarychev在提取請求中提交的修正 [29214](https://github.com/magento/magento2/pull/29214)_. [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* 新增擴充點以支援將HTML新增至類別頁面。 這會更正先前提取請求所造成的錯誤。 _Girchak在提取請求中提交的修正 [29291](https://github.com/magento/magento2/pull/29291)_. [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### 庫存

<!-- ENGCOM-7979-->

* 已移除不必要的程式碼註解 `app/code/Magento/CatalogInventory/Model/StockState.php`. _Vitaliy Prokopov在提取請求中提交的修正 [27758](https://github.com/magento/magento2/pull/27758)_. [GitHub-26702](https://github.com/magento/magento2/issues/26702)

### 分層導覽

<!-- MC-25043-->

* 分層導覽側欄現在會顯示具有兩個選項的布林屬性(**是**/**no**)和相符的產品計數。 之前，分層導覽不會傳回 **no** 選項，用於部署中的布林屬性(使用Elasticsearch)。

<!-- ENGCOM-7493-->

* 色票分層導覽篩選器現在與整個Adobe Commerce使用的標準篩選器一致。 _Bartłomiej Szubert在提取請求中提交的修正 [28015](https://github.com/magento/magento2/pull/28015)_. [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### 記錄

<!-- ENGCOM-7692-->

* 現在，只有部署處於開發人員模式時，才會記錄所有損壞的參考錯誤。 之前，生產模式下的部署也會記錄一個錯誤，這會導致錯誤記錄膨脹。 _Bartłomiej Szubert在提取請求中提交的修正 [28735](https://github.com/magento/magento2/pull/28735)_. [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### 媒體集

<!-- ENGCOM-8014-->

* 媒體集設定UI(管理員 **商店**  >  **設定**  >   **進階**  >  **系統**)已重新整理。 _提取請求中由Shankar Konar提交的修正 [29433](https://github.com/magento/magento2/pull/29433)_. [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* 已新增測試以涵蓋 **用於** 媒體集中影像的連結。 _Nazar Klovanych在提取請求中提交的修正 [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1963](https://github.com/magento/adobe-stock-integration/issues/1693)

<!-- ENGCOM-8006-->

* 當商家嘗試在媒體庫停用時儲存產品及其相關影像時，應用程式不再擲回例外狀況。 _Nazar Klovanych在提取請求中提交的修正 [29492](https://github.com/magento/magento2/pull/29492)_. [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

### MFTF

<!-- ENGCOM-7963 -->

* 此 `AdminSubmitAdvancedInventoryFormActionGroup`, `AdminClickOnAdvancedInventoryLinkActionGroup`，和  `AdminSetStockStatusConfigActionGroup` 動作群組現在會根據最佳實務在測試中使用。 _Oleh USIA在提取請求中提交的修正 [29386](https://github.com/magento/magento2/pull/29386)_. [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup` 現在可在產品格線中用於搜尋。 _Oleh Usik在提取請求中提交的修正 [29385](https://github.com/magento/magento2/pull/29385)_. [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup` 現在可用來點按 **完成** 在「搜尋類別」快顯視窗中。 _Oleh Usik在提取請求中提交的修正 [28989](https://github.com/magento/magento2/pull/28989)_. [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup` 現在可用來取代儲存前客戶登入所使用的一系列動作。 _由Sathish Subramanian在提取請求中提交的修正 [28113](https://github.com/magento/magento2/pull/28113)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* `AdminUpdateCustomURLRewritesPermanentTest` 已重構以符合MFTF最佳實務。 _Kate Kyzyma在提取請求中提交的修正 [28361](https://github.com/magento/magento2/pull/28361)_. [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* 已更改測試名稱以符合MFTF慣例。 _提取請求中由Evgeny Levinsky提交的修正 [27839](https://github.com/magento/magento2/pull/27839)_. [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### 新動作群組

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup` _Oleh Usik在提取請求中提交的修正 [29472](https://github.com/magento/magento2/pull/29472)_. [GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup` _Oleh Usik在提取請求中提交的修正 [29142](https://github.com/magento/magento2/pull/29142)_. [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup` _Oleh Usik在提取請求中提交的修正 [28993](https://github.com/magento/magento2/pull/28993)_. [GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _Oleh Usik在提取請求中提交的修正 [29000](https://github.com/magento/magento2/pull/29000)_. [GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup` 和 `AdminProductFormCategoryNotExistInCategoryListActionGroup` _提取請求中由Alexander Steshuk提交的修正 [28287](https://github.com/magento/magento2/pull/28287)_. [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _Oleh Usik在提取請求中提交的修正 [29133](https://github.com/magento/magento2/pull/29133)_. [GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _Oleh Usik在提取請求中提交的修正 [29007](https://github.com/magento/magento2/pull/29007)_. [GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup` _Oleh Usik在提取請求中提交的修正 [29134](https://github.com/magento/magento2/pull/29134)_. [GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### 新測試

<!-- ENGCOM-7600 -->

* 已新增以管理員使用者身分刪除CMS頁面的測試。 _提取請求中由Dmitry Tsymbal提交的修正 [28112](https://github.com/magento/magento2/pull/28112)_. [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* 新增 `StorefrontShareCustomerWishlistActionGroup` 使用無效的電子郵件地址測試客戶願望清單共用。 願望清單共用的現有測試(`StorefrontShareWishlistEntityTest`)已重構。 `StorefrontCustomerShareWishlistActionGroup` 已過時。

<!-- ENGCOM-7682 -->

* 新增測試以檢查 **僅X左臨界值** 設定。 _Oleh Usik在提取請求中提交的修正 [27549](https://github.com/magento/magento2/pull/27549)_. [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### 電子報

<!-- MC-34714-->

* 使用匯出電子報訂閱者清單 `Excel XML` 選項現在可如預期匯出所有列。 以前，匯出的資料只包含頁面分頁值，不包含所有列。

<!-- ENGCOM-7522-->

* 電子報訂閱電子郵件現在使用與其他電子報相關電子郵件相同的HTML標籤。 _Paweł Tylek在提取請求中提交的修正 [27357](https://github.com/magento/magento2/pull/27357)_. [GitHub-28166](https://github.com/magento/magento2/issues/28166)

<!-- ENGCOM-7788-->

* 新增測試，以刪除電子報訂閱者作為管理員使用者。 _提取請求中由Dmitry Tsymbal提交的修正 [28972](https://github.com/magento/magento2/pull/28972)_. [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* 已針對設定陳述式中不允許的選項，新增快訊訂閱的測試。 此測試取代已棄用 `VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest` 和 `StorefrontCreateNewSubscriberActionGroup`. _提取請求中由Dmitry Tsymbal提交的修正 [28872](https://github.com/magento/magento2/pull/28872)_. [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### 訂購

<!-- ENGCOM-7858-->

* 此 `GetAssetIdByContentFieldInterface` 及其實施 `MediaContent` 模組現在允許Adobe Stock整合擴充 `MediaGallery` 篩選功能。 _Gabriel da Gama在提取請求中提交的修正 [29058](https://github.com/magento/magento2/pull/29058)_. [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* 此 `CustomerAddressI` 新建立客戶的值現在會以引號驗證。 _由Andrii Kalinich提交的提取請求修正 [29139](https://github.com/magento/magento2/pull/29139)_. [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* 總計為零的貸項通知單的訂單狀態現在為 `Closed`. 以前，應用程式將其訂單狀態報告為 `Complete`. _由Andrii Kalinich提交的提取請求修正 [29023](https://github.com/magento/magento2/pull/29023)_. [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### 頁面產生器

<!-- ENGCOM-7918-->

* 此 `description` 和 `short_description` 已重新排序產品屬性，以更妥善地因應頁面產生器內容測試的計畫變更。 _由Matt Walters在提取請求中提交的修正 [29238](https://github.com/magento/magento2/pull/29238)_. [GitHub-543](https://github.com/magento/magento2-page-builder/issues/543)

### 付款方法

<!-- MC-34363-->

* 應用程式現在會顯示一條消息，提示您在按一下「 **提交** （在未輸入有效付款資訊的情況下）。 以前，當付款輸入欄位無效且頁面變為非作用中時，Braintree卡驗證器不會擲回錯誤。

<!-- MC-33494-->

* 您現在可以針對帳戶有已儲存信用卡(Braintree)的客戶，從管理員建立訂單，變更該訂單的運送方法。 以前，當您選擇不同的發運方法時，不會選擇儲存的卡，而應用程式不會下訂單。

#### PayPal

<!-- MC-33879-->

* 現在，結帳工作流程的「訂單複查」頁會通過Braintree訂單顯示PayPal的正確發運金額，在結帳期間已更改了發運方法。 以前，當客戶在結帳工作流的「PayPal訂單複查」頁上更改了發運方法時，應用程式不會使用正確的方法更新訂單合計。

<!-- MC-34152-->

* 商家現在可以成功取消使用PayPal授權的訂單。 之前，應用程式並未取消訂單，並顯示此錯誤： `Declined: 10601-Authorization has expired`.

<!-- MC-33330-->

* 在您取消訂單時，應用程式將不再讓您的購物車空出，方法是先完成另一個訂單後關閉PayPal付款彈出窗口。

### 效能

* 有三種新的配置設定支援減少消費者隊列CPU消耗。 這些選用參數可增強對使用者的控制並儲存伺服器資源。 請參閱 [配置消息隊列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) 的 `maxIdleTime`, `sleep`，和 `onlySpawnWhenMessageAvailable` 參數。

<!-- MC-31617-->

* 外掛程式清單設定現在會在執行 `di:compile` 命令。 此配置資訊根據範圍寫入生成的元資料資料夾。 以前，此資訊會儲存在快取中。 產生的效能改善包括：

   * 網路快取大小已減小
   * 許多案例的執行時間已改善。

<!-- ENGCOM-7290-->

* 應用程式現在會隨選載入適當的滑桿介面工具集，這已改善頁面載入。 觸控滑桿介面工具集自訂功能已移至個別檔案，因此只能在相容的裝置上載入。 現在，只有當頁面上實際使用範圍捆綁時，才會載入適當的滑桿介面工具集類型。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27616](https://github.com/magento/magento2/pull/27616)_. [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* 已改善多個同時訂購的結帳效能。

<!-- MC-25062-->

* 當導入進程執行批量插入，而重新索引進程同時執行選定項中的大型插入時，不再發生死鎖。 之前，應用程式會顯示此錯誤： `PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### 退貨授權(RMA)

<!-- MC-35984-->

* 在您為退貨授權(RMA)建立發運標籤後，「退貨」頁現在可以正常工作。 以前，在為RMA建立發運標籤後，商家無法與「退貨」頁面上的任何頁面元素交互。 這是2.4.0的已知問題，且 `MC-35984-2.4.0-CE-composer.patch` 已針對2.4.0解決此問題。

<!-- MC-35826-->

* 當具有限制權限的管理員嘗試為已不在指派的網站範圍中的產品建立傳回時，應用程式現在會顯示資訊性錯誤訊息或所有可用的產品。 之前，應用程式會顯示空白頁面。

### 評論

<!-- MC-33405-->

* 唯一的鍵 `entity_pk_value-entity_type-store_id` 已新增至 `review_entity_summary` 表格，可防止為相同產品ID(`entity_pk_value`)。 以前，由於缺少唯一金鑰，導致相同產品ID和SQL錯誤出現重複列。

### 銷售

<!-- MC-35675-->

* 應用程式不再指派狀態為 `Complete` 開具發票後，需要零付款的訂單。

<!-- MC-35888-->

* REST API產生的「新發運」電子郵件現在包含的發運和客戶資訊與從管理員手動建立的發運相同。 以前，此電子郵件不包含客戶名稱、追蹤資訊、訂購的產品，以及其他訂購資訊。

<!-- MC-35837-->

* 從管理員載入或自訂電子郵件時，來賓使用者名稱現在會如預期顯示在發票和發運相關電子郵件中。

<!-- MC-35707-->

* PDF發票現在會轉換為下訂單的商店檢視語言。 以前，PDF發票是以管理員的語言翻譯。

<!-- MC-35858-->

* 您現在可以從貸項通知單頁面按預期發放退款。 [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* 顯示在店面訂單頁面上的本地化地區名稱現在可以正確翻譯。 以前，除非在「管理員」中編輯地區名稱，否則地區名稱不是以指定的地區設定為基礎。

<!-- MC-35633-->

* 通過POST建立的發運 `/rest/V1/shipment` 端點現在可正確更新訂單。 以前，應用產品建立了發運，但發運狀態仍處於處理狀態。

<!-- ENGCOM-7639 -->

* 貸項通知單現在顯示從下訂單的儲存範圍導出的付款方法。 以前，貸項通知單按預設儲存範圍的定義顯示名稱。 _Ledian Hymetlari在提取請求中提交的修正 [27582](https://github.com/magento/magento2/pull/27582)_. [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### 搜尋 {#search-heading}

<!-- MC-31304-->

* 您現在可以使用QuickSearch，從「管理員客戶」檢視依屬性來搜尋產品。 以前，目錄搜尋結果頁面上會發生例外狀況。

<!-- MC-32518-->

* 現在，在您新增產品屬性後，應用程式會如預期般在類別頁面上顯示可設定的產品。

<!-- MC-33952-->

* Elasticsearch結果現在包含每個商店檢視屬性選項的正確值。 如果「下拉式清單」或「多選」屬性在非預設商店檢視中與在預設商店檢視中不同的選項值，則Elasticsearch現在會索引該值，或在結果中傳回具有該值的產品。 以前，Elasticsearch沒有為該值建立索引，或在結果中傳回包含該值的產品。

<!-- MC-35013-->

* 依SKU搜尋現在可如預期在進階的Elasticsearch搜尋中運作。 以前，當您嘗試依SKU搜尋時，應用程式會顯示此錯誤訊息： `We can't find any items matching these search criteria. Modify your search`.

<!-- ENGCOM-7222-->

* 進階搜尋不再讓購物者篩選負價。 _Rohan Hapani在提取請求中提交的修正 [27359](https://github.com/magento/magento2/pull/27359)_. [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* 現在，範圍值將按預期在「新同義片語」表單中重置。 _由Sathish Subramanian在提取請求中提交的修正 [29206](https://github.com/magento/magento2/pull/29206)_. [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### 裝運

<!-- MC-34734-->

* 現在，應用程式在升級後可正確計算出貨單費率。 以前，發運表費率是根據淨價格計算的，但不包括增值稅。

<!-- MC-35955-->

* 使用多個地址結帳時，客戶現在可以成功移除結帳工作流程訂單審核頁面上的獎勵點。 之前，應用程式會擲出 `404 Not Found` 客戶按一下 **移除** 按鈕，刪除任何地址的點。 這是2.4.0的已知問題。

<!-- MC-33737-->

* 對於指定FedEx作為發運方法的訂單，應用程式現在在結帳工作流中以正確的幣種顯示發運費率。

<!-- MC-33267-->

* UPS發運的訂單的多頁發運標籤PDF現在顯示正確數量。

<!-- MC-35514-->

* 已解決「建立套件」頁面的JavaScript元件問題。 之前，應用程式未顯示 **建立發運標籤** 複選框，則無法為現有訂單建立發運標籤。

### Sitemap

<!-- ENGCOM-7924-->

* 中的Sitemap `robots.txt` 現在是特定儲存區。 _Vadim Malesh在提取請求中提交的修正 [29331](https://github.com/magento/magento2/pull/29331)_. [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* 編碼值現在會在 `sitemap.xml` 檔案。 過去，當您在產品名稱或影像標題中加入編碼字元時，產生的Sitemap無效。

### 測試

<!-- MC-36458-->

* 此 **將產品設定為新** 屬性標籤現在會如預期般顯示在產品的詳細資訊和已排程的更新頁面上。

<!-- MC-34484-->

* 您現在可以成功預覽CMS區塊的測試排程。 之前，應用程式擲出錯誤。

<!-- MC-33789-->

* 現在，在使用計畫更新編輯CMS頁面時，可以訪問「 CMS預覽」頁，並從預設儲存區將其重新分配給其他儲存區。 之前，當您按一下預覽連結時，應用程式擲回404錯誤。

<!-- MC-33572-->

* 您現在可以使用POST `/V1/products/special-price` 更新產品的特殊價格，而不需指定 `price_to` 參數值。 以前，會嘗試設定價格更新，但 `price_to` 指定的參數未成功。

### 商店

<!-- MC-35853-->

* 刪除先前建立的存放區檢視，不再導致使用分割資料庫設定的部署發生錯誤。 之前，應用程式會擲回例外狀況。

<!-- MC-32634-->

* 您現在可以匯出 `config.php` 和從一個網站預設的網站代碼，以在多個網站部署的第二個網站上安裝和配置應用程式。 以前，預設商店和檢視在匯出後會消失，店面會發生錯誤。

### Swagger

<!-- ENGCOM-7720-->

* 您現在可以使用Swagger產生客戶代號。 以前，輸入有效的客戶存取資訊時，Swagger不會產生回應代碼，而應用程式會顯示此錯誤： `The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`. _Vadim Malesh在提取請求中提交的修正 [28822](https://github.com/magento/magento2/pull/28822)_. [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### 色票

<!-- ENGCOM-7845-->

* 具有色票的可設定產品現在會在購物者點按時顯示階層定價 **編輯** 在購物車中。 之前，應用程式在結帳前不會在購物車中顯示階層價格。 _由Sathish Subramanian在提取請求中提交的修正 [29137](https://github.com/magento/magento2/pull/29137)_. [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* 應用程式現在會按照可設定產品變化的預期顯示層價。

### TargetRule

<!-- MC-36162-->

* 下列條件下產品頁面的效能已改善：

   * 已安裝目標規則模組
   * 已實作連結產品功能（相關、向上銷售和交叉銷售產品）

### 稅

<!-- MC-36049-->

* 在商家從產品的屬性集中取消分配產品後，應用產品不再在店面顯示產品的固定產品稅屬性。

### 測試

<!-- ENGCOM-7874-->

* PHPUnit 9錯誤已在單元測試中得到修正。 _提取請求中由Anton Evers提交的修正 [29244](https://github.com/magento/magento2/pull/29244)_. [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* 已新增單位測試，以核准自過期以來提供折扣的採購訂單，將以全額方式下訂單，而不會更新採購訂單總計。 _Joan He在提取請求中提交的修正 [18](https://github.com/magento/partners-magento2-infrastructure/pull/18)_. [GitHub-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* `SynchronizeFilesInterface` 現已納入整合測試。 _提取請求中由jmonteros422提交的修正 [29493](https://github.com/magento/magento2/pull/29493)_. [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* 函式已新增至 `\Magento\TestFramework\TestCase\WebapiAbstract` 這可讓測試中預期和實際結果的大型巢狀陣列比較，並允許測試者忽略實際結果中無關的鍵值。 _Jekabs在提取請求中提交的修正 [29458](https://github.com/magento/magento2/pull/29458)_. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* 修正預期值與 `app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php`. _Lukasz Bajsarowicz在提取請求中提交的修正 [29271](https://github.com/magento/magento2/pull/29271)_. [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7886 -->

* 使用 `ObjectManager` 在單元測試中，已將用於在測試期間實例化類的新關鍵字取代。 _Lukasz Bajsarowicz在提取請求中提交的修正 [29272](https://github.com/magento/magento2/pull/29272)_. [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* 已針對下列案例新增測試涵蓋範圍： `updateCustomer` 變異：出生日期無效、電子郵件地址無效，以及客戶姓氏空白。 _由Alexander Taranovsky提交的提取請求修正 [28304](https://github.com/magento/magento2/pull/28304)_. [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* 此 `ApiFunctional TestFramework` GraphQL用戶端現在可正確分析標題。 [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### 主題

<!-- MC-34397-->

* 使用者代理規則中新增的主題現在會在您執行時如預期般受到影響 `bin/magento catalog:images:resize`. 以前，只有指派給商店的主題會在 `bin/magento catalog:images:resize` 是跑的。

### 翻譯和地區設定

<!-- MC-20372-->

* 管理員變更 **日期** 欄位，或在管理區域設定為中文或日文時儲存。 [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* 應用程式現在會檢查區域(前端或 `adminhtml`)，在轉譯內嵌轉譯標籤之前。 之前，請對 `/rest/V1/integration/admin/token` 啟用內嵌轉譯時憑證錯誤，會導致API回應中的錯誤訊息周圍包含內嵌轉譯標籤。 _Zach Nanninga在提取請求中提交的修正 [28856](https://github.com/magento/magento2/pull/28856)_. [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* 保加利亞地區已加入 `directory_country_region` 表格。 _Nikola Lardev在提取請求中提交的修正 [27957](https://github.com/magento/magento2/pull/27957)_. [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* 管理員上的標題和按鈕 **客戶**  >  **添加新地址** 和 **編輯產品**  >  **進階詳細目錄** 現在可以翻譯模型。 _由Sathish Subramanian在提取請求中提交的修正 [28174](https://github.com/magento/magento2/pull/28174)_. [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* 現在可在「管理員」上翻譯「FPT」一詞  **商店**  > **設定**  > **銷售**  > **稅**  > **固定產品稅**. _Vadim Malesh在提取請求中提交的修正 [28108](https://github.com/magento/magento2/pull/28108)_. [GitHub-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* 此 **在這裡發貨** 已變更結帳工作流程運送地址強制回應上的按鈕標籤，以符合其他按鈕所使用的駝峰式大小寫。 現在，此案例與翻譯檔案中使用的案例相符。 以前，由於大小寫不符，因此不會轉譯此標籤。 _提取請求中由WK提交的修正 [28547](https://github.com/magento/magento2/pull/28547)_. [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### UI

<!-- ENGCOM-7514-->

* 現在，當「隱私權與Cookie原則」頁面顯示時，頁尾中的隱私權與Cookie原則連結會顯示為作用中連結。 _由Sathish Subramanian在提取請求中提交的修正 [28004](https://github.com/magento/magento2/pull/28004)_. [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* 修正與您從「管理員」中選擇的訂單關聯的發票的「發票注釋」文本區域中游標未對齊的問題 **銷售** > **訂購**.

<!-- MC-36044-->

* 現在會顯示「建立新訂單」頁面 **按SKU添加產品** 和 **新增產品** 按鈕。

<!-- MC-35974-->

* 當所選產品的產品評等可用時，應用程式現在會正確顯示「編輯檢閱」頁面。

<!-- MC-35475-->

* 現在，應用程式會在執行Safari的iPhone上正確顯示管理員客戶編輯頁面。

<!-- MC-35370-->

* 修正「建立新訂單」頁面上不必要的捲動。

<!-- MC-35345-->

* 直接按一下 **出口稅率** 「添加新稅則」頁的按鈕(**商店**  >  **稅則**)現在下載 `tax_rates.csv` 檔案。 之前，商戶必須按一下 **出口稅率** 按鈕。 這是2.4.0的已知問題。

<!-- MC-35313-->

* 此 **將選取項目新增至購物車** 購物車底部的按鈕現在可如預期般運作。 這是2.4.0的已知問題。

<!-- MC-35296-->

* 此 **重新整理** 按鈕 **最近查看的產品** 「客戶活動」頁面的區段現在可如預期般運作。 先前，當您按一下 **重新整理**&#x200B;時，產品清單未重新整理，且頁面已捲動。

<!-- MC-35412-->

* 現在，應用程式在的「條件」標籤中正確顯示用於選擇客戶出生日期的日曆表徵圖 **客戶** > **區段** > **新增區段**.

<!-- MC-35658-->

* 當購物者在Internet Explorer 11.x上捲動此頁面時，結帳工作流程的結帳摘要區段不再閃爍。

<!-- MC-34602-->

* 現在，應用程式可在店麵類別頁面上正確顯示依SKU的訂購介面工具集。 之前，此介面工具集的HTML代碼未呈現，而應用程式未顯示 **載入SKU清單** 連結。

<!-- MC-37444-->

* 已停用的UI元件 `this.disabled(true)` 不再出現在店面。 [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* 應用程式現在會在行動檢視中正確顯示最近檢視的產品介面工具集。 _Tu Nguyen在提取請求中提交的修正 [27572](https://github.com/magento/magento2/pull/27572)_. [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* 從管理員變更產品的位置現在會反映在店面的產品位置。 _Oleg Aleksin在提取請求中提交的修復 [28150](https://github.com/magento/magento2/pull/28150)_. [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* 登錄表單樣式現在與空白主題中其他表單的樣式一致。 已移除設定容器控制捲動輸入欄位寬度的不必要樣式。 _Tu Nguyen在提取請求中提交的修正 [28084](https://github.com/magento/magento2/pull/28084)_. [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* 此 **確定** 迷你購物車刪除產品確認快顯視窗上的按鈕現在會如預期般運作。 _Tu Nguyen在提取請求中提交的修正 [28083](https://github.com/magento/magento2/pull/28083)_. [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* 頁面載入期間，產品庫元素不再閃爍。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27871](https://github.com/magento/magento2/pull/27871)_. [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* 控制欄位寬度的CSS類別，現在會在整個管理員中如預期般套用至「開始時間」元素。 _提取請求中由Shankar Konar提交的修正 [29511](https://github.com/magento/magento2/pull/29511)_. [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* 「條款與條件」文字標籤現在可以正確顯示較長的文字字串。 _Bartłomiej Szubert在提取請求中提交的修正 [29413](https://github.com/magento/magento2/pull/29413)_. [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* 已重新覆寫訂單失敗頁面的標題，以確保正確性。 以前，當購物者取消訂單時，應用程式會顯示標題為以下的頁面： `We received your order!`. _由Angelo Romano在提取請求中提交的修正 [29410](https://github.com/magento/magento2/pull/29410)_. [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* 已取消的訂單視圖頁面上已取消的項目總數現在可以在取消的訂單視圖頁面上正確識別。 之前，此欄位會加上標籤 **應付總計**. _Madhu Rajawat在提取請求中提交的修正 [27516](https://github.com/magento/magento2/pull/27516)_. [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* 「建立可設定產品」頁面上的切換按鈕現在可如預期運作。 _Tu Nguyen在提取請求中提交的修正 [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* 「高級屬性屬性」頁上的高級屬性屬性塊表徵圖現在會如預期般工作。 _Tu Nguyen在提取請求中提交的修正 [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* 現在，當您嘗試儲存新模組的組態設定時，系統設定頁面的「管理員」區段會展開，以如預期顯示必要欄位。 _Bartłomiej Szubert在提取請求中提交的修正 [28285](https://github.com/magento/magento2/pull/28285)_. [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* 修正模式設定為 `inside`. _Sean van Zuidam在提取請求中提交的修正 [29077](https://github.com/magento/magento2/pull/29077)_. [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* 修正購物者在頁面頁尾的「訂閱」欄位中輸入無效電子郵件地址時，所導致的長度分散的輸入欄位寬度。 _Dipesh Rangani在提取請求中提交的修正 [27106](https://github.com/magento/magento2/pull/27106)_. [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* 安 `Uncaught ReferenceError` 當您新增新標籤並將滑鼠游標移至該標籤上時，開發主控台中不會再出現錯誤。 _Nazar Klovanych在提取請求中提交的修正 [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1700](https://github.com/magento/magento2/issues/1700)

<!-- ENGCOM-7635-->

* 移除未使用的 `AdminAnalytics` 測試(`TrackingScriptTest`)。 _Lukasz Bajsarowicz在提取請求中提交的修正 [28605](https://github.com/magento/magento2/pull/28605)_. [GitHub-28850](https://github.com/magento/magento2/issues/28850)

<!-- ENGCOM-7142 -->

* 已解決執行連續測試時靜態屬性序列化和取消序列化的問題。 _Pavel Bystritsky在提取請求中提交的修正 [26175](https://github.com/magento/magento2/pull/26175)_. [GitHub-28319](https://github.com/magento/magento2/issues/28319), [GitHub-29313](https://github.com/magento/magento2/issues/29313)

### URL重新寫入

<!-- MC-34483-->

* 將商店檢視移至其他網站時，不再重設URL。 以前，應用程式會不正確地重新產生CMS和產品URL重新寫入。

* 您現在可以成功預覽CMS區塊的測試排程。 之前，應用程式擲出錯誤。

<!-- MC-33028-->

* 將商店檢視指派給不同商店時，應用程式現在會保留現有的目錄URL，如預期。 之前，應用程式會刪除商店專屬的URL重新寫入。

### 清漆

<!-- ENGCOM-7761-->

* 重新啟動清漆不再導致503錯誤。 _Ihor Sviziev在提取請求中提交的修正 [28137](https://github.com/magento/magento2/pull/28137)_. [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### 保管庫

<!-- MC-34674-->

* 當 **儲存以供稍後使用** 未選中結帳工作流程的付款區段核取方塊。

### Visual Stulder

<!-- MC-35574-->

* 當您在「可視化採購商」中排序產品並啟用「庫存」時，應用程式現在會顯示源庫存，而不是預設的產品庫存。

### Web API架構

<!-- MC-36084-->

* 使用REST建立的發票現在包括禮品卡資訊，與在管理員中建立的發票類似。 以前，使用POST `/V1/order/:id/invoice` 要開具發票，訂單未顯示套用的禮品卡代碼或禮品卡金額。

<!-- MC-35838-->

* 具有多個網站的商戶現在可以使用REST API來建立和更新產品，同時保留影像和影像角色繼承。 以前，當商家使用REST API建立和更新產品，並更新產品以供商店檢視時，會為該商店檢視載入並儲存預設影像角色。 因此，在更新後，商店檢視影像角色不再繼承預設範圍。

<!-- MC-36419-->

* 當資源權限允許存取時，未限定範圍的整合使用者帳戶現在可以透過REST API存取資源。

<!-- MC-35975-->

* 搜尋條件篩選器現在可如預期般，用於建立可設定產品期間所使用的產品屬性。 [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* 客戶群組ID現在已通過驗證以供POST `/rest/V1/customers` 要求。 之前，當您使用無效時，應用程式未顯示錯誤訊息 `group_id` 在這些請求中。 _Vadim Malesh在提取請求中提交的修正 [28903](https://github.com/magento/magento2/pull/28903)_. [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* 預設情況下，不會為匿名REST調用建立PHP會話。 以前，即使不必要，也會啟動工作階段。 _Maciej Pawłowski在提取請求中提交的修正 [26032](https://github.com/magento/magento2/pull/26032)_. [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* 使用各種REST端點來更新包含自訂選項的訂單，不再會刪除自訂選項資訊。 以前， `info_buyRequest` 已刪除。 _Vadim Malesh在提取請求中提交的修正 [28483](https://github.com/magento/magento2/pull/28483)_. [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* 使用GET `V1/customers/me` 現在榮譽 **共用客戶帳戶**  設定(管理 **商店** >  **設定**  >  **客戶**  >  **客戶設定**  > **帳戶共用選項**)時識別。 _Pavel Bystritsky在提取請求中提交的修正 [28213](https://github.com/magento/magento2/pull/28213)_. [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* 與位址相關的擴充功能屬性可設為資料陣列。 以前，當包含的POST請求  `extension_attributes` 已發送到 `estimate-shipping-methods`. 此錯誤（由先前的提交引入）會影響上的任何擴充功能屬性集 `Magento\Quote\Api\Data\AddressInterface` 不是物體。 _提取請求中由Alexander Menk提交的修正 [27338](https://github.com/magento/magento2/pull/27338)_. [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* 現在使用PUT更新客戶時，您可以指定單一欄位 `V1/customers/:id` 端點。 之前，端點會要求您指定客戶電子郵件和建立客戶所需的其他欄位。 _Vadim Malesh在提取請求中提交的修正 [28332](https://github.com/magento/magento2/pull/28332)_. [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### 網站限制

<!-- MC-32366-->

* 啟用網站限制不再阻止以來賓身份登錄的客戶的清漆ESI請求。 以前，這些來賓無法訪問首頁主菜單。

<!-- MC-32369-->

* 現在當啟用網站限制時，應用程式會如預期般載入產品首頁。

### 願望清單

<!-- MC-35810-->

* 您現在可以使用願望清單搜尋功能，在啟用多個願望清單支援的部署中，在公用願望清單中尋找產品。 之前，客戶使用願望清單搜尋功能來尋找產品後，請選取產品，然後按一下 **新增至購物車**，應用程式未將產品新增至購物車，並顯示此錯誤： `Invalid Form Key. Please refresh the page`.

<!-- MC-35622-->

* 客戶現在可以從願望清單本身變更願望清單中的產品數量。 以前，應用程式未更新產品數量，也未顯示訊息。

<!-- MC-35618-->

* 客戶現在可以從願望清單本身變更願望清單中分組產品的數量。 之前，應用程式不會更新產品數量或顯示訊息。

<!-- MC-34408-->

* 「店麵類別」頁面現在會如預期般顯示希望清單搜尋介面工具集。

<!-- ENGCOM-7580 7285-->

* 用於的填充物 `Map`, `WeakMap`, `FormData`，和 `MutationObserver` 現在僅視需要載入。 _提取請求中由Dmitry Tsymbal提交的修正 [28330](https://github.com/magento/magento2/pull/28330) 和馬特烏什·克爾佐維亞克的拉入請求 [27618](https://github.com/magento/magento2/pull/27618)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377), [GitHub-28382](https://github.com/magento/magento2/issues/28382)

<!-- ENGCOM-7561-->

* 願望清單更新程式現在支援同時更新願望清單項目及其說明。 _由Eduard Chitoraga在提取請求中提交的修正 [28222](https://github.com/magento/magento2/pull/28222)_. [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7564-->

* 現在，應用程式可正確驗證購物者可建立的願望清單數目上限。 _由Eduard Chitoraga在私人存放庫合作夥伴 — magento2ee提取請求247中提交的修正_.

<!-- MC-36250-->

* 管理員現在可以設定由客戶從非預設商店新增至願望清單的可設定產品。 以前，當客戶也從非預設商店新增可設定產品時，應用程式擲回錯誤。

<!-- ENGCOM-7660-->

* 新增測試，以分享超過允許數量之客戶的願望清單。 _提取請求中由Dmitry Tsymbal提交的修正 [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* 已新增測試，以管理員使用者身分從客戶的願望清單中刪除項目。 _提取請求中由Dmitry Tsymbal提交的修正 [28632](https://github.com/magento/magento2/pull/28632)_. [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* 新增停用願望清單功能的測試。 _提取請求中由Dmitry Tsymbal提交的修正 [28635](https://github.com/magento/magento2/pull/28635)_. [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* 新增在共用客戶願望清單時使用無效電子郵件地址的測試。 `StorefrontShareWishlistEntityTest` 已重構。 `StorefrontCustomerShareWishlistActionGroup` 已過時。 _提取請求中由Dmitry Tsymbal提交的修正 [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* 已新增一項測試，以分享超過允許的文字長度限制的客戶願望清單。 _提取請求中由Dmitry Tsymbal提交的修正 [28812](https://github.com/magento/magento2/pull/28812)_. [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## 已知問題

**問題**:使用第三方支付提供者時，「下單」頁面上結帳的新驗證碼功能無法如預期運作。 在「下單」店面頁面上啟用驗證碼字保護，且執行2.3.6或2.4.1的商戶在使用第三方支付提供者（如PayPal）簽出時，將會看到此錯誤： `Please provide CAPTCHA code and try again`. **因應措施**:此問題的修正現已可供使用。 請參閱 [Adobe Commerce v2.3.6/2.4.1結帳中的CAPTCHA無法運作](https://support.magento.com/hc/en-us/articles/360051235772) 知識庫文章。 我們的下一季度補丁程式(Q12021)也將包含修正。

**問題**:沒有管理員權限的用戶當前無法設定其個人2FA訪問權限。 2FA包含兩個ACL角色。 一個角色會影響全局系統配置，只有配置系統時才需要它。 第二個ACL角色會影響個別使用者2FA帳戶。 管理員使用者必須配置此第二種類型的2FA ACL。 **因應措施**:使用者登入後，看到「存取遭拒」畫面後，即可造訪 `https://<magento store>/<admin_path>/tfa/tfa/requestconfig/` 強制配置。 注意：不建議禁用安全設定。 不過，此因應措施僅在管理員URL機密金鑰停用時有效。

**問題**:此 **建立帳戶** 如果購物者輸入的資料無效，則「建立新帳戶」頁面上的按鈕仍為停用狀態。 這可防止購物者在發生錯誤後重新嘗試建立帳戶。 **因應措施**:應用修補程式 `MC-38509`. 我們的下一季度版本（2.4.2、2.4.1-p1和2.3.6-p1）也將包含修正，預計於2021年第1季發行。 請參閱 [2.4.1和2.3.6建立帳戶按鈕已停用Hotfix](https://support.magento.com/hc/en-us/articles/360051130212) 知識庫文章。  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**問題**:啟用dotdigital時，商家無法從Safari的管理員登入dotdigital。 請參閱 [啟用dotdigital帳戶時，無法透過「管理面板」登入dotdigital](https://support.magento.com/hc/en-us/articles/360050092291) 知識庫文章。

**問題**:當購物者選擇與計費地址不同的發運地址時，頂點地址驗證在付款期間無法工作。 此問題將在2.4.2中修正。請參閱 [2.4.1已知問題：更新地址後，頂點地址驗證消息不會消失](https://support.magento.com/hc/en-us/articles/360050139631) 知識庫文章。

**問題**:當商家在Safari瀏覽器上儲存dotdigital Page Builder表單時，應用程式會顯示空白頁面。 **因應措施**:重新載入頁面以套用變更。 請參閱 [2.4.1已知問題：儲存dotdigital Page Builder表單後空白頁面](https://support.magento.com/hc/en-us/articles/360049819092) 知識庫文章。

**問題**:在特定條件下，應用程式會自動登入先前使用過的Amazon帳戶的客戶，而非在與Amazon支付結帳時提示他們登入。 請參閱 [2.4.1已知問題：無法變更Google Chrome中的Amazon帳戶](https://support.magento.com/hc/en-us/articles/360049814152) 知識庫文章。

**問題**:當選擇PayPalBraintree付款和多個地址發運時，應用產品在結帳工作流的計費頁上簡要顯示錯誤消息。 請參閱 [2.4.1已知問題：在結帳時出現錯誤並出現PayPalBraintree](https://support.magento.com/hc/en-us/articles/360050253211) 知識庫文章。

**問題**:當客戶結帳被禁用時，當客戶嘗試通過Braintree向PayPal下訂單時，應用程式將顯示一條不詳的錯誤消息。 請參閱 [2.4.1已知問題：在訪客結帳期間，使用Paypal透過Braintree傳送無資訊錯誤訊息](https://support.magento.com/hc/en-us/articles/360050368111) 知識庫文章。

## 社群投稿

我們感謝廣大的Magento Open Source社群，並感謝他們對本版的貢獻。 查看下列方式，了解社群對目前發行版本的貢獻：

* 如果社群成員已針對此版本提供修正，我們會以「 」這個字詞來識別這些附註的「已修正問題」區段中的修正。*社群成員提供的修正*」。

* 社群工程團隊 [Magento貢獻者](https://magento.com/magento-contributors) 依月、季和年維護最佳貢獻個人和合作夥伴的清單。 在該「貢獻者」頁面中，您可以在GitHub上追蹤合併PR的連結。

### 合作夥伴貢獻

下表重點介紹合作夥伴的貢獻。 下表列出提取請求、外部提取請求以及與其相關聯的GitHub問題編號（若有）的貢獻者。

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### 個人貢獻者貢獻內容

下表列出社群成員的貢獻。 下表列出外部提取請求、與其相關聯的GitHub問題編號（若有），以及提供提取請求的社群成員。

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### 系統需求

我們的技術堆棧構建在PHP和MySQL上。 如需詳細資訊，請參閱 [系統需求](../../../installation/system-requirements.md).

### 安裝和升級指示

您可以使用撰寫器安裝Adobe Commerce 2.4.1。

## 遷移工具包

資料移轉工具可協助將現有Magento1.x儲存資料至Magento2.x。此命令列介面包括驗證、進度追蹤、記錄和測試功能。 如需安裝指示，請參閱 [安裝資料移轉工具](../../../tools/data-migration-tool/install.md). 考慮探索或協助 [資料移轉存放庫](https://github.com/magento/data-migration-tool).

此 [代碼遷移工具包](https://github.com/magento-commerce/code-migration) 協助將現有Magento1.x儲存擴充功能和自訂項目傳輸至Magento2.x。命令行介面包括用於轉換Magento1.x模組和佈局的指令碼。
