---
title: Adobe Commerce2.4.1發行說明
description: 瞭解Adobe Commerce版中的新功能、增強功能、錯誤修復和已知問題。
exl-id: 230df894-2347-4d68-8386-d0f0e40c2659
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '16726'
ht-degree: 0%

---

# Adobe Commerce2.4.1發行說明

Adobe Commerce2.4.1對效能和安全性進行了增強，並對B2B功能集進行了大量補充。 安全增強包括對 `SameSite` cookie的屬性，以及為支付相關和訂單相關的API端點以及「定貨單」儲存首頁添加CAPTCHA保護。 B2B改進側重於訂單批准流程、B2B發貨方法、擴展管理操作記錄，以及增強店面安全性。

此版本包括2.4.0中包括的對核心質量的所有改進、對核心代碼的150多個新修復以及15多項安全增強。 它包括由我們的社區成員解決近300個GitHub問題。 這些社區貢獻包括對核心代碼的輕微清理，以及GraphQL的重大改進。

本版本中已解決2.4.0中確定的所有已知問題。

{{bics}}

## 應用 `AC-3022.patch` 繼續提供DHL作為航運公司

DHL已引入架構版本6.2，並將在不久的將來棄用架構版本6.0。 Adobe Commerce2.4.4和支援DHL整合的早期版本僅支援6.0版。部署這些版本的商家應適用 `AC-3022.patch` 盡早便繼續提供敦豪作為航運公司。 查看 [應用修補程式以繼續將DHL作為運輸承運商提供](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 有關下載和安裝修補程式的資訊，請參閱知識庫文章。

## 安全修補程式可用

商家現在可以安裝時間敏感型安全修復程式，而無需應用完整的季度版(例如2.4.0-p1)提供的數百個功能修復和增強功能。 修補程式2.4.0.1(Composer軟體包2.4.0-p1)是一個安全修補程式，它針對我們上一季度發行版2.4.0中已發現的漏洞提供了修復。此安全修補程式中包含應用於2.4.0版的所有熱修復程式。 (A) *熱修復* 提供對已發佈版本的修復，以解決特定問題或錯誤。)

有關安全修補程式的一般資訊，請參見 [介紹新的安全修補程式版本](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287)。 有關下載和應用安全修補程式(包括修補程式2.3.5-p2)的說明，請參見 [快速啟動本地安裝](../../../installation/composer.md)。 安全修補程式僅包括安全錯誤修復，而不包括完整修補程式中包含的附加安全增強。

## 其他發佈資訊

雖然這些功能的代碼與季度版本捆綁在一起，但其中幾個項目(例如B2B、頁面生成器和Progressive Web Application(PWA)Studio)也是獨立發佈的。 這些項目的錯誤修復程式都記錄在每個項目文檔中提供的獨立、特定於項目的發行資訊中。

## 亮點

在此版本中查找以下亮點。

### 大量安全增強

此版本包括15個以上的安全修復和平台安全改進。 所有安全修復都已備份2.4.0-p1和2.3.6。

#### 超過15項安全增強功能，可幫助關閉遠程代碼執行(RCE)和跨站點指令碼(XSS)漏洞

迄今未發生與這些問題相關的已確認攻擊。 但是，某些漏洞可能被利用來訪問客戶資訊或接管管理員會話。 大多數這些問題都要求攻擊者首先獲得對管理員的訪問權限。 因此，我們提醒您採取一切必要步驟保護您的管理員，包括但不限於以下工作：IP允許， [雙因素認證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)，使用VPN，使用唯一位置而不是 `/admin`以及良好的密碼衛生。 請參閱 [可用於Magento的安全更新](https://helpx.adobe.com/security/products/magento/apsb20-59.html) 來討論這些固定問題。

#### 其他安全增強功能

此版本的安全改進包括：

* **驗證碼** 已將保護添加到以下產品區域：

   * 下訂單儲存前頁和REST和GraphQL端點 <!-- MC-36067-->
   * 與支付相關的REST和GraphQL端點。<!-- MC-36064-->

   預設情況下，這些附加頁面的驗證碼保護被禁用。 可以在管理員上啟用它，其方式與驗證碼所涵蓋的其他頁面相同。 此保護已被添加為一種反蠻力機制，以保護商店免受梳理攻擊。 請參閱 [驗證碼](https://docs.magento.com/user-guide/stores/security-captcha.html)。

* **支援Cookie的SameSite屬性**。 為支援新Cookie分類系統的GoogleChrome強制實施，已更新處理Cookie的應用程式類以支援 `SameSite` cookie屬性。 此屬性設定為 `Lax` 預設情況下，但可以顯式覆蓋。 <!-- MC-35389-->

* **增強的安全掃描工具**。 Adobe與 [樂觀的安全性](https://sansec.io/)是防止數字盜取的領頭羊，將其8700多個威脅簽名的資料庫整合到安全掃描工具中。 這種合作關係將使商家能夠通過主動檢測惡意軟體和減少誤報，即時瞭解其站點的安全狀態。 商戶可以通過訪問註冊工具 `https://account.magento.com/scanner`。 有關詳細資訊，請參見 [使用增強的安全掃描工具保護您的店面](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool) 部落格帖子。

{{cve-notice}}

### 基礎架構改進

本版本包含對核心質量的增強，這些提高了框架的質量和以下功能領域：客戶帳戶、目錄、CMS、OMS、導入/導出、促銷和目標、購物車和結帳、B2B以及轉移和預覽。

* **站點範圍分析工具與管理員整合**。 的 [工具](https://docs.magento.com/user-guide/reports/site-wide-analysis-tool.html) 為Adobe雲基礎架構安裝提供系統見解和工具，並提供全天候即時效能監控、報告和自助服務建議。 商家可以使用新管理員 [角色資源](https://docs.magento.com/user-guide/system/permissions-role-resources.html) 通過管理員安全訪問其「客戶詳細資訊」頁。 查看 [常見問題](https://support.magento.com/hc/en-us/articles/360048646671) 的雙曲餘切值。 <!-- SWAT-807-->

### 效能改進

* **減少Redis和Magento之間的網路傳輸大小**。 插件清單配置現在在執行 `bin/magento di:compile` 的子菜單。 此配置資訊基於作用域寫入到生成的元資料資料夾中。 以前，此資訊儲存在快取中。 由此帶來的效能改進包括減少網路快取大小和許多場景的執行時間。<!-- MC-31617-->

* **增強的消息隊列使用者效能**。 三種新配置設定支援減少使用者隊列CPU消耗。 這些可選參數可增強對用戶的控制並節省伺服器資源。 請參閱 [配置消息隊列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) 的 `maxIdleTime`。 `sleep`, `onlySpawnWhenMessageAvailable` 參數。

* **縮短執行時間** 為 `bin/magento` 的雙曲餘切值。

### Adobe Stock整合

本版本包括Adobe Stock整合v2.1.0。

### 新建媒體集

現在，新媒體集預設在管理中啟用。 商家現在可以對媒體集中的影像執行以下操作：

* 批量刪除影像
* 通過識別在儲存面上未使用的重複影像和影像來優化媒體儲存
* 按其中使用的庫前區域篩選影像，包括產品和類別內容以及CMS塊
* 使用影像元資料
   * 查看上傳到媒體集的映像中的元資料
   * 編輯影像元資料（標題、說明和關鍵字）
   * 按影像元資料搜索影像

### 頁面生成器

頁面生成器現在支援全屏模式，它支援更輕鬆地編輯內容，並在整個管理員中提供一致的編輯體驗。 請參閱 [工作區](https://docs.magento.com/user-guide/cms/page-builder-workspace.html)。 <!-- PB-543-->

### GraphQL

此版本增加了GraphQL對以下功能的覆蓋範圍：

* **產品審查**。 客人和客人可以撰寫產品評論。 客戶可以檢索其產品審查歷史記錄。 請參閱 [建立產品審閱](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) 和 [productReviewRatingsMetadata查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) 有關檢索有關審閱基礎架構的資訊的資訊。<!-- MC-32349-->

* **禮品選項**。 所有客戶和客人都可以在訂單中添加禮品資訊。 在Adobe Commerce的安裝中，他們還可以在訂單中添加禮品包裝、禮品收據和打印卡。 請參閱 [`setGiftOptionsOnCart` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) 和 [`updateCartItems` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html) <!-- MC-32345-->

* **獎勵積分**。 客戶可以將獎勵積分應用或刪除到他們的購物車。 他們也可以看他們的獎勵點歷史。 請參閱 [`applyRewardPointsToCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/apply-reward-points.html) 和 [`removeRewardPointsFromCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-reward-points.html) 討論管理購物車中的獎勵積分。<!-- MC-23366-->

* **訂單歷史記錄**。 所有客戶都可以查看其訂單歷史記錄的詳細資訊，包括發票、發運和退款。<!-- MC-20635-->

* **添加到購物車**。 的 [`addProductsToCart` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) 允許您將任何類型的產品添加到活動購物車。 我們建議用這種突變代替單用途的突變，例如 `addSimpleProductsToCart`。 _修復由Yaroslav Rogoza在拉請求中提交 [27914](https://github.com/magento/magento2/pull/27914)_。 [GitHub-28524](https://github.com/magento/magento2/issues/28524)  <!-- MC-21513-->

* **儲存的付款方法**。 登錄的客戶現在可以將付款詳細資訊(包括Braintree信用卡和使用PayPal的Braintree)儲存在「我的帳戶」中。 <!-- MC-32348 35945 35946-->

* **支援Magento Open Source中的願望清單**。  你可以 [添加項](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) 到 [更新項目](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) 和 [刪除項](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) 從願望清單上。

* **改進客戶帳戶管理**。 我們已添加 [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) 和 [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) 管理客戶賬戶的突變。 這些新的突變需要不同的輸入對象 `createCustomer` 和 `updateCustomer` 突變。 要更改客戶的電子郵件地址，請使用 [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) 變異。

* **支援Payflow Pro Vault**。 已添加GraphQL保管庫支援 [Payflow Pro保管庫](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) 付款方式。 _修復由Oleh Usik提交的拉入請求 [28821](https://github.com/magento/magento2/pull/28821)_。 [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* 更新GraphQL [`storeConfig` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) 包含新客戶配置設定。 _修復由Oleh Usik提交的拉入請求 [27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 已添加 [`requestPasswordResetEmail` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html)，它將觸發提供的電子郵件地址的密碼重置電子郵件。 _修復由Oleh Usik提交的拉入請求 [27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **克拉納·GraphQL**。 已添加或更新有關KlarnaGraphQL的主題 [克拉納的支付方法](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) 和 [`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

查看 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 獲取這些增強功能的詳細資訊。

### PWA Studio

PWA Studiov8.0.0引入了新功能和增強功能：

* 對Venia樣式指南的更新，該指南適用於設計標籤、排版、顏色、核心元件和頁面佈局 <!-- PWA-519 419-->

* 改進Venia微型車體驗 <!-- PWA-236-->

* 對Venia店面上多個區域設定和本地化內容的初始支援 <!-- PWA-295-->

* 對Venia店面MyAccount體驗的許多改進 <!-- PWA-247-->

請參閱 [相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 的子菜單。 有關增強和錯誤修復的資訊，請參見 [PWA Studio版本](https://github.com/magento/pwa-studio/releases)。

### B2B

2.4.1版引入了B2B v1.3.0。此版本包括對訂單批准、發運方法、購物車和記錄管理操作的改進。

#### 訂單審批的改進

B2B訂單審批已得到增強，以改進可用性，並允許對採購訂單採取批量操作。
訂單審批和拒絕的改進包括：

* **沒有編輯權限的用戶的「新建查看規則」頁**。 B2B購買者現在可以在新的「查看規則」頁面上查看適用於其公司的規則，而他們無權編輯這些規則。 <!-- BUNDLE-104 -->

* **「需要我的審批」頁籤上的「計數」警報表徵圖**。 「我的採購訂單」視圖中的「需要我的審批」標籤現在顯示一個計數器，該計數器指示待定審批活動的數量。 <!-- BUNDLE-102 -->

* **批量訂單審批和拒絕**。 B2B經理和公司管理員現在可以批量拒絕和批准採購訂單。 這些更改允許審批人批准或拒絕單個操作中的多個採購訂單。 <!-- BUNDLE-140 128 111 153 -->

* 商戶現在可以搜索 **應用於** 和 **需要批准** 「我的採購訂單」視圖的欄位，並可以在建立規則期間選擇多個用戶角色。 <!-- BUNDLE-105 106-->

* 在「規則配置」頁上提供了如何配置訂單審批規則的示例。 <!-- BUNDLE-103 -->

請參閱 [審批規則](https://docs.magento.com/user-guide/customers/account-dashboard-approval-rules.html)

#### B2B運輸方法增強

B2B商家現在可以控制提供給每家公司的運輸方式。 商家可以通過管理員配置以下內容：<!-- BUNDLE-160 161 162 -->

* B2B公司帳戶的一組特定發運方法
* 對每個公司帳戶使用特定於All或B2B的發運方法
* 每個公司帳戶的B2B運輸方法的特定清單

#### 購物車改進

* 商戶現在可以允許用戶在單個操作中清除購物車的內容，並且可以在每個網站上獨立配置此功能。 <!-- BUNDLE-108 -->

* B2B購買者現在可以直接將單個項目或其購物車的全部內容添加到申請清單中。 <!-- BUNDLE-145 144-->

#### 新管理員功能

* B2B商戶可以代表客戶使用「按帳戶付款」作為付款方式從管理員建立訂單。 <!-- BUNDLE-166 178-->
* 商家現在可以直接在客戶詳細資訊頁面中查看與用戶關聯的所有報價。 <!-- BUNDLE-139 -->
* 商戶現在可以按公司過濾客戶線上網格。 <!-- BUNDLE-137 -->
* 管理員現在可以按銷售代表篩選管理員中的客戶。 <!-- BUNDLE-110 -->

請參閱 [B2B功能](https://docs.magento.com/user-guide/configuration/general/b2b-features.html)。

#### 加強店面的安全

為了減少欺詐或垃圾郵件帳戶的建立，商戶現在可以在店面的「新公司請求」表單上啟用Google的reCAPTCHA。 請參閱 [reCAPTCHA](https://docs.magento.com/user-guide/configuration/security/google-recaptcha-storefront.html)。<!-- BUNDLE-154 -->

#### 擴展的管理員操作記錄

現在，在公司模組中執行的管理操作將記錄在管理操作日誌中。 從所有相關公司模組記錄操作： `Company`。 `NegotiableQuote`。 `CompanyCredit`。 `SharedCatalog`。
<!-- BUNDLE-180 181 182 183 -->

此版本還包括多個錯誤修復。 請參閱 [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html)。

### 功能測試框架(MFTF)

MFTF 3.1.0現已提供。 請參閱 [功能測試框架更改日誌](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md)。

### 供應商開發的擴展

有關此版本的功能和更改的更新，請參閱以下文章：

* [Amazon](https://docs.magento.com/user-guide/payment/amazon-pay.html)

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [Dotdigital Engagement雲](https://docs.magento.com/user-guide/marketing/dotdigital/engagement-cloud.html)

* [克拉爾納](https://docs.magento.com/user-guide/payment/klarna.html)

* [頂點雲](https://docs.magento.com/user-guide/tax/vertex.html)

* [Yotpo產品評論](https://docs.magento.com/user-guide/marketing/yotpo-reviews-intro.html)

## 已修復問題

我們解決了核心代碼中的數2.4.1問題。

### 安裝、升級、部署

<!-- MC-36113-->

* 使用第三方擴展進行安裝，這些擴展對CLI命令中的儲存模組的API具有依賴性。 以前，應用程式顯示以下錯誤消息： `The default website isn't defined. Set the website and try again`。 這是2.4.0中的已知問題。

<!-- MC-33273-->

* `bin/magento setup:di:compile` 不再引發致命錯誤。 以前，應用程式在您第一次運行此命令時拋出錯誤，但第二次執行導致編譯成功。

<!-- MC-34429-->

* 在上聲明插件時，升級不再失敗 `Magento\Framework\Encryption\Encryptor`。

<!-- MC-36231-->

* 當某些主題在運行後未部署時，應用程式現在會顯示一條資訊性錯誤消息 `bin/magento setup:static-content:deploy`。 以前，當部署成功完成但並非部署了所有包時，應用程式未顯示錯誤。 當此命令在啟用的並行處理中執行，並且每個主題需要更多的時間才能部署到指定的最大執行時間之後，儘管主題未部署，但此命令仍可成功完成。

<!-- MC-35001-->

* 的 **使用預設值** 「Klarna付款」複選框(**商店** > **配置** > **銷售** > **付款方法** > **克拉爾納**)現在仍按預期在網站範圍更改時進行檢查。

<!-- MC-17959 ENGCOM-7629-->

* 正在運行 `/bin/magento config:show vendor_module/general/value` 現在返回 `0` 或空字串。 以前，它 `Configuration for path: "vendor_module/general/value" doesn't exist`。 _Vadim Malesh在拉請求中提交的修復 [28549](https://github.com/magento/magento2/pull/28549)。_ [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- MC-33788-->

* 升級不再導致Galera群集的突然故障。 此前，Galera群集在升級後立即重新索引後突然退出。 在升級期間，索引表被更改，引擎從 `MEMORY` 至 `InnoDB`。 此時，這些表的內容在Galera群集的節點之間變得不同步。 [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* 禁用PageBuilder模組不再影響產品頁的呈現。 以前，禁用模組時，產品頁面上的自定義佈局會消失，應用程式顯示一個空白頁面。

<!-- ENGCOM-7219-->

* 你現在可以 `bin/magento sampledata:deploy` 使用Composer安裝Adobe Commerce後，按預期部署示例資料。 以前，應用程式引發了以下錯誤： `Git installations must deploy sample data from GitHub; see https://devdocs.magento.com/guides/v2.3/install-gde/install/sample-data-after-clone.html for more information`。 _修復由Andrii Beziazychnyi在拉式請求中提交 [27481](https://github.com/magento/magento2/pull/27481)_。 [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* 通過消除不必要的負載，店面效能得到改善 `Datepicker` 元件。 _Mateusz Krzeszowiak在拉請求中提交的修復 [27860](https://github.com/magento/magento2/pull/27860)_。 [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* 正在執行 `bin/magento setup:upgrade` 現在按預期完成。 以前，應用程式顯示用於快取的打印陣列內容。 _修復由Sathish Subramanian在拉式請求中提交 [27567](https://github.com/magento/magento2/pull/27567)_。 [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all` 現在部署在儲存面上使用的所有語言以及管理員用戶在未設定語言參數時配置的所有語言。 (`en_US` 預設情況下始終部署。) _修復由Anton Evers提交的請求 [28922](https://github.com/magento/magento2/pull/28922)_。 [GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* 禁用備份功能後，應用程式不再顯示備份菜單。 _修復由Eden Duong在拉取請求中提交 [29222](https://github.com/magento/magento2/pull/29222)_。 [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* 目錄映像幫助程式初始化現在使用產品模型而不是 `DataObject`。 _修復由jmonteros422在拉入請求中提交 [29435](https://github.com/magento/magento2/pull/29435)_。 [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* 管理員用戶現在可以保存空 **客戶令牌生存時間（小時）** 欄位（管理員） **商店**  >  **配置**  >  **服務**  >  **OAuth**  >  **訪問令牌到期**)。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* 的 **為舊URL建立永久重定向** 現在，預設情況下，對類別禁用設定。 _Vadim Malesh在拉請求中提交的修復 [28752](https://github.com/magento/magento2/pull/28752)_。 [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### 管理GWS

<!-- MC-36164-->

* 應用程式不再顯示 **添加屬性** 按鈕&#x200B;**商店** > **屬性** 或 **添加屬性集** 按鈕&#x200B;**商店** > **屬性** > **客戶**)，因為登錄管理員缺少建立這些實體的相應權限。 以前，當沒有相應權限的網站管理員嘗試建立 **屬性集** 或 **客戶** 屬性。

<!-- MC-36230-->

* 當具有特定網站受限角色的管理員嘗試從管理員建立子類別時，該應用程式不再引發錯誤。

### Adobe Stock整合

<!-- ENGCOM-7776-->

* 清除濾鏡後，Adobe Stock影像網格中的影像現在正確對齊。 _Nazar Klovanych在提取請求中提交的修復 [28366](https://github.com/magento/magento2/pull/28366)_。 [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824)。 [GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* 的 **用於** 現在，Adobe Stock庫影像詳細資訊頁面的部分將準確標識影像是否與產品關聯。 _Nazar Klovanych在提取請求中提交的修復 [28798](https://github.com/magento/magento2/pull/28798)_。 [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute` 現在，刪除指向參數上未指定的關鍵字的連結，並在編輯影像詳細資訊時刪除關鍵字標籤時插入新的關鍵字。 _修復由jmonteros422在拉入請求中提交 [29207](https://github.com/magento/magento2/pull/29207)_。 [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* 的 `Login failed` 當商家按一下 **許可證** 對於以前保存的未授權的Adobe Stock影像，不再包含HTML標籤。 _修復由Yolouiese在拉出請求中提交 [29398](https://github.com/magento/magento2/pull/29398)_。 [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* 按一下 **用於** 現在，影像「詳細資訊」頁面的部分將顯示一個網格，該網格顯示由影像篩選的所有實體。 資產篩選器也被正確設定和顯示。 以前，應用程式未在 **應用的篩選器** 的子菜單。 _Nazar Klovanych在提取請求中提交的修復 [29367](https://github.com/magento/magento2/pull/29367)_。 [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* 應用程式不再顯示 **用於** 影像「詳細資訊」頁面的「詳細資訊」部分。 _Nazar Klovanych在提取請求中提交的修復 [29367](https://github.com/magento/magento2/pull/29367)_。 [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* 添加超過最大字元數的新影像標籤時，已更正顯示問題。 _Nazar Klovanych在提取請求中提交的修復 [29367](https://github.com/magento/magento2/pull/29367)_。 [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* 現在，可以使用映像的「詳細資訊」上的「資產」篩選器按預期檢查資產 **用於** 的子菜單。 _Nazar Klovanych在提取請求中提交的修復 [29367](https://github.com/magento/magento2/pull/29367)_。 [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* 有關不同實體使用的影像的資訊(例如， `page` 和 `category`)現在已在「影像詳細資訊」頁面中列出。 _Nazar Klovanych在提取請求中提交的修復 [29367](https://github.com/magento/magento2/pull/29367)_。 [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-7778-->

* 您現在可以使用新 `UrlFilterApplier` 要對產品應用過濾器的元件，`cms_page`, `cms_block` 使用GETURL參數進行網格化。 _Gabriel da Gama在請求中提交的修復 [28932](https://github.com/magento/magento2/pull/28932)_。 [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-8019-->

* 按一下 **用於** 「媒體集」中影像的部分現在會開啟由影像按預期過濾的圖元網格。 以前，未在網格的已應用濾鏡部分中顯示影像標題。 _Nazar Klovanych在提取請求中提交的修復 [29429](https://github.com/magento/magento2/pull/29429)_。 [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* 現在，當您在媒體集中連續編輯多個影像時，應用程式會正確添加標籤。 _Nazar Klovanych在提取請求中提交的修復 [29429](https://github.com/magento/magento2/pull/29429)_。 [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* 現在，在商家刪除標籤並保存影像詳細資訊後，應用程式將刪除Adobe Stock影像的標籤。 以前，在刷新頁面之前不會刪除標籤。 _Honeymay Louiese Ignacio在請求中提交的修復 [29400](https://github.com/magento/magento2/pull/29400)_。 [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon

* Amazon支付現在在呈現付款選項之前檢查用戶是否已登錄。

* 已解決多重身份驗證和已放棄的操作站的問題。

* Amazon支付現在正確填充 `store name` 在電子郵件和其他顯示位置中。 如果 **儲存名稱** 「Amazon支付配置」中的欄位為空，擴展將檢索儲存的預設名稱（即您在管理中指定的儲存的名稱）。

* 已解決「拒絕」方案的本地化/翻譯問題。 顯示的文本不再總是以英語顯示。

### 分析

<!-- MC-33314-->

* 具有正確權限的管理員現在可以訪問高級報告和段報告。

<!-- MC-34352-->

* Adobe Commerce成功生成預先報告資料檔案，並按照預期將這些檔案發送到清單，以瞭解具有剝離資料庫的部署。 以前，應用程式未生成或發送 `quotes.csv` 檔案到清單，因此清單未生成預期報告。

### Braintree

* Braintree現在在結帳頁上應用促銷代碼時將正確金額發送到PayPal。

* Apple支付現在在結帳頁面上啟用條款和條件時按預期工作。

* 在從管理員啟用Venmo後，在案頭設備上簽出期間不再出現瀏覽器錯誤。

* 當購物者在「Comper」中輸入特殊字元時，結帳不再失敗 **名稱** 的子菜單。 以前，由於Braintree3DS API不支援非ASCII字元，身份驗證失敗。

* 使用PayPal下訂單時，應用產品現在將在簽出工作流的發運部分顯示正確的收件人名稱。

* 當購物者在結帳期間多次更改發運方法時，應用程式現在會按預期更新「訂單複查」頁。

### 捆綁產品

<!-- MC-36281-->

* 當您嘗試在安裝了清單的部署中建立產品時，應用程式不再引發異常，但 `Magento_InventoryBundleProduct` 模組已禁用。

<!-- MC-34261-->

* 應用程式現在可以正確計算包含捆綁產品的訂單的離線退款。

<!-- MC-24363-->

* 當也為簡單產品分配層價時，mini cart現在顯示捆綁產品的正確價格。 [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* 商家現在可以為捆綁產品建立貸項通知單，該通知單可提供退款，而無需退回產品。 以前，應用程式引發錯誤。 _Dzung Nguyen在請求中提交的修復 [27455](https://github.com/magento/magento2/pull/27455)_。 [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* 當購物者在購物車中添加捆綁產品而不選擇所需選項時，應用程式不再顯示冗餘驗證消息。 _Dzung Nguyen在請求中提交的修復 [27455](https://github.com/magento/magento2/pull/27455)_。 [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 MC-29908-->

* GraphQL現在支援訂購選項類型的捆綁產品 `radio` 和 `dropdown` 有多種選擇。 以前，應用程式會顯示一條消息，說明輸入無效 `BundleItem.type: radio/dropdown`。 _Michał Derlatka在請求中提交的修復 [29256](https://github.com/magento/magento2/pull/29256)_。 [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### 快取

<!-- MC-36096-->

* 本地快取儲存現在保留在中設定的時間段內 **商店** > **配置** > **常規** > **Web** > **預設Cookie設定**。 以前，Cookie的到期日被硬編碼為一天，這使其與此設定不同步。 因此，歡迎消息在預期的持續時間內沒有保留返回的客戶資訊。

<!-- ENGCOM-7780-->

* 對頁快取的調用數 `config` 已經減少。 _Fix由Lukasz Bajsarowicz在拉式請求中提交 [28992](https://github.com/magento/magento2/pull/28992)_。 [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* 清漆不再拋出 `Connection reset by peer` 按計畫重新索引大型目錄時出錯。 _修復由Matthew O&#39;Loughlin在拉入請求中提交 [26256](https://github.com/magento/magento2/pull/8815)_。 [GitHub-26255](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* 在管理中編輯了產品後，不再清除不相關產品的全頁快取。 [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### 購物車和結帳

<!-- ENGCOM-7950-->

* 直接SQL查詢已被資料提供程式取代，這提高了簽出效能。 _Fix由Lukasz Bajsarowicz在拉式請求中提交 [29376](https://github.com/magento/magento2/pull/29376)_。 [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* 「比較中的產品」和「最近比較的產品」清單現在按預期工作。 以前，當擴展比較清單時，應用程式不顯示產品，即使該部分指出清單包含產品。

<!-- MC-35329-->

* 的 **刪除** 按鈕 **按SKU添加到購物車** 的 **管理購物車** 選擇多行時，頁面現在會按預期工作。

<!-- MC-34999-->

* 當您輸入的數字與有效的SKU匹配，但這些數字的大小寫不同時，當您嘗試按SKU訂購產品時，應用程式不會再引發錯誤。 以前，當您在 **我的帳戶** > **按SKU訂購** 與有效SKU不完全匹配，應用程式拋出錯誤。

<!-- MC-25042-->

* 現在，當客戶的發運地址位於「允許國家/地區」清單中標識的國家/地區且該清單僅包括該國家/地區時，在結帳時預設選擇該地址。 以前，應用程式未選擇預設地址並顯示以下錯誤消息： `Please specify a regionId in shipping address`。

<!-- MC-24043-->

* 商家現在可以啟用 **應用於發運金額** 的 **營銷** > **購物車價格規則** > **添加新規則** 何時 **整個購物車的固定金額折扣** 的子菜單。 [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* 當購物者在開始結帳後導航到店面首頁後嘗試取消設定持久性cookie時，該應用程式不再引發異常。 以前，當購物者點擊 **不是嗎？** 在首頁上連結，應用程式引發此異常： `The shipping address is missing. Set the address and try again`。 [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* 當客戶向其購物車中添加現貨產品時，應用程式現在會顯示一個「購物車附件」成功消息。 以前添加過產品，但應用程式未顯示成功消息。

<!-- MC-35989-->

* 現在，在簽出工作流中為付款步驟顯示的表單中，將按照預期包含自定義地址屬性。

<!-- MC-36060-->

* 的 **州/省/地區** 輸入框現在按預期啟用 **我的帳戶** > **通訊簿** > **添加新地址**。

<!-- ENGCOM-7746-->

* 現在，折扣將按預期應用於裝運費用，當 **應用於發運金額** 的子菜單。 _修復由Andrii Kalinich提交的請求 [28839](https://github.com/magento/magento2/pull/28839)_。 [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* 支援關閉迷你購物車的代碼已重新構造，以刪除 `closeSidebar` 的子菜單。 已將相應的按一下綁定添加到 `[data-action="close"]` 的子菜單。 _修復由拉入請求中的lumn提交 [28906](https://github.com/magento/magento2/pull/28906)_。 [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* 新 **在購物車頁上顯示「清除購物車」按鈕** 配置設定提供顯示控制 **清除購物車** 按鈕。 預設情況下，此設定為禁用狀態。 _Pavlo Sydorenko在拉取請求中提交的修復 [27917](https://github.com/magento/magento2/pull/27917)_。 [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* 已將驗證添加到簽出工作流中的電話欄位。 _修復由Oleh Usik提交的拉入請求 [27537](https://github.com/magento/magento2/pull/27537)_。 [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* 當購物車包含可下載產品時，來賓簽出現在按預期禁用 **可共用** 和 **如果購物車包含可下載的項目，則禁用來賓簽出** 設定被禁用。 _拉入請求中由Rani Priya提交的修復 [23972](https://github.com/magento/magento2/pull/23972)_。 [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* 當購物者從客戶帳戶邊欄將產品添加到購物車時，應用程式顯示的成功消息現在包含指向購物者購物車的連結。 _修復由Ajith提交的請求 [27977](https://github.com/magento/magento2/pull/27977)_。 [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* 現在，應用程式預設為簽出工作流上的前置詞下拉選項菜單選擇一個空值。 _Vadim Malesh在拉請求中提交的修復 [28238](https://github.com/magento/magento2/pull/28238)_。 [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* 從購物車中刪除多個項目時，應用程式將顯示的彈出消息現在準確地描述了您選擇要刪除的實體的數量和類型。 _Nazar Klovanych在提取請求中提交的修復 [29490](https://github.com/magento/magento2/pull/29490)_。 [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* 當來賓用戶完成結帳時，應用程式現在顯示客戶註冊表。

<!-- MC-35607-->

* 現在，自定義客戶地址屬性欄位將按預期顯示在店面簽出工作流中。

<!-- ENGCOM-7793-->

* 應用程式現在在結帳期間檢索活動報價的當前客戶組。 以前，應用程式使用的客戶組是首次將產品添加到購物車時處於活動狀態的，如果在簽出前刪除了該客戶組，則應用程式拋出錯誤。 _Konstantin在請求中提交的修復 [28902](https://github.com/magento/magento2/pull/28902)_。 [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### 目錄

<!-- MC-31068-->

* 現在，在結帳前，應用程式會從購物者的購物車中刪除禁用的產品。 以前，當購物者在結帳完成前將禁用的產品添加到購物車時，應用程式會從購物車中刪除禁用的產品，但該產品仍保留在報價中，而購物者無法簽出。 [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* 現在，該應用程式會按預期分類最暢銷的產品。 以前，產品計數和排序結果的分頁都不正確。 [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* 購物者現在可以通過按一下比較產品邊欄中的產品名稱來開啟產品的詳細資訊頁面。 _由Eduard Chitoraga在請求中提交的修復 [27451](https://github.com/magento/magento2/pull/27451)_。 [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* `children_count` 當管理員刪除類別時，值保持正數。 以前，當管理員刪除類別時， `children_count` 其餘類別為負數。 _修復由Vitaliy Prokopov在拉入請求中提交 [28044](https://github.com/magento/magento2/pull/28044)_。 [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* 應用程式現在使用預設選項(**配置** > **Web** > **預設佈局** > **預設產品佈局**) `page_layout` 屬性。 以前，未應用所選預設值。

<!-- MC-34258-->

* 您現在可以成功對庫存產品庫存執行成批活動。 以前，當您嘗試對庫存產品庫存執行成批活動時，應用產品將顯示一個空白頁。 如果您在開發人員模式下對應用程式執行了此操作，則應用程式拋出了以下錯誤： `Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`

<!-- MC-32552-->

* 按一下時顯示的記錄總數 **添加產品** 將產品添加到目錄類別時，「產品」頁籤上的「產品」類別不再根據產品排序順序進行更改。

<!-- ENGCOM-7854 -->

* 的 `{products(filter: {sku: {eq: "some sku"}}) {…}` 查詢現在返回已轉換為預期貨幣的值。 以前， `price_tiers.final_price.value` 以基本貨幣顯示特殊價格。 _Pix由Petkovski Marjan在拉式請求中提交 [28890](https://github.com/magento/magento2/pull/28890)_。 [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### 目錄規則

<!-- MC-33487-->

* 保存具有以下條件的目錄規則時，應用程式不再引發致命錯誤： `If ALL of these conditions are FALSE:, If ALL of these conditions are TRUE:, Attribute set is default`

### 清理

<!-- ENGCOM-7281-->

* 已更正「管理銷售訂單」網格複選框的未對齊。 _修復由Tu Nguyen在拉入請求中提交 [27642](https://github.com/magento/magento2/pull/27642)_。 [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* 更正了銷售訂單地址保存處理程式中發運地址ID getter中的拼寫錯誤。 _Konstantin在請求中提交的修復 [28810](https://github.com/magento/magento2/pull/28810)_。 [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* 已更正 `getRegionNameExpresion` 方法名稱 `getRegionNameExpression`。 _修復由Pierre Grimaud在拉請求中提交 [28832](https://github.com/magento/magento2/pull/28832)_。 [GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* 冗餘 `init` 方法已從 `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php` 和 `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php`。 _修復由Oleh Usik提交的拉入請求 [28650](https://github.com/magento/magento2/pull/28650)_。 [GitHub-29009](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* `localStorage` 填充已從 `base` 至 `frontend`。 _Ihor Sviziev在拉請求中提交的修復 [28749](https://github.com/magento/magento2/pull/28749)_。 [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* 已更新Adobe Commerce徽標，並從自述檔案中刪除了多餘的空格。 _Rafael Corêa Gomes在拉取請求r̻中提交的修復 [28891](https://github.com/magento/magento2/pull/28891)_。 [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* 不必要 `overflowed` 類已從mini cart邊欄小部件中刪除。 _修復由拉入請求中的lumn提交 [28963](https://github.com/magento/magento2/pull/28963)_。 [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* 已更正「發運」頁中的錯誤CSS選擇器。 _修復由Tu Nguyen在拉入請求中提交 [28639](https://github.com/magento/magento2/pull/28639)_。 [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* 的 `lib/internal/Magento/Framework/App/Request/Http.php` 通過優化邏輯和刪除冗餘變數賦值以及過度使用函式中的返回來簡化檔案。 _修復由Chris Snedaker提交的拉入請求 [28608](https://github.com/magento/magento2/pull/28608)_。 [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* 的 `bin/magento module:status` 命令現在接受多個模組名稱作為參數。 _Chandru Rajendran在拉式請求中提交的修復 [28250](https://github.com/magento/magento2/pull/28250)_。 [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* 已修復類說明中的類型 `\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable`。 _修復由Benjamin Rosenberger提交的請求 [29451](https://github.com/magento/magento2/pull/29451)_。 [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* 的 `TierPriceManagement` 類已重構以刪除冗餘代碼。 _Fix由Lukasz Bajsarowicz在拉式請求中提交 [29202](https://github.com/magento/magento2/pull/29202)_。 [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* `autoload.php` 可讀性和返回速度得到了改進。 _修復由Vitaliy Ryaboy提交的請求 [28923](https://github.com/magento/magento2/pull/28923)_。 [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### CMS內容

<!-- MC-35971-->

* 選定預設儲存視圖的「層次結構」頁籤現在按預期顯示選定的父頁。

<!-- ENGCOM-7602-->

* 當新儲存視圖包含的CMS頁與其他儲存視圖中的頁具有相同的URL鍵時，應用程式在建立儲存視圖期間不再引發錯誤。 _Vadim Malesh在拉請求中提交的修復 [28421](https://github.com/magento/magento2/pull/28421)_。 [GitHub-28357](https://github.com/magento/magento2/issues/28357)

<!-- MC-35480-->

* 當商家建立與「公司結構」頁面具有相同URL的CMS頁面時，應用程式現在會引發錯誤。 以前，應用程式會顯示CMS頁，而不是「公司結構」頁。

### 可配置產品

<!-- MC-33523-->

* 「可配置產品編輯當前變體」(Configurable Product Edit Current Variations)清單的分頁問題已得到糾正。

<!-- MC-33406-->

* 每當購物者為可配置產品選擇選項時，應用產品就不再更新「相關產品」價格框。 以前，每當購物者為可配置產品選擇了選項時，應用程式都會更新價格框。

<!-- MC-29882-->

* 此時，應用產品將在「管理員建立訂單」頁上顯示具有可定製選項的可配置產品的正確價格。 如預期，顯示的價格是子產品價格和自定義選項價格的總和。 以前，應用程式只顯示自定義選項價格。 [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* 在應用購物車價格規則時，訂單匯總現在將顯示正確的折扣金額。 以前，規則在計算發運折扣時未正確捨入金額。

<!-- MC-33765-->

* 使用受限制範圍的管理員帳戶建立的管理員用戶帳戶現在可以按照預期建立具有屬性的可配置產品。 以前，應用程式引發了以下錯誤： `Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`。

<!-- ENGCOM-7787-->

* 使用POST時，應用程式不再引發驗證錯誤 `/V1/products` 可配置產品 `int` 值0。 以前，應用程式引發了以下錯誤： `Product with id "%1" does not contain required attribute "%2"."` _Vadim Malesh在拉請求中提交的修復 [29001](https://github.com/magento/magento2/pull/29001)_。 [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* 父產品的配置選項屬性不再分配給新可配置產品的 `size` 屬性。 _修復由Abel Truong在拉式請求中提交 [27339](https://github.com/magento/magento2/pull/27339)_。 [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### Cookie

<!-- ENGCOM-7156-->

* 應用程式現在最多建立一個 `mage-translation-file-version` 和 `mage-translation-storage` 每個會話的cookie。 _Ihor Sviziev在拉請求中提交的修復 [27364](https://github.com/magento/magento2/pull/27364)_。 [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### 克隆

<!-- MC-35884-->

* 消息隊列使用者配置已擴展，新參數有助於控制使用者和保存伺服器資源，並可能降低使用者隊列CPU消耗。 請參閱 [配置消息隊列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) 的 `maxIdleTime`。 `sleep`, `onlySpawnWhenMessageAvailable` 參數。

<!-- ENGCOM-7863-->

* `cron` 如  `3/10 * * * *` 現在按預期計畫。 _修復由Anton Evers提交的請求 [28930](https://github.com/magento/magento2/pull/28930)_。 [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes` 不再一次載入所有過期的引號。 以前，應用程式失敗並出現此致命錯誤，因為同時載入了所有過期的引號： `PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`。

### CSS

<!-- ENGCOM-7678-->

* 應用程式在 **關鍵CSS** 的子菜單。 _修復由Tu Nguyen在拉入請求中提交 [28480](https://github.com/magento/magento2/pull/28480)_。 [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* 伺服器端LESS編譯器現在會按照運行時的預期導入所有遠程CSS檔案 `bin/magento setup:static-content:deploy -f`。 以前，應用程式未導入遠程檔案並引發錯誤。 [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### 自定義客戶屬性

<!-- MC-36387-->

* 更正了有關密碼和 **職務** 欄位。

<!-- MC-33645-->

* 驗證碼現在可以在新客戶點擊 **建立帳戶** 按鈕。 以前，應用程式未建立客戶帳戶，並在客戶按一下按鈕時顯示錯誤。

<!-- MC-34024-->

* 當客戶未輸入任何資料時，結帳工作流不再顯示自定義客戶地址屬性值。

### 客戶

<!-- MC-33679-->

* 管理員客戶地址中的區域名稱現在按預期進行轉換。

<!-- MC-36226-->

* 的 **省/自治區** 現在將按照「編輯地址」頁(**我的帳戶** > **通訊簿**)。

<!-- MC-34655-->

* 當客戶按一下 **提交** 按鈕多次在已啟用不可見reCAPTCHA的整個店面中開啟表單。 以前，多次按一下此按鈕會導致類似以下內部錯誤： `Internal error: Make sure you are using reCaptcha V3 api keys`。

<!-- MC-33522-->

* 現在，將已刪除的客戶從管理員中保存僅生成錯誤消息。 以前，應用程式顯示一個空白頁並生成了包含此字串的報告： `"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`。

<!-- MC-33357-->

* 當管理員嘗試保存帳戶剛被刪除的客戶的地址時，應用程式現在會按預期顯示錯誤消息。 以前，應用程式顯示一個空白消息框。

<!-- MC-33150-->

* 已編輯簽出工作流和通訊簿中地址欄位的標籤以保持一致性。

<!-- ENGCOM-7244 -->

* 如果前端標籤的值不為null，則前端標籤現在會回退到儲存標籤。 以前，客戶屬性使用預設前端標籤。 _Toan Nguyen在拉入請求中提交的修復 [27064](https://github.com/magento/magento2/pull/27064)_。 [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* 的 `sortOrder`已更正佈局XML中的連結數。 以前，此順序被反轉，並使用降序。 _修復由Tu Nguyen在拉入請求中提交 [27340](https://github.com/magento/magento2/pull/27340)_。 [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### 客戶細分

<!-- MC-33184-->

* 批量操作已重構為非同步保存和刷新客戶細分，這提高了這些任務在包括許多客戶（超過3,000,000）的部署中的效能。

<!-- MC-36224-->

* 現在，客戶段條件在剝離資料庫部署中可以按預期工作。 以前，當您嘗試通過添加條件編輯客戶段時，應用程式引發錯誤： `SQLSTATE[42S02]: Base table or view not found`。

### 目錄

<!-- MC-32271-->

* 「省/市/自治區」下拉菜單的格式現在與整個管理員一致。

### 數位

* 當訂單包含目錄中不再存在的產品SKU時，訂單同步不再失敗。

* Web Insight資料中不再包含空的產品類別。

* Web行為跟蹤現在適用於具有特定主題配置的商戶。 新的回退選擇器解決了此問題。

* 當使用cron運行客戶同步時，訂戶狀態資料欄位不再包含空值。 （應用模擬解決了此問題。）

* 當在預設級別啟用了.dotdigital帳戶，但對主網站禁用了該帳戶時，通訊簿映射現在可以按預期工作。

* 現在為包含加號(「+」)的電子郵件地址生成優惠券（使用用於優惠券生成的外部動態內容URL）。

* 當聯繫人的聯繫人 `last_subscribed_at` 值為空。

* 已解決影響早期版本的升級錯誤(日期為4.5.2)。

* 已修復4.5.3中引入的在準備用戶導出時使用獲取用戶狀態的方法影響的回歸問題。

* 已同步訂閱者（在日誌和螢幕中顯示）的總數現已正確計算。

### 可下載

<!-- MC-35026-->

* 「我的可下載產品」區域現在顯示與已購買的可下載產品的連結，這些產品是按預期分組的產品的一部分。

<!-- MC-34262-->

* 按一下可下載產品 **示例** 「管理產品」(Admin product)頁面中的「」(Admin)「」(Product)「按鈕現在按預期下載示例。 以前，當您按一下 **示例**，應用程式顯示以下錯誤： `The product that was requested doesn't exist. Verify the product and try again`。

<!-- ENGCOM-7757-->

* 購物者現在可以下載庫存不足的可下載產品樣本。 以前，當購物者試圖下載樣本時，應用程式開啟了一個新標籤，但沒有顯示資訊性消息或開始下載過程。 _Vadim Malesh在拉請求中提交的修復 [28898](https://github.com/magento/magento2/pull/28898)_。 [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* 當購物者嘗試為可下載產品設定送貨地址時，應用程式顯示的異常消息已得到改進。 _Michał Derlatka在請求中提交的修復 [28904](https://github.com/magento/magento2/pull/28904)_。 [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* 產品 `stock_item` 當您使用RESTPUT調用更新時，資料會更新，並且可下載的產品連結和示例會按預期保留 `stock_item` 值。 以前，在產品更新後，產品不再包含下載內容的連結。 _Vadim Malesh在拉請求中提交的修復 [28799](https://github.com/magento/magento2/pull/28799)_。 [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* 當客戶為只包含可下載產品的訂單設定發運地址時，應用程式現在會顯示更加資訊的消息。

### 動態塊（以前的標題）

<!-- MC-33266-->

* 建立動態塊並添加相關目錄價格規則時，表標題現在與資料表（如預期）匹配。

### 電子郵件

<!-- MC-32789-->

* 如果客戶電子郵件在建立訂單後發生更改，則應用程式現在會將有關訂單更改的電子郵件通知發送到正確的客戶電子郵件。

<!-- MC-36015-->

* 發送給客戶的訂單更新電子郵件現在包含正確的訂單狀態。 以前，如果訂單狀態從 `processing` 到另一狀態時，訂單電子郵件未反映狀態更改。

<!-- MC-34107-->

* 在來賓簽出期間，應用程式不再顯示有關現有帳戶的誤導性消息。 以前，當來賓定位到結帳頁，然後定位回發運頁時，應用產品將顯示以下錯誤： `You already have an account with us. Sign in or continue as guest`。

<!-- MC-33905-->

* 自定義電子郵件模板現在載入的元素與本機預設電子郵件模板相同。 以前缺少某些元素，包括變數值。

<!-- MC-33700-->

* 現在，您可以建立一個電子郵件模板，該模板可通過 `Content-Type: "text/plain"`。 以前，應用程式忽略了模板中指定的內容類型。 _修復由2個六位數字提交的拉入請求 [26474](https://github.com/magento/magento2/pull/26474)_。 [GitHub-26471](https://github.com/magento/magento2/issues/26471)

<!-- ENGCOM-7576-->

* 已從電子郵件「預覽」模板中刪除了不必要的CSS。 _修復由Tu Nguyen在拉入請求中提交 [27828](https://github.com/magento/magento2/pull/27828)_。 [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* 電子郵件模板中與頁腳已顯示的文本重複的文本已被刪除。 _Paweł Tylek在拉入請求中提交的修復 [27356](https://github.com/magento/magento2/pull/27356)_。 [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* 現在，產品警報電子郵件將從訂閱警報的商店發送。 以前，此電子郵件始終從預設儲存區發送。 _修復由馬切伊·帕夫沃斯基在拉式請求中提交 [26534](https://github.com/magento/magento2/pull/26534)_。 [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* 副本 `customer.name` 變數已從電子郵件模板中刪除。 _Paweł Tylek在拉入請求中提交的修復 [29054](https://github.com/magento/magento2/pull/29054)_。 [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33232-->

* 發送給分配給公司的銷售代表的通知電子郵件現在包括分配的公司徽標。 以前，通知電子郵件包含預設的LUMA徽標，而不是上載的公司徽標電子郵件。

### 框架

<!-- MC-35893-->

* 的 **發送資料的時間** 管理員欄位 **商店** > **配置** >常規> **高級報告** 頁面現在正確呈現。

<!-- MC-34153-->

* 現在，當「訂單」清單跨越多頁時，購物者可以更改每頁顯示的訂單數。 以前，當您導航到訂單的最後一頁並嘗試更改每頁顯示的訂單數時，應用產品將顯示此消息： `You have placed no orders`。 這是已知的2.4.0題。

<!-- MC-35020-->

* 現在，在實施級別2快取時，您可以將產品添加到類別中。

<!-- MC-29755-->

* `X-Magento-Tags` 標頭不再超過HTTP規範允許的大小。 以前，包含許多產品的類別頁返回 `X-Magento-Tag` 導致503錯誤的標頭。

<!-- MC-34257-->

* `sales_order_shipment_track_save_commit_after` 現在，在您使用REST API建立發運時按預期觸發。

<!-- MC-33898-->

* 應用程式現在在 `di compile` 由於不存在依賴關係而失敗。 以前，顯示的消息未標識發生異常的類。

<!-- MC-32929-->

* 當Redis使用所有允許的記憶體時，應用程式不再引發以下致命錯誤： `report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'`。

<!-- MC-18021-->

* 購物者現在可以在 `Persistent` 模組已禁用。 [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### 常規修復

<!-- MC-36048-->

* 對管理員上的產品排序(**商店** > **屬性** > **產品**)現在顯示符合搜索條件的所有產品。 以前，應用程式不顯示記錄，為了對記錄進行排序，您必須導航到搜索結果的第一頁。

<!-- MC-36343-->

* 中的URL周圍不必要的引號和轉義 `tracking.phtml` 已移除。

<!-- MC-35998-->

* 的 `var/log/system.log` 現在，當用戶嘗試訪問靜態目錄下的非現有資源檔案，並且啟用了SCD OnDemand和生產模式時，將顯示更準確的消息。 應用程式現在記錄404錯誤。 以前，應用程式記錄的消息與在開發人員模式下發生錯誤時記錄的消息相同。

<!-- ENGCOM-7286-->

* JavaScript精簡現在正常工作。 精簡檔案解析程式不再將變數洩漏到全局範圍。 以前， `ctx`。 `origNameToUrl`, `baseUrl` 窗口下的變數被洩漏。 _Mateusz Krzeszowiak在拉請求中提交的修復 [27622](https://github.com/magento/magento2/pull/27622)_。 [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* 調試阻止對象建立的錯誤時，應用程式現在將打印並記錄原始異常消息。 以前，僅記錄消息。 _修復由Marvin Hinz在拉取請求中提交 [26572](https://github.com/magento/magento2/pull/26572)_。 [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* 已改進提交資料庫更改後的回調執行。 以前，如果一個回調失敗而出現異常，則所有回調都失敗。 _修復由Alok Patel在拉入請求中提交 [27134](https://github.com/magento/magento2/pull/27134)_。 [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* 沒有定義依賴關係的模組的混合不再引發此錯誤： `TypeError: Cannot read property 'map' of null`。 _Mateusz Krzeszowiak在拉請求中提交的修復 [27690](https://github.com/magento/magento2/pull/27690)_。 [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* 儲存填充現在僅在 `localStorage` 或 `sessionStorage` 不可用。 _Mateusz Krzeszowiak在拉請求中提交的修復 [27619](https://github.com/magento/magento2/pull/27619)_。 [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* 現在，當購物者從第二個或後續結果頁面更改每頁顯示的結果數時，多頁店面訂單清單的行為與預期一樣。 以前，當購物者更改了顯示在 **我的帳戶** > **我的命令** 清單： `You have placed no orders`。 _Vadim Malesh在拉請求中提交的修復 [28417](https://github.com/magento/magento2/pull/28417)_。 [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* 已棄用 `addWarning` 方法已替換為 `addWarningMessage` 方法。 _修復由kishorekumarkesavan在拉請求中提交 [28264](https://github.com/magento/magento2/pull/28264)_。 [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* 使用 `bin/magento` 命令行命令現在與要求和編碼標準一致。 _Fix由Lukasz Bajsarowicz在拉式請求中提交 [28351](https://github.com/magento/magento2/pull/28351)_。 [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- MC-33744-->

* 如果將CMS頁分配給多個儲存視圖，則應用程式不再在站點層次結構中顯示CMS頁。

<!-- ENGCOM-7511-->

* 保存屬性 `backend_type = static` 不再刪除 `frontend_class` 的子菜單。 _在拉式請求中由jiten-patel提交修復 [27369](https://github.com/magento/magento2/pull/27369)_。 [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* 不必要的代碼和 `responsive.js` 已從主題載入的檔案中刪除。 _Mateusz Krzeszowiak在拉請求中提交的修復 [27617](https://github.com/magento/magento2/pull/27617)_。 [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* 已將驗證添加到 **符號數** 「管理驗證碼配置」頁上的欄位。 _修復由Eden Duong在拉取請求中提交 [29199](https://github.com/magento/magento2/pull/29199)_。 [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* RSS源現在正確載入。 以前，雖然在刷新頁面時按預期載入了源，但該源未首次載入。 _Vadim Malesh在拉請求中提交的修復 [29455](https://github.com/magento/magento2/pull/29455)_。 [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* 現在，當購物者重新登錄時，會按預期續訂過期的持久會話。

<!-- MC-35230-->

* 在中設定的密碼生存期 **商店** > **配置** > **高級** > **管理** 現在很榮幸。 以前，如果您 **忘記密碼？** 當系統提示重置密碼時，您可以繞過密碼重置。

<!-- MC-34369-->

* 現在，優惠券代碼僅應用於指定的產品。 以前，應用程式將優惠券代碼應用於購物車中的所有產品。 [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* 在庫存或價格更新發生時，不再重新設定購物車到期設定。 以前，當購物車設定為在24小時後過期，並且發生了庫存更新或價格更新時，索引器將填充 `updated_at table`，以重新設定到期時間。

<!-- MC-33313-->

* 當管理員將具有活動購物車的客戶分配給客戶組時，該應用程式不再引發致命錯誤。

<!-- ENGCOM-7834 -->

* 從中選擇工具欄選項 **開發人員工具**  >  **網路**  運行Chrome瀏覽器時在產品頁面上不再初始化 `toolbar.js` 兩次。 _Paweł Tylek在拉入請求中提交的修復 [28838](https://github.com/magento/magento2/pull/28838)_。 [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* 應用程式現在將管理員用戶的ACL角色ID添加到產品類別樹快取ID中。 這將限制具有有限範圍的管理員可以按預期查看的類別樹。 _由quangdo-aligent在拉式請求中提交的修復 [27429](https://github.com/magento/magento2/pull/27429)_。 [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### 禮品卡

<!-- MC-36118-->

* 禮品卡帳戶現在會按預期捕獲訂單編號。 以前， **詳細資訊** 選定禮品帳戶的「歷史記錄」頁籤中的欄位未顯示訂單ID。

<!-- MC-34519-->

* 現在，使用逗號作為十進位分隔符將按預期工作。 以前，逗號分隔符忽略小數值。

<!-- MC-34469-->

* 禮品卡現在按預期顯示在迷你購物車中。 以前，應用程式將HTML對象呈現為文本。

<!-- MC-33851-->

* 貸項通知單現在正確反映了涉及折扣產品的訂單的總計，以及通過禮品卡和商店貸項的組合支付的訂單的總計。

### Google標籤經理

<!-- MC-33729-->

* 在簽出時，應用程式不再引發JavaScript錯誤 **Cookie限制模式** 已啟用設定和Google標籤管理器。

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* 購物者可在結帳時選擇禮品郵件和包裝選項。 GraphQL現在介紹不同類型購物車物品的禮品消息選項。 請參閱 [`setGiftOptionsOnCart` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) 和 [`updateCartItems` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html)。 _修復由Oleh Usik在拉取請求中提交 [28519](https://github.com/magento/magento2/pull/28105)。 [27956](https://github.com/magento/magento2/pull/27956)。 [28072](https://github.com/magento/magento2/pull/28072)。 [28072](https://github.com/magento/magento2/pull/28072)和246，在私人回購夥伴 — magento2ee中_。 [GitHub-253](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* 客人和客人可以撰寫產品評論。 客戶還可以檢索其產品審查歷史記錄。 請參閱 [建立產品審閱](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) 和 [productReviewRatingsMetadata查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) 有關檢索有關審閱基礎架構的資訊的資訊。 _由Eduard Chitoraga在請求中提交的修復 [27882](https://github.com/magento/magento2/pull/27882)_。 [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7800 7841-->

* 客戶可以將獎勵積分應用或刪除到他們的購物車。 他們也可以看他們的獎勵點歷史。 請參閱 [`applyRewardPointsToCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/apply-reward-points.html) 和 [`removeRewardPointsFromCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-reward-points.html) 討論管理購物車中的獎勵積分。 _Petkovsi Marjan在撤回請求中提交的修復程式：私人回購夥伴285-magento2ee和私人回購夥伴Dmitriy Gallyamov在撤回請求中提交的284和281 — 私人回購夥伴 — magento2ee_。 [GitHub-28835](https://github.com/magento/magento2/issues/28835)。 [GitHub-28833](https://github.com/magento/magento2/issues/28833)

<!-- ENGCOM-7968 -->

* 的 [`addProductsToCart` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) 允許您將任何類型的產品添加到活動購物車。 我們建議用這種突變代替單用途的突變，例如 `addSimpleProductsToCart`。 _修復由Yaroslav Rogoza在拉請求中提交 [27914](https://github.com/magento/magento2/pull/27914)_。 [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- ENGCOM-7801 7816-->

* GraphQL對相關產品的查詢現在返回根據目標規則建立的相關產品的值。 以前，如果從產品設定中添加了相關產品，則對相關產品（向上銷售和交叉銷售）的查詢僅返回值。 _Ulzii在私人回購夥伴 — magento2ee的拉式請求288中提交的修復_。 [GitHub-28566](https://github.com/magento/magento2/issues/28566)

<!-- MC-34187-->

* 新 `availableStores` query返回同一網站下可用的多個儲存的配置屬性清單（基於當前儲存）。 它不會公開網站清單。 請參閱 [`availableStores` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/available-stores.html)。 _Dmitriy Gallyamov在拉請求中提交的修復 [28794](https://github.com/magento/magento2/pull/28794)_。 [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* GraphQL現在只使用授權令牌來檢索用戶類型及其ID。 以前，GraphQL使用活動客戶的cookie在授權令牌為空時檢索此資訊。 _修復由Alexander Taranovsky提交的請求 [27373](https://github.com/magento/magento2/pull/27373)_。 [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* 我們已添加 [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) 和 [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) 管理客戶賬戶的突變。 這些新的突變需要不同的輸入對象 `createCustomer` 和 `updateCustomer` 突變。 要更改客戶的電子郵件地址，請使用 [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) 變異。 _Michał Derlatka在請求中提交的修復 [28888](https://github.com/magento/magento2/pull/28888)_。 [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* `updateCustomer` 不再允許您設定無效 `INT` 值 `gender` 參數。 _修復由Alexander Taranovsky提交的請求 [28487](https://github.com/magento/magento2/pull/28487)_。 [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* 您可以使用 `subscribeEmailToNewsletter` 讓客戶訂閱新聞簡報。 請參閱 [`subscribeEmailToNewsletter` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/subscribe-email-to-newsletter.html)。 _修復由Alexander Taranovsky提交的請求 [27586](https://github.com/magento/magento2/pull/27586)_。 [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* 已刪除 `setShippingMethodsOnCart` 變異解析器。 _修復由Alexander Taranovsky提交的請求 [27349](https://github.com/magento/magento2/pull/27349)_。 [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* 為添加的test範圍 `Please provide Email of sender` 與關聯的錯誤 `sendEmailToFriend` 變異。 _修復由Alexander Taranovsky提交的請求 [28034](https://github.com/magento/magento2/pull/28034)_。 [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* 的 `products` query現在會按照預期返回預設儲存視圖的product屬性選項標籤。 以前，此查詢返回了為Admin設定的產品屬性選項標籤。 _Dmitriy Gallyamov在拉請求中提交的修復 [28647](https://github.com/magento/magento2/pull/28647)_。 [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* 自定義屬性聚合現在返回特定於儲存的選項值。 _Dmitriy Gallyamov在拉請求中提交的修復 [28647](https://github.com/magento/magento2/pull/28647)_。 [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* 產品聚合中返回的價格間隔現在只能是數字（不允許使用通配符）。 _Dmitriy Gallyamov在拉請求中提交的修復 [28745](https://github.com/magento/magento2/pull/28745)_。 [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* 的 `categoryList` 查詢現在在使用片段時返回正確的響應。 _修復由Ulzii在拉入請求中提交 [28710](https://github.com/magento/magento2/pull/28710)_。 [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* GraphQL產品搜索現在考慮配置的類別權限。 以前，產品搜索忽略 **啟用** 設定&#x200B;**商店**  >  **配置**  >  **目錄**  >  **目錄** > **類別權限**)。 _Pix由Petkovski Marjan在拉式請求中提交 [28757](https://github.com/magento/magento2/pull/28757) 在私人回購協定中提出271`partners-magento2ee`_。 [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* 現在，您可以使用 `addSimpleProductToCart` 當購物車中的其他物品出庫時。 以前，應用程式返回了以下錯誤： `Some of the products are out of stock`。 [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* 預設的GraphQL `Category` 方法現在按照預期的類別位置排序。 _修復由Derrik Nyomo在拉請求中提交 [29301](https://github.com/magento/magento2/pull/29301)_。 [GitHub-104](https://github.com/magento/catalog-storefront/issues/104)

* 在Magento Open Source中添加了對願望清單的支援。 你可以 [添加項](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) 到 [更新項目](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) 和 [刪除項](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) 從願望清單上。 _Eduard Chitoraga在拉取請求中提交的修復 [28205](https://github.com/magento/magento2/pull/28205) 和264，私人回購夥伴 — magento2ee_。 [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* 的 [`addProductsToCart` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) 允許您將任何類型的產品添加到活動購物車。 我們建議用這種突變代替單用途的突變，例如 `addSimpleProductsToCart`。 _修復由Yaroslav Rogoza在拉請求中提交 [27914](https://github.com/magento/magento2/pull/27914)_。 [GitHub-28524](https://github.com/magento/magento2/issues/28524)

* 已添加GraphQL保管庫支援 [Payflow Pro保管庫](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) 付款方式。 _修復由Oleh Usik提交的拉入請求 [28821](https://github.com/magento/magento2/pull/28821)_。 [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* 更新GraphQL [`storeConfig` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) 包含新客戶配置設定。 _修復由Oleh Usik提交的拉入請求 [27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 已添加 [`resetPassword` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html)。 _修復由Oleh Usik提交的拉入請求 [27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 已添加 [`requestPasswordResetEmail` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html)，它將觸發提供的電子郵件地址的密碼重置電子郵件。 _修復由Oleh Usik提交的拉入請求 [27876](https://github.com/magento/magento2/pull/27876)_。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 關於KlarnaGraphQL的補充討論 [克拉納的支付方法](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) 和[`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

### 影像

<!-- ENGCOM-7691-->

* HTML影像標籤已改進。 _修復由Tu Nguyen在拉入請求中提交 [28642](https://github.com/magento/magento2/pull/28642)_。 [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### 導入/導出

<!-- MC-35479-->

* 的 `error_report.csv` 檔案現在隨內容下載，並可在內部獲得 `var/import_history/` 目錄。 以前，導入後未生成此檔案。

<!-- ENGCOM-7616-->

* 現在，使用CSV檔案導入產品將生成 `error_report.csv` 檔案。 以前，應用程式生成了檔案，但在導入完成後將其刪除。 _Vadim Malesh在拉請求中提交的修復 [28460](https://github.com/magento/magento2/pull/28460)_。 [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* 已刪除整個代碼庫的冗餘類導入。 _修復由Oleh Usik提交的拉入請求 [28696](https://github.com/magento/magento2/pull/28696)_。 [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* 應用程式現在成功導入包含未定義區域的國家/地區的客戶地址。 以前，應用程式引發了以下錯誤： `Please enter a valid region`。

<!-- MC-33277-->

* 現在，當商家在計畫新導出時選擇實體類型時，應用程式將載入正確的實體屬性集。

<!-- MC-32956-->

* 產品在 `catalog_category_product` 當管理員在管理中建立產品並將其分配給類別時，表現在按預期更新。 以前，新產品的位置總是賦0值。

<!-- MC-34939-->

* 現在，客戶資料已成功從管理員導出，導出資料網格將按預期顯示客戶資料。 以前，在導出過程中發生與記憶體分配相關的錯誤。

<!-- MC-34657-->

* 導入的CSV檔案現在可以按照預期捕獲相關產品資訊。 以前，在首次導入CSV檔案時，未始終上載相關產品資訊。

<!-- MC-37424-->

* 已刪除中未使用的構造參數 `AdvancedPricing.php`。 [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### 索引

<!-- ENGCOM-7073-->

* `Magento_CacheInvalidate` 現在，在執行以下操作時可以正確處理大標籤圖案 `PURGE`。 `sendPurgeRequest` 已重新構造以處理標籤陣列，而不是要求調用方使用 `implode()`。 _修復由Matthew O&#39;Loughlin在拉入請求中提交 [26256](https://github.com/magento/magento2/pull/26256)_。 [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* 共用索引器現在顯示 **有效** 你跑完 `bin/magento indexer:status` 重新編製索引。 以前，共用索引器 **無效** 完全重新索引後的狀態。

### 基礎設施

<!-- MC-37243-->

* 在運行PHP 7.4.9的部署上載入目錄和產品頁時不再出現問題。 以前，當您嘗試載入目錄和產品頁時，應用程式引發了此錯誤： `There has been an error processing your request. Exception printing is disabled by default for security reasons`。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* 在生產模式下呈現佈局時發生的所有異常現在都記錄在異常日誌檔案中(`var/report`)。 以前，應用程式將這些消息作為關鍵問題記錄在系統日誌中。

<!-- ENGCOM-7154-->

* 由於增加了 `ipcre.backtrack_limi`t `pcre.recursion_limit` 到約100000. _Mateusz Krzeszowiak在拉請求中提交的修復 [27270](https://github.com/magento/magento2/pull/27270)_。 [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* 攔截器的生成得到改進。 `} else {` 從攔截器中刪除了語句， `array_map` 已更換 `foreach`。 _Fix由Lukasz Bajsarowicz在拉式請求中提交 [27902](https://github.com/magento/magento2/pull/27902)_。 [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* 陣列建立現在在整個類中保持一致(`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`)。 _修復內森·德·格拉夫在拉請求中提交 [28515](https://github.com/magento/magento2/pull/28515)_。 [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* 插件已從框架中遷移出來，以遵循禁止Framework命名空間中插件的最佳做法。 _Fix由Lukasz Bajsarowicz在拉式請求中提交 [27965](https://github.com/magento/magento2/pull/27965)_。 [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7713-->

* 應用程式不再拋出 `Undefined class constant` 生成偵聽器時出錯。 _Vova Yatsyuk在拉請求中提交的修復 [28797](https://github.com/magento/magento2/pull/28797)_。 [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* 使用已使用的名稱保存整合時，當應用程式引發整合異常時，表單資料現在會持續。 _修復由Aditya Yadav提交的請求 [26660](https://github.com/magento/magento2/pull/26660)_。 [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* 應用程式不再截斷 `X-Forwarded-For` 標題到32個字元。 _Ihor Sviziev在拉請求中提交的修復 [27221](https://github.com/magento/magento2/pull/27221)_。 [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* 使用自定義管理域時，檢查重定向是否為內部的邏輯現在在管理中工作正常。 以前，此邏輯的問題導致許多管理員重定向到預設儲存的首頁。 _Vadim Malesh在拉請求中提交的修復 [29066](https://github.com/magento/magento2/pull/29066)_。 [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* 與 `styles-old.less` 檔案已被刪除，而linting不再標識錯誤。 _修復由Tu Nguyen在拉入請求中提交 [28895](https://github.com/magento/magento2/pull/28895)_。 [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php` 已重新計算。 _修復由Vitaliy Ryaboy提交的請求 [28975](https://github.com/magento/magento2/pull/28975)_。 [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* `ResourceConnection.php` 已重新構造，以提高類的可讀性。 _Fix由Lukasz Bajsarowicz在拉式請求中提交 [29341](https://github.com/magento/magento2/pull/29341)_。 [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* 已更新內置Web伺服器的README檔案，以包含所有Elasticsearch參數。 _Pix由Yevhenii Dumskyi在請求中提交 [29300](https://github.com/magento/magento2/pull/29300)_。 [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* 的 `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave` 插件現在按預期返回值。 以前，此插件未返回值，因此保存儲存視圖會導致錯誤。 _修復由Pieter Hoste在拉請求中提交 [29035](https://github.com/magento/magento2/pull/29035)_。 [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* 已添加以下對魔術方法的支援 `DataObject`:

   * 支援新擴展 `get/set/has/uns` 幻方法(使用 `__call`)
   * 支援SessionManager，它將所有調用轉發到DataObject容器
   * test擴展覆蓋
   * 已更新test以檢查篩選的錯誤
   * 將PHPStan檢查級別從0增加到1。 _Oleksandr Kravchuk在拉取請求中提交的修復 [27905](https://github.com/magento/magento2/pull/27905)_。 [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface` 現在可能不止是字串。 A.對 `magentoConfigFixture` 僅字串是先前拉取請求的意外結果，已還原。 _Kristof, Fooman在請求中提交的修復 [29305](https://github.com/magento/magento2/pull/29305)_。 [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* 的 `convertConfigTimeToUtc` 方法不再由於將不正確的參數發送到 `Phrase` 建構子。 _Kos Rafał在拉請求中提交的修復 [29483](https://github.com/magento/magento2/pull/29483)_。 [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* 價格篩選器現在在網格資料上按預期工作 `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition` 和 `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()` 返回包含 `from` 或 `to` 字串資料。 以前，應用程式引發了以下錯誤： `Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`。 _Nikita Sarychev在拉請求中提交的修復 [29214](https://github.com/magento/magento2/pull/29214)_。 [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* 已添加擴展點，以支援將HTML添加到類別頁。 這會更正先前拉請求引入的錯誤。 _修復由Girchak提交的拉式請求 [29291](https://github.com/magento/magento2/pull/29291)_。 [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### 庫存

<!-- ENGCOM-7979-->

* 已從中刪除不必要的代碼注釋 `app/code/Magento/CatalogInventory/Model/StockState.php`。 _修復由Vitaliy Prokopov在拉入請求中提交 [27758](https://github.com/magento/magento2/pull/27758)_。 [GitHub-26702](https://github.com/magento/magento2/issues/26702)

### 分層導航

<!-- MC-25043-->

* 分層導航邊欄現在顯示兩個選項的布爾屬性(**是**/**不**)和匹配的產品數量。 以前，分層導航未返回 **不** 選項，用於使用Elasticsearch部署中的布爾屬性。

<!-- ENGCOM-7493-->

* 色板分層導航濾波器現在與整個Adobe Commerce使用的標準濾波器一致。 _Bartłomiej Szubert在拉式請求中提交的修復 [28015](https://github.com/magento/magento2/pull/28015)_。 [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### 記錄

<!-- ENGCOM-7692-->

* 當部署僅處於開發人員模式時，現在將記錄所有損壞的引用錯誤。 以前，在生產模式下部署時也記錄了一個錯誤，這導致錯誤日誌膨脹。 _Bartłomiej Szubert在拉式請求中提交的修復 [28735](https://github.com/magento/magento2/pull/28735)_。 [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### 媒體集

<!-- ENGCOM-8014-->

* 媒體集配置UI（管理員） **商店**  >  **配置**  >   **高級**  >  **系統**)已重組。 _Shankar Konar在請求中提交的修復 [29433](https://github.com/magento/magento2/pull/29433)_。 [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* 添加test以覆蓋 **用於** 媒體集中影像的連結。 _Nazar Klovanych在提取請求中提交的修復 [29392](https://github.com/magento/magento2/pull/29392)_。 [GitHub-1963](https://github.com/magento/adobe-stock-integration/issues/1693)

<!-- ENGCOM-8006-->

* 當商家嘗試在禁用媒體集時保存具有其關聯映像的產品時，應用程式不再引發異常。 _Nazar Klovanych在提取請求中提交的修復 [29492](https://github.com/magento/magento2/pull/29492)_。 [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

### MFTF

<!-- ENGCOM-7963 -->

* 的 `AdminSubmitAdvancedInventoryFormActionGroup`。 `AdminClickOnAdvancedInventoryLinkActionGroup`,  `AdminSetStockStatusConfigActionGroup` 現在，根據最佳做法在test內使用行動組。 _修復由Oleh USIA在拉入請求中提交 [29386](https://github.com/magento/magento2/pull/29386)_。 [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup` 現在用於在產品網格中搜索。 _修復由Oleh Usik提交的拉入請求 [29385](https://github.com/magento/magento2/pull/29385)_。 [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup` 現在用於按一下 **完成** 在「搜索類別」彈出窗口中。 _修復由Oleh Usik提交的拉入請求 [28989](https://github.com/magento/magento2/pull/28989)_。 [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup` 現在用於替換儲存前客戶登錄時使用的一系列操作。 _修復由Sathish Subramanian在拉式請求中提交 [28113](https://github.com/magento/magento2/pull/28113)_。 [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* `AdminUpdateCustomURLRewritesPermanentTest` 已重新分類，以符合MFTF的最佳做法。 _修復由Kate Kyzyma提交的請求 [28361](https://github.com/magento/magento2/pull/28361)_。 [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* Test名稱已更改以符合MFTF約定。 _Evgeny Levinsky在請求中提交的修復 [27839](https://github.com/magento/magento2/pull/27839)_。 [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### 新建操作組

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup` _修復由Oleh Usik提交的拉入請求 [29472](https://github.com/magento/magento2/pull/29472)_。 [GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup` _修復由Oleh Usik提交的拉入請求 [29142](https://github.com/magento/magento2/pull/29142)_。 [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup` _修復由Oleh Usik提交的拉入請求 [28993](https://github.com/magento/magento2/pull/28993)_。 [GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _修復由Oleh Usik提交的拉入請求 [29000](https://github.com/magento/magento2/pull/29000)_。 [GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup` 和 `AdminProductFormCategoryNotExistInCategoryListActionGroup` _修復由Alexander Steshuk在拉入請求中提交 [28287](https://github.com/magento/magento2/pull/28287)_。 [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _修復由Oleh Usik提交的拉入請求 [29133](https://github.com/magento/magento2/pull/29133)_。 [GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _修復由Oleh Usik提交的拉入請求 [29007](https://github.com/magento/magento2/pull/29007)_。 [GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup` _修復由Oleh Usik提交的拉入請求 [29134](https://github.com/magento/magento2/pull/29134)_。 [GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### 新test

<!-- ENGCOM-7600 -->

* 已添加test，以管理員用戶身份刪除CMS頁。 _修復由Dmitry Tsymbal提交的請求 [28112](https://github.com/magento/magento2/pull/28112)_。 [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* 已添加 `StorefrontShareCustomerWishlistActionGroup` test用無效電子郵件地址共用客戶願望清單。 希望清單共用的現有test(`StorefrontShareWishlistEntityTest`)。 `StorefrontCustomerShareWishlistActionGroup` 已棄用。

<!-- ENGCOM-7682 -->

* 已添加test以檢查 **僅X左閾值** 配置設定。 _修復由Oleh Usik提交的拉入請求 [27549](https://github.com/magento/magento2/pull/27549)_。 [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### 新聞稿

<!-- MC-34714-->

* 使用 `Excel XML` 選項現在會導出所有行（如預期）。 以前，導出的資料只包括頁面分頁值，而不包括所有行。

<!-- ENGCOM-7522-->

* 新聞稿訂閱電子郵件現在使用與其他新聞稿相關電子郵件相同的HTML標籤。 _Paweł Tylek在拉入請求中提交的修復 [27357](https://github.com/magento/magento2/pull/27357)_。 [GitHub-28166](https://github.com/magento/magento2/issues/28166)

<!-- ENGCOM-7788-->

* 添加test，以Admin用戶身份刪除新聞簡報訂閱者。 _修復由Dmitry Tsymbal提交的請求 [28972](https://github.com/magento/magento2/pull/28972)_。 [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* 為配置語句中不允許選項的來賓添加新聞稿訂閱test。 此test取代已棄用 `VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest` 和 `StorefrontCreateNewSubscriberActionGroup`。 _修復由Dmitry Tsymbal提交的請求 [28872](https://github.com/magento/magento2/pull/28872)_。 [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### 訂單

<!-- ENGCOM-7858-->

* 的 `GetAssetIdByContentFieldInterface` 及其實施 `MediaContent` 模組現在允許Adobe Stock整合擴展 `MediaGallery` 篩選器功能。 _Gabriel da Gama在請求中提交的修復 [29058](https://github.com/magento/magento2/pull/29058)_。 [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* 的 `CustomerAddressI` 新建立的客戶的值現在在報價中驗證。 _修復由Andrii Kalinich提交的請求 [29139](https://github.com/magento/magento2/pull/29139)_。 [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* 合計為零的貸項通知單的訂單狀態現在為 `Closed`。 以前，應用程式將其訂單狀態報告為 `Complete`。 _修復由Andrii Kalinich提交的請求 [29023](https://github.com/magento/magento2/pull/29023)_。 [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### 頁面生成器

<!-- ENGCOM-7918-->

* 的 `description` 和 `short_description` 產品屬性已重新排序，以更好地適應對Page Builder內容暫存的計畫更改。 _修復由Matt Walters提交的拉入請求 [29238](https://github.com/magento/magento2/pull/29238)_。 [GitHub-543](https://github.com/magento/magento2-page-builder/issues/543)

### 付款方法

<!-- MC-34363-->

* 此時，應用產品將顯示一條消息，提示您在按一下時輸入強制信用卡資料 **提交** 在未輸入有效付款資訊的情況下輸入管理訂單。 以前，當付款輸入欄位無效且頁變得不活動時，Braintree卡驗證程式未引發錯誤。

<!-- MC-33494-->

* 現在，您可以更改從管理員為帳戶有已儲存信用卡(Braintree)的客戶建立的訂單的發運方法。 以前，當您選擇其他發運方法時，未選擇儲存的卡，並且應用程式未下訂單。

#### 貝帕爾

<!-- MC-33879-->

* 現在，結帳工作流的「訂單複查」頁會通過Braintree訂單顯示PayPal的正確發運額，在結帳期間已更改了發運方法。 以前，當客戶在結帳工作流的「PayPal訂單複查」頁上更改發運方法時，應用產品沒有使用正確的方法更新訂單合計。

<!-- MC-34152-->

* 商家現在可以成功取消使用PayPal授權的訂單。 以前，應用程式未取消訂單並顯示以下錯誤： `Declined: 10601-Authorization has expired`。

<!-- MC-33330-->

* 在您取消訂單時，應用程式不再會清空您的購物車，方法是在完成另一訂單後關閉PayPal付款彈出窗口。

### 效能

* 三種新配置設定支援減少使用者隊列CPU消耗。 這些可選參數可增強對用戶的控制並節省伺服器資源。 請參閱 [配置消息隊列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) 的 `maxIdleTime`。 `sleep`, `onlySpawnWhenMessageAvailable` 參數。

<!-- MC-31617-->

* 插件清單配置現在在執行 `di:compile` 的子菜單。 此配置資訊基於作用域寫入到生成的元資料資料夾中。 以前，此資訊儲存在快取中。 由此帶來的效能改進包括：

   * 網路快取大小已減小
   * 許多方案的執行時間都得到了改進。

<!-- ENGCOM-7290-->

* 應用程式現在按需載入相應的滑塊構件，這改進了頁面載入。 觸摸滑塊小部件自定義項已移動到單獨的檔案，因此只能在相容設備上載入。 現在，只有在頁面上實際使用範圍綁定時才載入相應的滑塊構件類型。 _Mateusz Krzeszowiak在拉請求中提交的修復 [27616](https://github.com/magento/magento2/pull/27616)_。 [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* 多次同步訂貨的結帳效能得到提高。

<!-- MC-25062-->

* 當導入進程執行批量插入且重新索引進程同時執行從選定項中的大型插入時，不再發生死鎖。 以前，應用程式顯示以下錯誤： `PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### 退貨授權(RMA)

<!-- MC-35984-->

* 在您為退貨授權(RMA)建立發運標籤後，「退貨」頁現在將按預期工作。 以前，在為RMA建立發運標籤後，商家無法與「退貨」頁面上的任何頁面元素交互。 這是眾所周知的2.4.0問題 `MC-35984-2.4.0-CE-composer.patch` 已解決2.4.0。

<!-- MC-35826-->

* 當具有受限權限的管理員嘗試為不再位於分配的網站作用域中的產品建立返回時，應用程式現在會顯示一條資訊性錯誤消息或所有可用產品。 以前，應用程式顯示一個空白頁。

### 評論

<!-- MC-33405-->

* 唯一的鍵 `entity_pk_value-entity_type-store_id` 已添加到 `review_entity_summary` 表，它防止為同一產品ID建立重複行(`entity_pk_value`)。 以前，由於缺少唯一鍵，導致同一產品ID和SQL錯誤出現重複行。

### 銷售

<!-- MC-35675-->

* 應用程式不再分配狀態 `Complete` 在向要求零付款的訂單開票後。

<!-- MC-35888-->

* REST API生成的新發運電子郵件現在包含的發運和客戶資訊與從管理員手動建立的發運相同。 以前，此電子郵件不包含客戶名稱、跟蹤資訊、訂購的產品和其他訂購資訊。

<!-- MC-35837-->

* 當從管理員載入或自定義電子郵件時，來賓用戶名現在可以像預期的那樣在與發票和發運相關的電子郵件中顯示。

<!-- MC-35707-->

* PDF發票現在被翻譯成已下訂單的商店視圖的語言。 以前，PDF發票是用管理員語言翻譯的。

<!-- MC-35858-->

* 您現在可以根據預期從貸項通知單頁面發出退款。 [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* 現在，在「訂單」頁面上顯示的本地化區域名稱已正確翻譯。 以前，區域名稱不基於指定的區域設定，除非在「管理」中編輯。

<!-- MC-35633-->

* 通過POST建立的發運 `/rest/V1/shipment` 終結點現在正確更新訂單。 以前，應用產品建立了發運，但發運狀態仍處於處理狀態。

<!-- ENGCOM-7639 -->

* 貸項通知單現在顯示從下訂單的商店範圍導出的付款方法。 以前，貸項通知單顯示定義預設儲存範圍的名稱。 _修復由Ledian Hymetllari在拉請求中提交 [27582](https://github.com/magento/magento2/pull/27582)_。 [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### 搜索 {#search-heading}

<!-- MC-31304-->

* 現在，您可以使用QuickSearch從「管理客戶」視圖按屬性搜索產品。 以前，目錄搜索結果頁上發生異常。

<!-- MC-32518-->

* 在添加產品屬性後，應用產品現在將按照預期在類別頁上顯示可配置產品。

<!-- MC-33952-->

* Elasticsearch結果現在包括每個儲存視圖的屬性選項的正確值。 如果「下拉」或「多選」屬性在非預設儲存視圖中的選項值與在預設儲存視圖中的選項值不同，則Elasticsearch現在將該值索引或返回結果中具有該值的產品。 以前，Elasticsearch沒有為該值編製索引或返回結果中具有該值的產品。

<!-- MC-35013-->

* 按SKU搜索現在可以按預期方式使用Elasticsearch進行高級搜索。 以前，當您嘗試按SKU搜索時，應用程式顯示以下錯誤消息： `We can't find any items matching these search criteria. Modify your search`。

<!-- ENGCOM-7222-->

* 高級搜索不再允許購物者過濾負價格。 _Rohan Hapani在拉入請求中提交的修復 [27359](https://github.com/magento/magento2/pull/27359)_。 [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* 現在，範圍值將按「新建同義片語」窗體中的預期重置。 _修復由Sathish Subramanian在拉式請求中提交 [29206](https://github.com/magento/magento2/pull/29206)_。 [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### 裝運

<!-- MC-34734-->

* 升級後，應用產品現在可以正確計算發運表費率。 以前，發運表費率是根據淨價格計算的，不包括增值稅。

<!-- MC-35955-->

* 現在，當使用多個地址簽出時，客戶可以成功刪除簽出工作流的訂單審核頁面上的獎勵積分。 以前，應用程式 `404 Not Found` 客戶按一下時出錯 **刪除** 按鈕，來刪除任何地址的點。 這是2.4.0中的已知問題。

<!-- MC-33737-->

* 此時，應用產品將在將FedEx指定為發運方法的訂單的簽出工作流中以正確的幣種顯示發運費率。

<!-- MC-33267-->

* UPS發運訂單的多頁PDF發運標籤現在顯示正確數量。

<!-- MC-35514-->

* 已解決「建立包」頁的JavaScript元件問題。 以前，應用程式未顯示 **建立發運標籤** 複選框，您無法為現有訂單建立發運標籤。

### 站點地圖

<!-- ENGCOM-7924-->

* 中的站點地圖 `robots.txt` 現在是特定於儲存的。 _Vadim Malesh在拉請求中提交的修復 [29331](https://github.com/magento/magento2/pull/29331)_。 [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* 編碼值現在在 `sitemap.xml` 的子菜單。 以前，在產品名稱或影像標題中包含編碼字元時，生成的站點地圖無效。

### 暫存

<!-- MC-36458-->

* 的 **將產品設定為新** 屬性標籤現在按預期顯示在產品的詳細資訊和計畫更新頁面上。

<!-- MC-34484-->

* 現在，您可以成功預覽CMS塊的轉移計畫。 以前，應用程式引發了致命錯誤。

<!-- MC-33789-->

* 現在，在編輯具有計畫更新的CMS頁並將其從預設儲存重新分配到其他儲存時，您可以訪問「CMS預覽」頁。 以前，當您按一下預覽連結時，應用程式拋出了404錯誤。

<!-- MC-33572-->

* 現在可以使用POST `/V1/products/special-price` 更新產品的特殊價格而不指定 `price_to` 參數值。 以前，嘗試設定價格更新，但 `price_to` 指定的參數未成功。

### 儲存

<!-- MC-35853-->

* 刪除以前建立的儲存視圖不再導致使用拆分資料庫配置進行部署時出錯。 以前，應用程式引發異常。

<!-- MC-32634-->

* 現在可以導出 `config.php` 並預設來自一個網站的網站代碼，以在多個網站部署中在第二個網站上安裝和配置應用程式。 以前，導出後，預設儲存和視圖消失，並且在儲存面上出現錯誤。

### 斯瓦格

<!-- ENGCOM-7720-->

* 現在，您可以使用Swagger生成客戶令牌。 以前，在輸入有效的客戶訪問資訊時，Swagger未生成響應代碼，應用程式顯示以下錯誤： `The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`。 _Vadim Malesh在拉請求中提交的修復 [28822](https://github.com/magento/magento2/pull/28822)_。 [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### 色板

<!-- ENGCOM-7845-->

* 現在，當購物者按一下時，帶有色板的可配置產品會顯示層定價 **編輯** 在車裡。 以前，在結帳前，應用程式未在購物車中顯示層價。 _修復由Sathish Subramanian在拉式請求中提交 [29137](https://github.com/magento/magento2/pull/29137)_。 [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* 此應用產品現在將按照可配置產品變體的預期顯示層價格。

### 目標規則

<!-- MC-36162-->

* 在以下條件下，產品頁的效能已得到改善：

   * 目標規則模組已安裝
   * 已實施連結產品功能（相關、向上銷售和交叉銷售產品）

### 稅

<!-- MC-36049-->

* 在商家將產品從產品屬性集中取消分配後，應用產品將不再在產品的店面上顯示固定產品稅屬性。

### Test

<!-- ENGCOM-7874-->

* PHPUnit 9錯誤已在設備test中修復。 _修復由Anton Evers提交的請求 [29244](https://github.com/magento/magento2/pull/29244)_。 [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* 為批准已到期的折扣的採購訂單而添加的單位test將以全額方式下達訂單，而不更新採購訂單合計。 _修復由Joan He提交，請求 [18](https://github.com/magento/partners-magento2-infrastructure/pull/18)_。 [GitHub-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* `SynchronizeFilesInterface` 現在由整合test覆蓋。 _修復由jmonteros422在拉入請求中提交 [29493](https://github.com/magento/magento2/pull/29493)_。 [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* 函式已添加到 `\Magento\TestFramework\TestCase\WebapiAbstract` 它允許比較test中預期結果和實際結果的大型嵌套陣列，並允許測試人員忽略實際結果中不相關的鍵。 _Jekabs在請求中提交的修復 [29458](https://github.com/magento/magento2/pull/29458)_。 [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* 已更正預期值與實際值之反轉 `app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php`。 _Fix由Lukasz Bajsarowicz在拉式請求中提交 [29271](https://github.com/magento/magento2/pull/29271)_。 [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7886 -->

* 使用 `ObjectManager` 在test期間實例化類時，在單位test中已用new關鍵字替換。 _Fix由Lukasz Bajsarowicz在拉式請求中提交 [29272](https://github.com/magento/magento2/pull/29272)_。 [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* Test已經為這些 `updateCustomer` 變異：出生日期無效、電子郵件地址無效以及客戶姓空。 _修復由Alexander Taranovsky提交的請求 [28304](https://github.com/magento/magento2/pull/28304)_。 [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* 的 `ApiFunctional TestFramework` GraphQL客戶端現在正確解析標頭。 [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### 主題

<!-- MC-34397-->

* 在用戶代理規則中添加的主題現在在您運行時會按預期方式受到影響 `bin/magento catalog:images:resize`。 以前，只有分配給商店的主題在 `bin/magento catalog:images:resize` 是跑。

### 翻譯和區域設定

<!-- MC-20372-->

* 當管理員更改 **日期** 管理產品建立期間的欄位，或在管理區域設定為中文或日語時保存。 [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* 應用程式現在檢查區域(前端或 `adminhtml`)之後顯示內聯翻譯標籤。 以前，對 `/rest/V1/integration/admin/token` 啟用內聯翻譯時，憑據錯誤，導致在API響應中包含錯誤消息周圍的內聯翻譯標籤。 _Zach Nanninga在拉入請求中提交的修復 [28856](https://github.com/magento/magento2/pull/28856)_。 [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* 保加利亞地區已加入 `directory_country_region` 的子菜單。 _由尼古拉·拉德夫在拉請求中提交的修復 [27957](https://github.com/magento/magento2/pull/27957)_。 [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* 管理員的標題和按鈕 **客戶**  >  **添加新地址** 和 **編輯產品**  >  **高級庫存** 現在可以翻譯模型。 _修復由Sathish Subramanian在拉式請求中提交 [28174](https://github.com/magento/magento2/pull/28174)_。 [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* 現在，術語FPT可在Admin上轉換  **商店**  > **配置**  > **銷售**  > **稅**  > **固定產品稅**。 _Vadim Malesh在拉請求中提交的修復 [28108](https://github.com/magento/magento2/pull/28108)_。 [GitHub-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* 的 **在此發運** 已更改簽出工作流發運地址模式上的按鈕標籤，以匹配用於其他按鈕的駝峰案例。 此案例現在與翻譯檔案中使用的案例匹配。 以前，由於大小寫不匹配，未翻譯此標籤。 _修復由WK提交的拉式請求 [28547](https://github.com/magento/magento2/pull/28547)_。 [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### UI

<!-- ENGCOM-7514-->

* 當顯示「隱私和Cookie策略」頁時，頁腳中的隱私和Cookie策略連結現在顯示為活動連結。 _修復由Sathish Subramanian在拉式請求中提交 [28004](https://github.com/magento/magento2/pull/28004)_。 [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* 在與您從管理員中選擇的訂單關聯的發票的「發票注釋」文本區域中，已修復游標未對齊 **銷售** > **訂單**。

<!-- MC-36044-->

* 此時將顯示「建立新訂單」頁 **按SKU添加產品** 和 **添加產品** 按鈕。

<!-- MC-35974-->

* 當所選產品的產品評級可用時，應用產品現在將正確顯示「編輯複查」頁。

<!-- MC-35475-->

* 應用程式現在正確顯示運行Safari的iPhone上的管理員客戶編輯頁。

<!-- MC-35370-->

* 已更正「建立新訂單」頁上不必要的滾動。

<!-- MC-35345-->

* 直接按一下 **導出稅率** 「添加新稅則」頁的按鈕(**商店**  >  **稅則**)現在下載 `tax_rates.csv` 檔案。 以前，商戶必須點擊 **導出稅率** 按鈕 這是2.4.0中的已知問題。

<!-- MC-35313-->

* 的 **將選擇添加到我的購物車** 按鈕將按預期工作。 這是2.4.0中的已知問題。

<!-- MC-35296-->

* 的 **刷新** 按鈕 **最近查看的產品** 「客戶活動」頁面的部分現在按預期工作。 以前，當您按一下 **刷新**，產品清單未刷新，頁面已滾動。

<!-- MC-35412-->

* 此時，應用產品將在「條件」標籤中正確顯示用於選擇客戶出生日期的日曆表徵圖 **客戶** > **段** > **添加段**。

<!-- MC-35658-->

* 當購物者在Internet Explorer 11.x上滾動通過此頁面時，結帳工作流的結帳摘要部分不再閃爍。

<!-- MC-34602-->

* 應用程式現在可以在「庫門類別」頁面上正確顯示「按SKU訂購」小部件。 以前，未呈現此小部件的HTML代碼，且應用程式未顯示 **載入SKU清單** 的子菜單。

<!-- MC-37444-->

* 已使用禁用的UI元件 `this.disabled(true)` 店面不再出現。 [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* 應用程式現在可以在移動視圖中正確顯示最近查看的產品小部件。 _修復由Tu Nguyen在拉入請求中提交 [27572](https://github.com/magento/magento2/pull/27572)_。 [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* 從管理員更改產品的位置現在反映在店面的產品位置。 _Oleg Aleksin在拉取請求中提交的修復 [28150](https://github.com/magento/magento2/pull/28150)_。 [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* 登錄表單樣式現在與空白主題中其他表單上的樣式一致。 已刪除設定容器控制換行輸入欄位寬度的不必要樣式。 _修復由Tu Nguyen在拉入請求中提交 [28084](https://github.com/magento/magento2/pull/28084)_。 [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* 的 **確定** 按鈕「刪除產品確認」彈出窗口的行為與預期一致。 _修復由Tu Nguyen在拉入請求中提交 [28083](https://github.com/magento/magento2/pull/28083)_。 [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* 在載入頁面期間，產品庫元素不再閃爍。 _Mateusz Krzeszowiak在拉請求中提交的修復 [27871](https://github.com/magento/magento2/pull/27871)_。 [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* 現在，控制欄位寬度的CSS類將按照預期在整個Admin中應用於「開始時間」元素。 _Shankar Konar在請求中提交的修復 [29511](https://github.com/magento/magento2/pull/29511)_。 [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* 「條款和條件」文本標籤現在可以正確顯示較長的文本字串。 _Bartłomiej Szubert在拉式請求中提交的修復 [29413](https://github.com/magento/magento2/pull/29413)_。 [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* 已重寫訂單失敗頁的標題以保證準確性。 以前，當購物者取消訂單時，應用程式會顯示一個標題為： `We received your order!`。 _修復由Angelo Romano提交的拉式請求 [29410](https://github.com/magento/magento2/pull/29410)_。 [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* 已取消訂單視圖頁面上已取消的項目總數現在在已取消訂單視圖頁面上正確標識。 以前，此欄位已標籤 **到期總額**。 _Madhu Rajawat在拉請求中提交的修復 [27516](https://github.com/magento/magento2/pull/27516)_。 [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* 「建立可配置產品」(create configurat product)頁面上的切換按鈕現在可以按預期方式工作。 _修復由Tu Nguyen在拉入請求中提交 [28032](https://github.com/magento/magento2/pull/28032)_。 [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* 「高級屬性屬性」頁上的高級屬性屬性塊表徵圖現在的行為與預期一致。 _修復由Tu Nguyen在拉入請求中提交 [28032](https://github.com/magento/magento2/pull/28032)_。 [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* 現在，系統配置頁的「管理」部分將展開，以在嘗試保存新模組的配置設定時按預期顯示必填欄位。 _Bartłomiej Szubert在拉式請求中提交的修復 [28285](https://github.com/magento/magento2/pull/28285)_。 [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* 模式設定為時放大鏡的已更正行為 `inside`。 _修復由Sean van Zuidam提交的請求 [29077](https://github.com/magento/magento2/pull/29077)_。 [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* 更正了購物者在頁腳的訂閱欄位中輸入無效電子郵件地址時導致的異常長的輸入欄位寬度。 _Dipesh Rangani在拉請求中提交的修復 [27106](https://github.com/magento/magento2/pull/27106)_。 [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* 安 `Uncaught ReferenceError` 添加新標籤並將滑鼠游標移到該標籤上時，錯誤不再出現在dev控制台中。 _Nazar Klovanych在提取請求中提交的修復 [29392](https://github.com/magento/magento2/pull/29392)_。 [GitHub-1700](https://github.com/magento/magento2/issues/1700)

<!-- ENGCOM-7635-->

* 已刪除未使用的 `AdminAnalytics` test(`TrackingScriptTest`)。 _Fix由Lukasz Bajsarowicz在拉式請求中提交 [28605](https://github.com/magento/magento2/pull/28605)_。 [GitHub-28850](https://github.com/magento/magento2/issues/28850)

<!-- ENGCOM-7142 -->

* 已解決運行連續test時靜態屬性的序列化和反序列化問題。 _帕維爾·貝斯特里茨基應請求提交Fix [26175](https://github.com/magento/magento2/pull/26175)_。 [GitHub-28319](https://github.com/magento/magento2/issues/28319)。 [GitHub-29313](https://github.com/magento/magento2/issues/29313)

### URL重寫

<!-- MC-34483-->

* 將儲存視圖移動到其他網站不再重置URL。 以前，應用程式錯誤地重新生成了CMS和產品URL重寫。

* 現在，您可以成功預覽CMS塊的轉移計畫。 以前，應用程式引發了致命錯誤。

<!-- MC-33028-->

* 當將儲存視圖分配給其他儲存時，應用程式現在將保留現有目錄URL重寫。 以前，應用程式刪除了特定於儲存的URL重寫。

### 清漆

<!-- ENGCOM-7761-->

* 重新啟動清漆不再導致503個錯誤。 _Ihor Sviziev在拉請求中提交的修復 [28137](https://github.com/magento/magento2/pull/28137)_。 [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### 保管庫

<!-- MC-34674-->

* 在 **保存以供以後使用** 複選框。

### 視覺跟蹤器

<!-- MC-35574-->

* 在啟用「可視採購商」和「庫存」中的產品排序時，應用產品現在將顯示來源庫存，而不是預設產品庫存。

### Web API框架

<!-- MC-36084-->

* 現在，使用REST建立的發票包括與在管理員中建立的發票類似的禮品卡資訊。 以前，使用POST `/V1/order/:id/invoice` 要開票，訂單未顯示已核銷的禮品卡代碼或禮品卡金額。

<!-- MC-35838-->

* 具有多個網站的商家現在可以使用REST API建立和更新產品，同時保留影像和影像角色繼承。 以前，當商家使用REST API建立和更新產品，並且更新了產品以用於商店視圖，並且為該商店視圖載入和保存了預設映像角色時。 因此，在更新後，儲存視圖映像角色不再繼承預設作用域。

<!-- MC-36419-->

* 當資源權限允許訪問時，未劃分範圍的整合用戶帳戶現在可以通過REST API訪問資源。

<!-- MC-35975-->

* 搜索條件篩選器現在可以按照預期對在建立可配置產品期間使用的產品屬性進行操作。 [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* 客戶組ID現在已驗證為POST `/rest/V1/customers` 請求。 以前，在您使用無效時，應用程式未顯示錯誤消息 `group_id` 在這些請求中。 _Vadim Malesh在拉請求中提交的修復 [28903](https://github.com/magento/magento2/pull/28903)_。 [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* 預設情況下，不會為匿名REST調用建立PHP會話。 以前，會話甚至在不必要時也開始。 _修復由馬切伊·帕夫沃斯基在拉式請求中提交 [26032](https://github.com/magento/magento2/pull/26032)_。 [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* 使用各種REST端點更新包含自定義選項的訂單不再刪除自定義選項資訊。 以前，中的值 `info_buyRequest` 已刪除。 _Vadim Malesh在拉請求中提交的修復 [28483](https://github.com/magento/magento2/pull/28483)_。 [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* 使用GET `V1/customers/me` 現在榮譽 **共用客戶帳戶**  設定（管理員） **商店** >  **配置**  >  **客戶**  >  **客戶配置**  > **帳戶共用選項**)。 _帕維爾·貝斯特里茨基應請求提交Fix [28213](https://github.com/magento/magento2/pull/28213)_。 [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* 與地址相關的擴展屬性可以設定為資料陣列。 以前，當包含POST請求時，應用程式引發錯誤  `extension_attributes` 已發送 `estimate-shipping-methods`。 此錯誤由先前的提交引入，它影響了在上設定的任何擴展屬性 `Magento\Quote\Api\Data\AddressInterface` 不是物體。 _修復由Alexander Menk在拉入請求中提交 [27338](https://github.com/magento/magento2/pull/27338)_。 [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* 現在，在使用PUT更新客戶時可以指定單個欄位 `V1/customers/:id` 端點。 以前，終結點要求您指定建立客戶所需的客戶電子郵件和其他欄位。 _Vadim Malesh在拉請求中提交的修復 [28332](https://github.com/magento/magento2/pull/28332)_。 [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### 網站限制

<!-- MC-32366-->

* 啟用網站限制不再阻止以來賓身份登錄的客戶的清漆ESI請求。 以前，這些來賓無法訪問首頁主菜單。

<!-- MC-32369-->

* 當啟用網站限制時，應用程式現在將按預期載入產品首頁。

### 願望清單

<!-- MC-35810-->

* 現在，您可以使用願望清單搜索功能在啟用了多個願望清單支援的部署中在公共願望清單中查找產品。 以前，在客戶使用希望清單搜索查找產品後，選擇它，然後按一下 **添加到購物車**，應用程式未將產品添加到購物車中並顯示以下錯誤： `Invalid Form Key. Please refresh the page`。

<!-- MC-35622-->

* 客戶現在可以從願望清單本身更改願望清單中產品的數量。 以前，應用程式未更新產品數量，也未顯示消息。

<!-- MC-35618-->

* 客戶現在可以從願望清單本身更改願望清單中已分組產品的數量。 以前，應用產品未更新產品數量或顯示消息。

<!-- MC-34408-->

* 現在，「儲存」「類別」頁面會按預期顯示希望清單搜索小部件。

<!-- ENGCOM-7580 7285-->

* 填充 `Map`。 `WeakMap`。 `FormData`, `MutationObserver` 現在僅根據需要載入。 _修復由Dmitry Tsymbal提交的請求 [28330](https://github.com/magento/magento2/pull/28330) 馬特烏什·克爾澤索維亞克 [27618](https://github.com/magento/magento2/pull/27618)_。 [GitHub-28377](https://github.com/magento/magento2/issues/28377)。 [GitHub-28382](https://github.com/magento/magento2/issues/28382)

<!-- ENGCOM-7561-->

* 願望清單更新過程現在支援同時更新願望清單項及其說明。 _由Eduard Chitoraga在請求中提交的修復 [28222](https://github.com/magento/magento2/pull/28222)_。 [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7564-->

* 現在，申請程式正確驗證了購物者可以建立的最大願望清單。 _Eduard Chitoraga在私人回購夥伴Magento2ee的撤回請求247中提交的修復_。

<!-- MC-36250-->

* 管理員現在可以配置一個可配置產品，該產品已由客戶從非預設商店添加到希望清單。 以前，當客戶還從非預設商店添加了可配置產品時，應用程式拋出錯誤。

<!-- ENGCOM-7660-->

* 已添加一個test，用於與超過允許數量的電子郵件共用客戶的願望清單。 _修復由Dmitry Tsymbal提交的請求 [28641](https://github.com/magento/magento2/pull/28641)_。 [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* 已添加一個test，以Admin用戶身份從客戶的希望清單中刪除項目。 _修復由Dmitry Tsymbal提交的請求 [28632](https://github.com/magento/magento2/pull/28632)_。 [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* 已添加用於禁用希望清單功能的test。 _修復由Dmitry Tsymbal提交的請求 [28635](https://github.com/magento/magento2/pull/28635)_。 [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* 已添加在共用客戶願望清單時使用無效電子郵件地址的test。 `StorefrontShareWishlistEntityTest` 已重新計算。 `StorefrontCustomerShareWishlistActionGroup` 已棄用。 _修復由Dmitry Tsymbal提交的請求 [28330](https://github.com/magento/magento2/pull/28330)_。 [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* 已添加test，用於共用超出允許文本長度限制的客戶願望清單。 _修復由Dmitry Tsymbal提交的請求 [28812](https://github.com/magento/magento2/pull/28812)_。 [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## 已知問題

**問題**:使用第三方支付提供商時，用於結帳的新驗證碼功能在「訂購」頁上不能按預期工作。 運行2.3.6或2.4.1的商戶在「訂購」商店首頁上啟用了驗證碼保護，在使用第三方付款提供商（如PayPal）簽出時將看到此錯誤： `Please provide CAPTCHA code and try again`。 **解決方法**:現在可以解決此問題。 查看 [Adobe Commercev2.3.6/2.4.1結帳時驗證碼無效](https://support.magento.com/hc/en-us/articles/360051235772) 知識庫文章。 我們的下一個季度修補程式（2021年第12季度）也將包含一個修復程式。

**問題**:沒有管理員權限的用戶當前無法設定其個人2FA訪問權限。 2FA包括兩個ACL角色。 一個角色影響全局系統配置，只有在配置系統時才需要它。 第二個ACL角色影響單個用戶2FA帳戶。 管理員用戶必須配置此第二類2FA ACL。 **解決方法**:用戶登錄並看到「拒絕訪問」螢幕後，他們可以訪問 `https://<magento store>/<admin_path>/tfa/tfa/requestconfig/` 強制配置。 注：我們不建議禁用安全設定。 但是，此解決方法僅在禁用管理URL密鑰時有效。

**問題**:的 **建立帳戶** 如果購物者輸入了無效資料，則「建立新帳戶」頁上的按鈕仍處於禁用狀態。 這可以防止購物者在出錯後重新嘗試建立帳戶。 **解決方法**:應用修補程式 `MC-38509`。 下一季度版本(2.4.2 、 2.4.1-p1和2.3.6-p1)中還將包含一個修復程式，該版本定於2021年第1季度發佈。 查看 [2.4.1和2.3.6建立帳戶按鈕已禁用修復程式](https://support.magento.com/hc/en-us/articles/360051130212) 知識庫文章。  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**問題**:啟用dotdigital後，商家無法從Safari中的管理員登錄到dotdigital。 查看 [啟用dotdigital帳戶時，無法通過管理面板登錄dotdigital](https://support.magento.com/hc/en-us/articles/360050092291) 知識庫文章。

**問題**:當購物者選擇的送貨地址與計費地址不同時，頂點地址驗證在付款期間不起作用。 此問題將在2.4.2中解決。查看 [2.4.1已知問題：更新地址後，頂點地址驗證消息不會消失](https://support.magento.com/hc/en-us/articles/360050139631) 知識庫文章。

**問題**:當商家在Safari瀏覽器上保存.digital Page Builder表單時，應用程式將顯示一個空頁。 **解決方法**:重新載入頁面以應用更改。 查看 [2.4.1已知問題：保存.digital Page Builder表單後為空頁](https://support.magento.com/hc/en-us/articles/360049819092) 知識庫文章。

**問題**:在某些情況下，該應用程式會自動在客戶中登錄以前使用過的Amazon帳戶，而是提示他們在結帳時登錄Amazon支付。 查看 [2.4.1已知問題：無法更改Amazon在GoogleChrome的帳戶](https://support.magento.com/hc/en-us/articles/360049814152) 知識庫文章。

**問題**:當選擇PayPalBraintree付款和多個地址發運時，應用產品會在結帳工作流的開單頁上短暫顯示錯誤消息。 查看 [2.4.1已知問題：在使用PayPalBraintree簽出時彈出錯誤](https://support.magento.com/hc/en-us/articles/360050253211) 知識庫文章。

**問題**:當來賓客戶嘗試在禁用來賓簽出時通過Braintree向PayPal下單時，應用程式將顯示一條非資訊性錯誤消息。 查看 [2.4.1已知問題：來賓簽出期間使用Paypal通過Braintree顯示非資訊錯誤消息](https://support.magento.com/hc/en-us/articles/360050368111) 知識庫文章。

## 社區捐款

我們感謝廣大Magento Open Source，並願承認他們對本新聞稿的貢獻。 請查看以下方法，瞭解社區對當前版本的貢獻：

* 如果社區成員已為此版本提供了修復程式，我們將在這些注釋的「已修復問題」部分中標識該修復程式，並使用短語「」*由社區成員提供的修復*。

* 社區工程團隊 [Magento撰稿人](https://magento.com/magento-contributors) 按月、季度和年度保存一份最佳貢獻個人和合作夥伴清單。 在該「參與者」頁中，您可以在GitHub上跟蹤到其合併公關的連結。

### 合作夥伴貢獻

下表重點介紹了合作夥伴的貢獻。 此表列出了提供拉入請求的合作夥伴、外部拉入請求以及與其關聯的GitHub發行號（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### 個人捐款人

下表列出了社區成員的貢獻。 此表列出了外部拉入請求、與其關聯的GitHub發行號（如果可用）以及提供拉入請求的社區成員。

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### 系統要求

我們的技術堆棧構建在PHP和MySQL上。 有關詳細資訊，請參見 [系統要求](../../../installation/system-requirements.md)。

### 安裝和升級說明

可以使用Composer安裝Adobe Commerce2.4.1。

## 遷移工具包

資料遷移工具幫助將現有Magento1.x儲存資料傳輸到Magento2.x。此命令行介面包括驗證、進度跟蹤、日誌記錄和測試功能。 有關安裝說明，請參見 [安裝資料遷移工具](../../../tools/data-migration-tool/install.md)。 考慮探索或幫助 [資料遷移儲存庫](https://github.com/magento/data-migration-tool)。

的 [代碼遷移工具包](https://github.com/magento-commerce/code-migration) 幫助將現有Magento1.x儲存擴展和自定義內容傳輸到Magento2.x。命令行介面包括用於轉換Magento1.x模組和佈局的指令碼。
