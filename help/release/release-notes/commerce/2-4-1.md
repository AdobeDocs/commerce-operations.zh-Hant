---
title: Adobe Commerce 2.4.1發行說明
description: 瞭解2.4.1 Adobe Commerce版本的新功能、增強功能、錯誤修正和已知問題。
exl-id: 230df894-2347-4d68-8386-d0f0e40c2659
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '16726'
ht-degree: 0%

---

# Adobe Commerce 2.4.1發行說明

Adobe Commerce 2.4.1引進了效能和安全性增強功能，以及B2B功能集的重要新增功能。 安全性增強功能包括支援 `SameSite` Cookie屬性以及為與付款和訂單相關的API端點和下單店面頁面新增驗證碼保護。 B2B改善著重於訂單核准程式、B2B送貨方法、擴充管理員動作的記錄功能，以及增強店面安全性。

此版本包含2.4.0中包含的所有核心品質改善、超過150項核心程式碼的新修正，以及超過15項安全性增強。 其中包括由我們的社群成員解決近300個GitHub問題。 這些社群貢獻的內容包括從微幅清理核心程式碼到GraphQL的重大增強功能。

本版本已修正2.4.0中確認的所有已知問題。

{{bics}}

## 套用 `AC-3022.patch` 繼續提供DHL作為運送承運商

DHL已匯入schema 6.2版，且將於近期淘汰架構6.0版。 支援DHL整合的Adobe Commerce 2.4.4及舊版僅支援6.0版。部署這些版本的商戶應適用 `AC-3022.patch` 儘早繼續提供DHL作為運送承運商。 請參閱 [套用修補程式以繼續提供DHL作為運送承運商](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 知識庫文章，瞭解下載和安裝修補程式的詳細資訊。

## 有可用的安全性修補程式

商戶現在可以安裝時效性強的安全性修正，而不需套用完整每季版本（例如2.4.0-p1）提供的數百個功能修正和增強功能。 修補程式2.4.0.1 （Composer套件2.4.0-p1）是安全性修補程式，針對先前每季發行版本2.4.0中發現的弱點提供修正。此安全性修補程式包含套用至2.4.0版的所有修補程式。 (A *Hot Fix* 提供已發行版本的修正，可解決特定問題或錯誤。)

如需安全性修正程式的一般資訊，請參閱 [推出新的安全性修補程式發行版本](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287). 如需下載和套用安全性修補程式（包括修補程式2.3.5-p2）的說明，請參閱 [快速入門內部部署](../../../installation/composer.md). 安全性修補程式僅包含安全性錯誤修正，不包含完整修補程式中包含的其他安全性增強功能。

## 其他發行資訊

雖然這些功能的程式碼隨季度發行提供，但其中幾個專案(例如B2B、Page Builder和Progressive Web Application (PWA) Studio)也獨立發行。 這些專案的錯誤修正記錄在每個專案專用的單獨發行資訊中，可在每個專案的檔案中找到。

## 亮點

請檢視此版本中的下列重點內容。

### 大幅增強安全性

此版本包含超過15項安全性修正和平台安全性改善。 所有安全性修正已反向移植至2.4.0-p1和2.3.6。

#### 超過15項安全性增強功能，有助於關閉遠端程式碼執行(RCE)和跨網站指令碼(XSS)漏洞

目前尚未發生與這些問題相關的已確認攻擊。 不過，某些漏洞可能會被利用來存取客戶資訊或接管管理員工作階段。 這些問題大多需要攻擊者先取得管理員的存取權。 因此，我們提醒您採取一切必要步驟來保護您的管理員，包括但不限於以下工作：IP允許清單、 [雙因素驗證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)，使用VPN，使用唯一位置而非 `/admin`、以及良好的密碼衛生。 另請參閱 [可供Magento使用的安全性更新](https://helpx.adobe.com/security/products/magento/apsb20-59.html) 以討論這些已修正的問題。

#### 其他安全性增強功能

此版本的安全性改善專案包括：

* **驗證碼** 保護已新增至下列產品區域：

   * 放置訂購店面頁面和REST和GraphQL端點 <!-- MC-36067-->
   * 付款相關的REST和GraphQL端點。<!-- MC-36064-->

   預設會停用這些額外頁面的驗證碼保護。 其啟用方式與CAPTCHA所涵蓋的其他頁面相同。 此保護已新增為反暴力機制，可保護存放區免受梳理攻擊。 另請參閱 [驗證碼](https://docs.magento.com/user-guide/stores/security-captcha.html).

* **支援Cookie的SameSite屬性**. 為了支援新Cookie分類系統的Google Chrome強制執行，已更新處理Cookie的應用程式類別，以支援 `SameSite` Cookie屬性。 此屬性已設定為 `Lax` 預設值，但可明確覆寫。 <!-- MC-35389-->

* **增強式安全性掃描工具**. Adobe已與 [Sanguine Security](https://sansec.io/)，是防止數位略過的領先業者，可將超過8700個威脅簽名的資料庫整合至安全性掃描工具。 此合作關係可讓商家透過主動偵測惡意程式碼並降低誤判，即時深入瞭解其網站的安全狀態。 商戶可造訪以註冊該工具 `https://account.magento.com/scanner`. 如需詳細資訊，請參閱 [使用增強型安全性掃描工具保護您的店面](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool) 部落格貼文。

{{cve-notice}}

### 基礎架構改良

此版本包含核心品質的增強功能，可改善「架構」的品質以及下列功能區域：客戶帳戶、目錄、CMS、OMS、匯入/匯出、促銷活動和鎖定目標、購物車和結帳、B2B以及測試和預覽。

* **全網站分析工具與管理員整合**. 此 [工具](https://docs.magento.com/user-guide/reports/site-wide-analysis-tool.html) 透過24小時全年無休的即時效能監控、報告和自助服務建議，為雲端基礎結構安裝提供系統分析和檢測以進行Adobe。 商戶可以使用新的管理員 [角色資源](https://docs.magento.com/user-guide/system/permissions-role-resources.html) 以透過管理員安全地存取其「客戶詳細資料」頁面。 請參閱 [常見問題集](https://support.magento.com/hc/en-us/articles/360048646671) 以取得概覽。 <!-- SWAT-807-->

### 效能改良

* **減少Redis與Magento之間的網路傳輸大小**. 外掛程式清單設定現在會在執行期間產生 `bin/magento di:compile` 命令。 此設定資訊會根據範圍寫入產生的中繼資料夾。 以前，此資訊會儲存在快取中。 因此而帶來的效能改善包括網路快取大小減少，以及許多案例的執行時間縮短。<!-- MC-31617-->

* **增強訊息佇列消費者效能**. 三個新的組態設定支援減少消費者佇列CPU耗用量。 這些可選引數可加強控制消費者，並節省伺服器資源。 另請參閱 [設定訊息佇列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) 以取得 `maxIdleTime`， `sleep`、和 `onlySpawnWhenMessageAvailable` 引數。

* **改善執行時間** 的 `bin/magento` 命令。

### Adobe Stock整合

此版本包含Adobe Stock整合v2.1.0。

### 新增媒體集

Admin現已預設啟用「新媒體集」。 商戶現在可以對媒體集中的影像執行下列動作：

* 大量刪除影像
* 識別店面未使用的重複影像和影像，以最佳化媒體儲存
* 依使用的店面區域篩選影像，包括產品和類別內容以及CMS區塊
* 使用影像中繼資料
   * 從上傳至Media Gallery的影像檢視中繼資料
   * 編輯影像中繼資料（標題、說明和關鍵字）
   * 依影像的中繼資料搜尋影像

### 頁面產生器

Page Builder現在支援全熒幕模式，這可支援更輕鬆編輯內容，並在整個管理員中提供一致的內容編輯體驗。 另請參閱 [Workspace](https://docs.magento.com/user-guide/cms/page-builder-workspace.html). <!-- PB-543-->

### GraphQL

此版本新增GraphQL涵蓋下列功能：

* **產品評論**. 客戶和來賓可以撰寫產品評論。 客戶可以擷取其產品檢閱記錄。 另請參閱 [建立產品評論](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) 和 [productReviewRatingsMetadata查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) 有關擷取檢閱基礎結構相關資訊的資訊。<!-- MC-32349-->

* **贈品選項**. 所有客戶和來賓都可以在訂單中新增贈品訊息。 在Adobe Commerce安裝中，他們也可以新增禮品包裝、禮品收據和印刷卡到訂單中。 另請參閱 [`setGiftOptionsOnCart` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) 和 [`updateCartItems` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html) <!-- MC-32345-->

* **獎勵點數**. 客戶可以在購物車上套用或移除獎勵積分。 他們也可以檢視其獎勵點歷史記錄。 另請參閱 [`applyRewardPointsToCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/apply-reward-points.html) 和 [`removeRewardPointsFromCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-reward-points.html) 有關管理購物車中的獎勵積分的討論。<!-- MC-23366-->

* **訂單歷史記錄**. 所有客戶都可以檢視其訂單記錄的詳細資料，包括商業發票、出貨及退款。<!-- MC-20635-->

* **加入購物車**. 此 [`addProductsToCart` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) 可讓您新增任何型別的產品至使用中的購物車。 我們建議使用此突變，而不要使用單一用途的突變，例如 `addSimpleProductsToCart`. _Yaroslav Rogoza在提取請求中提交的修正 [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)  <!-- MC-21513-->

* **儲存的付款方法**. 登入的客戶現在可以在「我的帳戶」中儲存付款詳細資料(包括Braintree信用卡和使用PayPal的Braintree)。 <!-- MC-32348 35945 35946-->

* **支援Magento Open Source中的願望清單**.  您可以 [新增專案](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) 至， [更新專案](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) 在、和 [移除專案](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) 從願望清單。

* **改善客戶帳戶管理**. 我們已新增 [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) 和 [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) 管理客戶帳戶的變動。 這些新的變動需要與 `createCustomer` 和 `updateCustomer` 突變。 若要變更客戶的電子郵件地址，請使用新的 [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) 突變。

* **支援Payflow Pro Vault**. 新增的GraphQL Vault支援 [Payflow Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) 付款方式。 _Oleh Usik在提取請求中提交的修正 [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* 已更新GraphQL [`storeConfig` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) 以包含新的客戶組態設定。 _Oleh Usik在提取請求中提交的修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 已新增 [`requestPasswordResetEmail` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html)，會觸發所提供電子郵件地址的密碼重設電子郵件。 _Oleh Usik在提取請求中提交的修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **GraphQL嘉玲**. 新增或更新中關於Klarna GraphQL的主題 [卡拉納的付款方式](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) 和 [`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

請參閱 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 這些增強功能的詳細資訊。

### PWA Studio

PWA Studio v8.0.0推出新功能和增強功能：

* 適用於設計權杖、印刷樣式、顏色、核心元件和頁面版面的Venia風格指南更新 <!-- PWA-519 419-->

* 改善Venia迷你購物車體驗 <!-- PWA-236-->

* Venia店面對多個地區設定和當地語系化內容的初始支援 <!-- PWA-295-->

* Venia店面的MyAccount體驗獲得多項改善 <!-- PWA-247-->

另請參閱 [相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 以取得PWA Studio版本及其相容版本的清單。 如需有關增強功能和錯誤修正的資訊，請參閱 [PWA Studio版本](https://github.com/magento/pwa-studio/releases).

### B2B

2.4.1版引入B2B v1.3.0。此版本包括訂單核准、送貨方法、購物車和管理員動作記錄的改善。

#### 訂單核准的改善

已增強B2B訂單核准，以改善可用性並允許對採購單執行大量動作。
訂單核准和拒絕的改善專案如下：

* **沒有編輯許可權的使用者新增「檢視規則」頁面**. B2B購買者現在可以在新的「檢視規則」頁面上檢視適用於其公司的規則（如果他們無權編輯這些規則）。 <!-- BUNDLE-104 -->

* **需要我的核准索引標籤上的計數警示圖示**. 「我的採購單」檢視中的「需要我的核准」頁標現在會顯示一個計數器，指出擱置核准動作的數量。 <!-- BUNDLE-102 -->

* **大量訂單核准與拒絕**. B2B管理員和公司管理員現在可以執行大量拒絕和核准採購單。 這些變更可讓核准者在單一動作中核准或拒絕多個採購單。 <!-- BUNDLE-140 128 111 153 -->

* 商戶現在可以搜尋 **套用至** 和 **需要核准** 「我的採購單」檢視表的欄位，並可在建立規則時選取多個使用者角色。 <!-- BUNDLE-105 106-->

* 「規則設定」頁面上提供如何設定「訂單核准」規則的範例。 <!-- BUNDLE-103 -->

另請參閱 [核准規則](https://docs.magento.com/user-guide/customers/account-dashboard-approval-rules.html)

#### B2B送貨方法增強功能

B2B商家現在可以控制提供給各公司的送貨方式。 商家可以從管理員設定以下內容：<!-- BUNDLE-160 161 162 -->

* B2B公司帳戶的一組特定送貨方法
* 對每個Company帳戶使用「全部」或B2B特定送貨方法
* 每個公司帳戶的B2B送貨方法特定清單

#### 購物車改良

* 商戶現在可以允許使用者在單一動作中清除其購物車的內容，並可以在每個網站上獨立設定此功能。 <!-- BUNDLE-108 -->

* B2B購買者現在可以直接將個別專案或其購物車的全部內容新增至請購單清單。 <!-- BUNDLE-145 144-->

#### 新的管理員功能

* B2B商家可使用「依帳戶付款」作為付款方式，代表客戶從管理員建立訂單。 <!-- BUNDLE-166 178-->
* 商戶現在可以從客戶的詳細資訊頁面直接檢視與使用者相關的所有報價單。 <!-- BUNDLE-139 -->
* 商戶現在可以依公司篩選「立即線上客戶」方格。 <!-- BUNDLE-137 -->
* 管理員現在可以在「管理員」中依銷售代表篩選客戶。 <!-- BUNDLE-110 -->

另請參閱 [B2B功能](https://docs.magento.com/user-guide/configuration/general/b2b-features.html).

#### 增強店面安全性

為了減少詐騙或垃圾郵件帳戶的建立，商家現在可以在店面的新公司申請表上啟用Google reCAPTCHA。 另請參閱 [reCAPTCHA](https://docs.magento.com/user-guide/configuration/security/google-recaptcha-storefront.html).<!-- BUNDLE-154 -->

#### 已擴充管理員動作的記錄功能

在「公司」模組中採取的管理動作現在記錄在「管理動作記錄」中。 動作會從所有相關公司模組記錄： `Company`， `NegotiableQuote`， `CompanyCredit`， `SharedCatalog`.
<!-- BUNDLE-180 181 182 183 -->

此版本也包含多項錯誤修正。 另請參閱 [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### 功能測試架構(MFTF)

MFTF 3.1.0現已可用。 另請參閱 [功能測試框架變更記錄檔](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

### 廠商開發的擴充功能

請參閱下列文章，瞭解此版本功能和變更的更新：

* [Amazon Pay](https://docs.magento.com/user-guide/payment/amazon-pay.html)

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](https://docs.magento.com/user-guide/marketing/dotdigital/engagement-cloud.html)

* [克拉納](https://docs.magento.com/user-guide/payment/klarna.html)

* [頂點雲](https://docs.magento.com/user-guide/tax/vertex.html)

* [Yotpo產品評論](https://docs.magento.com/user-guide/marketing/yotpo-reviews-intro.html)

## 已修正的問題

我們已修正2.4.1核心程式碼中的數百個問題。

### 安裝、升級、部署

<!-- MC-36113-->

* 在CLI命令中使用依賴於Store模組API的協力廠商擴充功能進行安裝時不再失敗。 之前，應用程式會顯示此錯誤訊息： `The default website isn't defined. Set the website and try again`. 這是2.4.0中的已知問題。

<!-- MC-33273-->

* `bin/magento setup:di:compile` 不再擲回嚴重錯誤。 以前，在您第一次執行此命令時，應用程式會擲回錯誤，但第二次執行會導致編譯成功。

<!-- MC-34429-->

* 於宣告外掛程式時，升級不再失敗 `Magento\Framework\Encryption\Encryptor`.

<!-- MC-36231-->

* 某些主題在執行後未部署時，應用程式現在會顯示資訊性錯誤訊息 `bin/magento setup:static-content:deploy`. 先前，當部署成功完成但未部署所有套件時，應用程式未顯示錯誤。 當此命令在啟用的平行處理下執行，並且每個主題需要部署的時間超過指定的最大執行時間時，儘管未部署主題，此命令可以成功完成。

<!-- MC-35001-->

* 此 **使用預設值** 韓文付款的核取方塊(**商店** > **設定** > **銷售** > **付款方法** > **克拉納**)現在會在網站範圍變更時，維持如預期般的核取狀態。

<!-- MC-17959 ENGCOM-7629-->

* 執行中 `/bin/magento config:show vendor_module/general/value` 現在傳回 `0` 或如預期般為空字串。 先前傳回 `Configuration for path: "vendor_module/general/value" doesn't exist`. _Vadim Malesh在提取請求中提交的修正 [28549](https://github.com/magento/magento2/pull/28549)._ [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- MC-33788-->

* 升級不再導致Galera叢集突然失敗。 先前，Galera叢集在升級後立即重新索引後突然退出。 在升級期間，索引表格會變更，而引擎會從 `MEMORY` 至 `InnoDB`. 此時，這些表格的內容在Galera叢集的節點之間變得不同步。 [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* 停用PageBuilder模組不再影響產品頁面的轉譯。 過去，當模組停用時，產品頁面上的自訂版面配置會消失，而應用程式會顯示空白頁面。

<!-- ENGCOM-7219-->

* 您現在可以使用 `bin/magento sampledata:deploy` 以在使用撰寫器安裝Adobe Commerce後如預期部署範例資料。 之前，應用程式擲回此錯誤： `Git installations must deploy sample data from GitHub; see https://devdocs.magento.com/guides/v2.3/install-gde/install/sample-data-after-clone.html for more information`. _Andrii Beziazychnyi在提取請求中提交的修正 [27481](https://github.com/magento/magento2/pull/27481)_. [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* 店面效能已改善，消除了不必要的載入 `Datepicker` 元件。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27860](https://github.com/magento/magento2/pull/27860)_. [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* 執行中 `bin/magento setup:upgrade` 現在會如預期般完成。 以前，應用程式會顯示快取的列印陣列內容。 _Sathish Subramanian在提取請求中提交的修正 [27567](https://github.com/magento/magento2/pull/27567)_. [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all` 現在部署店面上使用的所有語言，以及管理員使用者在未設定語言引數時設定的所有語言。 (`en_US` 一律預設部署。) _Anton Evers在提取請求中提交的修正 [28922](https://github.com/magento/magento2/pull/28922)_. [GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* 停用備份功能時，應用程式不再顯示備份功能表。 _Eden Duong在提取要求中提交的修正 [29222](https://github.com/magento/magento2/pull/29222)_. [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* 目錄影像輔助程式初始化現在使用產品模型，而不是 `DataObject`. _jmonteros422在提取請求中提交的修正 [29435](https://github.com/magento/magento2/pull/29435)_. [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* 管理員使用者現在可以儲存空白 **客戶權杖存留期（小時）** 欄位（管理員） **商店**  >  **設定**  >  **服務**  >  **OAuth**  >  **存取權杖到期**)。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* 此 **為舊URL建立永久重新導向** 類別現已預設為停用設定。 _Vadim Malesh在提取請求中提交的修正 [28752](https://github.com/magento/magento2/pull/28752)_. [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### AdminGWS

<!-- MC-36164-->

* 應用程式不再顯示 **新增屬性** 按鈕(**商店** > **屬性** 或 **新增屬性集** 按鈕(**商店** > **屬性** > **客戶**)時，登入的管理員會缺少建立這些實體的適當許可權。 之前，當沒有適當許可權的網站管理員嘗試建立 **屬性集** 或 **客戶** 屬性。

<!-- MC-36230-->

* 特定網站具有受限制角色的管理員嘗試從管理員建立子類別時，應用程式不再擲回錯誤。

### Adobe Stock整合

<!-- ENGCOM-7776-->

* 清除篩選器後，Adobe Stock影像格線中的影像現在會正確對齊。 _Nazar Klovanych在提取請求中提交的修正 [28366](https://github.com/magento/magento2/pull/28366)_. [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824)， [GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* 此 **使用位置** Adobe Stock gallery影像詳細資訊頁面的區段現在可以準確識別影像是否與產品相關聯。 _Nazar Klovanych在提取請求中提交的修正 [28798](https://github.com/magento/magento2/pull/28798)_. [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute` 現在會刪除引數上未指定的關鍵字連結，並在編輯影像詳細資料時刪除關鍵字標籤時插入新連結。 _jmonteros422在提取請求中提交的修正 [29207](https://github.com/magento/magento2/pull/29207)_. [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* 此 `Login failed` 當商家點按時，應用程式顯示的訊息 **授權** 對於先前儲存的、未授權的Adobe Stock影像，不再包含HTML標籤。 _由您在提取請求中提交的修正 [29398](https://github.com/magento/magento2/pull/29398)_. [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* 按一下 **使用位置** 「影像詳細資訊」頁面的段落現在會顯示一個格點，其中顯示影像篩選的所有實體。 資產篩選器也會正確設定和顯示。 之前，應用程式不會在 **套用的篩選器** 區段。 _Nazar Klovanych在提取請求中提交的修正 [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* 應用程式不再顯示 **使用位置** 影像未使用時，位於「影像詳細資訊」頁面的區段。 _Nazar Klovanych在提取請求中提交的修正 [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* 修正新增超過最大字元數的新影像標籤時的顯示問題。 _Nazar Klovanych在提取請求中提交的修正 [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* 現在可以使用影像詳細資料上的資產篩選器，按預期檢查資產 **使用位置** 區段。 _Nazar Klovanych在提取請求中提交的修正 [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* 不同實體使用的影像相關資訊(例如， `page` 和 `category`)現在已列出並在影像詳細資訊頁面中修正。 _Nazar Klovanych在提取請求中提交的修正 [29367](https://github.com/magento/magento2/pull/29367)_. [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-7778-->

* 您現在可以使用新的 `UrlFilterApplier` 要在產品上套用篩選器的元件，`cms_page`、和 `cms_block` 使用GETURL引數的網格。 _Gabriel da Gama在提取請求中提交的修正 [28932](https://github.com/magento/magento2/pull/28932)_. [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-8019-->

* 按一下 **使用位置** 「媒體集」中影像的區段現在會依預期開啟影像篩選的實體格點。 以前，影像標題不會顯示在格線的已套用濾鏡區段中。 _Nazar Klovanych在提取請求中提交的修正 [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* 現在，當您在「媒體集」中連續編輯多個影像時，應用程式會正確新增標籤。 _Nazar Klovanych在提取請求中提交的修正 [29429](https://github.com/magento/magento2/pull/29429)_. [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* 當商家刪除標籤並儲存影像詳細資料後，應用程式現在會移除Adobe Stock影像的標籤。 以前，在重新整理頁面之前不會刪除標籤。 _Honeymay Louiese Ignacio在提取請求中提交的修正 [29400](https://github.com/magento/magento2/pull/29400)_. [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon Pay

* Amazon Pay現在會在呈現付款選項之前，檢查使用者是否已登入。

* 多重驗證和放棄購物車的問題已解決。

* Amazon Pay現在可正確填入 `store name` 在電子郵件和其他顯示的位置中。 如果 **存放區名稱** Amazon Pay設定中的欄位為空白，擴充功能會擷取商店的預設名稱（即您在「管理員」中提供的商店名稱）。

* 已解決拒絕情況的本地化/翻譯問題。 顯示的文字不再一律為英文。

### 分析

<!-- MC-33314-->

* 具有正確許可權的管理員現在可以存取進階報表和區段報表。

<!-- MC-34352-->

* Adobe Commerce成功產生進階報告資料檔案，並如預期般傳送至使用分割資料庫的部署詳細目錄。 之前，應用程式不會產生或傳送 `quotes.csv` 檔案重新命名為「詳細目錄」，因此「詳細目錄」並未產生預期的報告。

### Braintree

* 現在，當促銷代碼套用至結帳頁面時，Braintree會將正確的金額傳送至PayPal。

* 在結帳頁面上啟用條款與條件後，Apple Pay現在可如預期運作。

* 從管理員啟用Venmo時，在案頭裝置上結帳期間不再發生瀏覽器錯誤。

* 購物者於「 」中輸入特殊字元時，結帳不再失敗。 **名稱** 簽出工作流程的欄位。 先前，驗證失敗，因為Braintree3DS API不支援非ASCII字元。

* 使用PayPal下訂單時，應用程式現在會在結帳工作流程的送貨區段中顯示正確的收件者名稱。

* 如果購物者在結帳期間變更送貨方式多次，應用程式現在會如預期更新「訂單稽核」頁面。

### 套裝產品

<!-- MC-36281-->

* 當您嘗試在已安裝「詳細目錄」但 `Magento_InventoryBundleProduct` 模組已停用。

<!-- MC-34261-->

* 應用程式現在可以正確計算包含組合產品的訂單的離線退款。

<!-- MC-24363-->

* 迷你購物車現在會顯示套裝產品的正確價格，也就是為簡單產品指定層級價格時。 [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* 商戶現在可以為套件產品建立銷退折讓單，提供退款而不需要退貨產品。 之前，應用程式擲回錯誤。 _Dzung Nguyen在提取請求中提交的修正 [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* 當購物者新增套件產品至購物車而未選取必要選項時，應用程式不再顯示多餘的驗證訊息。 _Dzung Nguyen在提取請求中提交的修正 [27455](https://github.com/magento/magento2/pull/27455)_. [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 MC-29908-->

* GraphQL現在支援訂購選項型別的套件產品 `radio` 和 `dropdown` 提供多個選項。 以前，應用程式顯示關於無效的輸入的訊息 `BundleItem.type: radio/dropdown`. _Michal Derlatka在提取請求中提交的修正 [29256](https://github.com/magento/magento2/pull/29256)_. [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### 快取

<!-- MC-36096-->

* 本機快取儲存空間現在會保留至中設定的時段 **商店** > **設定** > **一般** > **Web** > **預設Cookie設定**. 先前，Cookie的到期日會以硬式編碼撰寫為一天，因此不會與此設定同步。 因此，歡迎訊息沒有在預期期間內保留回訪的客戶資訊。

<!-- ENGCOM-7780-->

* 呼叫頁面快取的次數 `config` 已減少。 _Lukasz Bajsarowicz在提取請求中提交的修正 [28992](https://github.com/magento/magento2/pull/28992)_. [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* 清漆不再拋出 `Connection reset by peer` 依排程重新索引大型目錄時發生錯誤。 _Matthew O&#39;Loughlin在提取請求中提交的修正 [26256](https://github.com/magento/magento2/pull/8815)_. [GitHub-26255](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* 在「管理員」中編輯產品後，不再為不相關的產品清除完整頁面快取。 [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### 購物車與結帳

<!-- ENGCOM-7950-->

* 資料提供者已取代直接SQL查詢，進而改善簽出效能。 _Lukasz Bajsarowicz在提取請求中提交的修正 [29376](https://github.com/magento/magento2/pull/29376)_. [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* 「比較」和「最近比較的產品」清單中的產品現在可如預期運作。 先前，展開比較清單時，即使區段指出清單包含產品，應用程式也不會顯示產品。

<!-- MC-35329-->

* 此 **刪除** 上的按鈕 **依SKU新增至購物車** 客戶的 **管理購物車** 現在選取多列時，頁面可如預期運作。

<!-- MC-34999-->

* 當您嘗試以SKU訂購產品時，若您輸入的數字元合有效的SKU，但大小寫不同，應用程式不會再擲回錯誤。 之前，當您在下列位置輸入SKU： **我的帳戶** > **依SKU排序** 與有效SKU不完全相符的應用程式擲回錯誤。

<!-- MC-25042-->

* 現在結帳時，如果地址位於允許國家/地區清單中識別的國家/地區，並且該清單僅包含該國家/地區，則預設會選取客戶的送貨地址。 以前，應用程式未選取預設地址，並顯示此錯誤訊息： `Please specify a regionId in shipping address`.

<!-- MC-24043-->

* 商戶現在可以啟用 **套用至出貨金額** 在的「動作」標籤中 **行銷** > **購物車價格規則** > **新增規則** 時間 **整個購物車的固定金額折扣** 「 」已套用。 [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* 當購物者開始結帳，然後導覽至店面首頁後，嘗試取消設定持續性Cookie時，應用程式不再擲回例外狀況。 先前，當購物者按一下 **不是您嗎？** 連結時，應用程式擲回此例外狀況： `The shipping address is missing. Set the address and try again`. [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* 當客戶新增無庫存產品至購物車時，應用程式現在會顯示購物車新增成功訊息。 之前已新增產品，但應用程式未顯示成功訊息。

<!-- MC-35989-->

* 自訂地址屬性現在會如預期包含在結帳工作流程中針對付款步驟顯示的表單中。

<!-- MC-36060-->

* 此 **州/省/地區** 輸入方塊現在如預期般啟用，於 **我的帳戶** > **通訊錄** > **新增地址**.

<!-- ENGCOM-7746-->

* 折扣現在會如預期套用至運費，當 **套用至出貨金額** 已啟用。 _Andrii Kalinich在提取請求中提交的修正 [28839](https://github.com/magento/magento2/pull/28839)_. [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* 支援關閉mini cart的程式碼已重構以移除 `closeSidebar` 函式。 已將適當的點選繫結新增至 `[data-action="close"]` 元素。 _拉取要求中按連結提交的修正 [28906](https://github.com/magento/magento2/pull/28906)_. [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* 新 **在購物車頁面上顯示「清除購物車」按鈕** 組態設定提供顯示的控制權 **清除購物車** 購物車檢視頁面上的按鈕。 此設定預設為停用。 _Pavlo Sydorenko在提取請求中提交的修正 [27917](https://github.com/magento/magento2/pull/27917)_. [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* 已將驗證新增至結帳工作流程中的電話欄位。 _Oleh Usik在提取請求中提交的修正 [27537](https://github.com/magento/magento2/pull/27537)_. [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* 當購物車包含可下載的產品，且符合以下條件，訪客結帳功能現在會依預期停用： **可共用** 和 **如果購物車包含可下載的專案，則停用訪客結帳** 設定已停用。 _Rani Priya在提取請求中提交的修正 [23972](https://github.com/magento/magento2/pull/23972)_. [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* 當購物者從客戶帳戶側邊欄將產品新增到購物車時，應用程式顯示的成功訊息現在包含指向購物者的購物車的連結。 _Ajith在提取請求中提交的修正 [27977](https://github.com/magento/magento2/pull/27977)_. [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* 應用程式現在會為簽出工作流程上的首碼下拉式選項選單預設選取空白值。 _Vadim Malesh在提取請求中提交的修正 [28238](https://github.com/magento/magento2/pull/28238)_. [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* 當您從購物車刪除多個專案時，應用程式顯示的快顯訊息，現在可以準確地描述您選取要刪除的實體數量和型別。 _Nazar Klovanych在提取請求中提交的修正 [29490](https://github.com/magento/magento2/pull/29490)_. [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* 當訪客使用者完成結帳時，應用程式現在會顯示客戶登錄檔單。

<!-- MC-35607-->

* 自訂客戶地址屬性欄位現在會如預期顯示在店面結帳工作流程中。

<!-- ENGCOM-7793-->

* 應用程式現在會在結帳期間擷取使用中報價的目前客戶群組。 以前，應用程式使用首次將產品新增到購物車時處於作用中狀態的客戶群組，如果該客戶群組在結帳前被刪除，則應用程式會擲回錯誤。 _Konstantin在提取請求中提交的修正 [28902](https://github.com/magento/magento2/pull/28902)_. [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### 目錄

<!-- MC-31068-->

* 應用程式現在會在結帳前從購物車的購物車中移除已停用的產品。 先前，當購物者新增產品至其購物車時，該產品在結帳完成前已停用，應用程式會從購物車中移除停用的產品，但產品仍保留在報價中，購物者無法結帳。 [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* 應用程式現在會依預期排序最暢銷的產品。 以前，產品計數和排序結果分頁都是不正確的。 [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* 購物者現在可以按一下比較產品側邊欄中的產品名稱，開啟產品的詳細資訊頁面。 _Eduard Chitoraga在提取請求中提交的修正 [27451](https://github.com/magento/magento2/pull/27451)_. [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* `children_count` 現在，當管理員刪除類別時，值保持為正數。 先前，當管理員刪除類別時， `children_count` 其餘類別為負數。 _Vitaliy Prokopov在提取請求中提交的修正 [28044](https://github.com/magento/magento2/pull/28044)_. [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* 應用程式現在使用預設選項(**設定** > **Web** > **預設版面** > **預設產品版面**)已選取的 `page_layout` 屬性。 以前，不會套用您選取的預設值。

<!-- MC-34258-->

* 您現在可以成功對「庫存管理系統」產品存貨執行整批作業。 之前，當您嘗試對存貨產品存貨執行整批作業時，應用模組會顯示空白頁面。 如果您在開發人員模式中使用應用程式執行此動作，應用程式會擲回此錯誤： `Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`

<!-- MC-32552-->

* 按一下時顯示的記錄總數 **新增產品** （在「產品」索引標籤上）將產品新增至目錄類別時，不再根據產品排序順序而變更。

<!-- ENGCOM-7854 -->

* 此 `{products(filter: {sku: {eq: "some sku"}}) {…}` query現在會傳回已轉換為預期貨幣的值。 先前， `price_tiers.final_price.value` 以基本貨幣顯示特殊價格。 _Petkovski Marjan在提取請求中提交的修正 [28890](https://github.com/magento/magento2/pull/28890)_. [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### 目錄規則

<!-- MC-33487-->

* 當您儲存具有下列條件的目錄規則時，應用程式不再擲回嚴重錯誤： `If ALL of these conditions are FALSE:, If ALL of these conditions are TRUE:, Attribute set is default`

### Cleanup

<!-- ENGCOM-7281-->

* 修正「管理銷售訂單方格」核取方塊未對齊的問題。 _杜阮在提取請求中提交的修正 [27642](https://github.com/magento/magento2/pull/27642)_. [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* 修正銷售訂單地址儲存處理常式中送貨地址ID getter的拼字錯誤。 _Konstantin在提取請求中提交的修正 [28810](https://github.com/magento/magento2/pull/28810)_. [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* 已更正 `getRegionNameExpresion` 方法名稱至 `getRegionNameExpression`. _Pierre Grimaud在提取請求中提交的修正 [28832](https://github.com/magento/magento2/pull/28832)_. [GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* 備援 `init` 方法已從「 」中移除 `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php` 和 `app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php`. _Oleh Usik在提取請求中提交的修正 [28650](https://github.com/magento/magento2/pull/28650)_. [GitHub-29009](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* `localStorage` polyfill已從「 」移出「 」 `base` 至 `frontend`. _Ihor Sviziev在提取請求中提交的修正 [28749](https://github.com/magento/magento2/pull/28749)_. [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* 更新Adobe Commerce標誌，並從README檔案中移除多餘的空格。 _Rafael Corea r̻ Gomes在提取請求中提交的修正 [28891](https://github.com/magento/magento2/pull/28891)_. [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* 不必要 `overflowed` 類別已從迷你購物車側邊欄Widget中移除。 _拉取要求中按連結提交的修正 [28963](https://github.com/magento/magento2/pull/28963)_. [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* 已更正「出貨」頁面中錯誤的CSS選取器。 _杜阮在提取請求中提交的修正 [28639](https://github.com/magento/magento2/pull/28639)_. [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* 此 `lib/internal/Magento/Framework/App/Request/Http.php` 透過最佳化邏輯以及移除多餘的變數指派和函式中傳回值的過度使用，檔案已得到簡化。 _Chris Snedaker在提取請求中提交的修正 [28608](https://github.com/magento/magento2/pull/28608)_. [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* 此 `bin/magento module:status` 命令現在接受多個模組名稱作為引數。 _Chandru Rajendran在提取請求中提交的修正 [28250](https://github.com/magento/magento2/pull/28250)_. [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* 修正的類別說明中的錯字 `\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable`. _Benjamin Rosenberger在提取請求中提交的修正 [29451](https://github.com/magento/magento2/pull/29451)_. [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* 此 `TierPriceManagement` 類別已重構以移除多餘的程式碼。 _Lukasz Bajsarowicz在提取請求中提交的修正 [29202](https://github.com/magento/magento2/pull/29202)_. [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* `autoload.php` 已進行重構，以提高可讀性和回訪速度。 _Vitaliy Ryaboy在提取請求中提交的修正 [28923](https://github.com/magento/magento2/pull/28923)_. [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### CMS內容

<!-- MC-35971-->

* 選取的預設商店檢視的「階層」標籤現在會如預期顯示選取的父頁面。

<!-- ENGCOM-7602-->

* 當新存放區檢視包含的CMS頁面的URL金鑰與不同存放區檢視中的頁面相同時，應用程式不會再在建立存放區檢視期間擲回錯誤。 _Vadim Malesh在提取請求中提交的修正 [28421](https://github.com/magento/magento2/pull/28421)_. [GitHub-28357](https://github.com/magento/magento2/issues/28357)

<!-- MC-35480-->

* 當商家使用與公司結構頁面相同的URL建立CMS頁面時，應用程式現在會擲回錯誤。 之前，應用程式會顯示CMS頁面，而非「公司結構」頁面。

### 可設定的產品

<!-- MC-33523-->

* 已修正可設定產品編輯目前變數清單的分頁問題。

<!-- MC-33406-->

* 當購物者選擇可設定產品的選項時，應用程式不再更新「相關產品」價格方塊。 以前，每當購物者選擇可設定產品的選項時，應用程式就會更新價格方塊。

<!-- MC-29882-->

* 應用程式現在會在「管理員建立訂單」頁面上，針對具有自訂選項的可設定產品顯示正確的價格。 如預期，顯示的價格是子產品的價格與自訂選項價格的總和。 以前，應用程式只會顯示自訂選項價格。 [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* 套用購物車價格規則後，訂單摘要現在會顯示正確的折扣金額。 以前，規則在計算運費折扣時無法正確舍入金額。

<!-- MC-33765-->

* 以受限制範圍的管理員帳戶建立的管理員使用者帳戶，現在可以建立可設定的產品，如預期使用屬性。 之前，應用程式擲回此錯誤： `Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`.

<!-- ENGCOM-7787-->

* 當您使用POST時，應用程式不再擲回驗證錯誤 `/V1/products` 至具有的可設定產品 `int` 值為0。 之前，應用程式擲回此錯誤： `Product with id "%1" does not contain required attribute "%2"."` _Vadim Malesh在提取請求中提交的修正 [29001](https://github.com/magento/magento2/pull/29001)_. [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* 父級產品的組態選項屬性不再指派給新的可設定產品的 `size` 屬性。 _Abel Truong在提取請求中提交的修正 [27339](https://github.com/magento/magento2/pull/27339)_. [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### Cookie

<!-- ENGCOM-7156-->

* 應用程式現在最多可建立1個 `mage-translation-file-version` 和 `mage-translation-storage` 每個工作階段的Cookie。 _Ihor Sviziev在提取請求中提交的修正 [27364](https://github.com/magento/magento2/pull/27364)_. [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### cron

<!-- MC-35884-->

* 訊息佇列取用者設定已擴充為新的引數，可協助控制取用者，並儲存伺服器資源，同時可能減少取用者佇列CPU的耗用量。 另請參閱 [設定訊息佇列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) 以取得 `maxIdleTime`， `sleep`、和 `onlySpawnWhenMessageAvailable` 引數。

<!-- ENGCOM-7863-->

* `cron` 運算式，例如  `3/10 * * * *` 現在已按預期排程。 _Anton Evers在提取請求中提交的修正 [28930](https://github.com/magento/magento2/pull/28930)_. [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes` 不再一次載入所有過期的引號。 以前，應用程式會因為這個嚴重錯誤而失敗，因為所有過期的引號都是同時載入： `PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`，

### CSS

<!-- ENGCOM-7678-->

* 以下情況時，應用程式不再複製CSS **關鍵CSS** 已啟用。 _杜阮在提取請求中提交的修正 [28480](https://github.com/magento/magento2/pull/28480)_. [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* 伺服器端LESS編譯器現在會在您執行時，依照預期匯入所有遠端CSS檔案 `bin/magento setup:static-content:deploy -f`. 之前，應用程式未匯入遠端檔案，並擲回錯誤。 [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### 自訂客戶屬性

<!-- MC-36387-->

* 修正有關密碼和的說明文字的對齊問題 **職稱** 「客戶編輯帳戶資訊」頁面上的欄位。

<!-- MC-33645-->

* 現在，當新客戶按一下 **建立帳戶** 按鈕（在店面客戶註冊頁面上）。 以前，應用程式不會建立客戶帳戶，並在客戶按一下按鈕時顯示錯誤。

<!-- MC-34024-->

* 客戶尚未輸入任何資料時，結帳工作流程不再顯示自訂客戶地址屬性值。

### 客戶

<!-- MC-33679-->

* Admin客戶地址中的地區名稱現在會如預期般翻譯。

<!-- MC-36226-->

* 此 **州/省** 欄位現在會如預期在「編輯地址」頁面上填入(**我的帳戶** > **通訊錄**)。

<!-- MC-34655-->

* 當客戶按一下 **提交** 在啟用隱藏的reCAPTCHA的整個店面表單上多次按鈕。 之前，按多次此按鈕會產生類似以下的內部錯誤： `Internal error: Make sure you are using reCaptcha V3 api keys`.

<!-- MC-33522-->

* 現在從管理員儲存已刪除的客戶只會產生錯誤訊息。 之前，應用程式會顯示一個空白頁面，並產生一個包含此字串的報表： `"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`.

<!-- MC-33357-->

* 當管理員嘗試為帳戶剛剛被刪除的客戶儲存地址時，應用程式現在會如預期顯示錯誤訊息。 之前，應用程式會顯示一個空白訊息方塊。

<!-- MC-33150-->

* 已編輯簽出工作流程與通訊錄中通訊欄位的標籤，以保持一致性。

<!-- ENGCOM-7244 -->

* 如果前端標籤的值並非空值，現在會回復到儲存標籤。 以前，客戶屬性使用預設前端標籤。 _Toan Nguyen在提取請求中提交的修正 [27064](https://github.com/magento/magento2/pull/27064)_. [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* 此 `sortOrder`已更正版面XML中的連結數。 以前，此順序會顛倒並使用降序。 _杜阮在提取請求中提交的修正 [27340](https://github.com/magento/magento2/pull/27340)_. [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### 客戶區段

<!-- MC-33184-->

* 大量作業已重構為非同步儲存和重新整理客戶區段，針對包含許多客戶（超過3,000,000個）的部署，已改善這些工作的效能。

<!-- MC-36224-->

* 客戶區段條件現在可在分割資料庫部署中如預期運作。 之前，當您嘗試透過新增條件來編輯客戶區段時，應用程式會擲回錯誤： `SQLSTATE[42S02]: Base table or view not found`.

### 目錄

<!-- MC-32271-->

* 「州/省」下拉式功能表的格式現在在「管理員」中保持一致。

### dotdigital

* 當訂單包含目錄中不再存在的產品SKU時，訂單同步不再失敗。

* 網頁分析資料中不再包含空白產品類別。

* 網路行為追蹤現在適用於具有特定主題設定的商家。 新的備援選擇器可解決此問題。

* 使用cron執行客戶同步時，訂閱者狀態資料欄位不再包含空白值。 （應用程式模擬可解決此問題。）

* 在預設層級啟用dotdigital帳戶，但在主要網站停用時，通訊錄對應現在會如預期般運作。

* 包含加號(「+」)的電子郵件地址現在會產生抵用券（使用產生抵用券的外部動態內容URL）。

* 連絡人不再重新訂閱，因為 `last_subscribed_at` 值為null。

* 影響舊版的升級錯誤（4.5.2版）已解決。

* 4.5.3中引入的回歸問題已修復，該問題在準備訂閱者匯出時影響使用方法獲得訂閱者狀態。

* 現在可正確計算同步訂閱者的總人數（顯示在記錄檔和熒幕上）。

### 可下載

<!-- MC-35026-->

* 「我的可下載產品」區域現在會顯示已購買可下載產品的連結，這些產品如預期般屬於分組產品的一部分。

<!-- MC-34262-->

* 按一下可下載產品的 **範例** 現在，管理員產品頁面中的按鈕會如預期下載範例。 先前，當您按一下 **範例**，應用程式會顯示此錯誤： `The product that was requested doesn't exist. Verify the product and try again`.

<!-- ENGCOM-7757-->

* 購物者現在可以下載無庫存的可下載產品範例。 先前，當購物者嘗試下載範例時，應用程式會開啟新的索引標籤，但未顯示資訊訊息或開始下載程式。 _Vadim Malesh在提取請求中提交的修正 [28898](https://github.com/magento/magento2/pull/28898)_. [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* 改善當購物者嘗試設定可下載產品的送貨地址時，應用程式顯示的例外訊息。 _Michal Derlatka在提取請求中提交的修正 [28904](https://github.com/magento/magento2/pull/28904)_. [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* 產品的 `stock_item` 資料會更新，而且當您使用RESTPUT呼叫進行更新時，可下載的產品連結和範例會如預期般保留 `stock_item` 值。 之前，產品更新後，產品不再包含下載內容的連結。 _Vadim Malesh在提取請求中提交的修正 [28799](https://github.com/magento/magento2/pull/28799)_. [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* 當客戶為僅包含可下載產品的訂單設定送貨地址時，應用程式現在會顯示資訊更豐富的訊息。

### 動態區塊（原稱為橫幅）

<!-- MC-33266-->

* 現在，當您建立動態區塊並新增相關型錄價格規則時，表格標題會如預期般符合資料表格。

### 電子郵件

<!-- MC-32789-->

* 如果客戶電子郵件在訂單建立後有所變更，應用程式現在會將訂單變更的電子郵件通知傳送至正確的客戶電子郵件。

<!-- MC-36015-->

* 傳送給客戶的訂單更新電子郵件現在包含正確的訂單狀態。 先前，如果訂單狀態從 `processing` 至於另一個狀態，訂單電子郵件未反映狀態變更。

<!-- MC-34107-->

* 應用程式不會再於訪客結帳期間顯示有關現有帳戶的誤導性訊息。 先前，當訪客導覽至結帳頁面，然後導覽回送貨頁面時，應用程式會顯示此錯誤： `You already have an account with us. Sign in or continue as guest`.

<!-- MC-33905-->

* 自訂電子郵件範本現在會載入與原生預設電子郵件範本相同的元素。 之前，遺漏了一些元素，包括變數值。

<!-- MC-33700-->

* 您現在可以建立電子郵件範本，以傳送電子郵件 `Content-Type: "text/plain"`. 之前，應用程式會忽略範本中指定的內容型別。 _由twoonesixdigital在提取請求中提交的修正 [26474](https://github.com/magento/magento2/pull/26474)_. [GitHub-26471](https://github.com/magento/magento2/issues/26471)

<!-- ENGCOM-7576-->

* 已從電子郵件預覽範本中移除不必要的CSS。 _杜阮在提取請求中提交的修正 [27828](https://github.com/magento/magento2/pull/27828)_. [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* 已移除電子郵件範本中重複頁尾已顯示文字的文字。 _Pawel Tylek在提取請求中提交的修正 [27356](https://github.com/magento/magento2/pull/27356)_. [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* 產品警報電子郵件現在從訂閱警報的商店傳送。 以前，此電子郵件一律從預設商店傳送。 _Maciej Pawlowski在提取請求中提交的修正 [26534](https://github.com/magento/magento2/pull/26534)_. [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* 重複 `customer.name` 變數已從電子郵件範本移除。 _Pawel Tylek在提取請求中提交的修正 [29054](https://github.com/magento/magento2/pull/29054)_. [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33232-->

* 傳送給指派給公司的銷售代表的通知電子郵件現在包含指派的公司標誌。 以前，通知電子郵件包含預設的LUMA標誌，而不是上傳的企業標誌電子郵件。

### 框架

<!-- MC-35893-->

* 此 **傳送資料的當天時間** 管理員的欄位 **商店** > **設定** >一般> **進階報告** 頁面現在已正確呈現。

<!-- MC-34153-->

* 當訂單清單跨越多個頁面時，購物者現在可以變更每頁顯示的訂單數。 以前，當您瀏覽至訂單的最後一頁並嘗試變更每頁顯示的訂單數時，應用程式會顯示此訊息： `You have placed no orders`. 這是2.4.0的已知問題。

<!-- MC-35020-->

* 您現在可在實作第2級快取時新增產品至類別。

<!-- MC-29755-->

* `X-Magento-Tags` 標頭不再超過HTTP規格允許的大小。 以前，包含許多產品的類別頁面會傳回 `X-Magento-Tag` 導致503錯誤的標頭。

<!-- MC-34257-->

* `sales_order_shipment_track_save_commit_after` 現在會如預期一樣在您使用REST API建立出貨時觸發。

<!-- MC-33898-->

* 應用程式現在會在以下情況顯示資訊性錯誤訊息： `di compile` 因不存在相依性而失敗。 以前，顯示的訊息不會識別發生例外狀況的類別。

<!-- MC-32929-->

* 當Redis使用所有允許的記憶體時，應用程式不再擲回以下嚴重錯誤： `report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'`.

<!-- MC-18021-->

* 購物者現在可以新增多項產品至購物車，當 `Persistent` 模組已停用。 [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### 一般修正

<!-- MC-36048-->

* 在管理員上排序產品(**商店** > **屬性** > **產品**)現在會顯示符合搜尋條件的所有產品。 以前，應用程式不顯示記錄，而且若要排序記錄，您必須導覽至搜尋結果的第一頁。

<!-- MC-36343-->

* 不必要地加上引號並在中URL周圍逸出 `tracking.phtml` 已移除。

<!-- MC-35998-->

* 此 `var/log/system.log` 當使用者嘗試存取靜態目錄下的非現有資源檔案，並啟用SCD OnDemand和生產模式時，現在會顯示更準確的訊息。 應用程式現在會記錄404錯誤。 以前，應用程式會記錄當開發人員模式中發生錯誤時所記錄的相同訊息。

<!-- ENGCOM-7286-->

* JavaScript縮制現在可以正常運作。 縮制檔案解析程式不再將變數洩漏至全域範圍。 先前， `ctx`， `origNameToUrl`、和 `baseUrl` 視窗底下的變數洩露。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27622](https://github.com/magento/magento2/pull/27622)_. [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* 當您對阻止建立物件的錯誤進行偵錯時，應用程式現在會列印並記錄原始的例外狀況訊息。 以前只會記錄訊息。 _Marvin Hinz在提取請求中提交的修正 [26572](https://github.com/magento/magento2/pull/26572)_. [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* 已改善認可資料庫變更後的回呼執行。 先前，如果一個回呼失敗並出現例外狀況，則所有回呼都會失敗。 _Alok Patel在提取請求中提交的修正 [27134](https://github.com/magento/magento2/pull/27134)_. [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* 未定義相依性之模組的Mixin不再擲回此錯誤： `TypeError: Cannot read property 'map' of null`. _Mateusz Krzeszowiak在提取請求中提交的修正 [27690](https://github.com/magento/magento2/pull/27690)_. [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* 現在只有在 `localStorage` 或 `sessionStorage` 無法使用。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27619](https://github.com/magento/magento2/pull/27619)_. [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* 現在，當購物者從第二個或後續的結果頁面變更每頁顯示的結果數量時，多頁店面訂單清單的行為符合預期。 以前，當購物者變更以下專案中所顯示的搜尋結果數量時，應用程式會顯示此錯誤： **我的帳戶** > **我的訂單** 清單： `You have placed no orders`. _Vadim Malesh在提取請求中提交的修正 [28417](https://github.com/magento/magento2/pull/28417)_. [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* 已棄用 `addWarning` 方法已取代為 `addWarningMessage` 安全性模組中的方法。 _由提取請求中的kishorekumarkesavan提交的修正 [28264](https://github.com/magento/magento2/pull/28264)_. [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* 使用產生的程式碼 `bin/magento` 命令列指令現在與需求和編碼標準一致。 _Lukasz Bajsarowicz在提取請求中提交的修正 [28351](https://github.com/magento/magento2/pull/28351)_. [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- MC-33744-->

* 如果一個CMS頁面被指派給多個商店檢視，則應用程式不會再在網站階層中顯示該頁面多次。

<!-- ENGCOM-7511-->

* 儲存屬性，使用 `backend_type = static` 不再移除 `frontend_class` 欄位。 _由提取請求中的jiten-patel提交的修正 [27369](https://github.com/magento/magento2/pull/27369)_. [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* 不必要的程式碼和 `responsive.js` 已從主題載入的檔案中移除。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27617](https://github.com/magento/magento2/pull/27617)_. [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* 驗證已新增至 **符號數** 「管理驗證碼」設定頁面上的欄位。 _Eden Duong在提取要求中提交的修正 [29199](https://github.com/magento/magento2/pull/29199)_. [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* RSS摘要現在已正確載入。 以前，摘要不會第一次載入，但在頁面重新整理時卻如預期般載入。 _Vadim Malesh在提取請求中提交的修正 [29455](https://github.com/magento/magento2/pull/29455)_. [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* 購物者重新登入時，過期的持續工作階段現在會如預期般更新。

<!-- MC-35230-->

* 密碼存留期設定於 **商店** > **設定** > **進階** > **管理員** 現在已榮譽。 先前，如果您按一下 **忘記密碼？** 當提示您重設密碼時，您可以略過密碼重設。

<!-- MC-34369-->

* 優惠券代碼現在只會套用至指定的產品。 之前，應用程式會將優惠券代碼套用至購物車中的所有產品。 [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* 發生存貨或價格更新時，購物車到期設定不再重新設定。 先前，當購物車設定為24小時後過期，且發生存貨更新或價格更新時，索引子會填入 `updated_at table`，會重新設定到期時間。

<!-- MC-33313-->

* 管理員將擁有有效購物車的客戶指派給客戶群組時，應用程式不再擲回嚴重錯誤。

<!-- ENGCOM-7834 -->

* 從選取工具列選項 **開發人員工具**  >  **網路**  在產品頁面上執行Chrome瀏覽器時不再初始化 `toolbar.js` 兩次。 _Pawel Tylek在提取請求中提交的修正 [28838](https://github.com/magento/magento2/pull/28838)_. [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* 應用程式現在會將管理員使用者的ACL角色ID新增至產品類別樹狀結構快取ID。 這將會限制具有有限範圍的管理員可如預期看到的類別樹狀結構。 _由提取請求中的quangdo-aligent提交的修正 [27429](https://github.com/magento/magento2/pull/27429)_. [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### 禮品卡

<!-- MC-36118-->

* 禮品卡帳戶現在會如預期擷取訂單編號。 先前， **更多資訊** 所選贈品帳戶的「歷史記錄」標籤中的欄位未顯示訂單ID。

<!-- MC-34519-->

* 使用逗號作為小數分隔符號現在會如運期般運作。 以前，逗號分隔符號會忽略小數值。

<!-- MC-34469-->

* 禮品卡現在會如預期顯示在迷你購物車中。 以前，應用程式會將HTML物件呈現為文字。

<!-- MC-33851-->

* 銷退折讓單現在可正確反映涉及折扣產品，且以禮品卡與商店信用額的組合付款的訂單總計。

### Google標籤管理員

<!-- MC-33729-->

* 當發生下列情況時，應用程式不會在簽出期間擲回JavaScript錯誤 **Cookie限制模式** 設定和Google Tag Manager已啟用。

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* 購物者可以在結帳時選取禮品訊息和包裝選項。 GraphQL現在包含不同型別購物車專案的贈品訊息選項。 另請參閱 [`setGiftOptionsOnCart` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/set-gift-options.html) 和 [`updateCartItems` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-cart-items.html). _Oleh Usik在提取請求中提交的修正 [28519](https://github.com/magento/magento2/pull/28105)， [27956](https://github.com/magento/magento2/pull/27956)， [28072](https://github.com/magento/magento2/pull/28072)， [28072](https://github.com/magento/magento2/pull/28072)和246在私人存放庫合作夥伴 — magento2ee_. [GitHub-253](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* 客戶和來賓可以撰寫產品評論。 客戶也可以擷取其產品檢閱記錄。 另請參閱 [建立產品評論](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-product-review.html) 和 [productReviewRatingsMetadata查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/product-review-ratings-metadata.html) 有關擷取檢閱基礎結構相關資訊的資訊。 _Eduard Chitoraga在提取請求中提交的修正 [27882](https://github.com/magento/magento2/pull/27882)_. [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7800 7841-->

* 客戶可以在購物車上套用或移除獎勵積分。 他們也可以檢視其獎勵點歷史記錄。 另請參閱 [`applyRewardPointsToCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/apply-reward-points.html) 和 [`removeRewardPointsFromCart`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-reward-points.html) 有關管理購物車中的獎勵積分的討論。 _Petkovski Marjan在提取請求中提交的修正285在私人存放庫合作夥伴 — magento2ee和Dmitriy Gallyamov在提取請求中提交284和281在私人存放庫合作夥伴 — magento2ee中提交_. [GitHub-28835](https://github.com/magento/magento2/issues/28835)， [GitHub-28833](https://github.com/magento/magento2/issues/28833)

<!-- ENGCOM-7968 -->

* 此 [`addProductsToCart` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) 可讓您新增任何型別的產品至使用中的購物車。 我們建議使用此突變，而不要使用單一用途的突變，例如 `addSimpleProductsToCart`. _Yaroslav Rogoza在提取請求中提交的修正 [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- ENGCOM-7801 7816-->

* 相關產品的GraphQL查詢現在會傳回從target規則建立的相關產品的值。 先前，相關產品（向上銷售和交叉銷售）的查詢只有在相關產品是從產品設定中新增時才會傳回值。 _Ulzii在私人存放庫合作夥伴magento2ee的提取請求288中提交的修正_. [GitHub-28566](https://github.com/magento/magento2/issues/28566)

<!-- MC-34187-->

* 新 `availableStores` query會傳回相同網站下多個商店的設定屬性清單（根據目前商店）。 它不會公開網站清單。 另請參閱 [`availableStores` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/available-stores.html). _Dmitriy Gallyamov在提取請求中提交的修正 [28794](https://github.com/magento/magento2/pull/28794)_. [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* GraphQL現在僅使用授權權杖來擷取使用者型別及其ID。 過去，GraphQL會在授權Token空白時使用作用中客戶的Cookie來擷取此資訊。 _Alexander Taranovsky在提取請求中提交的修正 [27373](https://github.com/magento/magento2/pull/27373)_. [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* 我們已新增 [`createCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-customer-v2.html) 和 [`updateCustomerV2`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-v2.html) 管理客戶帳戶的變動。 這些新的變動需要與 `createCustomer` 和 `updateCustomer` 突變。 若要變更客戶的電子郵件地址，請使用新的 [`updateCustomerEmail`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-customer-email.html) 突變。 _Michal Derlatka在提取請求中提交的修正 [28888](https://github.com/magento/magento2/pull/28888)_. [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* `updateCustomer` 不再允許您設定無效 `INT` 中的值 `gender` 引數。 _Alexander Taranovsky在提取請求中提交的修正 [28487](https://github.com/magento/magento2/pull/28487)_. [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* 您可以使用 `subscribeEmailToNewsletter` 變異以訂閱客戶電子報。 另請參閱 [`subscribeEmailToNewsletter` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/subscribe-email-to-newsletter.html). _Alexander Taranovsky在提取請求中提交的修正 [27586](https://github.com/magento/magento2/pull/27586)_. [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* 移除「 」中的多餘邏輯 `setShippingMethodsOnCart` 變異解析器。 _Alexander Taranovsky在提取請求中提交的修正 [27349](https://github.com/magento/magento2/pull/27349)_. [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* 已新增的測試涵蓋範圍 `Please provide Email of sender` 與關聯的錯誤 `sendEmailToFriend` 突變。 _Alexander Taranovsky在提取請求中提交的修正 [28034](https://github.com/magento/magento2/pull/28034)_. [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* 此 `products` query現在會如預期傳回預設商店檢視的產品屬性選項標籤。 之前，此查詢會傳回為管理員設定的產品屬性選項標籤。 _Dmitriy Gallyamov在提取請求中提交的修正 [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* 自訂屬性彙總現在會傳回商店特定的選項值。 _Dmitriy Gallyamov在提取請求中提交的修正 [28647](https://github.com/magento/magento2/pull/28647)_. [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* 產品彙總中傳回的價格間隔現在只能是數值（不允許萬用字元）。 _Dmitriy Gallyamov在提取請求中提交的修正 [28745](https://github.com/magento/magento2/pull/28745)_. [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* 此 `categoryList` 查詢現在會在使用片段時傳回正確的回應。 _Ulzii在提取請求中提交的修正 [28710](https://github.com/magento/magento2/pull/28710)_. [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* GraphQL產品搜尋現在會考量已設定的類別許可權。 之前，產品搜尋會忽略 **啟用** 設定(**商店**  >  **設定**  >  **目錄**  >  **目錄** > **類別許可權**)。 _Petkovski Marjan在提取請求中提交的修正 [28757](https://github.com/magento/magento2/pull/28757) 和提取要求271 （在私人存放庫中）`partners-magento2ee`_. [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* 您現在可以使用將產品新增到購物車 `addSimpleProductToCart` 當購物車中的其他專案無庫存時。 之前，應用程式傳回此錯誤： `Some of the products are out of stock`. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* 預設GraphQL `Category` 方法現在會依類別位置依預期排序。 _Derrik Nyomo在提取請求中提交的修正 [29301](https://github.com/magento/magento2/pull/29301)_. [github-104](https://github.com/magento/catalog-storefront/issues/104)

* 新增對Magento Open Source中願望清單的支援。 您可以 [新增專案](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-wishlist.html) 至， [更新專案](https://devdocs.magento.com/guides/v2.4/graphql/mutations/update-products-in-wishlist.html) 在、和 [移除專案](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-wishlist.html) 從願望清單。 _Eduard Chitoraga在提取請求中提交的修正 [28205](https://github.com/magento/magento2/pull/28205) 和264在私人存放庫合作夥伴 — magento2ee_. [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* 此 [`addProductsToCart` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-cart.html) 可讓您新增任何型別的產品至使用中的購物車。 我們建議使用此突變，而不要使用單一用途的突變，例如 `addSimpleProductsToCart`. _Yaroslav Rogoza在提取請求中提交的修正 [27914](https://github.com/magento/magento2/pull/27914)_. [GitHub-28524](https://github.com/magento/magento2/issues/28524)

* 新增的GraphQL Vault支援 [Payflow Pro Vault](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/payflow-pro-vault.html) 付款方式。 _Oleh Usik在提取請求中提交的修正 [28821](https://github.com/magento/magento2/pull/28821)_. [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* 已更新GraphQL [`storeConfig` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/store-config.html) 以包含新的客戶組態設定。 _Oleh Usik在提取請求中提交的修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 已新增 [`resetPassword` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/reset-password.html). _Oleh Usik在提取請求中提交的修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 已新增 [`requestPasswordResetEmail` 突變](https://devdocs.magento.com/guides/v2.4/graphql/mutations/request-password-reset-email.html)，會觸發所提供電子郵件地址的密碼重設電子郵件。 _Oleh Usik在提取請求中提交的修正 [27876](https://github.com/magento/magento2/pull/27876)_. [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 新增有關GraphQL的討論 [卡拉納的付款方式](https://devdocs.magento.com/guides/v2.4/graphql/payment-methods/klarna.html) 和[`createKlarnaPaymentsSession`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-klarna-payments-session.html)

### 影像

<!-- ENGCOM-7691-->

* 已改善縮圖影像的HTML標籤。 _杜阮在提取請求中提交的修正 [28642](https://github.com/magento/magento2/pull/28642)_. [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### 匯入/匯出

<!-- MC-35479-->

* 此 `error_report.csv` 檔案現在隨內容下載，並可在內使用 `var/import_history/` 目錄（如預期）。 以前，此檔案不會在匯入後產生。

<!-- ENGCOM-7616-->

* 使用CSV檔案匯入產品現在會產生 `error_report.csv` 檔案（如預期）。 之前，應用程式會產生檔案，但在匯入完成後將其移除。 _Vadim Malesh在提取請求中提交的修正 [28460](https://github.com/magento/magento2/pull/28460)_. [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* 移除整個程式碼基底中的多餘類別匯入。 _Oleh Usik在提取請求中提交的修正 [28696](https://github.com/magento/magento2/pull/28696)_. [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* 應用程式現在已成功匯入包含未定義地區之國家/地區之地區的客戶地址。 之前，應用程式擲回此錯誤： `Please enter a valid region`.

<!-- MC-33277-->

* 當商家在排程新匯出時選取實體型別時，應用程式現在會載入正確的實體屬性集。

<!-- MC-32956-->

* 產品在中的位置 `catalog_category_product` 當管理員在管理員中建立產品並將其指派給類別時，表格現在會如預期更新。 過去，新產品位置一律會指派為0值。

<!-- MC-34939-->

* 客戶資料現在已成功從管理員匯出，匯出資料網格會如預期顯示客戶資料。 先前，匯出期間發生與記憶體配置相關的錯誤。

<!-- MC-34657-->

* 匯入的CSV檔案現在會如預期擷取相關的產品資訊。 先前，相關產品資訊在首次匯入CSV檔案時上傳不一致。

<!-- MC-37424-->

* 已移除中未使用的建構引數 `AdvancedPricing.php`. [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### 索引

<!-- ENGCOM-7073-->

* `Magento_CacheInvalidate` 現在會在執行時正確處理大型標籤模式 `PURGE`. `sendPurgeRequest` 已重構為處理標籤陣列，而不是要求呼叫者使用 `implode()`. _Matthew O&#39;Loughlin在提取請求中提交的修正 [26256](https://github.com/magento/magento2/pull/26256)_. [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* 共用索引器現在顯示以下狀態： **有效** 在您執行之後 `bin/magento indexer:status` 重新索引之後。 之前，共用的索引子有 **無效** 完全重新索引後的狀態。

### 基礎架構

<!-- MC-37243-->

* 在執行PHP 7.4.9的部署中載入目錄和產品頁面時不再發生問題。 之前，當您嘗試載入目錄和產品頁面時，應用程式會擲回此錯誤： `There has been an error processing your request. Exception printing is disabled by default for security reasons`. [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* 所有在版面配置以生產模式呈現時發生的例外狀況，現在都會記錄到例外狀況記錄檔(`var/report`)。 以前，應用程式會在系統記錄中將這些訊息記錄為嚴重問題。

<!-- ENGCOM-7154-->

* 規則運算式現在可以正確用於大型頁面，因為會增加 `ipcre.backtrack_limi`t和 `pcre.recursion_limit` 至約1000000。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27270](https://github.com/magento/magento2/pull/27270)_. [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* 已改善攔截器產生機制。 `} else {` 陳述式已從攔截器移除，以及 `array_map` 已取代 `foreach`. _Lukasz Bajsarowicz在提取請求中提交的修正 [27902](https://github.com/magento/magento2/pull/27902)_. [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* 陣列建立現在在整個類別中是一致的(`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`)。 _Nathan de Graaf在提取請求中提交的修正 [28515](https://github.com/magento/magento2/pull/28515)_. [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* 外掛程式已移出框架，以遵循框架名稱空間中禁止外掛程式的最佳做法。 _Lukasz Bajsarowicz在提取請求中提交的修正 [27965](https://github.com/magento/magento2/pull/27965)_. [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7713-->

* 應用程式不再擲回 `Undefined class constant` 產生攔截器時發生錯誤。 _Vova Yatsyuk在提取請求中提交的修正 [28797](https://github.com/magento/magento2/pull/28797)_. [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* 現在，當您使用已使用的名稱儲存整合時，如果應用程式擲回整合例外狀況，表單資料會持續存在。 _Aditya Yadav在提取請求中提交的修正 [26660](https://github.com/magento/magento2/pull/26660)_. [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* 應用程式不再截斷 `X-Forwarded-For` 標題上限為32個字元。 _Ihor Sviziev在提取請求中提交的修正 [27221](https://github.com/magento/magento2/pull/27221)_. [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* 使用自訂管理網域時，檢查重新導向是否為內部的邏輯現在可在管理中正常運作。 以前，此邏輯的問題會導致許多管理員重新導向至預設存放區的首頁。 _Vadim Malesh在提取請求中提交的修正 [29066](https://github.com/magento/magento2/pull/29066)_. [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* 的問題 `styles-old.less` 檔案已刪除，而且Linting不再識別錯誤。 _杜阮在提取請求中提交的修正 [28895](https://github.com/magento/magento2/pull/28895)_. [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php` 已重構。 _Vitaliy Ryaboy在提取請求中提交的修正 [28975](https://github.com/magento/magento2/pull/28975)_. [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* `ResourceConnection.php` 已重新建構以改善類別可讀性。 _Lukasz Bajsarowicz在提取請求中提交的修正 [29341](https://github.com/magento/magento2/pull/29341)_. [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* 內建Web伺服器的README檔案已更新，以包含所有Elasticsearch引數。 _Yevhenii Dumskyi在提取請求中提交的修正 [29300](https://github.com/magento/magento2/pull/29300)_. [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* 此 `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave` 外掛程式現在會如預期傳回值。 之前，此外掛程式不會傳回值，因此，儲存存放區檢視會產生錯誤。 _Pieter Hoste在提取請求中提交的修正 [29035](https://github.com/magento/magento2/pull/29035)_. [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* 新增下列對的魔法方法的支援 `DataObject`：

   * 要支援的新擴充功能 `get/set/has/uns` magic方法(搭配使用 `__call`)
   * 支援SessionManager，可將所有呼叫轉送至DataObject容器
   * 擴充功能的測試涵蓋範圍
   * 已更新篩選錯誤檢查的測試
   * 將PHPStan檢查層級從0提高至1。 _Oleksandr Kravchuk在提取請求中提交的修正 [27905](https://github.com/magento/magento2/pull/27905)_. [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface` 現在可以不只是字串。 限制 `magentoConfigFixture` 「 to string only 」為先前提取請求的不慎結果，且已還原。 _Kristof， Fomanm在提取請求中提交的修正 [29305](https://github.com/magento/magento2/pull/29305)_. [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* 此 `convertConfigTimeToUtc` 方法不再因為傳送不正確的引數至 `Phrase` 建構函式。 _Kos Rafal在提取請求中提交的修正 [29483](https://github.com/magento/magento2/pull/29483)_. [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* 當符合下列條件時，價格篩選器現在可在網格資料上按預期運作 `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition` 和 `Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()` 傳回索引包含的陣列 `from` 或 `to` 字串資料。 之前，應用程式擲回此錯誤： `Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`. _Nikita Sarychev在提取請求中提交的修正 [29214](https://github.com/magento/magento2/pull/29214)_. [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* 新增擴充點以支援將HTML新增至類別頁面。 這可修正先前提取請求所導致的錯誤。 _Gerchak在提取請求中提交的修正 [29291](https://github.com/magento/magento2/pull/29291)_. [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### 詳細目錄

<!-- ENGCOM-7979-->

* 已刪除不必要的程式碼註解 `app/code/Magento/CatalogInventory/Model/StockState.php`. _Vitaliy Prokopov在提取請求中提交的修正 [27758](https://github.com/magento/magento2/pull/27758)_. [GitHub-26702](https://github.com/magento/magento2/issues/26702)

### 分層導覽

<!-- MC-25043-->

* 階層式導覽側邊欄現在會顯示具有兩個選項(**是**/**否**)和相符的產品計數。 之前，分層導覽不會傳回 **否** 使用Elasticsearch進行部署時，布林值屬性的選項。

<!-- ENGCOM-7493-->

* 色票分層導覽篩選器現在與整個Adobe Commerce使用的標準篩選器一致。 _Bartlomiej Szubert在提取請求中提交的修正 [28015](https://github.com/magento/magento2/pull/28015)_. [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### 記錄

<!-- ENGCOM-7692-->

* 現在當部署僅處於開發人員模式時，會記錄所有中斷的參考錯誤。 之前，在生產模式下部署時也會記錄一個錯誤，這會使錯誤記錄膨脹。 _Bartlomiej Szubert在提取請求中提交的修正 [28735](https://github.com/magento/magento2/pull/28735)_. [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### 媒體集

<!-- ENGCOM-8014-->

* Media Gallery設定UI （管理員） **商店**  >  **設定**  >   **進階**  >  **系統**)已重新整理。 _Shankar Konar在提取請求中提交的修正 [29433](https://github.com/magento/magento2/pull/29433)_. [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* 新增測試以涵蓋 **使用位置** 媒體集中的影像連結。 _Nazar Klovanych在提取請求中提交的修正 [29392](https://github.com/magento/magento2/pull/29392)_. [GitHub-1963](https://github.com/magento/adobe-stock-integration/issues/1693)

<!-- ENGCOM-8006-->

* 媒體收藏館停用時，當商家嘗試儲存產品及其相關影像時，應用程式不再擲回例外狀況。 _Nazar Klovanych在提取請求中提交的修正 [29492](https://github.com/magento/magento2/pull/29492)_. [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

### MFTF

<!-- ENGCOM-7963 -->

* 此 `AdminSubmitAdvancedInventoryFormActionGroup`， `AdminClickOnAdvancedInventoryLinkActionGroup`、和  `AdminSetStockStatusConfigActionGroup` 動作群組現在會根據最佳實務用於測試中。 _Oleh USIA在提取請求中提交的修正 [29386](https://github.com/magento/magento2/pull/29386)_. [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup` 現在用於產品格線中的搜尋。 _Oleh Usik在提取請求中提交的修正 [29385](https://github.com/magento/magento2/pull/29385)_. [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup` 現在用於點按 **完成** 「搜尋類別」快顯視窗中。 _Oleh Usik在提取請求中提交的修正 [28989](https://github.com/magento/magento2/pull/28989)_. [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup` 現在用於取代之前用於商店客戶登入的一系列動作。 _Sathish Subramanian在提取請求中提交的修正 [28113](https://github.com/magento/magento2/pull/28113)_. [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* `AdminUpdateCustomURLRewritesPermanentTest` 已重構以符合MFTF最佳實務。 _Kate Kyzyma在提取請求中提交的修正 [28361](https://github.com/magento/magento2/pull/28361)_. [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* 測試名稱已變更以符合MFTF慣例。 _Evgeny Levinsky在提取請求中提交的修正 [27839](https://github.com/magento/magento2/pull/27839)_. [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### 新動作群組

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup` _Oleh Usik在提取請求中提交的修正 [29472](https://github.com/magento/magento2/pull/29472)_. [GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup` _Oleh Usik在提取請求中提交的修正 [29142](https://github.com/magento/magento2/pull/29142)_. [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup` _Oleh Usik在提取請求中提交的修正 [28993](https://github.com/magento/magento2/pull/28993)_. [GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _Oleh Usik在提取請求中提交的修正 [29000](https://github.com/magento/magento2/pull/29000)_. [GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup` 和 `AdminProductFormCategoryNotExistInCategoryListActionGroup` _Alexander Steshuk在提取請求中提交的修正 [28287](https://github.com/magento/magento2/pull/28287)_. [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _Oleh Usik在提取請求中提交的修正 [29133](https://github.com/magento/magento2/pull/29133)_. [GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _Oleh Usik在提取請求中提交的修正 [29007](https://github.com/magento/magento2/pull/29007)_. [GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup` _Oleh Usik在提取請求中提交的修正 [29134](https://github.com/magento/magento2/pull/29134)_. [GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### 新測試

<!-- ENGCOM-7600 -->

* 新增以管理員使用者身分刪除CMS頁面的測試。 _Dmitry Tsymbal在提取請求中提交的修正 [28112](https://github.com/magento/magento2/pull/28112)_. [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* 已新增 `StorefrontShareCustomerWishlistActionGroup` 測試客戶願望清單與無效電子郵件地址的共用。 願望清單共用的現有測試(`StorefrontShareWishlistEntityTest`)已重構。 `StorefrontCustomerShareWishlistActionGroup` 已過時。

<!-- ENGCOM-7682 -->

* 新增測試，以檢查的實作情形 **僅剩下X個臨界值** 組態設定。 _Oleh Usik在提取請求中提交的修正 [27549](https://github.com/magento/magento2/pull/27549)_. [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### 電子報

<!-- MC-34714-->

* 使用匯出Newsletter訂閱者清單 `Excel XML` 選項現在會如預期匯出所有列。 以前，匯出的資料僅包含頁面分頁值，而不包含所有列。

<!-- ENGCOM-7522-->

* Newsletter訂閱電子郵件現在會使用與其他與Newsletter相關電子郵件相同的HTML標籤。 _Pawel Tylek在提取請求中提交的修正 [27357](https://github.com/magento/magento2/pull/27357)_. [GitHub-28166](https://github.com/magento/magento2/issues/28166)

<!-- ENGCOM-7788-->

* 新增測試，以便以管理員使用者的身分刪除Newsletter訂閱者。 _Dmitry Tsymbal在提取請求中提交的修正 [28972](https://github.com/magento/magento2/pull/28972)_. [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* 針對在設定陳述式中具有不允許選項的來賓，新增電子報訂閱測試。 此測試會取代已棄用的測試 `VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest` 和 `StorefrontCreateNewSubscriberActionGroup`. _Dmitry Tsymbal在提取請求中提交的修正 [28872](https://github.com/magento/magento2/pull/28872)_. [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### 訂購

<!-- ENGCOM-7858-->

* 此 `GetAssetIdByContentFieldInterface` 及其實施於 `MediaContent` 模組現在允許Adobe Stock整合進行擴充 `MediaGallery` 篩選功能。 _Gabriel da Gama在提取請求中提交的修正 [29058](https://github.com/magento/magento2/pull/29058)_. [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* 此 `CustomerAddressI` 現在會在引號中驗證新建立客戶的值。 _Andrii Kalinich在提取請求中提交的修正 [29139](https://github.com/magento/magento2/pull/29139)_. [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* 總金額為零的銷退折讓單的訂單狀態現在為 `Closed`. 之前，應用程式會將其訂單狀態回報為 `Complete`. _Andrii Kalinich在提取請求中提交的修正 [29023](https://github.com/magento/magento2/pull/29023)_. [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### 頁面產生器

<!-- ENGCOM-7918-->

* 此 `description` 和 `short_description` 產品屬性已重新排序，以便更妥善地因應頁面產生器內容暫存的計畫變更。 _Matt Walters在提取請求中提交的修正 [29238](https://github.com/magento/magento2/pull/29238)_. [GitHub-543](https://github.com/magento/magento2-page-builder/issues/543)

### 付款方法

<!-- MC-34363-->

* 應用程式現在會顯示一則訊息，在您按一下時提示您輸入必要的信用卡資料 **提交** 未輸入有效付款資訊的管理員訂單。 先前，當付款輸入欄位無效且頁面變成非使用中時，Braintree卡驗證器沒有擲回錯誤。

<!-- MC-33494-->

* 您現在可以變更您從Admin針對帳戶有儲存信用卡(Braintree)的客戶所建立之訂單的送貨方式。 先前，當您選取不同的送貨方式時，系統並未選取儲存的卡片，且應用程式並未下訂單。

#### PayPal

<!-- MC-33879-->

* 結帳工作流程的「訂單稽核」頁面現在會透過結帳期間已變更出貨方式的Braintree訂單，顯示PayPal的正確出貨金額。 先前，當客戶在結帳工作流程的「PayPal訂單稽核」頁面上變更送貨方式時，應用程式未使用正確的方法更新訂單總計。

<!-- MC-34152-->

* 商戶現在可以成功取消使用PayPal授權的訂單。 之前，應用程式未取消訂單，並顯示此錯誤： `Declined: 10601-Authorization has expired`.

<!-- MC-33330-->

* 當您先完成另一張訂單後，關閉PayPal付款快顯視窗來取消訂單時，應用模組不會再清空您的購物車。

### 效能

* 三個新的組態設定支援減少消費者佇列CPU耗用量。 這些可選引數可加強控制消費者，並節省伺服器資源。 另請參閱 [設定訊息佇列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/) 以取得 `maxIdleTime`， `sleep`、和 `onlySpawnWhenMessageAvailable` 引數。

<!-- MC-31617-->

* 外掛程式清單設定現在會在執行期間產生 `di:compile` 命令。 此設定資訊會根據範圍寫入產生的中繼資料夾。 以前，此資訊會儲存在快取中。 由此帶來的效能改善包括：

   * 網路快取大小已減少
   * 許多案例的執行時間已得到改善。

<!-- ENGCOM-7290-->

* 應用程式現在會依需求載入適當的滑桿Widget，以改善頁面載入功能。 觸控滑桿Widget自訂功能已移至另一個檔案，因此只能在相容裝置上載入。 現在，只有當頁面上實際使用範圍繫結時，才會載入適當的滑桿Widget型別。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27616](https://github.com/magento/magento2/pull/27616)_. [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* 已改善同時訂購多筆訂單的結帳效能。

<!-- MC-25062-->

* 當匯入程式執行大量插入且重新索引程式同時從select執行大量插入時，不再發生死鎖。 之前，應用程式會顯示此錯誤： `PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`. [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### 退貨授權(RMA)

<!-- MC-35984-->

* 當您為退貨授權(RMA)建立送貨標籤後，「退貨」頁面現在會如預期般運作。 以前，商家在為RMA建立送貨標籤後，無法與「退貨」頁面上的任何頁面元素互動。 這是2.4.0的已知問題，並且 `MC-35984-2.4.0-CE-composer.patch` 已在2.4.0中解決此問題。

<!-- MC-35826-->

* 當具有受限制許可權的管理員嘗試為不再在指派的網站範圍內的產品建立退貨時，應用程式現在會顯示資訊性錯誤訊息或所有可用產品。 之前，應用程式會顯示空白頁面。

### 評論

<!-- MC-33405-->

* 以下專案的唯一索引鍵： `entity_pk_value-entity_type-store_id` 已新增至 `review_entity_summary` 此表格可防止為相同的產品ID (`entity_pk_value`)。 以前，缺少唯一索引鍵會導致相同的產品ID和SQL錯誤出現重複列。

### 銷售

<!-- MC-35675-->

* 應用程式不再指派 `Complete` 對需要零付款的訂單開立商業發票之後。

<!-- MC-35888-->

* REST API產生的「新出貨」電子郵件現在包含與從「管理員」手動建立之出貨相同的出貨與客戶資訊。 以前，此電子郵件不包含客戶名稱、追蹤資訊、訂購的產品和其他訂單資訊。

<!-- MC-35837-->

* 當電子郵件從管理員載入或自訂時，訪客使用者名稱現在會如預期顯示在發票和出貨相關的電子郵件中。

<!-- MC-35707-->

* PDF發票現在會轉換為下訂單所在商店檢視的語言。 之前，PDF發票是以Admin的語言翻譯。

<!-- MC-35858-->

* 您現在可以從銷退折讓單頁面按預期核發退款。 [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* 店面「訂購」頁面上顯示的當地語系化地區名稱現在可以正確翻譯。 以前，區域名稱不是以指定的地區設定為基礎，除非在「管理員」中進行編輯。

<!-- MC-35633-->

* 透過POST建立的出貨 `/rest/V1/shipment` 端點現在可以正確更新訂單。 之前，應用模組已建立出貨，但出貨狀態仍維持在處理狀態。

<!-- ENGCOM-7639 -->

* 銷退折讓單現在會顯示衍生自訂單所在商店範圍的付款方式。 先前，銷退折讓單會顯示預設存放區範圍所定義的名稱。 _Ledian Hymetllari在提取請求中提交的修正 [27582](https://github.com/magento/magento2/pull/27582)_. [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### 搜尋 {#search-heading}

<!-- MC-31304-->

* 您現在可以使用QuickSearch從「管理員客戶」檢視依屬性搜尋產品。 之前，目錄搜尋結果頁面上發生例外狀況。

<!-- MC-32518-->

* 新增產品屬性後，應用程式現在會依預期在類別頁面上顯示可設定的產品。

<!-- MC-33952-->

* Elasticsearch結果現在包含每個存放區檢視屬性選項的正確值。 如果「下拉式清單」或「多重選取」屬性在非預設存放區檢視中的選項值與在預設存放區檢視中的選項值不同，Elasticsearch現在會編制該值的索引，或在結果中傳回具有該值的產品。 以前，Elasticsearch不會索引該值，也不會在結果中傳回具有該值的產品。

<!-- MC-35013-->

* 透過SKU搜尋現在可在進階搜尋中使用Elasticsearch，如預期般運作。 先前，當您嘗試依SKU搜尋時，應用程式會顯示此錯誤訊息： `We can't find any items matching these search criteria. Modify your search`.

<!-- ENGCOM-7222-->

* 進階搜尋不再讓購物者篩選負價格。 _Rohan Hapani在提取請求中提交的修正 [27359](https://github.com/magento/magento2/pull/27359)_. [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* 範圍值現在會在「新同義字群組」表單中按預期重設。 _Sathish Subramanian在提取請求中提交的修正 [29206](https://github.com/magento/magento2/pull/29206)_. [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### 送貨

<!-- MC-34734-->

* 升級後，應用程式現在會正確計算出貨表格費率。 以前，運費表費率是根據不含VAT的淨價來計算。

<!-- MC-35955-->

* 客戶現在可使用多個地址結帳時，成功移除結帳工作流程訂單稽核頁面上的獎勵積分。 之前，應用程式擲回 `404 Not Found` 客戶按一下 **移除** 按鈕來移除任何地址的點。 這是2.4.0中的已知問題。

<!-- MC-33737-->

* 對於指定FedEx作為出貨方式的訂單，應用程式現在會在結帳工作流程中以正確貨幣顯示出貨率。

<!-- MC-33267-->

* UPS所出貨之訂單的送貨標籤多頁PDF現在會顯示正確的計數。

<!-- MC-35514-->

* 「建立套裝程式」頁面的JavaScript元件問題已解決。 之前，應用程式不會顯示 **建立送貨標籤** 核取方塊，且您無法建立現有訂單的送貨標籤。

### Sitemap

<!-- ENGCOM-7924-->

* 中的網站地圖 `robots.txt` 現在是商店專屬的。 _Vadim Malesh在提取請求中提交的修正 [29331](https://github.com/magento/magento2/pull/29331)_. [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* 編碼值現在會在中正確逸出 `sitemap.xml` 檔案。 先前，您在產品名稱或影像標題中加入編碼字元時，產生的網站地圖無效。

### 分段

<!-- MC-36458-->

* 此 **將產品設定為新產品** 屬性標籤現在會如預期顯示在產品的詳細資訊和已排程的更新頁面上。

<!-- MC-34484-->

* 您現在可以成功預覽CMS區塊的測試排程。 之前，應用程式擲回嚴重錯誤。

<!-- MC-33789-->

* 您現在可以在使用排程更新編輯CMS頁面並將其從預設存放區重新指派到其他存放區時，存取CMS預覽頁面。 先前，當您按一下預覽連結時，應用程式擲回404錯誤。

<!-- MC-33572-->

* 您現在可以使用POST `/V1/products/special-price` 更新產品的特殊價格，但不指定 `price_to` 引數值。 之前，會嘗試設定價格更新，但不包含 `price_to` 指定的引數不成功。

### 儲存

<!-- MC-35853-->

* 刪除先前建立的存放區檢視不會再導致使用分割資料庫設定的部署發生錯誤。 之前，應用程式擲回例外狀況。

<!-- MC-32634-->

* 您現在可以匯出 `config.php` 和來自一個網站的預設網站程式碼，以在多網站部署中的第二個網站上安裝和設定應用程式。 以前，預設的存放區和檢視在匯出後消失，店面發生錯誤。

### Swagger

<!-- ENGCOM-7720-->

* 您現在可以使用Swagger產生客戶權杖。 先前，輸入有效的客戶存取資訊時，Swagger不會產生回應代碼，而應用程式會顯示此錯誤： `The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`. _Vadim Malesh在提取請求中提交的修正 [28822](https://github.com/magento/magento2/pull/28822)_. [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### 色票

<!-- ENGCOM-7845-->

* 現在當購物者點按時，具有色票的可設定產品會顯示層級定價 **編輯** 在購物車中。 以前，應用程式在結帳前不會在購物車中顯示層級價格。 _Sathish Subramanian在提取請求中提交的修正 [29137](https://github.com/magento/magento2/pull/29137)_. [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* 應用程式現在會針對可設定的產品變化，以預期的方式顯示層級價格。

### 目標規則

<!-- MC-36162-->

* 產品頁面在下列條件下的效能已改善：

   * 目標規則模組已安裝
   * 已實作連結產品功能（相關產品、向上銷售和交叉銷售產品）

### 稅金

<!-- MC-36049-->

* 當商家從產品的屬性集中取消指定固定產品稅捐屬性後，應用程式就不會再在產品的店面上顯示固定產品稅捐屬性。

### 測試

<!-- ENGCOM-7874-->

* 已在單元測試中修正PHPUnit 9錯誤。 _Anton Evers在提取請求中提交的修正 [29244](https://github.com/magento/magento2/pull/29244)_. [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* 已新增單位測試，以核准已過期且有折扣的採購單，將會全額下訂單，而不會更新採購單總計。 _Joan He在提取請求中提交的修正 [18](https://github.com/magento/partners-magento2-infrastructure/pull/18)_. [github-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* `SynchronizeFilesInterface` 現在由整合測試涵蓋。 _jmonteros422在提取請求中提交的修正 [29493](https://github.com/magento/magento2/pull/29493)_. [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* 函式已新增至 `\Magento\TestFramework\TestCase\WebapiAbstract` 如此可比較測試中預期和實際結果的大型巢狀陣列，並允許測試者忽略實際結果中不相關的索引鍵。 _Jekabs在提取請求中提交的修正 [29458](https://github.com/magento/magento2/pull/29458)_. [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* 修正中預期值與實際值的反轉 `app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php`. _Lukasz Bajsarowicz在提取請求中提交的修正 [29271](https://github.com/magento/magento2/pull/29271)_. [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7886 -->

* 使用 `ObjectManager` 在測試期間具現化類別時，已取代為unit tests中的new關鍵字。 _Lukasz Bajsarowicz在提取請求中提交的修正 [29272](https://github.com/magento/magento2/pull/29272)_. [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* 已針對以下案例新增測試涵蓋範圍： `updateCustomer` 突變：無效的出生日期、無效的電子郵件地址和空白的客戶姓氏。 _Alexander Taranovsky在提取請求中提交的修正 [28304](https://github.com/magento/magento2/pull/28304)_. [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* 此 `ApiFunctional TestFramework` GraphQL使用者端現在可正確剖析標頭。 [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### 主題

<!-- MC-34397-->

* 現在，在您執行時，「使用者代理程式規則」中新增的主題會依預期受到影響 `bin/magento catalog:images:resize`. 以前，只有指派給商店的主題在下列情況下會受到影響 `bin/magento catalog:images:resize` 「 」已執行。

### 翻譯與地區設定

<!-- MC-20372-->

* 當管理員變更時，應用程式不再擲回錯誤 **日期** 在管理員產品建立期間或當管理員地區設定為中文或日文時儲存的欄位。 [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* 應用程式現在會檢查區域(前端或 `adminhtml`)，然後才會顯示內嵌轉譯標籤。 先前，對 `/rest/V1/integration/admin/token` 啟用內嵌翻譯時憑證有誤，導致在API回應中的錯誤訊息周圍包含內嵌翻譯標籤。 _Zach Nanninga在提取請求中提交的修正 [28856](https://github.com/magento/magento2/pull/28856)_. [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* 保加利亞地區已新增至 `directory_country_region` 表格。 _Nikola Lardev在提取請求中提交的修正 [27957](https://github.com/magento/magento2/pull/27957)_. [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* 管理員上的標題和按鈕 **客戶**  >  **新增地址** 和 **編輯產品**  >  **進階詳細目錄** 模型現在可以翻譯。 _Sathish Subramanian在提取請求中提交的修正 [28174](https://github.com/magento/magento2/pull/28174)_. [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* 術語FPT現在可以在管理員上翻譯  **商店**  > **設定**  > **銷售**  > **稅金**  > **固定產品稅金**. _Vadim Malesh在提取請求中提交的修正 [28108](https://github.com/magento/magento2/pull/28108)_. [github-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* 此 **運送到這裡** 「結帳工作流程送貨地址」模式上的按鈕標籤已變更，以符合其他按鈕所使用的駝峰式大小寫。 此案例現在與翻譯檔案中使用的案例相符。 之前，因為大小寫不符，所以不會轉譯此標籤。 _WK在提取請求中提交的修正 [28547](https://github.com/magento/magento2/pull/28547)_. [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### UI

<!-- ENGCOM-7514-->

* 現在，當隱私權和Cookie原則頁面顯示時，頁尾中的隱私權和Cookie原則連結會顯示為作用中的連結。 _Sathish Subramanian在提取請求中提交的修正 [28004](https://github.com/magento/magento2/pull/28004)_. [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* 修正與從「管理員」選取之訂單相關之商業發票的「商業發票註解」文字區域中游標未對齊的問題 **銷售** > **訂購**.

<!-- MC-36044-->

* 「建立新訂單」頁面現在顯示 **依SKU新增產品** 和 **新增產品** 按鈕如預期。

<!-- MC-35974-->

* 當所選產品有可用的產品評等時，應用程式現在會正確顯示「編輯評論」頁面。

<!-- MC-35475-->

* 應用程式現在會在執行Safari的iPhone上正確顯示管理員客戶編輯頁面。

<!-- MC-35370-->

* 更正「建立新訂單」頁面上不必要的捲動。

<!-- MC-35345-->

* 直接按一下 **匯出稅率** 「新增稅捐規則」頁面的按鈕(**商店**  >  **稅捐規則**)現在下載 `tax_rates.csv` 檔案（如預期）。 之前，商家必須按一下 **匯出稅率** 按鈕。 這是2.4.0中的已知問題。

<!-- MC-35313-->

* 此 **新增選取專案至我的購物車** 購物車底部的按鈕現在可如預期運作。 這是2.4.0中的已知問題。

<!-- MC-35296-->

* 此 **重新整理** 的按鈕 **最近檢視的產品** 客戶活動頁面的區段現在可如預期運作。 先前，當您按一下 **重新整理**，產品清單未重新整理，且頁面已捲動。

<!-- MC-35412-->

* 應用程式現在會在的「條件」標籤上正確顯示用於選取客戶出生日期的日曆圖示 **客戶** > **區段** > **新增區段**.

<!-- MC-35658-->

* 當購物者在Internet Explorer 11.x上捲動瀏覽此頁面時，結帳工作流程的結帳摘要區段不再閃爍。

<!-- MC-34602-->

* 應用程式現在會在店麵類別頁面上正確顯示依SKU排序的Widget。 之前，不會轉譯此Widget的HTML程式碼，且應用程式不會顯示 **載入SKU清單** 連結。

<!-- MC-37444-->

* 已使用以下專案停用的UI元件： `this.disabled(true)` 不再出現在店面。 [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* 應用程式現在會在行動檢視中正確顯示最近檢視的產品Widget。 _杜阮在提取請求中提交的修正 [27572](https://github.com/magento/magento2/pull/27572)_. [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* 從管理員變更產品位置現在會反映在店面的產品位置。 _Oleg Aleksin在提取請求中提交的修正 [28150](https://github.com/magento/magento2/pull/28150)_. [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* 登入表單樣式現在與空白主題中其他表單上的樣式一致。 已移除設定容器控制項換行輸入欄位寬度的不必要樣式。 _杜阮在提取請求中提交的修正 [28084](https://github.com/magento/magento2/pull/28084)_. [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* 此 **確定** 迷你購物車刪除產品確認快顯視窗上的按鈕現在會如預期般運作。 _杜阮在提取請求中提交的修正 [28083](https://github.com/magento/magento2/pull/28083)_. [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* 頁面載入期間，產品收藏館元素不再閃爍。 _Mateusz Krzeszowiak在提取請求中提交的修正 [27871](https://github.com/magento/magento2/pull/27871)_. [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* 控制欄位寬度的CSS類別現在會如預期般在整個管理員中套用至「開始時間」元素。 _Shankar Konar在提取請求中提交的修正 [29511](https://github.com/magento/magento2/pull/29511)_. [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* 條款與條件文字標籤現在可以正確顯示較長的文字字串。 _Bartlomiej Szubert在提取請求中提交的修正 [29413](https://github.com/magento/magento2/pull/29413)_. [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* 訂單失敗頁面的標題已重寫為精確性。 以前，當購物者取消訂單時，應用程式會顯示具有以下標題的頁面： `We received your order!`. _Angelo Romano在提取請求中提交的修正 [29410](https://github.com/magento/magento2/pull/29410)_. [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* 取消的訂單檢視頁面上的取消專案總數現在可以在取消的訂單檢視頁面上正確識別。 之前，此欄位會加上標籤 **總到期日**. _Madhu Rajawat在提取請求中提交的修正 [27516](https://github.com/magento/magento2/pull/27516)_. [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* 建立可設定產品頁面上的切換按鈕現在可按預期運作。 _杜阮在提取請求中提交的修正 [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* 「進階屬性特性」頁面上的進階屬性特性區塊圖示現在會如預期般運作。 _杜阮在提取請求中提交的修正 [28032](https://github.com/magento/magento2/pull/28032)_. [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* 系統設定頁面的「管理員」區段現在會展開，在您嘗試儲存新模組的設定時，依預期顯示必填欄位。 _Bartlomiej Szubert在提取請求中提交的修正 [28285](https://github.com/magento/magento2/pull/28285)_. [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* 修正當模式設定為時的放大鏡行為 `inside`. _Sean van Zuidam在提取請求中提交的修正 [29077](https://github.com/magento/magento2/pull/29077)_. [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* 修正當購物者在頁尾的訂閱欄位中輸入無效的電子郵件地址時，所導致的令人分心的長輸入欄位寬度。 _Dipesh Rangani在提取請求中提交的修正 [27106](https://github.com/magento/magento2/pull/27106)_. [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* 一個 `Uncaught ReferenceError` 當您新增標籤並將滑鼠游標移至其上方時，開發主控台中不再顯示錯誤。 _Nazar Klovanych在提取請求中提交的修正 [29392](https://github.com/magento/magento2/pull/29392)_. [github-1700](https://github.com/magento/magento2/issues/1700)

<!-- ENGCOM-7635-->

* 已移除一個未使用的 `AdminAnalytics` 測試(`TrackingScriptTest`)。 _Lukasz Bajsarowicz在提取請求中提交的修正 [28605](https://github.com/magento/magento2/pull/28605)_. [GitHub-28850](https://github.com/magento/magento2/issues/28850)

<!-- ENGCOM-7142 -->

* 已解決執行連續測試時靜態屬性的序列化和取消序列化問題。 _Pavel Bystritsky在提取請求中提交的修正 [26175](https://github.com/magento/magento2/pull/26175)_. [GitHub-28319](https://github.com/magento/magento2/issues/28319)， [GitHub-29313](https://github.com/magento/magento2/issues/29313)

### URL重寫

<!-- MC-34483-->

* 將商店檢視移至其他網站時，不再重設URL。 以前，應用程式錯誤地重新產生CMS和產品URL重寫。

* 您現在可以成功預覽CMS區塊的測試排程。 之前，應用程式擲回嚴重錯誤。

<!-- MC-33028-->

* 將存放區檢視指派給其他存放區時，應用程式現在會保留現有的目錄URL重寫，如預期一樣。 之前，應用程式會刪除商店專屬的URL重寫。

### 清漆

<!-- ENGCOM-7761-->

* 重新啟動Varnish不再導致503錯誤。 _Ihor Sviziev在提取請求中提交的修正 [28137](https://github.com/magento/magento2/pull/28137)_. [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### 儲存庫

<!-- MC-34674-->

* 當發生以下情況時，應用程式不再儲存信用卡號碼： **儲存以供日後使用** 未選取結帳工作流程付款區段上的核取方塊。

### Visual Merchandiser

<!-- MC-35574-->

* 當您在「視覺化銷售工具」中排序產品並啟用「詳細目錄」時，應用程式現在會顯示來源庫存而非預設產品存貨。

### Web API框架

<!-- MC-36084-->

* 使用REST建立的商業發票現在包含與「管理員」中建立的商業發票類似的禮品卡資訊。 先前，使用POST `/V1/order/:id/invoice` 若要開立商業發票，訂單未顯示已沖銷的禮品卡代碼或禮品卡金額。

<!-- MC-35838-->

* 擁有多個網站的商戶現在可以使用REST API來建立和更新產品，同時保留影像和影像角色繼承。 先前，當商家使用REST API來建立和更新產品，以及更新產品以供商店檢視時，系統會為該商店檢視載入並儲存預設影像角色。 因此，存放區檢視影像角色在更新後停止繼承預設範圍。

<!-- MC-36419-->

* 資源許可權允許存取時，未設定範圍的整合使用者帳戶現在可以透過REST API存取資源。

<!-- MC-35975-->

* 搜尋條件篩選器現在可如預期般用於建立可設定產品期間的產品屬性。 [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* 客戶群組ID現在已通過POST驗證 `/rest/V1/customers` 要求。 先前，當您使用無效時，應用程式不會顯示錯誤訊息 `group_id` （在這些要求中）。 _Vadim Malesh在提取請求中提交的修正 [28903](https://github.com/magento/magento2/pull/28903)_. [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* 預設不會為匿名REST呼叫建立PHP工作階段。 以前，工作階段甚至會在不需要時啟動。 _Maciej Pawlowski在提取請求中提交的修正 [26032](https://github.com/magento/magento2/pull/26032)_. [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* 使用各種REST端點來更新包含自訂選項的訂單不再刪除自訂選項資訊。 先前，中的值 `info_buyRequest` 「 」已刪除。 _Vadim Malesh在提取請求中提交的修正 [28483](https://github.com/magento/magento2/pull/28483)_. [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* 使用GET `V1/customers/me` 現在榮譽 **共用客戶帳戶**  設定（管理員） **商店** >  **設定**  >  **客戶**  >  **客戶設定**  > **帳戶共用選項**)擷取使用者資訊時。 _Pavel Bystritsky在提取請求中提交的修正 [28213](https://github.com/magento/magento2/pull/28213)_. [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* 與位址相關的擴充功能屬性可設為資料陣列。 之前，當包含的POST請求時，應用程式會擲回錯誤  `extension_attributes` 已傳送至 `estimate-shipping-methods`. 此錯誤是由先前的認可所引發，會影響上設定的任何擴充功能屬性。 `Magento\Quote\Api\Data\AddressInterface` 不是物件。 _Alexander Menk在提取請求中提交的修正 [27338](https://github.com/magento/magento2/pull/27338)_. [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* 您現在可以在使用PUT更新客戶時指定單一欄位 `V1/customers/:id` 端點。 過去，端點需要您指定客戶電子郵件和建立客戶所需的其他欄位。 _Vadim Malesh在提取請求中提交的修正 [28332](https://github.com/magento/magento2/pull/28332)_. [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### 網站限制

<!-- MC-32366-->

* 啟用網站限制不再封鎖以訪客身分登入的客戶的Varnish ESI請求。 以前，這些來賓無法存取首頁主功能表。

<!-- MC-32369-->

* 當啟用網站限制時，應用程式現在會如預期載入產品首頁。

### 希望清單

<!-- MC-35810-->

* 您現在可以使用願望清單搜尋功能，在已啟用支援多個願望清單的部署中，於公開願望清單中尋找產品。 以前，在客戶使用願望清單搜尋來尋找產品後，選取該產品並按一下 **加入購物車**，應用程式沒有將產品新增到購物車並顯示此錯誤： `Invalid Form Key. Please refresh the page`.

<!-- MC-35622-->

* 客戶現在可以從願望清單本身變更願望清單中產品的數量。 之前，應用程式不會更新產品數量，也不會顯示訊息。

<!-- MC-35618-->

* 客戶現在可以從願望清單本身變更願望清單中群組產品的數量。 之前，應用程式不會更新產品數量或顯示訊息。

<!-- MC-34408-->

* 店麵類別頁面現在會如預期顯示願望清單搜尋Widget。

<!-- ENGCOM-7580 7285-->

* 聚合填色 `Map`， `WeakMap`， `FormData`、和 `MutationObserver` 現在會視需要載入。 _Dmitry Tsymbal在提取請求中提交的修正 [28330](https://github.com/magento/magento2/pull/28330) 和Mateusz Krzeszowiak提出提取請求 [27618](https://github.com/magento/magento2/pull/27618)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)， [GitHub-28382](https://github.com/magento/magento2/issues/28382)

<!-- ENGCOM-7561-->

* 希望清單更新程式現在支援同時更新希望清單專案及其說明。 _Eduard Chitoraga在提取請求中提交的修正 [28222](https://github.com/magento/magento2/pull/28222)_. [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7564-->

* 應用程式現在可正確驗證購物者可建立的最大願望清單。 _Eduard Chitoraga在私人存放庫合作夥伴magento2ee的提取請求247中提交的修正_.

<!-- MC-36250-->

* 管理員現在可以設定客戶從非預設商店新增至願望清單的可設定產品。 先前，當客戶也從非預設商店新增可設定產品時，應用程式擲回錯誤。

<!-- ENGCOM-7660-->

* 新增測試，以便與超過允許數量的電子郵件共用客戶的願望清單。 _Dmitry Tsymbal在提取請求中提交的修正 [28641](https://github.com/magento/magento2/pull/28641)_. [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* 新增從客戶的願望清單中刪除專案作為管理員使用者的測試。 _Dmitry Tsymbal在提取請求中提交的修正 [28632](https://github.com/magento/magento2/pull/28632)_. [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* 新增停用希望清單功能的測試。 _Dmitry Tsymbal在提取請求中提交的修正 [28635](https://github.com/magento/magento2/pull/28635)_. [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* 新增一項測試，說明在共用客戶願望清單時使用無效的電子郵件地址。 `StorefrontShareWishlistEntityTest` 已重構。 `StorefrontCustomerShareWishlistActionGroup` 已過時。 _Dmitry Tsymbal在提取請求中提交的修正 [28330](https://github.com/magento/magento2/pull/28330)_. [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* 新增一項測試，用於共用超過允許文字長度限制的客戶的願望清單。 _Dmitry Tsymbal在提取請求中提交的修正 [28812](https://github.com/magento/magento2/pull/28812)_. [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## 已知問題

**問題**：使用協力廠商付款提供者時，用於結帳的新CAPTCHA功能在「下訂單」頁面上無法如預期運作。 執行2.3.6或2.4.1且已在下單店面頁面上啟用驗證碼保護的商戶，在使用第三方付款提供者（例如PayPal）結帳時，將會看到此錯誤： `Please provide CAPTCHA code and try again`. **因應措施**：此問題的修正現在已可用。 請參閱 [簽出中的Adobe Commerce v2.3.6/2.4.1驗證碼無法運作](https://support.magento.com/hc/en-us/articles/360051235772) 知識庫文章。 下一個每季修補程式(Q12021)也將包含修正。

**問題**：沒有管理員許可權的使用者目前無法設定其個人2FA存取權。 2FA包含兩個ACL角色。 一個角色會影響全域系統設定，只有在設定系統時才需要該角色。 第二個ACL角色會影響個別使用者2FA帳戶。 管理員使用者必須設定第二種型別的2FA ACL。 **因應措施**：使用者登入並檢視存取遭拒畫面後，即可造訪 `https://<magento store>/<admin_path>/tfa/tfa/requestconfig/` 以強制設定。 注意：我們不建議停用安全性設定。 不過，此因應措施只有在停用管理員URL秘密金鑰時才有效。

**問題**：此 **建立帳戶** 如果購物者輸入了無效的資料，則「建立新帳戶」頁面上的按鈕仍會保持停用。 這可防止購物者在發生錯誤後重新嘗試建立帳戶。 **因應措施**：套用修補程式 `MC-38509`. 我們的下一個季度版本（2.4.2、2.4.1-p1和2.3.6-p1）也將包含修正，這些版本計畫於2021年第1季度發行。 請參閱 [2.4.1和2.3.6建立帳戶按鈕停用hotfix](https://support.magento.com/hc/en-us/articles/360051130212) 知識庫文章。  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**問題**：啟用dotdigital時，商家無法從Safari中的管理員登入dotdigital。 請參閱 [啟用dotdigital帳戶時，無法透過admin面板登入dotdigital](https://support.magento.com/hc/en-us/articles/360050092291) 知識庫文章。

**問題**：當購物者選取的送貨地址與帳單地址不同時，於付款期間無法使用頂點地址驗證。 此問題將在2.4.2中修正。請參閱 [2.4.1已知問題：更新位址後，頂點位址驗證訊息沒有消失](https://support.magento.com/hc/en-us/articles/360050139631) 知識庫文章。

**問題**：當商家在Safari瀏覽器上儲存Dotdigital Page Builder表單時，應用程式會顯示一個空白頁面。 **因應措施**：重新載入頁面以套用變更。 請參閱 [2.4.1已知問題：儲存dotdigital Page Builder表單後出現空白頁面](https://support.magento.com/hc/en-us/articles/360049819092) 知識庫文章。

**問題**：在某些情況下，應用程式會自動將客戶登入以前使用的Amazon帳戶，而不是在客戶使用Amazon Pay結帳時提示他們登入。 請參閱 [2.4.1已知問題：無法在Google Chrome中變更Amazon帳戶](https://support.magento.com/hc/en-us/articles/360049814152) 知識庫文章。

**問題**：選取PayPalBraintree付款和多重地址運送時，應用程式會在結帳工作流程的帳單頁面上短暫顯示錯誤訊息。 請參閱 [2.4.1已知問題：使用PayPalBraintree結帳時出現錯誤](https://support.magento.com/hc/en-us/articles/360050253211) 知識庫文章。

**問題**：當訪客結帳停用時，若訪客客戶嘗試透過Braintree透過PayPal下訂單，應用程式會顯示非資訊性錯誤訊息。 請參閱 [2.4.1已知問題：使用Paypal透過Braintree進行訪客結帳期間，出現無資訊的錯誤訊息](https://support.magento.com/hc/en-us/articles/360050368111) 知識庫文章。

## 社群貢獻

我們感謝更廣泛的Magento Open Source社群，並感謝他們為此版本所做的貢獻。 請透過下列方法瞭解我們目前版本的社群貢獻內容：

* 如果社群成員已提供此版本的修正，我們會在這些附註的已修正問題區段中使用以下詞語來識別修正：「*社群成員提供的修正*「。

* 社群工程團隊 [Magento貢獻者](https://magento.com/magento-contributors) 維護按月、季和年排列的優秀貢獻個人和合作夥伴清單。 在「貢獻者」頁面中，您可以透過連結前往GitHub上合併的PR。

### 合作夥伴協助撰寫

下表重點說明合作夥伴所做的貢獻。 此表格列出提出提取請求的合作夥伴、外部提取請求，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### 個人貢獻者

下表列出我們社群成員的貢獻。 此表格列出外部提取請求、與其相關聯的GitHub問題編號（如果有的話），以及提出提取請求的社群成員。

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### 系統需求

我們的技術棧疊是以PHP和MySQL為基礎所建置。 如需詳細資訊，請參閱 [系統需求](../../../installation/system-requirements.md).

### 安裝和升級指示

您可以使用Composer安裝Adobe Commerce 2.4.1。

## 移轉工具套件

資料移轉工具可協助將現有Magento1.x存放區資料傳輸至Magento2.x。此命令列介麵包含驗證、進度追蹤、記錄和測試功能。 如需安裝指示，請參閱 [安裝資料移轉工具](../../../tools/data-migration-tool/install.md). 考慮探索或貢獻 [資料移轉存放庫](https://github.com/magento/data-migration-tool).

此 [程式碼移轉工具組](https://github.com/magento-commerce/code-migration) 協助將現有Magento1.x存放區擴充功能和自訂內容轉移至Magento2.x。命令列介麵包含轉換Magento1.x模組和版面的指令碼。
