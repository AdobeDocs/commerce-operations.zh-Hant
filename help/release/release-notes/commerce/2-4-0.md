---
title: Adobe Commerce 2.4.0發行說明
description: 瞭解2.4.0 Adobe Commerce版本的新功能、增強功能、錯誤修正和已知問題。
exl-id: 8dc18855-b040-4bc3-8c99-dd7e1407b1fa
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '20454'
ht-degree: 0%

---

# Adobe Commerce 2.4.0發行說明

Adobe Commerce 2.4.0引入對PHP 7.4、Elasticsearch7.6.x和MySQL 8.0的支援。重大的安全性變更包括預設在Admin中啟用雙因素驗證。 B2B增強功能包括新的「訂單核准」工作流程。

**在此版本中，已從核心程式碼中移除Authorize.Net、eWay、CyberSource和Worldpay支付方法整合。 商戶應移轉至Commerce Marketplace上提供的官方擴充功能**.

>[!NOTE]
>
>**Braintree付款整合**：在2.4.0之前，建議商戶從Commerce Marketplace安裝並設定官方Braintree付款整合擴充功能，以取代核心整合。 在此版本(2.4.0)中，擴充功能現已納入版本中。 商家必須遵循其他步驟，以確保Braintree在2.4.0部署中正常運作。 另請參閱 [Braintree](https://docs.magento.com/user-guide/payment/braintree.html) 以取得如何移轉至2.4.0的詳細資訊。

此版本包含2.3.5-p1中包含的所有核心品質改善、核心程式碼的100多項新修正，以及30項安全性增強。 其中包括由我們的社群成員解決226個GitHub問題。 這些社群貢獻的內容包括從微幅清理核心程式碼，到Inventory management和GraphQL的重大增強功能。

>[!NOTE]
>
>次發行會大幅增強程式碼。 升級至2.4.0之前，請確認您的環境符合最低需求 [技術棧疊需求](../../../installation/system-requirements.md).

{{bics}}

>[!NOTE]
>
>安全性版本的套件名稱通常會附加 — p1。 然而，我們無法避免偏離這些命名慣例2.3.5，這進而對後續的安全性套件名稱產生暫時的漣漪效應。 具體來說，完整功能2.3.5版本為2.3.5-p1。 我們將在2.4.0 GA發行版本的安全性為2.3.5-p2。 我們希望在未來版本中恢復為常用的命名慣例。

## 套用 `AC-3022.patch` 繼續提供DHL作為運送承運商

DHL已匯入schema 6.2版，並將於2022年9月淘汰schema 6.0版。 支援DHL整合的Adobe Commerce 2.4.4及舊版僅支援6.0版。部署這些版本的商戶應適用 `AC-3022.patch` 儘早繼續提供DHL作為運送承運商。 請參閱 [套用修補程式以繼續提供DHL作為運送承運商](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 知識庫文章，瞭解下載和安裝修補程式的詳細資訊。

## 有可用的安全性修補程式

商戶現在可以安裝時效性強的安全性修正，而不需套用完整每季版本（例如2.3.5-p2）提供的數百個功能修正和增強功能。 修補程式2.3.5.2 （Composer套件2.3.5-p2）是安全性修補程式，針對先前每季發行版本2.3.5-p1中發現的弱點提供修正。 此安全性修補程式包含套用至2.3.5版的所有修補程式。 (A *Hot Fix* 提供已發行版本的修正，可解決特定問題或錯誤。)

如需安全性修正程式的一般資訊，請參閱 [推出新的安全性修補程式發行版本](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287)如需下載和套用安全性修補程式（包括修補程式2.3.5-p2）的說明，請參閱 [快速入門內部部署](../../../installation/composer.md). 安全性修補程式僅包含安全性錯誤修正，不包含完整修補程式中包含的其他安全性增強功能。

## 其他發行資訊

雖然這些功能的程式碼隨季度發行提供，但其中幾個專案(例如B2B、Page Builder、Inventory management和Progressive Web Application (PWA) Studio)也獨立發行。 這些專案的錯誤修正記錄在每個專案專用的單獨發行資訊中，可在每個專案的檔案中找到。

## 亮點

請檢視此版本中的下列重點內容：

### 大幅增強安全性

此版本包含30多項安全性修正和平台安全性改善。

#### 超過30項安全性增強功能，有助於關閉遠端程式碼執行(RCE)和跨網站指令碼(XSS)漏洞

目前尚未發生與這些問題相關的已確認攻擊。 不過，某些漏洞可能會被利用來存取客戶資訊或接管管理員工作階段。 這些問題大多需要攻擊者先取得管理員的存取權。 因此，我們提醒您採取一切必要步驟來保護您的管理員，包括但不限於以下工作：IP允許清單、 [雙因素驗證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)，使用VPN，使用唯一位置而非 `/admin`、以及良好的密碼衛生。 另請參閱 [可供Magento使用的安全性更新](https://helpx.adobe.com/security/products/magento/apsb20-47.html) 以討論這些已修正的問題。

#### 其他安全性增強功能

* **實施適用於管理員帳戶、magento.com使用者帳戶和雲端SSH存取的2FA**

   * **保護您的管理員帳戶**. 管理員現在需要雙因素驗證(2FA)。 管理員使用者必須先設定其2FA，才能透過UI或網頁API登入管理員。 2FA預設為啟用。 我們強烈建議不要停用2FA模組。  這個額外的驗證步驟會使惡意使用者更難以在未經授權的情況下登入Admin。 另請參閱 [雙因素驗證(2FA)](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html). <!-- MC-22631-->

   * **保護您的帳戶**. 雙因素驗證(2FA)提供新增的可選安全性層，更能保護您的magento.com帳戶，避免未經授權的使用者以您不想要的方式使用您的帳戶。 另請參閱 [保護您的帳戶](https://docs.magento.com/user-guide/magento/magento-account-secure.html).

   * **保護雲端SSH存取安全**. 雲端基礎結構上的Adobe提供多因素驗證(MFA)強制執行，以管理對雲端環境的SSH存取的驗證需求。 預設不會在專案上啟用2FA的多重驗證。  Adobe強烈建議啟用此功能。 請聯絡支援以尋求協助。 另請參閱 [為SSH存取啟用多重驗證](https://devdocs.magento.com/cloud/project/project-enable-mfa-enforcement.html).

* **範本篩選條件嚴格模式現在預設為啟用**. 在舊模式中使用範本篩選器的元件（包括CMS頁面和區塊）容易受到遠端程式碼執行(RCE)的攻擊。 依預設啟用嚴格模式可確保不會故意啟用RCE攻擊。 <!-- MC-22982-->

* **UI資料提供者的資料呈現現在預設為停用**. 這消除了惡意使用者執行任意JavaScript的機會。 <!-- MC-17356-->

* **新增 `\Magento\Framework\Escaper` 類別**. 提供此類別給 `.phtml` 範本和負責產生HTML的PHP類別。 此類別包含與多個內容相關的HTML清理方法。 此 `$escaper` 本機變數可在內部使用 `.phtml` 範本和的使用時機，而非過時的 `$block->escape{method}`. 使用 `$escaper` 而非 `$block` 作為使用 `$block->escape{method}` 已過時。

* **支援security.txt檔案**. 此檔案是伺服器上的業界標準檔案，可協助安全性研究人員向網站管理員報告潛在安全性問題。

* **增強內容安全性原則(CSP)支援**. `SecureHtmlRenderer` 已新增至Framework，並可在以下位置取得： `.phtml` 要內嵌列入白名單的範本 `style` 和 `script` 標籤之間。 預設CSP設定不允許使用內嵌指令碼和樣式，XML檔案可以覆寫這些指令碼和樣式。 <!-- MC-34433-->

{{cve-notice}}

### 平台升級

下列平台升級有助於增強網站安全性和效能。 PHP和PHPUnit、Elasticsearch、MySQL及其他相依性的支援版本列於 [技術棧疊需求](../../../installation/system-requirements.md).

* **推出PHP 7.4支援，並棄用PHP 7.1和7.2**. 2.4.0引入對PHP 7.4的支援。

* **支援PHPUnit 9.x及淘汰PHPUnit 6.5**. PHP 7.4需要使用最新的PHPUnit測試架構，即PHPUnit 9.x。Commerce Marketplace擴充功能廠商必須確認所有新的擴充功能版本都與PHP 7.4相容，且所有單位和整合測試都已設定為使用PHPUnit 9執行。

* **Elasticsearch7.6.x支援**. Elasticsearch7.6.x現在是Adobe Commerce和Adobe Commerce的預設目錄搜尋引擎。 您必須同時安裝Elasticsearch7.6.x，才能安裝或升級至版本2.4.0。Elasticsearch版本2.x程式碼已移除。 Elasticsearch版本5.x和6.x已棄用，不再受支援。 另請參閱 [搜尋引擎必要條件](../../../installation/prerequisites/search-engine/overview.md).

* **MySQL 8.0支援**. 2.4.x版支援MySQL 8.x。（2.4.0已透過MySQL 8.0.20進行測試。） 建議商戶將部署移轉至MySQL 8.x，以充分利用其改良的效能、安全性及可靠性。 雖然Magento2.4.x仍支援MySQL 5.7，但已不再支援MySQL 5.6。 您無法以MySQL 5.6資料庫託管2.4.x。 另請參閱 [MySQL](../../../installation/prerequisites/database/mysql.md).

* **MariaDB 10.4支援**. 支援MySQL 8.0讓商家有機會透過Adobe Commerce部署MariaDB 10.4。 雖然商戶仍可使用2.4.0的MariaDB 10.2，但建議您升級至MariaDB 10.4，以提升效能和可靠性。 不再支援MariaDB 10.0和10.1 （因為在此版本中移除了MySQL 5.6的支援）。
* **移除MySQL目錄搜尋引擎**. MySQL搜尋引擎已從2.4.0中移除，並以Elasticsearch取代為預設搜尋引擎。 Elasticsearch提供優異的搜尋功能以及目錄效能最佳化。  所有商家都必須有Elasticsearch安裝及部署2.4.0。另請參閱 [驗證是否已安裝Elasticsearch](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/prepare/prerequisites.html).

* **將Zend架構上的相依性移轉至 [Laminas專案](https://getlaminas.org/about/foundation)** 以反映Zend Framework轉換至Linux Foundation的Laminas專案。 Zend框架已過時。 請參閱 [Zend架構移轉至Laminas專案](https://community.magento.com/t5/Magento-DevBlog/Migration-of-Zend-Framework-to-the-Laminas-Project/ba-p/443251) DevBlog文章。

* **控制器分解** 可讓擴充功能開發人員直接實作ActionInterface，而不使用「圖層超型別」類別。 請參閱 [控制器分解](https://community.magento.com/t5/Magento-DevBlog/Decomposition-of-Magento-Controllers/ba-p/430883) DevBlog文章。 _Vinai Kopp在提取請求中啟動的增強功能 [16268](https://github.com/magento/magento2/pull/16268) 並由Lukasz Bajsarowicz在提取要求中完成確認 [26778](https://github.com/magento/magento2/pull/26778)_. [GitHub-9582](https://github.com/magento/magento2/issues/9582)

* **移除重大詐騙保護碼的核心整合**. 不再支援此核心功能。 商戶應移轉至 [大幅增加詐騙和費用衝回保障功能](https://marketplace.magento.com/signifyd-module-connect.html) Commerce Marketplace上提供的資訊。

* 此 **已從程式碼庫中移除核心Braintree模組**. 「Braintree付款」模組現在提供相同的功能集。 另請參閱 [Braintree付款](https://marketplace.magento.com/paypal-module-braintree.html).

* 不再支援Internet Explorer 11.x瀏覽器。

### 基礎架構改良

此版本包含核心品質的增強功能，可改善Framework和以下模組的品質：客戶帳戶、目錄、CMS、匯入、購物車和結帳以及B2B。

* **移除第三方支付方法的核心整合**. 在此版本中，已從核心程式碼中移除Authorize.Net付款方法整合。 商戶應移轉至Commerce Marketplace上提供的官方擴充功能。 請參閱 [棄用付款整合](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Magento-core-payment-integrations/ba-p/426445) Devblog文章。 <!-- MC-29029-->

* **支援Elasticsearch的部分字詞搜尋（新的預設搜尋引擎）**. Elasticsearch現在支援在使用快速搜尋時，在產品名稱和SKU的搜尋詞中使用部分字詞。 MySQL搜尋引擎支援此功能，但此版本已棄用，並由Elasticsearch取代。

* **PayPal JavaScript SDK升級**. 我們已將PayPal Express Checkout整合移轉至最新的PayPal JavaScript SDK，此SDK會自動收集必要的風險引數並傳遞給PayPal。 PayPal Express結帳付款方式的行為保持不變。 不過，將此SDK升級至最新版本可讓商家存取最新功能和安全性增強功能。 <!-- MC-30962-->

* **棄用並移除網頁設定精靈**. 您必須使用命令列來安裝或升級2.4.0。另請參閱 [安裝Magento](../../../installation/advanced.md).

* **撰寫器更新外掛程式**. Composer外掛程式可解決必須對根專案進行的變更，藉此簡化升級流程 `composer.json` 檔案進行更新為新版本。 此外掛程式可防止覆寫自訂。 另請參閱 [使用撰寫器根外掛程式升級](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/implementation/perform-upgrade.html).

* **賣家輔助購物**. 此功能可讓商家代表其客戶檢視店面。 客戶選擇允許店面存取其帳戶。 此社群開發的功能包括由開發的原始擴充功能 [MAGEFAN](https://magefan.com/). 另請參閱 [賣家輔助購物](https://docs.magento.com/user-guide/configuration/customers/login-as-customer.html). 功能包括：

   * ACL可控制哪些管理員可登入客戶帳戶，並可根據網站進行設定
   * 與多個網站和客戶帳戶範圍的相容性
   * 代表客戶下的訂單會記錄到店面並管理員
   * 管理員登出後，所有工作階段都會被摧毀，而且管理員無法存取客戶密碼。

### 效能改良

* **改善客戶資料區段失效邏輯**. 此版本推出讓所有客戶區段資料失效的新方式，可避免自訂時本機儲存的已知問題 `sections.xml` 無效判定作用中。  (以往，當您有自訂時，私人內容（本機儲存）未正確填入 *etc/frontend/sections.xml* ，且動作無效。) 另請參閱 [私人內容](https://developer.adobe.com/commerce/php/development/cache/page/private-content/).

* **針對Redis效能進行多項最佳化**. 增強功能可將每個請求上執行的Redis查詢數量減到最少。 這些最佳化包括：

   * 減少Redis與Magento之間的網路資料傳輸大小

   * 藉由改善介面卡自動判斷需要載入哪些內容的能力，減少Redis的CPU週期消耗

   * 減少Redis寫入作業的競爭條件
   另請參閱 [對頁面和預設快取使用Redis](../../../configuration/cache/redis-pg-cache.md) 和 [設定快取](../../../configuration/cache/caching-overview.md).

* **改善對庫存表格的SQL查詢結果快取**. 這些增強功能包括：

   * 將SQL查詢快取到 `inventory_stock_sales_channel` 表格（1個查詢而非16個）

   * 將查詢結果快取到 `inventory_stock` 表格（1個查詢而非16個）

* **提升高達25-30%的快速訂購附加購物車效能**.

* 商戶現在可以使用 [延遲載入](https://en.wikipedia.org/wiki/Lazy_loading) 以載入影像。

### Adobe Stock整合v2.0

**能夠授權從媒體收藏館庫存影像預覽**. 商戶現在可以在媒體收藏館中找到任何Adobe Stock預覽影像，減少授權庫存預覽影像所需的步驟數。

### 新增媒體集

這是舊版媒體集的取代，為媒體資產提供可搜尋的新介面。 管理員現在可以比舊版此功能更快搜尋、篩選和排序影像，速度高達30倍。 商戶可以使用此工具來評估店面影像的使用情況。 擴充功能開發人員應留意，針對「媒體集」開發的擴充功能無法在新版「媒體集」中正常運作。

### 頁面產生器

頁面產生器現在支援PHP 7.4。

### Inventory management

此版本的Inventory management增強功能包含對店內接送和套件產品支援的支援。 另請參閱 [Inventory management發行說明](https://experienceleague.adobe.com/docs/commerce-admin/inventory/release-notes.html) 以取得對最近Inventory management錯誤修正的更詳細討論。

### GraphQL

GraphQL增強功能包括：

* `pickupLocations` 查詢支援庫存店內取貨功能
* `categories` 查詢會傳回符合指定篩選器的類別清單。 此查詢與 `categoryList` 查詢以支援分頁。
* `reorderItems` 突變可讓登入的使用者將先前訂單的所有產品新增到購物車中。

請參閱 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 以取得此增強功能和其他增強功能的詳細資訊。 另請參閱 [發行說明](https://devdocs.magento.com/guides/v2.4/graphql/release-notes.html) 以取得最近GraphQL錯誤修正的詳細討論。

### PWA Studio

另請參閱 [相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 以取得PWA Studio版本及其相容版本的清單。 如需有關增強功能和錯誤修正的資訊，請參閱 [PWA Studio版本](https://github.com/magento/pwa-studio/releases).

### B2B

**B2B的訂單核准工作流程功能**. 「訂單核准」可讓買方組織的經理為其買方設定核准規則。 另請參閱 [核准規則](https://docs.magento.com/user-guide/customers/account-dashboard-approval-rules.html). 功能包括：

* 每個公司帳戶唯一核准規則的自助設定
* 可依據訂單金額、明細行料號數或具有可設定臨界值的出貨成本的規則條件
* 功能各個方面的可自訂許可權
* 需要核准之採購單的快速店面檢視
* 已針對每份採購單執行之動作的完整歷史記錄記錄
* 在核准流程的所有步驟中傳送電子郵件通知給相關當事方。

此版本也包含多項錯誤修正。 另請參閱 [B2B發行說明](https://experienceleague.adobe.com/docs/commerce-admin/b2b/release-notes.html).

### 功能測試架構(MFTF)

MFTF v3.0.0包含這些新功能，並包含對PHP 7.4和PHPUnit 9的支援：

* MFTF協助程式，可以在測試架構之外建立自訂動作
* 測試實體的結構描述更新
* 測試模組中的子資料夾
* 巢狀判斷提示語法
* 靜態檢查，檢查並報告對已棄用測試實體的引用

此版本也會移除將測試升級至MFTF主要版本要求時新增的已棄用動作和升級指令碼。

### 廠商開發的擴充功能增強功能

此版本包含協力廠商開發的擴充功能。 它在這些擴充功能中引進了品質和UX的改善，並擴大了MFTF的涵蓋範圍。

Commerce Marketplace擴充功能廠商在發佈2.4.0版的新擴充功能版本時，應確認其擴充功能與PHP 7.4相容。

#### dotdigital

此版本包含下列增強功能：

* 由任何輸入型別（例如，下拉式清單、多選）擷取的客戶屬性值現在會正確同步為資料欄位。
* 現在會針對所有作用中的報價傳送購物車分析資料，即使它們不包含任何專案亦然。 這可讓商戶在清空購物車時，從方案中退出連絡人。
* 商戶現在可以依個別資料欄位同步網站名稱、商店名稱和商店檢視名稱。
* 「願望清單」、「檢閱」和「訂單同步」現在只會查詢一次交易式資料同步限制。
* Client類別的記錄輸出已得到改善，並且現在在API包裝函式中的所有方法中是一致的。
* 可設定的產品現在有一個庫存數字，即其子產品的總和。
* 新的外掛程式會偵測到由協力廠商程式碼（管理員以外）執行的庫存更新。
* [資料對應](https://docs.magento.com/user-guide/configuration/dotdigital/data-mapping.html) 和 [異動電子郵件](https://docs.magento.com/user-guide/configuration/dotdigital/transactional-emails.html) 已更新設定資訊。

#### Amazon Pay

此版本包含：

* CSP允許清單的更新
* 能夠針對多料號訂單執行多重授權
* 支援日文地址

#### Braintree付款

此套件擴充功能取代了我們的核心Braintree整合，此整合已在此版本中移除。 另請參閱 [Braintree付款](https://marketplace.magento.com/paypal-module-braintree.html).

#### 克拉納

此版本包含新的網站內傳訊選項，以協助購物者瞭解可用的信貸和融資選項。 此外，改善專案還包括：

* 退款
* API效率
* Cookie和單元測試
* 折扣
* 組態設定現在包含「現場訊息」區段，以控制韓文促銷訊息的店面顯示。 另請參閱 [設定克朗](https://docs.magento.com/user-guide/payment/klarna-setup.html).

#### 頂點

此版本的Vertex包含下列新功能和增強功能：

* 改善管理員設定使用者體驗
* 以XML架構檔案和修補程式取代安裝和升級指令碼
* 移除已棄用的程式碼(`ApiClient` 和 `ClientInterface`)

#### Yotpo

Yotpo評等和評論已與Page Builder整合。

## 已修正的問題

我們已修正2.4.0核心程式碼中的數百個問題。

### 安裝、升級、部署

<!-- MC-23940-->

* 您現在可以成功移除網站，以及中的網站範圍特定組態設定 `app/etc/config.php` 如預期。 之前，當您嘗試移除網站時，操作失敗，且應用程式顯示以下錯誤： `The website with code xxx that was requested wasn't found. Verify the website and try again`. 此外，應用程式會在店面顯示此錯誤： `Config files have changed. Run app:config:import or setup:upgrade command to synchronize configuration`. [GitHub-24061](https://github.com/magento/magento2/issues/24061)

<!-- MC-30140-->

* 在中停用的組態設定 `index.php` 無法再從管理員進行編輯。

<!-- MC-32405-->

* Adobe Commerce安裝現在可順利完成，並可在中預先定義存放區設定時，依預期建立存放區。 `config.php`.

<!-- MC-33151-->

* `\Magento\Store\App\Config\Source\RuntimeConfigSource::getEntities` 已重構，以減少 `SHOW TABLE STATUS` 進行查詢。 （此變更會回覆為此函式在2.3.3中顯示的行為。）

<!-- MC-23890-->

* 當您嘗試透過執行來升級資料庫時，不再重新執行資料指令碼 `bin/magento setup:upgrade`. 之前，升級指令碼會不必要地重新執行，進而影響效能。 [GitHub-19469](https://github.com/magento/magento2/issues/19469)

<!-- MC-30397-->

* 現在，當您與Redis的連線中斷時，應用程式會顯示下列行為。 以前，應用程式不會重新載入目前頁面，並顯示此錯誤： `An error has happened during application run. See exception log for details`.

   * 管理員和店面工作階段過期
   * 管理員和店面使用者必須重新登入
   * 工作階段資料儲存至 `var/session/`
   * 未記錄任何錯誤或例外狀況。

<!-- ENGCOM-6686-->

* 此 `bin/magento setup:di:compile` 命令不再因匿名類別而失敗。 _Yeven Sentiabov在提取請求中提交的修正 [26533](https://github.com/magento/magento2/pull/26533)_. [GitHub-26532](https://github.com/magento/magento2/issues/26532)， [GitHub-21555](https://github.com/magento/magento2/issues/21555)

<!-- ENGCOM-5546-->

* 使用應用程式預設隨附的替代LESS編譯器時，MagentoLuma主題中的LESS編譯問題已解決。 _Pieter Hoste在提取請求中提交的修正 [24003](https://github.com/magento/magento2/pull/24003)_. [GitHub-23619](https://github.com/magento/magento2/issues/23619)

<!-- ENGCOM-6367-->

* 您不再需要可寫入 `env.php` 檔案進行維護。 相反地，應用程式會設定 `no-cache` 維護模式中所有前端請求的標頭(`Cache-Control`)。 之前，您無法在下列情況下啟用維護模式： `env.php` 是唯讀的，而應用程式嘗試在切換至維護模式時停用FPC。 _Marco k̦ Pcke在提取請求中提交的修正 [25790](https://github.com/magento/magento2/pull/25790)_. [GitHub-24229](https://github.com/magento/magento2/issues/24229)

<!-- ENGCOM-7236-->

* `db-ssl-verify`  不再導致未定義的索引錯誤。 `ddev` 設定。 _Daniel Ruf在提取請求中提交的修正 [26763](https://github.com/magento/magento2/pull/26763)_. [GitHub-26762](https://github.com/magento/magento2/issues/26762)

<!-- ENGCOM-6247-->

* 更新撰寫器相依性以實作Redis金鑰到期，這已改善Redis效能。 _提取請求中由Toxix提交的修正 [25488](https://github.com/magento/magento2/pull/25488)_. [GitHub-25487](https://github.com/magento/magento2/issues/25487)

### AdminGWS

<!-- MC-33031-->

* 角色範圍有限的管理員現在可以修改替代文字，而應用程式會儲存這些值。 如果不允許管理員修改替代文字，替代文字方塊就會變成灰色。

### Adobe Stock整合

<!-- ENGCOM-6507-->

* Adobe Stock影像顯示已新增CSS樣式，以支援反白顯示選取的影像。  _Serhiy Zhovnir在提取請求中提交的修正 [25864](https://github.com/magento/magento2/pull/25864)_. [GitHub-761](https://github.com/magento/adobe-stock-integration/issues/761)

<!-- ENGCOM-7021-->

* 使用方向鍵移動輸入欄位游標時，不再觸發透過Adobe Stock預覽影像的導覽。  _Adarsh Manickam在提取請求中提交的修正 [27138](https://github.com/magento/magento2/pull/27138)_. [GitHub-973](https://github.com/magento/adobe-stock-integration/issues/973)

<!-- ENGCOM-6840-->

* 當客戶嘗試將篩選器套用至Adobe Stock影像時，應用程式現在會快取錯誤訊息。 _Shankar Konar在提取請求中提交的修正 [26502](https://github.com/magento/magento2/pull/26502)_. [GitHub-863](https://github.com/magento/adobe-stock-integration/issues/863)

<!-- ENGCOM-7195-->

* 按一下滑鼠後游標移至視窗的左垂直卷軸時，應用程式不再儲存Adobe Stock影像的預覽 **儲存預覽** 但不確認儲存操作。 _Serhiy Zhovnir在提取請求中提交的修正 [27399](https://github.com/magento/magento2/pull/27399)_. [GitHub-1002](https://github.com/magento/adobe-stock-integration/issues/1002)

### 分析

<!-- MC-32086-->

* 變更商店URL後，商店的分析報表現在可如預期使用。 先前，當您嘗試在URL變更後存取報表時，應用程式顯示404錯誤。

<!-- MC-32085-->

* AR訂閱啟用時，Analytics報表的資料同步現在會如預期般啟用。

### 後端

<!-- MC-25036-->

* 電子郵件範本(**管理員** > **行銷** > **通訊** > **電子郵件範本**)現在可以在啟用JavaScript縮制時從管理員預覽。 先前，當您嘗試預覽電子郵件範本時，「電子郵件預覽」快顯視窗是空的。 [GitHub-25068](https://github.com/magento/magento2/issues/25068)

<!-- ENGCOM-6433-->

* 建立具有有限許可權的管理員帳戶後，管理員現在可以如預期登入管理員。 之前，無法存取管理員。 相反地，具有這些許可權的使用者被重新導向到店面，並出現404錯誤。 _Eden Duong在提取要求中提交的修正 [25909](https://github.com/magento/magento2/pull/25909)_. [GitHub-25881](https://github.com/magento/magento2/issues/25881)

<!-- ENGCOM-6785-->

* 當您複製產品時，應用程式不再複製URL索引鍵、中繼標題、中繼關鍵字和中繼描述等SEO資料。  _Dasharth合作夥伴在提取請求中提交的修正 [26659](https://github.com/magento/magento2/pull/26659)_. [GitHub-26054](https://github.com/magento/magento2/issues/26054)

<!-- ENGCOM-6442-->

* 當您從建立影像時從頁面刪除影像，應用程式不會再擲回錯誤 **管理員**  > **內容** > **頁面**  >  **新增頁面**. 之前，應用程式在開發人員控制檯中擲回此錯誤： `500 (Internal Server Error)`. _Eden Duong在提取要求中提交的修正 [25924](https://github.com/magento/magento2/pull/25924)_. [GitHub-25893](https://github.com/magento/magento2/issues/25893)

### 套裝產品

<!-- MC-25251-->

* 的效能 `catalog_product_price` 改善套件組合產品的重新索引作業。

<!-- MC-29633-->

* 當套件產品為時，管理員無法再在管理員中為套件產品手動輸入稅捐類別 **稅捐類別** 和 **動態價格** 預設商店檢視的設定已停用。 先前，當管理員取消核取 **使用預設值** 旁的選項 **稅捐類別**，應用程式會啟用選項，允許管理員輸入其他值並儲存產品。

<!-- MC-30257-->

* 現在，產品頁面上可正確計算套件組合產品價格。

<!-- MC-29745-->

* 您現在可以新增任意數量的套裝產品至購物車，而不會發生錯誤。 先前，當您新增套件產品至購物車，然後導覽至購物車時，應用程式會顯示此錯誤： `Please correct the quantity for some products`.

### 快取

<!-- ENGCOM-7114-->

* 此 `cache.xsd` 結構描述來源 `Magento\Framework\Cache` 已重構，因此快取型別沒有 `instance` 當您透過管理員快取管理停用模組時，屬性不再造成例外。 先前，當您使用建立快取型別時， `cache.xml` 不含 `instance` 引數，應用程式在您嘗試停用它時擲回例外狀況。  _Andrii Beziazychnyi在提取請求中提交的修正 [27307](https://github.com/magento/magento2/pull/27307)_. [GitHub-26224](https://github.com/magento/magento2/issues/26224)

<!-- ENGCOM-6834-->

* `health_check.php` 如果您的部署中設定了資料庫快取引擎，就不會再失敗。 _Andrii Beziazychnyi在提取請求中提交的修正 [25722](https://github.com/magento/magento2/pull/25722)_. [GitHub-25669](https://github.com/magento/magento2/issues/25669)

### 購物車與結帳

<!-- MC-23870-->

* 當發生下列情況時，應用程式不會在簽出期間擲回錯誤： **與後端同步** 已啟用組態設定。 [GitHub-23833](https://github.com/magento/magento2/issues/23833)

<!-- MC-29786-->

* 送貨方法的選項按鈕現在已在簽出工作流程中按預期啟用。

<!-- MC-30258-->

* 現在，當條款與條件具有時，結帳工作流程中的訂單稽核頁面可成功載入要運送到多個地址的訂單 **手動套用** 設定已啟用。 先前，「複查」頁面未通過驗證，且應用程式顯示404錯誤。

<!-- MC-32330-->

* 當購物車上的價格更新時，應用程式現在會顯示旋轉圖示。

<!-- MC-33230-->

* 現在，當迷你購物車中的產品在結帳前無庫存，應用程式會顯示資訊訊息。 移除無庫存專案後，應用程式會顯示 **繼續結帳** 按鈕。 之前，應用程式不會顯示此按鈕。

<!-- MC-31391-->

* 現在，當您嘗試透過按一下來新增產品時，應用程式會顯示資訊性錯誤訊息 **依SKU排序** 上傳檔案損毀時。 之前，應用程式會顯示空白頁面。

<!-- MC-32962-->

* 應用程式現在會將購物車價格規則套用至符合規則條件的套件產品子產品。 之前，應用程式會將購物車價格規則套用至屬於套件產品的所有子產品。

<!-- ENGCOM-7485-->

* `StorefrontMiniCartSection`  已取代為`StorefrontMinicartSection` 在MFTF測試中。   _Andrii Kalinich在提取請求中提交的修正 [27955](https://github.com/magento/magento2/pull/27955)_. [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-6389-->

* 已移除送貨地址表單上國家選擇器元件的硬式編碼參考。  _Mateusz Krzeszowiak在提取請求中提交的修正 [25541](https://github.com/magento/magento2/pull/25541)_. [GitHub-22416](https://github.com/magento/magento2/issues/22416)

<!-- ENGCOM-6522-->

* 在Internet Explorer中檢視店面時，當游標停留在圖示上時，應用程式不再在購物車中的「刪除」圖示加上底線。  _Divyajyothi5321在提取請求中提交的修正 [26173](https://github.com/magento/magento2/pull/26173)_. [GitHub-26164](https://github.com/magento/magento2/issues/26164)

<!-- ENGCOM-6615-->

* 為帳單和送貨地址同時選取單一地址時，變更帳單街道不再變更客戶的送貨地址。 _Yurii Tvardyi在提取請求中提交的修正 [26279](https://github.com/magento/magento2/pull/26279)_. [GitHub-26276](https://github.com/magento/magento2/issues/26276)

<!-- ENGCOM-6251-->

* 迷你購物車的促銷區域現在會如預期般轉譯。 _Matti Vapa在提取請求中提交的修正 [25375](https://github.com/magento/magento2/pull/25375)_. [GitHub-25373](https://github.com/magento/magento2/issues/25373)

### 購物車價格規則

<!-- MC-23986-->

* 現在，在結帳工作流程期間，會套用以付款方法為基礎的購物車價格規則。 [GitHub-24206](https://github.com/magento/magento2/issues/24206)

<!-- ENGCOM-6550-->

* 已更正上日期選擇器頁面元素的行為 **管理員** > **行銷** > **促銷活動** > **目錄價格規則**. _Hitesh在提取請求中提交的修正 [26290](https://github.com/magento/magento2/pull/26290)_. [GitHub-26289](https://github.com/magento/magento2/issues/26289)

<!-- ENGCOM-7485-->

* `StorefrontMiniCartSection`  已取代為 `StorefrontMinicartSection` 在MFTF測試中。   _Andrii Kalinich在提取請求中提交的修正 [27955](https://github.com/magento/magento2/pull/27955)_. [GitHub-27897](https://github.com/magento/magento2/issues/27897)

<!-- ENGCOM-5822-->

* 已停用建立新購物車價格規則工作流程中未使用的優惠券格線。 _Eden Duong在提取要求中提交的修正 [24471](https://github.com/magento/magento2/pull/24471)_. [GitHub-24468](https://github.com/magento/magento2/issues/24468)

<!-- ENGCOM-6615-->

* 為帳單和送貨地址同時選取單一地址時，變更帳單街道不再變更客戶的送貨地址。 _Yurii Tvardyi在提取請求中提交的修正 [26279](https://github.com/magento/magento2/pull/26279)_. [GitHub-26276](https://github.com/magento/magento2/issues/26276)

### 目錄

<!-- MC-23633-->

* 應用程式現在會停用受限管理員變更產品數量屬性的能力，並如預期停用進階詳細目錄。 以前，只有數量屬性的視覺顯示會受到影響，而應用程式會在儲存產品後變更資料庫中的數量值。

<!-- MC-25235-->

* 當您變更排程更新中包含的階層式產品名稱時，應用程式不再擲回錯誤。 先前，當您嘗試以新名稱儲存產品時，應用程式會顯示此錯誤： `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry '3-0-0-2.0000-0' for key 'UNQ_EBC6A54F44DFA66FA9024CAD97FED6C7', query was: INSERT INTO catalog_product_entity_tier_price (all_groups, customer_group_id, qty, value, website_id, percentage_value, row_id) VALUES (?, ?, ?, ?, ?, ?, ?)`

<!-- MC-29023-->

* 自訂屬性值現在可以如預期從管理員儲存。

<!-- MC-29775-->

* 「最近檢視產品」功能現在會在下列情況下，顯示只與多商店部署中目前商店檢視相關聯的產品： **商店** > **設定** > **目錄** > **最近檢視/比較的產品** > **為目前專案顯示** 設為 **存放區檢視**. 以前，無論產品被指派到哪個網站，應用程式都會顯示所有網站最近檢視過的產品。

<!-- MC-29896-->

* 應用程式現在會在迷你購物車中顯示產品影像，而不會扭曲。 以前，應用程式會拉伸迷你購物車中的影像，以填滿影像容器的整個寬度和高度。

<!-- MC-29866-->

* 此 `getBasePrice` 函式現在會如預期傳回浮點數值，而非字串。

<!-- MC-30229-->

* 產品比較功能現在可如預期運作。 它現在只會顯示目前使用者比較清單中的產品。

<!-- MC-30234-->

* 您現在可以為主題指派預設浮水印。 先前，指派浮水印後，應用程式擲回嚴重錯誤。

<!-- MC-30540-->

* 您現在可以從管理員成功編輯具有多個變體（約5,000個）的可設定產品。 先前，當您嘗試編輯含有許多子產品的可設定產品時，應用程式會顯示此錯誤： `Warning: DOMDocumentFragment::appendXML(): Entity: line 1: parser error : CData section too big found in /vendor/magento/framework/View/TemplateEngine/Xhtml/Template.php on line 60`

<!-- MC-30734-->

* 排序上的屬性集 **管理員** > **目錄** > **產品** 現在是以預期的字母順序為基礎。

<!-- MC-30794-->

* 「最近檢視的產品」功能現在可在多存放區部署中如預期般運作。

<!-- MC-31837-->

* 目錄許可權受限的管理員現在可以建立可下載的產品。 之前，管理員無法建立可下載的產品，且應用程式擲回錯誤。

<!-- MC-31838-->

* 此 **網站中的產品** 新產品頁面的核取方塊現在預設為多網站部署中受限制的管理員啟用。 以前，非預設網站的核取方塊不是預先選取的，如果管理員未選取核取方塊，應用程式會顯示錯誤訊息。

<!-- MC-32772-->

* `addToCart` 現在可在資料層中如預期追蹤事件。 先前，在變更產品的可設定選項後，按一下 **加入購物車**，新增 `addToCart` 事件未新增至資料層。

<!-- MC-29449-->

* 迷你購物車和管理員購物車(**管理員** > **客戶** > **管理購物車**)現在會在套用目錄價格規則時顯示正確的產品價格。 以前，店面購物車顯示正確的產品價格，但迷你購物車和管理購物車顯示原始產品價格。

<!-- MC-30777-->

* 「管理產品格線」網站欄中的篩選功能現在可如預期運作。 先前，篩選結果未顯示正確數量的產品，但一致顯示產品總數為1。

<!-- MC-31432-->

* 價格條件使用 `catalog_product_entity_decimal` 依價格篩選。 不過，此表格不包含可配置、套件動態和分組產品的記錄，因為這些產品沒有固定價格。 用於依價格篩選的正確表格為 `catalog_product_index_price`.

<!-- ENGCOM-7104-->

* 管理目錄和產品清單現在會在「管理系統更新專案」、「成本」和「特殊價格」欄中顯示貨幣符號。 _Sergiy Vasiutynskyi在提取請求中提交的修正 [27261](https://github.com/magento/magento2/pull/27261)_. [GitHub-21910](https://github.com/magento/magento2/issues/21910)， [GitHub-20906](https://github.com/magento/magento2/issues/20906)， [GitHub-20472](https://github.com/magento/magento2/issues/20472)

<!-- ENGCOM-6375-->

* 「新增客戶群組價格」蹦現視窗(**管理員** > **目錄**  > **產品** > **新產品** > **進階定價**)現在會在您按一下關閉圖示時按預期關閉。 _Ashna-Jahan在提取請求中提交的修正 [25759](https://github.com/magento/magento2/pull/25759)_. [GitHub-25433](https://github.com/magento/magento2/issues/25433)

<!-- ENGCOM-6300-->

* 為新產品的說明和標題提供的範例說明不再包含雙引號。  _Nathan Morgan在提取請求中提交的修正 [25655](https://github.com/magento/magento2/pull/25655)_. [GitHub-25654](https://github.com/magento/magento2/issues/25654)

<!-- ENGCOM-6424-->

* 當您嘗試使用無效價格來篩選類別頁面上的產品時，應用程式不再擲回錯誤。 以前，應用程式會在系統記錄檔中記錄此錯誤。 _Ihor Sviziev在提取請求中提交的修正 [25912](https://github.com/magento/magento2/pull/25912)_. [GitHub-25911](https://github.com/magento/magento2/issues/25911)

<!-- ENGCOM-6455-->

* 您現在可以瀏覽多頁類別搜尋結果。 以前，當您嘗試使用「上一步」按鈕返回結果的第一頁時，應用程式會建立重複的搜尋結果頁面。 _Douglas Radburn在提取請求中提交的修正 [25337](https://github.com/magento/magento2/pull/25337)_. [GitHub-14971](https://github.com/magento/magento2/issues/14971)

<!-- ENGCOM-6194-->

* 將傳回型別更正為 `string|null` 的 `getSourceModel` 中的方法 `Eav\Attribute.php` 類別。 _Mychailo在提取請求中提交的修正 [25333](https://github.com/magento/magento2/pull/25333)_. [GitHub-25278](https://github.com/magento/magento2/issues/25278)

<!-- ENGCOM-6625-->

* 儲存新（重複）產品時，不會再產生數百次的產品影像重複。 _由Jeroen在提取請求中提交的修正 [25875](https://github.com/magento/magento2/pull/25875)_. [github-9466](https://github.com/magento/magento2/issues/9466)

<!-- ENGCOM-6818-->

* 當您刪除具有型別自訂選項的產品時，應用程式不再擲回JavaScript錯誤 `file` 從管理員建立訂單期間。  _Adrian-martinez-interactiv4在提取請求中提交的修正 [24843](https://github.com/magento/magento2/pull/24843)_. [GitHub-24842](https://github.com/magento/magento2/issues/24842)

<!-- ENGCOM-6959-->

* 使用建立無影像的產品 `product_page_image_large` 在版面配置中，會如預期顯示預留位置影像。 之前，應用程式擲回此錯誤： `Fatal error: PHP Fatal error: Uncaught TypeError: Argument 1 passed to Magento\Catalog\Block\Product\ImageFactory::getRatio() must be of the type integer, null given`. _Lukasz Bajsarowicz在提取請求中提交的修正 [26974](https://github.com/magento/magento2/pull/26974)_. [GitHub-26973](https://github.com/magento/magento2/issues/26973)

<!-- ENGCOM-6983-->

* 您可以使用 `POST /V1/:sku/links` 端點可在產品具有現有連結時，以空白的產品陣列設定產品連結。 之前，應用程式擲回錯誤。 _Sathish Subramanian在提取請求中提交的修正 [26979](https://github.com/magento/magento2/pull/26979)_. [GitHub-26800](https://github.com/magento/magento2/issues/26800)

<!-- ENGCOM-7151-->

* 您現在可以使用「產品」格線中的「動作」下拉式功能表，指定當您從「管理員」更新多個產品的屬性時，產品是否有權重。  _Bartomiej Szubert在提取請求中提交的修正 [26075](https://github.com/magento/magento2/pull/26075)_. [GitHub-6310](https://github.com/magento/magento2/issues/6310)

<!-- ENGCOM-7453-->

* 驗證邏輯已新增至 **網格上每頁的產品允許值** 和 **網格上每頁產品預設值** 存放區設定頁面的欄位。 以前，存放區管理員無法在這些欄位中輸入不可用的值。  _Lukasz Bajsarowicz在提取請求中提交的修正 [27093](https://github.com/magento/magento2/pull/27093)_. [GitHub-27089](https://github.com/magento/magento2/issues/27089)_

### 目錄規則

<!-- ENGCOM-6550-->

* 已更正上日期選擇器頁面元素的行為 **管理員** > **行銷** > **促銷活動** > **目錄價格規則**. _Hitesh在提取請求中提交的修正 [26290](https://github.com/magento/magento2/pull/26290)_. [GitHub-26289](https://github.com/magento/magento2/issues/26289)

<!-- ENGCOM-5122-->

* 目錄價格規則現在可如產品詳細資料頁面所預期，搭配自訂選項運作。 _Pavel Bystritsky在提取請求中提交的修正 [22917](https://github.com/magento/magento2/pull/22917)_. [GitHub-22856](https://github.com/magento/magento2/issues/22856)

### 目錄Widget

<!-- MC-29167-->

* 此 `CatalogWidget` products list現在可如預期使用錨點類別，而錨點類別中的產品現在可比對和顯示。 先前，當您選取作為錨點的父類別，但不包含指派的產品時，產品不會顯示在Widget中。

<!-- MC-30260-->

* 應用程式現在會依預期顯示所選父類別的所有子系。 先前，如果您選取的父類別是錨點，但不包含指派的產品，則應用程式不會顯示所有巢狀產品。

<!-- MC-31171-->

* 「最近檢視的產品」Widget現在可在下列情況下正常運作： **商店** > **設定** > **目錄** > **目錄** > **最近檢視/比較** > **將Widget產品與後端儲存裝置同步** 設為 **是**.

### CMS內容

<!-- MC-29619-->

* 您現在可以儲存並複製所有CMS頁面。 之前，當您嘗試複製某些頁面時，應用程式會擲回此例外狀況： `Unique constraint violation found`.

<!-- MC-30963-->

* 如果區塊指派給不同的存放區檢視，應用程式現在可讓您建立具有相同名稱的CMS區塊。

<!-- MC-30103-->

* 現在會如預期快取從Gallery影像縮圖選取。 之前，這些影像會即時調整大小。

<!-- MC-32275-->

* 當您儲存已指派給多個存放區的CMS頁面時，應用程式不再擲回錯誤。 先前，當您建立或編輯CMS頁面時，應用程式會儲存頁面，但也會擲回此錯誤： `Item (Magento\VersionsCms\Model\Hierarchy\Node) with the same ID "PAGE_ID" already exists`.

<!-- MC-32452-->

* 新的CMS頁面現在會如預期般新增至網站的商店頁面階層。

<!-- ENGCOM-7033-->

* CMS頁面自訂配置更新邏輯已得到改善。 應用程式現在會套用以下專案的特定版面變更： `cms_page_view_selectable_home_somechanges.xml`. _Sergiy Vasiutynskyi在提取請求中提交的修正 [27131](https://github.com/magento/magento2/pull/27131)_. [GitHub-26758](https://github.com/magento/magento2/issues/26758)

### Cleanup

<!-- ENGCOM-6573-->

* 從模組XML中移除額外的結尾標籤。 _Tejash Kumbhare在提取請求中提交的修正 [26339](https://github.com/magento/magento2/pull/26339)_. [GitHub-26338](https://github.com/magento/magento2/issues/26338)

<!-- ENGCOM-6521-->

* 已修正的對齊方式 **我的帳單和送貨地址相同** 核取方塊（位於結帳工作流程的「複查與付款」頁面區段）。  _Divyajyothi5321在提取請求中提交的修正 [26169](https://github.com/magento/magento2/pull/26169)_. [GitHub-26168](https://github.com/magento/magento2/issues/26168)

<!-- ENGCOM-6581-->

* 移除結帳工作流程之送貨地址區段上欄位標籤和星號之間不必要的空白字元。  _Daniel Ruf在提取請求中提交的修正 [26285](https://github.com/magento/magento2/pull/26285)_. [GitHub-26275](https://github.com/magento/magento2/issues/26275)

<!-- ENGCOM-6480-->

* 修正結帳工作流程送貨方法區段上選項按鈕未對齊的問題。  _Hitesh在提取請求中提交的修正 [25966](https://github.com/magento/magento2/pull/25966)_. [GitHub-25962](https://github.com/magento/magento2/issues/25962)

<!-- ENGCOM-6579-->

* 修正行動檢視中功能表間距不一致的問題。 _Hitesh在提取請求中提交的修正 [26238](https://github.com/magento/magento2/pull/26238)_. [GitHub-26235](https://github.com/magento/magento2/issues/26235)

<!-- ENGCOM-7225-->

* 修正行動檢視中迷你購物車「編輯」和「移除」圖示未對齊的問題。  _Vasilii Burlacu在提取請求中提交的修正 [27493](https://github.com/magento/magento2/pull/27493)_. [GitHub-26652](https://github.com/magento/magento2/issues/26652)

<!-- ENGCOM-6967-->

* 已修正「新增稅率/郵遞區號」頁面上的稅率郵遞區號(**管理員**  >  **儲存**  >  **稅金** >  **稅捐地區與稅率**)。 _Sathish Subramanian在提取請求中提交的修正 [26932](https://github.com/magento/magento2/pull/26932)_. [GitHub-26917](https://github.com/magento/magento2/issues/26917)

<!-- ENGCOM-7237-->

* 從設定精靈到管理員的連結現在可以如預期運作。 _Oleh Usik在提取請求中提交的修正 [26100](https://github.com/magento/magento2/pull/26100)_. [GitHub-24990](https://github.com/magento/magento2/issues/24990)

<!-- ENGCOM-6531-->

* 已在「管理」中「快取管理」格線的狀態列上停用排序。 _Sathish Subramanian在提取請求中提交的修正 [26215](https://github.com/magento/magento2/pull/26215)_. [GitHub-26208](https://github.com/magento/magento2/issues/26208)

<!-- ENGCOM-7015-->

* 已修正「 」上頁面元素的對齊錯誤 **管理員** >  **商店**  >  **屬性**  > **評等** >  **新增評等** 對話方塊。 _Sathish Subramanian在提取請求中提交的修正 [27014](https://github.com/magento/magento2/pull/27014)_. [GitHub-26992](https://github.com/magento/magento2/issues/26992)

<!-- ENGCOM-6485-->

* 修正「新增設計變更」頁面中日曆圖示的對齊錯誤。 _Eduard Chitoraga在提取請求中提交的修正 [26063](https://github.com/magento/magento2/pull/26063)_. [GitHub-20379](https://github.com/magento/magento2/issues/20379)

<!-- ENGCOM-6447-->

* 移除首頁暫留功能表上子功能表顯示中不必要的空間。 _Hitesh在提取請求中提交的修正 [25973](https://github.com/magento/magento2/pull/25973)_. [GitHub-25972](https://github.com/magento/magento2/issues/25972)

<!-- ENGCOM-6534-->

* 修正店面產品詳細資訊頁面上價格標籤未對齊的問題。 _Divyajyothi5321在提取請求中提交的修正 [26237](https://github.com/magento/magento2/pull/26237)_. [GitHub-25936](https://github.com/magento/magento2/issues/25936)

<!-- ENGCOM-6536-->

* 已修正缺貨文字相對於以下文字的對齊錯誤：  **加入購物車** 「行動檢視」中「產品清單」頁面上的「 」按鈕。  _Divyajyothi5321在提取請求中提交的修正 [26183](https://github.com/magento/magento2/pull/26183)_. [GitHub-26181](https://github.com/magento/magento2/issues/26181)

<!-- ENGCOM-6458-->

* 整合成功訊息顯示於  **管理員**  > **系統** > **擴充功能** > **整合** 現在已正確顯示。 _Divyajyothi5321在提取請求中提交的修正 [26011](https://github.com/magento/magento2/pull/26011)_. [GitHub-25930](https://github.com/magento/magento2/issues/25930)

### 可設定的產品

<!-- MC-23546-->

* 可設定產品的子產品現在可以透過API成功停用。

<!-- MC-30391-->

* 具有的購物車價格規則 **條件設定為「類別」（僅限父項）** 現在會如預期般持續運作。

<!-- MC-30989-->

* 您現在可以從交叉銷售索引標籤將可設定產品新增到購物車。 當您選取產品並按一下 **加入購物車** 從此索引標籤，您現在會進入產品詳細資訊頁面，您可以在其中選取特定產品選項。 之前，應用程式會將您重新導向至404錯誤頁面。

<!-- MC-32411-->

* 當連結這些產品的API呼叫失敗時，應用程式不再將簡單產品連結到可設定的產品。

<!-- ENGCOM-6483-->

* 修正可設定產品的「目前變數」清單中SKU的呈現。 _KaushikChavda在提取請求中提交的修正 [26007](https://github.com/magento/magento2/pull/26007)_. [GitHub-25591](https://github.com/magento/magento2/issues/25591)

<!-- ENGCOM-6460-->

* 您現在可以儲存 `system.xml` 設定資訊，方法是在下列位置輸入值：  **管理員** > **系統** > **設定** 位於沒有關聯標籤的欄位中。 _Andrii Chorniy在提取請求中提交的修正 [25985](https://github.com/magento/magento2/pull/25985)_. [GitHub-23899](https://github.com/magento/magento2/issues/23899)

<!-- ENGCOM-6689-->

* 的效能 `\Magento\ConfigurableProduct\Model\Product\Type\Configurable::isSalable` 已最佳化。  _Stanislav Ilnytskyi在提取請求中提交的修正 [26071](https://github.com/magento/magento2/pull/26071)_. [GitHub-26065](https://github.com/magento/magento2/issues/26065)

<!-- ENGCOM-6992-->

* 已改善負責更新可設定產品影像的邏輯。 先前，與可設定產品相關聯的簡單產品只會顯示與可設定產品相關聯的預設影像，而應用程式有時會針對產品顯示錯誤的主要影像。 _Sergiy Vasiutynskyi在提取請求中提交的修正 [26560](https://github.com/magento/magento2/pull/26560)_. [GitHub-26473](https://github.com/magento/magento2/issues/26473)， [GitHub-26856](https://github.com/magento/magento2/issues/26856)， [GitHub-26858](https://github.com/magento/magento2/issues/26858)

<!-- ENGCOM-6520-->

* 當您選取可設定產品的折扣選項時，應用程式現在會依預期顯示產品的特殊價格。 先前， `class="normal-price"` 未變更為 `class="special-price"` 已選取折扣選項時。 _Ravi Chandra在提取請求中提交的修正 [26170](https://github.com/magento/magento2/pull/26170)_. [GitHub-24972](https://github.com/magento/magento2/issues/24972)

### Cookie

<!-- MC-24182-->

* 此 `setRedirectCookie` 和 `clearRedirectCookie` 函式現在可如預期運作。 以前，這些函式會將Cookie傳送至瀏覽器，但遺失所有Cookie引數。 [GitHub-24547](https://github.com/magento/magento2/issues/24547)

<!-- MC-30789-->

* 當客戶導覽至新商店而未接受Google Tag Manager Cookie時，不再觸發Google Tag Manager標籤。

<!-- ENGCOM-6891-->

* 已將中繼資料新增至 `setRedirectCookie` 和 `clearRedirectCookie` 函式。  _Alexander Lukyanov在提取請求中提交的修正 [24612](https://github.com/magento/magento2/pull/24612)_. [GitHub-24547](https://github.com/magento/magento2/issues/24547)

### 自訂客戶屬性

<!-- MC-30739-->

* 應用程式現在會在結帳工作流程的地址區段，如預期般顯示自訂客戶地址屬性值。 以前，應用程式顯示自訂客戶地址屬性代碼而不是值，並且會觸發JavaScript錯誤。

<!-- MC-32301-->

* 當您在欄位中納入空白客戶屬性欄位時，應用程式不再擲回錯誤 **Forms使用於** 在店面建立公司帳戶時的欄位。 之前，應用程式擲回此錯誤： `PHP Fatal error: Uncaught TypeError: Argument 2 passed to Magento\Eav\Model\Attribute\Data\Text::validateLength() must be of the type string, null given`.

<!-- MC-33361-->

* 應用程式現在會儲存自訂客戶地址屬性，並如預期在登錄檔單中實作。 先前，當您從購物車建立帳戶時建立新的自訂客戶地址屬性時，應用程式不會儲存屬性資訊。

### 客戶

<!-- MC-29102-->

* 註冊新帳戶後，以訪客身分訂閱電子報的客戶將不再取消訂閱。

<!-- MC-29841-->

* 應用程式現在使用新的 `PHPSession` 每次變更密碼時。

<!-- MC-30650-->

* 您現在可以使用上的「與網站建立關聯」下拉式選單，成功建立客戶並將其與特定網站建立關聯 **客戶** > **所有客戶** > **新增客戶**. 先前，當您嘗試在多網站部署中將新客戶與非預設網站建立關聯時，應用程式會顯示此錯誤： `The store view is not in the associated website`.

<!-- MC-29946-->

* 當交易最初因信用卡無效而被拒絕，但後來成功完成時，應用模組現在會儲存客戶在結帳期間於預設帳單和送貨欄位中輸入的資訊。 之前，雖然應用程式在客戶輸入有效付款資訊時建立了訂單，但並未更新結帳工作流程的「我的帳戶」區段中的預設帳單或送貨地址。

<!-- MC-32325-->

* 現在，當您從管理員在多網站部署中建立新客戶時，應用程式會遵循客戶群組設定。

<!-- MC-31481-->

* 應用程式現在可使用成功匯入客戶資料 **客戶與地址（單一檔案）** 選項時機 `cron` 已啟用，且Customer Grid索引器設為 **依排程更新**. 晚於 `cron` 執行時，匯入的客戶資訊會如預期在Admin中提供。 以前，應用程式會匯入客戶資料，但不會使用新匯入的客戶記錄更新客戶網格。

<!-- MC-31117-->

* 您現在可以在需要出生日期時，從店面建立新客戶。 以前，即使您輸入了有效的DOB值，當此欄位為必填欄位時也無法建立新客戶。 [GitHub-26700](https://github.com/magento/magento2/issues/26700)

<!-- MC-31945-->

* 從管理員建立客戶時，現在會依照預期採用預設客戶群組設定。

<!-- MC-31435-->

* 此 `PHPSessionId` 現在於客戶登出然後重新登入後，按預期變更。

<!-- MC-32152-->

* 客戶購物車的「管理員」檢視現在會顯示多網站部署中，從多個網站新增至購物車的所有產品。 以前，當客戶從非預設網站將產品新增到購物車時，即使是 **共用客戶帳戶** 設為 **全域**.

<!-- ENGCOM-7036-->

* 驗證現在可如預期運作 **出生日期** 從「管理員」編輯客戶時的欄位。 以前，應用程式不會將使用者地區設定納入考量，而且對於某些生日，會顯示此錯誤： `The Date of Birth should not be greater than today`.   _Sergiy Vasiutynskyi在提取請求中提交的修正 [27149](https://github.com/magento/magento2/pull/27149)_. [GitHub-27027](https://github.com/magento/magento2/issues/27027)

<!-- ENGCOM-6208-->

* 從管理員下訂單時不再需要電子郵件欄位。  _Solwininfotech在提取請求中提交的修正 [24479](https://github.com/magento/magento2/pull/24479)_. [GitHub-22251](https://github.com/magento/magento2/issues/22251)

<!-- ENGCOM-6667-->

* 從管理員檢視購物車時，應用程式現在只會顯示客戶放入購物車的產品。 以前，從管理員檢視時，客戶的購物車會顯示目錄中的所有產品。 _Ravinder在提取請求中提交的修正 [26489](https://github.com/magento/magento2/pull/26489)_. [GitHub-26437](https://github.com/magento/magento2/issues/26437)

<!-- ENGCOM-6423-->

* 「我的帳戶」儀表板現在會在行動檢視中正確顯示電子郵件地址值。 _Eden Duong在提取要求中提交的修正 [25942](https://github.com/magento/magento2/pull/25942)_. [GitHub-25935](https://github.com/magento/magento2/issues/25935)

<!-- ENGCOM-7034-->

* 按一下 **建立帳戶** 客戶登錄檔單上的按鈕不再多次提交註冊請求。 _由princeCB在提取請求中提交的修正 [26642](https://github.com/magento/magento2/pull/26642)_. [GitHub-26590](https://github.com/magento/magento2/issues/26590)

### 客戶區段

<!-- MC-29471-->

* 當您以指派給客戶區段的使用者身分登入時（當區段包含過去訂單的條件時），應用程式不會再從客戶區段移除您的客戶帳戶。 之前，您必須按一下 **重新整理區段資料** 登入後，應用程式才會在「符合客戶」清單中顯示您的帳戶。

<!-- MC-30466-->

* 當區段條件包含訂單總數時，客戶區段現在會如預期運作。

<!-- MC-32409-->

* 客戶帳戶設為全域共用時，客戶區段規則現在會如預期套用。

<!-- MC-33081-->

* 我們已改善編輯和儲存包含大量客戶（超過300萬）的客戶區段的效能。 先前，當您建立或編輯包含許多客戶的客戶區段時，應用程式擲回500錯誤。

### 目錄

<!-- MC-33168-->

* 「預設狀態」下拉式選單現在會填入資料，這些資料會根據您為設定的值時指派給所選網站的允許國家/地區。 **預設稅捐目的地計算** 欄位。 之前，此下拉式清單會列出指派給預設網站的國家/地區。

### 可下載

<!-- MC-32306-->

* 您現在可以使用匯入檔案，透過SKU和說明大量更新可下載的產品。 以前發生驗證錯誤，匯入失敗。

### 動態區塊（原稱為橫幅）

<!-- MC-23852 31632-->

* 動態區塊現在可如預期搭配客戶區段使用。 當應觸發此應用程式的條件未滿足時，應用程式不再顯示動態區塊。 以前，當購物車為空時，應用程式會為以訪客身分登入的使用者顯示動態區塊。

<!-- MC-32652-->

* 動態區塊現在會根據客戶區段和商店檢視呈現在店面上。

### EAV

<!-- MC-29999-->

* 應用程式現在會遵循特定商店的設定，這些設定會決定在多網站部署中是否需要結帳工作流程的電話號碼欄位。 先前，在某個存放區在結帳工作流程中需要此欄位，而另一個存放區沒有的部署中，未在結帳時完成此欄位的客戶在不需要它的存放區上結帳時會遇到此錯誤： `Please check the shipping address information. "telephone" is required. Enter and try again`.

<!-- ENGCOM-6489-->

* EAV排序依據 `attribute option_id` 現在可如預期般運作。 _Tan Sezer在提取請求中提交的修正 [24360](https://github.com/magento/magento2/pull/24360)_. [GitHub-24357](https://github.com/magento/magento2/issues/24357)

<!-- ENGCOM-7082-->

* 您現在可以透過REST新增屬性，並將其指派給管理員的屬性集後，建立新產品。 之前，應用程式擲回500錯誤。  _Sergiy Vasiutynskyi在提取請求中提交的修正 [27191](https://github.com/magento/magento2/pull/27191)_. [GitHub-26827](https://github.com/magento/magento2/issues/26827)

### 電子郵件

<!-- MC-32842-->

* 當客戶要求退貨時傳送給他們的授權電子郵件現在會如預期包含RMA狀態。 以前，此電子郵件顯示空字串，而不是預期的傳回狀態。

<!-- MC-32864-->

* 當客戶在多網站部署中報告忘記的密碼時（客戶帳戶會在全域共用），不再將客戶從目前的網站重新導向。 以前，客戶會被重新導向至建立帳戶的網站。

<!-- MC-31544-->

* 傳送給客戶的訂單確認電子郵件現在會如預期包含訂購專案清單。 先前，當您透過載入和儲存預設範本在「管理員」中建立電子郵件範本時，從此範本產生的電子郵件不包含訂購專案清單。 [GitHub-26882](https://github.com/magento/magento2/issues/26882)

### 框架

* Zend架構的相依性已移轉至 [Laminas專案](https://getlaminas.org/about/foundation) 以反映Zend Framework轉換至Linux Foundation的Laminas專案。 Zend框架已過時。 _Ihor Sviziev在提取請求中提交的修正 [26436](https://github.com/magento/magento2/pull/26436)_. [GitHub-26335](https://github.com/magento/magento2/issues/26335)

<!-- MC-25257-->

* 對於使用荷蘭語言環境的管理員帳戶，特殊價格範圍設定（起始/截止日期）現在可以正常運作。

<!-- MC-29388-->

* `php bin/magento cron:run` 不再多次處理變更記錄表中的專案。 以前，當變更記錄表格中有超過100000個新版本時，可能會針對相同版本呼叫多次動作 `entity id`.

* 此 `php bin/magento setup:cron:run` 命令現已移除。 此外，升級時，請移除crontab中此檔案的參照。

* 此 `update/cron.php` 檔案已在2.4.0中移除，若此檔案存在於您的安裝中，則可安全地將其移除。 此外，升級時，請移除crontab中此檔案的參照。

<!-- MC-30544-->

* 「更新屬性」動作現在可以正確更新產品的 `updated_at column` 從 `catalog_product_entity` 當您從管理員編輯產品頁面更新產品時。

<!-- MC-30834-->

* 設定 `'persistent' => '1'` 在 `env.php` 執行時不再擲回錯誤 `setup:upgrade`.

<!-- MC-32243-->

* 此 **無效的表單金鑰。 請重新整理頁面** 登入頁面上的文字字串現在會如預期般翻譯。

<!-- MC-33278-->

* 我們已改善的效能 `Magento\Framework\App\DeploymentConfig\Reader::load` 函式。 先前，向Magento提出請求時，系統會重複呼叫此函式，而導致 `config.php` 和 `env.php config` 每次呼叫方法時載入的檔案。

<!-- MC-31728-->

* 應用程式不再下載 `blank.html` 管理員從管理員建立訂單時點按產品時的頁面。

<!-- MC-31729-->

* 在參考指示中為頁面上不存在（未宣告）的元件新增不可快取區塊至預設版面時，不再影響頁面快取。 將不可快取的區塊新增至預設版面配置處理常式，會使所有頁面都不可快取。 這會因版面產生程式而產生：在版面產生期間，應用程式會收集特定頁面的所有可用版面控點，並將控點中的指示合併至頁面的最終版面結構。 預設版面配置控制代碼會用作每個頁面的基本控制代碼。 因此，為預設處理常式宣告的版面配置更新會出現在每個頁面上。 [GitHub-9041](https://github.com/magento/magento2/issues/9041)

<!-- MC-31920-->

* MySQL鎖定管理員現在是主要鎖定管理員。 因此，MySQL的最低必要版本為5.7.9。

<!-- ENGCOM-6431-->

* `queue_consumer.xml` 現在允許在 `handler` 類別。 先前，當處理常式在其路徑中包含數字時，XSD驗證會失敗。 _Eden Duong在提取要求中提交的修正 [25952](https://github.com/magento/magento2/pull/25952)_. [GitHub-25731](https://github.com/magento/magento2/issues/25731)

<!-- ENGCOM-6902-->

* 不正確 `@var` 中的參考 `doc` 類別成員變數的區塊 `$queueIterator` 在類別中 `\Magento\Framework\MessageQueue\Topology\Config` 已更正。 _Artem Voloznov在提取請求中提交的修正 [24976](https://github.com/magento/magento2/pull/24976)_. [GitHub-24971](https://github.com/magento/magento2/issues/24971)

<!-- ENGCOM-5305 6684-->

* JavaScript頁面載入接聽程式現在會在檔案不再時觸發 `loading` 而不用等到標示為 `complete` 在檔案標示為 `complete` 可能會導致呈現JavaScript內容時發生嚴重延遲。 _John Hughes在提取請求中提交的修正 [23313](https://github.com/magento/magento2/pull/23313) 和提取請求 [50](https://github.com/magento/partners-magento2ee/pull/50)_. [GitHub-22909](https://github.com/magento/magento2/issues/22909)

<!-- ENGCOM-6305-->

* 現在，當您嘗試將數量為0或負數的產品新增到願望清單時，應用程式會顯示以下資訊性訊息： `Please enter a valid number in this field`. 之前，應用程式會顯示此錯誤： `We can't update your Wish List right now`. _Pawe Tylek在提取請求中提交的修正 [25641](https://github.com/magento/magento2/pull/25641)_. [GitHub-25032](https://github.com/magento/magento2/issues/25032)

<!-- ENGCOM-7071-->

* 應用程式不再支援從以下專案繼承DTO類別： `Magento\Framework\Api\AbstractExtensibleObject` 類別。 缺少PHP註釋 `@api`  已新增至 `AbstractExtensibleModel`，和遺漏的專案 `@deprecated`  註解已新增至 `AbstractExtensibleObject`.  _Alexander Taranovsky在提取請求中提交的修正 [22011](https://github.com/magento/magento2/pull/22011)_. [GitHub-22010](https://github.com/magento/magento2/issues/22010)

<!-- ENGCOM-6552-->

* 變更產品相關日期(例如， `news_from_date`， `news_to_date`， `special_price_from_date`， `special_price_to_date`)時，不會將當地語系設定為英文。 之前，應用程式擲回類似以下的錯誤：  `Invalid input datetime format of value '22/5/2019`.

### 一般修正

<!-- MC-21347-->

* 客戶模組不再依存於稽核模組。 之前，由於此相依性，您無法停用檢閱模組。

<!-- MC-25250-->

* 當頁面的預設屬性集包含具有選取標籤的下拉式清單屬性時，產品編輯頁面現在會成功載入。

<!-- MC-25260-->

* 可從「管理員」的「訂單」頁標存取的圖形式訂單圖表，現在可正確反映訂單數量。

<!-- MC-29273-->

* 當這兩個URL不同時，商店的管理員URL不再重新導向至店面URL。

<!-- MC-29658-->

* 現在，將效能工具組設定檔用於多個網站時，子類別的URL重寫產生可正常運作。

<!-- MC-30224-->

* 您現在可以刪除空的使用者模型，而不刪除指派給它的管理員角色。

<!-- MC-30636-->

* TinyMCE4編輯器現在支援所有HTML標籤。

<!-- MC-31128-->

* 按一下 **離線退款** 「建立銷退折讓單」工作流程中的按鈕現在會如預期產生銷退折讓單。 之前，JavaScript錯誤會停用此按鈕，且應用程式不會建立銷退折讓單。

<!-- MC-31832-->

* 商戶現在可以建立型別的產品屬性 `Decimal`. 之前，由於先前的錯誤修正，應用程式不會顯示產品屬性型別 `Price`. [GitHub-26949](https://github.com/magento/magento2/issues/26949)

<!-- MC-32175-->

* 當您嘗試在下列情況下開啟店面的類別頁面時，應用程式不再傳回500錯誤 **版面=產品 — 全寬** 已從「類別」頁面的「設計」標籤中設定。

<!-- MC-32697-->

* 修正中的錯誤 `AbstractSimpleObjectBuilder.php`.

<!-- MC-33427-->

* MAP （最低廣告價格）現在對群組產品可如預期般運作。

<!-- MC-29998-->

* 當您在多存放區部署的CMS頁面上變更語言時，應用程式現在會將您重新導向至適當存放區檢視的首頁。 先前，當您變更某些CMS頁面上的語言時，應用程式會顯示404頁面。

<!-- MC-30162-->

* 訂購查詢(`SalesOrderIndexGridAsyncInsertCron`)已重構，以減少傳回的資料集大小和查詢頻率。

<!-- MC-32371-->

* 您現在可以成功建立CMS頁面，並將其指派給CMS階層中的網站根類別。

<!-- MC-32783-->

* 當啟用類別許可權時(例如，當 **未登入** 客戶群組已獲得這些許可權)。

<!-- MC-32815-->

* 產品規則現在會如預期套用至無庫存產品。 以前，即使規則設定為顯示無庫存產品，應用程式也不會在相關產品清單中顯示無庫存產品。

<!-- MC-33222-->

* 按一下 **追蹤送貨** 管理員訂單的按鈕現在會如預期在快顯視窗中顯示追蹤資訊。 之前，此連結會帶領管理員前往「登入」頁面。

<!-- MC-31305-->

* 如果客戶嘗試完成包含多重選取客戶屬性的登錄檔單時發生錯誤，應用程式現在會顯示資訊性錯誤訊息，並繼續如預期顯示登錄檔單。 以前，應用程式顯示500錯誤。

<!-- MC-32224-->

* 應用程式現在會顯示 **銷退折讓單** 訂單部分退款之後的按鈕。 以前，在您建立部分退款後，應用模組不會顯示此按鈕，而且您無法為訂單的其餘部份建立銷退折讓單。

<!-- MC-31878-->

* 透過REST的大量訂單更新現在會如預期修改訂單狀態。 之前，應用程式擲回此錯誤： `report.ERROR: Property "AdditionalInformation" does not have accessor method "setAdditionalInformation" in class "Magento\Sales\Api\Data\OrderPaymentInterface".`

<!-- MC-30398-->

* 屬性篩選器現在會如預期在「類別」頁面的「購物選項」區塊中顯示。

<!-- MC-25138-->

* 您現在可以在已安裝B2B的部署中，將「類別」頁面上的產品限制從24變更為36。 之前，當此產品限制增加到36時，應用程式擲回嚴重錯誤。

<!-- ENGCOM-7175-->

* 在Internet Explorer中顯示時，客戶帳單和送貨地址現在會如預期般顯示在「管理員客戶編輯」頁面的「地址」標籤下。 _Vasilii Burlacu在提取請求中提交的修正 [27383](https://github.com/magento/magento2/pull/27383)_. [GitHub-27370](https://github.com/magento/magento2/issues/27370)

<!-- ENGCOM-6546-->

* 現在當您刪除書籤檢視時，所有書籤檢視都會保持可編輯狀態。 先前，在您刪除具有多個書籤檢視之帳戶的第一個檢視後，所有書籤檢視都會變成無法編輯。 _Bartomiej Szubert在提取請求中提交的修正 [26263](https://github.com/magento/magento2/pull/26263)_. [GitHub-14913](https://github.com/magento/magento2/issues/14913)

<!-- ENGCOM-7042-->

* 分層導覽不再中斷色票模組的HTML5驗證。 之前，系統會對中未定義的屬性發生HTML驗證錯誤。 [W3C標籤驗證服務](https://validator.w3.org/)，但這些屬性已變更為資料屬性。 _Nirav Patel在提取請求中提交的修正 [26055](https://github.com/magento/magento2/pull/26055)_. [GitHub-22363](https://github.com/magento/magento2/issues/22363)

<!-- ENGCOM-7065-->

* 未使用 `require.JS` 別名(`critical-css-loader``) has been removed from app/code/Magento/Theme/view/frontend/requirejs-config.js`. _杜阮在提取請求中提交的修正 [26987](https://github.com/magento/magento2/pull/26987)_. [GitHub-26963](https://github.com/magento/magento2/issues/26963)

<!-- ENGCOM-6242-->

* 應用程式現在會實作PHP7.x [可擲回介面](https://www.php.net/manual/en/class.throwable.php) 以啟用擷取所有可能洩露敏感資訊（例如密碼）的錯誤。 _由miszyman在提取請求中提交的修正 [25250](https://github.com/magento/magento2/pull/25250)_. [GitHub-23350](https://github.com/magento/magento2/issues/23350)

<!-- ENGCOM-6284-->

* 在「建立新資料夾」彈出式視窗中輸入新資料夾名稱時，按下ESC鍵，現在會如預期關閉彈出式視窗，而不建立資料夾。  _Shankar Konar在提取請求中提交的修正 [25349](https://github.com/magento/magento2/pull/25349)_. [GitHub-572](https://github.com/magento/magento2/issues/572)

<!-- ENGCOM-7464-->

* 已更正不正確的巢狀HTML結構。 以前，此結構會導致相關、向上銷售或交叉銷售產品清單的佈局中斷。 _Pieter Hoste在提取請求中提交的修正 [27926](https://github.com/magento/magento2/pull/27926)_. [GitHub-27920](https://github.com/magento/magento2/issues/27920)

<!-- ENGCOM-7144-->

* 移除對的重複呼叫 `addToolbarBlock`，而此問題已在中導致兩個類似的情況 `ORDER BY`.  _Vasilii Burlacu在提取請求中提交的修正 [27263](https://github.com/magento/magento2/pull/27263)_. [GitHub-26708](https://github.com/magento/magento2/issues/26708)

<!-- ENGCOM-6014-->

* 商戶現在可以在管理員使用者帳戶上設定到期日。 _Laura Folco在提取請求中提交的修正 [22837](https://github.com/magento/magento2/pull/22837)_. [GitHub-22833](https://github.com/magento/magento2/issues/22833)

<!-- ENGCOM-7071-->

* 我們已新增 `@api`  PHP註釋至 `AbstractExtensibleModel`，則 `@deprecated` PHP註釋至 `AbstractExtensibleObject`、和 `@see` 至 `AbstractExtensibleModel`.  _Alexander Taranovsky在提取請求中提交的修正 [22011](https://github.com/magento/magento2/pull/22011)_. [GitHub-22010](https://github.com/magento/magento2/issues/22010)

### 禮品卡

<!-- MC-31041-->

* GET `V1/orders/:orderId` 呼叫會如預期傳回禮品卡代碼。

### 贈品包裝

<!-- MC-29893-->

* 在產品層級啟用贈品包裝後，現在可以將其新增到購物車中。 之前，您可以在店面將禮品包裝加入產品中，但應用程式不會將禮品包裝加入訂單摘要中。

<!-- MC-30543-->

* 當您將到期日變更為未來日期時，到期的禮品卡會如預期般生效。 以前，禮品卡會維持過期狀態。

<!-- MC-32551-->

* 現在，當符合以下條件時，管理員建立訂單頁面會正確載入 **允許訂單層級的贈品訊息** 已啟用設定和範本縮制。 先前，當您嘗試在啟用這些設定時開啟此頁面時，應用程式擲回此錯誤： `Warning: require(content.phtml): failed to open stream: No such file or directory`.

<!-- MC-31427-->

* 應用程式現在會根據您已訂購禮品包裝的產品數量，正確計算禮品包裝成本。 以前，應用程式只會在訂單中包含一件產品的禮品包裝費用。

### Google標籤管理員

<!-- MC-29878-->

* 商戶現在可以延遲傳送資料給Google Analytics，直到滿足指定的條件。

<!-- MC-30673-->

* 遺失的 `Magento_GoogleTagManager::checkout/set_checkout_option.phtml` 範本已還原。

### GraphQL

<!-- ENGCOM-7074-->

* 應用程式現在會傳回GraphQL訊息 `The cart isn't active` 而非 `Current user does not have an active cart` 在特定情況下，當購物車變成非使用中並建立新的購物車ID時。 _Vadim Malesh在提取請求中提交的修正 [27187](https://github.com/magento/magento2/pull/27187)_. [GitHub-26117](https://github.com/magento/magento2/issues/26117)

<!-- ENGCOM-7105-->

* 移除當先前新增的產品無存貨時，使用GraphQL將產品新增到購物車時導致錯誤的程式碼。 _AleksLi在提取請求中提交的修正 [27015](https://github.com/magento/magento2/pull/27015)_. [GitHub-26683](https://github.com/magento/magento2/issues/26683)

<!-- ENGCOM-6535-->

* 修正GraphQL中應用程式在產品查詢上使用片段時未傳回所有必要資訊的問題。 _Riccardo Tempesta在提取請求中提交的修正 [26218](https://github.com/magento/magento2/pull/26218)_. [GitHub-26217](https://github.com/magento/magento2/issues/26217)

* GraphQL突變 `setShippingMethodsOnCart` 不再擷取中錯誤的資料  `available_shipping_methods` 屬性。 _Vadim Malesh在提取請求中提交的修正 [27004](https://github.com/magento/magento2/pull/27004)_. [GitHub-26742](https://github.com/magento/magento2/issues/26742)

### 群組的產品

<!-- ENGCOM-6115-->

* 現在，當屬於同一群組的另一個簡單產品無存貨時，您可以將屬於該群組產品的簡單產品新增至購物車。  _Gihovani Filip Pereira m̩ Detrio在提取請求中提交的修正 [24955](https://github.com/magento/magento2/pull/24955)_. [GitHub-22304](https://github.com/magento/magento2/issues/22304)

<!-- ENGCOM-6768-->

* 應用程式現在會依預期傳送電子郵件給客戶，說明退款的群組產品。  _Alexander Taranovsky在提取請求中提交的修正 [26246](https://github.com/magento/magento2/pull/26246)_. [GitHub-26245](https://github.com/magento/magento2/issues/26245)

<!-- MC-30313-->

* 當已分組產品的另一個子產品無存貨時，您現在可以將已分組產品的子產品新增到購物車。 先前，當一個子產品無庫存，您無法將任何其他子產品新增到購物車。

### 影像

<!-- MC-29523-->

* 影像現在儲存在 `pub/media/catalog/category` 儲存類別影像時如預期般進行。 之前，應用程式將這些影像儲存在 `pub/media/catalog/tmp/category`.

<!-- MC-30320-->

* 浮水印影像不再遮蓋其覆蓋的產品影像。 先前，當浮水印影像大於套用它的產品影像時，該產品影像不可見。

<!-- MC-32273-->

* 您現在可以從管理員成功將影像儲存至類別。 之前，在您儲存影像後，部分URL會遺失，且無法重新開啟影像。

<!-- MC-31727-->

* 應用程式現在顯示 `.png` 上傳後如預期般顯示影像。

<!-- MC-29483-->

* 從基本URL與店面URL不同的管理員上傳影像時，使用頁面產生器上傳至CMS區塊的影像現在會如預期顯示在預覽中。

<!-- ENGCOM-7063-->

* 使用REST新增或更新影像時，現在會如預期建立影像縮圖。 _Sergiy Vasiutynskyi在提取請求中提交的修正 [27170](https://github.com/magento/magento2/pull/27170)_. [GitHub-26825](https://github.com/magento/magento2/issues/26825)

<!-- ENGCOM-6962-->

* 產生的影像的自訂屬性 `Block\Product\ImageFactory` 現在可正確轉譯。 之前，由於HTML輸出的轉義不正確，您無法將自己的自訂屬性新增到屬性標籤中。 _Alexander-aleman在提取請求中提交的修正 [26959](https://github.com/magento/magento2/pull/26959)_. [GitHub-25219](https://github.com/magento/magento2/issues/25219)

<!-- ENGCOM-5980-->

* 從iPhone檢視店面時，影像不再模糊。  _Dmitriy在提取請求中提交的修正 [24743](https://github.com/magento/magento2/pull/24743)_. [GitHub-24735](https://github.com/magento/magento2/issues/24735)

<!-- ENGCOM-6999-->

* 店面上的影像現在有回應。 以前，影像高度會扭曲。  _Sean van Zuidam在提取請求中提交的修正 [27041](https://github.com/magento/magento2/pull/27041)_. [GitHub-27040](https://github.com/magento/magento2/issues/27040)

<!-- ENGCOM-7253-->

* 現在，店面會顯示預設商店標誌，當 `Magento_blank` 已使用主題。 _Vasilii Burlacu在提取請求中提交的修正 [27497](https://github.com/magento/magento2/pull/27497)_. [GitHub-27496](https://github.com/magento/magento2/issues/27496)

### 匯入/匯出

<!-- MC-25206-->

* 當匯入的資料包含 `swatch_image` store-view金鑰的值為 `no_selection`. 之前，應用程式擲回此錯誤： `Imported resource (image) could not be downloaded from external resource due to timeout or access permissions in row(s): 1`. [GitHub-25026](https://github.com/magento/magento2/issues/25026)

<!-- MC-29417-->

* 當您使用時，應用程式現在會依預期更新影像 `hide_from_product_page` 在具有多個存放區檢視的部署中匯入產品時進行設定。

<!-- MC-29677-->

* 現在可自訂選項會如預期匯入，當 `row_id` 不等於產品的 `entity_id`. 之前，應用程式在以下情況下不會匯入可自訂的選項： `row_id` 不等於產品的 `entity_id`，導致某些產品無法匯入。

<!-- MC-29916-->

* 與可設定產品相關的影像現在會在匯入期間正確上傳，並可在產品編輯頁面中依預期檢視。

<!-- MC-30304-->

* 已匯出 `.csv` 檔案現在會反映包含庫存或缺貨產品的篩選器設定。 先前，應用程式會匯出所有產品，無論您選取哪個庫存設定。

<!-- MC-30323-->

* 您現在可以使用匯入工作流程的「客戶與地址」單一檔案選項，成功匯入或更新客戶。 之前，當您選取此選項時，應用程式不會匯入客戶資料並顯示此錯誤： `Invalid data for insert`.

<!-- MC-30357-->

* 現在匯入並更新產品狀態後，庫存索引器會如預期般觸發。 先前，Stock Indexer不會索引變更的產品詳細目錄資料。

<!-- MC-30528-->

* 現在，當符合下列條件時，應用程式會成功匯入可設定產品之子產品的所有自訂選項 `store_view_code` 已指定。 無論您選擇個別或整體匯入可設定產品，此功能皆可使用。 以前，當匯入檔案包含多個專案和 `store_view_code` 已指定。

<!-- MC-30672-->

* 應用程式現在會在產品匯入期間提供訊息，指出匯入的產品 `.csv` 檔案有重複的金鑰。 商家可以使用此資訊來解決衝突。 之前，應用程式會顯示此錯誤： `Notice: Undefined index: name in /var/www/html/ee233dev/app/code/Magento/CatalogImportExport/Model/Import/Product.php on line 2524`

<!-- MC-29960-->

* 應用程式現在會顯示資訊更豐富的錯誤訊息，而且當您嘗試從刪除目錄時，不會顯示下載連結。 **系統** > **匯出** 清單。 先前，當您嘗試從此清單刪除目錄時，應用程式會繼續顯示無法下載之檔案的下載連結，並顯示無資訊的錯誤訊息。

<!-- MC-29959-->

* 此 `.csv` 匯入期間使用的檔案現在包含可下載產品的正確連結，且格式正確，可支援匯入和更新可下載的產品。

<!-- MC-30189-->

* 應用程式現在已成功匯出 `.csv` 檔案當您設定「取代」的匯入行為時，請選取先前匯出的 `.csv` 檔案，然後按一下 **檢查資料**. 之前，應用程式會顯示此錯誤： `Data validation failed. Please fix the following errors and upload the file again` 和 `Following Error(s) has been occurred during importing process`.

<!-- MC-30141-->

* 現在匯入並更新產品狀態後，庫存索引器會如預期般觸發。 先前，Stock Indexer不會索引變更的產品詳細目錄資料。

<!-- MC-31198-->

* `.csv` 產品匯入期間產生的檔案現在會如預期包含可下載產品的群組標題。 先前，不必要地驗證 `group_title` 匯入期間無法顯示可下載產品的群組標題。

<!-- MC-32153-->

* 時間 `cron` 已啟用，而您需使用 **(客戶和地址（單一檔案）)** 選項，則應用程式會如預期將資料填入管理員客戶格線。 在手動重新索引完成後，客戶格線會顯示客戶 `customer_grid indexer`. 之前，應用程式不會以新匯入的客戶地址更新客戶網格。

<!-- MC-32154-->

* 應用程式現在會在自動重新索引後按預期顯示客戶清單。 先前，雖然是手動執行 `bin/magento index:reindex` 運作中，客戶格線在自動重新索引後未顯示客戶資訊。

<!-- MC-30148-->

* 應用程式現在會從中刪除暫存檔 `<Magento_home>/var` 產品匯入完成後，如預期般運作。

<!-- MC-31879-->

* 當產品由匯入時，應用程式不會再在管理員中建立重複的SKU `.csv` 檔案。

<!-- ENGCOM-6141-->

* 當匯入的可設定屬性在其值中包含等號(=)時，匯入不再失敗。 _由dhoang89在提取請求中提交的修正 [25194](https://github.com/magento/magento2/pull/25194)_. [GitHub-25188](https://github.com/magento/magento2/issues/25188)

<!-- ENGCOM-6901-->

* 所有匯出的網格資料(Adobe Commerce和自訂資料)現在都有選項標籤，而不是所有型別欄的選項值 `Select` 或 `Multiselect`. 先前，當您匯出此資料時，匯出的試算表包含具有ID的欄，而不是顯示在網格中的值。 _Maksym Novik在提取請求中提交的修正 [26523](https://github.com/magento/magento2/pull/26523)_. [GitHub-25963](https://github.com/magento/magento2/issues/25963)

<!-- ENGCOM-7145-->

* 透過匯入，更新產品後，應用程式現在會如預期在店面上顯示套件組合產品。 `.csv` 檔案。 _Pavel Bystritsky在提取請求中提交的修正 [25664](https://github.com/magento/magento2/pull/25664)_. [GitHub-25540](https://github.com/magento/magento2/issues/25540)

### 索引

<!-- MC-25236 30779-->

* 我們已改善以下專案的效能： `indexer_update_all_views`. 索引現在速度更快，不再處理非作用中的規則，並且快取會從只有已變更產品的專案中清除。

<!-- MC-29917-->

* 店面上的產品價格現在準確地反映已排程目錄價格規則更新的套用。 以往，在您手動重新編列索引之前，價格不會反映排程的購物車價格規則(`php bin/magento indexer:reindex catalogrule_rule`)。

<!-- MC-30588-->

* 新增無法搜尋的屬性(亦即 `is_searchable`， `is_filterable`， `is_visible_in_advanced_search` 屬性已停用)。

<!-- ENGCOM-6533-->

* 應用程式現在會顯示訊息，以識別索引器以及重新索引作業失敗時索引作業所花費的時間。 _Lukasz Bajsarowicz在提取請求中提交的修正 [26207](https://github.com/magento/magento2/pull/26207)_. [GitHub-26206](https://github.com/magento/magento2/issues/26206)

<!-- ENGCOM-7179-->

* 儲存在商店中的產品，  `onthefly` 現在啟用索引器和平坦表格時，會遵循網站指派。 先前，如果您從產品中移除所有網站任務然後儲存，則所有平面表格都會包含產品，無論指定的網站任務為何。  _Abel Truong在提取請求中提交的修正 [27365](https://github.com/magento/magento2/pull/27365)_. [GitHub-16315](https://github.com/magento/magento2/issues/16315)

### 基礎架構

* 不再支援Internet Explorer 11.x瀏覽器。

<!-- MC-32223-->

* 與關聯的驗證邏輯 **出生日期** 客戶登錄檔單的欄位不再觸發JavaScript錯誤。

<!-- ENGCOM-7000-->

* 新增整合測試以涵蓋 `$storeId` 類別存放庫的 `get()` 方法。 _Lukasz Bajsarowicz在提取請求中提交的修正 [27048](https://github.com/magento/magento2/pull/27048)_. [GitHub-27044](https://github.com/magento/magento2/issues/27044)

<!-- ENGCOM-6378-->

* 啟用 **封鎖所有Cookie** 在Safari中設定不再導致JavaScript錯誤，且應用程式會顯示 `cookies disabled` 訊息如預期。 以前，應用程式顯示多個 `SecurityError (DOM Exception 18): The operation is insecure` 控制檯中的錯誤。 _Rl a̼ Verdugo Lorenzo在提取請求中提交的修正 [25324](https://github.com/magento/magento2/pull/25324)_. [GitHub-13865](https://github.com/magento/magento2/issues/13865)

<!-- ENGCOM-6674-->

* 執行整合測試時，應用程式不再擲回此錯誤： `Error: Call to a member function findFile() on array (/var/www/html/lib/internal/Magento/Framework/Code/Generator/DefinedClasses.php:59)`. 先前，的問題 `AutoloaderRegistry::getAutoloader` 導致整合測試隨機失敗。 _Lukasz Bajsarowicz在提取請求中提交的修正 [26480](https://github.com/magento/magento2/pull/26480)_. [GitHub-26479](https://github.com/magento/magento2/issues/26479)

<!-- ENGCOM-6958-->

* 此 `date` 標籤於 `/module-sales/view/frontend/templates/order/order_date.phtml`  已更正為 `span`. 之前，應用程式會在以下位置記錄錯誤： `exception.log` 按一下時的檔案 **檢視訂單** 在店面 **我的帳戶** > **我的訂單** 頁面。 _Andrii Chorniy在提取請求中提交的修正 [25895](https://github.com/magento/magento2/pull/25895)_. [GitHub-13269](https://github.com/magento/magento2/issues/13269)， [GitHub-25738](https://github.com/magento/magento2/issues/25738)

<!-- ENGCOM-6316-->

* JavaScript Mixin模組已重構，以改進進階套件模組的Mixin載入和應用作業。 之前，應用程式不會為進階套件模組載入或套用mixin。  _Mateusz Krzeszowiak在提取請求中提交的修正 [25587](https://github.com/magento/magento2/pull/25587)_. [GitHub-25586](https://github.com/magento/magento2/issues/25586)

<!-- ENGCOM-6344-->

* 此 `grunt clean` command現在會依預期清除產生的程式碼和中繼資料夾。 _Andrii Beziazychnyi在提取請求中提交的修正 [25765](https://github.com/magento/magento2/pull/25765)_. [GitHub-25739](https://github.com/magento/magento2/issues/25739)

<!-- ENGCOM-6463-->

* `getVersion` 結果(`ProductMetadata::getVersion`)現已快取，可改善 `ProductMetadata::getVersion` 方法。  _Lukasz Lewandowski在提取請求中提交的修正 [26001](https://github.com/magento/magento2/pull/26001)_. [GitHub-24025](https://github.com/magento/magento2/issues/24025)

<!-- ENGCOM-7037-->

* 缺少的setter `additional_information` 已新增至 `OrderPaymentInterface`，可解決其結構描述宣告與接受屬性之間的不一致性。 _Antonino Bonumore在提取請求中提交的修正 [26748](https://github.com/magento/magento2/pull/26748)_. [GitHub-26745](https://github.com/magento/magento2/issues/26745)， [GitHub-13222](https://github.com/magento/magento2/issues/13222)

### 分層導覽

<!-- MC-31763-->

* 應用程式現在會轉譯 **是/否** 「類別」頁面上的屬性，當 **用於分層導覽：可篩選（包含結果）** （店面屬性）啟用。

<!-- ENGCOM-6807-->

* 備援 `\Magento\Sales\Model\Order\Email\Sender\ShipmentSender` 已過時，改用  `\Magento\Sales\Model\Order\Shipment\Sender\EmailSender`. _Adarsh Manickam在提取請求中提交的修正 [26714](https://github.com/magento/magento2/pull/26714)_. [GitHub-14885](https://github.com/magento/magento2/issues/14885)

### 記錄

<!-- MC-29636-->

* 訂單狀態變更現在會如預期般記錄在 **系統** > **動作記錄** > **報告**.

<!-- MC-29637-->

* 應用程式現在會如預期在「管理動作」記錄檔中記錄銷售出貨動作。

<!-- MC-29892-->

* CMS頁面儲存動作現在記錄於管理動作記錄中。 以前只會記錄檢視動作。

<!-- MC-30618-->

* CMS頁面上的儲存動作現在會如預期般記錄在管理動作記錄中，當 **選取要記錄的所有動作** 在「管理動作記錄」標籤上啟用(**管理員** > **商店** > **設定** > **進階**)。

<!-- ENGCOM-7274-->

* CMS頁面修改現在會如預期般記錄在動作記錄中。 MFTF現在涵蓋此功能。  _Lukasz Bajsarowicz在提取請求中提交的修正 [27597](https://github.com/magento/magento2/pull/27597)_. [GitHub-171](https://github.com/magento/magento2/issues/171)

### 媒體集

<!-- ENGCOM-6993-->

* 按一下 **輸入** 在「媒體集」中命名新資料夾後，現在會儲存您所做的所有變更。 先前，按一下 **輸入** 而不使用滑鼠來選取 **確定** 導致所有變更遺失。  _Sergiy Vasiutynskyi在提取請求中提交的修正 [27029](https://github.com/magento/magento2/pull/27029)_. [GitHub-26847](https://github.com/magento/magento2/issues/26847)

<!-- ENGCOM-7490-->

* 您現在可以在「媒體集」下建立與主要資料夾同名的子資料夾。 之前，您無法儲存具有相同名稱的子資料夾。 _Vadim Malesh在提取請求中提交的修正 [27976](https://github.com/magento/magento2/pull/27976)_. [GitHub-1270](https://github.com/magento/adobe-stock-integration/issues/1270)

### 媒體儲存

<!-- MC-32593-->

* `var/resource_config.json` 不再於影像要求時重新產生 `get.php`. 之前，每次呼叫時會重寫此檔案 `get.php`.

### New Relic

<!-- ENGCOM-6461-->

* Adobe Commerce `cron`工作名稱現在按預期包含在NewRelic APM監控 — 交易的交易追蹤中。 其中包括 `cron` 從命令列執行的作業以及標準排程器執行的作業。  _Lukasz Bajsarowicz在提取請求中提交的修正 [25957](https://github.com/magento/magento2/pull/25957)_. [GitHub-22047](https://github.com/magento/magento2/issues/22047)

### 電子報

<!-- MC-31768-->

* 客戶現在可以如預期訂閱電子報。 先前，當客戶嘗試確認其訂閱時，應用程式會顯示此錯誤： `This is an invalid subscription confirmation code`.

<!-- ENGCOM-6525-->

* 店面頁尾的電子報輸入欄位現在會由任何支援的瀏覽器相同地轉譯。  _Divyajyothi5321在提取請求中提交的修正 [26182](https://github.com/magento/magento2/pull/26182)_. [GitHub-26176](https://github.com/magento/magento2/issues/26176)

<!-- ENGCOM-6691-->

* 有關電子報訂閱的店面訊息現在會如HTML預期般轉譯。 _Oleh Usik在提取請求中提交的修正 [26455](https://github.com/magento/magento2/pull/26455)_. [GitHub-25162](https://github.com/magento/magento2/issues/25162)

### 訂購

<!-- MC-33456-->

* 當網站顯示設定指定應排除稅捐時，訂單彙總小計不再顯示排除的稅捐。 先前，當多個網站設定了不同的顯示設定時，無論商店層級的設定為何，商店都會使用伺服器變數中定義的設定。

### 付款方法

<!-- MC -->

* 移除核心程式碼中整合的第三方支付方法Authorize.Net、eWay、CyberSource、Braintree和Worldpay。 商戶應移轉至Commerce Marketplace上提供的官方擴充功能。

<!-- MC -->

* 不再支援重要詐騙防護的核心實作。 商戶應移轉至 [大幅增加詐騙和費用衝回保障功能](https://marketplace.magento.com/signifyd-module-connect.html) Commerce Marketplace上提供的資訊。

<!-- MC-32546-->

* 您現在可以成功完成訂單，並在以下情況下返回商家首頁： **Website Payments Pro託管解決方案** 已設定。 先前，當您按一下 **返回商家**，應用程式擲回此錯誤： `Invalid Form Key. Please refresh the page`.

<!-- ENGCOM-6606-->

* 切換帳單地址不再導致JavaScript函式文字在店面結帳工作流程的付款區段中呈現。 _Chris Pook在提取請求中提交的修正 [26378](https://github.com/magento/magento2/pull/26378)_. [GitHub-26375](https://github.com/magento/magento2/issues/26375)

<!-- ENGCOM-7223-->

* 銷退折讓單現在會在 **調整退款** 「銷退折讓單概要」的欄位。  _Sergiy Vasiutynskyi在提取請求中提交的修正 [27343](https://github.com/magento/magento2/pull/27343)_. [GitHub-13851](https://github.com/magento/magento2/issues/13851)

<!-- ENGCOM-6524-->

* 您現在可以從以下連結中移除其他資訊 `quote_payment column additional_information` 資料表。 之前，您無法在儲存報價後移除此資訊，因為 `unsAdditionalInformation` 中的方法 `\Magento\Payment\Model\Info` 未正確初始化資料。  _Marco Oliveira在提取請求中提交的修正 [26084](https://github.com/magento/magento2/pull/26084)_. [GitHub-26083](https://github.com/magento/magento2/issues/26083)

<!-- ENGCOM-6609-->

* 付款指示現在衍生自下訂單的商店檢視。 以前，付款指示是從預設商店檢視中使用，因為 `BeforeOrderPaymentSaveObserver` 方法已從預設商店檢視中擷取付款指示。 _Karyna Tsymbal在提取請求中提交的修正 [26399](https://github.com/magento/magento2/pull/26399)_. [GitHub-26332](https://github.com/magento/magento2/issues/26332)

<!-- ENGCOM-6953-->

* 此應用模組現在會收集付款資訊，這些資訊會顯示在管理員以及商業發票與出貨商業發票中，這些資訊來自在具有多個商店的部署中下訂單的商店。 以前，應用程式會從預設商店衍生付款資訊。  _Bartomiej Szubert在提取請求中提交的修正 [26765](https://github.com/magento/magento2/pull/26765)_. [GitHub-17933](https://github.com/magento/magento2/issues/17933)

#### PayPal

<!-- MC-30498-->

* 應用程式現在會在客戶每次點按時顯示資訊性錯誤訊息 **使用PayPal付款** 在結帳工作流程中輸入無效的送貨地址後。 以前，只有當客戶第一次點選按鈕時，應用程式才會顯示錯誤訊息，而不是後續點選時。

<!-- MC-30639-->

* 應用程式不再將訂單狀態變更為 `Processing` 在「結帳」工作流程的「付款稽核」區段中，當使用PayPal的付款失敗時。

<!-- MC-30864-->

* 您現在可以使用「付款流程連結」付款方式，順利完成訂單。 先前，「付款流程連結」付款方式一律會拒絕付款，因為訂單狀態會保留在 `Pending` 付款狀態，即使付款方式記錄中的訂單狀態為 `Approved`.

<!-- MC-32494-->

* 使用PayPal Payflow Pro下單的訂單現在設為 `Suspected Fraud` 觸發欺詐篩選時的狀態。

<!-- MC-33110-->

* 您現在可以搭配任何支援的信用卡使用PayPal Express Checkout。 先前，當您使用PayPal Express Checkout完成訂單時按一下信用卡按鈕時，應用程式會擱置，您無法輸入任何信用卡資訊。

<!-- MC-33117-->

* 在PayPal Payflow Pro中下單的訂單現在已設為 `Suspected Fraud` 觸發欺詐篩選時的狀態。 先前，在應用模組端進行付款核准之前，PayPal上的付款交易狀態未經驗證。

<!-- MC-33294-->

* 現在啟用「網站限制」時，Payflow Pro可如預期運作。

<!-- MC-31196-->

* 應用程式現在可成功處理使用PayPal Express Checkout下單的訂單，其中訂單的出貨地址會指定客戶手動輸入文字欄位中的國家/地區區域，而不是從「出貨」頁面的下拉式功能表中選取。 之前，應用程式會在訂單複查頁面中顯示此錯誤： `Error 500: NOTICE: PHP message: PHP Fatal error: Uncaught Error: Call to a member function getId() on null in httpdocs/vendor/magento/module-paypal/Model/Api/Nvp.php:1527`. [GitHub-26698](https://github.com/magento/magento2/issues/26698)

<!-- MC-31573-->

* PayPal Pro付款方式現在可在Chrome 80瀏覽器中依預期運作。 此付款方法先前會叫用需要存取客戶工作階段的回呼端點，存取是新的預設Chrome SameSite Cookie功能所不允許的。 [GitHub-26840](https://github.com/magento/magento2/issues/26840)

<!-- MC-31292-->

* 當持續結帳購物車已啟用且 **清除登出時的持續性** 設定已設為 **否**. 之前，應用程式會將您重新導向至登入頁面。

<!-- ENGCOM-6383-->

* Paypal Express和Web Payments Pro的付款現在移至 `Processing` 處理開始後的預期狀態。 在過去，Paypal Web Payments Pro付款仍保留在 `Pending` 付款狀態，即使付款資訊位於 `Processing` 州別。 _Azambon在提取請求中提交的修正 [25876](https://github.com/magento/magento2/pull/25876)_. [GitHub-25659](https://github.com/magento/magento2/issues/25659)

### 效能

<!-- MC-31499-->

* 已改善客戶資料區段失效邏輯。 此版本推出讓所有客戶區段資料失效的新方式，可避免自訂時本機儲存的已知問題 `sections.xml` 無效判定作用中。 (以往，當您有自訂時，私人內容（本機儲存）未正確填入 *etc/frontend/sections.xml* ，且動作無效。) 另請參閱 [私人內容](https://developer.adobe.com/commerce/php/development/cache/page/private-content/#invalidate-private-content).

<!-- MC-31449-->

* 已重構客戶帳戶的匯入，以提高匯入速度。

<!-- MC-23383 ENGCOM-7006-->

* 商戶現在可以使用 [延遲載入](https://en.wikipedia.org/wiki/Lazy_loading) 以載入影像。 _Timon de Groot在提取請求中提交的修正 [27033](https://github.com/magento/magento2/pull/27033)_. [GitHub-27032](https://github.com/magento/magento2/issues/27032)

<!-- ENGCOM-6988-->

* 儀表板圖表已移轉至 `chart.js` 資料庫。  _Bartomiej Szubert在提取請求中提交的修正 [26923](https://github.com/magento/magento2/pull/26923). [GitHub-186](https://github.com/magento/community-features/issues/186)_

<!-- ENGCOM-6232-->

* 在包含許多產品屬性(3,000 - 23000個選項)的大型目錄上執行的作業效能，已透過重構屬性選項陣列的建置方式而改善。 _Behnam Shayani在提取請求中提交的修正 [25452](https://github.com/magento/magento2/pull/25452)_. [GitHub-20966](https://github.com/magento/magento2/issues/20966)

### 定價

<!-- ENGCOM-6647-->

* 應用程式現在會儲存並顯示階層式產品的正確價格，即使您已多次編輯產品。 以前，應用程式不會儲存對產品價格進行的最後一次編輯。 _Ravi Chandra在提取請求中提交的修正 [26162](https://github.com/magento/magento2/pull/26162)_. [GitHub-25195](https://github.com/magento/magento2/issues/25195)

<!-- ENGCOM-6914-->

* 固定和折扣儲存百分比現在都正確套用至訂單的最終價格。 以前，應用程式在產品詳細資料頁面上顯示不正確的層級價格（固定和折扣）儲存百分比。 _Sathish Subramanian在提取請求中提交的修正 [26584](https://github.com/magento/magento2/pull/26584)_. [GitHub-26583](https://github.com/magento/magento2/issues/26583)

### 產品警報

<!-- MC-30255-->

* 傳送給客戶有關可設定產品重新補充庫存的庫存警示電子郵件現在包含正確的產品價格。 之前，此電子郵件包含的產品價格為0。

<!-- MC-32873-->

* 現在，當使用者的工作階段過期時，產品庫存警示取消訂閱將生效。 先前，當您按一下 **按一下這裡以停止此產品的警示** 連結，應用程式顯示404錯誤。

<!-- MC-31979-->

* 產品警報的取消訂閱動作現在可如預期運作。 先前，當客戶按一下 **按一下這裡以停止此產品的警示** 連結，應用程式顯示404錯誤。

### 產品影片

<!-- MC-23743-->

* 您現在可以使用REST來更新YouTube影片(PUT `rest/V1/products/{SKU}`)。 以前，應用程式會顯示視訊的縮圖，但當您按一下 **播放** 按鈕。 [GitHub-23194](https://github.com/magento/magento2/issues/23194)

### 報表

<!-- ENGCOM-6635-->

* 產品清單現在會依SKU來訂購可設定的產品，SKU會依變數來分組可設定的產品。 之前，報表會依產品分組 `product_id`. _Lukasz Bajsarowicz在提取請求中提交的修正 [25858](https://github.com/magento/magento2/pull/25858)_. [GitHub-25856](https://github.com/magento/magento2/issues/25856)

<!-- ENGCOM-6427-->

* 此 **管理員** > **報表** > **重新整理統計資料** 表格現在顯示 **更新時間= Null** 狀態為 **從不** 在 **已更新** 欄而非 **未定義**. _Eden Duong在提取要求中提交的修正 [25932](https://github.com/magento/magento2/pull/25932)_. [GitHub-25931](https://github.com/magento/magento2/issues/25931)

<!-- ENGCOM-6925-->

* 「低庫存」報表不再包含停用的產品。 _Mohamed-Asar在提取請求中提交的修正 [26862](https://github.com/magento/magento2/pull/26862)_. [GitHub-26838](https://github.com/magento/magento2/issues/26838)

<!-- ENGCOM-7110-->

* 應用程式現在會顯示以下專案的精確值 **年初至今開始**  中的欄位 **管理員**  >  **商店**  >  **設定**  >  **一般**  >  **報表**. _Priya-V-Panchal在提取請求中提交的修正 [27088](https://github.com/magento/magento2/pull/27088)_. [GitHub-27086](https://github.com/magento/magento2/issues/27086)

### 退貨授權(RMA)

<!-- MC-24906-->

* 當您從店面成功建立訂單和RMA時，應用程式不再顯示錯誤。 之前，應用程式會如預期建立RMA，但也會顯示此錯誤：  `We can't create a return right now. Please try again later`.

<!-- MC-30181-->

* 店面訂單退貨中包含的追蹤連結現在可如預期運作。 以前，當客戶按一下訂單退貨頁面上的出貨追蹤連結時，應用模組會顯示此錯誤： `PHP Fatal error: Uncaught Error: Call to a member function getTitle() on null in /app/z7kvt3uys6daq/var/view_preprocessed/pub/static/vendor/magento/module-shipping/view/frontend/templates/tracking/details.phtml:1`.

<!-- MC-30237-->

* 當您從管理員建立訂單退貨後，「退貨」標籤現在會如預期般顯示。

<!-- MC-34150-->

* 已從RMA電子郵件範本中移除不必要的字串(`app/code/Magento/Rma/view/frontend/email/new.html`)。

### 評論

<!-- MC-29578-->

* 應用程式現在會停用 **提交評論** 按鈕後。 先前，應用程式並未在第一次點按後停用此按鈕，並在使用者點按 **提交評論** 按鈕多次。

<!-- MC-31293-->

* 此 **管理員** > **報表** > **評論** > **依產品** 篩選器清單現在會依預期顯示結果。 先前，當您嘗試篩選此清單時，應用程式未顯示任何結果。

<!-- ENGCOM-6938-->

* 擱置中稽核功能表專案現在如預期般啟用，於 **管理員** >  **行銷** > **使用者內容** > **擱置中的評論**.  _Ravinder在提取請求中提交的修正 [26230](https://github.com/magento/magento2/pull/26230)_. [GitHub-26229](https://github.com/magento/magento2/issues/26229)

### 獎勵

<!-- MC-31459-->

* 當訂單傳回至多商店環境中執行的商店時，應用程式現在會依預期退還獎勵積分，因為多商店環境中為每個商店設定了不同的獎勵積分費率。 以往，應用程式對於使用獎勵點數購買的退貨訂單沒有如預期退還點數。

### 銷售

<!-- MC-29426-->

* 已完成的訂單現在會同時顯示在付款系統和Adobe Commerce中。 以前，訂單出現在付款系統中，但不出現在Adobe Commerce中。 [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-30000-->

* 應用程式現在會遵循客戶的預設送貨地址。 以前，應用程式不會根據設定和 **與帳單地址相同** 未自動啟用設定。

<!-- MC-30299-->

* 應用模組現在會正確計算包含折扣的訂單退款。 以前，應用程式錯誤地計算了運費稅和運費折扣，並且退款總計與支付總計不符。

<!-- MC-33165-->

* 當新客戶在多網站部署中建立訂單時，應用程式現在會指派正確的群組ID。 之前，應用程式會套用預設客戶群組中的設定。

<!-- MC-31786-->

* 具有有限許可權（包括檢視銷退折讓單、商業發票及出貨的許可權）的管理員現在可以如預期從「訂單」頁面檢視商業發票與出貨。 先前，當受限管理員嘗試檢視訂單時，應用程式會顯示此錯誤： `Something went wrong with processing the default view and we have restored the filter to its original state`.

<!-- MC-24023-->

* 當客戶將超過現有產品庫存一半但不超過總庫存的產品數量新增到購物車時，應用程式不再顯示錯誤。 以前，在這些情況下，應用程式會顯示此錯誤： `The requested qty is not available`. [Github-24365](https://github.com/magento/magento2/issues/24365)

<!-- ENGCOM-6910-->

* 當庫存數量為1時，您現在可以從管理員成功將產品新增到購物車。 以前，應用程式不會將產品新增到購物車並顯示以下訊息： `The requested qty is not available`. _Serhii Petrychenko在提取請求中提交的修正 [26650](https://github.com/magento/magento2/pull/26650)._ [GitHub-25675](https://github.com/magento/magento2/issues/25675)

<!-- ENGCOM-7090-->

* 當商店管理員嘗試重新排序其自訂選項名稱超過最大字元數的產品時，應用程式現在會顯示資訊性錯誤訊息。 以前，在這些條件下，應用程式會顯示「報表」頁面，而不是訊息。 _Mudit Shukla在提取請求中提交的修正 [26348](https://github.com/magento/magento2/pull/26348)_. [GitHub-26345](https://github.com/magento/magento2/issues/26345)

<!-- ENGCOM-6328-->

* 「銷售訂單地址」資訊編輯表單的版面配置已重構，以符合管理員表單程式庫慣例。 _Alexey Rakitin在提取請求中提交的修正 [25699](https://github.com/magento/magento2/pull/25699)_. [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6007-->

* 「 」的「 」產品區段上的核取方塊 **目錄** > **類別** 頁面現在可如預期運作。  _Denis Kopylov在提取請求中提交的修正 [22990](https://github.com/magento/magento2/pull/22990)_. [GitHub-22988](https://github.com/magento/magento2/issues/22988)

<!-- ENGCOM-6809-->

* 此 `getCustomer` 方法現在會傳回customer物件，如中所定義 `phpdoc` 區塊。 之前，此方法會傳回 `NULL`、和 `phpdoc` 區塊未醒目提示此方法可傳回 `NULL`. _Fanis Strezos在提取請求中提交的修正 [26423](https://github.com/magento/magento2/pull/26423)_. [GitHub-25268](https://github.com/magento/magento2/issues/25268)

<!-- ENGCOM-6492-->

* 當商家停用  **管理員** > **儲存**  >  **設定**  >  **銷售**  >  **重新排序**  >  **允許訂購**.  _Eden Duong在提取要求中提交的修正 [26051](https://github.com/magento/magento2/pull/26051)_. [GitHub-25130](https://github.com/magento/magento2/issues/25130)

<!-- ENGCOM-6627-->

* `getPrice()` 在Admin中設定訂單的自訂價格時，方法現在會傳回浮點數或null值，而非字串。  _Andrii Chorniy在提取請求中提交的修正 [26313](https://github.com/magento/magento2/pull/26313)_. [GitHub-25968](https://github.com/magento/magento2/issues/25968)

<!-- ENGCOM-6786-->

* 此 **州碼和標題** 欄之 **管理員** > **商店**  >設定>  **訂單狀態** 現在會依預期顯示狀態而非狀態。  _Oleh Usik在提取請求中提交的修正 [26569](https://github.com/magento/magento2/pull/26569)_. [GitHub-17847](https://github.com/magento/magento2/issues/17847)

<!-- ENGCOM-6936-->

* PDF商業發票現在會在GB地區設定中建立時擷取正確的購買日期。 _Eden Duong在提取要求中提交的修正 [26701](https://github.com/magento/magento2/pull/26701)_. [GitHub-26675](https://github.com/magento/magento2/issues/26675)

### 銷售規則

<!-- MC-30155-->

* `quote_item.applied_rule_ids` 在停用購物車價格規則後，現在會如預期更新。 [GitHub-24526](https://github.com/magento/magento2/issues/24526)

<!-- MC-32229-->

* 當您嘗試建立或編輯購物車價格規則時，應用程式現在會依預期顯示類別樹狀結構。 先前，在建立或編輯規則時，在「條件」區段中選取類別，會導致JavaScript錯誤。

<!-- ENGCOM-6824-->

* 當可設定的產品首次新增到購物車時，應用程式現在會使用購物車價格規則正確計算購物車層級的固定折扣。 _Lachlan Turner在提取請求中提交的修正 [26623](https://github.com/magento/magento2/pull/26623)_. [GitHub-26622](https://github.com/magento/magento2/issues/26622)

### 搜尋 {#search-heading}

* Elasticsearch7.6.x現在是Adobe Commerce和Adobe Commerce的預設目錄搜尋引擎。 您必須同時安裝Elasticsearch7.6.x，才能安裝或升級至版本2.4.0。Elasticsearch版本2.x程式碼已移除。 Elasticsearch版本5.x和6.x已棄用，不再受支援。 另請參閱 [搜尋引擎必要條件](../../../installation/prerequisites/search-engine/overview.md).

<!-- MC-23753-->

* 應用程式現在會轉譯 **&lt;** 和 **>** storefront目錄搜尋字串中的符號正確。

<!-- MC-25010-->

* 產品在執行後現在會在類別中依預期顯示 `cron:run` 在部署中實作Elasticsearch。

<!-- MC-25254-->

* 應用程式不再需要完全搜尋重新索引，便可在店面搜尋新產品屬性。

<!-- MC-29545-->

* 當您依字母順序的產品名稱排序包含搭售產品的產品清單時，Elasticsearch現在會如預期運作。

<!-- MC-29951-->

* 當您篩選類別中的可設定產品時，篩選結果不再包含無庫存選項。

<!-- MC-30131-->

* 使用Elasticsearch從產品清單頁面中選取所有產品，現在會如預期般顯示搜尋結果中的所有產品。 以前，應用程式不顯示搜尋結果。

<!-- MC-30201-->

* 當您變更每頁檢視的搜尋結果數目時，Elasticsearch現在可以正確顯示類別頁面的結果。 先前，當您變更搜尋結果頁面上應顯示的搜尋結果數目時，應用程式會顯示空白頁面，並出現以下錯誤： `"0":"SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near'`

<!-- MC-32430-->

* 價格排序現在可以正確用於沒有庫存的可設定產品。

<!-- MC-25176-->

* 當客戶在多網站部署中使用店面快速搜尋時，應用程式不再擲回例外狀況。

<!-- ENGCOM-6842-->

* 當商家透過按一下頁尾上的搜尋字詞選項來開啟搜尋字詞頁面時，應用程式不再顯示警告 **行銷** > **SEO和搜尋** > **搜尋字詞**.  _由提取請求中的vishal-webkul提交的修正 [25246](https://github.com/magento/magento2/pull/25246)_. [GitHub-25245](https://github.com/magento/magento2/issues/25245)

<!-- ENGCOM-7289-->

* 在行動檢視中執行Safari時，當您按一下搜尋輸入方塊時，應用程式不再調整檢視區的大小。  _Pawe Tylek在提取請求中提交的修正 [27603](https://github.com/magento/magento2/pull/27603). [GitHub-27506](https://github.com/magento/magento2/issues/27506)_

<!-- ENGCOM-6364-->

* Elasticsearch版本現在由X.x標籤法來識別，而不是在管理員中識別(**商店** >設定> **設定** > **目錄** > **目錄** > **目錄搜尋**)。 _Andreas Mautz在提取請求中提交的修正 [25838](https://github.com/magento/magento2/pull/25838)_. [GitHub-25674](https://github.com/magento/magento2/issues/25674)

### 送貨

<!-- MC-32782-->

* 如果訂購的產品之一是虛擬產品，您現在可以將訂單寄送至多個地址。 之前，應用程式已成功下訂單購買實體產品，但虛擬產品訂單是空的。

<!-- MC-29276-->

* 此應用程式現在會針對運送至多個地址的訂單，正確套用固定金額的全購物車折扣。 以前，當客戶使用「多地址結帳」來結帳訂單時，會多次套用此類折扣。 [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- MC-29444-->

* 在建立購物車價格規則的過程中，可供選取送貨方法的下拉式清單現在僅包含有效值。 之前，此下拉式清單包含空白或額外的值。

<!-- MC-30186-->

* 應用程式現在會將送貨標籤列印為 `.pdf` 當您選取時，按預期儲存檔案 **列印送貨標籤** 從「動作」下拉式清單中，從訂單封存清單中的訂單。 以前，應用程式顯示404錯誤。

<!-- MC-31396-->

* 現在，當購物車包含「免運費價格」規則所包含類別中的產品以及未包含在此規則中的類別中的產品時，「免運費價格」規則只會影響相關產品。 先前，當購物車包含免運費類別以及價格規則中未包含的其他類別的產品時，則免運費不會套用至任何產品。

<!-- ENGCOM-6436-->

* 應用程式不再顯示空白頁面，而是在下拉式清單/多選方塊中顯示所有出貨承運商。 先前， `toOptionArray` 函式於 `vendor/magento/module-shipping/Model/Config/Source/Allmethods.php` 已發生。 _Marc Rodriguez在提取請求中提交的修正 [25315](https://github.com/magento/magento2/pull/25315)_. [GitHub-13136](https://github.com/magento/magento2/issues/13136)

* 當客戶建立將出貨至多個地址的訂單時，應用模組不再多次套用固定金額折扣。  _Mahesh Singh在提取請求中提交的修正 [26419](https://github.com/magento/magento2/pull/26419)_. [GitHub-25834](https://github.com/magento/magento2/issues/25834)

<!-- ENGCOM-6523-->

* 外掛程式 `Magento\Ups\Model\Carrier` 實作自訂的 `di.xml` 現在在開發人員模式下可正常運作。 之前，應用程式擲回此錯誤： `1 exception(s): Exception #0 (BadMethodCallException): Missing required argument $data of Magento\Ups\Model\Carrier`. _Bartomiej Szubert在提取請求中提交的修正 [26130](https://github.com/magento/magento2/pull/26130)_. [GitHub-25390](https://github.com/magento/magento2/issues/25390)

### Sitemap

<!-- MC-29362-->

* 現在，當您產生Sitemap時，應用程式會如預期使用專案基底URL。

<!-- ENGCOM-6670-->

* 產生的網站地圖現在包含首頁的URL。 _Deepaksnair在提取請求中提交的修正 [26445](https://github.com/magento/magento2/pull/26445)_. [GitHub-25761](https://github.com/magento/magento2/issues/25761)

### 分段

<!-- MC-32342-->

* 僅在多網站部署中，對一個網站的限制存取的管理員現在可以預覽該網站的排程更新。 先前，測試版預覽預設使用預設存放區，如果使用者無權存取預設存放區，應用程式會擲回例外狀況。

<!-- MC-32736-->

* 編輯現有排程不會再產生重複的排程。 先前，當您編輯現有的排程時，應用程式會複製該排程，而當您嘗試開啟複製的排程時，應用程式會擲回錯誤。

<!-- MC-32432-->

* 為一個或多個產品建立排程更新後，交叉銷售產品現在會如預期在「檢視」和「編輯購物車」頁面上顯示。

### 儲存

<!-- MC-25187-->

* 當客戶登入一家商店、新增產品至購物車，然後在多商店部署中切換至新商店時，客戶工作階段現在會如預期般持續存在。 先前，當客戶導覽至第二個商店時，應用程式會將客戶登出並清空購物車。

<!-- ENGCOM-4781-->

* 應用程式現在會從刪除的存放區檢視刪除相關記錄 `sale_sequence_meta` 和 `sales_sequence_profile` 表格如預期。 _Bartomiej Szubert在提取請求中提交的修正 [22296](https://github.com/magento/magento2/pull/22296)_. [GitHub-14958](https://github.com/magento/magento2/issues/14958)

<!-- ENGCOM-6869-->

* 現在，當在不同基底URL的存放區之間切換時，存放區切換器會如預期般運作。 先前，當客戶使用商店切換器切換商店時，如果目標商店的基礎URL與目前商店不同，請求會失敗。 _Tobias Nilsson在提取請求中提交的修正 [26548](https://github.com/magento/magento2/pull/26548)_. [GitHub-23755](https://github.com/magento/magento2/issues/23755)， [GitHub-26384](https://github.com/magento/magento2/issues/26384)

### 色票

<!-- MC-30294-->

* 商戶現在可以使用將色票屬性成功新增至產品 **視覺色票** 選項於 **商店** > **屬性** > **產品** > **新增屬性**. 先前，當您嘗試開啟新建立的色票屬性時，會觸發JavaScript錯誤。

<!-- ENGCOM-6750-->

* 當客戶為可設定產品選取新的色票選項時，最低廣告價格現在會如預期變更。 _Sergiy Vasiutynskyi在提取請求中提交的修正 [26241](https://github.com/magento/magento2/pull/26241)_. [GitHub-26240](https://github.com/magento/magento2/issues/26240)

<!-- ENGCOM-6685-->

* 當您選取新的色票選項時，應用程式不會再複製可設定產品的最低廣告價格。 _Sergiy Vasiutynskyi在提取請求中提交的修正 [26317](https://github.com/magento/magento2/pull/26317)_. [GitHub-26314](https://github.com/magento/magento2/issues/26314)

<!-- ENGCOM-6966-->

* 修正「新增產品屬性」頁面之「管理色票（您屬性的值）」區域中的下拉式功能表行為問題。  _Oleh Usik在提取請求中提交的修正 [26090](https://github.com/magento/magento2/pull/26090)_. [GitHub-25910](https://github.com/magento/magento2/issues/25910)

### 目標規則

<!-- MC-31546-->

* 店面中針對產品顯示的相關產品區塊現在會顯示符合「相關產品規則」中定義條件的產品。 之前，應用程式未顯示任何相關產品。

### 稅金

<!-- MC-29579-->

* 當客戶在結帳期間變更訂單的目的地國家/地區時，應用程式現在會依預期更新運費和價格。

<!-- MC-30546-->

* 現在會根據適用的購物車價格規則，依預期套用免運費。 以前，在計算訂單是否符合免運費條件時，購物車價格規則不會將稅金列入考量。

<!-- MC-32402-->

* 當您編輯並儲存「 」時，應用程式不再擲回錯誤 `NOT LOGGED IN` 客戶群組（安裝B2B時）。

### 測試

>[!NOTE]
>
>**MFTF現在會使用Google Authenticator來執行已啟用2FA的測試。 若沒有啟用Google Authenticator的其他設定步驟，MFTF將無法搭配2.4.0運作**. 另請參閱 [設定雙因素驗證(2FA)的MFTF](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html#magento-functional-testing-framework).

<!-- ENGCOM-6585-->

* 測試和動作群組中的硬式編碼URL已被頁面參照取代。 _Lukasz Bajsarowicz在私人存放庫合作夥伴magento2ee提取請求117中提交的修正_. [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-7273-->

* 測試現在包含記錄與CMS頁面相關的管理動作的任務。 _Lukasz Bajsarowicz在私人存放庫合作夥伴magento2ee提取請求172中提交的修正_. [GitHub-171](https://github.com/magento/magento2/issues/171)

<!-- ENGCOM-7040 7051-->

* 無效的功能測試名稱已修改為遵循最佳實務。 _Lukasz Bajsarowicz在提取請求中提交的修正 [27118](https://github.com/magento/magento2/pull/27118) 以及私人存放庫合作夥伴magento2ee的提取請求151。 [GitHub-27117](https://github.com/magento/magento2/issues/27117)_

<!-- ENGCOM-7026-->

* Adobe Commerce `cron` 現在用於在建立測試資料後重新索引，並在適用時 `cache:flush config` 取代 `cache:flush`. _Lukasz Bajsarowicz在提取請求中提交的修正 [26990](https://github.com/magento/magento2/pull/26990)_. [GitHub-26989](https://github.com/magento/magento2/issues/26989)

<!-- ENGCOM-7421-->

* 驗收測試現在遵循以下專案的命名慣例： `Magento/Indexer` 和 `Magento/Backup` 模組。  _Shankar Konar在提取請求中提交的修正 [27515](https://github.com/magento/magento2/pull/27515)_. [GitHub-27503](https://github.com/magento/magento2/issues/27503)

<!-- ENGCOM-6791 6825-->

* 此 `AdminReorderWithCatalogPrice` 測試已重構，且在CI驗證程式中不再失敗。 _Lukasz Bajsarowicz在私人存放庫合作夥伴magento2ee提取請求135中提交的修正_. [GitHub-26607](https://github.com/magento/magento2/issues/26607)

<!-- ENGCOM-6780 6795-->

* 此 `AdminAddingNewOptionsWithImagesAndPricesToConfigurableProduct` 和 `StorefrontApplyPromoCodeDuringCheckout` 測試已重構，且在CI驗證過程中不再失敗。 _Lukasz Bajsarowicz在提取請求中提交的修正 [26611](https://github.com/magento/magento2/pull/26611) 和提取請求 [26614](https://github.com/magento/magento2/pull/26614)_. [GitHub-26612](https://github.com/magento/magento2/issues/26612)， [GitHub-26610](https://github.com/magento/magento2/issues/26610)

<!-- ENGCOM-6621-->

* 此 `DeleteProduct and DeleteCustomer Action Groups` 測試已重構，且在CI驗證程式中不再失敗。 _Lukasz Bajsarowicz在提取請求中提交的修正 [26407](https://github.com/magento/magento2/pull/26407)_. [GitHub-26396](https://github.com/magento/magento2/issues/26396)

<!-- ENGCOM-6608-->

* 此 `AdminMoveAnchoredCategoryTest.xml` 測試已重構，且在CI驗證程式中不再失敗。 _Lukasz Bajsarowicz在提取請求中提交的修正 [26395](https://github.com/magento/magento2/pull/26395)_. [GitHub-26396](https://github.com/magento/magento2/issues/26396)

#### 整合測試

<!-- ENGCOM-7143-->

* 整合測試中的連續請求不再失敗。 以前，測試失敗，因為請求物件在排程之間共用。 此 `resetRequest` 方法現在會清空以下專案的狀態： `request`. _Lukasz Bajsarowicz在提取請求中提交的修正 [27300](https://github.com/magento/magento2/pull/27300)_. [GitHub-27299](https://github.com/magento/magento2/issues/27299)

<!-- ENGCOM-7262-->

* 新增其他整合測試，涵蓋 `Magento_Customer` 電子郵件功能。 _Lukasz Bajsarowicz在提取請求中提交的修正 [27606](https://github.com/magento/magento2/pull/27606)_. [GitHub-27607](https://github.com/magento/magento2/issues/27607)

#### PHP單元測試

<!-- ENGCOM-7435 7306-->

* PHP單元測試不再擲回此嚴重錯誤： `Fatal error: Class Mock_CartExtensionInterface_0ba80a0b contains 2 abstract methods and must therefore be declared abstract or implement the remaining methods (Magento\Quote\Api\Data\CartExtensionInterface::getAmazonOrderReferenceId, Magento\Quote\Api\Data\CartExtensionInterface::setAmazonOrderReferenceId) in /var/www/html/vendor/phpunit/phpunit-mock-objects/src/Generator.php(264) : eval()'d code on line 1`. _Lukasz Bajsarowicz在私人存放庫合作夥伴magento2ee和 [27701](https://github.com/magento/magento2/pull/27701)_. [GitHub-27638](https://github.com/magento/magento2/issues/27638)

<!-- ENGCOM-7271-->

* 測試 `Offline_Payments` 現在與PHPUnit 8相容。  _Cristiano Pacheco在提取請求中提交的修正 [27627](https://github.com/magento/magento2/pull/27627)_. [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-7243 7284 7291-->

* 的單元測試 `Framework`， `AdminAnalytics`， `AdminNotification`、和 `AMPQ` 已針對PHPUnit 8進行更新。 _Ihor Sviziev在提取請求中提交的修正 [27522](https://github.com/magento/magento2/pull/27522)， [27521](https://github.com/magento/magento2/pull/27521)， [27519](https://github.com/magento/magento2/pull/27519)， [27522](https://github.com/magento/magento2/pull/27522)_. [GitHub-27500](https://github.com/magento/magento2/issues/27500)

<!-- ENGCOM-6542-->

* 您現在可以執行 `\Magento\Downloadable\Test\Unit\Helper\DownloadTest` 單元測試，不需連線至網際網路。  _由aleromano89在提取請求中提交的修正 [26264](https://github.com/magento/magento2/pull/26264)_. [GitHub-23521](https://github.com/magento/magento2/issues/23521)

<!-- ENGCOM-6695-->

* 已新增的單元測試 `app/code/Magento/Fedex/Model/Source/Generic.php`. _Sathish Subramanian在提取請求中提交的修正 [26549](https://github.com/magento/magento2/pull/26549)_.

<!-- ENGCOM-7251 7283 7472-->

* `<magentoCron>` 已新增至多項測試，這會觸發部分重新索引。 此變更可解決在涵蓋的功能測試中造成誤判的問題 `Magento_Bundle`， `CatalogImportExport`， `CatalogInventory`， `CatalogRule`， `Backend`， `Braintree`、和 `Captcha`. _Lukasz Bajsarowicz在提取請求中提交的修正 [27322](https://github.com/magento/magento2/pull/27322)， [27323](https://github.com/magento/magento2/pull/27323)， [27321](https://github.com/magento/magento2/pull/27321)_. [GitHub-27320](https://github.com/magento/magento2/issues/27320)

<!-- ENGCOM-6844-->

* 所有不正確的用法 `<amOnPage>` 已更換為適當的 `<actionGroup>` 適用於測試的「管理員登出」。 _Lukasz Bajsarowicz在私人存放庫合作夥伴magento2ee提取請求116中提交的修正_. [GitHub-26331](https://github.com/magento/magento2/issues/26331)

<!-- ENGCOM-6352-->

* 測試中的每個「動作」群組已移至個別檔案，以遵循MFTF最佳實務，且已修訂不一致的檔案名稱。 下列模組的測試受到影響：

   * module-catalog-permissions
   * module-shared-catalog
   * module-catalog-event
   * module-banner
   * module-admin-gws
   * module-advanced-checkout
   * 模組送貨
   * module-ui
   * 模組送貨
   * module-checkout-address-search
   * module-sales
   * module-catalog
   * module-catalog-rule-staging
   * module-visual-merchandiser
   * 模組 — 客戶

   _Lukasz Bajsarowicz在提取請求中提交的修正 [25800](https://github.com/magento/magento2/pull/25800)， [26323](https://github.com/magento/magento2/pull/26323)， [26321](https://github.com/magento/magento2/pull/26321)， [26320](https://github.com/magento/magento2/pull/26320)， [26319](https://github.com/magento/magento2/pull/26319)， [26322](https://github.com/magento/magento2/pull/26322)， [25828](https://github.com/magento/magento2/pull/25828)， [26329](https://github.com/magento/magento2/pull/26329) （以及私人存放庫合作夥伴magento2ee中的提取請求104、105、106、107、108、109、111、119、120、121）_. [GitHub-22853](https://github.com/magento/magento2/issues/22853)

### 主題

<!-- MC-29804-->

* 我們已解決中的錯誤 `JsFooterPlugin.php` 這會影響動態區塊的顯示。 過去，應用程式會在您直接存取時顯示此錯誤 `/banner/ajax/load/url`： `Uncaught TypeError: strpos() expects parameter 1 to be string, null given in`.

<!-- ENGCOM-6708-->

* 此 `i18n` 方法提供新增字串以加底線範本的功能。  _Sergiy Vasiutynskyi在提取請求中提交的修正 [26435](https://github.com/magento/magento2/pull/26435)_. [GitHub-18012](https://github.com/magento/magento2/issues/18012)

<!-- ENGCOM-6666-->

* 此 `section-config` 模組已重構。 此重構減少了由第三方模組提出POST請求或在模組初始化之前直接請求客戶資料所導致的錯誤 `data-mage-init`. _Mateusz Krzeszowiak在提取請求中提交的修正 [25764](https://github.com/magento/magento2/pull/25764)_. [GitHub-17125](https://github.com/magento/magento2/issues/17125)

<!-- ENGCOM-6924-->

* `LoadCssAsync` 已修正HTML格式錯誤。 _Sathish Subramanian在提取請求中提交的修正 [26764](https://github.com/magento/magento2/pull/26764)_. [GitHub-26760](https://github.com/magento/magento2/issues/26760)

<!-- ENGCOM-7052-->

* 當您建立 `default.xml` 和 `catalog_product_view.xml` 檔案作為建立新主題的一部分，應用程式會建立這些頁面，或如預期在記錄檔案中記錄錯誤。 之前，應用程式會將錯誤記錄在 `vendor/magento/framework/View/Page/Config/Renderer.php` 檔案。 _Vinh Le在提取請求中提交的修正 [27026](https://github.com/magento/magento2/pull/27026)_. [GitHub-27009](https://github.com/magento/magento2/issues/27009)

### 翻譯與地區設定

<!-- MC-24186-->

* 現在內嵌翻譯在下列情況下可如預期在店面運作 **管理員** > **商店** > **設定** > **進階** > **開發人員** > **翻譯內嵌** > **已針對店面啟用** 已設定。

<!-- MC-31663-->

* 店面啟用內嵌翻譯後，現在可如預期運作。

<!-- ENGCOM-7064-->

* 產品URL索引鍵現在會如預期般音譯。 _DanieliMi在提取請求中提交的修正 [26506](https://github.com/magento/magento2/pull/26506)_. [GitHub-26499](https://github.com/magento/magento2/issues/26499)

<!-- ENGCOM-6899-->

* 此 `es_US Spanish (United States)` 現在支援地區設定。 _Vinh Le在提取請求中提交的修正 [26857](https://github.com/magento/magento2/pull/26857)_. [GitHub-26843](https://github.com/magento/magento2/issues/26843)

<!-- ENGCOM-6996-->

* 數值預留位置計數和JavaScript程式碼預留位置計數現在相同。 先前，JavaScript程式碼假設為0%，而數字預留位置計數則以%1開始。  _由korostii在提取請求中提交的修正 [25359](https://github.com/magento/magento2/pull/25359)_. [GitHub-25243](https://github.com/magento/magento2/issues/25243)

<!-- ENGCOM-6557-->

* 您現在可以停用產品詳細資料頁面標題的翻譯(`page.main.title`)，預設為啟用。 _Bartomiej Szubert在提取請求中提交的修正 [26269](https://github.com/magento/magento2/pull/26269)_. [GitHub-7065](https://github.com/magento/magento2/issues/7065)

<!-- ENGCOM-7465-->

* 發票PDF中阿拉伯文和希伯來文的轉譯問題已得到解決。 _Ihor Sviziev在提取請求中提交的修正 [27887](https://github.com/magento/magento2/pull/27887)_. [GitHub-25769](https://github.com/magento/magento2/issues/25769)

<!-- ENGCOM-6646-->

* 語言套件繼承順序現在會依預期和說明檔案中的說明，套用至第一次列出的首次使用基礎。  _Sergiy Vasiutynskyi在提取請求中提交的修正 [26420](https://github.com/magento/magento2/pull/26420)_. [GitHub-8691](https://github.com/magento/magento2/issues/8691)

<!-- ENGCOM-6443-->

* 現在，當您在僅支援拉丁字母的區域設定中，為資料夾名稱輸入非拉丁字元時，應用程式會顯示此錯誤訊息： `Please rename the folder using only Latin letters, numbers, underscores and dashes`. _Eden Duong在提取要求中提交的修正 [25904](https://github.com/magento/magento2/pull/25904). [GitHub-25896](https://github.com/magento/magento2/issues/25896)_

<!-- ENGCOM-6539-->

* 的長度 `locale` 欄用於 `directory_country_region_name` 已從8個增加到16個，以支援以下語言環境：  `zh_Hans_CN`. _Bartomiej Szubert在提取請求中提交的修正 [26268](https://github.com/magento/magento2/pull/26268)_. [GitHub-14001](https://github.com/magento/magento2/issues/14001)

### UI

<!-- MC-32547-->

* 您現在可以使用頁面產生器，將產品新增為按鈕連結(**編輯內容** > **按鈕連結**)。 先前，應用程式在您嘗試選取產品時擲回此錯誤： `Product with ID: XXXX doesn't exist`.

<!-- ENGCOM-7490-->

* 「上一步」按鈕現在會從以下專案正常運作： **管理員** > **商店** > **訂單狀態** > **編輯訂單狀態**. _Vadim Malesh在提取請求中提交的修正 [27976](https://github.com/magento/magento2/pull/27976)_. [GitHub-1270](https://github.com/magento/magento2/issues/1270)

<!-- ENGCOM-6692-->

* 當您使用方向鍵將游標移到 **檔案名稱** Adobe Stock欄位。 _Adarsh Manickam在提取請求中提交的修正 [25991](https://github.com/magento/magento2/pull/25991)_. [GitHub-847](https://github.com/magento/magento2/issues/847)

<!-- ENGCOM-6414-->

* 此 **您的密碼**  欄位（位於的「目前使用者身分驗證」區段） **管理員** > **系統** > **整合** 頁面現在會依預期繼承樣式。 _Eduard Chitoraga在提取請求中提交的修正 [25918](https://github.com/magento/magento2/pull/25918)_. [GitHub-25917](https://github.com/magento/magento2/issues/25917)

<!-- ENGCOM-6482-->

* 經店面JavaScript驗證器驗證的輸入內容也會通過管理員的驗證。 先前，JavaScript驗證器在店面將新行計為單一字元，但在伺服器端， `\Magento\Catalog\Model\Product\Option\Type\maxCharacters` 會將新行數計為兩個字元。 _Grzegorz Bogusz在提取請求中提交的修正 [26033](https://github.com/magento/magento2/pull/26033)_. [GitHub-25974](https://github.com/magento/magento2/issues/25974)

<!-- ENGCOM-6517-->

* 此 `subTitle` 當您使用變更強制回應視窗標題時，不再清除標籤 `setTitle()` 呼叫。 先前，當您嘗試建立具有標題和副標題的快顯視窗或自訂強制回應視窗時，然後使用變更標題 `setTitle()` 方法， `subTitle` 已擦除。 _Andrea Parmeggiani在提取請求中提交的修正 [26142](https://github.com/magento/magento2/pull/26142)_. [GitHub-26141](https://github.com/magento/magento2/issues/26141)

<!-- ENGCOM-6464-->

* 現在，「管理行銷」標籤中的子功能表會自動依預期調整功能表專案的長度。  您現在也可以水準捲動。  _Pawel Tylek在提取請求中提交的修正 [26034](https://github.com/magento/magento2/pull/26034)_. [GitHub-18687](https://github.com/magento/magento2/issues/18687)

<!-- ENGCOM-6519-->

* 表格 `quote`  欄 `customer_note` 現在使用型別 `text` 如預期。 之前，它使用型別 `varchar(255)`. _Ravi Chandra在提取請求中提交的修正 [26160](https://github.com/magento/magento2/pull/26160)_. [GitHub-26155](https://github.com/magento/magento2/issues/26155)

<!-- ENGCOM-7153-->

* 已修正「 」上表格標題的顯示問題 **我的帳戶**  > **通訊錄**  位址專案表格。  _由Abrar Pathan在提取請求中提交的修正 [27336](https://github.com/magento/magento2/pull/27336)_. [GitHub-27335](https://github.com/magento/magento2/issues/27335)

<!-- ENGCOM-5986-->

* 「階層式導覽價格步驟」中使用的貨幣符號，現在會以預期的預設設定為基礎。  _Bartomiej Szubert在提取請求中提交的修正 [24815](https://github.com/magento/magento2/pull/24815)_. [GitHub-21684](https://github.com/magento/magento2/issues/21684)

<!-- ENGCOM-6324-->

* 白俄羅斯貨幣(BYR)的符號已更新為BYN。 _Bartomiej Szubert在提取請求中提交的修正 [25723](https://github.com/magento/magento2/pull/25723)_. [GitHub-24713](https://github.com/magento/magento2/issues/24713)

<!-- ENGCOM-6622-->

* 解析度小於767px的顯示器上，「目錄」頁面的「比較產品」區段現在會如預期般顯示在行動檢視中。 _Hitesh在提取請求中提交的修正 [26418](https://github.com/magento/magento2/pull/26418)_. [GitHub-26416](https://github.com/magento/magento2/issues/26416)

<!-- ENGCOM-6376-->

* 產品頁面的捲動現在在行動檢視中可如預期運作。  _Mateusz Krzeszowiak在提取請求中提交的修正 [25385](https://github.com/magento/magento2/pull/25385)_. [GitHub-10518](https://github.com/magento/magento2/issues/10518)， [GitHub-21717](https://github.com/magento/magento2/issues/21717)

<!-- ENGCOM-6368-->

* 您現在可以如預期在行動檢視中，捲動瀏覽產品頁面上的相簿縮圖影像。 _Gerchak在提取請求中提交的修正 [25839](https://github.com/magento/magento2/pull/25839)_. [GitHub-21014](https://github.com/magento/magento2/issues/21014)

<!-- ENGCOM-6425-->

* 按一下上的主題標題 **管理員**  > **內容** > **主題** 不再產生重複記錄。 _Eden Duong在提取要求中提交的修正 [25926](https://github.com/magento/magento2/pull/25926)_. [GitHub-25925](https://github.com/magento/magento2/issues/25925)

<!-- ENGCOM-6328-->

* 「管理員帳單地址/送貨地址」頁面的版面配置已重構，以符合管理員表單顯示慣例。 _Alexey Rakitin在提取請求中提交的修正 [25699](https://github.com/magento/magento2/pull/25699)_. [GitHub-23481](https://github.com/magento/magento2/issues/23481)， [GitHub-19805](https://github.com/magento/magento2/issues/19805)

<!-- ENGCOM-6628 6593-->

* 產品詳細資料頁面上的「加入以比較」連結現在會在解析度低於640畫素的顯示器上，在行動檢視中正確轉譯。 _Pawe Tylek在提取請求中提交的修正 [26424](https://github.com/magento/magento2/pull/26424) 和Tejash Kumbhare在提取請求中 [26365](https://github.com/magento/magento2/pull/26365)_. [GitHub-26364](https://github.com/magento/magento2/issues/26364)

<!-- ENGCOM-6607-->

* 此 **排序方式** 標籤不再與 **購買者** 「行動檢視」中「類別」頁面上的按鈕。 _Andrii Kartavtsev在提取請求中提交的修正 [26381](https://github.com/magento/magento2/pull/26381)_. [GitHub-25300](https://github.com/magento/magento2/issues/25300)

<!-- ENGCOM-7137-->

* 您現在可以啟用「 」，更新可下載產品範例和連結標題的值  **使用預設值** 核取方塊。 _Abel Truong在提取請求中提交的修正 [27295](https://github.com/magento/magento2/pull/27295)_. [GitHub-27169](https://github.com/magento/magento2/issues/27169)

<!-- ENGCOM-6532-->

* 已修正的間距 **更新** 按鈕和 **數量** 欄位。  _Hitesh在提取請求中提交的修正 [26234](https://github.com/magento/magento2/pull/26234)_. [GitHub-26227](https://github.com/magento/magento2/issues/26227)

<!-- ENGCOM-7032-->

* 「通訊錄」頁面上「其他通訊專案」表格的底端邊框色彩現在相符 `thead` 和 `tbody` 邊框顏色。 _Tejash Kumbhare在提取請求中提交的修正 [26649](https://github.com/magento/magento2/pull/26649)_. [GitHub-26648](https://github.com/magento/magento2/issues/26648)

<!-- ENGCOM-7195-->

* 當使用者按一下強制回應覆蓋時，提示強制回應不再執行確認動作。 _Serhiy Zhovnir在提取請求中提交的修正 [27399](https://github.com/magento/magento2/pull/27399)_.

### URL

<!-- ENGCOM-7112-->

* 類別存放庫（儲存方法）已重構，先前在變更類別URL索引鍵時無法建立唯一路徑。 _Sergiy Vasiutynskyi在提取請求中提交的修正 [27304](https://github.com/magento/magento2/pull/27304)_. [GitHub-14080](https://github.com/magento/magento2/issues/14080)

<!-- ENGCOM-7208-->

* 類別URL索引鍵邏輯的驗證已得到改善。 _Sergiy Vasiutynskyi在提取請求中提交的修正 [27412](https://github.com/magento/magento2/pull/27412)_. [GitHub-13689](https://github.com/magento/magento2/issues/13689)

### URL重寫

<!-- MC-31147-->

* 在CMS頁面上變更語言的客戶現在可以成功導覽至他們已選取的商店檢視。 以前，應用程式顯示404錯誤。

<!-- ENGCOM-6997-->

* 針對您已啟用類別路徑包含的產品URL產生URL重新寫入，現在可如預期運作。 以前，在具有多個商店檢視的部署中，應用程式有時會使用類別URL路徑的預設值（而不是商店專用的URL路徑）來產生錯誤的URL重寫。 _Pieter Hoste在提取請求中提交的修正 [26784](https://github.com/magento/magento2/pull/26784)_. [GitHub-25124](https://github.com/magento/magento2/issues/25124)， [GitHub-11616](https://github.com/magento/magento2/issues/11616)

<!-- ENGCOM-6995-->

* 我們已新增檢查，以防止在請求路徑與目標路徑相同時進行URL重新導向。 _Bartomiej Szubert在提取請求中提交的修正 [26902](https://github.com/magento/magento2/pull/26902)_. [GitHub-20309](https://github.com/magento/magento2/issues/20309)

<!-- ENGCOM-6303-->

* 當URL有結尾斜線時，URL重寫作業不再從URL中移除查詢字串。  _Alexey Arendarenko在提取請求中提交的修正 [25603](https://github.com/magento/magento2/pull/25603)_. [GitHub-18717](https://github.com/magento/magento2/issues/18717)

### VAT

<!-- ENGCOM-7458-->

* 更正以下專案的VAT驗證URL： [歐盟Vat編號](https://ec.europa.eu/taxation_customs/vies/checkVatService.wsdl).  _Shikha Mishra在提取請求中提交的修正 [27886](https://github.com/magento/magento2/pull/27886)_. [GitHub-27874](https://github.com/magento/magento2/issues/27874)

### Visual Merchandiser

<!-- MC-31136-->

* 現在，當您拖放產品至新位置時，編輯類別頁面的行為會與預期相同。 之前，將產品拖放至任何類別頁面上，都會將檢視視窗重新放置至頁面頂端。

### Web API框架

<!-- MC-29891-->

* 已更正POST的問題 `/rest/default/async/bulk/V1/orders` 呼叫。

<!-- MC-30675-->

* 已更正POST的問題 `/rest/default/async/bulk/V1/products` 呼叫。

<!-- ENGCOM-6945-->

* 此 `getList` 方法已重構以擷取 `is_subscribed` 擴充功能屬性。 之前，您無法在透過API擷取客戶實體時擷取此屬性。 _由enriquei4在提取請求中提交的修正 [25311](https://github.com/magento/magento2/pull/25311)_. [GitHub-13252](https://github.com/magento/magento2/issues/13252)

<!-- ENGCOM-6500-->

* 透過更新客戶資訊 `/V1/customers/:id` 不再重設 `group_id` 不必要的。 先前，當您透過REST更新客戶時，如果本文不包含客戶群組，客戶群組會變更為1。 _MaxRomanov4669在提取請求中提交的修正 [25958](https://github.com/magento/magento2/pull/25958)_. [GitHub-14663](https://github.com/magento/magento2/issues/14663)

<!-- ENGCOM-6920-->

* 服務合約中可為Null的Getter在Web API中使用時不再擲回反射錯誤。 可傳回null和有效型別的方法現在也可正常運作，無論順序為何。  _Marco k̦ Pcke在提取請求中提交的修正 [25806](https://github.com/magento/magento2/pull/25806)_. [GitHub-25656](https://github.com/magento/magento2/issues/25656)

<!-- ENGCOM-7075-->

* 您現在可以使用POST `/V1/guest-carts/:cartId/items` 以將產品新增至特定購物車。 先前，當您使用此呼叫時，應用程式會忽略 `cartId`. _Vadim Malesh在提取請求中提交的修正 [27172](https://github.com/magento/magento2/pull/27172)_. [GitHub-14086](https://github.com/magento/magento2/issues/14086)

<!-- ENGCOM-7102-->

* 您現在可以使用 `PUT /V1/cmsPage/:id` 端點儲存CMS頁面標題，而不變更其他欄位的值。 _Vadim Malesh在提取請求中提交的修正 [27237](https://github.com/magento/magento2/pull/27237)_. [GitHub-24704](https://github.com/magento/magento2/issues/24704)

<!-- ENGCOM-7011-->

* REST要求的結果分頁現在準確。 先前，當您從特定頁面要求結果時(例如 `page_size` = 1和a `current_page` （值超出範圍），則呼叫傳回會重複結果的最後一頁，而非資訊訊息。  _Lukasz Bajsarowicz在提取請求中提交的修正 [26988](https://github.com/magento/magento2/pull/26988)_. [GitHub-26986](https://github.com/magento/magento2/issues/26986)， [GitHub-8099](https://github.com/magento/magento2/issues/8099)

<!-- ENGCOM-6540-->

* GET的結果 `/V1/orders/items/{id}` 現在包含擴充功能屬性元素，其中包含贈品訊息資料。 _Laura Folco在提取請求中提交的修正 [25946](https://github.com/magento/magento2/pull/25946)_. [GitHub-19093](https://github.com/magento/magento2/issues/19093)

### 願望清單

<!-- MC-29988-->

* 願望清單現在會在商店檢視層級啟用並在全域層級停用時，按預期運作。 先前，設定完成時，將產品新增至願望清單會產生404錯誤。

<!-- MC-30196-->

* 當您在包含多個願望清單的部署中重新命名願望清單時，應用程式現在可以正確儲存和顯示願望清單的新名稱。 之前，應用程式會繼續顯示前一個願望清單名稱。

<!-- MC-31948-->

* 您現在可以從執行Internet Explorer 11.x的部署中的購物車瀏覽及修改願望清單。之前，您無法在此環境中建立、編輯或移動願望清單。

<!-- ENGCOM-6518-->

* 我們已改善當客戶嘗試與超過允許的電子郵件地址共用其願望清單時顯示的錯誤訊息。  _Divyajyothi5321在提取請求中提交的修正 [26066](https://github.com/magento/magento2/pull/26066)_. [GitHub-26064](https://github.com/magento/magento2/issues/26064)

<!-- ENGCOM-6723-->

* 應用程式現在會以大於768px且小於1023px的解析度顯示「我的願望清單」頁面（如預期）。 _Hitesh在提取請求中提交的修正 [26546](https://github.com/magento/magento2/pull/26546)_. [GitHub-26543](https://github.com/magento/magento2/issues/26543)

<!-- ENGCOM-7062-->

* 按一下時產生的電子郵件 **共用願望清單** 現在會顯示與願望清單頁面相同的產品影像。 _Michael Bottens在提取請求中提交的修正 [27125](https://github.com/magento/magento2/pull/27125). [GitHub-27124](https://github.com/magento/magento2/issues/27124)_

<!-- ENGCOM-6602-->

* 客戶現在可以將屬於分組產品的簡單產品以及具有不同數量的相同簡單產品新增到願望清單中。  _MaxRomanov4669在提取請求中提交的修正 [26258](https://github.com/magento/magento2/pull/26258)_. [GitHub-11209](https://github.com/magento/magento2/issues/11209)

### 所見即所得

<!-- ENGCOM-6275-->

* WYSIWYG影像上傳程式現在使用 `pub/media/wysiwyg` 作為儲存根目錄。 之前，上傳使用的是 `pub/media` 作為其儲存根，這使得最近對影像上傳程式程式碼進行變更後，無法存取這些上傳的影像。 _Pieter Hoste在提取請求中提交的修正 [24878](https://github.com/magento/magento2/pull/24878)_. [GitHub-22609](https://github.com/magento/magento2/issues/22609)

<!-- ENGCOM-7045-->

* Chrome瀏覽器上的TinyMCE4現在可如預期處理雙位元組字元。 之前，TinyMCE4無法在Chrome上正確處理雙位元組字元（例如用於中文）。 _西博和在提取請求中提交的修正 [25454](https://github.com/magento/magento2/pull/25454)_. [GitHub-24637](https://github.com/magento/magento2/issues/24637)

## 已知問題 — 一般

**問題**：安裝PHP 7.4.2的部署中出現店面錯誤訊息異常。 使用PHP 7.4.2部署2.4.0時，店面錯誤訊息中的空格符號會替換為加號(+)字元。 此錯誤是PHP 7.4.2的原生錯誤，Adobe Commerce無法修正。 **因應措施**：我們建議使用其他版本的PHP 7.4.x。另請參閱 [店面顯示原始訊息資料](https://support.magento.com/hc/en-us/articles/360045804332)  知識庫文章。 <!-- MC-34170-->

**問題**：商家無法從「管理員建立套件」頁面將訂購的產品新增至套件並儲存套件。 另請參閱 [建立出貨標籤](https://support.magento.com/hc/en-us/articles/360046750171) 知識庫文章。 此 **MC-35514-2.4.0-CE-composer.patch** 此問題的Hotfix現已開放瀏覽： [發行版本](https://magento.com/tech-resources/download). <!-- MC-35514-->

**問題**：應用程式在安裝期間顯示此錯誤訊息，其中包含對的API具有相依性的第三方擴充功能 `Store` CLI命令中的模組： `The default website isn't defined. Set the website and try again`. **因應措施**：從Composer移除對協力廠商擴充功能的相依性、安裝Magento，然後安裝協力廠商擴充功能。

**問題**：此 **新增選取專案至我的購物車** 購物車底部的按鈕無法運作。 **因應措施**：使用 **新增選取專案至我的購物車** 按鈕來切換頁面。 另請參閱 [將選取專案新增至我的購物車按鈕無法運作](https://support.magento.com/hc/en-us/articles/360045838312) 知識庫文章。 <!-- MC-35313-->

**問題**：為退貨授權(RMA)建立運送標籤後，商家無法與「退貨」頁面上的任何頁面元素互動。 另請參閱 [傳回「編輯」頁面在建立出貨標籤時停止運作](https://support.magento.com/hc/en-us/articles/360046441312) 知識庫文章。 此 **MC-35984-2.4.0-composer.patch** 此問題的Hotfix現已開放瀏覽： [發行版本](https://magento.com/tech-resources/download). <!-- MC-35984-->

**問題**：管理員無法透過SKU將可設定產品新增至報價。 當管理員按一下 **新增至報價** 按鈕時，「報價編輯」頁面仍處於載入狀態，且管理員無法儲存其變更。 **因應措施**：B2B Quote編輯沒有因應措施。  不過，您仍然可以從產品清單中選取產品來訂購產品，而不是透過SKU新增產品。 另請參閱 [B2B管理員無法將可設定的產品新增至報價](https://support.magento.com/hc/en-us/articles/360046801971) 知識庫文章。 <!-- MC-35513-->

**問題**：商家無法從管理員建立新訂單，因為 **依SKU新增產品** 和 **新增產品**  啟用JavaScript套件組合時，訂單建立頁面中缺少按鈕。  **因應措施**：停用部署的JavaScript套件組合。 <!-- MC-36044-->

**問題**：應用程式 `404 not found` 當客戶檢查出已運送至多個地址的訂單時，嘗試移除獎勵點時發生錯誤。 <!-- MC-35955-->

**問題**：編輯客戶願望清單中的可設定產品時，會產生下列非預期的行為： 「設定產品」頁面上會出現非預期的欄位，且「設定產品」頁面在您按一下後並未消失 **確定**. 應用程式也會顯示此訊息： `Please load Wish List item`. **因應措施**：重新載入「設定產品」頁面。 <!-- MC-35617-->

**問題**：當「訂單」清單跨越多個頁面時，客戶無法變更每頁顯示的訂單數。 目前，當您瀏覽至訂單的最後一頁，並嘗試變更每頁顯示的訂單數時，應用程式會顯示此訊息： `You have placed no orders`. 另請參閱 [訂單顯示錯誤](https://support.magento.com/hc/en-us/articles/360046802271) 知識庫文章。  **因應措施**：重新開啟「我的訂單」頁面會顯示「訂單」清單。 <!-- MC-34153-->

**問題**：直接按一下 **匯出稅率** 「新增稅捐規則」頁面的按鈕( **商店** > **稅捐規則**)不會下載 `tax_rates.csv` 檔案（如預期）。 **因應措施**：按一下的邊緣  **匯出稅率** 按鈕。  另請參閱 [匯出稅率無法運作](https://support.magento.com/hc/en-us/articles/360045850032)  知識庫文章。 <!-- MC-35345-->

**問題**：此 **重新整理** 「管理客戶活動」頁面的「上次訂購的專案」、「比較清單中的產品」和「最近比較的產品」區段上的按鈕無法如預期運作。 目前，應用程式會在每次 **重新整理** 已按一下按鈕，但未顯示產品名稱。 另請參閱 [重新整理客戶活動無法運作](https://magento.zendesk.com/hc/en-us/articles/360046091332) 知識庫文章。 <!-- MC-35296-->

### B2B

**問題**：如果折扣代碼在採購單(PO)核准之前過期，則PO會繼續顯示折扣金額，但是一旦核准了PO，訂單就會以未折扣總計下單。 **因應措施**：安裝 **B2B-709採購單折扣修補程式** 此問題的Hotfix，現在可從 **我的帳戶** > **下載** 部分 `magento.com`.

**問題**：應用程式在多網站部署中升級至B2B 1.2.0時發生例外狀況。 時間 `setup:upgrade` 執行，此錯誤發生於 `PurchaseOrder` 模組： `Module Magento_PurchaseOrder: Unable to apply data patch Magento\PurchaseOrder\Setup\Patch\Data\InitPurchaseOrderSalesSequence for moduleMagento_PurchaseOrder`. **因應措施**：安裝 **B2B-716將NonTransactionableInterface介面新增至InitPurchaseOrderSalesSequence資料修補程式** Hotfix，現在可從 **我的帳戶** > **下載** 部分 `magento.com`.

## 已知問題 — VBE

### Amazon Pay

* **問題**：客戶點按時，結帳工作流程中缺少付款方法 **返回標準結帳** 使用Amazon Pay結帳期間。  **因應措施**：重新整理結帳頁面以顯示缺少的方法。  <!-- BUNDLE-2661-->

* **問題**：應用程式會在建立新購物車價格規則時，所提供的「付款方式」下拉式清單中，顯示兩個相同的Amazon付款方式。  <!-- BUNDLE-2685-->

### Braintree

* **問題**：當管理員嘗試存取「Braintree結算報告」頁面時，應用程式會顯示錯誤(**管理員** > **報表** )。 目前，應用程式會顯示此訊息： `An error has happened during application run. See exception log for details`. 另請參閱 [無法載入Braintree結算報表](https://support.magento.com/hc/en-us/articles/360046798251) 知識庫文章。 此 **BUNDLE-2683_SettlementReport.patch** 此問題的Hotfix現已開放瀏覽： [發行版本](https://magento.com/tech-resources/download). <!-- BUNDLE-2683-->

* **問題**：商戶無法在已啟用Venmo且 **啟用卡片付款的儲存庫** 設定已停用。 目前，應用程式會顯示此錯誤： `The "vault_capture" command doesn't exist. Verify the command and try again`.  <!-- BUNDLE-2647-->

* **問題**：應用程式會在建立新購物車價格規則時，所提供的「付款方式」下拉式清單中，顯示兩個相同的PayPal方法。   <!-- BUNDLE-2686-->

* **問題**：應用程式開啟時發生錯誤 **銷售** > **Braintree虛擬終端機**. 雖然表單包含損毀的UI元素，但仍接受付款。 **因應措施**：儲存正確的Braintree認證，這會修正摺疊的輸入欄位。 另請參閱 [「Braintree虛擬終端機」頁面已損毀](https://support.magento.com/hc/en-us/articles/360046800071)  知識庫文章。 此 **BUNDLE-2670_VirtualTerminal.patch** 此問題的Hotfix現已開放瀏覽： [發行版本](https://magento.com/tech-resources/download). <!-- BUNDLE-2670-->

* **問題**：當客戶在結帳期間選擇當地付款方式時，應用程式會在以下國家/地區顯示錯誤訊息：比利時、荷蘭、義大利、西班牙和波蘭。  **因應措施**：忽略錯誤訊息並繼續付款。

### dotdigital

* **問題**：整合測試失敗並出現此錯誤： `PHP Fatal error: Declaration of Dotdigitalgroup\Email\Test\Integration\Model\Sync\Importer\ImporterFailedTest::setUp() must be compatible with PHPUnit\Framework\TestCase::setUp(): void in /var/www/vendor/dotmailer/dotmailer-magento2-extension/Test/Integration/Model/Sync/Importer/ImporterFailedTest.php on line 36`. **因應措施**：此 **BUNDLE-2684 Dotdigital整合測試修補程式** 此問題的Hotfix現已開放瀏覽： [發行版本](https://magento.com/tech-resources/download). <!-- BUNDLE-2684-->

### 克拉納

* **問題**：離開 **設計主題** Klarna On-Site Messaging (**管理員**  >  **商店**  >  **設定**  > **韓文設定**)會產生空白頁面。  **因應措施**：選取設計主題並儲存。  <!-- BUNDLE-2623-->

### 頂點

* **問題**：應用程式顯示  **地址驗證** 按鈕時，即使地址驗證已停用。 地址驗證器不會重新檢查更新的地址，並繼續顯示一則訊息，指出當客戶在第一次輸入錯誤地址後輸入正確的地址時，地址無效，即使地址驗證已啟用。 **因應措施**：停用頂點位址驗證。 <!-- BUNDLE-2604-->

## 社群貢獻

我們感謝更廣泛的Magento Open Source社群，並感謝他們為此版本所做的貢獻。 請透過下列方法瞭解我們目前版本的社群貢獻內容：

* 如果社群成員已提供此版本的修正，我們會在這些附註的已修正問題區段中使用以下詞語來識別修正：「*社群成員提供的修正*「。

* 社群工程團隊 [Magento貢獻者](https://magento.com/magento-contributors) 維護按月、季和年排列的優秀貢獻個人和合作夥伴清單。 在「貢獻者」頁面中，您可以透過連結前往GitHub上合併的PR。

### 合作夥伴協助撰寫

下表重點說明合作夥伴所做的貢獻。 此表格列出提出提取請求的合作夥伴、外部提取請求，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-0-partner.md}}

### 個人貢獻者

下表列出我們社群成員的貢獻。 此表格列出外部提取請求、與其相關聯的GitHub問題編號（如果有的話），以及提出提取請求的社群成員。

{{$include /help/_includes/release-notes/engcomm-2-4-0-issues.md}}

### 系統需求

我們的技術棧疊是以PHP和MySQL為基礎所建置。 如需詳細資訊，請參閱 [系統需求](../../../installation/system-requirements.md).

### 安裝和升級指示

您可以使用Composer安裝Adobe Commerce 2.4.0。

## 移轉工具套件

資料移轉工具可協助將現有Magento1.x存放區資料傳輸至Magento2.x。此命令列介麵包含驗證、進度追蹤、記錄和測試功能。 如需安裝指示，請參閱 [安裝資料移轉工具](https://experienceleague.adobe.com/docs/commerce-operations/tools/data-migration/basics/install.html). 考慮探索或貢獻 [資料移轉存放庫](https://github.com/magento/data-migration-tool).

此 [程式碼移轉工具組](https://github.com/magento/code-migration) 協助將現有Magento1.x存放區擴充功能和自訂內容轉移至Magento2.x。命令列介麵包含轉換Magento1.x模組和版面的指令碼。
