---
title: Magento Open Source 2.4.3發行說明
description: 瞭解2.4.3Magento Open Source版本中的新功能、增強功能、錯誤修正和已知問題。
recommendations: noCatalog
exl-id: fba0e147-1aa2-4c41-bc7d-51dd6755e014
source-git-commit: 4bcc68890e16e51f0a84ed3d0d47b1f3dbbd52f0
workflow-type: tm+mt
source-wordcount: '12744'
ht-degree: 0%

---

# Magento Open Source 2.4.3發行說明

Magento Open Source2.4.3引進了效能與安全性的增強功能，以及重大的平台改良。 安全性增強功能包括擴充reCAPTCHA涵蓋範圍及納入內建速率限制。 核心撰寫器相依性和協力廠商程式庫已升級至與PHP 8.x相容的最新版本。Page Builder現在可作為Magento Open Source中的套件擴充功能使用。 現在是Adobe Commerce和Magento Open Source的預設內容編輯工具。

此版本包含370多項核心程式碼的新修正及33項安全性增強功能。 其中包括由我們的社群成員解決近290個GitHub問題。 這些社群貢獻的內容包括核心程式碼的少量清理，以及GraphQL中的重大增強功能。

此版本包含370多項核心程式碼的新修正及33項安全性增強功能。 Magento Open Source 2.4.2發行說明中確認的所有已知問題已在本版本中修正。

{{bics}}

另請參閱 [Adobe Commerce 2.4.2-p2發行說明](../security/2-4-2-p2.md) 以取得Adobe Commerce 2.4.2-p2的相關資訊。

## 其他發行資訊

雖然這些功能的程式碼隨季度發行捆綁，但其中幾個專案(例如Progressive Web Application (PWA) Studio)也獨立發行。 這些專案的錯誤修正記錄在每個專案檔案中提供的個別專案特定發行資訊中。

## 套用 `AC-3022.patch` 繼續提供DHL作為運送業者

DHL已匯入schema 6.2版，並將在不久的未來淘汰schema 6.0版。 支援DHL整合的Adobe Commerce 2.4.4及舊版僅支援6.0版。部署這些版本的商戶應適用 `AC-3022.patch` 儘早繼續提供DHL作為貨運業者。 請參閱 [套用修補程式以繼續提供DHL作為運送承運商](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 知識庫文章，瞭解如何下載及安裝修補程式。

## 套用MC-43048__set_rate_limits__2.4.3.patch以解決API速率限制問題

此Hotfix針對Web API無法處理陣列中包含超過20個專案的請求問題提供解決方案。 此問題會影響執行Magento Open Source2.4.3、Adobe Commerce 2.4.3或2.3.7-p1的部署。 在這些版本中新增內建速率限制，以防止拒絕服務(DoS)攻擊，且預設上限設為20。 此修補程式將預設限制回覆為較高的值。 如果您懷疑您的存放區遭受DoS攻擊，Adobe建議將預設輸入限制降低至較低的值，以限制可要求的資源數目。 請參閱 [Web API無法處理陣列中超過20個專案的請求](https://support.magento.com/hc/en-us/articles/4406893342093) 知識庫文章。

## 套用AC-384__Fix_Incompatible_PHP_Method__2.4.3_ce.patch以解決升級時發生的PHP嚴重錯誤

升級至Magento Open Source2.4.3期間可能會發生下列嚴重錯誤：

```terminal
PHP Fatal error: Uncaught Error: Call to undefined function Magento\Framework\Filesystem\Directory\str_contains() in [...]/magento/vendor/magento/framework/Filesystem/Directory/DenyListPathValidator.php:74
```

此錯誤是因為使用 `str_contains` 函式，它是一個PHP 8.x函式。 應用程式開放原始碼2.4.3不支援PHP 8.x。此Hotfix會以支援的PHP 7.x函式取代此函式。 請參閱 [Adobe Commerce升級2.4.3、2.3.7-p1 PHP嚴重錯誤Hotfix](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) 知識庫文章。

## 反白顯示

請檢視此版本中的下列重點專案。

### 大幅增強安全性

此版本包含33項安全性修正和平台安全性改善。 其中許多安全性修正已反向移植至2.4.2-p2和2.3.7-p1。

#### 協助關閉遠端程式碼執行(RCE)和跨網站指令碼(XSS)弱點的33項安全性增強功能

目前尚未發生與這些問題相關的已確認攻擊。 但是，某些漏洞可能會被用來存取客戶資訊或接管管理員工作階段。 這些問題大多需要攻擊者先取得Admin的存取權。 因此，我們提醒您採取一切必要步驟來保護您的管理員，包括但不限於以下工作：IP允許清單、 [雙因素驗證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)，使用VPN，使用唯一位置而非 `/admin`和良好的密碼衛生。 另請參閱 [Adobe安全性公告](https://helpx.adobe.com/security/products/magento/apsb21-64.html) 以討論這些已修正的問題。

#### 其他安全性增強功能

此版本的安全性改善專案可改善對最新安全性最佳實務的合規性，包括：

* A **新撰寫器外掛程式** 有助於防止相依性混淆，並識別與公用套件存放庫上的內部套件具有相同名稱的惡意套件。 請參閱 [Adobe發行2.4.3版本的新撰寫器外掛程式](https://magento.com/blog/best-practices/adobe-releases-new-composer-plugin-magento-243-release) 部落格貼文。

* **API現已內建速率限制** 以防止阻斷服務(DoS)攻擊。 Web API現在會限制使用者端可請求的資源大小或數量（預設上限設為20，並可根據業務需求設定為不同的值）。 另請參閱 [速率限制](https://developer.adobe.com/commerce/webapi/get-started/api-security/) 以取得有關設定這些限制的資訊。 <!-- MC-35358-->

* **ReCAPTCHA涵蓋範圍已延伸** 若要包含：

   * 擁有對應HTML頁面的網頁API會透過ReCAPTCHA涵蓋。 （這不包括透過整合存取的網頁API。） ReCAPTCHA涵蓋範圍可保護端點不受垃圾郵件攻擊。 使用OAuth的協力廠商整合服務存取Web API時，ReCAPTCHA會停用。<!-- MC-34472-->

   * 下單店面頁面和付款相關網頁API。 預設會停用這些頁面的ReCAPTCHA保護，並可從管理員啟用。 此涵蓋範圍新增了反暴力機制，可保護存放區免受梳理攻擊。

{{cve-notice}}

### 基礎架構改良

此版本包含可改善框架品質的增強功能，以及下列功能區域：

* 客戶帳戶

* 目錄

* CMS

* OMS

* 匯入/匯出

* 促銷活動和目標定位

* 購物車與結帳

* B2B

* 測試和預覽

**現在支援PayPal Pay Later** 在包含PayPal的部署中。 此功能可讓購物者以雙週分期付款的方式支付訂單，而不需在購買時支付全額。 <!-- MC-40556-->

**新增 `use_application_lock` 索引模式**. 此 `use_application_lock` 模式可讓您透過使用環境變數或透過設定 `app/etc/env.php` 檔案。 啟用此模式後，您就不需要在失敗後手動重設索引器。  另請參閱 [使用應用程式鎖定模式重新索引處理序](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### 平台增強功能

2.4.3版尚未與PHP 8.x相容，但後續的平台升級使我們更接近未來與PHP 8.x的相容性。

* 核心撰寫器相依性和協力廠商程式庫已升級至與PHP 8.x相容的最新版本。 <!-- MC-39514-->

* KnokoutJS資料庫已升級至v3.5.1 （最新版本）。 <!-- MC-40694-->

* 已遭取代的TinyMCE v3程式庫已移除。 此 `Magento_Tinymce3Banner` 與TinyMCE v3.x相關的模組和MFTF測試已從Adobe Commerce中移除。 <!-- MC-42199 42170 -->

* Magento Open Source2.4.3已經過測試，並已確認與Redis 6.0.12相容。 （版本2.4.x仍與Redis 5.x相容。）

* Laminas程式庫相依性已升級為PHP 8.x相容版本。 已從移除部分多餘的相依性 `composer.json` 檔案。 **Magento Open Source2.4.3使用Laminas 3.4.0**. <!-- MC-39513-->

### 效能增強功能

此版本包含增強功能，可縮短產品價格和目錄規則索引器的索引時間。 商戶現在可以從客戶群組或共用目錄中排除網站，這減少了索引的記錄數量，並縮短了索引時間。

### Adobe Stock整合

此版本包含Adobe Stock整合v2.1.1。

### GraphQL

此版本新增共用路由的GraphQL涵蓋範圍。 此 [路由查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/route.html) 和 [可路由介面](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/routable-interface.html) 支援產品、類別和CMS頁面上的路由請求。 此 `urlResolver` 已棄用查詢，其功能已由 `route` 查詢。

請參閱 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 這些增強功能的詳細資訊。

### 頁面產生器

Page Builder現在可作為Magento Open Source中的套件擴充功能使用。 它現在是Adobe Commerce 2.4.3和Magento Open Source 2.4.3的預設內容編輯工具。它可以用任何第三方模組取代WYSIWG編輯器。

「頁面產生器」會在下列「管理」區域中取代TinyMCE編輯器：

* CMS頁面
* CMS區塊
* 類別說明
* 產品說明

在TinyMCE中建立的所有內容已移轉至「頁面產生器」做為HTML。

### PWA Studio

如需有關增強功能和錯誤修正的資訊，請參閱 [PWA Studio版本](https://github.com/magento/pwa-studio/releases). 另請參閱 [相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 以取得PWA Studio版本及其相容版本的清單。

### 升級相容性工具

範圍 [升級相容性工具](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html) 已根據社群的意見進行擴充。 加入我們的 [#upgrade-compatibility-tool](https://magentocommeng.slack.com/archives/C019Y143U9F) Slack管道，可取得Adobe產品團隊和社群的支援，並有助於指引工具的未來方向。

### 廠商開發的擴充功能

請參閱下列文章，瞭解此版本功能和變更的更新：

* [Amazon Pay](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [dotdigital Engagement Cloud](../../../upgrade/modules/upgrade.md)

* [卡拉納](https://marketplace.magento.com/klarna-m2-klarna.html)

* [頂點雲](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Yotpo產品評論](../../../upgrade/modules/upgrade.md)

## 已修正的問題

我們已修正2.4.3核心程式碼中的數百個問題。

### 安裝、升級、部署

<!-- MC-41154-->

* 此 `bin/magento setup:db:status` 命令現在會傳回訊息，指出在成功升級後一切都是最新狀態。 之前，應用程式會顯示此錯誤： `Declarative Schema is not up to date`.

<!-- MC-40031 -->

* 現在，當建立新的可設定產品失敗時，會在表單重新載入時保留設定值。 以前，重新載入表單時會遺失值，且應用程式會顯示此錯誤： `The value specified in the URL Key field would generate a URL that already exists`. [GitHub-32102](https://github.com/magento/magento2/issues/32102)

<!-- MC-37596-->

* 當您執行時，應用程式不會再擲回例外狀況 `bin/magento setup:upgrade` 從使用Redis的Magento Open Source部署升級至Adobe Commerce。

<!-- ENGCOM-8508 -->

* 在Galera叢集上執行的部署現在可支援更多客戶。 [GitHub-31038](https://github.com/magento/magento2/issues/31038)

<!-- ENGCOM-9036 MC-41938 -->

* 現在，當應用程式已使用「 」安裝時，管理員可以成功登入部署。 `—use-rewrites=0` 選項或 `web/seo/use_rewrites` 在中設為0 `core_config_data_table`. [GitHub-32100](https://github.com/magento/magento2/issues/32100)

<!-- ENGCOM-8451 -->

* 已更新 `sortOrder` 載入 `AsyncCssPlugin`. 應用程式現在載入 `AsyncCssPlugin` 早於 `JsFooterPlugin`. [GitHub-30882](https://github.com/magento/magento2/issues/30882)

<!-- ENGCOM-8701 -->

* `Magento\Config\Model\Config\PathValidator` 現在會檢查顯示路徑以判斷元素是否存在，如果元素具有設定路徑，則會使用 `config.xml` 用於驗證的路徑。 [GitHub-27678](https://github.com/magento/magento2/issues/27678)

<!-- ENGCOM-8684 -->

* 使用Grunt或伺服器端編譯編譯來編譯較少檔案現在會產生相同的結果。 先前版本。 `.abs- styles`，可延伸其他 `.abs- styles` 在 `_extends.less`，在以Grunt編譯時無法正確輸出。 這會導致生產部署與開發部署之間的差異。 [GitHub-7231](https://github.com/magento/magento2/issues/7231)

### Adobe Stock整合

<!-- MC-39754-->

* 應用程式現在會顯示資訊性訊息和管理員連結 **商店** > **設定** > **進階** > **系統** 頁面上的搜尋Adobe Stock頁面，當 **API金鑰（使用者端ID）** 和 **使用者端密碼** 未設定。 之前，應用程式會顯示此錯誤： `We couldn't find any records` 而且沒有連結。

### 後端

<!-- MC-40389-->

* 具有受限制存取權（例如，僅被指派存取一個網站的管理員）的管理員無法再編輯設定為全域範圍的類別。

<!-- MC-39037-->

* 產生的系統報告(**系統** > **支援** > **系統報告**)現在已正確呈現。 之前，報表內容不會對齊。

<!-- MC-30152 ENGCOM-8625-->

* 應用程式現在會關閉 **價格** 欄位符合預期，當 **動態價格** 設定會在套件產品建立期間啟用。 之前，當您從應用程式移除值時，應用程式會擲回驗證錯誤。 **價格** 欄位當 **動態價格** 已啟用設定。 [GitHub-26214](https://github.com/magento/magento2/issues/26214)

<!-- MC-24840-->

* 當部署中的管理員URL與預設網站URL不同時，無限重新導向不再發生，應用程式會設定為可從兩個URL存取。

### 套裝產品

<!-- MC-41810-->

* 您現在可以使用 `addProductsToCart` 變異：將包含多個核取方塊選項的套件產品新增至購物車。

<!-- MC-41614-->

* 現在，使用暫存表格執行套件產品的價格索引，可避免鎖定資料庫表格。 以前，應用程式使用實體表格，導致鎖定表格。

<!-- MC-41177 magento/magento2#32594-->

* 套件組合專案的價格現在可以設為0.00。先前，當您在設定價格為0.00之後返回編輯頁面時，價格會傳回其預設值。 [GitHub-32383](https://github.com/magento/magento2/issues/32383)

<!-- MC-40603-->

* 現在，如果價格在訂購之前已變更，則包含搭售產品的訂單的訂單詳細資料會顯示搭售產品的正確價格。

<!-- MC-40035-->

* 現在，會根據其子產品的庫存狀態來更新套件組合產品庫存狀態。 先前，當從產品中移除一個選項時，套件組合產品會顯示為無庫存，且套件組合產品具有兩個具有相同SKU的選項。

<!-- MC-39276-->

* 管理員現在可以變更套件組合產品的值 `Shipment Type` 屬性。 過去，此屬性一律會與 `Together` 值（如果移至屬性集中的預設群組以外的屬性群組）。

<!-- MC-38900-->

* GraphQL `setGuestEmailOnCart` 突變現在可以正確更新來賓電子郵件。 以前，報價和報價地址表格不會更新。

<!-- MC-37719-->

* 透過REST API呼叫新增、移除或更新子產品至套件組合產品現在會如預期觸發重新索引。 以前，這些動作不會觸發重新索引，因此，在執行手動重新索引之前，捆綁產品不會變更其庫存狀態。

<!-- MC-35725 ENGCOM-8568-->

* 應用程式現在會顯示具有層級價格的套件組合產品的正確價格範圍。 [GitHub-30284](https://github.com/magento/magento2/issues/30284)

<!-- MC-35638-->

* 套裝選項的價格變更後，應用程式現在會在購物車頁面和結帳工作流程的出貨步驟中顯示相同的總價。

<!-- MC-32617-->

* 您現在可以從客戶購物車存取套件組合產品以成功設定該產品。 以往， 「設定產品」頁面從未完全載入，且您無法儲存設定。

<!-- MC-30317 ENGCOM-7141-->

* 商戶現在可以在多商店部署的每個商店檢視上，為套件產品指定唯一價格。 網站特定價格會儲存在 `catalog_product_bundle_selection_price` 表格。 以往，即使在  **商店** > **設定** > **目錄** > **目錄** > **價格** > **目錄價格範圍** 已設為 `Website`. 未儲存任何網站特定價格 `catalog_product_bundle_selection_price`. [GitHub-12584](https://github.com/magento/magento2/issues/12584)

<!-- ENGCOM-8705 MC-38953-->

* 現在，當發生下列情況時，套件產品的發票會顯示相關簡單產品的正確數量 **動態定價** 已停用。 以前，與組合產品相關聯的簡單產品具有父產品的數量，而不是組合產品的數量)。 [GitHub-30802](https://github.com/magento/magento2/issues/30802)

<!-- magento/magento2#30374 MC-36930-->

* 此 `updateProductsInWishlist` 突變現在可成功更新願望清單中屬於組合產品的專案。 以前，這個變異不會更新願望清單專案，而是刪除該專案並建立新的專案，從而變更了專案ID。

### 快取

<!-- ENGCOM-8554-->

* 此 `varnish6.vcl` 檔案已更新，以略過客戶頁面的快取。

### 驗證碼

<!-- MC-41572-->

* 現在，驗證碼可正確驗證購物者提供的資料，且購物者多次嘗試透過PayPal Payflow Pro結帳失敗後，驗證碼欄位現在會如預期般顯示。

<!-- MC-41281-->

* 驗證碼驗證不會在結帳工作流程的付款頁面上隨機失敗。

<!-- MC-41001-->

* 在您超過失敗的完成嘗試次數後，應用程式現在會如預期顯示驗證碼欄位。 以前，雖然應用程式提示您再次嘗試驗證碼質詢，它不會顯示驗證碼欄位。

<!-- MC-40359-->

* 驗證碼現在可在結帳頁面上如預期運作。 以前，在購物者正確回答驗證碼質詢後，結帳頁面上的載入器從未完成，並且應用程式顯示以下錯誤： `captchaData[formId] is undefined`. （只有在購物者使用先前存取執行2.3.5-p1之部署的相同瀏覽器時，才會發生此錯誤。）

<!-- ENGCOM-8630-->

* `_.isEmpty()` 入庫 `defaultCaptcha.js` 檔案現在已成功完成。 以前，這些檢查未完成，因此，升級後無法載入簽出頁面。 [GitHub-31641](https://github.com/magento/magento2/issues/31641)

### 購物車與結帳

<!-- MC-41911-->

* 現在，在轉換和更新購物車中的產品數量時，應用程式會考慮地區設定的特定小數位數。

<!-- MC-40657-->

* 應用程式現在只有在購物者按一下 **下單** 按鈕。 以前，當購物者在結帳工作流程中變更付款方式時，應用模組會在「套用折扣代碼」區塊中顯示此訊息： `The order wasn't placed. First, agree to the terms and conditions, then try placing your order again`.

<!-- MC-39581-->

* 如果購物者未能按一下 **更新** 按鈕並返回送貨步驟。

<!-- MC-37807 ENGCOM-8530-->

* 具有可自訂選項的產品 `(File)` 現在，包含整個多送貨結帳程式中預期的使用中連結。 之前缺少此連結。 [GitHub-31095](https://github.com/magento/magento2/issues/31095)

<!-- MC-37689-->

* Admin購物車現在會針對支援多種貨幣的商店，以正確貨幣顯示產品價格。 先前，價格會多次轉換為指定的貨幣 — 先是從店面將產品新增到購物車時，然後在管理員其後轉譯訂單時再次轉換。

<!-- MC-35640-->

* 購物者現在可以將最低廣告價格(MAP)超過一般產品價格的商品新增到購物車中。

<!-- MC-35289-->

* 現在，使用多個地址結帳時，購物者可以從結帳工作流程成功變更其帳單地址。

<!-- MC-29335 magento/magento2#32251 -->

* 來賓建立的所有付費付款交易現在都會儲存到資料庫，並如預期顯示在Admin中。 以前，只有一小部分並行訂單儲存在資料庫中，並且大多數訂單會因為資料庫鎖定造成的逾時而遺失。 [GitHub-25862](https://github.com/magento/magento2/issues/25862)

<!-- MC-23989-->

* 當訪客將產品放入迷你購物車時，應用程式現在會正確顯示內嵌歡迎訊息，其中包含特殊字元。 之前，應用程式不會將產品新增至迷你購物車或顯示歡迎訊息。 [GitHub-32250](https://github.com/magento/magento2/issues/32250)

<!-- MC-41165-->

* 現在，啟用店內傳遞時，結帳工作流程的送貨頁面會成功載入。 之前，應用程式擲回JavaScript錯誤，且出貨結帳頁面未完全轉譯。

<!-- ENGCOM-9006-->

* 已新增 `itemResolvers` 目錄的引數 `di.xml` 檔案。 因此，如果可設定和群組的產品模組停用，則簽出不再中斷。 [GitHub-30860](https://github.com/magento/magento2/issues/30860)

<!-- ENGCOM-8944-->

* 應用程式現在會在 **付款與送貨資訊** 區段在管理員重新排序工作流程期間如預期顯示。 [GitHub-30257](https://github.com/magento/magento2/issues/30257)

<!-- MC-39158 ENGCOM-8493-->

* 當購物車包含具有多個選項的套件產品時，應用程式現在會正確套用具有購物車層級固定折扣的購物車價格規則。 之前，購物車價格規則未完全套用至訂單。 [GitHub-30952](https://github.com/magento/magento2/issues/30952)

<!-- MC-40983 ENGCOM-8828-->

* 此 **加入購物車** 類別清單檢視上的按鈕現在可如預期運作。 [GitHub-32232](https://github.com/magento/magento2/issues/32232)

<!-- ENGCOM-8490-->

* 您現在可以使用POST `/V1/carts/mine/items` 新增已分組產品的自訂數量至購物車。 [GitHub-26909](https://github.com/magento/magento2/issues/26909)

<!-- ENGCOM-8886-->

* 應用程式不再以送貨地址填入結帳工作流程的帳單地址區域。 先前，當 **州/省** 帳單地址的欄位為空，而且送貨與帳單地址不同，應用程式會填入帳單地址 **州/省** 包含送貨地址中資訊的欄位。 [GitHub-31608](https://github.com/magento/magento2/issues/31608)

### 目錄

<!-- MC-36787-->

* 大量更新 **啟用數量增量** 和 **數量增加** 屬性現在可如預期運作。 [GitHub-29544](https://github.com/magento/magento2/issues/29544)

<!-- MC-41575-->

* 當您與管理員啟用最近的產品同步化後，應用程式不再擲回JavaScript錯誤。 以前，應用程式顯示此JavaScript錯誤： `Cannot read property 'status' of undefined`.

<!-- MC-41534-->

* 自訂主題版面配置更新現在已按預期套用。 以前會忽略自訂佈景主題版面更新。

<!-- MC-41499-->

* 產品類別快取現在會如預期般清除 `cron` 期間 `indexer_update_all_views` 執行。 先前，重新索引後「類別」頁面上的產品計數不正確。

<!-- MC-41422-->

* 現在，如果在商店檢視的產品更新REST API請求中未指定屬性，屬性值將保持不變。 以前，如果未指定屬性，應用程式會將屬性值重設為預設範圍值。

<!-- MC-41284-->

* 管理產品格線(Admin **目錄** > **產品**)現在會在依SKU篩選產品時顯示正確的產品計數。

<!-- MC-40873-->

* 啟用「類別許可權」後，當產品新增至CMS頁面時，應用程式現在會顯示正確的庫存狀態，並防止顯示指定客戶群組的價格。 過去，無論實際庫存狀態為何，所有產品都會顯示為無庫存。

<!-- MC-40859-->

* 「進階訂價客戶群組價格」區塊價格輸入欄位現在的最小寬度為5位數。 以前，在低解析度顯示器上，此欄位中只顯示兩個符號。

<!-- MC-40825-->

* 應用程式現在會在刪除產品後，成功刪除產品媒體影像。 先前，成功刪除產品後，產品媒體影像會保留在資料夾中。

<!-- MC-40811 magento/magento2#32042-->

* 當您在「管理員」中建立或編輯產品，然後建立「排程設計更新」時，頁面版面現在會依預期更新。 [GitHub-32007](https://github.com/magento/magento2/issues/32007)

<!-- MC-40773-->

* 值為零的自訂產品屬性現在可以成功儲存為空白。 以前，應用程式不會將此值更新為空白。

<!-- MC-40736 ENGCOM-8789-->

* 自訂類別配置更新檔案現在會如預期套用至產品。 以前，更新檔案控制代碼(`catalog_category_view_*`)不符合產品控制代碼。 [GitHub-27285](https://github.com/magento/magento2/issues/27285)

<!-- MC-40679-->

* 管理員產品清單的「固定產品稅金(FPT)」欄已停用排序。 之前，在排序FPT欄之後，無法重新載入產品頁面。

<!-- MC-40443-->

* 現在，當相符產品在每個網站上的價格不同時，頁面產生器產品Widget預覽可在多網站部署中如預期運作。

<!-- MC-40344 ENGCOM-8629-->

* 使用GET依產品搜尋上的位置排序 `/rest/V1/products/?searchCriteria[filterGroups]` 現在可如預期般運作。 之前，產品集合沒有欄位 `position` 排序的值。 [GitHub-31591](https://github.com/magento/magento2/issues/31591)

<!-- MC-40122-->

* 管理員使用者現在可以在 **名稱** 和 **SKU** 產品格線中的欄位。 之前，應用程式會將多個空格摺疊為單一空格。

<!-- MC-39869-->

* 現在，當管理員的可銷售數量為0時，產品在店面中顯示為無庫存。 以前，這些產品在店面中以庫存形式列出，而應用程式會顯示為使用中 **加入購物車** 按鈕。 [GitHub-31117](https://github.com/magento/magento2/issues/31117)

<!-- MC-39809-->

* 管理員現在可以新增包含可自訂選項的產品 `(File)` 從「管理客戶」頁面的「購物車」區段（「客戶活動」欄）移至「已訂購專案」格線。 以前，應用程式不會將專案新增到清單，因為值在插入之前格式不正確 `\Magento\Catalog\Model\Product\Type\AbstractType::_prepareOptions`.

<!-- MC-39619-->

* 應用程式不再提示購物者為僅有一個選項的套件產品選取產品選項。

<!-- MC-39617-->

* 在建立新Widget期間，應用程式現在會在版面更新中顯示所有子類別（錨點和非錨點類別）。

<!-- MC-39481-->

* 此 `product` 僅針對一個存放區檢視更新產品名稱時，查詢不再覆寫多存放區部署中所有存放區檢視的預設值。 [GitHub-31083](https://github.com/magento/magento2/issues/31083)

<!-- MC-39470 magento/magento2#31492-->

* 當您變更「管理員相關產品」、「向上銷售」和「交叉銷售」清單的每頁值時，Magento Open Source會依預期更新總頁數。 [GitHub-31059](https://github.com/magento/magento2/issues/31059)

<!-- MC-39444-->

* 管理員現在可以新增具有兩個或多個可自訂選項的產品 `(File)` 以SKU訂購。

<!-- MC-39140-->

* 當具有受限制許可權的管理員將產品小工具新增到管理員的CMS頁面時，應用程式不再擲回錯誤。 之前，當管理員按一下 **儲存** 按鈕：  `We are sorry, an error has occurred while generating the content`.

<!-- MC-39134-->

* 產品詳細資料頁面現在會開啟，其中可自訂的日期選項會填入下列情形的上一訂單日期： **使用JavaScript日曆** 已啟用。 如果值未根據目前組態進行格式，自訂日期選項值解析器現在會退回替代格式。 在以前，自訂日期選項值是空的。

<!-- MC-39104-->

* 產品無庫存時，應用程式現在在購物車中僅顯示一個錯誤。 以前，應用程式會顯示多餘的訊息。 [GitHub-27469](https://github.com/magento/magento2/issues/27469)

<!-- MC-38575-->

* 您現在可以設定 `required_options` 和 `has_options` 使用建立或更新搭售產品時，按預期建立搭售屬性 `POST /V1/product/:sku` 端點。 以前，這些自訂屬性設定為0 （零），儘管努力將其設為1 （一）。

<!-- MC-35717  magento/partners-magento2ee#427-->

* 管理員現在可以新增包含可自訂選項的產品 `(File)` 以SKU訂購。 [GitHub-30285](https://github.com/magento/magento2/issues/30285)

<!-- MC-30625-->

* 您現在可以儲存產品和價格，而不需指定 `type_id`. [GitHub-13639](https://github.com/magento/magento2/issues/13639)

<!-- MC-39024-->

* 現在，當REST時，店面可如預期提供群組產品 `PUT /V1/products/:sku/links` 請求用於將新的子產品與新的群組產品相關聯。 以前，產品在執行後未正確索引 `bin/magento cron:run`.

<!-- ENGCOM-9010 8947-->

* 您無法再使用「 」建立產品 `NULL` SKU值。 之前，您可以透過自訂匯入工具或直接在資料庫中建立沒有SKU值的產品，但當您嘗試從管理員編輯該產品時，應用程式會擲回錯誤。 [GitHub-27411](https://github.com/magento/magento2/issues/27411)， [GitHub-32525](https://github.com/magento/magento2/issues/32525)

<!-- ENGCOM-8902-->

* 將必要的自訂選項新增至簡單產品時，不會再毫無警告地將其從父複合產品中移除。 應用程式現在會顯示資訊性警告，且不會儲存產品。  之前，應用程式儲存了產品變更，但並未顯示警告。 [GitHub-30492](https://github.com/magento/magento2/issues/30492)

### 目錄規則

<!-- MC-39896-->

* 此 `products` 現在，當型錄價格規則套用至料號時，查詢會傳回目前值。 [GitHub-26738](https://github.com/magento/magento2/issues/26738)

<!-- ENGCOM-8367-->

* 開頭為的臨時表格 `catalogrule_product__temp` 當購物車或目錄規則過期、停用或變成非使用中後，重新索引失敗時，現在會依預期刪除。 [GitHub-22273](https://github.com/magento/magento2/issues/22273)

<!-- ENGCOM-8949-->

* 時區的套用方式現在與中的相同 `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexById` 和 `\Magento\CatalogRule\Model\Indexer\IndexBuilder::reindexByIds`. [GitHub-29549](https://github.com/magento/magento2/issues/29549)

### CMS內容

<!-- MC-41471-->

* 現在上傳大型影像時，會依預期調整大小， **啟用前端調整大小** 已啟用組態設定。

<!-- MC-40663 ENGCOM-8883-->

* 修正CMS頁面儲存控制器的錯誤處理。 先前，當 `Error` 物件被擲回 `cms_page_prepare_save` 事件，應用程式將此物件傳遞至 `addExceptionMessage` 函式中，因為此函式預期一個 `Exception`. 已透過使用新增錯誤訊息來解決此問題 `addErrorMessage` 函式。 [GitHub-30149](https://github.com/magento/magento2/issues/30149)

### 可設定的產品

<!-- MC-40719-->

* 當您按一下產品的可設定選項時，應用程式不會再複製產品影像庫中的產品縮圖。

<!-- MC-37418-->

* 當您從希望清單編輯可配置產品時，應用程式顯示的設定快顯視窗，現在會在您按一下 **確定** 按鈕。

<!-- MC-39878  magento/magento2#31472-->

* 此應用模組現在會針對僅包含一個可設定產品的訂單，正確產生商業發票。 [GitHub-31143](https://github.com/magento/magento2/issues/31143)

<!-- ENGCOM-8673-->

* 購物者現在可以從非預設商店檢視將可設定產品新增到購物車。 先前，當非預設存放區檢視上的購物者嘗試新增可設定的產品時，應用程式會顯示此錯誤： `Could not add item to cart. Please check required options and try again`. [GitHub-31660](https://github.com/magento/magento2/issues/31660)

### 內容安全性原則(CSP)

<!-- ENGCOM-8577-->

* 內容安全性原則現在支援透過載入base64編碼的影像和字型 `data: scheme`.

### cron

<!-- MC-30804-->

* Cron清理查詢已重構，以減少或消除以下效能問題： `cron` 工作仍停滯在擱置狀態、MySQL查詢速度日益緩慢，以及CPU使用量增加。 [GitHub-26507](https://github.com/magento/magento2/issues/26507)

<!-- ENGCOM-8571-->

* `cronjobs` 已處於狀態 `running` 超過24小時自動變更為狀態 `error`.  因此，該工作的新執行個體可以再次執行，並且當工作不正確地保持為狀態時，您不需要手動變更工作狀態 `running`. 先前，如果 `cronjob` 卡在狀態 `running`，應用程式會阻止啟動相同工作的新執行個體，且您必須手動變更工作狀態。 [github-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` 工作現在如預期般完成，且不再擲回此序列化錯誤：  `[Magento\Framework\DB\Adapter\DeadlockException]SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction, query was: DELETE FROM cron_schedule WHERE (status = 'missed') AND (job_code in ('indexer_reindex_all_invalid', 'indexer_update_all_views', 'indexer_clean_all_changelogs')) AND (created_at < '2018-09-28 18:32:28')`. [GitHub-18409](https://github.com/magento/magento2/issues/18409)

<!-- ENGCOM-8571-->

* `indexer_update_all_views`  cron工作現在會在先前的失敗後如預期般執行。 失敗的執行在 `cron_schedule schedule`，且後續執行不會自動失敗。 先前， `cron_schedule` 含有待處理工作的表格，以及 `indexer_update_all_views` cron工作未執行。 [GitHub-23054](https://github.com/magento/magento2/issues/23054)

<!-- ENGCOM-8571-->

* `cron` 死鎖不再發生，因為 `cron` 嘗試在群組重疊的大型部署中設定鎖定。 [github-8933](https://github.com/magento/magento2/issues/8933)

<!-- ENGCOM-8571-->

* `cron` 死鎖不再發生在 `cron_schedule` 只保留幾個之後的表格 `cron` 工作已執行。 [GitHub-22438](https://github.com/magento/magento2/issues/22438)

### 自訂客戶屬性

<!-- MC-41611-->

* 此 **狀態** 店面客戶帳戶通訊錄上的欄位現在已載入為，並保留為下拉式頁面元素。 此 **提交** 現在按鈕已停用，直到完全載入所有頁面元素為止。 以前，應用程式在將此欄位呈現為下拉式元素之前會載入為文字方塊，購物者可以在文字欄位中輸入並儲存值，這稍後會在結帳時造成錯誤。

<!-- MC-40329-->

* 上傳檔案時，當您在「管理客戶地址」欄位中儲存具有檔案附件的客戶地址屬性時，應用程式不再擲回錯誤。 發生此狀況是因為控制器動作中遺失傳回陳述式。 之前，應用程式擲回此錯誤： `Something went wrong while saving the file`.

<!-- MC-39354-->

* RESTGET購物車API呼叫現在會傳回帳單和運送地址的正確自訂屬性值。 以前，自訂地址屬性在「我的帳戶店面」頁面和「管理員」的訂單詳細資訊頁面中顯示不正確。

<!-- MC-24495-->

* 應用程式現在可成功處理包含輸入型別之客戶位址屬性的檔案 `file (attachment)`. 之前，應用程式在上傳附加檔案時擲回此錯誤： `Something went wrong while saving the file`.

### 客戶

<!-- MC-40579-->

* 依帳戶建立日期篩選現在產生的結果會符合設定的時區設定，並擷取所有相關建立的帳戶。

<!-- MC-40502-->

* 如果資料先前已快取，客戶格線篩選器現在對受限制使用者使用正確的網站選項。 以前，客戶格線篩選器會從快取中擷取網站引數，並針對受限制的使用者包含不正確的資料。

<!-- MC-39189-->

* 若在多網站部署中刪除一個網站，應用程式不會再在「管理員客戶」頁面上擲回例外狀況。 先前，當管理員嘗試存取完整的客戶清單時，應用程式未顯示所有客戶，並顯示此錯誤： `The website with id 2 that was requested wasn't found. Verify the website and try again`.

<!-- MC-38913-->

* 具有許可權的管理員現在可以從客戶的「帳戶資訊」索引標籤，將客戶重新指派至不同的網站。

<!-- MC-39852-->

* 現在，當您使用輸入型別建立客戶地址屬性時，可以成功上傳檔案 `(File)`. 先前，當您嘗試上傳並儲存檔案時，應用程式擲回此錯誤： `Something went wrong while saving the file`.

### 目錄

<!-- MC-39520-->

* 當購物者在結帳工作流程的送貨區段期間輸入無效的郵遞區號時，應用程式不會再擲回例外狀況。 [GitHub-23371](https://github.com/magento/magento2/issues/23371)

### 可下載

<!-- MC-35779-->

* 當訂單包含可下載的產品和具有可下載選項的可設定產品時，應用程式現在會在新訂單電子郵件中顯示可下載產品的連結。 以前，應用程式顯示指向獨立可下載產品的連結，但不會顯示指向具有可下載選項的可設定產品的連結。

### EAV

<!-- MC-41756-->

* 客戶地址屬性日期值現在以四位數格式儲存，而非兩位數格式。

### 電子郵件

<!-- MC-39757-->

* 「管理員重設密碼」頁面上的密碼重設連結現在可如預期運作。 先前，當自訂範本用於重設管理員密碼頁面時，當管理員按一下電子郵件內的連結時，應用程式會顯示此訊息： `Your password reset link has expired`. 發生此狀況是因為自訂電子郵件範本包含使用者ID的錯誤變數。

<!-- MC-41588-->

* 現在，在商店檢視層級啟用時，從管理員傳送客戶電子郵件會正常運作。 以往，在商店檢視層級啟用電子郵件通知設定（而非全域層級）時，應用程式不會傳送客戶電子郵件。

<!-- MC-40950-->

* 應用程式現在會依預期在多網站部署中傳送電子郵件，因為並非所有網站都啟用非同步電子郵件傳送。 先前，如果至少有一個網站停用此設定，則即使已啟用，也不會從任何網站傳送電子郵件。 發票、出貨及銷退折讓單電子郵件有類似的問題。 不過，訂單註解、商業發票註解、出貨註解及銷退折讓單註解電子郵件已順利傳送。 [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-30127 magento/magento2#31455-->

* 商業發票與商業發票PDF現在包含與預期相同的套件組合產品價格。 以前，發票PDF包含不正確的套件組合產品價格。 [GitHub-12856](https://github.com/magento/magento2/issues/12856)

<!-- ENGCOM-9021-->

* 已將字串轉型新增至電子郵件範本篩選方法，以確保傳回值為 `string`. 先前，當不在開發人員模式中攔截到例外狀況時，應用程式會傳回 `phrase` 物件。 這進而觸發了嚴重錯誤 `Uncaught TypeError`. [GitHub-32671](https://github.com/magento/magento2/issues/32671)

<!-- ENGCOM-8807-->

* 啟用非同步傳送時，現在會依預期傳送訂單確認電子郵件(**商店**  >  **設定**  >  **銷售**  > **銷售電子郵件**  >  **一般設定**  >  **非同步傳送**)的網站進行多網站部署。 [GitHub-31950](https://github.com/magento/magento2/issues/31950)

<!-- MC-18023 ENGCOM-9000-->

* 當客戶嘗試從「聯絡我們」表單傳送電子郵件時發生例外狀況時，應用程式現在會依預期記錄錯誤。 [GitHub-23645](https://github.com/magento/magento2/issues/23645)

### 框架

<!-- MC-41712-->

* 現在會檢查Admin中的父類別是否有docblock註解，以及原始類別和繼承的介面。 之前，由於未檢查父類別，因此在Admin中執行任何與客戶相關的動作時觸發事件，都會導致錯誤。 應用程式在例外狀況記錄檔中記錄此錯誤： `report.CRITICAL: Method's return type must be specified using @return annotation.`.

<!-- MC-41192-->

* 在啟用Redis頁面快取的部署中，當Redis伺服器停止時，應用程式不再擲回嚴重錯誤。

<!-- MC-40739-->

* 應用程式現在會遵循 **從備份中排除媒體資料夾** 設定何時啟用備份，使用 `bin/magento config:set system/backup/functionality_enabled 1`. 雖然有此設定，但先前還是會備份媒體資料夾，因為 `/magento` 格式不正確，有兩個//。

<!-- MC-40654 ENGCOM-8881-->

* 應用程式現在會依預期為Admin cart頁面翻譯所有可翻譯字串。 以前，轉譯載入發生得太晚，並略過訂閱控制器動作預先派單的所有觀察者。 [GitHub-31849](https://github.com/magento/magento2/issues/31849)

<!-- MC-39776-->

* 「建立新客戶帳戶」頁面上的表單驗證現在可在下列情況下成功運作： **客戶登入** 啟用擴充功能設定已停用。 之前，應用程式擲回JavaScript錯誤。

<!-- MC-39193-->

* 所取用的子處理程式的例外狀況處理 `ProcessManager` 已進行改善。 現在發生例外狀況時，主要程式會結束，而錯誤訊息只會顯示一次。 以前，會記錄多個索引器失敗並顯示多個訊息。 [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- MC-39132-->

* 全域Magento Open Source外掛程式(例如 `webapi_rest` 和 `graphql` )不再為新的自訂區域型別觸發，當 `di.xml` 此區域檔案未包含已註冊的外掛程式。

<!-- MC-38770-->

* 初始化期間發生的例外狀況不再快取，現在會觸發500回應代碼。

<!-- ENGCOM-8232-->

* 最後一個處理常式合併至 `communication.xml` 檔案不再覆寫所有先前建立的處理常式。 [GitHub-29528](https://github.com/magento/magento2/issues/29528)

### 一般修正

<!-- MC-41194-->

* 應用程式現在會在「我的產品評論」頁面和「我的帳戶」頁面顯示最近評論的正確星數。 以前，應用程式只將評論開始套用到第一次評論，並將頁面上的其他評論保留不開始。

<!-- MC-40653-->

* 標題中的帳戶連結現在遵循WCAG標準。 先前，標題中的帳戶連結包含重複的ID，導致WCAG驗證失敗。

<!-- MC-39765-->

* 當訪客購物者使用無效位址時，應用程式不再擲回系統記錄檔產生的錯誤。 以前，應用程式會間歇性地顯示此錯誤，而不是呈現頁面： `No such entity with addressId`. [GitHub-15115](https://github.com/magento/magento2/issues/15115)

<!-- MC-39747-->

* 對於不支援格式的影像，影像大小調整程式不再暫停。 先前，當 `catalog:images:resize` 發生不支援的影像格式，處理序已停止，應用程式顯示此錯誤： `bin/magento catalog:images:resize Unsupported image format`.

<!-- ENGCOM-8925-->

* 管理員已新增對標誌影像的WEBP和AVIF支援。 [GitHub-32495](https://github.com/magento/magento2/issues/32495)

<!-- MC-38156-->

* 您無法再變更「 」的範圍 `media_gallery` 屬性。 之前，當您變更 `media_gallery` 屬性傳回 `global`，應用程式擲回錯誤。

<!-- MC-36818  magento/partners-magento2ee#470-->

* 更新結束日期後，新增為排程更新的相關產品不再顯示在店面產品頁面上。 [GitHub-469](https://github.com/magento/partners-magento2ee/issues/469)

<!-- MC-33499 magento/partners-magento2ee#446-->

* 選取實體型別時，篩選功能現在可在排程匯出清單上依預期運作。 之前，篩選器無法運作，且應用程式擲回JavaScript錯誤。 [GitHub-361](https://github.com/magento/partners-magento2ee/issues/361)

<!-- MC-30084 ENGCOM-8674-->

* 類別影像現在會如預期從 `catalog/tmp/category` 目錄到 `catalog/category` 目錄（使用資料庫儲存方法儲存類別時）。 中的影像列 `media_storage_file_storage` 表格現在也有正確的 `directory_id`. [GitHub-11995](https://github.com/magento/magento2/issues/11995)

<!-- MC-24768-->

* 在提交變更至CMS階層後，商家現在會依預期收到有關無效快取的通知。 先前，應用程式在儲存CMS階層時不會使快取失效。

<!-- MC-24725-->

* 減少購物車的購物車區段的多餘AJAX請求。 以前，應用程式沒有正確載入購物車小計，這會再次觸發購物車重新載入。

<!-- MC-23740-->

* 新增URL驗證，以防止保留字包含在URL索引鍵中。 另請參閱 [定義眾所周知的統一資源識別碼(URI)](https://tools.ietf.org/html/rfc5785)

<!-- ENGCOM-9037-->

* 在執行PHP 7.4的部署上，當執行 **產生「類別/產品」URL重寫** 設定已設為 **否**，而購物者會嘗試存取不存在的類別路徑。 之前，應用程式傳回500錯誤，指出： `Trying to access array offset on value of type bool`. [GitHub-31984](https://github.com/magento/magento2/issues/31984)

<!-- ENGCOM-8901-->

* `nowdoc` 已取代 `heredoc` 在 `Magento_Backend` 存放區切換器。 [GitHub-32262](https://github.com/magento/magento2/issues/32262)

<!-- ENGCOM-8685-->

* 阿根廷、玻利維亞、智利、厄瓜多爾、蓋亞那、巴拉圭、秘魯、蘇利南和委內瑞拉已新增至 `directory_country_region` 表格。 [GitHub-31169](https://github.com/magento/magento2/issues/31169)

<!-- ENGCOM-8505-->

* 阿爾巴尼亞、丹麥、希臘、冰島、葡萄牙和瑞典地區已新增至 `directory_country_region` 表格。 [GitHub-31040](https://github.com/magento/magento2/issues/31040)

<!-- MC-30104 magento/magento2#31480 -->

* 當發生例外狀況時，訊息現在會在MysqlMQ訊息佇列中標示為錯誤。 [GitHub-18140](https://github.com/magento/magento2/issues/18140)

<!-- ENGCOM-8579-->

* 現在，在載入「管理員」銷退折讓單與商業發票頁面的稅捐資訊時，應用模組會參考正確的類別物件。 [GitHub-31197](https://github.com/magento/magento2/issues/31197)

<!-- MC-40346-->

* Royal Mail Click &amp; Drop整合現在可如預期運作。 先前，應用程式在您嘗試啟用其整合時擲回此錯誤： `Sorry! Something went wrong. Please try again later`. [GitHub-28996](https://github.com/magento/magento2/issues/28996)

<!-- ENGCOM-8498-->

* 在URL中傳遞了錯誤的出貨、銷退折讓單或商業發票識別碼時，應用模組現在會顯示資訊性錯誤訊息。 之前，應用程式擲回嚴重錯誤。 [GitHub-30424](https://github.com/magento/magento2/issues/30424)

<!-- ENGCOM-8632-->

* 已移除靜態檔案位置的遞回。  應用程式現在會顯示404頁面，而不是500錯誤。 先前，預設NGINX設定中的錯誤會導致無限遞回。 [GitHub-31530](https://github.com/magento/magento2/issues/31530)

<!-- ENGCOM-8550-->

* 的名稱 `cms_index_noroute.xml` 檔案已更正為 `cms_noroute_index.xml`. [GitHub-31300](https://github.com/magento/magento2/issues/31300)

<!-- ENGCOM-8516-->

* 此 `.editorconfig` 檔案已重構，以更正 `db_schema_whitelist.json` 檔案。 [GitHub-31171](https://github.com/magento/magento2/issues/31171)

<!-- ENGCOM-9018-->

* 調整瀏覽器視窗的大小不再觸發重複的繫結放大鏡事件。 [GitHub-30788](https://github.com/magento/magento2/issues/30788)

<!-- ENGCOM-8722-->

* 應用程式在篩選時不再擲回SQL例外狀況 `Magento\Users\Model\ResourceModel\Users\Collection` 作者： `user_id`. [GitHub-31216](https://github.com/magento/magento2/issues/31216)

### 禮品卡

<!-- MC-32651-->

* 價格範圍驗證邏輯已新增至禮品卡建立頁面。 過去，管理員可建立卡片的最小值超過最大值。 [GitHub-493](https://github.com/magento/partners-magento2ee/issues/493)

<!-- MC-32638979 magento/partners-magento2ee#40851-->

* 此 `addRequisitionListItemsToCart` 當請求不含的值時，查詢現在會傳回預期的自訂禮卡數量 `allow_open_amount`.

### 禮物訊息

<!-- ENGCOM-8539-->

* 現在，管理員在登入後會直接重新導向到請求的「管理員」頁面。  先前，當管理員登入時，系統會將他們重新導向至管理員控制面板（或設定為啟動頁面的頁面），且必須手動導覽至目的地。 [GitHub-31042](https://github.com/magento/magento2/issues/31042)

### Google Tag Manager

<!-- MC-39072-->

* 現在，啟用Google Tag Manager時，結帳工作流程付款頁面上帳單地址的UI元件會正確使用報價地址。 之前，付款頁面上發生JavaScript錯誤。

### GraphQL

<!-- MC-41885-->

* GraphQL `products` query現在會傳回以屬性編輯頁面上使用的相同排序順序排序的屬性選項。

<!-- MC-41473-->

* 對的回應 `{ category(id: 2){ children { name children { name } } } }` GraphQL請求現在包含正確排序的類別樹狀結構。

<!-- MC-41030-->

* 此 `CartItemPrices` 物件現在包含新的GraphQL欄位 `fixed_product_taxes`，這會傳回套用至購物車專案的固定產品稅捐陣列。 以前，套用至購物車專案的固定產品稅不包含於購物車查詢中。

<!-- MC-40920-->

* 對GraphQL的空白請求現在會擲回回應代碼200，而不是500。 之前，GraphQL剖析器在產生查詢結果之前擲回例外狀況。

<!-- MC-40867 magento/partners-magento2ee#532 -->

* 此 `applyRewardPointsToCart` 變異現在會更新購物車的總計，以精確反映扣除的獎勵點數的值。 [GitHub-486](https://github.com/magento/partners-magento2ee/issues/486)

<!-- MC-40379-->

* 使用GraphQL連結追加銷售產品時，停用的產品不再包含在GraphQL回應中。

<!-- MC-40262-->

* 商家現在可以使用GraphQL `setShippingAddressesOnCart` 在訪客結帳停用時，設定購物車帳單和送貨地址的方法。

<!-- MC-39508-->

* 此 `categoryList` 當查詢在上包含多個片段時，不再擲回例外狀況 `CategoryTree` 物件。 [GitHub-31086](https://github.com/magento/magento2/issues/31086)

<!-- MC-38995-->

* GraphQL `product` query現在會傳回正確的客戶群組價格。

<!-- MC-38822-->

* GraphQL `products` 查詢回應現在會根據產品屬性位置來排序彙總。

<!-- ENGCOM-8462-->

* 當產品和類別URL尾碼包含Null值時，應用程式不會再在GraphQL查詢期間擲回型別錯誤。 [GitHub-30909](https://github.com/magento/magento2/issues/30909)

<!-- magento/magento2#31164-->

* 此 `CustomizableDateValue` 物件現在包含 `type` 屬性。 其值是可設定為DATE、DATE_TIME或TIME的列舉。

<!--  magento/partners-magento2ee#421-->

* 此 [`dynamicBlocks` 查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/dynamic-blocks.html) 傳回符合指定篩選條件的動態區塊內容。

<!-- ENGCOM-8603-->

* POST `V1/products/special-price-delete` 請求現在只會刪除具有指定之價格 `store_id` 如預期。 之前，該呼叫會從所有商店移除指定SKU的所有特殊價格。 [GitHub-25907](https://github.com/magento/magento2/issues/25907)

<!--  magento/partners-magento2ee#280 -->

* 修正的錯誤 `country_code` 中的屬性 `createGiftRegistry` 突變。

<!-- magento/partners-magento2ee#280 -->

* 已修正的問題 `giftRegistryUid` 的屬性 `updateGiftRegistryItems` 突變。

<!-- magento/partners-magento2ee#280 -->

* 新增額外檢查以防止 `updateGiftRegistryRegistrants` 變異：用來將隨機人員新增為贈品登入者。

<!-- magento/magento2#31380 -->

* 此 `addConfigurableProductsToCart` mutation現在會傳回指定產品的正確縮圖。 之前，它會傳回父產品的縮圖。

<!-- ENGCOM-8477-->

* 此 `products` 針對未來日期設定特殊價格期間時，查詢不再公開產品的特殊價格。 [GitHub-30210](https://github.com/magento/magento2/issues/30210)， [GitHub-29631](https://github.com/magento/magento2/issues/29631)

<!-- magento-engcom/magento2ee#576-->

* 此 `customer` 查詢回應現在包含 `total_giftcard` 屬性當做的一部分 `OrderTotal` 物件。

<!-- MC-41084 ENGCOM-9042 -->

* 已修正導致下列問題的原因： `products` 查詢以傳回關於沒有層級訂價集之料號之價格層的錯誤資訊。 [GitHub-32279](https://github.com/magento/magento2/issues/32279)

### 影像

<!-- MC-38951-->

* 使用POST建立或更新束產品時，您現在可以按預期設定required_options和has_options束屬性 `/V1/product/:sku` 端點。 以前，這些自訂屬性設定為0 （零），儘管努力將其設為1 （一）。

### 匯入/匯出

<!-- MC-41576-->

* 「匯出頁面實體屬性」網格中產品實體的類別ID篩選器現在可如預期運作。

<!-- MC-41439-->

* 現在，當所有子產品無庫存，分組產品庫存狀態會如預期一樣更新，以無庫存。 [GitHub-32647](https://github.com/magento/magento2/issues/32647)

<!-- MC-41184-->

* 當匯入更新子產品庫存狀態時，可設定的產品庫存狀態現在會如預期自動更新。 以前，當子項產品庫存狀態由匯入更新時，產品庫存狀態不會自動更新。

<!-- MC-41151-->

* 您現在可以在排程的匯出中儲存空白值。 以前，應用程式會在建立或儲存匯出後更新空白篩選值。 兩者 `no` 和 `not specified` 值在資料庫中以零表示，值為 `not selected` 已被覆寫 `no`.

<!-- MC-41092-->

* 現在，匯出程式在匯出產品、庫存來源和客戶實體時，會考量使用者角色範圍。 以前，匯出程式忽略使用者角色範圍，允許匯出私人使用者角色匯出實體。

<!-- MC-40943-->

* 應用模組現在會將產品稅捐類別設定為 `None` 若使用以下專案匯入產品： `tax_class_name` 值 `None` 或 `0`. 先前，如果 `product tax_class_name` 為 `None` 應用程式會在CSV檔案中建立新的稅捐類別 `None`，與現有的稅捐類別重複。 如果 `product tax_class_name` 為 `0` 在CSV檔案中，應用程式忽略該值，且產品稅捐類別在匯入後並未變更。

<!-- MC-40898-->

* 管理員現在可以成功變更 `name` 捆綁產品的 `bundle_values` 從「管理員」。 先前，在您從管理員變更名稱后，應用程式會在店面將產品顯示為無庫存。 產品也與相同的SKU合併為單一組合選項區段。

<!-- MC-40333-->

* 現在，在匯出客戶資料時，應用程式會考量使用者範圍。 先前，當您嘗試匯出客戶時，應用程式會從所有網站匯出客戶資料。

<!-- MC-40305-->

* 應用程式現在會在CSV檔案匯入期間，依預期移除向上銷售、交叉銷售及相關產品之間的產品關係，當 `__EMPTY__VALUE__` 在CSV檔案中指定。

<!-- MC-40012-->

* 為許多客戶匯出自訂地址資料（管理員） **系統** > **匯出**)不再一律導致記憶體錯誤。 先前，在匯出自訂位址資料時，應用程式會嘗試載入所有客戶資料，導致記憶體耗盡，而應用程式擲回無法配置記憶體錯誤。

<!-- MC-39977-->

* 在預設CSV匯入程式期間，不再匯入重複的層級價格。 先前，遺漏驗證以防止匯入重複的層級價格，當發生重複層級價格時，商家無法儲存產品。 商家在嘗試排程產品變更時也看到此錯誤： `SQLSTATE[23000]: Integrity constraint violation: 1062 Duplicate entry…`.

<!-- MC-39609  magento/magento2#31397-->

* 所有產品影像現在都會在匯入期間經過驗證。 以前，當產品有多個影像時，應用程式只會驗證第一個影像。 [GitHub-28236](https://github.com/magento/magento2/issues/28236)

<!-- MC-39483-->

* 您現在可以在匯入期間，如預期從客戶地址中刪除區域。 以往，以空白區域匯入客戶地址時，指派的區域未變更。

<!-- MC-38810-->

* 具有JSON或HTML內容作為其他產品屬性的產品現在會正確匯出至CSV檔案。 以前，CSV檔案在不正確的欄位中包含重疊的資料字串。

### 索引

<!-- MC-39718 ENGCOM-8567-->

* 當子處理程式失敗時，「處理程式管理員」現在會結束，並出現錯誤。 以前，如果傳遞給「程式管理員」的函式數（例如索引器維度）低於的值，「程式管理員」一律會成功退出。 `MAGE_INDEXER_THREADS_COUNT` 環境變數。 [GitHub-30964](https://github.com/magento/magento2/issues/30964)

<!-- MC-39272-->

* 使用RESTPUT連結產品時，現在可在店面搜尋結果中如預期取得產品 `/V1/products/:sku/links` 當索引子模式設定為時的請求 **儲存時更新**.

<!-- MC-38310 magento/magento2#32693-->

* 現在，當索引器模式設定為時，目錄價格規則索引器會如預期般運作 **儲存時更新**. [GitHub-370](https://github.com/magento/partners-magento2ee/issues/370)

<!-- ENGCOM-8890-->

* 刪除不包含產品的已停用類別現在對目錄搜尋和類別平面索引表格沒有影響。 以前，刪除非使用中類別會觸發完整重新索引。 [GitHub-23297](https://github.com/magento/magento2/issues/23297)

<!-- ENGCOM-8599 8474-->

* 自訂索引子現在可以為訂閱使用不同的實體欄名稱。 以前，資料庫觸發程式使用索引器上次設定為的欄名稱 **依排程更新** 而不是指定的索引子。 [GitHub-21853](https://github.com/magento/magento2/issues/21853)

<!-- ENGCOM-8887-->

* 應用程式不再傳送AJAX請求以重新載入客戶資料區段(`Magento_Customer/js/section-config`)，不會受到請求的影響。 [GitHub-31948](https://github.com/magento/magento2/issues/31948)

<!-- MC-39569-->

* 在類別中新增、移除或重新排序產品後，下列索引子不再失效： `catalog_category_product` 和 `catalogsearch_fulltext` （及其相依專案）。 以前，這些不慎移除會觸發網站的完整重新索引。 現在當未啟用平面目錄時，在這些情況下會防止完全重新索引。

### 基礎架構

<!-- MC-41445-->

* 相依性 `pelago/emogrifier` 已從3.1.0版更新至5.0.0版。此更新導致對引入不相容的回溯變更 `Magento\Email\Model\Template\Filter` 類別。 已變更的程式碼會在電子郵件範本轉譯期間執行。 另請參閱 [BIC參考](https://developer.adobe.com/commerce/php/development/backward-incompatible-changes/reference/).

<!-- MC-42212-->

* 已修正的問題 `\Magento\CatalogInventory\Model\Indexer\Stock\CacheCleaner::getCategoryIdsByProductIds` 因此無法儲存新產品。

<!-- MC-42199-->

* 已遭取代的TinyMCE v3程式庫已移除。 此 `Magento_Tinymce3Banner` 與TinyMCE v3.x相關的模組和MFTF測試已從Adobe Commerce中移除。

<!-- MC-41497-->

* 應用程式不再擲回 `Invalid header value detected` 當購物者輸入包含法語變音標籤（例如「é」、「e」）的電子郵件地址時，「聯絡我們」表單出現錯誤。 應用程式現在會將使用者名稱中的UTF-8字母轉換為ASCII編碼。 之前，UTF-8字母在電子郵件地址的唯一區段中無法轉換為ASCII編碼。

<!-- MC-39947-->

* 將外掛程式新增到父類別時，應用程式不再擲回PHP嚴重錯誤。 [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-9012-->

* 更新這些模組的README.md檔案： `Magento_Msrp`， `Magento_MsrpConfigurableProduct`， `Magento_MsrpGroupedProduct`， `Magento_Multishipping`， `Magento_MysqlMq`. [GitHub-32577](https://github.com/magento/magento2/issues/32577)

<!-- magento/partners-magento2ee#501-->

* `phpcpd` 已更新至v6.0.3以符合PHP 8。

<!-- ENGCOM-9073-->

* `ramsey/uuid` 已更新，以與PHP 8.0相容。 [GitHub-31777](https://github.com/magento/magento2/issues/31777)， [GitHub-826](https://github.com/magento/magento2-functional-testing-framework/issues/826)

<!-- ENGCOM-8997-->

* `colinmollenhour/php-redis-session-abstract` 已更新至v1.4.4，以符合PHP 8。 [GitHub-32709](https://github.com/magento/magento2/issues/32709)

<!-- ENGCOM-8527-->

* 修正「 」中無效索引標籤和空格組合 `phpstan.neon` 檔案。 [GitHub-31239](https://github.com/magento/magento2/issues/31239)

<!-- ENGCOM-8668-->

* 已移除過時屬性的使用 `$_isScopePrivate` 整個程式碼庫。 [GitHub-30506](https://github.com/magento/magento2/issues/30506)

<!-- ENGCOM-8551-->

* 頁面版面配置在中不再使用硬式編碼  `Magento\Widget\Block\Adminhtml\Widget\Instance\Edit\Chooser\Container`.  因此， `getPageLayouts()` 函式現在會依預期傳回不同模組宣告的實際版面配置清單。 以前只傳回硬式編碼版面。 [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8509-->

* 此 `composer.lock` 檔案已更新至編碼標準的最新版本。 [GitHub-31152](https://github.com/magento/magento2/issues/31152)

<!-- ENGCOM-9015 -->

* 已新增「 」上缺少的相依性 `web-token/jwt-framework` 封裝到 `magento/module-jwt-framework-adapter`. [GitHub-32578](https://github.com/magento/magento2/issues/32578)

<!-- ENGCOM-9019 -->

* 被動接聽程式已新增至 `fotorama.js` 資料庫以改善Lighthouse量度分數。 [GitHub-31140](https://github.com/magento/magento2/issues/31140)

<!-- ENGCOM-9014 -->

* 更新Google Analytics模組的README.md檔案。 [GitHub-32616](https://github.com/magento/magento2/issues/32616)

<!-- ENGCOM-8375 -->

* Process Manager現在可以在取用的流程中正確處理例外。 主程式現在結束，應用程式現在只顯示一次錯誤訊息。 此外，分支處理序的例外狀況現在會在主處理序中擲回時處理。 以前，應用程式會記錄多個索引器失敗，並顯示多個錯誤訊息。  [GitHub-30622](https://github.com/magento/magento2/issues/30622)

<!-- ENGCOM-8544 -->

* 將外掛程式新增到父類別時，應用程式不再擲回錯誤。 (此 `optionsProvider` 引數現在於以下時間後宣告： `getContentIdentities` 在 `Assest.php`.) 之前，應用程式擲回此錯誤：  `Error: Cannot instantiate interface Magento\Framework\Data\OptionSourceInterface`. [GitHub-31291](https://github.com/magento/magento2/issues/31291)

<!-- ENGCOM-8549 -->

* 執行中 `Magento\Framework\Filesystem\Io\Ftp::ls()` 在空白資料夾上，現在會如預期傳回空白陣列。 之前，應用程式擲回此例外狀況： `Invalid argument supplied for foreach() in vendor/magento/framework/Filesystem/Io/Ftp.php…`. [GitHub-31288](https://github.com/magento/magento2/issues/31288)

<!-- ENGCOM-8791 -->

* 此 `update` 「角色」和「規則」的方法在中已標籤為已棄用 `app/code/Magento/Authorization/Model/Role.php`. [GitHub-30756](https://github.com/magento/magento2/issues/30756)

<!-- ENGCOM-8946 -->

* 已更正SameSite Cookie引數的串連。 之前，不正確的串連會附加 `lex` 尾碼為 `value`， `domain`和其他引數。 [GitHub-26377](https://github.com/magento/magento2/issues/26377)， [GitHub-32440](https://github.com/magento/magento2/issues/32440)

<!-- ENGCOM-8698 ENGCOM-9034 -->

* `allure-framework/allure-phpunit` 已升級至整個程式碼庫的v1.3.1。 之前，應用程式會顯示此錯誤：  `Warning: Use of undefined constant GLOB_BRACE - assumed 'GLOB_BRACE' (this will throw an Error in a future version of PHP) in /var/www/html/src/vendor/allure-framework/allure-phpunit/src/Yandex/Allure/Adapter/AllureAdapter.php:74.` [GitHub-24635](https://github.com/magento/magento2/issues/24635)

<!-- ENGCOM-8783 -->

* 應用程式現在會在發生錯誤時顯示更多資訊錯誤 `bin/magento` 命令在生產模式中。 以前，應用程式未顯示錯誤訊息，或顯示的訊息缺少資訊。 [GitHub-32786](https://github.com/magento/magento2/issues/32786)

<!-- ENGCOM-8953 -->

* 此 `ArrayIterator` PHP物件已更新，可如預期般搭配PHP 7.4使用。 [GitHub-32088](https://github.com/magento/magento2/issues/32088)

<!-- ENGCOM-8469 -->

* 當沒有可用的出貨承運商時，當客戶嘗試完成訂單時，應用程式不會再擲回錯誤。 而是顯示結帳頁面及此訊息： `Sorry, no quotes are available for this order at this time`. 之前，應用程式會顯示空白的結帳頁面，並將此訊息記錄在例外記錄中： `array_keys() expects parameter 1 to be array, null given`. [GitHub-30830](https://github.com/magento/magento2/issues/30830)

<!-- ENGCOM-8557 -->

* 應用程式不再將每個Cookie記錄為個別的內容。 此 `$_COOKIE` 陣列也已轉換為字串。 先前，由於每個Cookie都記錄為個別的內容，因此當Cookie數量超過50時，應用程式會記錄此訊息： `Unable to send the cookie. Maximum number of cookies would be exceeded`. [GitHub-31334](https://github.com/magento/magento2/issues/31334)

### 發票

<!-- ENGCOM-8472 -->

* 在Admin中建立新發票時， **電子郵件副本：** 核取方塊現在如預期般運作。 以前，如果在中啟用了傳送發票電子郵件的全域設定，則會忽略核取方塊 **銷售電子郵件**. 它現在是一致的，而且運作方式與出貨和銷退折讓單建立頁面相同。 [GitHub-28511](https://github.com/magento/magento2/issues/28511)

### 媒體集

<!-- MC-41728-->

* `bin/magento media-gallery:sync` 現在處理缺少XMP資訊的PNG影像時，會如預期般失敗。

<!-- ENGCOM-8814-->

* 中的專案 `catalog_product_entity_media_gallery` 刪除相關產品時，表格會如預期移除。 [GitHub-17727](https://github.com/magento/magento2/issues/17727)

<!-- ENGCOM-8945-->

* 啟用JavaScript縮制後，媒體集中的影像詳細資料現在可以更新。 以前，不會儲存影像詳細資料，應用程式會顯示此錯誤： `TypeError: Cannot read property 'call' of undefined in jquery.validate`. [GitHub-31633](https://github.com/magento/magento2/issues/31633)

### MFTF

新功能及MFTF核心錯誤修正的說明請參閱 [功能測試框架變更記錄檔](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md).

<!-- ENGCOM-8496-->

* 此 `magento indexer:reindex` 和 `cache:flush` 命令和 `AdminReindexAndFlushCache` 動作群組已從測試中移除，以改善下列模組的執行： `Bundle`， `Catalog`， `CatalogRule`， `CatalogRuleConfigurable`， `CatalogUrlRewrite`， `Downloadable`， `Indexer`， `Paypal`、和 `Sales`. [GitHub-31031](https://github.com/magento/magento2/issues/31031)

<!-- ENGCOM-8562-->

* `AdminSubmitCategoriesPopupActionGroup` 已新增至測試，以防止測試失敗。 [GitHub-31251](https://github.com/magento/magento2/issues/31251)

<!-- ENGCOM-8562-->

* 測試已重構為 `StorefrontCheckQuickSearchStringActionGroup` 和 `StorefrontAssertProductNameOnProductMainPageActionGroup` （現有的動作群組）。 [GitHub-31251](https://github.com/magento/magento2/issues/31251)

#### 重構測試

已重構以下測試以改進執行時間：

`AddOutOfStockProductToCompareListTest`  <!-- ENGCOM-8547-->

`AdminApplyTierPriceToProductWithPercentageDiscountTest` <!-- ENGCOM-8522-->

`AdminCheckingCreditMemoTotalsTest` <!-- ENGCOM-8606-->

`AdminCheckDashboardWithChartsTest` <!-- ENGCOM-8897-->

`AdminConfigDefaultProductLayoutFromConfigurationSettingTest`  <!-- ENGCOM-8891-->

`AdminCreateInvoiceTest` <!-- ENGCOM-8581-->

`AdminCreateOrderAddProductCheckboxTest` <!-- ENGCOM-8492-->

`AdminMassOrdersCancelCompleteAndClosedTest` <!-- ENGCOM-8538-->

`AdminMassOrdersCancelProcessingAndClosedTest`  <!-- ENGCOM-8670-->

`AdminMassOrdersHoldOnCompleteTest`  <!-- ENGCOM-8897-->

`AdminMassOrdersHoldOnPendingAndProcessingTest`  (取代已棄用的 `AdminMassOrdersHoldOnPendingAndProcessingTest`) <!-- ENGCOM-8669-->

`AdminMassOrdersUpdateCancelPendingOrderTest` <!-- ENGCOM-8602-->

`AdminMassProductPriceUpdateTest` <!-- ENGCOM-8587-->

`AdminMassUpdateProductAttributesMissingRequiredFieldTest` <!-- ENGCOM-8511-->

`AdminOrdersReleaseInUnholdStatusTest`  <!-- ENGCOM-8592—-->

`AdminPanelIsFrozenIfStorefrontIsOpenedViaCustomerViewTest`  <!-- ENGCOM-8601-->

`AdminSortingByWebsitesTest`  <!-- ENGCOM-8583-->

`AdminUpdateSimpleProduct` <!-- ENGCOM-8536-->

`AdminUpdateSimpleProductWithRegularPriceInStockEnabledFlatTest`  <!-- ENGCOM-8533-->

`AdminValidateShippingTrackingNumberTest`  <!-- ENGCOM-8593-->

`CancelOrdersInOrderSalesReportTest`  <!-- ENGCOM-8591-->

`ProductsQtyReturnAfterOrderCancelTest` <!-- ENGCOM-8506-->

`StorefrontConfigurableProductBasicInfoTest`  <!-- ENGCOM-8711-->

#### 動作群組

下列測試中的重複動作已由動作群組取代：

`AdminCheckConfigurableProductPriceWithDisabledChildProductTest`  <!-- ENGCOM-8574-->

`AdminConfigurableProductCreateTest` <!-- ENGCOM-9013-->

`AdminConfigurableProductRemoveAnOptionTest` <!-- ENGCOM-9038-->

`AdminCreateProductDuplicateUrlkeyTest` <!-- ENGCOM-9007-->

`AdminCreateSimpleProductNegativePriceTest` <!-- ENGCOM-900-->

`AdminCreateSimpleProductZeroPriceTest`  <!-- ENGCOM-9040-->

`AdminCreateVirtualProductFillingRequiredFieldsOnlyTest` <!-- ENGCOM-9003-->

`AdminUpdateSimpleProductWithRegularPriceInStockDisabledProductTest` <!-- ENGCOM-9002-->

`AdminUpdateSimpleProductWithRegularPriceInStockNotVisibleIndividuallyTest`  <!-- ENGCOM-9011-->

`AdminUpdateSimpleProductWithRegularPriceInStockVisibleInCatalogOnlyTest`  <!-- ENGCOM-9041-->

#### 新動作群組

`AdminClearFiltersOnGridActionGroup` <!-- ENGCOM-8604-->

`AdminClickAddNewPageOnPagesGridActionGroup`  <!-- ENGCOM-8613-->

`AdminClickInsertWidgetActionGroup` <!-- ENGCOM-8614-->

`AdminClickRefundOfflineOnNewMemoPageActionGroup` <!-- ENGCOM-8580-->

`AdminFillAccountInformationOnCreateOrderPageActionGroup` <!-- ENGCOM-8495-->

`AdminGoToOrderStatusPageActionGroup`  <!-- ENGCOM-8615-->

`AdminOpenCMSPagesGridActionGroup`<!-- ENGCOM-8682-->

`AdminSelectAttributeSetOnEditProductPageActionGroup` <!-- ENGCOM-8566-->

`AssertAdminProductIsAssignedToCategoryActionGroup`  (以SKU取代篩選產品格線並按一下第一列（以減少測試執行時間） <!-- ENGCOM-8535 8534-->

`AssertLinkActionGroup` <!-- ENGCOM-8457-->

`AssertStorefrontCartDiscountActionGroup` <!-- ENGCOM-8431-->

`ClickPlaceOrderActionGroup` <!-- ENGCOM-8671-->

`SaveCmsPageActionGroup` <!-- ENGCOM-8683-->

`StorefrontAssertProductNameIsNotOnProductMainPageActionGroup` <!-- ENGCOM-8562-->

`StorefrontGuestCheckoutProceedToPaymentStepActionGroup` <!-- ENGCOM-8582-->

`StorefrontHoverProductOnCategoryPageActionGroup` <!-- ENGCOM-8575-->

`StorefrontSelectCustomizeAndAddToTheCartButtonActionGroup` <!-- ENGCOM-8573-->

#### 已刪除動作群組

<!-- ENGCOM-8525 8558 8608 8546 8695 8889 8681 8627 8714-->

* 已移除  `CliIndexerReindexActionGroup` （或已變更的值）來改善的執行時間 `Backend`， `Bundle`， `BundleImportExport`， `Catalog`， `CatalogRule`， `CatalogSearch`， `Checkout`， `Downloadable`，  `Elasticsearch`，  `Elasticsearch6`，  `Indexer`， `LayeredNavigation`，  `LoginAsCustomer`，  `Newsletter`， `Sales`， `SalesRule`， `Search`， `Store`，  `Swatches`， `UrlRewrite`， `Weee`、和 `Wishlist`模組。

<!-- ENGCOM-8893 8951 8893 9001 8715 8724 8721 8843-->

* 已移除 `CliCacheFlushActionGroup` 從 `Catalog`， `CatalogUrlRewrite`， `Checkout`， `Config`， `ConfigurableProduct`，`Contact`， `Cookie`， `CurrencySymbol`， `Customer`， `Downloadable`， `Elasticsearch`， `Elasticsearch6`， `Fedex`， `Indexer`， `LayeredNavigation`，`LoginAsCustomer`， `Msrp`， `Multishipping`， `Sales`， `Swatches`， `Translation`， `UrlRewrite`， `Vault`， `Weee`、和 `Wishlist` 模組。

### 電子報

<!-- ENGCOM-8948 MC-40885-->

* 應用程式不會再傳送電子報電子郵件給已在電子報佇列建立和傳送電子報之間期間取消訂閱電子報的客戶。 [GitHub-32116](https://github.com/magento/magento2/issues/32116)

<!-- ENGCOM-8675-->

* 應用程式現在會遵循Newsletter啟用設定(**商店**  >  **設定**  >  **設定**  >  **客戶**  >  **電子報**  >  **一般選項**)。 以前，這些設定一律會從多存放區部署的預設範圍中擷取。 [GitHub-31188](https://github.com/magento/magento2/issues/31188)

<!-- ENGCOM-8551-->

* REST呼叫GET `/V1/customers/search` 現在會傳回訂閱多份電子報的客戶的正確資訊。 [GitHub-31168](https://github.com/magento/magento2/issues/31168)

<!-- ENGCOM-8817-->

* 快取訂閱狀態已從Newsletter外掛程式移除。 [GitHub-19345](https://github.com/magento/magento2/issues/19345)

### 訂購

<!-- MC-40963-->

* 針對部份開立商業發票的訂單，應用模組現在會正確計算已開立商業發票的客戶餘額，並將商店信用傳回客戶帳戶。

<!-- ENGCOM-8710-->

* 應用程式現在會在儲存已退款的客戶餘額時，如預期儲存已修改的訂單。 [GitHub-393](https://github.com/magento/partners-magento2ee/issues/393)

### 付款方法

<!-- MC-41525-->

* 應用程式現在於轉譯付款區塊 `frontend` 無論電子郵件的傳送來源區域為何。 (目前區域現在模擬為 `frontend` 支付區塊轉譯之前。) 以前，付款區塊會在傳送電子郵件的區域中轉譯。 因此，無論銷售電子郵件是由管理員或REST API觸發，資產的URL都會嘗試從錯誤的區域載入它們(`webapi_rest` 或 `adminhtml`)。

<!-- MC-40810-->

* 應用程式現在會將可下載產品的連結傳送至結帳時指定的電子郵件地址。 先前，當訪客購物者使用PayPal Express Checkout並輸入不同的電子郵件地址來提交訂單和結帳時，應用程式會將可下載的產品連結傳送到第一個地址。

<!-- MC-38051-->

* 在支援多種貨幣的建置中，應用模組現在會在「付款方式」頁面上，顯示可用商店點數的精確值。

<!-- MC-37820-->

* 當訪客購物者在結帳期間將訂單的運送地址變更為不同的國家/地區時，付款方法清單現在會如預期更新。 以往，變更帳單地址不會觸發可能付款方式的更新。

#### PayPal

<!-- MC-39895-->

* 購物者現在可以成功結帳PayPal Payflow Pro訂單，該訂單的運送地址包含特殊字元。 之前，應用程式會拒絕這些訂單的付款。

<!-- MC-39861-->

* 使用PayPal成功付款後，購物者現在會重新導向回訂購成功頁面。 以前，購物者會因為工作階段資料遺失而重新導向至空白頁面。

### 效能

<!-- MC-41647-->

* 已改善大型目錄上的管理員SKU搜尋效能。 查詢最佳化工具提示現在會在查詢執行期間強制使用索引。

<!-- MC-41440-->

* 的效能  `catalog_product_alert` 改善在大型表格（數百萬列）上執行時的cron程式。 先前， `catalog_product_alert` 已載入所有產品警示，而造成記憶體不足的例外狀況。

<!-- ENGCOM-8752-->

* 當僅需要一個編輯頁面來呈現Admin表單時，應用程式不再載入所有CMS頁面。  這些頁面現在載入更快。 [GitHub-30936](https://github.com/magento/magento2/issues/30936)

<!-- ENGCOM-8510-->

* 中的數值 `WHERE IN` 運算式現在會轉型為數字，而非字串，以改進某些MariaDB版本中的查詢效能。 [GitHub-31135](https://github.com/magento/magento2/issues/31135)

* 此 `use_application_lock` 模式可讓您透過使用環境變數或透過設定 `app/etc/env.php` 檔案。 啟用此模式後，您就不需要在失敗後手動重設索引器。 若未啟用此模式，您必須在失敗後手動重設索引子。 另請參閱 [使用應用程式鎖定模式重新索引處理序](https://developer.adobe.com/commerce/php/development/components/indexing/#using-application-lock-mode-for-reindex-processes).

### 定價

<!-- MC-41767-->

* 當購物者更新店面的產品數量時，應用程式現在會以分組價格正確更新產品的價格。 [GitHub-32669](https://github.com/magento/magento2/issues/32669)

<!-- MC-39282-->

* 現在當產品已指派層級價格且 `Magento\Framework\Api\ExtensibleDataObjectConverter` 用於轉換產品資料。 先前，當 `Magento\Framework\Api\ExtensibleDataObjectConverter` 當儲存產品時，用來將產品資料轉換為陣列，應用程式未儲存產品，並顯示此錯誤： `Notice: Undefined index: price in app/code/Magento/Catalog/Model/Product/Type/Price.php on line 382.`

<!-- MC-36811-->

* 排定的價格更新現在套用至購物車中的產品。 [GitHub-356](https://github.com/magento/partners-magento2ee/issues/356)

<!-- MC-24693-->

* 當啟用數量增加且小數點存貨小於1時，層級價格現在會依預期套用至產品。 之前，最小層級價格數量設為1。

### 產品影片

<!-- MC-39755-->

* 您現在可以使用 **新增視訊** 按鈕（管理員） **目錄** > **產品**)以連續新增多個影片。 以前，視訊欄位會保留上一個視訊的詳細資訊。

<!-- MC-40817-->

* 在產品頁面上進入產品視訊的全熒幕模式，現在可在行動裝置上如預期般運作。 之前，進入全熒幕模式會導致視訊在結束全熒幕模式之前暫停。

<!-- MC-39759-->

* 導覽箭頭按鈕(**下一個** 和 **前一個**)現在會如預期顯示在店面產品影片中。

<!-- MC-40463-->

* 商戶現在可以使用新增Vimeo影片 **插入視訊** 按鈕時，才會顯示這個訊息。 以前，應用程式顯示404錯誤。 [GitHub-31753](https://github.com/magento/magento2/issues/31753)

### 引用

<!-- MC-39531-->

* 此 `/V1/guest-carts/examplecartid/items` 呼叫現在會傳回要求的存放區檢視。 之前，它會傳回存放區中的第一個存放區檢視，而非要求的檢視。

<!-- MC-33893 ENGCOM-8992-->

* 現在可以設定發票傳送。 以前，無法設定發票傳送，且應用模組一律會在發票建立後傳送發票。 發票和訂單電子郵件都在一個觀察者的範圍內傳送。 獨立的觀察者現在控管訂單電子郵件和發票電子郵件的傳送。 [GitHub-27656](https://github.com/magento/magento2/issues/27656)

### 報表

<!-- MC-39737-->

* 上次於Admin檢閱的日期 **報表** > **評論** > **依產品** 現在會顯示正確的稽核日期。 以前，應用程式顯示的是產品建立日期，而不是稽核日期。

### 評論

<!-- MC-40116-->

* 現在，在「我的帳戶」頁面的「評論詳細資訊」區段中，可以正確計算產品評論評等星級。

<!-- MC-39763-->

* 產品評論詳細資訊頁面的平均產品評等和產品評等區段現在可正確呈現。 先前，應用程式計算店面評等時，稽核ID並未設定，產品稽核範本亦未正確呈現。

<!-- MC-36149-->

* 此 **成為第一個檢閱此產品的使用者** 在管理員核准稽核後，連結現在會依預期變更為稽核計數。

<!-- ENGCOM-8501 MC-30270-->

* 管理員現在可以在產品編輯頁面的「產品評論」區段，依預期排序產品評論。 [GitHub-30270](https://github.com/magento/magento2/issues/30270)

<!-- MC-41003  magento/magento2#32259-->

* 現在，在管理員核准並儲存來自與存放區不同的網域的稽核後，使用正確的存放區ID來儲存稽核。 [GitHub-17510](https://github.com/magento/magento2/issues/17510)

### 獎勵

<!-- MC-39820-->

* 當購物者使用多個地址結帳時，應用程式現在會更新付款方式清單，方法是檢查或取消檢查 **商店積分（獎勵積分）** 選項。

### 銷售

<!-- MC-39796-->

* 管理員使用者現在可以在以下情況下為無庫存專案下訂單： **允許延期交貨** 設定已啟用(**商店** > **設定** > **目錄** > **詳細目錄** > **產品庫存選項**)。 之前，應用程式擲回錯誤。

<!-- MC-42280-->

* 當購物者的姓氏以空白結尾時，購物者現在可以在「訂購與退貨」頁面上找到訂單。

<!-- MC-41438-->

* 現在，當指定100%折扣的購物車價格規則套用至同樣受目錄產品與折扣稅約束且符合免費出貨資格的訂單時，會以正確的總計建立商業發票。 以前，訂單價格正確，但商業發票不正確。 [GitHub-30853](https://github.com/magento/magento2/issues/30853)

<!-- MC-40384-->

* 依日期篩選訂單現在會傳回準確的結果。 以前，當您按訂單日期篩選訂單時，應用程式不會傳回在00:00 UTC之後所下的訂單。

<!-- MC-40030-->

* 當發生下列情況時，銷退折讓單格現在會顯示正確的貨幣符號 **網站** 範圍用於 **價格** 多存放區部署中的屬性。

<!-- MC-40013-->

* 重新載入「管理員建立新訂單」頁面後，結帳工作流程的「付款與運送資訊」區段上的付款方法選項按鈕不再消失。 [GitHub-32106](https://github.com/magento/magento2/issues/32106)

<!-- MC-39891-->

* 阿拉伯文字現在可在發票中正確顯示。

<!-- MC-39864-->

* 應用模組現在會正確計算以部署PayPal Payment Pro作為付款閘道之商店中訂單或商業發票為基準之銷退折讓單的部分銷退折讓單稅捐總計。 以前，對於具有多個商業發票的訂單，應用模組會沖銷該訂單的全部稅捐，以取消銷退折讓單中的部份商業發票。

<!-- MC-39521 ENGCOM-8528-->

* 當傳送新訂單電子郵件給客戶時，應用程式不再建立隨機資料庫死結。 以前，發生死鎖是因為應用程式儲存了整個物件及其相關物件，而不是更新的SQL資料行。 應用程式會顯示這種型別的錯誤： `SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock; try restarting transaction`. [GitHub-31090](https://github.com/magento/magento2/issues/31090)

<!-- MC-39353-->

* 店面「訂單明細」頁面現在會顯示正確的出貨產品數量。 以前，產品數量不正確，因為已轉譯「訂單出貨」頁面的範本 **出貨數量** as a `int`. 此專案已變更為 `float`.

<!-- MC-39026-->

* 當發生下列情況時，應用模組不會再以電子郵件傳送訂單發票的復本： **以電子郵件傳送發票復本** 按鈕已取消勾選。 以前，應用程式傳送電子郵件給 **客戶** 和 **傳送發票電子郵件副本至**. [GitHub-28511](https://github.com/magento/magento2/issues/28511)

<!-- MC-38973-->

* 從「管理員」為現有客戶建立新訂單時，應用模組不會再建立客戶帳戶的重複地址專案。 此 **儲存在通訊錄中** 核取方塊已重新命名為 **新增至通訊錄** 和，現在預設為在Admin中取消勾選。

<!-- MC-38834-->

* 應用程式現在會使用已上傳至 **HTML列印檢視的標誌** 購物者從帳戶列印訂單時的設定。 以前，應用程式顯示LUMA標誌，而不是上傳的標誌。

<!-- MC-38625-->

* 當專案計數超過20時，店面上的訂單專案傳呼機現在會如預期般運作。 以前，傳呼機會考慮子產品，因此總計數不正確。

<!-- MC-23915 ENGCOM-8713-->

* 應用程式現在會在「訂單」頁面與「銷退折讓單」頁面網格上，針對小計與出貨與處理值顯示正確的貨幣符號。 [GitHub-22662](https://github.com/magento/magento2/issues/22662)

<!-- ENGCOM-8486-->

* 使用Safari的管理員現在可以從管理員成功將產品新增至訂單。 之前，當管理員按一下 **將選取的產品新增至訂單** 按鈕，應用程式會顯示旋轉的載入圖示，頁面隨即掛起。

### 銷售規則

<!-- MC-40671-->

* 應用程式現在透過套用購物車價格規則 **最大數量折扣套用至** 或 **折扣數量步驟（購買X）** 將多個購物車價格規則套用至購物車時條件正確。 先前，如果購物車價格規則包含 **最大數量折扣套用至** 或 **折扣數量步驟（購買X）** 已在另一個購物車價格規則之後套用，總折扣已減少到設定的值 **最大數量折扣套用至** 或 **折扣數量步驟（購買X）** 乘以產品價格。

<!-- MC-39827-->

* 抵用券報表現在可正確反映實作分割資料庫的部署中的抵用券活動。

<!-- MC-39477-->

* 包含條件「類別」的購物車價格規則 **不是** 現在會依預期套用至未指派給類別、但已指派其父項產品的可設定子項/簡單產品。

<!-- MC-39034-->

* GraphQL `cart` 現在，當優惠券套用至訂單時，查詢會傳回購物車帳單步驟的正確總計。

### 搜尋 {#search-heading}

<!-- MC-41138-->

* 類別頁面不再包含這些重複的HTML元素ID： `modes-label`， `mode-list`， `toolbar-amount`， `sorter`， `limiter`.

<!-- MC-40981-->

* 部分字詞搜尋結果不再包含非預期或不相關的相符專案，搜尋可在店面和管理員上產生一致的結果。 應用程式現在會使用不同的分析器（不含詞幹分析器）進行部分字詞搜尋。 以前，搜尋結果會顯示不含搜尋關鍵字的產品。 （預設分析器先前包含字乾分析器，而且由於在搜尋時間用於部分字詞搜尋，因此搜尋結果可能會產生非預期或不相關的相符專案。）

<!-- MC-40715-->

* 如果搜尋查詢包含多個字詞，且產品名稱設定為無法搜尋，則快速搜尋現在會傳回結果。 先前，如果產品名稱設定為無法搜尋，應用程式會對包含多個字詞的搜尋查詢擲回查詢例外狀況。

<!-- MC-40672-->

* 搜尋結果現在包含 `weight` 屬性設為「可搜尋」時，屬性會如預期般運作。

<!-- MC-40409-->

* 當您檢視啟用Elasticsearch的空白類別頁面時，應用程式不再擲回錯誤。 相反地，它會如預期般轉譯頁面，並顯示資訊訊息。 之前，空白的全文檢索索引會在類別頁面上觸發例外狀況。

<!-- MC-40376-->

* 如果購物者在開始搜尋後於搜尋欄位外按一下，搜尋欄位自動完成功能現在會如預期運作。 當購物者繼續輸入時，自動完成建議現在會重新出現。 以前，應用程式不會顯示自動完成建議，而且按一下搜尋方塊也不會使搜尋建議再次顯示（雖然輸入其他字母時會顯示出來）。

<!-- MC-34217-->

* 根據進階搜尋中的完整或部分SKU搜尋產品時，現在會傳回預期的產品。

<!-- MC-31395-->

* 階層導覽篩選器現在會顯示精確的產品計數。 先前，Elasticsearch中的產品計數值不會依目錄許可權篩選。

<!-- MC-23881 ENGCOM-8618-->

* 類別URL頁面引數超過分頁時，Elasticsearch不再擲回錯誤。 [GitHub-23843](https://github.com/magento/magento2/issues/23843)

<!-- MC-24033  magento/magento2#3274-->

* 您現在可以新增自訂Elasticsearch欄位對應程式至 `Magento\Elasticsearch\Model\Adapter\FieldMapper\Product\FieldProvider\FieldName\Resolver\CompositeResolver`.

<!-- ENGCOM-9029 MC-24026-->

* 開發人員現在可以變更Elasticsearch對應。 先前，在預設對應中傳送至Elasticsearch伺服器的動態範本會加上硬式編碼，如此可防止開發人員在Elasticsearch中索引任何與自訂模組相關的額外資料。

<!-- ENGCOM-8464 -->

* 停用搜尋建議時，搜尋欄位（表單小型搜尋）現在會如預期運作。

### 送貨

<!-- MC-41464-->

* 當購物者在結帳期間使用多個地址刪除產品後導覽回到購物車頁面時，應用程式現在會依預期更新運費。

<!-- MC-41343-->

* 當購物車中的某些專案符合免費送貨資格時，應用程式現在會顯示正確的調整後送貨價格。 先前，當購物車中的部分專案符合免運費資格時，應用程式不會調整運費並向購物者顯示完整運費。

<!-- MC-41186-->

* 僅限特定網站的管理員使用者現在可以為同一網站上所下的訂單建立出貨。 以前，當沒有預設商店檢視許可權的管理員使用者嘗試將訂單傳送到管理員使用者有權存取的商店檢視時，應用程式會擲回此例外狀況： `Notice: Undefined offset: 1 in /app/code/Magento/Catalog/Model/Product/Attribute/Backend/GroupPrice/AbstractGroupPrice.php on line 293`.

<!-- MC-41069-->

* 應用程式現在會在判斷訂單是否符合免費DHL送貨的條件時，考慮相關的購物車價格規則折扣。

<!-- MC-40702-->

* 以非基本貨幣下訂單時，出貨標籤現在會使用預期的基本貨幣，而非支援多種貨幣的商店的訂單貨幣。 [GitHub-31891](https://github.com/magento/magento2/issues/31891)

<!-- MC-40678-->

* 現在，當購物者導覽離開多重送貨頁面後在結帳期間返回購物車頁面時，應用程式會顯示正確的訂單小計。 [GitHub-31889](https://github.com/magento/magento2/issues/31889)

<!-- MC-40541 magento/magento2#31841 -->

* 在管理員訂單建立期間編輯帳單資訊，不再變更具有不同預設出貨與帳單地址之客戶的出貨資訊。 [GitHub-31786](https://github.com/magento/magento2/issues/31786)

<!-- MC-37385 ENGCOM-8578-->

* 應用程式不再取消勾選 **附加註解** 購物者點按時的核取方塊 **取得送貨方法與運費** 並從管理員建立訂單時選取送貨方法。

<!-- MC-36425-->

* 購物者現在可以使用「上一頁」瀏覽器按鈕，在結帳具有多個地址的訂單時返回「選取送貨方法」頁面。 之前，應用程式會顯示損毀的「選取送貨方法」頁面。 [GitHub-30268](https://github.com/magento/magento2/issues/30268)

<!-- MC-40021 ENGCOM-8983-->

* 當購物者變更「送貨地址」多地址頁面上的數量，並按一下瀏覽器的「上一步」按鈕後，產品數量現在會依預期維持不變。

<!-- ENGCOM-9096-->

* 結帳期間套用購物車價格規則時，統一費率送貨方法費用不再為零。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- ENGCOM-8537-->

* 當商戶嘗試使用DHL傳送訂單時，應用程式不再擲回錯誤。 **建立送貨標籤** 核取方塊已啟用，且產品名稱包含Unicode字元。 以前，應用程式在請求建立標籤時會顯示此錯誤： `The response is in wrong format`.

<!-- ENGCOM-8952 -->

* 您可以在多網站部署中成功向管理員下訂單，其中 `United States` 已在一個網站上啟用，並且`Disable all countries` 會啟用為其他網站上的預設範圍。 以前，應用程式不會下訂單並顯示此錯誤： `Please check the shipping address information. "regionId" is required. Enter and try again`.

### 儲存

<!-- MC-40538-->

* 應用程式不再將 `0` 當顯示商店首頁時作為空白值。 以前，應用程式將請求路徑開頭的整數值視為存放區ID，這對SEO產生非預期的影響。

<!-- MC-40313-->

* 外掛程式 `\Magento\Framework\App\ActionInterface` 在 `lib/internal/Magento/Framework/App/Action/Plugin` 已移除，以符合外掛程式應用於自訂另一個模組之某個模組的行為的建議。 [GitHub-28050](https://github.com/magento/magento2/issues/28050)

<!-- MC-24772-->

* 應用程式現在會在您嘗試選取時顯示此訊息 `Website` 預設值，當 `Store View` 會在網站建立期間停用： `Please enable your Store View before using this Web Site as Default`. 之前，網站當機，應用程式未顯示警報。

### 稅金

<!-- MC-39571-->

* 應用模組現在會在驗證最小訂單金額時考慮隱藏稅捐。

<!-- MC-38025 ENGCOM-8612-->

* 當購物者導覽回到其購物車並在將套件產品新增到購物車後繼續結帳時，應用程式現在會如預期顯示固定產品稅額(FPT)。 [GitHub-30250](https://github.com/magento/magento2/issues/30250)

<!-- MC-37657 magento/magento2#31850-->

* 應用程式現在會預先填入 **VAT編號** 管理員為現有客戶建立訂單時，「管理員」新訂單頁面的「地址資訊」區段之帳單與送貨地址皆有已儲存VAT編號的輸入欄位。 [GitHub-31846](https://github.com/magento/magento2/issues/31846)

<!-- ENGCOM-8617 magento-engcom/magento2ee#558-->

* 應用程式現在會顯示 **VAT編號** 欄位（位於客戶註冊頁面上），當 `customer/create_account/vat_frontend_visibility` 已啟用。

### 測試

<!-- MC-41393-->

* 測試環境已升級至Redis 6.0.12。

<!-- ENGCOM-8529-->

* 已移除 `CacheCleaner::cleanAll();` 來自整合測試。

<!-- ENGCOM-8898-->

* 針對此案例新增測試：當客戶訂閱佇列的Newsletter時，管理員使用者可以編輯客戶帳戶。

<!-- ENGCOM-8484-->

* 已移除 `cache:flush` 測試命令，以縮短執行時間 `Catalog`， `CatalogUrlRewrite`、和 `LoginAsCustomer` 模組。

<!-- ENGCOM-8499-->

* 已移除多餘引數，並將POST變更為中需要的GET `\Magento\Logging\Model\ProcessorTest::testLoggingProcessorLogsActionShipping`.

### 主題

<!-- MC-41474-->

* 客戶登入頁面於以下情況不再顯示此訊息： **將JS程式碼移至頁面底部** 設定(**儲存** > **設定** > **前進** > **開發人員** > **JavaScript設定**)和Cookie皆已啟用： `The store will not work correctly in the case when cookies are disabled`.

<!-- MC-40982-->

* 標題中的帳戶連結現在遵循WCAG標準。 先前，標題中的帳戶連結包含重複的ID，導致WCAG驗證失敗。

<!-- MC-40278-->

* 應用程式現在會優先處理商店標誌影像的商店設定，而非版面配置。 之前，標誌影像的大小是固定的，不會因商店而異。

<!-- MC-35227-->

* 應用程式現在會在使用標準Magento Open Source主題的店面頁面上顯示一致的頁面元素。 之前，並非所有樣式都會套用至空白主題，因此並非所有頁面元素都會顯示在使用此主題的頁面中。 （例如，「我的訂單」頁面搜尋欄位中未出現放大鏡圖示。）

### 翻譯與地區設定

<!-- MC-23553-->

* 設定內嵌轉譯時，新增至字串的方括弧不再逸出。 先前， `escapeHtmlAttr` 方法會將方括弧轉換為HTML實體程式碼。

<!-- ENGCOM-8694-->

* 管理員中無法翻譯的片語現在可翻譯。 （此提取請求有助於持續努力將所有管理員字串都轉換為當地語系化。） [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8584-->

* 範本中用來管理儲存之付款方法的文字字串(**我的帳戶**  >  **儲存的付款方法** )現在可翻譯。

<!-- MC-30798 ENGCOM-8717-->

* 從管理員傳送的訂購電子郵件現在使用商店地區設定，而不是與管理員帳戶關聯的地區設定。

### UI

<!-- MC-41784-->

* 管理員頁尾現在顯示正確的產品版本。

<!-- MC-41067-->

* 來源的分頁現在會在管理員出貨建立期間如預期般顯示。

<!-- MC-40240-->

* 現在當您使用自訂日期屬性來篩選產品，而且管理員使用者地區設定為，產品格線篩選器會正確運作 `en_GB`.

<!-- MC-39279-->

* 捏合以縮放的手勢現在可在iOS裝置上的產品頁面影像中心放大鏡中如預期運作。

<!-- MC-38787-->

* Admin產品格線搜尋結果的分頁現在會依預期從每個搜尋的第1頁開始。

<!-- MC-38423-->

* 已解決縮放時顯示購物車的異常。 以前，縮放此頁面時，顯示元素會重疊。

<!-- MC-38226-->

* 使用PayPal Express結帳時顯示的訂單稽核頁面現在已成功載入。 以前，範本包含未使用的 **更新傳送方法** 按鈕，在頁面轉譯期間指令碼只會部分隱藏。

<!-- MC-37941-->

* 當有冗長的評等名稱時，產品頁面「客戶評論」區段中的評等星級和評論文字現在會有適當的間距。

<!-- MC-37688-->

* 現在，選項會如預期在「存檔商業發票」、「出貨」及「銷退折讓單」頁面的「作業」下拉式清單中顯示。

<!-- MC-23729  magento/magento2#31549-->

* 應用程式現在會顯示正確的時間值，當 `datetime` 元件 `timeOnly` 選項已設為 **是**. [GitHub-23157](https://github.com/magento/magento2/issues/23157)

<!-- ENGCOM-8514 -->

* 您現在可以在Admin上建立新Widget後移除版面配置更新 **內容** > **Widget**.  [GitHub-29936](https://github.com/magento/magento2/issues/29936)

<!-- ENGCOM-8502 MC-35716-->

* 此 **移除版面配置更新** 按鈕現在可在您從「管理員」新增的任何版面配置上按預期運作 **內容** > **Widget**. 之前，新增多個版面時，此按鈕無法用於第一個選取的版面以外的任何版面。 [GitHub-30286](https://github.com/magento/magento2/issues/30286)

<!-- ENGCOM-8524 -->

* 應用程式現在會使用在版面配置檔案中設定的頁面標題，作為客戶帳戶編輯檔案的瀏覽器頁面標題。 先前， `Magento\Customer\Controller\Account\Edit` 控制器動作強制頁面標題值為 `Account Information`. [GitHub-30724](https://github.com/magento/magento2/issues/30724)

<!-- ENGCOM-8896 8826-->

* 這些頁面已新增核取方塊，允許商家在顯示和隱藏密碼之間切換：
   * 客戶登入
   * 客戶註冊
   * 客戶編輯（「變更密碼」區段）
   * 客戶設定新密碼 [GitHub-31557](https://github.com/magento/magento2/issues/31557)

<!-- ENGCOM-8545 -->

* 移除管理員在變更屬性集後將產品新增至分組產品集時出現的網格儲存格中多餘標頭。 [GitHub-30911](https://github.com/magento/magento2/issues/30911)

<!-- ENGCOM-8895 -->

* 應用程式現在會顯示 `DateRange` 在的登入區域上篩選 **客戶**  >  **登入** 頁面。 之前，應用程式會顯示 `Text` 篩選。 [GitHub-30328](https://github.com/magento/magento2/issues/30328)

<!-- ENGCOM-9009 -->

* 已從範本檔案中移除JavaScript，並將其移至個別檔案中，以減少管理員頁面上的轉譯問題。 之前，在已啟用HTML縮制的部署中，管理員頁面無法正確呈現。 應用程式顯示這個錯誤： `An error has happened during application run. See exception log for details`. [GitHub-32454](https://github.com/magento/magento2/issues/32454)

<!-- ENGCOM-9044 -->

* 此 `dropdownDialog` Widget現在僅載入可拖曳和可調整大小的檔案 `jquery-ui` 區塊。 以前，它會載入大量不必要的程式碼，這會增載入入時間並降低效能。 [GitHub-32810](https://github.com/magento/magento2/issues/32810)

### URL重新寫入

<!-- MC-41550-->

* 透過大量更新將產品指派給網站後，多網站部署中特定網站的產品URL重寫現在會如預期產生。

<!-- MC-40780 magento/magento2#32598-->

* 現在，當發生以下情況時，應用程式會正確產生子類別的URL路徑： **使用預設值** 已為父類別啟用URL索引鍵的核取方塊。 之前，在階層中移動類別會導致錯誤 `url_path` 多存放區檢視部署中使用不同URL金鑰時的值。 [GitHub-16202](https://github.com/magento/magento2/issues/16202)

<!-- MC-40371-->

* 應用程式現在會更新 `url_path` 類別階層中移動類別時，指派給所有商店範圍的類別。 之前，在階層中移動類別會導致錯誤 `url_path`.

<!-- MC-39463-->

* 使用自訂URL從管理員建立的URL重新導向現在可成功運作。 之前，GraphQL會快取來自GraphQL的回應 `urlResolver` 查詢並在URL重寫更新後傳回舊值。

<!-- MC-38931  magento/magento2#31106-->

* 現在當產品從網站移除時，產品URL重寫會如預期移除。 [GitHub-24184](https://github.com/magento/magento2/issues/24184)

<!-- ENGCOM-8719 -->

* 已新增 `main_table` 參考 `store_id` 在 `addStoreFilter` 的功能 `app/code/Magento/UrlRewrite/Model/ResourceModel/UrlRewriteCollection.php` 集合。 以前，每當發生錯誤時， `join` 會新增至包含下列專案的表格上的集合： `store_id` 欄。 [GitHub-31853](https://github.com/magento/magento2/issues/31853)

<!-- ENGCOM-8894 -->

* 此 `PUT /V1/products/:sku` REST端點現在會如預期重新產生產品URL重寫。 之前，端點會重新產生產品 `url_key` 值而非URL重寫。 [GitHub-30316](https://github.com/magento/magento2/issues/30316)

### 使用者

<!-- MC-40777-->

* 您現在可以儲存有效的新使用者角色（管理員） **系統** > **許可權** > **使用者角色**)與整個 `Catalog` 選取的樹狀結構排除 `Edit Product Design` ( **目錄** > **詳細目錄** > **產品** > **編輯產品設計**)。 之前，應用程式不會儲存此角色的使用者所做的產品變更，且會顯示此錯誤： `Not allowed to edit the product's design attributes`. [GitHub-31973](https://github.com/magento/magento2/issues/31973)

<!-- MC-38442-->

* 應用程式現在會在為新管理員使用者產生電子郵件時，使用正確的自訂電子郵件範本。 以前，應用程式使用舊的預設範本，省略了管理員的名字和姓氏。

<!-- MC-38122-->

* 應用程式現在會在傳送電子郵件給新使用者時，使用正確的電子郵件範本。 以前，即使選取了自訂範本，應用程式也會使用預設範本。

### VersionCMS

<!-- MC-39953-->

* 應用程式現在會在您變更版面配置後，將正確的主題套用至CMS頁面。 先前，無論指派給頁面的佈景主題為何，應用程式都會在您儲存版面變更後，將指派的佈景主題變更為Luma。

### 影片

<!-- MC-42059 ENGCOM-9039-->

* 現在當進階JavaScript套件組合啟用並使用時，產品庫就可以如預期提供影片。 [GitHub-32501](https://github.com/magento/magento2/issues/32501)

<!-- ENGCOM-8532-->

* 屬於可設定產品之簡單產品的YouTube影片現在可如預期運作。 之前，影像是依ID而非位置排序。 因此，部分影片被視為影像。 [GitHub-29690](https://github.com/magento/magento2/issues/29690)

### Web API框架

<!-- MC-41758-->

* 目錄API現在可以新增新值和移除舊值，正確更新產品的自訂選項值。 之前API不會刪除舊值。

<!-- MC-34431-->

* POST `/V1/guest-carts/:cartId/billing-address` 現在會以整數傳回位址ID，而非字串。

### Widget

<!-- MC-39128-->

* 管理員現在可以刪除所有Widget版面更新。 先前，當Widget有多個版面更新時，管理員只能刪除第一個版面。

<!-- MC-39107-->

* 按一下 **加入購物車** 產品Widget上的按鈕不再導致頁面重新載入。 之前，請按一下 **加入購物車** 產品Widget上的按鈕造成目前頁面在產品加入購物車前重新載入。

### 希望清單

<!-- MC-40651-->

* 當您按一下 **編輯專案** 來自希望清單的產品按鈕。 [GitHub-32119](https://github.com/magento/magento2/issues/32119)

<!-- MC-40417-->

* 當您在希望清單中使用可自訂的檔案選項來更新產品時，應用程式現在會顯示正確的產品價格。 以前，應用程式顯示錯誤的產品價格，並且不顯示上傳檔案的連結。

<!-- MC-39060-->

* 對於有多個希望清單的客戶，其願望清單中的產品總數現在與希望清單中的專案數量相符。 之前缺貨的產品會包含在產品總數中。

<!-- MC-36779 magento/magento2#31110-->

* 將產品新增至訂單後，應用程式現在會從願望清單中移除產品。 [GitHub-30260](https://github.com/magento/magento2/issues/30260)

<!-- MC-34456 ENGCOM-8816-->

* 購物者現在可以從願望清單新增相關產品至購物車。 先前，當購物者按一下「 」，應用程式只會新增可設定產品，而不會新增可設定產品及其相關產品 **全選** 相關產品區段的連結。 [GitHub-32274](https://github.com/magento/magento2/issues/32274)

## 已知問題

**問題**： _reCAPTCHA停用時出現JavaScript錯誤_. 如果針對簽出停用reCAPTCHA，則會繼續簽出，但應用程式會顯示 `Uncaught TypeError` 控制檯記錄檔中的錯誤。  此問題將在較新版本中修正。 <!-- MC-42589 42649-->

**問題**： _內容安全性原則錯誤_. 店面在主控台記錄中顯示下列錯誤： `The Content-Security-Policy directive frame-ancestors does not support the source expression unsafe-inline`. 店面效能不受影響。 <!-- MC-42613-->

**問題**： _禮品卡金額的PayPal信用卡顯示異常_. 啟用PayPal信用並設定多個禮品卡金額時，如果購物者變更禮品卡價值的金額，店面不會更新分期付款的金額。 Adobe Commerce 2.4.4和Magento Open Source2.4.4將修正此問題。<!-- MC-42499 AC-344-->

**問題**：  _此&#x200B;**新增至訂單**按鈕無法用於透過SKU新增到購物車的產品_.  當您按一下 **新增至訂單** 按SKU將產品新增至訂單後的按鈕： `An error has happened during application run`. 產品未新增至購物車。 **因應措施**：使用新增產品功能。 <!-- AC-345-->

## 社群貢獻

我們感謝更廣泛的Magento Open Source社群，並感謝他們為此版本所作出的貢獻。

社群工程團隊 [Magento參與者](https://magento.biterg.io/app/kibana) 維護按月、季和年排列的優秀貢獻個人和合作夥伴清單。 從該貢獻者頁面，您可以前往GitHub上的合併個人資料連結。

### 合作夥伴貢獻

下表重點說明合作夥伴所做的貢獻。 下表列出提出提取請求的合作夥伴、外部提取請求，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-3-partner.md}}

### 個人貢獻者

下表列出我們社群成員的貢獻。 此表格列出外部提取請求、與其相關聯的GitHub問題編號（如果有的話），以及提出提取請求的社群成員。

{{$include /help/_includes/release-notes/engcomm-2-4-3-issues.md}}

### 系統需求

我們的技術棧疊是以PHP和MySQL為基礎所建置。 如需詳細資訊，請參閱 [系統需求](../../../installation/system-requirements.md).

### 安裝和升級指示

您可以使用以下專案安裝Magento Open Source2.4.3： [作曲者](../../../installation/composer.md).

## 移轉工具套件

資料移轉工具可協助將現有Magento1.x存放區資料傳輸至Magento2.x。此命令列介麵包含驗證、進度追蹤、記錄和測試功能。 如需安裝指示，請參閱 [安裝資料移轉工具](../../../tools/data-migration-tool/install.md). 考慮探索或貢獻至 [資料移轉存放庫](https://github.com/magento/data-migration-tool).

此 [程式碼移轉工具組](https://github.com/magento-commerce/code-migration) 協助將現有Magento1.x存放區擴充功能和自訂內容轉移至Magento2.x。命令列介麵包含轉換Magento1.x模組和版面的指令碼。
