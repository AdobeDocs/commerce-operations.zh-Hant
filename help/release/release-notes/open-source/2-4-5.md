---
title: Magento Open Source2.4.5發行說明
description: 瞭解2.4.5Magento Open Source版中的新功能、增強功能、錯誤修復和已知問題。
exl-id: edd5b687-72c2-4b50-ae90-b37dacba8de9
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '8050'
ht-degree: 0%

---

# Magento Open Source2.4.5發行說明

Magento Open Source對平台質量、支付方式、GraphQL快取效能和可訪問性進行了改進。 它包括對綜合Google模組的更新。

此版本包括290多種質量修復和增強功能。

{{bics}}

## 其他發佈資訊

儘管這些功能的代碼與Magento Open Source核心代碼的季度版本捆綁在一起，但其中幾個項目也是獨立發佈的。 這些項目的錯誤修復程式都記錄在每個項目文檔中提供的獨立、特定於項目的發行資訊中。

## Magento Open Source2.4.5亮點

在此版本中查找以下亮點。

### 安全增強

此版本包括20個安全修復和平台安全改進。 此安全修復程式已備份到2.4.4-p1和2.3.7-p4Magento Open Source。

迄今未發生與這些問題相關的已確認攻擊。 但是，某些漏洞可能被利用來訪問客戶資訊或接管管理員會話。 大多數這些問題都要求攻擊者首先獲得對管理員的訪問權限。 因此，我們提醒您採取一切必要步驟保護您的管理員，包括但不限於以下工作：

* IP允許
* [雙因素認證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* 使用VPN
* 使用唯一位置，而不是 `/admin`
* 密碼衛生

請參閱 [Adobe安全公告](https://helpx.adobe.com/security/products/magento/apsb22-38.html) 來討論這些固定問題。

#### 其他安全增強功能

此版本的安全改進改進了對最新安全最佳做法的遵守，包括：

* reCAPTCHA支援已添加到「願望清單共用」、「建立新客戶帳戶」和「禮品卡」表單中。 <!-- AC-1144-->

* ACL資源已添加到清單。 <!-- AC-1622-->

* 已增強清單模板安全性。

* 的 `MaliciousCode` 篩選器已升級為使用 `HtmlPurifier` 的下界。 <!-- AC-1498-->

### 平台增強

Magento Open Source2.4.5現在支援

* 作曲家2.2  <!-- AC-2033-->

* TinyMCE(5.10.2)。 當更新巧盡心思構建的URL或具有巧盡心思構建的URL的影像時，早期版本的TinyMCE(v5.9.2或更早版本)允許執行任意JavaScript。 <!-- AC-2039 1784 1789-->

* jQueryUI(1.13.1) <!-- AC-2544-->

* `PHPStan` (^1.5.7帶約束) [GitHub-35315](https://github.com/magento/magento2/issues/35315)<!-- AC-2876-->

DHL整合模式已從v6.0更新為v6.2。此升級不會導致產品行為發生更改。  <!-- AC-3022-->

過時的JavaScript庫已更新為其最新版本，並且已刪除過時的依賴項。 這些更改向後相容。 <!-- AC-2036-->

#### 合成器依賴項更新

<!-- AC-2876 2744 2912 2577-->

以下Composer依賴項已更新為具有約束的最新版本：

* `colinmollenhour/credis`  (1.13.0) <!-- AC-2732-->
* `guzzlehttp/guzzle` (^7.4.2)
* `laminas/laminas-captcha` （使用約束^2.12更新） <!-- AC-2625-->
* `laminas/laminas-db`   (^2.15.0)
* `laminas/laminas-di` (^3.7.0)
* `laminas/laminas-escaper` (~2.10.0)
* `laminas/laminas-eventmanager`  (^3.5.0)
* `laminas/laminas-feed`   (^2.17.0)
* `laminas/laminas-mail` (^2.16.0)
* `laminas/laminas-mvc`  (^3.3.3)
* `laminas/laminas-server` (^2.11.1)
* `laminas/laminas-servicemanager`  (^3.11.0)
* `laminas/laminas-validator` (^2.17.0)
* `league/fly`  (2.4.3) <!-- AC-2744-->
* `monolog/monolog`  (^2.5)
* `phpmd/phpmd`   (^2.12.0)
* `phpstan/phpstan`  (^1.5.7)
* `phpunit/phpunit`  (~9.5.20)
* `php-cs-fixer` (^3.4.0) <!-- AC-2259-->
* `webonyx/graphql-php`  (14.11.6)

的 `laminas/laminas-session`。 `laminas/laminas-text`, `laminas/laminas-view` 已刪除依賴項。 <!-- AC-2598-->

#### 其他升級和更換

* DHL整合模式已從v6.0更新為v6.2。 <!-- AC-3022-->

* USPS發運的預設網關URL已更新為使用 `https` 而不是 `http`。 <!-- AC-2426-->

* 的 `Froogaloop` 庫被維梅奧的 `Player.js` 庫(2.16.4)。 <!-- AC-2527 2262-->

* 的 `grunt-eslint` (NPM)庫已升級為最新版本。 <!-- AC-2700-->

* 的 `jQuery Storage` 庫已替換為 `julien-maurel/js-storage`。 <!-- AC-2627-->

* 的 `php-cs-fixer` 和 `phpcs` 靜態代碼分析工具現在與PHP 8.x相容。 <!-- AC-2259-->

* `glob.js` 依賴關係(使用約束升級到~7.2.0) <!-- AC-2547-->

* `serve-static.js` 依賴關係(使用約束約1.14.2升級) <!-- AC-2548-->

* `underscore.js` 依賴(NPM)(1.14.2) <!-- AC-2546 2549-->

* `moment-timezone-with-data.js` (0.5.34) <!-- AC-2545-->

* 庫 `jquery/jquery-cookie` 已替換為 `js-cookie/js-cookie`。 <!-- AC-2626-->

* 的 `jarallax.js` 和 `jaralax-video.js` 庫已更新為使用Vimeo REST API的最新版本。 <!-- AC-2590-->

### 輔助功能更新

本新聞稿的重點是在Venia(PWA)上建立一種更易感知，可操作，可理解和強健的店面體驗。 這些增強包括：

* 搜索結果摘要資訊現在會向螢幕閱讀器用戶發佈
* 當載入新的頁面視圖時，螢幕閱讀器現在會被通知
* 對比度和鍵盤可訪問性已得到改善

### Google Analytics

Google通過與GTag的整合，更新了AdWords和Analytics在Web應用程式中的跟蹤和整合機制。 將Google功能整合到網頁中為通過Google服務跟蹤和管理內容提供了機會。 Adobe Commerce有一組內置模組，包括GoogleAdWords、分析、優化程式和TagManager，它們利用前API與Google服務整合。  在本版本中，我們已使用GTag方法重新實施了此整合&#x200B;。 請參閱 [從analytics.js遷移到gtag.js（通用分析）](https://developers.google.com/analytics/devguides/migration/ua/analyticsjs-to-gtagjs)。

### GraphQL

GraphQL的效能增強包括：

* 開發人員和管理員在部署時或在生產中更改屬性時，可以更快地重建統一店面GraphQL架構。 當出於任何原因必須重建GraphQL架構時，購物者還會體驗到顯著更快的頁面載入速度。

* 通過在GraphQLAPI中使用JSON Web令牌(JWT)來使用授權令牌的過期日期/時間的添加功能。

* 的 `bin/magento config:set graphql/session/disable 1` 命令允許商家完全禁用所有GraphQL操作的會話cookie的建立。 預設情況下，應用程式Open Source會建立這些Cookie並依賴它們進行授權，這會影響效能。 今後，我們建議使用令牌作為GraphQL請求的唯一授權形式。 我們不建議單獨使用會話cookie或與授權令牌一起使用。 請參閱 [GraphQL授權](https://devdocs.magento.com/guides/v2.4/graphql/authorization-tokens.html)。 <!-- B2B-2204 -->

* 會話Cookie現在僅在需要時使用類代理在GraphQL操作中啟動。 <!-- B2B-2217 -->

* 已從中刪除會話使用 `http` GraphQL的報頭處理器，如商店、客戶或貨幣。 <!-- B2B-2224 -->

查看 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 獲取這些增強功能的詳細資訊。

### 庫存

已增強清單模板安全性。

### 頁面生成器

Page Builder v.1.7.2與Magento Open Source2.4.5相容。

頁面生成器列佈局包括以下增強： <!-- PB-547-->

* 列現在已公開，允許用戶控制店面上的列設定。

* 調整列大小現在支援由用戶操作觸發的環繞。

### 付款

Apple支付現在可用於所有運行啟用支付服務的部署的商家。 此付款方法不要求購物者輸入其信用卡或借記卡詳細資訊。 Apple付費在產品詳細資訊頁面、迷你購物車、購物車和結帳工作流中提供。 商家可以在此功能上切換。

#### 貝帕爾

* 西班牙和義大利的商戶現在可以稍後向購物者提供PayPal支付。  <!-- AC-2521-->

* PayPal、Credit和Pay Later按鈕的預覽現在可在管理員中查看結帳、迷你圖、購物車和產品頁。 預覽可顯示這些按鈕在店面上啟用和呈現時的外觀。

#### Braintree

* Braintree已經終止了KOUNT欺詐保護一體化。 它已從Magento Open Source基底酶中去除。

* 的 **始終請求3DS** 選項已添加到管理中。

### PWA Studio

PWA Studiov.12.5.x與Magento Open Source2.4.5相容。

此版本的新功能包括：

* PWA Studio行為資料收集在Web分析服務的購物者庫面上。  商家現在可以根據需要訂閱和擴展這些事件。

* 商家現在可以從管理員(Google標籤管理器)中選擇要部署的服務。

有關增強和錯誤修復的資訊，請參見 [PWA Studio版本](https://github.com/magento/pwa-studio/releases)。 請參閱 [版本相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 的子菜單。

## 已修復問題

我們已解決了Magento Open Source核心代2.4.5中的數百個問題。

### 安裝、升級、部署

<!-- ACP2E-49-->

* 現在，您可以更名資料修補程式，並將舊類名作為別名添加到 `patch_list` 資料庫表。 {{ site.data.var.Ce }} 現在，在應用補丁程式之前檢查資料庫中是否已存在資料補丁程式別名。 以前，在這些情況下，applicationOpen Source拋出了錯誤。

<!-- AC-3036-->

* Magento Open Source在嘗試將管理URL從管理更改為自定義URL時不再引發異常。 以前，更改管理URL後，無法登錄。 [GitHub-35416](https://github.com/magento/magento2/issues/35416)

<!-- AC-1480-->

* 商家現在可以成功從Klarna的2.4.2Magento Open Source部署升級到Magento Open Source2.4.3。 [GitHub-33760](https://github.com/magento/magento2/issues/33760)

<!-- AC-2905-->

* Magento Open Source分析的路徑不再硬編碼。 以前，當在一台伺服器上安裝多個Magento Open Source實例時，此硬編碼路徑會導致衝突。 [GitHub-29373](https://github.com/magento/magento2/issues/29373)

### 輔助功能

<!-- AC-2786-->

* 的 **購物袋** 按鈕現在提供其狀態的寫程式或文本指示。 螢幕閱讀器用戶被告知按一下此按鈕將展開其他內容，或者相關內容已展開或折疊。 以前，此按鈕未提供其狀態的寫程式或文本指示。

<!-- AC-2496-->

* 付款資訊信用卡選項文本元素或文本影像現在符合WCAG 2.0要求的標準文本的最低顏色對比度為4.5:1(24px)或14pt(19px)（如果加粗）。 此前，它們未達到預期的對比度。

<!-- AC-2483-->

* **通訊簿**  >  **通信**  > **帳戶資訊** 定制聚焦指示器現在提供的對比度與背景色的對比度至少為3:1。

<!-- AC-2486-->

* **篩選** 和 **排序** 按鈕文本現在滿足WCAG 2.0要求的最低顏色對比度為4.5:1(標準文本為18pt(24px)或14pt(19px)（如果按鈕）。 以前，菜單的導航按鈕不符合這些最低對比度要求。

<!-- AC-2499-->

* 螢幕閱讀器在導航到Venia頁眉和頁腳時只發佈一次「Venia」一詞。 此前，同一詞連續兩次被宣佈。

<!-- AC-2585-->

* 現在，觸發下拉清單的按鈕會向螢幕閱讀器提供資訊，這些資訊會指示其擴展或折疊狀態和可訪問的名稱。

<!-- AC-2482-->

* 當呈現新頁面視圖時，螢幕閱讀器用戶會被通知。 以前，當頁面標題更改時，標題更改未宣佈。

### Adobe Stock

<!-- AC-2926-->

* 用戶現在可以成功註銷Adobe Stock。

### 捆綁產品

<!-- ACP2E-465-->

* 您現在可以使用 `PUT /V1/products` 終結點，以更新特定網站的產品價格屬性。 以前，如果某些產品屬性被改寫用於特定商店視圖，則您無法更新該產品在同一商店視圖中的價格屬性。

<!-- ACP2E-780-->

* Magento Open Source現在可以在應用「產品子選擇」規則時正確計算捆綁產品的購物車總數。

### 快取

<!-- ACP2E-684-->

* 當Magento Open Source快取被刷新並被禁用時，全頁快取不再在管理中顯示為禁用 `use_stale_cache` 的子菜單。

<!-- AC-2410-->

* New Relic部署標籤現在在刷新快取時按預期工作。 [GitHub-32649](https://github.com/magento/magento2/issues/32649)

### 購物車和結帳

<!-- ACP2E-455-->

* 簽出工作流的計費步驟上的地址搜索彈出窗口不再導致DOM錯誤。

<!-- ACP2E-368-->

* 的 `addProductsToCart` 變異現在可以與多種產品配合使用。 以前，此查詢返回了第一個產品，其小計準確，但為其他產品返回了小計0。

<!-- ACP2E-245-->

* 現在，SKU添加的受限產品的權限例外已處理。 現在，購物者會在店面上收到相應消息，並且錯誤表中的quantity欄位被禁用。 以前，applicationOpen Source引發了如下異常： `There has been an error processing your request`。

<!-- ACP2E-148-->

* 禁用購物車價格規則後更新受影響報價的SQL查詢已優化，以避免鎖定整個報價表。

<!-- ACP2E-98-->

* 禁用來賓簽出時，具有全局帳戶共用的購物者不再需要再次登錄多站點部署中的輔助網站。 現在，當購物者導航到子域時，將載入客戶資料。 購物者不再被要求再次登錄，並且顯示以前的購物車內容。

<!-- ACP2E-94-->

* 當在多地址簽出中刪除單個數量的地址項時，簽出工作流中的地址下拉清單值不再更改報價中剩餘項。 以前，當在多地址簽出期間從報價中刪除產品時，地址下拉值將更改為所有產品的預設值。

<!-- ACP2E-42-->

* 的 `cart` 當產品庫存不足時，查詢不再返回空響應。 新 `errors` 已將包含錯誤消息的元素引入響應。 以前，當您使用庫存不足的產品運行查詢時，應用程式「開放源」顯示 `null` 值 `items` 的子菜單。 請參閱 [購物車查詢](https://devdocs.magento.com/guides/v2.4/graphql/queries/cart.html)。

<!-- ACP2E-38-->

* 在將產品添加到購物車後，客人購物者在繼續結帳前建立帳戶時，發運方法現在可按預期提供。 以前，當來賓在建立帳戶之前將產品添加到購物車時，在結帳期間沒有可用的發運方法。 將其他產品添加到購物車後，可以使用發運方法。

<!-- AC-2564-->

* 當購物車中沒有選項時，購物者現在可以將產品添加到購物車 **允許國家/地區** 已選擇。

<!-- AC-2622-->

* 現在，在會話超時後，將按照預期重新載入購物車內容和登錄狀態 **啟用持久性** 設定為 **是**。 [GitHub-35182](https://github.com/magento/magento2/issues/35182)

<!-- AC-428-->

* 當購物者在具有多個發運地址的訂單的簽出工作流中從發運頁導航到購物車頁時，Mini Cart小計現在會正確更新。 此前，小計翻了一番。

<!-- AC-2619-->

* 現在，當會話超時時，mini cart將顯示以前添加的產品 **啟用持久性** 中。 [GitHub-35183](https://github.com/magento/magento2/issues/35183)

<!-- ACP2E-707-->

* 商家現在可以建立貸項通知單，  **退貨發運(包括 稅)** 設定為–0.01，現在可以將此金額設定為0。 以前，無法在這些條件下建立貸項通知單。

### 購物車價格規則

<!-- ACP2E-680-->

* 的 `Parent Only` 屬性範圍現在在「購物車規則」條件中正確使用。

### 目錄

<!-- ACP2E-758-->

* 當通過更新產品名稱時，產品URL鍵現在保持不變 `PUT /V1/products/` 的下界。 以前，根據新產品名稱生成新的URL密鑰並分配給產品，該密鑰會覆蓋該儲存視圖中的URL密鑰。

<!-- ACP2E-703-->

* 將產品添加到頁面生成器產品構件集中的類別中，以旋轉方式選擇模式將不再觸發頁面重新載入。

<!-- ACP2E-685-->

* 產品設定為 **不單獨顯示** 目錄高級搜索結果中不再顯示。

<!-- ACP2E-679-->

* 現在，「成批屬性更新」頁上正確更新動態捆綁屬性。 以前， **動態SKU** 屬性仍設定為 **是** 即使在「成批更新」頁上禁用了它們。

<!-- ACP2E-673-->

* 目錄規則現在使用增量索引器（而不是完全重新索引）正確應用。

<!-- ACP2E-657-->

* 現在，您可以成功在多頁產品清單的清單視圖和網格視圖之間切換。 以前，在切換到網格視圖之前導航到多頁產品清單視圖的最後一頁時，應用程式「開放源」會顯示以下錯誤： `Unfortunately there are no products in this category on our website currently`。

<!-- ACP2E-635-->

* 管理員操作日誌報告現在顯示更新的產品ID和更新的狀態資訊（如預期）。

<!-- ACP2E-633-->

* 觸發器現在按預期還原到 `catalogrule_product_price` 表。 以前，觸發器已從 `catalogrule_product_price` 表 `catalogrule_rule` 或 `catalogrule_product` 完全重新索引。

<!-- ACP2E-629-->

* 用於將產品分配給類別的類別規則不再隨機更改。

<!-- ACP2E-516-->

* 具有範圍限制訪問權限的管理員無法再全局更新類別。 以前，當多個網站使用同一類別但使用不同的產品，並且管理員具有對某個商店的權限而更改了該類別中的產品時，其他商店的產品選擇也會更改。

<!-- ACP2E-508-->

* 現在，當使用指定區域設定的非預設貨幣時，產品詳細資訊頁面將顯示正確的價格。 以前，數字未按預期在店面本地化。

<!-- ACP2E-392-->

* 當嘗試檢索具有重複記錄的產品的層價格時，API和儲存區域會顯示相同的錯誤消息。 以前， `PUT /V1/products/tier-prices` 返回錯誤消息。

<!-- ACP2E-345-->

* Magento Open Source現在在嘗試添加帶尾隨連字元的產品URL鍵時提供驗證錯誤消息。 還提供資訊工具提示文本。

<!-- ACP2E-267-->

* 新 `ConfigurableWishlistItem.configured_variant` 欄位已替換 `ConfigurableWishlistItem.child_sku` 的子菜單。 當客戶希望清單包含未配置的可配置產品時，後一個欄位觸發了內部錯誤。

<!-- ACP2E-84-->

* 現在，URL重寫僅在成批屬性更新期間為所選商店生成，以更改產品可見性。 以前，成批屬性更新會為錯誤的儲存建立URL重寫。

<!-- ACP2E-39-->

* 當 `Synchronize widget products with backend storage` 設定已啟用，應用程式開放源將最近查看的產品資料添加到 `catalog_product_frontend_action` 資料庫表。 添加記錄時，它包括客戶或訪問者ID。 的 `recently_viewed_product` 如果客戶ID和訪問者ID為空，則響應中的節現在為空。 因此，當 `customer/section/load` Ajax請求已發送，應用程式Open Source可以根據客戶或訪問者ID正確過濾最近查看的產品。 以前，響應包含了 `catalog_product_frontend_action` 資料庫表，因為沒有檢查空的客戶或訪問者ID。

<!-- ACP2E-13-->

* 管理員現在可以從「管理員」幻燈片面板更改購物車中的可配置產品選項。 以前，幻燈片面板無法正常工作。

<!-- AC-1705-->

* 當保存對子產品的更改時，現在會按照預期清除可配置產品父產品的頁面快取。 以前，由於未清除快取，因此未在店面配置產品頁上選擇更改。 [GitHub-34508](https://github.com/magento/magento2/issues/34508)

<!-- AC-711-->

* 現在，產品清單在管理員中正確呈現。 以前，產品清單未呈現，Magento Open Source顯示以下錯誤：  `Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "<ID>" already exists`。 [GitHub-33145](https://github.com/magento/magento2/issues/33145)

<!-- AC-1214-->

* 目錄價格範圍從 **網站** 至 **全球**。 以前，「目錄搜索結果」頁顯示 **全球** 價格，並顯示產品詳細資訊頁面 **網站** 價格。 [GitHub-34074](https://github.com/magento/magento2/issues/34074)

<!-- ACP2E-316-->

* 分層導航現在顯示的產品價格比預期的高 **價格導航步驟計算** 設定為 **手動**。

<!-- ACP2E-711-->

* 現在，您可以更改類別中顯示的每頁產品限制 **記住類別分頁**  的子菜單。 以前， `form_key` 和UI `form_key` 不同，Magento Open Source顯示以下錯誤：  `Invalid Form Key. Please refresh the page`。

<!-- ACP2E-807-->

* EAV索引器現在將產品ID作為類型處理 `int` 防止可能的效能問題。

<!-- AC-2597-->

* 添加名稱為「。」的新映像後，現在已成功生成新產品快取。  保存產品並清除映像快取。 [GitHub-32699](https://github.com/magento/magento2/issues/32699)

<!-- AC-1205-->

* Magento Open Source現在會在嘗試從產品頁建立屬性而未完成「管理」欄位時顯示預期的錯誤消息。 [GitHub-33099](https://github.com/magento/magento2/issues/33099)

* 當首頁包含多個目錄清單時，產品評級現在在所有目錄產品清單上都正確。 [GitHub-33867](https://github.com/magento/magento2/issues/33867)

### 可配置產品

<!-- ACP2E-687-->

* Magento Open Source現在在產品詳細資訊頁面上更改其數量後，使用選定選項顯示可配置產品的正確產品價格。 以前，在數量更改後，價格被重置為初始值。

<!-- ACP2E-461-->

* 的 `products` 查詢現在檢索可配置產品的價格，這些產品可準確反映 **顯示出庫** 配置設定。 以前，查詢未返回準確的價格。

<!-- ACP2E-412-->

* 可配置選項現在連結到在管理員中使用 `POST /V1/configurable-products/configurable1/child`。

<!-- ACP2E-360-->

* 現在，在產品編輯期間可正確保存多選屬性。 以前，應用程式開放源在保存產品時保存了非選定屬性和選定屬性的預設選項。

<!-- ACP2E-55-->

* Magento Open Source現在按建立全局時的預期顯示可配置屬性 `select` 屬性。 以前，合格的全局屬性被隱藏。

<!-- AC-2521-->

* 的 `addConfigurableProductsToCart` 現在，突變可用於添加具有自定義選項的可配置產品。 以前，applicationOpen Source拋出了以下錯誤： `Magento 2.3.4 graphql Notice: Undefined index: option_value in /var/www/html/mg234/vendor/magento/module-configurable-product-graph-ql/Model/Resolver/ConfigurableCartItemOptions.php on line 62`。 [GitHub-28860](https://github.com/magento/magento2/issues/28860)

* 現在，您可以使用可選的自定義選項重新訂購可配置產品。 以前，重新排序嘗試失敗，這意味著顯示以下錯誤： `Some of the selected options are not currently available`。 [GitHub-35409](https://github.com/magento/magento2/issues/35409)

<!-- AC-959-->

* 的 `addConfigurableProductsToCart` 突變現在可以與多種產品一致。 以前，返回了不正確的產品資訊，或返回了無效的錯誤消息。 [GitHub-30948](https://github.com/magento/magento2/issues/30948)

### 客戶

<!-- ACP2E-390-->

* Magento Open Source現在根據店面上的網站設定正確顯示預定義的EAV系統屬性。 以前，為一個網站啟用的網站級客戶屬性和為另一個網站禁用的網站級客戶屬性都顯示為為兩個網站啟用。

### 可下載

<!-- MC-40675-->

* 您現在可以從可下載產品中刪除示例連結和檔案。 [GitHub-31887](https://github.com/magento/magento2/issues/31887)

### 電子郵件

<!-- ACP2E-717-->

* 系統發出的電子郵件現在已成功發送到「」的收件人。 — 」。

<!-- ACP2E-184-->

* 客戶現在按正確的時間安排收到有關其已放棄購物車的電子郵件提醒。 新 `TIMESTAMPDIFF(DAY, ,)` SQL函式已替換 `TO_DAYS()` 函式，並根據日期和時間計算時間戳的差。 以前，電子郵件提醒不是按計畫發送的，因為對購物車放棄（任意時區）和伺服器時間(UTC)的兩個日期 — 時間值的計算不正確。

<!-- AC-776-->

* Magento Open Source現在在購物者點擊後輸入無效電子郵件格式時，在「送貨」頁面上顯示錯誤消息 **下單**。 以前，錯誤消息顯示在「付款」頁上。 [GitHub-33590]https://github.com/magento/magento2/issues/33590

### 框架

<!-- ACP2E-658-->

* 的 `bin/magento setup:config:set` 命令不再覆蓋中已設定的快取ID前置詞 `app/etc/env.php`。

<!-- ACP2E-517-->

* 的 `bin/magento setup:static-content:deploy -s compact` 命令現在包括子主題的樣式（如預期）。 以前，部署後儲存面上不存在主題CSS檔案。

<!-- AC-1999-->

* 已添加新的嗅探，以檢查是否在中使用關閉斜槓 `void` 元素。

<!-- AC-2896-->

* Magento Open Source在為產品分配新源並更改其數量後不再引發SQL錯誤。 [GitHub-35262](https://github.com/magento/magento2/issues/35262)

<!-- AC-401-->

* 屬性排序順序現在按中指定的方式工作 `di.xml` 檔案。

<!-- AC-1716-->

* 的 `updateCartCurrency` 函式現在設定字串，而不是cart對象內的對象。 以前，applicationOpen Source未使用 `getQuote` 因為 `updateCartCurrency` 函式在cart對象中設定對象，而不是字串。 [GitHub-34199](https://github.com/magento/magento2/issues/34199)

<!-- AC-2428-->

* 由於以下原因，設備test中不再出現折舊通知`\DateTimeFormatter::formatObject()`。 此方法現在與的數值一致 `$format`。

<!-- AC-2893-->

* Magento Open Source不再顯示 `preg_replace()` 管理員上出錯。 第三個參數(`$subject`)現在的類型 `array|string` 而不是 `bool`。

<!-- AC-2583-->

* 的 `isFreeShipping` 方法現在返回整數而不是布爾值。[GitHub-35164](https://github.com/magento/magento2/issues/35164)

<!-- AC-2855-->

* Magento Open Source在為任何類方法建立插件時不再引發以下錯誤 `vendor/magento/module-backend/Model/Menu.php`: `Error: Call to undefined method ReflectionUnionType::getName()`。 [GitHub-35292](https://github.com/magento/magento2/issues/35292)

<!-- AC-1518-->

* Magento Open Source現在在導航到時返回404錯誤，而不是500錯誤 `/checkout/sidebar/updateItemQty/?item_qty=error` 在店面。 以前引發了此錯誤：  `Warning: A non-numeric value encountered in /vendor/magento/module-checkout/Controller/Sidebar/UpdateItemQty.php on line 69`。 [GitHub-34380](https://github.com/magento/magento2/issues/34380)

<!-- ACP2E-847-->

* Magento Open Source不再觸發 `trim(): Passing null to parameter #1 ($string) of type string is deprecated` 配置AMPQ連接時未配置SSL時出錯。

<!-- AC-2414-->

* 已更正 `longblog` 資料庫定義 `long blob`。 [GitHub-35108](https://github.com/magento/magento2/issues/35108)

<!-- AC-1526-->

* 包含單引號的挖空文本現在可翻譯。 [GitHub-34319](https://github.com/magento/magento2/issues/34319)

<!-- AC-2505-->

* A `TypeError` 在 `magento2/app/code/Magento/Security/Model/AdminSessionsManager.php` 從 `int` 至 `string`。  [GitHub-34415](https://github.com/magento/magento2/issues/34415)

<!-- AC-2511-->

* `.htpasswd` 被添加到禁止的地點 `nginx` 配置檔案。 [GitHub-35150](https://github.com/magento/magento2/issues/35150)

<!-- AC-2013-->

* 通過添加類別產品清單頁的載入時間得到改進 `Magento_Ui/js/core/app` 作為 `deps` 至 `app/code/Magento/Ui/view/frontend/requirejs-config.js`。 [GitHub-34847](https://github.com/magento/magento2/issues/34847)

<!-- AC-2101-->

* 的 `ProductRepository.php:get` 方法現在返回快取鍵一次。 以前，他們被遣返兩次。 [GitHub-34958](https://github.com/magento/magento2/issues/34958)

<!-- AC-2507-->

* 向在cron作業的異常處理程式中建立的新異常添加錯誤消息。 [GitHub-34941](https://github.com/magento/magento2/issues/34941)

<!-- AC-2247-->

* 的ReadMe檔案 `GraphQl-GroupedProductGraphQl` 模組已更新。 [GitHub-34951](https://github.com/magento/magento2/issues/34951)

<!-- AC-2079-->

* 店面打印訂單/發票/貸項通知單頁面不再顯示預設的Luma徽標，而不再顯示已指定在網站上顯示的徽標。 [GitHub-34942](https://github.com/magento/magento2/issues/34942)

### 常規修復

<!-- AC-2883-->

* 將最大會話大小設定為0（管理員） **儲存**  >  **設定**  >  **配置 — 高級**)不再註銷管理員。 [GitHub-35312](https://github.com/magento/magento2/issues/35312)

<!-- ACP2E-675-->

* 現在，在您從管理員添加新客戶地址時，根據客戶分配到的網站正確載入客戶地址屬性配置設定，該客戶地址分配給非預設網站。

<!-- ACP2E-448-->

* Magento Open Source通過頁面生成器添加捆綁產品時不再引發異常。

<!-- ACP2E-381-->

* 現在，您可以在iOS設備上建立一個客戶帳戶，其中首名、中間名或姓氏中帶有傾斜撇號(&#39;)。 以前，只允許使用直撇號，使用iOS11+預設斜撇號會導致 `Name is not valid!` 錯誤。

<!-- ACP2E-378-->

* 的 `products` 查詢現在返回準確反映「顯示相關產品」配置的產品資訊。 的 `related_products`。 `upsell_products`, `crosssell_products` 現在，GraphQLProductInterface中的欄位將分別根據「顯示相關產品」、「顯示追加銷售產品」和「顯示交叉銷售產品」配置進行解析。

<!-- ACP2E-234-->

* 的 **將產品設定為新的起始日期** 屬性現在顯示 **將產品設定為新** 屬性通過成批產品批量更新設定。 以前， **將產品設定為新的起始日期** 顯示為 **1970年1月1日**。

<!-- ACP2E-277-->

* 具有受限角色的用戶不再自動授予對新模組的訪問權限。

<!-- ACP2E-16-->

* 相關產品規則條件現在與包含 `multiselect` 屬性。

<!-- AC-2719-->

* 商家現在可以添加層價格屬性(`tier_price`)到產品比較。 以前，產品比較頁面在 **店面可比** 已啟用此屬性的設定。 [GitHub-35244](https://github.com/magento/magento2/issues/35244)

<!-- AC-2441-->

* Magento Open Source現在在設定無效的cookie域(**儲存**  > **配置**  >  **Web**  >  **預設Cookie設定Cookie域**)。 此前，網站崩潰了。 [GitHub-35048](https://github.com/magento/magento2/issues/35048)

<!-- AC-2765-->

* Magento Open Source在具有作用域到單個網站的管理員使用PageBuilder將產品添加到內容元素時不再引發錯誤。 以前，applicationOpen Source引發SQL錯誤。

<!-- AC-197-->

* 已將驗證添加到編輯和添加地址頁上的街道地址的第二行。 現在將強制執行在第二個上指定的最小和最大文本長度。

<!-- ACP2E-798-->

* Magento Open Source在升級後在管理員中建立目錄規則時不再引發以下錯誤： `A technical problem with the server created an error. Try again to continue what you were doing. If the problem persists, try again later`。

<!-- AC-2445-->

* Magento Open Source在激活  **按一下這裡將RSS源連結到您的願望清單** 複選框，然後按一下 **共用願望清單**。 [GitHub-34998](https://github.com/magento/magento2/issues/34998)

<!-- AC-2019-->

* 標題 **顯示密碼** 複選框(「客戶登錄」、「客戶註冊」、「客戶編輯」（「更改密碼」部分）和「客戶設定新密碼」表單)現在可以翻譯。 [GitHub-34857](https://github.com/magento/magento2/issues/34857)

<!-- ENGCOM-9062-->

* 已更新中的標籤和注釋說明 `app/code/Magento/NewRelicReporting/etc/adminhtml/system.xml`。 [GitHub-31947](https://github.com/magento/magento2/issues/31947)

<!-- ENGCOM-8600-->

* 不需要刪除 `csp_whitelist.xml` 的子菜單。 [GitHub-30607](https://github.com/magento/magento2/issues/30607)

### GraphQL

<!-- AC-2361-->

* 失蹤 `price_range` 屬性已添加到GraphQL `BundleItemOption` 的雙曲餘切值。 [GitHub-35010](https://github.com/magento/magento2/issues/35010)

<!-- AC-2367-->

* 的 `products` 查詢在以下情況下不再返回屬性： **在搜索結果中使用** 已禁用分層導航設定。 [GitHub-33318](https://github.com/magento/magento2/issues/33318)

<!-- AC-1760-->

* A `price_including_tax` 欄位已添加到 `CartItemPrices`。 [GitHub-29057](https://github.com/magento/magento2/issues/29057)

<!-- AC-2520-->

* 的 `new_from_data` 和 `new_to_datefields` 在 `ProductInterface` 不再棄用。 [GitHub-34783](https://github.com/magento/magento2/issues/34783)

<!-- AC-2364 1456-->

* 的 `categories` 在獲取類別清單時，查詢不再引發異常，其中一個類別包含在檔案系統上找不到的映像。 以前，applicationOpen Source引發了此異常： `Category image not found`。 [GitHub-34266](https://github.com/magento/magento2/issues/34266)

<!-- AC-2368-->

* 的 `products` 立即查詢返回 `category_uid` 作為聚合。 [GitHub-32557](https://github.com/magento/magento2/issues/32557)

<!-- AC-2373-->

* 的 `updateCartItems` 現在，當產品庫存量達到最大庫存量時，突變會按預期刪除產品。 [GitHub-30220](https://github.com/magento/magento2/issues/30220)

<!-- AC-2366 734 MC-42964 -->

* 的 `urlResolver` 當多個首頁具有相同標識符時，query現在可以正確解析路徑分隔符(/)。 以前，查詢未解析分隔符並返回空值。 [GitHub-33615](https://github.com/magento/magento2/issues/33615)

<!-- AC-1881-->

* `customer` 查詢現在可以按照查詢訂單時的預期提取捆綁產品多選選項。 [GitHub-34717](https://github.com/magento/magento2/issues/34717)

<!-- AC-1668-->

* Magento Open Source會話在發出GraphQL請求後不再結束。 以前， `ClearCustomerSessionAfterRequest` 插件已註銷購物者。 [GitHub-34550](https://github.com/magento/magento2/issues/34550)

<!-- ACP2E-634-->

* 可配置產品價格範圍 `products` 查詢響應現在在 **顯示庫存產品** 配置設定已啟用。 以前，在計算最低和最高價格時，已考慮禁用的期權。

<!-- ACP2E-531-->

* 的 `products` 查詢現在按位置排序時會返回正確篩選的多個類別。

<!-- ACP2E-499-->

* `setShippingAddressesOnCart` 請求現在已成功驗證區域ID。 以前，當您使用區域ID而不是區域代碼時，applicationOpen Source拋出錯誤。

<!-- ACP2E-470-->

* `products` 查詢現在只返回與請求中傳遞的儲存關聯的類別。

<!-- ACP2E-363-->

* 的 `categoryList` 查詢現在返回結果，當在標頭中指定儲存時，這些結果將反映查詢儲存的根類別。 以前，預設根類別的類別包括在結果中，即使在標題中指定了其他儲存。

<!-- AC-1955-->

* 的 `products` 查詢在以下情況下不再返回屬性： **在搜索結果分層導航中使用** 設定已禁用。 [GitHub-33318](https://github.com/magento/magento2/issues/33318)

<!-- AC-2365-->

* 的 `cart` 查詢現在只為免費訂單返回一種付款方法。 以前，在查詢響應中返回了所有有效付款方法。 [GitHub-34036](https://github.com/magento/magento2/issues/34036)

<!-- AC-818-->

* `products` 查詢不再返回 `price_range` 受禁用變型影響的可配置產品的值。 [GitHub-33629](https://github.com/magento/magento2/issues/33629)

<!-- AC-210-->

* 在 `collectQuoteTotals` 呼叫以確保不會多次應用商店信用。

<!-- ACP2E-636-->

* 的 `generateCustomerTokenAsAdmin` 現在，突變會按照預期檢索客戶令牌。 以前未返回令牌，並且返回了此錯誤： `Customer email provided does not exist`。

<!-- AC-2371-->

* GraphQL架構現在在自定義 `type` 產品屬性已定義。 以前，架構無效，因為 `type` 自定義覆蓋了產品類型上的屬性 `type` 屬性。 [GitHub-34929](https://github.com/magento/magento2/issues/34929)

<!-- AC-2797-->

* 客戶已添加或更新 `createCustomer`。 `createCustomerV2`。 `updateCustomer`或 `updateCustomerV2` 現在，通過積極的新聞稿訂閱添加突變。 以前，即使請求包含適當的輸入參數，客戶也從新聞稿中取消訂閱。 [GitHub-33599](https://github.com/magento/magento2/issues/33599)

<!-- AC-1883-->

* 的 `products` 查詢特定儲存視圖現在只返回多站點部署中特定網站的根類別中的類別。 以前，查詢從其他網站的根類別返回類別。 [GitHub-34570](https://github.com/magento/magento2/issues/34570)

<!-- AC-2712-->

* 的 `products` 查詢現在只返回提供的類別ID的子類別。 以前，它返回了所有類別。 [GitHub-35220](https://github.com/magento/magento2/issues/35220)

<!-- AC-2794-->

* 的 `customerOrders` 查詢現在按預期在 `gift_message` 在響應中指定對象，但不存在禮品消息。 以前，查詢返回以下消息： `Can't load gift message for order is returned`。 [GitHub-28957](https://github.com/magento/magento2/issues/28957)

<!-- AC-2515-->

* 用 `catalog_category_product` 導致 `products` 查詢以從其他儲存返回類別。 [GitHub-31253](https://github.com/magento/magento2/issues/31253)

<!-- AC-2063-->

* 的 `generateCustomerToken` 現在，變異在 `customer_log` 生成客戶令牌後的預期值。 [GitHub-33378](https://github.com/magento/magento2/issues/33378)

### Google Analytics

<!-- AC-2574 2685-->

* Google標籤模組已加入到代碼庫中，支援2023年7月向第4Google Analytics過渡。  您目前可以在Google環球分析屬性中使用和收集新資料，但Google環球將於2023年7月到期。 [GitHub-35204](https://github.com/magento/magento2/issues/35204)。 [GitHub-35376](https://github.com/magento/magento2/issues/35376)

### 影像

<!-- ACP2E-71-->

* 產品詳細資訊頁面上的影像不再閃爍，並且影像仍按預期居中。 以前，在產品詳細資訊頁面完成載入影像後，影像明顯向下移動。

### 導入/導出

<!-- ACP2E-676-->

* 在重新生成CSV檔案之前，從管理員中刪除交叉銷售產品後，導出CSV中的相關、追加銷售和交叉銷售產品位置現在是正確的。 以前，在刪除交叉銷售產品後，不會重新計算交叉銷售產品職位，並且產品職位訂單不正確。

<!-- ACP2E-632-->

* Magento Open Source現在在導出報告時在篩選列之前檢查自定義視圖。 以前，導出的報告未考慮自定義視圖，導出的列不正確。

<!-- ACP2E-502-->

* Magento Open Source現在成功導入具有長檔案名的映像。 以前，applicationOpen Source未導入映像並引發以下錯誤： `Imported resource (image) could not be downloaded from external resource due to timeout or access permissions in row(s):`。

<!-- ACP2E-294-->

* 類別ID屬性現在在計畫導出篩選器中可用。

<!-- ACP2E-59-->

* 捆綁包含問號(?)的產品 現在，由於對查詢生成器內部的改進，可以成功導入選項標題 `populateExistingOptions` 的雙曲餘切值。 選項標題也會正確顯示。 以前，在初始導入後，連續的導入會導致行為損壞並使選項增加一倍。 購物者也無法將產品添加到購物車。

<!-- ACP2E-766-->

* 在導入期間為類別名稱添加了驗證。 以前，applicationOpen Source未驗證類別名稱，當類別名稱超過255個字元時，這會導致錯誤。

<!-- AC-2096-->

* 中的現有記錄 `catalog_url_rewrite_product_category` 現在，在插入新表之前，將刪除表。 以前，在多商店產品導入過程中發生以下錯誤： `SQLSTATE[23000]: Integrity constraint violation`。 [GitHub-34210](https://github.com/magento/magento2/issues/34210)

### 基礎設施

<!-- ACP2E-2039-->

* 已從插件清單中刪除不建議使用的上下文菜單插件。

<!-- ACP2E-2039-->

* 由於引入了Page Builder模組，TinyMCE編輯器中與工具欄相關的邏輯已更新 `delayedRender` TinyMCE中工具欄的邏輯。

<!-- MC-42655-->

* 競爭條件不再中斷 `contentUpdated` 事件偵聽器。 [GitHub-32068](https://github.com/magento/magento2/issues/32068)

<!-- AC-3044-->

* 的 `getTypeID` 函式現在返回產品類型ID而不是產品ID。 [GitHub-35458](https://github.com/magento/magento2/issues/35458)

<!-- AC-2911-->

* jQuery UI滑塊和 `SelectMenu` 映射已在中更正 `vendor/magento/module-theme/view/base/requirejs-config.js`。

* 觀察員 `sales_order_state_change_before` 現在支援從順序對象檢索資料。 的 `sales_order_state_change_before` `event` 參數已更新。 [GitHub-26789](https://github.com/magento/magento2/issues/26789)

<!-- AC-2239-->

* `indexer:reset` 已重新構成呼叫 `$indexer->invalidate()`。 [GitHub-34988](https://github.com/magento/magento2/issues/34988)

<!-- AC-2055-->

* 現在，可以在 `htmlClass` 屬性值，它支援使用其他元件（如Tailwind UI）。 [GitHub-34430](https://github.com/magento/magento2/issues/34430)

### 記錄

<!-- ACP2E-203-->

* 客戶、客戶地址和訂單操作現在正確記錄在「管理」操作報告中。 以前，如果 `postDispatch` 未在配置設定中指定處理程式。

### MFTF

#### 操作組

重複性操作已替換為以下test中的操作組：

`AdminConfigurableProductChildrenOutOfStockTest` [GitHub-32378](https://github.com/magento/magento2/issues/32378)
`AdminCreateStoreViewTest` [GitHub-34631](https://github.com/magento/magento2/issues/34631)

#### 新test

`AdminUnlockAdminUserEntityTest` [GitHub-34836](https://github.com/magento/magento2/issues/34836)

`StorefrontNewsletterSubscriptionWithEnabledNeedToConfirmConfigTest` [GitHub-33344](https://github.com/magento/magento2/issues/33344)

#### 重構test

`AdminCancelTheCreatedOrderWithCashOnDeliveryPaymentMethodTest` [GitHub-33692](https://github.com/magento/magento2/issues/33692)

### 新聞稿

<!-- ACP2E-35-->

* 登錄的客戶不再在「管理員」中標籤為來賓> **營銷** > **新聞稿訂閱者**。

<!-- AC-2102-->

* 新聞稿訂閱確認電子郵件現在在 **從** 欄位。 以前，客戶收到一封電子郵件，預設電子郵件位於 **從** 標題。 [GitHub-34963](https://github.com/magento/magento2/issues/34963)

<!-- AC-2509-->

* 新聞稿電子郵件模板中的取消訂閱URL現在可以按預期工作。 [GitHub-33310](https://github.com/magento/magento2/issues/33310)

### 訂單

<!-- ACP2E-279-->

* 編輯訂單後，將成功保存來賓客戶詳細資訊。 以前，丟失了一些客戶詳細資訊，包括 `customer_firstname` 和 `customer_lastname, x_forwarded_for`。

<!-- ACP2E-92-->

* 在以下情況下，商家不再能建立小數總數量的貸項通知單 **十進位數量** 在產品或全局設定級別上禁用。 以前，商家可以建立小數總數量的貸項通知單，但不適用。

<!-- ACP2E-56-->

* 當首選項中設定的時區與本地電腦上設定的時區不同時，按日期篩選現在適用於發票、發運、貸項通知單、CMS頁和CMS塊網格。 以前，日期被錯誤分析，篩選結果包含設定日期範圍之外的資料。

<!-- AC-1536-->

* Magento Open Source不再更改在您更改管理員帳戶編輯頁上分配給客戶的主電子郵件地址時分配給訂單的自定義電子郵件地址。 以前，當您編輯客戶的主電子郵件地址時，新電子郵件地址會分配給為該客戶建立的每個訂單。 [GitHub-34397](https://github.com/magento/magento2/issues/34397)

<!-- AC-2664-->

* Magento Open Source現在在運行PHP 7.4的部署中在貸項通知單網格頁上顯示請求儲存的記錄。以前，在您建立貸項通知單並嘗試查看後，applicationOpen Source拋出以下錯誤： `The store that was requested wasn't found. Verify the store and try again`。

<!-- AC-2442-->

* Magento Open Source現在在貸項通知單網格頁上顯示從名稱前面帶有數字的商店視圖建立的訂單的貸項通知單。 以前，applicationOpen Source顯示錯誤： `The store that was requested wasn't found. Verify the store and try again. Exception in /var/www/html/vendor/magento/module-store/Model/StoreRepository.php:75`。 [GitHub-35122](https://github.com/magento/magento2/issues/35122)

<!-- ACP2E-31-->

* Magento Open Source現在在「管理」和店面發票頁合計中顯示免費發運成本(0)。 以前，當訂單的發運為零時，應用產品開放來源不會在發票頁發運合計上顯示發運金額合計。

<!-- AC-1778-->

* 的 `increment_id` 列 `sales_order` 表已增加。 以前，第三方模組假定 `sales_order.increment_id` 長度為50個字元，僅保存了 `increment_id`。 [GitHub-34521](https://github.com/magento/magento2/issues/34521)

### 付款方法

<!-- ACP2E-25-->

* 管理員現在可以使用PayPal PayflowPro付款方法在管理員上下單。 以前，applicationOpen Source顯示以下錯誤： `No such entity with cartId = 0`。

<!-- AC-2093-->

* 在使用Venmo、PayPal Later或PayPal付款時，結帳工作流中的「付款複查」頁現在顯示正確的付款方法名稱。

<!-- AC-1195-->

* 的 `cart` 查詢不再返回免費訂單的所有有效付款方法。 [GitHub-34036](https://github.com/magento/magento2/issues/34036)

#### Braintree

<!-- BUNDLE-3088-->

* 商戶現在可以提交通過Braintree向Apple支付支付的訂單的部分退款。 這是Magento Open Source2.4.4中的已知問題。

#### 貝帕爾

<!-- ACP2E-296-->

* Magento Open Source現在在使用PayPal支付的來賓訂單中顯示正確的客戶名稱。 以前，客戶名稱顯示為Guest。

<!-- AC-2606-->

* 已更新createPaypalExpressToken變異的解析器，以正確使用use_paypal_credit輸入欄位中指定的值。 以前，它嘗試使用無效 `paypal_credit` 的子菜單。 [GitHub-35180](https://github.com/magento/magento2/issues/35180)

### 效能

<!-- ACP2E-52-->

* 通過為可配置產品的關聯產品資料快取添加TTL（過期日期）,Redis快取管理得到了改進。 以前，如果將Redis密鑰逐出策略配置為易失的逐出策略，則由於缺少TTL值，這些快取不會被逐出。

<!-- ACP2E-464-->

* 新 `Grid Filter Condition Type` customer/customer address屬性控制屬性篩選器與資料庫中屬性值的匹配方式，選項包括 `Partial Match`。 `Prefix Match`, `Full Match`。

<!-- AC-1136-->

* 目錄搜索全文索引器已重新定位到儲存循環之外，這簡化了重新索引。 [GitHub-33984](https://github.com/magento/magento2/issues/33984)

<!-- AC-2508-->

* 已修復問題 `array_merge` 循環。 [GitHub-33929](https://github.com/magento/magento2/issues/33929)

### 定價

<!-- ACP2E-445-->

* 在預設範圍中沒有值（但在儲存視圖級別定義）的價格屬性現在已正確編製索引。 以前，從EAV表檢索價格屬性值的SQL表達式沒有考慮在預設範圍中未定義該值的方案。

<!-- ACP2E-313-->

* 現在，產品詳細資訊頁面上列出的價格與結帳工作流中列出的層價格相同，層價格因選定數量而異（例如，根據購買2個項目而購買5個項目而定價不同的產品）。 以前，結帳價格反映了最低產品數量的價格。

### ReCAPTCHA

* 的 **提交** 「登錄」和「建立帳戶」頁上的按鈕現在處於非活動狀態，直到完全載入ReCaptcha。

### 角色

* 的 **儲存** >  **配置** > **服務** 「資源訪問」設定為時，將顯示Magento Open SourceWeb API資訊  **自定義** 在「角色資源」頁籤上。 [GitHub-35506](https://github.com/magento/magento2/issues/35506)

### 搜索 {#search-heading}

<!-- ACP2E-645-->

* 按分層導航上的色板篩選產品時，會在修復後顯示產品的正確影像。

<!-- ACP2E-615-->

* Elasticsearch查詢現在按預期工作 `int` 配置為可搜索的後端 `type` 屬性。 以前，applicationOpen Source拋出 `Elasticsearch\Common\Exceptions\BadRequest400Exception` 例外。

<!-- ACP2E-99-->

* 現在，您可以將搜索同義詞與 **要匹配的最低條款** Elasticsearch查詢中的參數。 以前，如果在設定中指定了此參數，並且為特定關鍵字添加了搜索詞，則搜索未返回任何結果。

<!-- ACP2E-72-->

* Magento Open Source現在顯示搜索建議和搜索建議部署中的店面的準確搜索結果建議計數 **顯示每個建議的結果計數** 設定。 以前，關鍵字旁邊顯示的計數為零。

<!-- AC-700-->

* 現在，按「目錄」(Catalog)頁面上的自定義屬性排序的產品將按預期順序顯示。 以前，產品按其屬性選項值ID排序，該值反映產品添加到屬性的順序。 [GitHub-33810](https://github.com/magento/magento2/issues/33810)

<!-- AC-645-->

* 按分層導航中的色板篩選產品時，現在會顯示正確的產品影像。 以前，分層導航 `PageCache` 鍵不包括可配置產品的篩選器參數。

<!-- AC-2051-->

* 已修復上的PHP錯誤 `catalogsearch/advanced/result` 和  `catalogsearch/advanced/index` 頁。  以前，Magento Open Source在任何高級搜索字串中傳遞陣列時顯示此錯誤：  `Warning: trim() expects parameter 1 to be string, array given | magento/module-catalog-search`。 [GitHub-33586](https://github.com/magento/magento2/issues/33586)

### 裝運

<!-- AC-2052-->

* 如果未選擇允許的發運方法，則Magento Open Source在載入UPS發運費率時不再引發錯誤。 以前，當購物者在這些條件下在結帳工作流中輸入發運地址時，不會顯示其他發運方法，Magento Open Source在店面上顯示錯誤。 [GitHub-34411](https://github.com/magento/magento2/issues/34411)

<!-- AC-2621-->

* 虛擬產品價格現在不包括在計算表費率發運金額中。 以前，這些產品的發運成本計算不正確。[GitHub-35185](https://github.com/magento/magento2/issues/35185)

<!-- ACP2E-209-->

* 對於已應用折扣優惠券的訂單，現在在結帳工作流「訂單匯總」塊中正確顯示零價格的表費率發運率。 以前未顯示發運方法。

### 稅

<!-- ACP2E-735-->

* 現在，已正確顯示購物車中產品的固定產品稅(FPT)。 以前，如果購物車中的多種產品 **固定產品稅(FPT)** 和 **對FPT應用稅** 已啟用，所有FPT都已分配給購物車中的最後一個產品，並重置了其他產品。

<!-- ACP2E-350-->

* 現在，結帳工作流的訂單匯總部分的固定產品稅(FPT)合計已正確計算。

<!-- ACP2E-291-->

* Magento Open Source現在會根據預期在簡單產品數量更改後更新產品頁面上簡單產品的排除稅層價格。

<!-- ACP2E-182-->

* 驗證已添加到儲存配置頁，以驗證下拉清單中的選定國家/地區是否位於歐盟國家/地區清單中。 的 **驗證增值稅編號** 按鈕現在只對歐盟國家可見。 此前，這個按鈕對包括英國在內的所有國家都可見。

<!-- ACP2E-45-->

* 現在，當 **在目錄中顯示產品價格** 設定為 **不包括稅** 或 **包括和不包括稅**。 以前，產品詳細資訊頁面顯示層價格，儘管設定為稅。

<!-- AC-1925-->

* 現在，使用葡萄牙語區域設定將訂單正確應用於商店中任何有效地址。 [GitHub-34271](https://github.com/magento/magento2/issues/34271)

<!-- AC-1084-->

* 的 `cart` 返回時查詢不再包括稅 `subtotal_with_discount_excluding_tax`。 [GitHub-33905](https://github.com/magento/magento2/issues/33905)

<!-- ACP2E-651-->

* 訂單資料的Web API請求(`GET /V1/orders/`)不再為行合計返回負值。

### Test

<!-- AC-2004-->

* 已更正錯誤 `Magento.GraphQl.CatalogGraphQl.ProductSearchTest.testSearchSuggestions` 運行AWSElasticsearch配置時。

<!-- AC-1113-->

* 的 `testCreateProductOnStoreLevel` 整合test不再導致資料庫上的嵌套事務。

* 在PHP 8.1上未設定產品映像時，為「發送朋友」功能運行WebAPItest時不再發生以下異常：  `exception main.ERROR: /var/www/html/lib/internal/Magento/Framework/DataObject.php:131 strpos(): Passing null to parameter #1 ($haystack) of type string is deprecated`。 [GitHub-34864](https://github.com/magento/magento2/issues/34864)

### 翻譯和區域設定

<!-- ACP2E-537-->

* 現在，您可以使用「平移內聯」工具多次編輯同一元素。 以前，僅包括使用此工具進行的第一次更改。

<!-- ACP2E-437-->

* 編輯管理文本或標籤時，儲存視圖選擇器不再阻止翻譯窗格。 現在，您可以從翻譯窗格中編輯這些功能，並且當您按一下 **提交**。

<!-- ACP2E-362-->

* 巴西葡萄牙語和法語區域設定的管理日期 — 時間格式現在有效。

<!-- ACP2E-785-->

* 添加了嚴重強調文字 [ \&#39; ] 名稱驗證程式的字元，以便為包含此重音的名字或姓氏建立客戶帳戶。

<!-- ACP2E-682-->

* 上的文本 **添加到購物車** 「產品詳細資訊」頁面上的「」按鈕現在仍然翻譯為在關聯區域設定中指定的語言。 現在，翻譯檔案將根據區域、主題和區域設定轉換為相應的JavaScript檔案 `translate_strategy=embedded`。 以前，將產品添加到購物車後，文本將還原為英文。

<!-- ACP2E-752-->

* 「搜索同義詞」現在尊重其分配的儲存範圍。 以前，分配給特定儲存的同義詞可以在任何其他儲存上搜索。

<!-- AC-1178-->

* 已解決菲律賓（菲律賓）地區的問題。 [GitHub-33996](https://github.com/magento/magento2/issues/33996)

### UI

<!-- ACP2E-557-->

* 中的產品名稱很長 **目錄** > **產品** 現在，網格是文字包裝的，而不是顯示在單行中。

<!-- ACP2E-347-->

* 最小和最大出生日期範圍現在保存為正確的時間戳，然後從有效時間戳轉換為有效日期格式。

<!-- ACP2E-280-->

* 無法 `magento.com` 在管理員登錄過程中不再導致效能問題。 已添加獲取釋放通知請求超時。

<!-- ACP2E-88-->

* 管理員訂單、客戶和產品網格篩選器的結果現在會像預期的那樣在Chrome瀏覽器中顯示。

<!-- AC-2750-->

* 現在，您可以在 `Magento_LoginAsCustomerAdminUi` 已啟用並 **儲存視圖以登錄到** 設定為手動選擇。 以前，applicationOpen Source拋出了以下錯誤： `(Magento\Framework\Exception\LocalizedException): Unable to get Customer ID`。 [GitHub-33096](https://github.com/magento/magento2/issues/33096)

<!-- AC-2076-->

* 現在，當購物者到達產品影像庫中的最後一個縮略圖時，「下一個」箭頭將按預期禁用。

<!-- AC-2060-->

* 的 **按關鍵字搜索** 輸入欄位現在具有 `aria-label` 元素，而不是佔位符 **目錄** > **產品** 的子菜單。

<!-- AC-3058-->

* 管理員腳注中的「隱私策略」連結現在連結到新的Adobe隱私策略。

<!-- AC-2880-->

* 當在生產模式下啟用JavaScript捆綁時，管理員現在可以訪問「管理」菜單選項。  [GitHub-35325](https://github.com/magento/magento2/issues/35325)

<!-- AC-2851-->

* 管理員現在可以將當前用戶的過期日期設定為高於2038 ，並成功保存用戶。 以前，過期日期已更改的用戶在註銷後無法重新登錄。

<!-- AC-751-->

* Magento Open Source現在在管理員嘗試在管理員中保存街道行過多的地址時顯示資訊性錯誤消息 **儲存** > **屬性**  > **客戶地址**。  管理員現在可以刪除額外的地址資訊並成功保存地址。 以前，applicationOpen Source提交了額外行，但未保存資料。

<!-- ACP2E-546-->

* 資料庫和本地儲存中的產品清單視圖配置已更新。 現在，在重新載入頁面和更改視圖期間將保存自定義網格視圖。

<!-- ACP2E-747-->

* 啟用網站限制後，您現在可以在商店視圖之間切換。 以前，儲存視圖切換器的問題阻止了切換儲存視圖。

<!-- AC-2042-->

* 「查看」表徵圖上載表單現在支援 `.ico` 檔案類型。 以前，當您嘗試在管理中上載具有此擴展類型的favicon檔案時，應用程式開源顯示以下錯誤： `Warning: imagecreatefromstring(): one parameter to a memory allocation multiplication is negative or zero, failing operation gracefully in /var/www/html/vendor/magento/module-media-storage/Model/File/Validator/Image.php on line 64`。 [GitHub-34858](https://github.com/magento/magento2/issues/34858)

<!-- AC-3122-->

* 已更正「管理」網格中下拉的「選擇」菜單的顯示問題。 [GitHub-35386](https://github.com/magento/magento2/issues/35386)

<!-- AC-2055-->

* [GitHub-34430](https://github.com/magento/magento2/issues/34430)

### URL重寫

<!-- AC-2535-->

* 現在，僅從中刪除特定商店視圖中產品的URL `url_rewrite` 將特定儲存視圖的屬性代碼可見性狀態更改為之後的表和管理員 **不單獨顯示**。  以前，已刪除中產品的所有URL `url_rewrite` 的子菜單。 [GitHub-34937](https://github.com/magento/magento2/issues/34937)

### 視頻

<!-- ACP2E-485-->

* 現在，您可以使用頁面生成器使用YouTubeURL參數來添加新視頻。 以前，這些參數會自動從URL中刪除。

<!-- AC-2251-->

* 現在，您可以將Vimeo視頻設定為在 `banner` 元素 `restrict mode`。 以前，applicationOpen Source引發JavaScript錯誤。

### Web API框架

<!-- ACP2E-694-->

* 已對訂單實施互斥，以防止併發請求在更新期間出現競賽情況。 以前，在併發REST API調用期間的競爭條件導致「訂購管理物料」表中的發運狀態資訊被覆蓋。

<!-- ACP2E-677-->

* 現在，除非通過REST API在特定儲存視圖中更新產品時在負載中明確定義，否則將保留產品映像角色繼承。

<!-- AC-2231-->

* Swagger架構(`/rest/schema`)現在使用唯一的操作ID。

<!-- AC-2845-->

* 通過 `POST /V1/salesRules/` 現在，終結點將狀態從禁用更改為啟用後保留現有優惠券代碼值。 [GitHub-35298](https://github.com/magento/magento2/issues/35298)

<!-- AC-2764-->

* 通過 `POST /V1/salesRules/` 現在終結點包含有效 `from_date` 和 `to_date` 值。 [GitHub-35265](https://github.com/magento/magento2/issues/35265)

<!-- AC-2522-->

* `CartItemInterface` 現在包括 `customizable_options`。 [GitHub-31180](https://github.com/magento/magento2/issues/31180)

<!-- AC-2898-->

* REST API批量PUT和DELETE請求現在在 `Magento_ReCaptchaWebapiRest` 模組已啟用。 [GitHub-35348](https://github.com/magento/magento2/issues/35348)

<!-- AC-763-->

* Bulk Rest API現在與 `bySku` 選項。 以前，它返回了500錯誤。

<!-- AC-441-->

* 使用 `POST /V1/products/special-price` 終結點現在按預期工作。 以前，終結點返回了以下錯誤： `Future Update already exists in this time range. Set a different range and try again`。

<!-- AC-1169-->

* 的 `/V1/products/base-prices` endpoint now按預期工作 **目錄價格模式 — 網站**。 [GitHub-30132](https://github.com/magento/magento2/issues/30132)

### 願望清單

<!-- ACP2E-459-->

* 現在，從希望清單頁更新物料數量時，將按照預期更新產品詳細資訊頁上的數量。 應用程式「開放源」現在從產品URL中提取更新的值並填充 `qty` 從wishlist本身獲取產品詳細資訊頁面的欄位。

## 已知問題

**問題**:啟用Braintree後，管理員用戶無法從管理員為客戶建立訂單或重新訂購。 當管理員用戶按一下 **訂單** 或 **重新排序**,Adobe Commerce不提交命令，  `system.log` 顯示此錯誤： `report.CRITICAL: Error: Call to a member function getMethodInstance() on null in /app/vendor/paypal/module-braintree-core/Block/Form.php:174`。  **解決方法**:  `BUNDLE-3137-composer.patch` 的子菜單。 查看 [啟用Braintree付款時，管理員無法建立訂單/重新排序](https://support.magento.com/hc/en-us/articles/8322266352525) 有關此問題的討論和對修補程式的訪問的知識庫文章。 Adobe Commerce2.4.5-p1中也將包括修復。 <!-- AC-6222-->

## 社區捐款

我們感謝廣大Magento Open Source，並願承認他們對本新聞稿的貢獻。

社區工程團隊 [Magento撰稿人](https://magento.com/magento-contributors) 按月、季度和年度保存一份最佳貢獻個人和合作夥伴清單。 在該「參與者」頁中，您可以在GitHub上跟蹤到其合併公關的連結。

### 合作夥伴貢獻

下表重點介紹了合作夥伴的貢獻。 此表列出了提供拉請求的合作夥伴、外部拉請求編號以及與其關聯的GitHub發行編號（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-5-partner.md}}

### 個人捐款人

下表列出了社區成員的貢獻。 此表列出了提供拉請求的社區成員、外部拉請求編號和與其關聯的GitHub發行編號（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-5-issues.md}}

## 系統要求

我們的技術堆棧構建在PHP和MySQL上。 有關詳細資訊，請參見 [系統要求](../../../installation/system-requirements.md)。

## 安裝和升級說明

您可以使用 [作曲家](../../../installation/composer.md)。
