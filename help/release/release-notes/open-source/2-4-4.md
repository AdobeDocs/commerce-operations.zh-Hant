---
title: Magento Open Source2.4.4發行說明
description: 了解2.4.4版Magento Open Source的新功能、增強功能、錯誤修正和已知問題。
source-git-commit: 639dca9ee715f2f9ca7272d3b951d3315a85346c
workflow-type: tm+mt
source-wordcount: '11128'
ht-degree: 0%

---


# Magento Open Source2.4.4發行說明

Magento Open Source2.4.4引入了對PHP 8.1的支援。所有項目庫和依賴項都已更新，以與PHP 8.1相容。核心撰寫器依賴項和第三方庫也已升級到與PHP 8.1相容的最新版本。此版本還提供了對OpenSearch 1.2的支援。

此版本包含近250項品質修正和增強功能。

>[!NOTE]
>
>多虧了我們的搭檔 [阿特維](https://www.atwix.com/) 因為它們在使我們的2.4.4框架與PHP 8.1相容方面做出了重大貢獻。

{{bics}}

## 套用 `AC-3022.patch` 繼續以DHL為航運承運人

DHL已推出架構6.2版，並將於近期淘汰架構6.0版。 支援DHL整合的Adobe Commerce 2.4.4及舊版僅支援6.0版。部署這些版本的商家應適用 `AC-3022.patch` 以便繼續提供DHL作為航運公司。 請參閱 [應用補丁程式以繼續提供DHL作為運輸承運人](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 有關下載和安裝修補程式的資訊，請參閱知識庫文章。

## 其他發行資訊

雖然這些功能的程式碼會與每季發行的Magento Open Source核心程式碼搭配使用，但其中數個專案也會獨立發行。 這些專案的錯誤修正會記錄在每個專案的檔案中，提供個別專案的發行資訊。

>[!NOTE]
>
>除了Braintree以外，所有廠商套件的擴充功能已從Magento Open Source2.4.4中移除。

>[!NOTE]
>
>Composer 2.2推出了安全性功能，要求商戶在其中識別受信任的外掛程式 `composer.json` 檔案，才會執行外掛程式。 目前， `composer.json` 系統會自動安裝檔案，但未標示為受信任。 不過，自2022年7月起，撰寫器將不會載入外掛程式，除非外掛程式已明確允許。 請參閱 [升級至Adobe Commerce 2.4.4時出現撰寫器外掛程式問題](https://support.magento.com/hc/en-us/articles/6215997614093-Composer-plugins-issues-when-upgrading-to-Adobe-Commerce-2-4-4) 有關如何修改 `composer.json` 檔案來明確允許載入外掛程式。

### 此版本包含的Hotfix

Magento Open Source2.4.4包括解決以下Hotfix解決的所有問題，這些Hotfix針對Adobe Commerce和Magento Open Source2.4.3、2.4.3-p1和2.3.7-p2而提供：

* 解決的漏洞 `MDVA-43395_EE_2.4.3-p1_COMPOSER_v1.patch` 和 `MDVA-43443_EE_2.4.3-p1_COMPOSER_v1.patch` 已在此版本中解決。

* `AC-384_Fix_Incompatible_PHP_Method__2.4.3_ce.patch`. 此修補程式解決了升級期間發生的致命PHP錯誤。 請參閱 [Adobe Commerce升級2.4.3、2.3.7-p1 PHP致命錯誤Hotfix](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) 知識庫文章。

## Magento Open Source2.4.4亮點

查看此版本中的下列重點。

### 安全性增強功能

此版本包含一項安全性修正和平台安全性改善。 此安全性修正已支援至Magento Open Source2.4.3-p2和Magento Open Source2.3.7-p3。

迄今未發生與這些問題相關的確認攻擊。 但是，某些漏洞可能會被利用來訪問客戶資訊或接管管理員會話。 這些問題大多要求攻擊者首先獲得管理員的訪問權限。 因此，我們會提醒您採取所有必要步驟來保護您的管理員，包括但不限於這些努力：

* IP允許清單
* [雙因素驗證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* 使用VPN
* 使用唯一位置，而非 `/admin`
* 密碼衛生

請參閱 [Adobe安全性公告](https://helpx.adobe.com/security/products/magento/apsb22-13.html) 以取得這些已修正問題的最新討論內容。

#### 其他安全性增強功能

此版本的安全性改善改善了對最新安全性最佳實務的合規性，包括：

* 2.3.4版中已棄用電子郵件變數用途，作為降低安全風險的一部分，改用更嚴格的變數語法。 此舊版行為已在此版本中完全移除，以延續降低安全性風險的措施。

   因此，在升級至Adobe Commerce 2.4.4或Magento Open Source2.4.4後，舊版Magento Open Source中可能無法正常運作的電子郵件或電子報範本。受影響的範本包括自訂模組或協力廠商擴充功能的管理員覆寫、主題、子主題和範本。 即使使用 [升級相容性工具](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html?lang=en) 以修正已棄用的用法。 請參閱 [移轉自訂電子郵件範本](https://developer.adobe.com/commerce/frontend-core/guide/templates/email-migration/) 以了解移轉受影響範本的潛在影響和准則。

* 整合Token無法再用於API承載Token驗證。 之前，整合Token可作為Token型驗證的獨立金鑰。 不過，由於從未到期的存取權杖的安全性影響，此行為預設已停用。 可透過命令列或「管理員」啟用先前的行為。 請參閱 [基於令牌的驗證](https://developer.adobe.com/commerce/webapi/get-started/authentication/gs-authentication-token/). <!-- AC-1619 -->

* 工作階段ID不再儲存在資料庫中。 <!-- AC-522-->

* OAuth存取權杖和密碼重設權杖現在儲存在資料庫時會經過加密。 <!-- AC-520 1323-->

* 已增強驗證功能，以防止上傳非英數字元副檔名。 <!-- AC-479-->

* 將reCAPTCHA支援新增至抵用券代碼。 <!-- AC-461-->

* 現在當Magento Open Source處於生產模式時，預設會停用Swagger。 <!-- AC-1450-->

* 現在預設會為Magento Open Source店面啟用HTTPS。 此 **在店面上使用安全URL** 和 **在管理中使用安全URL** 預設會啟用設定，且所有內建cookie現在都設為安全。  <!-- AC-1173-->

* 所有Magento Open Source安裝現在都需要相依性混淆外掛程式。 以前，只有以撰寫器為基礎的安裝才需要此外掛程式。 現在允許使用受信任的版本。 商家可以略過此外掛程式中設定的限制，禁止某些撰寫器安裝組合。 您可以針對信任的版本略過這些限制，而Magento Open Source現在會在繼續安裝前顯示警告。  <!-- AC-501 970-->

* 開發人員現在可以針對每個端點設定Magento Open SourceRESTful端點所接受的陣列大小限制。 請參閱 [API安全性](https://developer.adobe.com/commerce/webapi/get-started/api-security/). <!-- AC-465-->

* 已新增機制，以限制使用者可透過Web API在全系統要求的資源大小和數量，以及覆寫個別模組的預設值。 如此可解決 `MC-43048__set_rate_limits__2.4.3.patch`. 請參閱 [API安全性](https://developer.adobe.com/commerce/webapi/get-started/api-security/). <!-- AC-1120-->

### 平台增強功能

Magento Open Source2.4.4現在支援PHP 8.1。已更新所有項目庫和依賴項以與PHP 8.1相容。其他平台增強功能包括：

* Magento Open Source2.4.4支援Elasticsearch7.16和OpenSearch 1.2。部署在本地的應用程式開放原始碼商戶可以使用任一解決方案。 不過，OpenSearch現在是托管於雲端之Magento Open Source2.4.4部署的預設搜尋引擎。 升級至2.4.4版的所有雲端部署客戶都必須使用OpenSearch。 請參閱 [在Cloud 2.4.4上切換為OpenSearch for Adobe Commerce](https://support.magento.com/hc/en-us/articles/4419942355725-Switching-to-OpenSearch-for-Adobe-Commerce-on-Cloud-2-4-4)

* 此 `JQuery` 程式庫已升級至3.6版。 `jquery-ui` 程式庫已升級到1.13.0版。其他多個JavaScript程式庫已更新到最新版本。

* 現在支援TinyMCE 5.8.1。 TinyMCE 4已從代碼庫中刪除。 <!-- AC-41-->

* 此 `RequireJS` 程式庫已升級至最新版本(v2.3.6)。 [GitHub-33672](https://github.com/magento/magento2/issues/33672) <!-- AC-40 422-->

* PHPUnit已升級至最新版本(9.5.x)。 測試和測試架構已更新，以與新版本相容。 <!-- AC-404-->

* 大多數Laminas依賴項已升級到與PHP 8.1相容的最新版本。從代碼庫中刪除了三個Laminas依賴項，以減少依賴項的數量。

#### jQuery UI升級

jQuery UI已升級至最新版本(v1.13.0)。 已移除下列v1.10.0 jQuery元件：

* `ajaxOptions` 和 `cache` 選項。 請參閱 [標籤](https://jqueryui.com/changelog/1.10.0/#tabs).

* `.zIndex()`. jQuery UI v1.12.1包含 `jquery/z-index.js`，支援使用 `.zIndex()`. 請參閱 [UI核心](https://jqueryui.com/changelog/1.12.0/#ui-core).

* 介面工具集名稱的資料回傳。 您必須將完整名稱用於 `.data()` 鍵。

* 類的硬編碼，例如 `ui-corner-all` 在Widget中。

### GraphQL

此版本包含下列GraphQL增強功能：

* **效能改善**:

   * GraphQL購物車操作的效能已有所改善。 此 `collectQuoteTotals()` 現在，在GraphQL請求期間只呼叫方法一次，可縮短回應時間。 <!-- PWA-2110-->

   * Storefront效能因GraphQL請求快取方式的變更而有所改善。 現在， Emplith and Quiest可快取隨 `auth` 代號。 <!-- PWA-1817-->

* **新店面相關管理配置設定**. 此 `storeConfig` 查詢現在會傳回零小計結帳和支票/貨幣訂單付款方法的組態設定。 <!-- PWA-1576-->

* **更新核心GraphQL程式庫**. 此 `webonyx` 使核心GraphQL能夠運行的庫已升級到^14.9版。 <!-- PWA-2137 2184 -->

* **修正具有多網站和多語言存放區的GraphQL翻譯問題**. GraphQL解析程式現在會根據預期的儲存範圍傳回轉譯的字串。 <!-- PWA-1946-->

* GraphQL現在提供新舊項目及描述性交易名稱，有助於除錯。 [GitHub-30915](https://github.com/magento/magento2/issues/30915) <!-- PWA-1311-->

請參閱 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 以取得這些增強功能的詳細資訊。

### 廠商套件擴充功能

除 [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)，所有廠商套件的擴充功能已從Magento Open Source2.4.4程式碼基底中移除。 商戶應移轉至官方擴充功能，這些功能可在 [Commerce Marketplace](https://marketplace.magento.com/extensions.html).

[Amazon Pay](https://docs.magento.com/user-guide/payment/payments.html)

[dotdigital](https://docs.magento.com/user-guide/marketing/communications.html)

[克拉納](https://docs.magento.com/user-guide/payment/payments.html)

[頂點](https://docs.magento.com/user-guide/tax/taxes.html)

[YotPo](https://docs.magento.com/user-guide/marketing/product-reviews.html)

### PayPal支付增強功能

* 現在支援Venmo付款選項。  <!-- AC-1229-->

* 已新增「稍後付款」，作為根據購物者位置（而非商家位置）的購物者選項。

* 商戶現在可以在自己選擇的國家/地區測試購物者體驗時，設定購物者國家/地區。 以前，測試僅限於測試商家所在的國家。 此變更僅在沙箱模式中有效。

* 結帳頁面上的訊息現在會顯示使用「稍後付款」時，購物者預期要支付多少增量的準確訊息。

### 協助工具更新

此版本提供標準協助工具准則的增強一致性。 它包括改良的工具提示、螢幕元素的無障礙命名和標籤，以及重新設計的圖示和按鈕。 其中超過80%的修正有助於改善無視覺或有限視覺的使用者的購物體驗。

### 頁面產生器

商戶現在可以新增替代文字(`alt_text`)到影像（影像、橫幅、投影片），以增強內容協助工具。 [GitHub-746](https://github.com/magento/magento2-page-builder/issues/746) <!-- PB-1193-->

## 已修正問題

我們正在修正Magento Open Source2.4.4核心程式碼中的數百個問題。 以下是這些已修正問題的子集。

### 安裝、升級、部署

<!-- MC-42026-->

* Magento Open Source現在會如預期般記錄建置記錄檔中的靜態內容部署錯誤。

<!-- MC-43094-->

* 資料修補程式不能再忽略表的唯一約束，並將重複值插入MySQL資料庫表中。 以前，修補程式可能插入重複值，這會損壞資料庫。

<!-- AC-1480-->

* 商家現在可以透過Klarna成功從Magento Open Source2.4.2部署升級至Magento Open Source2.4.3。 [GitHub-33760](https://github.com/magento/magento2/issues/33760)

<!-- ACP2E-77-->

* 現在可以從命令列成功變更Sitemap產生器設定。 以前，當您嘗試在「管理員」外部變更Sitemap設定時，applicationOpen Source會顯示此錯誤： `Import failed: Notice: Trying to access array offset on value of type null in app/code/Magento/Cron/Model/Config/Backend/Sitemap.php on line 78`.  [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-215-->

* 此 `bin/magento app:config:import` 更新時，命令現在會無錯誤地執行 `time` 值 `config.php`. 過去，透過手動編輯變更產品警報設定（即不使用管理員）會導致錯誤。

### 協助工具

<!-- AC-1589-->

* 已解決購物車和結帳頁面上導覽的協助工具錯誤。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* 螢幕助讀程式現在可以閱讀產品頁面上所有相關的表單元素。

<!-- AC-1277-->

* 整個店面的影像刪除和移動圖示按鈕對比度已有所改善，以改善低視覺使用者的可讀性。

<!-- AC-1272-->

* 在整個產品介面中，用於執行搜尋的放大鏡圖示已指派一個可存取的名稱和文字替代方案。

<!-- AC-1275-->

* RTF編輯器工具列現在可使用Tab鍵存取。

<!-- AC-1283-->

* 此 **此項目具有權重** 在上選取輸入 **目錄** > **產品** 「詳細資訊」頁面現在提供可見的標籤和可存取的名稱。

<!-- AC-1284-->

* 控制項的可存取名稱現在包含其可見標籤的文字，以表示每頁的項目數下拉式清單。

<!-- AC-1287-->

* 表格控制項 **目錄** > **產品** 折疊表格時，「詳細資訊」頁面現在會顯示可見標籤和可存取的名稱。

<!-- AC-1288-->

* 「產品」表格中的編輯連結現在具有唯一且有意義的連結文字。

<!-- AC-1276-->

* 展開工具提示的觸發器現在會提供文字名稱。

<!-- AC-1285-->

* 整個店面的按鈕現在都有可描述的不重複名稱。 以前，帶有文字按鈕和相鄰向下箭頭表徵圖按鈕的拆分按鈕具有相同的可訪問名稱。

<!-- AC-1277-->

* 整個店面的影像刪除和移動圖示按鈕對比度已有所改善，以改善低視覺使用者的可讀性。

<!-- AC-1279-->

* 已新增文字替代項目至商人編輯「搜尋引擎最佳化」設定追蹤器輸入時顯示的鉛筆圖示。

<!-- AC-1272-->

* 在整個產品介面中，用於執行搜尋的放大鏡圖示已指派一個可存取的名稱和文字替代方案。

<!-- AC-1286-->

* 產品頁面 **新建視圖** 文字輸入欄位現在具有可存取的名稱。

<!-- AC-1283-->

* 此 **此項目具有權重** 在上選取輸入 **目錄** > **產品** 「詳細資訊」頁面現在提供可見的標籤和可存取的名稱。

### 後端

<!-- MC-43161-->

* 管理員現在可以登入已設定自訂管理員路徑且已啟用機密金鑰的部署。 以前，applicationOpen Source會顯示此錯誤： `Invalid security or form key. Please refresh the page`.

<!-- MC-41949-->

* 當多商店階層變更時，Magento Open Source不再重新導向至「所有商店檢視」範圍。 先前，儲存階層後，購物者會重新導向至錯誤的商店URL，而且在多商店部署中選取了「所有商店檢視」範圍。

### 捆綁產品

<!-- MC-42885-->

* 購物者現在可以新增附有「固定產品稅」和兩個選項的套件產品至購物車。 以前，applicationOpen Source未新增產品，並顯示此錯誤： `We can't add this item to your shopping cart right now`.

<!-- MC-42249-->

* 表單驗證，形式為 `data-validate` 和 `min` 屬性已新增至購物車數量欄位，以防止捆綁產品出現負值。

<!-- MC-41794-->

* 此 `products` 現在當商店檢視層級停用子產品時，查詢會篩選器套裝產品。 以前，查詢會傳回在商店檢視層級停用的子產品。

<!-- MC-42811-->

* `cron` 現在會如預期清除產品類別快取，期間 `indexer_update_all_views` 執行。 以前，在對類別中的許多產品進行成批更新後，applicationOpen Source在類別頁上顯示了不正確的產品計數。

<!-- MC-42811-->

* Magento Open Source現在會在套件組合產品重新出現時，如預期般更新類別產品快取。

<!-- AC-715-->

* 對於使用不同貨幣的多商店部署中的套件產品購買，貨幣轉換現在會如預期發生於電子郵件確認中。 [GitHub-33426](https://github.com/magento/magento2/issues/33426)

<!-- ACP2E-64-->

* 對於產品格線中具有%前置詞的捆綁產品，現在會正確顯示進階定價特價折扣。 之前，產品格線中的%折扣錯誤顯示為$前置詞，而非%。

<!-- ACP2E-262-->

* 現在，當相關產品變更其狀態時，管理員中的套件產品狀態會自動更新。

<!-- ACP2E-326-->

* 套件產品的GraphQL解析程式現在會檢查子套件產品是否已停用。 以前，此檢查不會發生，並會查詢此類 `categoryList` 還了不可售的子產品。

<!-- MC-43223-->

* `cart` 查詢回應現在會針對具有動態價格的套件產品傳回精確折扣。 以前，查詢回應會包含個別套用至每個套件產品的折扣。

### 快取

<!-- MC-42811-->

* 重新索引期間執行的快取清除演算法已最佳化。 在重新索引期間快取類別時，套件組合產品現在會如預期顯示。 以前，在重新索引期間快取產品類別後，套件組合產品不會在數小時內顯示。

<!-- AC-328-->

* 一般使用下頁面快取不再快速成長。 [GitHub-9458](https://github.com/magento/magento2/issues/9458)

<!-- magento/magento2/pull/33468-->

* 下訂單不再導致從清漆快取中刪除與訂購產品相關的所有快取標籤。 [GitHub-30128](https://github.com/magento/magento2/issues/30128)

<!-- AC-1478-->

* 從頂層類別更新產品或執行索引以更新產品屬性或庫存狀態時，全網站頁面快取不再消失。 之前，清漆快取會將頂端功能表類別ID新增至所有頁面快取標籤中。 [GitHub-33465](https://github.com/magento/magento2/issues/33465)

### 購物車和結帳

<!-- MC-41494-->

* 最低廣告價格 **這是什麼？** 現在可點按購物車頁面上的連結，並如預期開啟資訊快顯視窗。 之前，點按此連結沒有作用。

<!-- MC-42639-->

* 在啟用永久性購物車的部署中，當工作階段逾時後，購物者現在可以下單而無錯誤。 以前，applicationOpen Source會在工作階段逾時後顯示付款錯誤。

<!-- MC-42638-->

* 將高排序順序值指派給客戶位址屬性，不再導致結帳頁面的效能下降。

<!-- MC-42813-->

* Magento Open Source現在會在更新的數量無效時，將購物車產品數量回復為上一個值。

<!-- MC-42347-->

* 按一下 **新增至購物車** 「最近查看的」區段中的按鈕現在會如預期重新導向至產品詳細資料頁面。 之前，購物者會重新導向至產品清單頁面。

<!-- MC-33705-->

* 訪客購物者現在可以成功結帳至包含數種自訂客戶位址屬性的客戶位址。 以前，在結帳期間顯示自訂屬性的值時，格式不正確。 [GitHub-30290](https://github.com/magento/magento2/issues/30290)

<!-- MC-24379-->

* Magento Open Source現在在啟用表格費率時，可正確將免運費臨界值套用至訂單。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- AC-271-->

* 您現在可以使用 `POST /V1/guest-carts/:cartId/items` 將具有不同選項的簡單產品添加到購物車中。 以前，此呼叫會變更您新增的第一個簡單產品的數量，而非使用指定選項新增第二個簡單產品。 [GitHub-32302](https://github.com/magento/magento2/issues/32302)

<!-- AC-1089-->

* 現在，當部署設定為 `Poland` 國家/地區 `PLN` 貨幣。 之前，購物車和結帳頁面會顯示金額 **0茲羅提**.

<!-- MC-32805-->

* Magento Open Source在購物者點按時不再擲回錯誤 **更新購物車** 在迷你購物車中變更產品數量後。 以前，applicationOpen Source會顯示此錯誤：  `The quote item isn't found. Verify the item and try again`.

<!-- MC-43176-->

* GraphQL `products` 特定商店中可設定產品的查詢現在只會傳回指定商店中產品的價格範圍。 以前，請求會傳回未指定商店上簡單產品的價格範圍。

<!-- AC-691-->

* 當購物者新增缺少街道欄位的計費地址時，Magento Open Source不再擲回此錯誤： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`. [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- AC-1625-->

* Magento Open Source在已移除迷你購物車的商店結帳期間，不再擲回主控台錯誤。 [GitHub-34513](https://github.com/magento/magento2/issues/34513)

<!-- AC-691-->

* 當帳單地址缺少街區欄位值或街區欄位值不是陣列時，在付款階段結帳不再失敗。 以前，簽出失敗，此錯誤為： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`. [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- ACP2E-10-->

* 現在，當兩個購物車規則套用至符合下列條件的訂單時，Magento Open Source可正確計算折扣：一個購物車規則套用了抵用券代碼和 **整個購物車的固定價格**  條件和第二個購物車價格規則沒有抵用券和 **產品價格折扣百分比** 條件。 以前，當先前的購物車規則已對某些產品套用折扣時，相關演算法無法將折扣適當地分割到購物車產品中。

<!-- ACP2E-22-->

* 「抵用券」報表格線現在可正確計算銷售總額。 以前，銷售總額不包括運費。

<!-- ACP2E-44-->

* 現在當購物者在運送方式之間切換時，可正確計算整車折扣。

<!-- ACP2E-159-->

* 的下拉式清單 **狀態** 「管理員建立訂單」頁面上的欄位現在會由所選國家/地區的預先定義值填入。 此欄位之前是輸入文字欄位，而非下拉式功能表。

<!-- ACP2E-172-->

* Magento Open Source在您使用 `addConfigurableProductsToCart` 變更商店檢視後，直接將可設定產品新增至購物車的變異。

<!-- ACP2E-176-->

* Magento Open Source在您使用 `addConfigurableProductsToCart` 突變，將可配置產品的禁用子項添加到購物車。 以前，applicationOpen Source擲回完整性約束違反錯誤。

<!-- ACP2E-157-->

* 如果套用抵用券的訂單失敗，抵用券使用值就不會再變更。  之前，在購物車中套用抵用券後，單次使用自動產生的抵用券會標示為無效，但訂單並未下達。

<!-- ACP2E-137-->

* 已新增驗證至結帳工作流程，以比較客戶的街道地址與預設值。 如果驗證程式識別變更，則會設定 `customer_address_id` to `null` 將其視為新客戶地址。 以前，如果客戶在結帳時未進行驗證便儲存了地址，而在驗證套用至結帳欄位後，同一客戶嘗試使用相同的地址下單，則應用程式「開放原始碼」不接受編輯過的地址並擲回例外狀況。

### 購物車價格規則

<!-- MC-42288-->

* 現在會封鎖產生抵用券，直到相關購物車價格規則與 `auto` 選項啟用。 如果您嘗試儲存此規則，但未啟用 `auto` 選項中，應用程式Open Source將顯示以下消息： `Rule is not saved with auto generate option enabled. Please save the rule and try again`.

<!-- MC-42743-->

* 已新增確認正確套用購物車價格規則折扣的測試。

<!-- ACP2E-213-->

* 搭配以下項目使用SKU條件的購物車價格規則 **如果在購物車中找到/找不到項目，且所有/任何這些條件都成立** 現在可設定產品可如預期般運作。

<!-- ACP2E-225-->

* 現在，固定價格捆綁產品可正確套用購物車價格規則。 以前，當至少一個子產品在規則條件中指定了相同屬性集時，購物車價格規則不適用於這些產品。

<!-- ACP2E-285-->

* 現在，當Magento Open Source設定為 **整個購物車的固定金額折扣** 購物車價格規則。 以前，applicationOpen Source會顯示此錯誤：  `report.ERROR: Warning: Division by zero in /home/mer33515/public_html/ee24develop/app/code/Magento/SalesRule/Helper/CartFixedDiscount.php on line 85`.

<!-- ACP2E-306-->

* 修正 `cart` 啟動具有固定金額折扣的購物車規則時，查詢傳回的折扣金額不正確。

### 目錄

<!-- MC-41796-->

* Magento Open Source在產品具有 `datetime` 屬性。

<!-- MC-42571-->

* 現在，GraphQL查詢會根據子產品的可見性篩選設定，傳回可設定產品的子產品的結果。

<!-- MC-41853-->

* 當可設定產品屬性變更時，Magento Open Source不再修改相關產品價格。 以前，可配置產品的最低廣告價格(MAP)覆蓋了商店前端的相關產品的價格。

<!-- MC-41796-->

* Magento Open Source在產品具有 `datetime` 屬性。

<!-- MC-42132-->

* 管理員產品格線和篩選器的下拉式/多選屬性值現在可如預期從管理員設定衍生。 以前，屬性值是從預設商店設定衍生而來。

<!-- MC-43010-->

* GraphQL類別查詢會如預期傳回階段類別變更的相關資訊。

<!-- AC-711-->

* 現在，在部署中，產品清單會同時指派給父類別及其子類別，但在每個類別中的不同位置，可以在管理員中正確轉譯。 以前，產品清單呈現失敗，出現此錯誤： `Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "<ID>" already exists`. [GitHub-33145](https://github.com/magento/magento2/issues/33145)

<!-- AC-1148-->

* 現在可以將具有許多選項（超過150個）的多選屬性指派給新產品。 之前，屬性選項會儲存在 `catalog_product_entity_varchar` 表格中顯示，而且並非所有選項都會在您在「管理員」中重新開啟產品時顯示。 [GitHub-33486](https://github.com/magento/magento2/issues/33486)

<!-- AC-904-->

* 新增驗證，說明路由器無法實例化從URL收集的動作類別。 應用程式「開放原始碼」現在會顯示標準錯誤訊息。 以前，applicationOpen Source會顯示此錯誤：  `PHP Error: Cannot instantiate abstract class Magento\Catalog\Controller\Product\Compare`.

<!-- ACP2E-115-->

* 將許多產品（約10,000個）指派至類別時，不再導致瀏覽器當機。

<!-- ACP2E-122-->

* 無論是從管理員儲存還是匯入，影像屬性現在都會一致地儲存在資料庫中。 以前，影像ALT文字值的儲存不一致。 如果映像存在且標籤設定為null，則不會在資料庫中重置標籤值。

<!-- ACP2E-155-->

* 目錄介面工具集SQL查詢已優化。 以前，大型MySQL查詢會減緩頁面載入速度，並導致MySQL中斷。

<!-- ACP2E-165-->

* 價格篩選器現在可搭配無存貨的可設定產品正常運作。 以前，無庫存可配置產品不會以其正確的價格範圍顯示。

<!-- ACP2E-330-->

* 在部分索引過程中，更新子產品不再刪除從其父可配置產品繼承的目錄規則折扣。 以前，當我們將可配置產品分配給某個類別，但不是其關聯的簡單產品，然後使用該類別建立目錄規則時，應用程式開放原始碼將在部分索引過程中刪除分配給簡單產品的目錄規則。

<!-- ACP2E-216-->

* 現在，在添加產品選項時，分組和可配置產品的網格視圖清單僅包含簡單和虛擬產品。 之前，應用程式包含帶有選項的簡單產品。

### 目錄規則

<!-- MC-41807-->

* 目錄規則的每日更新不再導致效能下降。 以前，部分目錄產品價格索引沒有刪除舊的價格或日期。

<!-- MC-38263-->

* Magento Open Source在部分重新索引期間不再移除可設定產品的目錄價格規則。 以前，在可配置產品重新索引時，只會重新索引子產品。

<!-- ACP2E-331-->

* 目錄價格規則與 **category不是category_id** 條件現在適用於不屬於任何類別的產品。

### 可配置產品

<!-- MC-42188-->

* 現在，可設定的產品選項標籤名稱是根據建立管理訂單期間選取的商店檢視而定。 以前，applicationOpen Source使用預設商店視圖中的標籤名稱。

<!-- MC-42187-->

* 啟用顯示無存貨產品的全域旗標時，產品清單現在會正確包含無存貨產品的子產品。 以前，如果啟用此標幟時，數個子產品選項之一無存貨，產品清單就不會包含子產品。

<!-- MC-42340-->

* 您現在可以使用 `addConfigurableProductsToCart` 突變，可在非預設商店檢視中將可設定產品新增至購物車。 以前，當網站ID和商店ID不同時，您無法將可設定的產品新增至購物車。 [GitHub-30948](https://github.com/magento/magento2/issues/30948)

<!-- MC-43051-->

* GraphQL `products` 查詢不再傳回關於可設定產品的已停用子產品的資料。

<!-- ACP2E-101-->

* 為可設定產品建立新配置不再覆蓋現有配置中的更改。 以前，現有變數的狀態會以預設狀態覆寫 `enabled` 產生新變數後。

<!-- ACP2E-175-->

* 當您嘗試將可設定產品的已停用子項新增至購物車時，Magento Open Source不再擲回內部錯誤。

### 客戶

<!-- MC-24204-->

* Magento Open Source現在會在建立訂單時考慮管理區域設定的網站範圍。 以前，訂單詳細資訊（例如客戶地址屬性）只能在多網站部署中，才能在一個網站上正常運作。 [GitHub-23254](https://github.com/magento/magento2/issues/23254)

### 電子郵件

<!-- MC-42592-->

* 現在，當客戶嘗試使用無效的電子郵件帳戶登入時，結帳登入快顯視窗中的電子郵件欄位驗證錯誤會與客戶登入頁面上的電子郵件驗證錯誤相符。

<!-- MC-42764-->

* Magento Open Source從管理員新增發運註解時，發運詳細資料電子郵件中不再包含錯誤訊息，且 **通知客戶** 核取方塊已啟用。 之前，運送確認電子郵件包含以下訊息： `We're sorry, an error has occurred while generating this content`.

<!-- MC-42486-->

* 地區和國家/地區ID值現在可在電子郵件範本中正確轉換。 之前，當您按一下 **預覽連結** 從「管理員電子郵件」範本中，無法正確顯示國家/地區名稱和地區名稱。

<!-- MC-36262-->

* 管理員針對非預設商店檢視傳送的銷售更新電子郵件現在包含正確的訂單狀態標籤。 以前，這些電子郵件一律會從預設商店顯示狀態。 [GitHub-29263](https://github.com/magento/magento2/issues/29263)

<!-- AC-721-->

* Magento Open Source現在包含 `Content-Disposition: inline` 電子郵件中的標題。 [GitHub-29258](https://github.com/magento/magento2/issues/29258)

<!-- magento/magento2/pull/32720-->

* 現在，使用Microsoft Outlook和MS Exchange Server的部署中，訂單和發運通知電子郵件可如預期運作。 之前，電子郵件內文是空白的，但包含ATT*標示的附件。 [GitHub-25076](https://github.com/magento/magento2/issues/25076)

<!-- ACP2E-47-->

* 訂單電子郵件現在包含使用購物者地區設定本地化的資料，如預期。 之前，訂購電子郵件使用「管理區域設定」。

<!-- ACP2E-107-->

* 按一下任何電子郵件範本的預覽，現在會如預期在個別視窗中開啟範本預覽。  以前， applicationOpen Source會從「電子郵件範本」格線和彈出式視窗中同時開啟範本預覽。

<!-- ACP2E-127-->

* 從非預設網站傳送的非同步訂購電子郵件現在包含適當網站的標誌URL。 以前，這些電子郵件一律會包含預設或主要網站的標誌。 (預設鍵，包含 `storeCode` 值已指派給傳遞至的第二個陣列引數 `UrlInterface` `getUrl` 函式。 此值會區分不同商店/網站的URL，並產生正確的 `baseUrl` （適用於傳送給客戶的電子郵件內容）。

### 框架

<!-- AC-515-->

* 數字與非數字字串之間的非嚴格比較，現在可將數字轉換為字串，並比較字串。 數字與數值字串之間的比較仍一如既往。 這表示 `0 == "not-a-number"` 現在則視為false。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-1338-->

* 幫手 `Magento\Payment\Helper\Data` 不再在建構子中建立新佈局。 以前，當在自定義命令中使用此幫助程式時，未指定區域代碼，Magento Open Source會擲回錯誤。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1068-->

* 更新 `allure-framework/allure-php-api` 撰寫器相依性。

<!-- MC-42091-->

* Magento Open Source現在會在引導檔案中發生例外時傳回500回應代碼。 以前，applicationOpen Source會傳回200 OK狀態代碼。 [GitHub-22196](https://github.com/magento/magento2/issues/22196)

<!-- AC-1318-->

* 貨幣符號現在會如預期般載入店面產品詳細資料頁面上。 以前，JavaScript頁面重新載入後，此符號有時會消失。

<!-- AC-719-->

* 更新 `symfony/console` 執行時不再造成失敗 `bin/magento setup:di:compile`. [GitHub-33595](https://github.com/magento/magento2/issues/33595)

<!-- AC-1504-->

* 新增必要選項至 `.htaccess` 和 `nginx.conf` 隨PHP 8.x支援Magento Open Source分發的檔案。 已過時的選項也已移除。 [GitHub-34358](https://github.com/magento/magento2/issues/34358)

<!-- MC-42448-->

* 商家現在可以上傳多種產品的影片。 現在，只有當上傳的檔案名稱包含副檔名時，檔案產生程式才會將副檔名附加至檔案名稱。 以前，當商家嘗試上傳並儲存兩個不同產品的相同視訊時，應用程式開放原始碼擲回此錯誤： `Notice: Undefined index: extension in /app/7ha7zds7wvqys_stg/vendor/magento/framework/File/Uploader.php on line 699`. 發生此問題是因為Magento Open Source嘗試將副檔名附加至名稱，而不論上傳的檔案名稱是否有副檔名。

<!-- magento/magento2/pull/34106-->

* 修正 `sprintf(__())` 和 `sprintf(Magento\Framework\Phrase())` 構建整個代碼庫與PHP 8.x的相容性。 以前，applicationOpen Source擲回了以下類型的錯誤： `Expected parameter of type 'string', 'Magento\Framework\Phrase' provided`. [GitHub-34085](https://github.com/magento/magento2/issues/34085)

<!-- AC-1605-->

<!-- MC-42934-->

* 改善進階搜尋查詢參數的驗證。 [GitHub-33589](https://github.com/magento/magento2/issues/33589)

<!-- ACP2E-69-->

* 執行中 `bin/magento support:backup:code` 現在會如預期建立備份。 以前，applicationOpen Source建立了備份，但擲回了錯誤。

<!-- ACP2E-82-->

* 已成功執行 `cron` 程式現在已指派為 `success`. 以前， `cron` 由於成功，進程可能運行兩次 `cron` 進程被分配 `pending` 狀態。

<!-- ACP2E-102-->

* 此 `Magento_Logging` 模組現在支援IPv6。

### 一般修正

<!-- MC-42506-->

* Magento Open Source現在複製產品時，會根據其定義的範圍複製所有產品欄位。 之前， **名稱** 和 **說明** 欄位重設為 `global` 範圍。

<!-- MC-42612-->

* 當產品價格為0時，Magento Open Source不再對折扣套用增量捨入。 以前，applicationOpen Source計算了負折扣額。

<!-- MC-42215-->

* 產品 **設為新** 已指派空白開始日期和過期結束日期的屬性現在可成功儲存。 以前，當您使用下列設定儲存產品時，applicationOpen Source會擲回此錯誤： `Make sure the To Date is later than or the same as the From Date`.

<!-- MC-42775-->

* 管理員現在可以重試已在最長處理時間內執行的操作。 預設上限為12小時。

<!-- MC-42514-->

* 大量動作處理期間不再發生管道中斷錯誤，因為消費者未確認的訊息。 預先擷取計數屬性現在會限制使用者的這些訊息，並避免錯誤。 之前，執行中 `bin/magento queue:consumers:start async.operations.all` 生成此錯誤：  `Broken pipe or closed connection`.

<!-- MC-42075-->

* 第二次登入嘗試失敗後，購物者現在會如預期重新導向回登入頁面。 之前，嘗試第二次登入失敗後，購物者會重新導向至404頁面。 [GitHub-32885](https://github.com/magento/magento2/issues/32885)

<!-- magento/magento2/pull/25279-->

* 密碼重設權杖有效性已延長，以避免在提交密碼變更頁面期間出現競爭條件。 [GitHub-29647](https://github.com/magento/magento2/issues/29647)

<!-- AC-1316-->

* 指派給新整合的權限現已開放使用。 [GitHub-33347](https://github.com/magento/magento2/issues/33347)

<!-- AC-1328-->

* 修正影響「聯絡人」表單之例外記錄中所留訊息的回歸問題。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- magento/magento2/pull/31654-->

* 解決JavaScript載入客戶資料的多個問題。 [GitHub-30498](https://github.com/magento/magento2/issues/30498)

<!-- magento/magento2/pull/33324-->

* 使用 `QuoteIdToMaskedQuoteId` 在擴充功能中，不會再大幅增加回應時間。 [GitHub-33676](https://github.com/magento/magento2/issues/33676)

<!-- AC-720-->

* 類別 `BundleDiscountPrice` in `magento2/app/code/Magento/Bundle/Pricing/Price/ConfiguredPrice.php` 現在已如預期般宣告。 以前，applicationOpen Source擲回此錯誤： `Class Magento\Bundle\Pricing\Price\BundleDiscountPrice not found`. [GitHub-33334](https://github.com/magento/magento2/issues/33334)

<!-- AC-1239-->

* 由AWS S3轉接器寫入的逸出CSV欄位值，現在會與其他檔案系統轉接器所寫入的資料相符。

<!-- MC-43046-->

* 現在支援S3相容儲存。 [GitHub-32114](https://github.com/magento/magento2/issues/32114)

<!-- ACP2E-123-->

* 從一部裝置登出時，不再從其他裝置自動登出購物者。

### GraphQL

<!-- PWA-1938-->

* 此 `generateCustomerToken` 和 `revokeCustomerToken` 現在，突變為用戶狀態提供了正確的快取ID。 以前，這些突變使用的是無效的 `x-magento-cache-id`，會降低效能。

<!-- PWA-1506-->

* 此 `setBillingAddressToCart` 變異現在正確使用 `same_as_shipping` 參數，以設定與發運地址相符的開單地址。 以前，applicationOpen Source會顯示此錯誤： `The shipping method is missing. Select the shipping method and try again`. [GitHub-30924](https://github.com/magento/magento2/issues/30924)

<!-- PWA-1980-->

* GraphQL購物車操作現在只會在查詢請求時計算購物車總量。 以前，購物車作業一律會計算總計，這是耗用大量資源的作業。

<!-- MC-42781-->

* 此 `addProductsToCart` 變異現在只會新增至指派給標題中定義之商店的產品。

<!-- MC-42783-->

* `products` 使用分層導航篩選器的查詢現在返回正確的子類別清單。 [GitHub-33387](https://github.com/magento/magento2/issues/33387)

<!-- MC-42831-->

* 返回 `ConfigurableCartItem` 物件包含如預期所設定變體的相關資訊。

<!-- MC-42082-->

* 此 `products` 查詢現在會傳回設定產品選項值和變體屬性值。 以前，這些值在查詢回應中為空。

<!-- MC-41794-->

* 此 `products` 現在當商店檢視層級停用子產品時，查詢會篩選器套裝產品。 以前，查詢會傳回在商店檢視層級停用的子產品。

<!-- MC-42903-->

* 此 `setShippingAddressesOnCart` 變異現在支援在購物車上設定運送地址，且當 **顯示電話** 管理配置設定設為可選。 以前，applicationOpen Source擲回此錯誤： `Field CartAddressInput.telephone of required type String! was not provided`.

<!-- MC-42970-->

* 修正 `addSimpleProductsToCart` 變異可讓您將簡單產品新增至未指派給目標網站的購物車。

<!-- MC-42600-->

* MySQL查詢已針對GraphQL而優化 `products` 使用搜尋參數來調整搜尋結果的查詢。

<!-- MC-43189-->

* 此 `addConfigurableProductToCart` 如果產品未包含在請求的範圍中，則變異不再支援將產品添加到購物車中。

<!-- MC-42666-->

* 此 `products` 查詢現在只會傳回指派給請求的storeview的可設定變體。 以前，會傳回所請求可設定產品的所有變體。

<!-- MC-42652-->

* `addSimpleProductsToCart` 請求現在可以同時成功執行。 過去，對相同SKU提出多項請求，會為相同購物車ID建立重複的條列項目，而非如預期般增加產品數量。

<!-- AC-856-->

* 此 `addProductsToCompareList` 變異現在可用於比較可配置產品的變體。

<!-- MC-42443-->

* 從後端更新階層產品的價格時，新的價格會在客戶的購物車上正確更新。 以前，雖然購物車摘要區段中的小計已正確更新，但列小計並未更新。

<!-- AC-697-->

* 此 `addProductsToCart` 變異現在會在購物車中新增所有選取的選項，以便新增具有多個選取選項的捆綁產品。 以前，變異只增加了最後一個選擇。 [GitHub-33123](https://github.com/magento/magento2/issues/33123)

<!-- MC-38815-->

* 當可選電話欄位的值設為空字串時，GraphQL查詢現在會如預期傳回帳單地址。 以前，查詢返回了空地址值。 [GitHub-30218](https://github.com/magento/magento2/issues/30218)

<!-- ACP2E-51-->

* 此 `products` 當多個產品具有相同的相關性或價格值時，查詢回應現在會根據指定的排序順序列出產品。

<!-- ACP2E-75-->

* 同時 `addSimpleProductsToCart` 和 `addProductsToCart` 請求不再產生重複的報價項目。

<!-- ACP2E-76-->

* `products` 查詢分層導覽篩選器現在會傳回正確的子類別清單。 現在，只有直接子類別才會包含在 `includeDirectChildrenOnly` 要求中會提供標幟。 以前，當產品指派給數個類別時，所有類別都會納入回應的匯總區段中。

<!-- ACP2E-132-->

* 新增GraphQL搜尋查詢的搜尋建議功能。

<!-- ACP2E-288-->

* 此 `OrderAddress.telephone` 欄位現在在中為選填 `customer` 返回或修改客戶訂單地址的查詢或其他查詢和突變。

<!-- ACP2E-278-->

* 透過API變更群組ID時，現在會為店面和管理員中指定群組的客戶正確更新價格。 過去，當透過API變更群組ID時，這些價格無法正確更新。

### 影像

<!-- MC-42080-->

* 具有透明背景的水印影像在其覆蓋的透明產品影像上不再具有白色背景。 以前，當水印影像和產品影像都具有透明背景時，水印會以白色背景顯示。

<!-- AC-1240-->

* 現在起，當啟用AWS S3時，發票和運送收據的標誌會如預期般上傳和顯示。

<!-- MC-42160-->

* 與新增至部署中CMS頁面的影像相關聯的媒體標籤（管理員設為與儲存URL不同的網域）現在會如預期般包含儲存URL。 之前，媒體標籤包含靜態管理URL，而非預期的存放區URL。 [GitHub-32930](https://github.com/magento/magento2/issues/32930)

<!-- ACP2E-315-->

* Magento Open Source在店面上同時載入影像時，排清影像快取時不再擲回錯誤。

### 匯入/匯出

<!-- AC-1486-->

* `bin/magento remote-storage:sync` 檔案名稱類似但僅以一或兩個字元不同時，不再失敗。 之前，第一個影像會正確儲存，但第二個影像（類似地命名）會觸發同步失敗，而此錯誤： `Notice: Undefined index: media/catalog/product/5/_ in /src/vendor/magento/module-remote-storage/Driver/Adapter/Cache/Generic.php on line 197`. [GitHub-34337](https://github.com/magento/magento2/issues/34337)

<!-- MC-41672 23734-->

* Magento Open Source現在會在排程匯出後，將匯出檔案名稱中的時間戳記轉換為使用者的時區。 以前，這些值不會轉換，而Magento Open Source會顯示UTC時間戳記。

<!-- MC-42330-->

* 同一個CSV檔案匯入多次時，Magento Open Source不再在遠端儲存區中建立重複影像。

<!-- AC-1045-->

* 匯入不再因此訊息而失敗： `Import failed: Area code not set: Area code must be set before starting a session`. [GitHub-16171](https://github.com/magento/magento2/issues/16171)

<!-- AC-988-->

* 您現在可以在執行後成功匯入 `bin/magento app:config:dump` 和手動編輯 `config.php`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- MC-41672-->

* 非預設的多值分隔符號現在可用於自訂多選屬性。 以前，導入期間驗證失敗。 [GitHub-23156](https://github.com/magento/magento2/issues/23156)

<!-- ACP2E-86-->

* 現在從CSV匯入期間，可正確指派類別中的產品位置。

### 索引

<!-- MC-42791-->

* Magento Open Source現在會在重新索引後，如預期般在店面上顯示產品。 以前，當前重新索引的前500個產品有存貨，而後500個產品無存貨時，店面沒有顯示任何其他產品。

<!-- magento/magento2/pull/27212-->

* 已解決合併中的一致性問題 `indexer.xml` 檔案。 中的允許值 `classType` 在未合併和已合併中都相同 `indexer.xml` 檔案。 [GitHub-29609](https://github.com/magento/magento2/issues/29609)

<!-- AC-190-->

* 已在類別索引器中實作同步機制，以防止完整和部分索引器並行運行。 以前，當這些索引器並行運行時，可以暫時從店麵類別頁中忽略產品，或者類別頁中可能臨時忽略產品。

### 基礎設施

<!-- AC-1172-->

* 不支援的 `str_contains` 方法已取代為支援的函式。 這是Magento Open Source2.4.3的已知問題。 [GitHub-33680](https://github.com/magento/magento2/issues/33680)

<!-- magento/partners-magento2ee/pull/573-->

* 重構程式碼基底以正確使用關鍵字 `match`，是PHP 8.x中的保留關鍵字。 [GitHub-33626](https://github.com/magento/magento2/issues/33626)

* HTML標籤現在可正確巢狀和關閉，以符合JQuery 3.5.x中非void元素（包括自訂元素）的標準。 <!-- AC-1942-->

<!-- magento/magento2/pull/34234)-->

* 固定 `abs()` 和 `round()` 用於與PHP7.x和PHP8.x相容的函式。  [GitHub-34322](https://github.com/magento/magento2/issues/34322)

<!-- AC-719-->

* 更新 `symfony/console` 不再導致執行失敗 `bin/magento setup:di:compile`. [GitHub-33595 ](https://github.com/magento/magento2/issues/33595)

<!-- magento/magento2/pull/34175-->

* 修正 `colinmollenhour/cache-backend-redis` 撰寫器相依性。 [GitHub-34177](https://github.com/magento/magento2/issues/34177)

<!-- magento/magento2/pull/33932 magento/magento2/pull/33992-->

* 已重構程式碼基底，以移除對 `phpunit/phpunit`. [GitHub-33916](https://github.com/magento/magento2/issues/33916)

<!-- MC-42960-->

* Magento Open Source現在會在管理員具有唯讀 `pubs/media` 嘗試存取包含影像之產品的產品詳細資訊頁面。 之前，applicationOpen Source擲回PHP錯誤。 [GitHub-32819](https://github.com/magento/magento2/issues/32819)

<!-- AC-853-->

* 所有成員級別 `@api` 注釋在整個程式碼基底期間已移至其類別。

<!-- AC-1977-->

* `gift-card Cms` 介面工具集資料已從 `Magento/WidgetSampleData` (Magento Open Source) `Magento/GiftCardSampleData` (Adobe Commerce)。 這解決了在PHP8.1上安裝(Magento Open Source)示例資料的問題。

<!-- AC-1001-->

* 在整個Adobe Stock整合程式碼基底中標示介面，具有 `@api` 視需要。 [GitHub-32875](https://github.com/magento/magento2/issues/32875)

<!-- AC-1770-->

* 使用模擬準備語句時，現在使用本機PHP類型返回結果集中的整數和浮點數，而不是字串。 [GitHub-34625](https://github.com/magento/magento2/issues/34625)

<!-- AC-1697-->

* 已禁用從假值自動建立陣列，以確保與PHP 8.1相容。

<!-- AC-1338-->

* 幫手 `Magento\Payment\Helper\Data` 不再在建構子中建立新佈局。 以前，當在自定義命令中使用此幫助程式時，未指定區域代碼時，應用程式Open Source擲回錯誤。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1077-->

* 您現在可以傳遞 `data` 塊實例建構子的參數由 `di.xml`.

<!-- MC-43096-->

* 最佳化 `Generator.php` 以利閱讀。 [GitHub-33809](https://github.com/magento/magento2/issues/33809)

<!-- AC-1313-->

* 改善 `JwsManager` 類別，處理直接在標題中設定演算法的情況。 以前，此檢查會忽略此有效的案例。 [GitHub-32636](https://github.com/magento/magento2/issues/32636)

#### JavaScript相依性更新

<!-- magento/magento2/pull/33871-->

* `jquery-validate` 協力廠商程式庫 [GitHub-33853](https://github.com/magento/magento2/issues/33853)

<!-- ENGCOM-8667-->

* `Less.js` (v3.13.1) [GitHub-32845](https://github.com/magento/magento2/issues/32845)

#### 程式庫移除與淘汰

* 下列程式庫已移除，因為Magento Open Source2.4.x支援的所有瀏覽器都已內建支援此功能：

   * `es6-collections.js`   <!-- AC-18-->
   * `MutationObserver.js` <!-- AC-15-->
   * `Modernizr` <!-- AC-12-->
   * `FormData.js`

* 移除未使用的 `jquery.hoverIntent` JavaScript程式庫。 [GitHub-33732](https://github.com/magento/magento2/issues/33732) <!-- AC-97-->

* `lib/internal/Magento/Framework/Filter/Money.php` 已過時。 它包含 `money_format()` 函式，已在PHP 8.x中移除。 [GitHub-33870](https://github.com/magento/magento2/issues/33870)<!-- magento/magento2/pull/34366)-->

* 移除已棄用、不支援的 `grunt-autoprefixer` 包。 [GitHub-34037](https://github.com/magento/magento2/issues/34037) <!-- magento/magento2/pull/34032-->

#### 程式庫升級

* 下列程式庫已升級至更新版本：

   * `script.aculo.us` <!-- AC-363-->
   * `Chart.js`  <!-- AC-361-->
   * `moment.js` <!-- AC-11-->
   * `moment-timezone-with-data.js`   <!-- AC-10-->
   * `matchMedia.js` <!-- AC-8-->
   * `underscore.js`  <!-- AC-13-->
   * `PrototypeJS`  <!-- AC-17-->
   * `RequireJS`
   * `LessCSS`

### 發票

<!-- AC-1564-->

* 轉換至 `int` 已移除以字串為首碼時自動遞增的發票ID。 因此，發票現在會對首碼為字串的數字顯示0。 [GitHub-34451](https://github.com/magento/magento2/issues/34451)

### 記錄

<!-- MC-42360-->

* Magento Open Source不再為執行大量動作的失敗API呼叫建立記錄項目 **系統** > **大量動作**. 之前，失敗的API呼叫的永久項目已新增至大量動作記錄。

<!-- AC-1607-->

* 不再允許從假值自動建立陣列。 [GitHub-34499](https://github.com/magento/magento2/issues/34499), [GitHub-34589](https://github.com/magento/magento2/issues/34589)

### Adobe Commerce編碼標準

<!-- magento/magento-coding-standard/pull/219-->

* 已更新 `phpunit/ phpunit` 至 `magento-coding-standard` 存放庫。 [GitHub-33622](https://github.com/magento/magento2/issues/33622)

<!-- magento/magento2/pull/33858-->

* 更新 `webonyx/graphql-php` 依賴於Adobe Commerce編碼標準儲存庫中的^14.9版。 [GitHub-32863](https://github.com/magento/magento2/issues/32863)

<!-- magento/magento-coding-standard/pull/322-->

* 新增嗅探 `Magento2.PHP.ArrayAutovivification` 設為Adobe Commerce編碼標準，以識別從假值自動建立陣列。 [GitHub-34509](https://github.com/magento/magento2/issues/34509)

<!-- magento/magento-coding-standard/pull/325-->

* 新增嗅探 `Magento2.Functions.DeprecatedFunction` 達到Adobe Commerce編碼標準。 [GitHub-34547](https://github.com/magento/magento2/issues/34547)

<!-- magento/magento-coding-standard/pull/326-->

* 已新增可嗅探的已棄用函式 `Magento2.Functions.DiscouragedFunction` 在Adobe Commerce編碼標準中。 [GitHub-34548](https://github.com/magento/magento2/issues/34548)

<!-- magento/magento-coding-standard/pull/335-->

* 此 `Magento2.Annotation.MethodAnnotationStructure` 嗅探不再因誤判而失敗。 [GitHub-34679](https://github.com/magento/magento2/issues/34679)

### 媒體集

<!-- AC-1054-->

* 此 `bin/magento media-gallery:sync` 在啟用AWS S3的部署中，命令不再失敗。

<!-- AC-1000-->

* 現在，當菜單項超過11且 **啟用舊介質庫** 組態設定已啟用。 [GitHub-33889](https://github.com/magento/magento2/issues/33889)

<!-- MC-42837-->

* 編輯含有許多影像的產品時，「媒體集」標籤的載入時間已有所改善。 [GitHub-33434](https://github.com/magento/magento2/issues/33434)

### MFTF

<!-- AC-516-->

* `CURLOPT_POSTFIELDS` 不再將物件接受為陣列。 要將對象解釋為陣列，請執行顯式(`array`)cast。 此做法也適用於接受陣列的其他選項。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

* `curl_init()` 現在會傳回 `CurlHandle` 物件而非資源。 此 `curl_close()` 函式不再有效。 反之， `CurlHandle` 如果不再參考例項，則會自動銷毀。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

<!-- AC-1397-->

* 修正可下載產品的MFTF測試錯誤。 [GitHub-34270](https://github.com/magento/magento2/issues/34270)

<!-- magento/magento2/pull/33530-->

* 已移除 `CliCacheFlushActionGroup` 從 `CatalogSearch`, `GroupedProduct`, `Newsletter`, `Paypal`, `Quote`，和 `Review` 模組。 [GitHub-33531](https://github.com/magento/magento2/issues/33531)

<!-- AC-515-->

* 數字與非數字字串之間的非嚴格比較，現在可將數字轉換為字串，並比較字串。 數字與數值字串之間的比較仍一如既往。 這表示0 == 「非數字」現在被視為false。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-517-->

* `parse_url()` 現在可區分不存在和空白的查詢和片段。 [GitHub-33782](https://github.com/magento/magento2/issues/33782)

<!-- magento/magento2-functional-testing-framework/pull/873-->

* 更新程式碼基底，以避免使用 `ReflectionType::isBuiltin()` 方法。 [GitHub-34194](https://github.com/magento/magento2/issues/34194)

#### 新動作群組

`AdminCheckOrderStatusInGridActionGroup` [GitHub-33747](https://github.com/magento/magento2/issues/33747)

`StorefrontSelectFirstShippingMethodActionGroup` [GitHub-33773](https://github.com/magento/magento2/issues/33773)

`AdminClickUpdateChangesOnCreateOrderPageActionGroup` [GitHub-33689](https://github.com/magento/magento2/issues/33689)

#### 動作群組

這些測試中的重複動作已取代為動作群組：

`AdminAddInStockProductToTheCartTest` [GitHub-34512](https://github.com/magento/magento2/issues/34512)

`AdminAddBundleItemsTest` [GitHub-34312](https://github.com/magento/magento2/issues/34312)

`AdminConfigurableProductAddConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductBulkUpdateTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminConfigurableProductDisableAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductOutOfStockAndDeleteCombinationTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductOutOfStockTestDeleteChildrenTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductRemoveAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductRemoveConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminCreateAndEditSimpleProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateAndEditVirtualProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateInactiveFlatCategoryTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminCreateInactiveInMenuFlatCategoryTest` [GitHub-34510](https://github.com/magento/magento2/issues/34510)

`AdminCreateDuplicateCategoryTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminCreateDuplicateProductTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminDeleteSimpleProductTest` [GitHub-33783](https://github.com/magento/magento2/issues/33783)

`AdminEditRelatedBundleProductTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminMassDeleteBundleProductsTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminNavigateMultipleUpSellProductsTest` [GitHub-34314](https://github.com/magento/magento2/issues/34314)

`AdminSimpleProductSetEditContentTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminSimpleProductTypeSwitchingToConfigurableProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminConfigurableProductTypeSwitchingToVirtualProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminCreateConfigurableProductWithDisabledChildrenProductsTest` [GitHub-33775](https://github.com/magento/magento2/issues/33775)

`AdminUpdateFlatCategoryAndAddProductsTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminUpdateTopCategoryUrlWithNoRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`AdminUpdateTopCategoryUrlWithRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`CatalogProductListWidgetOperatorsTest`  [GitHub-34579](https://github.com/magento/magento2/issues/34579)

`CreateProductAttributeEntityWithReservedKeysTest`[GitHub-34422](https://github.com/magento/magento2/issues/34422)

`EnableDisableBundleProductStatusTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`StorefrontCheckRefundGrandTotalActionGroup` [GitHub-34315](https://github.com/magento/magento2/issues/34315)

`StorefrontInactiveCatalogRuleTest` [GitHub-33556](https://github.com/magento/magento2/issues/33556)

`StorefrontConfigurableProductCantAddToCartTest` [GitHub-33786](https://github.com/magento/magento2/issues/33786)

`StorefrontConfigurableProductOptionsTest` [GitHub-33785](https://github.com/magento/magento2/issues/33785)

`StorefrontConfigurableProductCanAddToCartTest` [GitHub-33784](https://github.com/magento/magento2/issues/33784)

`StorefrontConfigurableProductGridViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontConfigurableProductListViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontProductNameWithHTMLEntitiesTest` [GitHub-33806](https://github.com/magento/magento2/issues/33806)

`StorefrontProductNameWithDoubleQuoteTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

#### 新測試

`AdminCreateOrderWithCheckedAppendCommentCheckboxTest` [GitHub-32381](https://github.com/magento/magento2/issues/32381)

`CheckoutWithEnabledCaptchaTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

`StorefrontAddProductWithBackordersAllowedOnProductLevelToCartTest` [GitHub-33635](https://github.com/magento/magento2/issues/33635)

`StorefrontGiftMessageForOrderOnCheckoutCartPageTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCaptchaCheckoutWithEnabledCaptchaTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCheckoutWithEnabledMinimumOrderAmountOptionTest` [GitHub-33460](https://github.com/magento/magento2/issues/33460)

#### 重構測試

`CaptchaWithDisabledGuestCheckoutTest` [GitHub-30828](https://github.com/magento/magento2/issues/30828)

### 電子報

<!-- ACP2E-147-->

* 擁有適當權限的使用者現在可以如預期般管理客戶電子報訂閱。 以前，只有具有完整權限的管理員才能在「管理員客戶帳戶」頁面上管理客戶電子報訂閱。

### 順序

<!-- MC-41981-->

* 購物者現在可以從店面和管理員，透過類型檔案和類型下拉式清單的自訂選項組合，成功重新訂購包含產品的現有訂單。 以前，applicationOpen Source擲回錯誤，且未處理重新排序。

<!-- MC-42332-->

* 管理訂單詳細資料頁面現在會如預期般載入。 以前，applicationOpen Source在載入具有某些稅的訂單的訂單詳細資訊頁面時擲出以下錯誤： `Call to a member function getId() on array`.

<!-- MC-38521-->

* 具有限制權限（包括訂單和發運權限）的管理員現在可以按預期方式查看訂單頁。 以前，具有這些權限的管理員嘗試查看訂單時，applicationOpen Source會擲回錯誤。 [GitHub-14633](https://github.com/magento/magento2/issues/14633)

<!-- ACP2E-74-->

* 設定允許的最大數量限制時，購物者現在可以下單，包含可設定的子產品。

## 付款方法

<!-- AC-1830-->

* 購物者現在可以使用Braintree，透過結帳地址下單，而在啟用3DS的部署中，不需要設定地區。 之前，當購物者點按時結帳會凍結 **下單**，且無法完成購買。 [GitHub-34204](https://github.com/magento/magento2/issues/34204)

<!-- AC-1229-->

* 現在支援Venmo付款選項。

<!-- AC-1228-->

* PayPal現在可以用BN碼追蹤。

<!-- AC-493-->

* `bin/magento setup:upgrade` 從Magento Open Source2.4.2-p1升級時，現在會如預期運作。 以前，applicationOpen Source擲回此錯誤： `Unable to apply data patch Magento\Paypal\Setup\Patch\Data\UpdateBmltoPayLater for module Magento_Paypal`. [GitHub-33678](https://github.com/magento/magento2/issues/33678)

<!-- MC-42830-->

* 現在，在安排管理員訂單期間，會使用正確的商店ID擷取儲存的信用卡。 現在，根據網站範圍組態設定，儲存的信用卡會在下訂單期間顯示。 以前，當管理員嘗試從管理員建立客戶訂單並選取「已儲存信用卡」方法時，儲存的信用卡沒有可用的選項。

<!-- AC-344-->

* 禮品卡金額的PayPal信用顯示異常已解決。 以前，當啟用PayPal信用並配置了多張禮品卡金額時，如果購物者更改了禮品卡價值的金額，則店面不會更新分期付款的金額。 這是Magento Open Source2.4.3中的已知問題。

### PayPal

<!-- MC-42154-->

* Magento Open Source在使用PayPal Express付款方法結帳期間不再顯示錯誤。 以前，雖然結帳程式已完成，但應用程式開放原始碼卻顯示此錯誤： `Something went wrong`.

<!-- AC-722-->

* PayPal Express現在可如預期般從購物車運作。 之前，當您按一下 **PayPal** 按鈕從購物車開始快速結帳，應用程式Open Source擲回此錯誤：  `To check out, please sign in with your email address`. [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42279-->

* PayPal Payflow Pro現在可在部署中，使用正確的父交易ID執行延遲捕獲，其中PayPal Payflow Pro網關具有 **付款活動** 設為 **授權**. A **銷售** 交易會以在結帳時建立的保管庫令牌的父交易ID，如預期傳送至Payflow。 之前， **延遲捕獲**  交易已建立併發送到PayPal Payflow。 [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42442-->

* 使用PayPal Payments Advanced付款完成付款後，購物者現在會如預期重新導向至成功頁面。 過去，即使已成功處理付款且未記錄任何錯誤，購物者仍不會重新導向至此頁面。

### 效能

<!-- MC-42158-->

* 模組清單載入執行時間已改善。

<!-- AC-932-->

* 熱門搜尋詞快取的效能已改善。 以前， `search_query` 表格中，完成搜索查詢所花費的時間越長。 [GitHub-27559](https://github.com/magento/magento2/issues/27559)

<!-- MC-42892-->

* Magento Open Source預設會在產品儲存期間同步調整影像大小。 商戶現在可以對 `di.xml` 檔案。

<!-- ENGCOM-9168-->

* 在多商店部署中，類別產品索引器的效能已得到改善。 [GitHub-33984](https://github.com/magento/magento2/issues/33984)

<!-- AC-1179-->

* 適用於 `glob()` 系統呼叫會減少 `glob()` 呼叫。  [GitHub-34025](https://github.com/magento/magento2/issues/34025)

<!-- ACP2E-63-->

* 改進了非同步順序網格重索引過程的效能。

<!-- ACP2E-117-->

* 產品匯出期間的記憶體耗用量已最佳化。

### 定價

<!-- MC-42243-->

* 當產品價格接近或等於零，並啟用共用目錄時，價格排序現在可如預期運作。 此前，在重新編製價格指數時，零層價格被忽略。

### ProductAlert

<!-- MC-41917-->

* 新 `product_alert` 消費者透過建立佇列訊息、執行消費者以及縮短執行時間來改善客戶警報的傳送。 之前，applicationOpen Source在傳送超過100,000個產品警報時，會擲出記憶體不足例外狀況。 應用程式開放原始碼也花了20多小時才傳送所有警報。

<!-- ACP2E-87-->

* 如果「類別」頁面上的價格篩選不含第二個值，Magento Open Source就不會再擲回錯誤。 以前，applicationOpen Source在日誌檔案中引發異常。

### 產品影片

<!-- MC-42105-->

* Magento Open Source現在會啟用 **儲存** 在新增視訊時輸入不完整的URL時，按鈕並自動完成欄位(管理員 **目錄**  > **產品** > **新增影片**)。 之前， **儲存** 按鈕已停用，且欄位未填入。

### 評論

* 產品清單檢視現在會顯示產品的正確星號分級。 [GitHub-30196](https://github.com/magento/magento2/issues/30196)

<!-- ACP2E-89-->

* 購物者點按時，回顧現在可如預期般顯示 **檢閱** 在店面產品頁面上。

<!-- ACP2E-111-->

* 現在，店面產品清單頁面上的格線檢視和清單檢視中，產品星號評等已保持一致。 以前，在「格線」和「清單」檢視模式中，相同產品可能會有不同的評等。

### 銷售

<!-- MC-42025-->

* 升級到MariaDB 10.2.34後，具有大資料集的表的非同步模式銷售網格更新效能已得到改善。

<!-- MC-42531-->

* Magento Open Source現在會如預期從店面移除HTML標籤 **帳戶** > **我的訂單** > **檢視順序** 頁面。 之前，applicationOpen Source會在店面客戶訂單備注區段中顯示HTML標籤。

<!-- MC-42377-->

* 自動測試覆蓋，以驗證 `sales_shipment_grid.order_id` 已新增。

<!-- MC-43163-->

* `POST V1/orders` 呼叫現在會更新擴充功能屬性，而不會發生錯誤。 以前發生了SQL語法錯誤。

### 搜尋

<!-- MC-42799-->

* 價格範圍的分層導覽選項現在可在自訂價格屬性中正常運作。 篩選自訂價格屬性時，應用程式開放原始碼會使用價格導覽步驟的設定。 以前，applicationOpen Source使用手動步驟配置。

<!-- MC-42545-->

* 現在，無論目錄中可用的類別數量多寡，店面都會以分層導覽顯示目前類別的所有子類別。

<!-- MC-41706-->

* Elasticsearch目錄搜尋現在不區分區段。 以前，搜尋不含重音的詞語時，結果會與搜尋具有相同重音的詞語時不同。

<!-- ACP2E-8-->

* 現在，在包含特殊字元的SKU屬性上已正確設定搜尋權重。

<!-- ACP2E-36-->

* `category_name` 已新增至系統保留的產品屬性代碼。 如果用戶嘗試使用屬性代碼建立產品屬性，應用程式Open Source現在會顯示錯誤 `category_name`. 之前，產品未列在預期的類別中，且記錄了Elasticsearch錯誤。

<!-- ACP2E-68-->

* 熱門搜尋詞現在會在每次GraphQL搜尋查詢後更新。

<!-- ACP2E-249-->

* Magento Open Source現在會在Elasticsearch價格指數對應中新增正確的價格欄位。 以前，索引中新增的價格欄位有商店ID而非網站ID不正確。

### 裝運

<!-- MC-42758-->

* 發運電子郵件現在只包含目前發運的追蹤號碼。 以前，當訂單包括多個發運時，每個發運的電子郵件都包括與訂單相關的所有發運的跟蹤編號。

<!-- MC-42396-->

* 現在，當購物者在多次運送模式下從購物車中刪除產品，然後切換至單一運送地址時，Magento Open Source會成功更新迷你購物車。 之前，產品價格未如預期更新。

<!-- AC-267-->

* 使用S3儲存適配器時，現在可正常匯入表格率。 以前，applicationOpen Source會顯示此錯誤： `File "https://[bucket].s3.eu-central-1.amazonaws.com/[prefix]/tmp/phpLjGmHf" not found`. [GitHub-33072](https://github.com/magento/magento2/issues/33072)

<!-- magento/magento2/pull/33232-->

* 您現在可以按預期停用發運更新電子郵件 **商店**  > **設定**  >  **銷售**  >  **銷售電子郵件**. [GitHub-33165](https://github.com/magento/magento2/issues/33165)

<!-- ACP2E-31-->

* Magento Open Source現在會在「管理員」和「店面發票」頁面總計中顯示免運費(0)。 以前，當訂單的發運為零時，應用產品「開放原始碼」不會在發票頁發運合計的合計中顯示發運金額。

<!-- ACP2E-120-->

* 對線上運輸承運人的費率請求已從數個請求減少到一個。 現在可正確計算每個項目/包的包保險和處理價格。 以前，applicationOpen Source對FedEx發運方法顯示了錯誤的發運費率。

<!-- ACP2E-174-->

* Magento Open Source現在會在建立從波多黎各發運的發運標籤時顯示UPS費率。 以前，applicationOpen Source未顯示這些UPS速率。

<!-- ACP2E-227-->

* 現在，從輸入框中刪除後，發運街道地址將完全按預期清除。 以前，刪除地址後，文本框會保留一個或多個字元。

### 商店

<!-- MC-42884-->

* 「以客戶身分登入」功能現在可如預期，在包含不同URL上多個存放區的部署中運作。 以前，applicationOpen Source未載入正確的儲存，即使訪問正確的儲存域也是如此。

### 稅

<!-- MC-41924-->

* 現在，當Magento Open Source在選擇送至多個地址後刪除項目時，可正確計算小型購物車小計。

<!-- MC-41945-->

* 當購物車僅包含虛擬產品時，Magento Open Source現在會在所有結帳頁面上顯示相同的稅率。

<!-- AC-714-->

* 可設定產品的階層價格現在會在店面上顯示準確的已納入和已排除的稅值。 以前，包含稅和排除稅都顯示相同的值。 [GitHub-33673](https://github.com/magento/magento2/issues/33673)

### 測試

<!-- magento/magento2/pull/34798-->

* WebAPI測試現在與PHP 8.1相容。 [GitHub-34653](https://github.com/magento/magento2/issues/34653)

<!-- magento/magento2/pull/34820-->

* 整合測試現在與PHP 8.1相容。 [GitHub-34567](https://github.com/magento/magento2/issues/34567), [GitHub-34569](https://github.com/magento/magento2/issues/34569)

<!-- AC-1225-->

* 商家現在可以測試購物者所在國家/地區的購物者體驗，而非商家的位置。

* 功能測試已穩定為PHP 8.x相容性。 [GitHub-34327](https://github.com/magento/magento2/issues/34327), [GitHub-34188](https://github.com/magento/magento2/issues/34188)

<!-- magento/magento2/pull/34198-->

* 修正WebAPI測試的功能問題。 [GitHub-34196](https://github.com/magento/magento2/issues/34196)

<!-- AC-1207-->

* 修正導致誤判靜態測試的錯誤。 [GitHub-34056](https://github.com/magento/magento2/issues/34056)

<!-- magento/magento2/pull/34300-->

* 已針對 `call_user_func_array`. [GitHub-34301](https://github.com/magento/magento2/issues/34301)

<!-- AC-1978-->

* 此 `Magento\GraphQl\CatalogGraphQl\ProductSearchTest` 使用AWSElasticsearch執行時，test不再擲回此錯誤： `Magento\GraphQl\CatalogGraphQl\ProductSearchTest::testSearchSuggestions Failed asserting that an array is not empty. /var/www/html/dev/tests/api-functional/testsuite/Magento/GraphQl/CatalogGraphQl/ProductSearchTest.php:94 /var/www/html/dev/tests/api-functional/framework/Magento/TestFramework/TestCase/GraphQlAbstract.php:257`.

<!-- magento/magento2/pull/33699-->

* 通過更名所有模擬變數以包括 `Mock` 尾碼和刪除對已棄用對象管理器類的引用。 [GitHub-33695](https://github.com/magento/magento2/issues/33695)

* 此 `Magento\Framework\MessageQueue\TopologyTest` 測試現在與適用於的AWS MQ相容 [!DNL RabbitMQ] 服務。 以前，此測試失敗，但出現以下消息： `Invalid exchange configuration: magento-topic-based-exchange1 Failed asserting that two arrays are equal`. <!-- AC-1248-->

<!-- magento/magento2/pull/34454-->

* 單元測試現在與PHP 8.1相容。 [GitHub-34441](https://github.com/magento/magento2/issues/34441)

#### 單元測試

以下單元測試已重構為使用 `PHPUnit` 而非 `AspectMock`:

`AllureHelperTest` [GitHub-33294](https://github.com/magento/magento2/issues/33294)

`ObjectHandlerUtil` [GitHub-33584](https://github.com/magento/magento2/issues/33584)

`MockModuleResolverBuilder` [GitHub-33583](https://github.com/magento/magento2/issues/33583)

`MagentoTestCase`  [GitHub-33582](https://github.com/magento/magento2/issues/33582)

`ModuleResolverTest` [GitHub-33308](https://github.com/magento/magento2/issues/33308)

`ParallelGroupSorterTest` [GitHub-33306](https://github.com/magento/magento2/issues/33306)

`SuiteGeneratorTest` [GitHub-33299](https://github.com/magento/magento2/issues/33299)

`OperationDataArrayResolverTest`  [GitHub-33296](https://github.com/magento/magento2/issues/33296)

### 主題

<!-- MC-41887-->

* 當Magento Open Source的基本URL中已設定子路徑時，通知訊息現在會正確顯示。

<!-- MC-42469-->

* 新增 `aria-label` 元素至storefront page範本，指出當點按連結時購物者要導覽至的頁面。 之前，連結至不同頁面的連結會使用相同的連結文字。 [GitHub-33075](https://github.com/magento/magento2/issues/33075)

<!-- ACP2E-73-->

* Magento Open Source載入具有預先存在之自訂主題之商店的首頁時，不再顯示錯誤訊息。 以前，applicationOpen Source會顯示以下消息：  `The store will not work correctly in the case when cookies are disabled`.

### 翻譯和地區設定

<!-- AC-285-->

* 此 `UserExpiration` 驗證器不再失敗 `de_DE` 和 `uk_UA` 地區設定。 以前，當管理員從地區設定為的管理員建立新使用者時，applicationOpen Source會擲回錯誤 `de_DE` 或 `uk_UA`. [GitHub-32497](https://github.com/magento/magento2/issues/32497)

<!-- magento/magento2/pull/33787-->

* 現在，在建立或編輯地址表單中，瑞士地區名稱會以英文顯示。 [GitHub-32602](https://github.com/magento/magento2/issues/32602)

<!-- magento/magento2/pull/33128-->

* 已更新 `zip_codes.xml` 根西島支援GY10郵編的模式。 [GitHub-33144](https://github.com/magento/magento2/issues/33144)

<!-- AC-1080-->

* 新增白俄羅斯地區至 `directory_country_region` 表格。 [GitHub-33924](https://github.com/magento/magento2/issues/33924)

<!-- AC-1178-->

* 已解決菲律賓（菲律賓）地區設定的店面顯示異常問題。 [GitHub-33996](https://github.com/magento/magento2/issues/33996)

<!-- AC-1308-->

* 在設為葡萄牙語（葡萄牙）地區的商店中建立新帳戶時，您現在可以成功輸入客戶的出生日期。 之前，當您嘗試建立帳戶時，Magento Open Source擲回錯誤。 [GitHub-34130](https://github.com/magento/magento2/issues/34130)

<!-- ACP2E-457-->

* 產品詳細資料頁面現在已成功以阿拉伯文（沙烏地阿拉伯）地區設定顯示。 以前，此區域設定會中斷產品詳細資訊頁面。

### UI

<!-- AC-258-->

* 修正使用的MFTF測試的錯誤 `maps.googleapis.com`.

<!-- MC-41850-->

* Magento Open Source現在會從「聯絡我們」表單電子郵件輸入欄位中修剪非空格字元。 以前，提交表單時未從電子郵件輸入中移除非中斷空格字元（若有），這會導致記錄檔中發生錯誤。 此 **回覆** 已生成聯繫人電子郵件消息中也缺少欄位給儲存管理員。

<!-- MC-42793-->

* Magento Open Source現在會根據其在管理員中的位置顯示相關產品、向上銷售產品和交叉銷售產品。

<!-- MC-42502-->

* `.action-close` 按鈕現在可如預期運作 `Multiselect` 會用於強制回應視窗中。 之前， `action-close` 按鈕無法運作，因為它繼承了  `.action-close` 按鈕。 [GitHub-27240](https://github.com/magento/magento2/issues/27240)

<!-- AC-1217-->

* 「選件」豐富的程式碼片段現在會顯示在「產品」檢視的主要價格欄位上。 以前，在產品檢視的相關產品區塊中，此欄位中缺少此程式碼片段，導致Google搜尋結果顯示錯誤的價格。 [GitHub-34063](https://github.com/magento/magento2/issues/34063)

<!-- AC-1584-->

* 已解決執行iOS之裝置的強制回應高度問題。 [GitHub-34467](https://github.com/magento/magento2/issues/34467)

<!-- MC-40106-->

* 動作下拉式功能表現在可在整個店面中正確放置。 [GitHub-31379](https://github.com/magento/magento2/issues/31379)

<!-- AC-1589-->

* 已解決購物車和結帳頁面上導覽的協助工具錯誤。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* 螢幕助讀程式現在可以閱讀產品頁面上所有相關的表單元素。

<!-- AC-872-->

* 店面目錄產品介面工具集排序順序(**目錄** > **類別** > **產品**)現在符合「管理員」中設定的順序。 [GitHub-27126](https://github.com/magento/magento2/issues/27126)

<!-- AC-725-->

* 地區選取器現在可在「建立帳戶」頁面上如運期般運作。 [GitHub-30099](https://github.com/magento/magento2/issues/30099)

<!-- MC-42750-->

* 管理員客戶格線現在會顯示所有客戶資料，包括新增的資料 `date` 自訂屬性，如預期。 之前，applicationOpen Source擲回錯誤，且在 `date` 屬性集被設定為列。

<!-- AC-1280-->

* 在 **目錄**  >  **產品** 詳細資訊頁面已變更，以準確反映輸入的用途。 不需要使用者輸入的欄位不再顯示帶星號的標籤。

<!-- AC-1275-->

* RTF編輯器工具列現在可使用Tab鍵存取。

<!-- AC-1284-->

* 控制項的可存取名稱現在包含其可見標籤的文字，以表示每頁的項目數下拉式清單。

<!-- AC-1287-->

* 表格控制項 **目錄** > **產品** 折疊表格時，「詳細資訊」頁面現在會顯示可見標籤和可存取的名稱。

<!-- AC-1285-->

* 整個店面的按鈕現在都有可描述的不重複名稱。 以前，帶有文字按鈕和相鄰向下箭頭表徵圖按鈕的拆分按鈕具有相同的可訪問名稱。

<!-- AC-1168-->

* 新增 **今天** 查看「管理訂單和金額」控制面板圖表的選項，以提供全天的銷售和訂單匯總。 [GitHub-34008](https://github.com/magento/magento2/issues/34008)

<!-- AC-1481-->

* 多選項的活動（按一下）狀態 **關閉** 按鈕現在可持續運作。 [GitHub-34338](https://github.com/magento/magento2/issues/34338)

<!-- magento/magento2/pull/31879-->

* 當Cookie限制模式停用時，Magento Open Source在升級後不再顯示此訊息： `The store will not work correctly in the case when cookies are disabled`. [GitHub-33811](https://github.com/magento/magento2/issues/33811)

<!-- ACP2E-7-->

* 現在，全螢幕產品影像會正確顯示在行動裝置上具有垂直縮圖導覽方向的主題上。 過去，在全螢幕模式中，行動裝置上具有垂直縮圖導覽方向的主題上，產品影像會不正確縮放或隱藏。

<!-- ACP2E-23-->

* 當 **將介面工具集產品與後端儲存同步** 組態設定已啟用。

<!-- ACP2E-70-->

* 已新增負值驗證至 **要退貨的數量** 欄位（在「建立新回訪」表單中）。

<!-- ACP2E-105-->

* Magento Open Source在購物者點按時不再顯示重複的位址 **變更地址** 在部署的「複核和付款」頁面上， **地址搜索** 組態設定已啟用。

<!-- ACP2E-136-->

* 此 **新增產品** 在「管理類別」頁面的存放區檢視範圍中工作時，具有限制權限的管理員現在會如預期啟用按鈕。

<!-- ACP2E-169-->

* 檢視中斷點現在在各Magento Open Source都一致。

<!-- ACP2E-199-->

* Magento Open Source現在可以在「管理客戶」頁面上，以自訂地區設定正確顯示自訂客戶日期屬性。

<!-- MC-41760-->

* 以768像素寬的瀏覽器視窗顯示時，使用「頁面產生器」新增的影像不再在店面上重複。 以前，使用此瀏覽器視窗寬度，應用程式「開放原始碼」會透過顯示行動版和案頭版影像，在店面複製影像。

### URL重新寫入

<!-- AC-1510-->

* 執行時，在建立新商店檢視期間，不會再為所有商店檢視重新產生URL重新寫入 `bin/magento setup:upgrade`. [GitHub-32954](https://github.com/magento/magento2/issues/32954)

### Web API架構

<!-- MC-42008-->

* 啟用永久性購物車時，自助授權客戶資源的Web API請求不再擲回授權錯誤。

<!-- MC-42313-->

* 您現在可以使用的子類建立對象 `\Magento\Framework\Api\AbstractSimpleObjectBuilder` PHP 7.3。之前， `preg_match` 當Magento Open Source以PHP 7.3在Redhat上托管時，擲回此警告訊息： `Warning: preg_match(): Compilation failed: unrecognized character follows...`.

<!-- MC-24548-->

* 由擷取的總計 `PUT /V1/guest-carts/:cartId/collect-totals` 請求現在已更新為正確 `shippingMethod`. [GitHub-18508](https://github.com/magento/magento2/issues/18508)

<!-- MC-30627 AC-796-->

* 將新反序列化程式添加到REST API中不再刪除其他反序列化程式。 過去，REST API接受新的內容類型，但API的核心定義內容類型已無法運作，並傳回400錯誤。 [GitHub-26433](https://github.com/magento/magento2/issues/26433)

<!-- AC-698-->

* 您現在可以移除 `webapi.xml`檔案。 [GitHub-33843](https://github.com/magento/magento2/issues/33843)

<!-- AC-1212-->

* Magento Open Source現在會產生 `customertoken` 按GraphQL或REST API請求執行，如預期。 以前，applicationOpen Source不會檢查 `lock_expires_at` in `oauth_token_request_log` 大於目前的日期和時間，且一律會傳回失敗的嘗試次數，使客戶無法登入。 [GitHub-34067](https://github.com/magento/magento2/issues/34067)

<!-- AC-1190-->

* 將蒙版引號ID新增至 `QuoteRepository::getList` 不再造成無限循環。 以前，使用依賴REST API更新訂單的付款處理器會觸發此行為。 [GitHub-33675](https://github.com/magento/magento2/issues/33675)

<!-- MC-41612-->

* 此 `/rest/all/V1/categories/<above_created_category_id>`  PUT呼叫現在會依照 `available_sort_by`.  之前，您會在「類別」頁面上選取「可用產品清單排序依據」下拉式清單，並搭配所有可能的選項， **全部使用** 複選框。 [GitHub-32596](https://github.com/magento/magento2/issues/32596)

<!-- ACP2E-11-->

* 改善REST API請求建立客戶代號的效能。

<!-- ACP2E-91-->

* 修正 **將儲存程式碼新增至Url** 設為 **是** 而REST呼叫未包含商店代碼。 雖然裝載有效，但呼叫傳回下列錯誤： `Fatal error: Allowed memory size of ********** bytes exhausted (tried to allocate **** bytes) in vendor/magento/module-store/Model/StoreRepository.php on line 75`.

<!-- ACP2E-153-->

* 現在可以使用REST API同時建立相同訂單的部分發票。

### 願望清單

<!-- MC-41880-->

* Magento Open Source不再於 **在側欄中顯示** 「願望清單」選項已禁用。 以前，applicationOpen Source會忽略此選項。

### WYSIWYG

<!-- ACP2E-17-->

* PageBuilder現在可使用WYSIWYG編輯器正確轉譯自訂Widget。

## 已知問題

**問題**:在從Adobe Commerce 2.4.4升級至Adobe Commerce 2.4.4-p1期間，商家可能會注意到套件版本降級通知。 這些訊息可以忽略。 套件版本中的差異是因為套件產生期間出現異常。 未影響任何產品功能。 請參閱 [從2.4.4升級到2.4.4-p1後降級的軟體包](https://support.magento.com/hc/en-us/articles/8214752983949)  知識庫文章，以討論受影響的情況和解決辦法。

**問題**:若未在「管理員」中選取任何選項，購物者便無法將產品新增至購物車 **商店** >  **設定** > **一般** > **國家/地區選項** > **允許國家/地區**. 應用程式Open Source會改為顯示以下控制台錯誤： `Failed to load resource: the server responded with a status of 400 (Bad Request)`. <!-- AC-2564-->

**問題**:Dotdigital在 **尋找合作夥伴和擴充功能** > **Magento Marketplace** 已過時。 以下是更新的說明：

Dotdigital是客戶互動平台，可協助數位行銷人員和開發人員在客戶歷程中提供通訊。 我們利用客戶資料的力量，在品牌成長和擴展時推動其參與度、轉換和忠誠度。 客戶喜歡我們易於使用的平台，該平台可跨系統連接第一方資料、提供強大的洞察力，並自動執行預測性跨通道訊息。

Dotdigital的350多名員工為世界各地和各個行業的中端市場和企業公司提供服務。 我們渴望激勵負責任的營銷，並致力於可持續性、隱私和安全性。 Dotdigital以成為世界上第一個碳中性營銷自動化平台而自豪，該平台經過ISO 14001、ISO 27701和ISO 27001認證。

請參閱 [Dotdigital — 行銷自動化](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html) 購買和下載資訊。

## 社群投稿

我們感謝廣大的Magento Open Source社群，並感謝他們對本版的貢獻。

社群工程團隊 [Magento貢獻者](https://magento.com/magento-contributors) 依月、季和年維護最佳貢獻個人和合作夥伴的清單。 在該「貢獻者」頁面中，您可以在GitHub上追蹤合併PR的連結。

### 合作夥伴貢獻

下表重點介紹合作夥伴的貢獻。 下表列出提取請求的貢獻者合作夥伴、外部提取請求編號，以及與其相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-4-partner.md}}

### 個人貢獻者貢獻內容

下表列出社群成員的貢獻。 此表格列出提供提取請求的社群成員、外部提取請求編號，以及與其相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-4-issues.md}}

### 系統需求

我們的技術堆棧構建在PHP和MySQL上。 如需詳細資訊，請參閱 [系統需求](../../../installation/system-requirements.md).

### 安裝和升級指示

您可以使用 [撰寫器](../../../installation/composer.md).

## 遷移工具包

資料移轉工具可協助將現有Magento1.x儲存資料至Magento2.x。此命令列介面包括驗證、進度追蹤、記錄和測試功能。 如需安裝指示，請參閱 [安裝資料移轉工具](../../../tools/data-migration-tool/install.md). 考慮探索或協助 [資料移轉存放庫](https://github.com/magento/data-migration-tool).

此 [代碼遷移工具包](https://github.com/magento-commerce/code-migration) 協助將現有Magento1.x儲存擴充功能和自訂項目傳輸至Magento2.x。命令行介面包括用於轉換Magento1.x模組和佈局的指令碼。
