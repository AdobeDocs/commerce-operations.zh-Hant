---
title: Magento Open Source 2.4.4發行說明
description: 瞭解2.4.4Magento Open Source版本的新功能、增強功能、錯誤修正和已知問題。
exl-id: 877e2517-3487-4f54-9e08-a0b67e0de057
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '11128'
ht-degree: 0%

---

# Magento Open Source 2.4.4發行說明

Magento Open Source2.4.4引入對PHP 8.1的支援。已更新所有專案程式庫和相依性，以與PHP 8.1相容。核心撰寫器相依性和協力廠商程式庫也已升級至與PHP 8.1相容的最新版本。此版本也支援OpenSearch 1.2。

此版本包含近250項品質修正和增強功能。

>[!NOTE]
>
>感謝我們的合作夥伴 [Atwix](https://www.atwix.com/) 他們對2.4.4架構相容於PHP 8.1有重大貢獻。

{{bics}}

## 套用 `AC-3022.patch` 繼續提供DHL作為運送承運商

DHL已匯入schema 6.2版，且將於近期淘汰架構6.0版。 支援DHL整合的Adobe Commerce 2.4.4及舊版僅支援6.0版。部署這些版本的商戶應適用 `AC-3022.patch` 儘早繼續提供DHL作為運送承運商。 請參閱 [套用修補程式以繼續提供DHL作為運送承運商](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 知識庫文章，瞭解下載和安裝修補程式的詳細資訊。

## 其他發行資訊

雖然這些功能的程式碼已隨附每季發行的Magento Open Source核心程式碼，但其中數個專案也獨立發行。 這些專案的錯誤修正記錄在每個專案專用的單獨發行資訊中，可在每個專案的檔案中找到。

>[!NOTE]
>
>除了Braintree之外，所有廠商隨附的擴充功能均已從Magento Open Source2.4.4中移除。

>[!NOTE]
>
>Composer 2.2匯入了安全性功能，要求商家識別其信任的外掛程式 `composer.json` 外掛程式執行之前的檔案。 目前，包含在 `composer.json` 會自動安裝未標示為信任的檔案。 不過，自2022年7月起，Composer將不會載入外掛程式，除非明確允許它們。 請參閱 [升級至Adobe Commerce 2.4.4時出現的Composer外掛程式問題](https://support.magento.com/hc/en-us/articles/6215997614093-Composer-plugins-issues-when-upgrading-to-Adobe-Commerce-2-4-4) 知識庫文章，瞭解如何修改 `composer.json` 檔案以明確允許載入外掛程式。

### 此版本中包含的Hotfix

Magento Open Source2.4.4包含針對Adobe Commerce和Magento Open Source2.4.3、2.4.3-p1和2.3.7-p2提供的下列Hotfix解決的所有問題的解決方案：

* 由所處理的弱點 `MDVA-43395_EE_2.4.3-p1_COMPOSER_v1.patch` 和 `MDVA-43443_EE_2.4.3-p1_COMPOSER_v1.patch` 已在此版本中解決。

* `AC-384_Fix_Incompatible_PHP_Method__2.4.3_ce.patch`. 此修補程式可解決升級期間發生的嚴重PHP錯誤。 請參閱 [Adobe Commerce升級2.4.3、2.3.7-p1 PHP嚴重錯誤Hotfix](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix) 知識庫文章。

## Magento Open Source2.4.4重點說明

請檢視此版本中的下列重點內容。

### 安全性增強功能

此版本包含一項安全性修正和平台安全性改善。 此安全性修正已反向移植至Magento Open Source2.4.3-p2和Magento Open Source2.3.7-p3。

目前尚未發生與這些問題相關的已確認攻擊。 不過，某些漏洞可能會被利用來存取客戶資訊或接管管理員工作階段。 這些問題大多需要攻擊者先取得管理員的存取權。 因此，我們提醒您採取一切必要步驟來保護您的管理員，包括但不限於以下工作：

* IP允許清單
* [雙因素驗證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)
* 使用VPN
* 使用唯一位置，而非 `/admin`
* 良好的密碼衛生

另請參閱 [Adobe安全性公告](https://helpx.adobe.com/security/products/magento/apsb22-13.html) 以取得這些已修正問題的最新討論。

#### 其他安全性增強功能

此版本的安全性改善專案透過最新的安全性最佳實務，改善了合規性，包括：

* 在2.3.4中，為了降低安全性風險，使用電子郵件變數已過時，改用更嚴格的變數語法。 此舊版行為已在本版本中完全移除，作為該安全性風險緩解措施的延續。

   因此，在升級至Adobe Commerce 2.4.4或Magento Open Source 2.4.4後，適用於舊版Magento Open Source的電子郵件或電子報範本可能無法正常運作。受影響的範本包括自訂模組或協力廠商擴充功能的管理員覆寫、主題、子主題和範本。 即使使用之後，您的部署仍可能會受到影響 [升級相容性工具](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html?lang=en) 以修正過時的用法。 另請參閱 [移轉自訂電子郵件範本](https://developer.adobe.com/commerce/frontend-core/guide/templates/email-migration/) 以取得移轉受影響範本的潛在影響和准則的相關資訊。

* 整合權杖無法再用於API持有人權杖驗證。 以前，整合權杖可用作權杖型驗證的獨立金鑰。 不過，由於存取權杖永不過期的安全影響，此行為已預設為停用。 先前的行為可透過命令列或Admin啟用。 另請參閱 [權杖型驗證](https://developer.adobe.com/commerce/webapi/get-started/authentication/gs-authentication-token/). <!-- AC-1619 -->

* 工作階段ID不再儲存在資料庫中。 <!-- AC-522-->

* OAuth存取權杖和密碼重設權杖現在會在儲存於資料庫時進行加密。 <!-- AC-520 1323-->

* 已加強驗證，以防止上傳非英數字元的副檔名。 <!-- AC-479-->

* 新增優惠券代碼的reCAPTCHA支援。 <!-- AC-461-->

* 當Magento Open Source處於生產模式時，Swagger現在預設為停用。 <!-- AC-1450-->

* Magento Open Source店面現已預設啟用HTTPS。 此 **在店面上使用安全URL** 和 **在管理員中使用安全URL** 設定預設為啟用，且所有內建Cookie現在均設為安全。  <!-- AC-1173-->

* 所有Magento Open Source安裝現在都需要相依性混淆外掛程式。 之前，只有Composer型安裝需要此外掛程式。 它現在允許信任的版本。 商家可以略過此外掛程式中設定的限制，這些限制會禁止某些組合的Composer安裝。 對於受信任的版本，可以略過這些限制，Magento Open Source現在會在繼續安裝之前顯示警告。  <!-- AC-501 970-->

* 開發人員現在可以根據每個端點，設定Magento Open SourceRESTful端點接受的陣列大小限制。 另請參閱 [API安全性](https://developer.adobe.com/commerce/webapi/get-started/api-security/). <!-- AC-465-->

* 新增機制來限制使用者可在系統範圍內透過Web API請求的資源大小和數量，以及覆寫個別模組的預設值。 這解決了下列專案解決的問題： `MC-43048__set_rate_limits__2.4.3.patch`. 另請參閱 [API安全性](https://developer.adobe.com/commerce/webapi/get-started/api-security/). <!-- AC-1120-->

### 平台增強功能

Magento Open Source2.4.4現在支援PHP 8.1。已更新所有專案程式庫和相依性，以與PHP 8.1相容。其他平台增強功能包括：

* Magento Open Source2.4.4支援Elasticsearch7.16和OpenSearch 1.2。部署由內部部署託管的應用程式開放原始碼商家可以使用任一解決方案。 不過，OpenSearch現在是雲端託管之Magento Open Source2.4.4部署的預設搜尋引擎。 所有使用雲端部署的客戶若升級至2.4.4版，都必須使用OpenSearch。 另請參閱 [在Cloud 2.4.4上切換至Adobe Commerce的OpenSearch](https://support.magento.com/hc/en-us/articles/4419942355725-Switching-to-OpenSearch-for-Adobe-Commerce-on-Cloud-2-4-4)

* 此 `JQuery` 程式庫已升級至3.6版。此 `jquery-ui` 程式庫已升級至1.13.0版。其他幾個JavaScript程式庫已更新至最新版本。

* 現在支援TinyMCE 5.8.1。 TinyMCE 4已從程式碼基底中移除。 <!-- AC-41-->

* 此 `RequireJS` 程式庫已升級至最新版本(v2.3.6)。 [GitHub-33672](https://github.com/magento/magento2/issues/33672) <!-- AC-40 422-->

* PHPUnit已升級至最新版本(9.5.x)。 已更新測試和測試架構，以與新版本相容。 <!-- AC-404-->

* 大部分的Laminas相依性已升級至與PHP 8.1相容的最新版本。已從程式碼基底中移除三個Laminas相依性，以減少相依性的數量。

#### jQuery UI升級

jQuery UI已升級至最新版本(v1.13.0)。 下列v1.10.0 jQuery元件已移除：

* `ajaxOptions` 和 `cache` 索引標籤選項。 另請參閱 [索引標籤](https://jqueryui.com/changelog/1.10.0/#tabs).

* `.zIndex()`. jQuery UI v1.12.1包含 `jquery/z-index.js`，可支援使用 `.zIndex()`. 另請參閱 [UI核心](https://jqueryui.com/changelog/1.12.0/#ui-core).

* Widget名稱的資料遞補。 您必須使用完整名稱 `.data()` 金鑰。

* 類別的硬式編碼，例如 `ui-corner-all` 在widget中。

### GraphQL

此版本包含下列GraphQL增強功能：

* **效能改良**：

   * GraphQL購物車操作的效能已改善。 此 `collectQuoteTotals()` 現在，在GraphQL要求期間只會呼叫一次方法，以減少回應時間。 <!-- PWA-2110-->

   * 變更GraphQL請求的快取方式，已改善店面效能。 Fastly和Varnish現在會快取隨傳送的GraphQL請求 `auth` Token。 <!-- PWA-1817-->

* **新的店面相關管理員組態設定**. 此 `storeConfig` query現在會傳回Zero Subtotal Checkout與Check/Money Order付款方式的組態設定。 <!-- PWA-1576-->

* **更新核心GraphQL資料庫**. 此 `webonyx` 可讓核心GraphQL運作的程式庫已升級至^14.9版。 <!-- PWA-2137 2184 -->

* **修正GraphQL中多網站和多語言商店的翻譯問題**. GraphQL解析器現在會依預期根據存放區範圍傳回翻譯字串。 <!-- PWA-1946-->

* GraphQL現在為New Relic提供描述性交易名稱，有助於除錯。 [GitHub-30915](https://github.com/magento/magento2/issues/30915) <!-- PWA-1311-->

請參閱 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 這些增強功能的詳細資訊。

### 廠商隨附的擴充功能

以下專案除外： [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)，所有廠商隨附的擴充功能已從Magento Open Source2.4.4程式碼基底中移除。 商戶應移轉至官方的擴充功能，這些擴充功能可在 [Commerce Marketplace](https://marketplace.magento.com/extensions.html).

[Amazon Pay](https://docs.magento.com/user-guide/payment/payments.html)

[dotdigital](https://docs.magento.com/user-guide/marketing/communications.html)

[克拉納](https://docs.magento.com/user-guide/payment/payments.html)

[頂點](https://docs.magento.com/user-guide/tax/taxes.html)

[約特](https://docs.magento.com/user-guide/marketing/product-reviews.html)

### PayPal付款增強功能

* 現在支援Venmo付款選項。  <!-- AC-1229-->

* 「先買後付」已根據購物者的所在地而非商家的地點，新增為購物者的選項。

* 商戶現在可以在他們選擇的國家測試購物者體驗時設定購物者國家。 以前，測試僅限於針對商家所在國家/地區的測試。 此變更僅在沙箱模式下有效。

* 結帳頁面上的訊息現在會顯示準確的訊息，說明使用「稍後付款」時，購物者預期支付多少及增量金額。

### 協助工具更新

此版本增強了對標準無障礙指引的符合性。 它包含改良的工具提示、可存取的熒幕元素命名和標籤，以及重新設計的圖示和按鈕。 這些修正中有80%以上有助於改善視力缺佳或視力缺佳使用者的購物體驗。

### 頁面產生器

商戶現在可以新增替代文字(`alt_text`)至影像（影像、橫幅、幻燈片），以加強內容協助工具。 [GitHub-746](https://github.com/magento/magento2-page-builder/issues/746) <!-- PB-1193-->

## 已修正的問題

我們正在修正Magento Open Source2.4.4核心程式碼中的數百個問題。 以下說明這些已修正問題的子集。

### 安裝、升級、部署

<!-- MC-42026-->

* Magento Open Source現在會依預期在組建記錄檔中記錄靜態內容部署錯誤。

<!-- MC-43094-->

* 資料修正程式無法再忽略表格的唯一條件約束，並將重複值插入MySQL資料庫表格。 以前，修補程式可能會插入重複的值，進而損毀資料庫。

<!-- AC-1480-->

* 商家現在可以成功從使用Klarna的Magento Open Source2.4.2部署升級至Magento Open Source2.4.3。 [GitHub-33760](https://github.com/magento/magento2/issues/33760)

<!-- ACP2E-77-->

* 現在可以從命令列成功變更Sitemap產生器設定。 先前，當您嘗試在管理員外部變更Sitemap設定時，applicationOpen Source會顯示此錯誤： `Import failed: Notice: Trying to access array offset on value of type null in app/code/Magento/Cron/Model/Config/Backend/Sitemap.php on line 78`.  [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-215-->

* 此 `bin/magento app:config:import` 命令現在會在您更新時順利執行 `time` 中的值 `config.php`. 之前，以手動編輯（即不使用管理員）變更產品警報設定會導致錯誤。

### 協助工具

<!-- AC-1589-->

* 已解決在購物車和結帳頁面上導覽的協助工具錯誤。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* 熒幕助讀程式現在可以讀取產品頁面上的所有相關表單元素。

<!-- AC-1277-->

* 整個店面的影像刪除和移動圖示按鈕的對比已得到改善，以改善弱視使用者的可讀性。

<!-- AC-1272-->

* 用於在整個產品介面中執行搜尋的放大鏡圖示已被指派可存取的名稱和替代文字。

<!-- AC-1275-->

* 現在可以使用Tab鍵存取RTF編輯器工具列。

<!-- AC-1283-->

* 此 **此專案具有權重** 選取上的輸入 **目錄** > **產品** 「詳細資訊」頁面現在有可見的標籤和可存取的名稱。

<!-- AC-1284-->

* 控制項的可存取名稱現在包含其可見標籤的文字，以顯示每頁專案數的下拉式清單。

<!-- AC-1287-->

* 表格控制於 **目錄** > **產品** 現在，當表格摺疊時，「詳細資訊」頁面具有可見的標籤和可存取的名稱。

<!-- AC-1288-->

* 「產品」表格中的「編輯連結」現在會有獨特、有意義的連結文字。

<!-- AC-1276-->

* 展開工具提示的觸發器現在會提供文字名稱。

<!-- AC-1285-->

* 店面各處的按鈕現在都有唯一的、描述性的可存取名稱。 先前，分割按鈕與文字按鈕和相鄰的下箭頭圖示按鈕具有相同的可存取名稱。

<!-- AC-1277-->

* 整個店面的影像刪除和移動圖示按鈕的對比已得到改善，以改善弱視使用者的可讀性。

<!-- AC-1279-->

* 當商家編輯「搜尋引擎最佳化」摺疊式功能表的輸入專案時，鉛筆圖示就會顯示，而文字替代專案已新增至此圖示。

<!-- AC-1272-->

* 用於在整個產品介面中執行搜尋的放大鏡圖示已被指派可存取的名稱和替代文字。

<!-- AC-1286-->

* 產品頁面 **新增檢視** 文字輸入欄位現在具有可存取的名稱。

<!-- AC-1283-->

* 此 **此專案具有權重** 選取上的輸入 **目錄** > **產品** 「詳細資訊」頁面現在有可見的標籤和可存取的名稱。

### 後端

<!-- MC-43161-->

* 管理員現在可以在已設定自訂管理員路徑且已啟用秘密金鑰的部署中登入管理員。 之前，applicationOpen Source會顯示此錯誤： `Invalid security or form key. Please refresh the page`.

<!-- MC-41949-->

* 多存放區階層變更時，Magento Open Source不再重新導向至所有存放區檢視範圍。 先前，儲存階層後，購物者會重新導向至不正確的商店URL，而多商店部署中會選取「所有商店檢視」範圍。

### 套裝產品

<!-- MC-42885-->

* 購物者現在可以新增包含固定產品稅和兩個選項的套件產品至購物車。 之前，applicationOpen Source未新增產品並顯示此錯誤： `We can't add this item to your shopping cart right now`.

<!-- MC-42249-->

* 表單驗證方式： `data-validate` 和 `min` 已將屬性新增至「購物車數量」欄位，以防止套件組合產品的負值。

<!-- MC-41794-->

* 此 `products` 若在商店檢視層級上停用子產品，則查詢現在會正確篩選套件組合產品。 以前，查詢會傳回在商店檢視層級停用的子產品。

<!-- MC-42811-->

* `cron` 現在會如期清除產品類別快取 `indexer_update_all_views` 執行。 先前，在類別中大量更新許多產品後，applicationOpen Source在類別頁面上顯示不正確的產品計數。

<!-- MC-42811-->

* 當套件產品重新出現在庫存中時，Magento Open Source現在會依預期更新類別產品快取。

<!-- AC-715-->

* 現在，使用不同貨幣的多商店部署中，套件產品購買的電子郵件確認會如預期般進行貨幣轉換。 [GitHub-33426](https://github.com/magento/magento2/issues/33426)

<!-- ACP2E-64-->

* 產品格線中現在已正確顯示具有%首碼的套件組合產品的進階定價特殊價格折扣。 以前，產品格線中以$ prefix而不是%錯誤地顯示%折扣。

<!-- ACP2E-262-->

* 現在，當相關產品變更其狀態時，管理員中的套件產品狀態會自動更新。

<!-- ACP2E-326-->

* 套裝產品的GraphQL解析程式現在會檢查是否已停用子套裝產品。 以前，不會進行此檢查，且不會進行此類查詢 `categoryList` 已傳回不可銷售的子產品。

<!-- MC-43223-->

* `cart` 查詢回應現在會針對具有動態價格的套件產品傳回精確折扣。 以前，查詢回應包括個別套用至每個套件組合產品的折扣。

### 快取

<!-- MC-42811-->

* 已最佳化重新索引期間執行的快取清除演演算法。 重新索引期間快取類別時，現在套件產品會如預期般顯示。 先前，重新索引期間在快取產品類別後，套件產品不會顯示數小時。

<!-- AC-328-->

* 在一般使用情況下，頁面快取不再快速增長。 [GitHub-9458](https://github.com/magento/magento2/issues/9458)

<!-- magento/magento2/pull/33468-->

* 下訂單不會再導致從清漆快取中移除與已訂購產品相關的所有快取標籤。 [GitHub-30128](https://github.com/magento/magento2/issues/30128)

<!-- AC-1478-->

* 當您從最熱門的類別更新產品，或執行索引以更新產品屬性或庫存狀態時，不再清除完整網站頁面快取。 先前，清漆快取會將頂端選單類別ID新增至所有頁面快取標籤。 [GitHub-33465](https://github.com/magento/magento2/issues/33465)

### 購物車與結帳

<!-- MC-41494-->

* 最低廣告價格 **這是什麼？** 購物車頁面上的連結現在可點按，並如預期開啟資訊快顯視窗。 之前，按一下此連結沒有任何效果。

<!-- MC-42639-->

* 在啟用永久購物車的部署中，購物者現在可以在工作階段逾時後下訂單，而不會發生錯誤。 之前，應用程式Open Source會在工作階段逾時後顯示付款錯誤。

<!-- MC-42638-->

* 將高排序順序值指派給客戶地址屬性，不再導致結帳頁面上的效能降低。

<!-- MC-42813-->

* 如果更新的數量無效，「Magento Open Source」現在會將購物車產品數量還原為先前的值。

<!-- MC-42347-->

* 按一下 **加入購物車** 「最近檢視」區段中的按鈕現在會如預期重新導向至產品詳細資料頁面。 過去，購物者會重新導向至產品清單頁面。

<!-- MC-33705-->

* 訪客購物者現在可以使用包含數種自訂客戶地址屬性的客戶地址成功結帳。 以前，自訂屬性的值在結帳期間顯示時格式不正確。 [GitHub-30290](https://github.com/magento/magento2/issues/30290)

<!-- MC-24379-->

* 現在啟用表格費率時，Magento Open Source會將免費送貨臨界值正確套用至訂單。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- AC-271-->

* 您現在可以使用 `POST /V1/guest-carts/:cartId/items` 以新增具有不同選項的簡單產品至購物車。 之前，此呼叫會變更您新增的第一個簡單產品的數量，而非新增第二個具有指定選項的簡單產品。 [GitHub-32302](https://github.com/magento/magento2/issues/32302)

<!-- AC-1089-->

* 現在，為設定部署時，結帳頁面的「訂單摘要」區段會顯示正確的貨幣和金額。 `Poland` 國家/地區和 `PLN` 貨幣。 以前，購物車和結帳頁面會顯示金額 **計畫0**.

<!-- MC-32805-->

* 購物者點按時，Magento Open Source不再擲回錯誤 **更新購物車** 變更迷你購物車中的產品數量後。 之前，applicationOpen Source會顯示此錯誤：  `The quote item isn't found. Verify the item and try again`.

<!-- MC-43176-->

* GraphQL `products` 現在，查詢特定商店中的可設定產品時，只會傳回指定商店中的產品價格範圍。 以前，請求會傳回非指定商店中簡單產品的價格範圍。

<!-- AC-691-->

* 當購物者新增缺少街道欄位的帳單地址時，Magento Open Source不再擲回此錯誤： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`. [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- AC-1625-->

* 在已移除mini cart的商店中結帳時，Magento Open Source不再擲回主控台錯誤。 [GitHub-34513](https://github.com/magento/magento2/issues/34513)

<!-- AC-691-->

* 當帳單地址缺少街道欄位值或街道欄位值不是陣列時，在付款階段結帳不再失敗。 先前，簽出失敗並出現此錯誤： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`. [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- ACP2E-10-->

* 當兩個購物車規則套用至符合以下條件的訂單時，Magento Open Source現在可以正確計算折扣：一個購物車規則套用優惠券代碼和 **整個購物車的固定價格**  條件和第二個購物車價格規則沒有優惠券和 **產品價格折扣的百分比** 條件。 先前，當先前的購物車規則已對某些產品套用折扣時，相關演演算法無法在購物車產品之間適當地按比例分割折扣。

<!-- ACP2E-22-->

* 現在可在抵用券報表格中正確計算銷售總計。 以前，銷售總額不包含運費金額。

<!-- ACP2E-44-->

* 當購物者切換送貨方式時，現在可以正確計算整張購物車的折扣。

<!-- ACP2E-159-->

* 的下拉式清單 **州** 「管理員建立訂單」頁面上的欄位現在會由所選國家/地區的預先定義值填入。 之前，此欄位是輸入文字欄位，而非下拉式功能表。

<!-- ACP2E-172-->

* 使用後，Magento Open Source不再擲回錯誤 `addConfigurableProductsToCart` 變異：在變更商店檢視後直接將可設定產品新增至購物車。

<!-- ACP2E-176-->

* 當您使用時，Magento Open Source不再擲回錯誤 `addConfigurableProductsToCart` 變異，以將可設定產品的已停用子項新增至購物車。 先前，applicationOpen Source擲回完整性條件約束違規錯誤。

<!-- ACP2E-157-->

* 如果優惠券套用到的順序失敗，優惠券使用量值不再變更。  以前，在購物車中套用優惠券後，一次性使用自動產生的優惠券會標籤為無效，但未下訂單。

<!-- ACP2E-137-->

* 已將驗證新增至結帳工作流程，以比較客戶的街道地址與預設值。 如果驗證程式識別變更，則會設定 `customer_address_id` 至 `null` 將其視為新的客戶地址。 先前，如果客戶儲存地址時未進行結帳驗證，而同一客戶嘗試在將驗證套用到結帳欄位後使用相同地址下訂單，則應用程式Open Source不接受編輯的地址並擲回例外狀況。

### 購物車價格規則

<!-- MC-42288-->

* 優惠券產生現在會遭到封鎖，直到將相關的購物車價格規則與一併儲存 `auto` 選項已啟用。 如果您嘗試儲存此規則，但未啟用 `auto` 選項，應用程式Open Source會顯示此訊息： `Rule is not saved with auto generate option enabled. Please save the rule and try again`.

<!-- MC-42743-->

* 新增確認正確套用購物車價格規則折扣的測試。

<!-- ACP2E-213-->

* 使用SKU條件的購物車價格規則 **如果在購物車中找到/找不到專案，且滿足以下所有條件： All/Any of these conditions true** 現在可如預期使用可設定產品。

<!-- ACP2E-225-->

* 購物車價格規則現在已正確套用至固定價格的套件組合產品。 先前，當至少有一個子產品在規則條件中指定了相同的屬性集時，購物車價格規則不適用於這些產品。

<!-- ACP2E-285-->

* 現在當使用設定Magento Open Source時，可以成功將價格為0的產品新增到購物車 **整個購物車的固定金額折扣** 購物車價格規則。 之前，applicationOpen Source會顯示此錯誤：  `report.ERROR: Warning: Division by zero in /home/mer33515/public_html/ee24develop/app/code/Magento/SalesRule/Helper/CartFixedDiscount.php on line 85`.

<!-- ACP2E-306-->

* 修正條件： `cart` 啟用具有固定金額折扣的購物車規則時，查詢傳回不正確的折扣金額。

### 目錄

<!-- MC-41796-->

* 當產品具有「 」時，在產品格線上執行「大量屬性更新」動作時，Magento Open Source不再擲回例外狀況 `datetime` 屬性。

<!-- MC-42571-->

* GraphQL查詢現在會根據子產品的可見度篩選設定，傳回可設定產品子產品的結果。

<!-- MC-41853-->

* 當可設定的產品屬性變更時，Magento Open Source不再修改相關的產品價格。 之前，可設定產品的最低廣告價格(MAP)會覆寫商店前方相關產品的價格。

<!-- MC-41796-->

* 當產品具有「 」時，在產品格線上執行「大量屬性更新」動作時，Magento Open Source不再擲回例外狀況 `datetime` 屬性。

<!-- MC-42132-->

* 管理員產品格線和篩選器的下拉/多重選取屬性值現在會如預期從管理員設定中衍生。 以前，屬性值衍生自預設商店設定。

<!-- MC-43010-->

* GraphQL類別查詢會如預期傳回階段類別變更的相關資訊。

<!-- AC-711-->

* 產品清單現在會透過產品指派至父類別及其子類別，但位於每個類別中不同位置的部署，在「管理員」中準確呈現。 之前，產品清單呈現會失敗，並出現以下錯誤： `Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "<ID>" already exists`. [GitHub-33145](https://github.com/magento/magento2/issues/33145

<!-- AC-1148-->

* 現在可以將具有多個選項（超過150個）的多選屬性指派給新產品。 以前，屬性選項儲存在 `catalog_product_entity_varchar` 表格，而且當您在「管理員」中重新開啟產品時，並非所有選項都會出現。 [GitHub-33486](https://github.com/magento/magento2/issues/33486)

<!-- AC-904-->

* 新增路由器無法具現化從URL收集之動作類別情況下的驗證。 應用程式Open Source現在會顯示標準錯誤訊息。 之前，applicationOpen Source會顯示此錯誤：  `PHP Error: Cannot instantiate abstract class Magento\Catalog\Controller\Product\Compare`.

<!-- ACP2E-115-->

* 將許多產品（約10,000件）指派給類別，不會再導致瀏覽器當機。

<!-- ACP2E-122-->

* 無論是從管理員儲存還是匯入，影像屬性現在都會一致地儲存在資料庫中。 以前，影像替代文字值儲存方式不一致。 如果影像存在且標籤設定為null，則資料庫中不會重設標籤值。

<!-- ACP2E-155-->

* 目錄Widget SQL查詢已最佳化。 以前，大型MySQL查詢會減緩頁面載入速度，並導致MySQL中斷。

<!-- ACP2E-165-->

* 價格篩選器現在可以正確用於沒有庫存的可設定產品。 過去，沒有庫存的可設定產品無法顯示在其正確的價格範圍內。

<!-- ACP2E-330-->

* 更新子產品時，不再移除在部分索引程式期間繼承自其父可設定產品的目錄規則折扣。 先前，當我們將可設定產品指派給類別，但沒有其關聯的簡單產品，然後使用該類別建立目錄規則時，應用程式Open Source在部分索引過程中移除了指派給簡單產品的目錄規則。

<!-- ACP2E-216-->

* 新增產品選項時，分組和可配置產品的網格檢視清單現在僅包含簡單和虛擬產品。 之前，應用程式包含簡單產品及選項。

### 目錄規則

<!-- MC-41807-->

* 目錄規則的每日更新不再導致效能降低。 以前，部分目錄產品價格索引不會移除舊價格或日期。

<!-- MC-38263-->

* 在部分重新索引期間，Magento Open Source不再移除可設定產品的目錄價格規則。 以前，在可設定的產品重新編制索引時，只會重新編制子產品的索引。

<!-- ACP2E-331-->

* 使用下列專案的目錄價格規則 **category不是category_id** 條件現在適用於不屬於任何類別的產品。

### 可設定的產品

<!-- MC-42188-->

* 可設定的產品選項標簽名稱現在會根據管理員訂單建立期間選取的商店檢視。 之前，applicationOpen Source使用預設商店檢視中的標簽名稱。

<!-- MC-42187-->

* 啟用顯示無庫存產品的全域標幟時，產品清單現在會正確包含無庫存產品的子產品。 先前，若啟用此標幟時，若其中一個子產品選項無庫存，則產品清單不包含子產品。

<!-- MC-42340-->

* 您現在可以使用 `addConfigurableProductsToCart` 變異：在非預設商店檢視上將可設定產品新增至購物車。 過去，當網站ID和商店ID不同時，您無法新增可設定產品至購物車。 [GitHub-30948](https://github.com/magento/magento2/issues/30948)

<!-- MC-43051-->

* GraphQL `products` 查詢不再傳回有關可設定產品之已停用子產品的資料。

<!-- ACP2E-101-->

* 為可設定產品建立新設定不再覆寫現有設定中的變更。 過去，現有變數的狀態會以預設狀態覆寫 `enabled` 產生新變數後。

<!-- ACP2E-175-->

* 當您嘗試將可設定產品的已停用子項新增至購物車時，Magento Open Source不再擲回內部錯誤。

### 客戶

<!-- MC-24204-->

* Magento Open Source現在會在建立訂單時考量管理員地區設定的網站範圍。 過去，訂單詳細資料（例如客戶地址屬性）只有在多網站部署中，才能在一個網站上正常運作。 [GitHub-23254](https://github.com/magento/magento2/issues/23254)

### 電子郵件

<!-- MC-42592-->

* 當客戶嘗試使用無效的電子郵件帳戶登入時，簽出登入快顯視窗中的電子郵件欄位驗證錯誤現在與客戶登入頁面上的電子郵件驗證錯誤相符。

<!-- MC-42764-->

* Magento Open Source當從管理員和 **通知客戶** 核取方塊已啟用。 以前，送貨確認電子郵件會包含此訊息： `We're sorry, an error has occurred while generating this content`.

<!-- MC-42486-->

* 電子郵件範本中的地區和國家/地區ID值現在可正確轉換。 先前，當您按一下 **預覽連結** 在管理員電子郵件範本中，國家/地區和地區名稱未正確顯示。

<!-- MC-36262-->

* 管理員針對非預設商店檢視傳送的銷售更新電子郵件現在包含正確的訂單狀態標籤。 以前，這些電子郵件總是從預設商店顯示狀態。 [GitHub-29263](https://github.com/magento/magento2/issues/29263)

<!-- AC-721-->

* Magento Open Source現在包含 `Content-Disposition: inline` 電子郵件中的標題如預期。 [GitHub-29258](https://github.com/magento/magento2/issues/29258)

<!-- magento/magento2/pull/32720-->

* 訂單和出貨通知電子郵件現在可在使用Microsoft Outlook和MS Exchange Server的部署中正常運作。 以前，電子郵件內文是空的，但包含一個ATT*標籤的附件。 [GitHub-25076](https://github.com/magento/magento2/issues/25076)

<!-- ACP2E-47-->

* 訂單電子郵件現在包含使用購物者地區設定的本地化資料（如預期）。 以前，排序電子郵件使用管理員地區設定。

<!-- ACP2E-107-->

* 按一下任何電子郵件範本的預覽，現在會依預期在個別視窗中開啟範本預覽。  之前，應用程式開放原始碼會同時從「電子郵件範本」格線和在彈出式視窗中開啟範本預覽。

<!-- ACP2E-127-->

* 從非預設網站傳送的非同步訂購電子郵件現在包含來自適當網站的標誌URL。 以前，這些電子郵件一律包含預設或主要網站的標誌。 (具有「 」的預設金鑰 `storeCode` 值已指派給傳遞至的第二個陣列引數 `UrlInterface` `getUrl` 函式。 此值會區分不同商店/網站的URL，並產生正確的 `baseUrl` 用於傳送給客戶的電子郵件內容。)

### 框架

<!-- AC-515-->

* 現在，將數字轉換為字串並比較字串，即可進行數字與非數字字串之間的非嚴格比較。 數字與數值字串之間的比較仍如往常般運作。 這表示 `0 == "not-a-number"` 現在會視為false。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-1338-->

* 協助程式 `Magento\Payment\Helper\Data` 不再於建構函式中建立新版面。 先前，當自訂命令中使用此協助程式而未指定區碼時，Magento Open Source會擲回錯誤。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1068-->

* 已更新 `allure-framework/allure-php-api` 撰寫器相依性。

<!-- MC-42091-->

* 現在，當bootstrap檔案中發生例外狀況時，Magento Open Source會傳回500回應代碼。 之前，applicationOpen Source會傳回200 OK狀態碼。 [GitHub-22196](https://github.com/magento/magento2/issues/22196)

<!-- AC-1318-->

* 貨幣符號現在會如預期在店面產品詳細資訊頁面上載入。 以前，重新載入JavaScript頁面後，這個符號有時會消失。

<!-- AC-719-->

* 正在更新 `symfony/console` 執行時不再導致失敗 `bin/magento setup:di:compile`. [GitHub-33595](https://github.com/magento/magento2/issues/33595)

<!-- AC-1504-->

* 新的必要選項已新增至 `.htaccess` 和 `nginx.conf` 以Magento Open Source分發以支援PHP 8.x的檔案。 過時的選項也已移除。 [GitHub-34358](https://github.com/magento/magento2/issues/34358)

<!-- MC-42448-->

* 商戶現在可以上傳多個產品的影片。 現在，只有當上傳的檔案名稱包含副檔名時，檔案產生程式才會將副檔名附加至檔案名稱。 先前，當商家嘗試上傳然後儲存兩個不同產品的相同視訊時，應用程式Open Source擲回此錯誤： `Notice: Undefined index: extension in /app/7ha7zds7wvqys_stg/vendor/magento/framework/File/Uploader.php on line 699`. 發生此狀況是因為Magento Open Source嘗試將副檔名附加至該名稱，不論上傳的檔案名稱是否有副檔名。

<!-- magento/magento2/pull/34106-->

* 修正的問題 `sprintf(__())` 和 `sprintf(Magento\Framework\Phrase())` 在整個程式碼基底中建構與PHP 8.x相容性。 之前，applicationOpen Source擲回這種型別的錯誤： `Expected parameter of type 'string', 'Magento\Framework\Phrase' provided`. [GitHub-34085](https://github.com/magento/magento2/issues/34085)

<!-- AC-1605-->

<!-- MC-42934-->

* 改善進階搜尋查詢引數的驗證。 [GitHub-33589](https://github.com/magento/magento2/issues/33589)

<!-- ACP2E-69-->

* 執行中 `bin/magento support:backup:code` 現在會依預期建立備份。 之前，applicationOpen Source已建立備份，但擲回錯誤。

<!-- ACP2E-82-->

* 已成功執行 `cron` 現在已為流程指派狀態 `success`. 先前，相同 `cron` 處理程式可能會執行兩次，因為成功 `cron` 已指派給處理序 `pending` 狀態。

<!-- ACP2E-102-->

* 此 `Magento_Logging` 模組現在支援IPv6。

### 一般修正

<!-- MC-42506-->

* Magento Open Source現在會在複製產品時，根據其定義的範圍複製所有產品欄位。 先前， **名稱** 和 **說明** 欄位已重設為 `global` 範圍。

<!-- MC-42612-->

* 當產品價格為0時，Magento Open Source不再將差數舍入套用至折扣。 之前，「應用模組開放原始碼」計算負折扣金額。

<!-- MC-42215-->

* 產品具有 **設為新增** 現在可以成功儲存指派了空白開始日期和過期結束日期的屬性。 先前，當您使用以下設定儲存產品時，applicationOpen Source會擲回此錯誤： `Make sure the To Date is later than or the same as the From Date`.

<!-- MC-42775-->

* 管理員現在可以重試執行時間超過最大處理時間的操作。 預設最大值為12小時。

<!-- MC-42514-->

* 由於消費者的未確認訊息，批次動作處理期間不再發生中斷管道錯誤。 預先擷取計數屬性現在會限制消費者的這些訊息，並避免錯誤。 先前，執行 `bin/magento queue:consumers:start async.operations.all` 產生此錯誤：  `Broken pipe or closed connection`.

<!-- MC-42075-->

* 在第二次登入嘗試失敗後，購物者現在會如預期重新導向回登入頁面。 之前，在第二次登入嘗試失敗後，購物者會被重新導向至404頁。 [GitHub-32885](https://github.com/magento/magento2/issues/32885)

<!-- magento/magento2/pull/25279-->

* 密碼重設權杖的有效性已延長，以避免在提交密碼變更頁面期間發生競爭條件。 [GitHub-29647](https://github.com/magento/magento2/issues/29647)

<!-- AC-1316-->

* 指派給新整合的許可權現在已生效。 [GitHub-33347](https://github.com/magento/magento2/issues/33347)

<!-- AC-1328-->

* 修正了影響「聯絡我們」表單例外狀況記錄中剩餘訊息的回歸問題。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- magento/magento2/pull/31654-->

* 解決JavaScript載入客戶資料時的多個問題。 [GitHub-30498](https://github.com/magento/magento2/issues/30498)

<!-- magento/magento2/pull/33324-->

* 使用 `QuoteIdToMaskedQuoteId` 在擴充功能中，不再大幅增加回應時間。 [GitHub-33676](https://github.com/magento/magento2/issues/33676)

<!-- AC-720-->

* 類別 `BundleDiscountPrice` 在 `magento2/app/code/Magento/Bundle/Pricing/Price/ConfiguredPrice.php` 現在會按預期宣告。 之前，applicationOpen Source擲回此錯誤： `Class Magento\Bundle\Pricing\Price\BundleDiscountPrice not found`. [GitHub-33334](https://github.com/magento/magento2/issues/33334)

<!-- AC-1239-->

* AWS S3介面卡寫入的逸出CSV欄位值現在與其他檔案系統介面卡寫入的資料相符。

<!-- MC-43046-->

* 現在支援與S3相容的儲存裝置。 [GitHub-32114](https://github.com/magento/magento2/issues/32114)

<!-- ACP2E-123-->

* 從一部裝置登出後，購物者不再自動從其他裝置登出。

### GraphQL

<!-- PWA-1938-->

* 此 `generateCustomerToken` 和 `revokeCustomerToken` 變動現在可提供使用者狀態的正確快取ID。 之前，這些變異使用的是 `x-magento-cache-id`，會降低效能。

<!-- PWA-1506-->

* 此 `setBillingAddressToCart` 變異現在正確使用 `same_as_shipping` 引數來設定帳單地址，以如預期符合送貨地址。 之前，applicationOpen Source會顯示此錯誤： `The shipping method is missing. Select the shipping method and try again`. [GitHub-30924](https://github.com/magento/magento2/issues/30924)

<!-- PWA-1980-->

* GraphQL購物車作業現在僅在查詢請求時計算購物車總計。 以前，購物車作業一律會計算總量，而這是耗用大量資源的作業。

<!-- MC-42781-->

* 此 `addProductsToCart` 突變現在只會將指派給標題中定義之存放區的產品新增到購物車。

<!-- MC-42783-->

* `products` 使用分層導覽篩選器的查詢現在會傳回正確的子類別清單。 [GitHub-33387](https://github.com/magento/magento2/issues/33387)

<!-- MC-42831-->

* 查詢和變異會傳回 `ConfigurableCartItem` 物件包含所設定變體的預期相關資訊。

<!-- MC-42082-->

* 此 `products` query現在會傳回設定產品選項值和變體屬性值。 以前，這些值在查詢回應中為空白。

<!-- MC-41794-->

* 此 `products` 若在商店檢視層級上停用子產品，則查詢現在會正確篩選套件組合產品。 以前，查詢會傳回在商店檢視層級停用的子產品。

<!-- MC-42903-->

* 此 `setShippingAddressesOnCart` 突變現在支援在下列情況下，以空白電話號碼值設定購物車的送貨地址： **顯示電話** 管理員組態設定已設為選用。 之前，applicationOpen Source擲回此錯誤： `Field CartAddressInput.telephone of required type String! was not provided`.

<!-- MC-42970-->

* 修正以下問題： `addSimpleProductsToCart` 變異可讓您將簡單產品新增至購物車，但並未指派給目標網站。

<!-- MC-42600-->

* 已針對GraphQL最佳化MySQL查詢 `products` 使用搜尋引數來縮小搜尋結果的查詢。

<!-- MC-43189-->

* 此 `addConfigurableProductToCart` 如果產品未包含在請求的範圍內，變異不再支援將產品新增到購物車。

<!-- MC-42666-->

* 此 `products` query現在只會傳回指派給請求之倉庫的可設定變體。 以前，會傳回請求的可設定產品的所有變體。

<!-- MC-42652-->

* `addSimpleProductsToCart` 要求現在可以順利並行執行。 先前，對相同SKU的多個請求會為相同的購物車ID建立重複的行專案，而不是如預期增加產品數量。

<!-- AC-856-->

* 此 `addProductsToCompareList` 突變現在可用於比較可設定產品的變體。

<!-- MC-42443-->

* 從後端更新層級產品的價格時，新價格會在客戶的購物車上正確更新。 先前，雖然購物車摘要區段中的小計已正確更新，但列小計並未更新。

<!-- AC-697-->

* 此 `addProductsToCart` 突變現在會新增所有已選取的選項至購物車（當用於新增具有多個選取選項的組合產品時）。 以前，變異只會新增最後的選取範圍。 [GitHub-33123](https://github.com/magento/magento2/issues/33123)

<!-- MC-38815-->

* 當選擇性電話欄位的值設為空字串時，GraphQL查詢現在會如預期傳回帳單地址。 以前，查詢會傳回null位址值。 [GitHub-30218](https://github.com/magento/magento2/issues/30218)

<!-- ACP2E-51-->

* 此 `products` 當多個產品具有相同的關聯性或價格值時，查詢回應現在會根據指定的排序順序列出產品。

<!-- ACP2E-75-->

* 同時 `addSimpleProductsToCart` 和 `addProductsToCart` 請求不再產生重複報價專案。

<!-- ACP2E-76-->

* `products` 查詢分層導覽篩選器現在會傳回正確的子類別清單。 現在，只有直接子類別包含在 `includeDirectChildrenOnly` 請求中提供標幟。 以前，當產品被指派給多個類別時，所有類別都會包含在彙總區段的回應中。

<!-- ACP2E-132-->

* 新增GraphQL搜尋查詢的搜尋建議功能。

<!-- ACP2E-288-->

* 此 `OrderAddress.telephone` 欄位現在是中的選用欄位 `customer` 查詢或其他傳回或修改客戶訂單地址的查詢與變動。

<!-- ACP2E-278-->

* 現在，當群組ID透過API變更時，店面和管理員中指定群組的客戶價格可以正確更新。 過去，透過API變更群組ID時，無法正確更新這些價格。

### 影像

<!-- MC-42080-->

* 含有透明背景的浮水印影像在其覆蓋的透明產品影像上不再有白色背景。 先前，當浮水印影像和產品影像都有透明背景時，浮水印會顯示為白色背景。

<!-- AC-1240-->

* 啟用AWS S3時，商業發票和出貨收據的圖志現在會如預期上傳和顯示。

<!-- MC-42160-->

* 在部署中，與新增至CMS頁面的影像相關聯的媒體標籤，在部署中，管理員設定為與存放區URL不同的網域，現在會如預期包含存放區URL。 以前，媒體標籤包含靜態管理URL，而不是預期的商店URL。 [GitHub-32930](https://github.com/magento/magento2/issues/32930)

<!-- ACP2E-315-->

* 當您同時在店面載入影像時清除影像快取時，Magento Open Source不再擲回錯誤。

### 匯入/匯出

<!-- AC-1486-->

* `bin/magento remote-storage:sync` 當檔案名稱相似但只有一兩個字元不同時，不再失敗。 先前，第一個影像儲存正確，但第二個名稱相似的影像觸發同步失敗，並出現此錯誤： `Notice: Undefined index: media/catalog/product/5/_ in /src/vendor/magento/module-remote-storage/Driver/Adapter/Cache/Generic.php on line 197`. [GitHub-34337](https://github.com/magento/magento2/issues/34337)

<!-- MC-41672 23734-->

* Magento Open Source現在會在排定的匯出後，將匯出檔案名稱中的時間戳記轉換為使用者的時區。 以前，這些值不會轉換，而Magento Open Source會顯示UTC時間戳記。

<!-- MC-42330-->

* 多次匯入相同的CSV檔案時，Magento Open Source不會再在遠端儲存空間中建立重複的影像。

<!-- AC-1045-->

* 匯入不再失敗，並顯示此訊息： `Import failed: Area code not set: Area code must be set before starting a session`. [GitHub-16171](https://github.com/magento/magento2/issues/16171)

<!-- AC-988-->

* 您現在可以在執行後成功匯入 `bin/magento app:config:dump` 和手動編輯 `config.php`. [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- MC-41672-->

* 非預設的多重值分隔符號現在可用於自訂的多重選取屬性。 先前，匯入期間驗證失敗。 [GitHub-23156](https://github.com/magento/magento2/issues/23156)

<!-- ACP2E-86-->

* 從CSV匯入期間，現在類別中的產品位置已正確指派。

### 索引

<!-- MC-42791-->

* Magento Open Source現在會在重新索引後，依預期在店面顯示產品。 先前，當第一個重新編列索引的500個產品有庫存，接著的500個產品無庫存，店面沒有顯示任何其他產品。

<!-- magento/magento2/pull/27212-->

* 解決合併後的一致性問題 `indexer.xml` 檔案。 中允許的值 `classType` 現在在未合併和合併中是相同的 `indexer.xml` 檔案。 [GitHub-29609](https://github.com/magento/magento2/issues/29609)

<!-- AC-190-->

* 類別索引器已實施同步化機制，以防止完整和部分索引器並行執行。 先前，當這些索引器同時執行時，店麵類別頁面可能會暫時省略產品，或者類別頁面可能會暫時清空產品。

### 基礎架構

<!-- AC-1172-->

* 不支援的 `str_contains` 方法已取代為支援的函式。 這是Magento Open Source2.4.3的已知問題。 [GitHub-33680](https://github.com/magento/magento2/issues/33680)

<!-- magento/partners-magento2ee/pull/573-->

* 已重構程式碼基底以更正關鍵字的使用 `match`，這是PHP 8.x中的保留關鍵字。 [GitHub-33626](https://github.com/magento/magento2/issues/33626)

* HTML標籤現在可以正確巢狀和關閉，以符合JQuery 3.5.x中對包括自訂元素在內的非空白元素的標準。 <!-- AC-1942-->

<!-- magento/magento2/pull/34234)-->

* 固定 `abs()` 和 `round()` 與PHP7.x和PHP8.x相容的函式。  [GitHub-34322](https://github.com/magento/magento2/issues/34322)

<!-- AC-719-->

* 正在更新 `symfony/console` 執行時不再導致失敗 `bin/magento setup:di:compile`. [GitHub-33595 ](https://github.com/magento/magento2/issues/33595)

<!-- magento/magento2/pull/34175-->

* 已更正 `colinmollenhour/cache-backend-redis` 撰寫器相依性。 [GitHub-34177](https://github.com/magento/magento2/issues/34177)

<!-- magento/magento2/pull/33932 magento/magento2/pull/33992-->

* 程式碼基底已重構，以移除對已棄用方法的呼叫 `phpunit/phpunit`. [GitHub-33916](https://github.com/magento/magento2/issues/33916)

<!-- MC-42960-->

* 當管理員為唯讀時，Magento Open Source現在會顯示資訊性錯誤 `pubs/media` 嘗試存取包含影像之產品的產品詳細資訊頁面。 之前，applicationOpen Source擲回PHP錯誤。 [GitHub-32819](https://github.com/magento/magento2/issues/32819)

<!-- AC-853-->

* 所有成員層級 `@api` 註解在整個程式碼基底中已經移至其類別。

<!-- AC-1977-->

* `gift-card Cms` Widget資料已從 `Magento/WidgetSampleData` (Magento Open Source)至 `Magento/GiftCardSampleData` (Adobe Commerce)。 這已解決在PHP8.1上安裝(Magento Open Source)具有範例資料的問題。

<!-- AC-1001-->

* 整個Adobe Stock整合程式碼基底中的已標籤介面，具有 `@api` 視需要。 [GitHub-32875](https://github.com/magento/magento2/issues/32875)

<!-- AC-1770-->

* 使用模擬的預備陳述式時，結果集中的整數和浮點現在會使用原生PHP型別而不是字串傳回。 [GitHub-34625](https://github.com/magento/magento2/issues/34625)

<!-- AC-1697-->

* 已停用從false值自動建立陣列，以確保與PHP 8.1相容。

<!-- AC-1338-->

* 協助程式 `Magento\Payment\Helper\Data` 不再於建構函式中建立新版面。 先前，當此協助程式用於自訂命令而未指定區碼時，應用程式Open Source會擲回錯誤。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1077-->

* 您現在可以傳遞 `data` 區塊執行個體建構函式的引數 `di.xml`.

<!-- MC-43096-->

* 已最佳化 `Generator.php` 以提升可讀性。 [GitHub-33809](https://github.com/magento/magento2/issues/33809)

<!-- AC-1313-->

* 改進JWK簽入 `JwsManager` 類別來處理直接在標頭中設定演演算法的情況。 之前，此檢查會忽略此有效案例。 [GitHub-32636](https://github.com/magento/magento2/issues/32636)

#### JavaScript相依性更新

<!-- magento/magento2/pull/33871-->

* `jquery-validate` 協力廠商資料庫 [GitHub-33853](https://github.com/magento/magento2/issues/33853)

<!-- ENGCOM-8667-->

* `Less.js` (v3.13.1) [GitHub-32845](https://github.com/magento/magento2/issues/32845)

#### 程式庫移除和淘汰

* 下列程式庫已移除，因為Magento Open Source2.4.x支援的所有瀏覽器已內建對此功能的支援：

   * `es6-collections.js`   <!-- AC-18-->
   * `MutationObserver.js` <!-- AC-15-->
   * `Modernizr` <!-- AC-12-->
   * `FormData.js`

* 已移除未使用的 `jquery.hoverIntent` JavaScript程式庫。 [GitHub-33732](https://github.com/magento/magento2/issues/33732) <!-- AC-97-->

* `lib/internal/Magento/Framework/Filter/Money.php` 已過時。 它包含 `money_format()` 函式中，此函式已在PHP 8.x中移除。 [GitHub-33870](https://github.com/magento/magento2/issues/33870)<!-- magento/magento2/pull/34366)-->

* 移除已棄用、不支援的 `grunt-autoprefixer` 封裝。 [GitHub-34037](https://github.com/magento/magento2/issues/34037) <!-- magento/magento2/pull/34032-->

#### 程式庫升級

* 下列程式庫已升級至較新版本：

   * `script.aculo.us` <!-- AC-363-->
   * `Chart.js`  <!-- AC-361-->
   * `moment.js` <!-- AC-11-->
   * `moment-timezone-with-data.js`   <!-- AC-10-->
   * `matchMedia.js` <!-- AC-8-->
   * `underscore.js`  <!-- AC-13-->
   * `PrototypeJS`  <!-- AC-17-->
   * `RequireJS`
   * `LessCSS`

### 發票

<!-- AC-1564-->

* 轉型至 `int` 當前置詞為字串時，已針對自動遞增發票ID移除。 因此，商業發票現在會針對以字串為前置詞的數字顯示0。 [GitHub-34451](https://github.com/magento/magento2/issues/34451)

### 記錄

<!-- MC-42360-->

* Magento Open Source不再為在中執行大量動作的失敗API呼叫建立記錄專案 **系統** > **大量動作**. 之前，失敗的API呼叫的永久專案會新增至大量動作記錄檔。

<!-- AC-1607-->

* 不再允許從false值自動建立陣列。 [GitHub-34499](https://github.com/magento/magento2/issues/34499)， [GitHub-34589](https://github.com/magento/magento2/issues/34589)

### Adobe Commerce編碼標準

<!-- magento/magento-coding-standard/pull/219-->

* 已更新 `phpunit/ phpunit` 至的最新版本 `magento-coding-standard` 存放庫。 [GitHub-33622](https://github.com/magento/magento2/issues/33622)

<!-- magento/magento2/pull/33858-->

* 已更新 `webonyx/graphql-php` 與Adobe Commerce編碼標準存放庫中的^14.9版相依性。 [GitHub-32863](https://github.com/magento/magento2/issues/32863)

<!-- magento/magento-coding-standard/pull/322-->

* 已新增嗅探 `Magento2.PHP.ArrayAutovivification` 至Adobe Commerce編碼標準，以識別從false值自動建立陣列的方式。 [GitHub-34509](https://github.com/magento/magento2/issues/34509)

<!-- magento/magento-coding-standard/pull/325-->

* 已新增嗅探 `Magento2.Functions.DeprecatedFunction` Adobe Commerce編碼標準。 [GitHub-34547](https://github.com/magento/magento2/issues/34547)

<!-- magento/magento-coding-standard/pull/326-->

* 新增過時的函式以探查 `Magento2.Functions.DiscouragedFunction` 在Adobe Commerce編碼標準中。 [GitHub-34548](https://github.com/magento/magento2/issues/34548)

<!-- magento/magento-coding-standard/pull/335-->

* 此 `Magento2.Annotation.MethodAnnotationStructure` 偵測不再因誤判而失敗。 [GitHub-34679](https://github.com/magento/magento2/issues/34679)

### 媒體集

<!-- AC-1054-->

* 此 `bin/magento media-gallery:sync` 在啟用AWS S3的部署中，命令不再失敗。

<!-- AC-1000-->

* 現在當功能表專案超過11個，而且 **啟用舊媒體集** 已啟用組態設定。 [GitHub-33889](https://github.com/magento/magento2/issues/33889)

<!-- MC-42837-->

* 編輯含有許多影像的產品時，媒體收藏館索引標籤的載入時間已改善。 [GitHub-33434](https://github.com/magento/magento2/issues/33434)

### MFTF

<!-- AC-516-->

* `CURLOPT_POSTFIELDS` 不再接受物件做為陣列。 若要將物件解譯為陣列，請執行`array`)演員陣容。 此作法也適用於接受陣列的其他選項。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

* `curl_init()` 現在會傳回 `CurlHandle` 物件而非資源。 此 `curl_close()` 函式不再有作用。 取而代之的是 `CurlHandle` 如果不再參考執行個體，則會自動銷毀。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

<!-- AC-1397-->

* 修正可下載產品的MFTF測試錯誤。 [GitHub-34270](https://github.com/magento/magento2/issues/34270)

<!-- magento/magento2/pull/33530-->

* 已移除 `CliCacheFlushActionGroup` 從 `CatalogSearch`， `GroupedProduct`， `Newsletter`， `Paypal`， `Quote`、和 `Review` 模組。 [GitHub-33531](https://github.com/magento/magento2/issues/33531)

<!-- AC-515-->

* 現在，將數字轉換為字串並比較字串，即可進行數字與非數字字串之間的非嚴格比較。 數字與數值字串之間的比較仍如往常般運作。 這表示0==「非數字」現在視為false。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-517-->

* `parse_url()` 現在會區分不存在和空白的查詢和片段。 [GitHub-33782](https://github.com/magento/magento2/issues/33782)

<!-- magento/magento2-functional-testing-framework/pull/873-->

* 更新程式碼基底，以避免使用時發生嚴重錯誤 `ReflectionType::isBuiltin()` 方法。 [GitHub-34194](https://github.com/magento/magento2/issues/34194)

#### 新動作群組

`AdminCheckOrderStatusInGridActionGroup` [GitHub-33747](https://github.com/magento/magento2/issues/33747)

`StorefrontSelectFirstShippingMethodActionGroup` [GitHub-33773](https://github.com/magento/magento2/issues/33773)

`AdminClickUpdateChangesOnCreateOrderPageActionGroup` [GitHub-33689](https://github.com/magento/magento2/issues/33689)

#### 動作群組

下列測試中的重複式動作已取代為動作群組：

`AdminAddInStockProductToTheCartTest` [GitHub-34512](https://github.com/magento/magento2/issues/34512)

`AdminAddBundleItemsTest` [GitHub-34312](https://github.com/magento/magento2/issues/34312)

`AdminConfigurableProductAddConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductBulkUpdateTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminConfigurableProductDisableAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductOutOfStockAndDeleteCombinationTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductOutOfStockTestDeleteChildrenTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductRemoveAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductRemoveConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminCreateAndEditSimpleProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateAndEditVirtualProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateInactiveFlatCategoryTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminCreateInactiveInMenuFlatCategoryTest` [GitHub-34510](https://github.com/magento/magento2/issues/34510)

`AdminCreateDuplicateCategoryTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminCreateDuplicateProductTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminDeleteSimpleProductTest` [GitHub-33783](https://github.com/magento/magento2/issues/33783)

`AdminEditRelatedBundleProductTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminMassDeleteBundleProductsTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminNavigateMultipleUpSellProductsTest` [GitHub-34314](https://github.com/magento/magento2/issues/34314)

`AdminSimpleProductSetEditContentTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminSimpleProductTypeSwitchingToConfigurableProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminConfigurableProductTypeSwitchingToVirtualProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminCreateConfigurableProductWithDisabledChildrenProductsTest` [GitHub-33775](https://github.com/magento/magento2/issues/33775)

`AdminUpdateFlatCategoryAndAddProductsTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminUpdateTopCategoryUrlWithNoRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`AdminUpdateTopCategoryUrlWithRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`CatalogProductListWidgetOperatorsTest`  [GitHub-34579](https://github.com/magento/magento2/issues/34579)

`CreateProductAttributeEntityWithReservedKeysTest`[GitHub-34422](https://github.com/magento/magento2/issues/34422)

`EnableDisableBundleProductStatusTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`StorefrontCheckRefundGrandTotalActionGroup` [GitHub-34315](https://github.com/magento/magento2/issues/34315)

`StorefrontInactiveCatalogRuleTest` [GitHub-33556](https://github.com/magento/magento2/issues/33556)

`StorefrontConfigurableProductCantAddToCartTest` [GitHub-33786](https://github.com/magento/magento2/issues/33786)

`StorefrontConfigurableProductOptionsTest` [GitHub-33785](https://github.com/magento/magento2/issues/33785)

`StorefrontConfigurableProductCanAddToCartTest` [GitHub-33784](https://github.com/magento/magento2/issues/33784)

`StorefrontConfigurableProductGridViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontConfigurableProductListViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontProductNameWithHTMLEntitiesTest` [GitHub-33806](https://github.com/magento/magento2/issues/33806)

`StorefrontProductNameWithDoubleQuoteTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

#### 新測試

`AdminCreateOrderWithCheckedAppendCommentCheckboxTest` [GitHub-32381](https://github.com/magento/magento2/issues/32381)

`CheckoutWithEnabledCaptchaTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

`StorefrontAddProductWithBackordersAllowedOnProductLevelToCartTest` [GitHub-33635](https://github.com/magento/magento2/issues/33635)

`StorefrontGiftMessageForOrderOnCheckoutCartPageTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCaptchaCheckoutWithEnabledCaptchaTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCheckoutWithEnabledMinimumOrderAmountOptionTest` [GitHub-33460](https://github.com/magento/magento2/issues/33460)

#### 重構測試

`CaptchaWithDisabledGuestCheckoutTest` [GitHub-30828](https://github.com/magento/magento2/issues/30828)

### 電子報

<!-- ACP2E-147-->

* 具有適當許可權的使用者現在可以依預期管理客戶電子報訂閱。 以前，只有具有完整許可權的管理員才能在管理員客戶帳戶頁面上管理客戶電子報訂閱。

### 訂購

<!-- MC-41981-->

* 購物者現在可以成功重新訂購包含產品的現有訂單，並搭配店面和管理員中型別檔案和型別下拉式清單的自訂選項。 之前，applicationOpen Source擲回錯誤，且未處理重新排序。

<!-- MC-42332-->

* 管理員訂單詳細資訊頁面現在會如預期載入。 先前，當載入含特定稅捐的訂單的訂單詳細資訊頁面時，applicationOpen Source會擲回下列錯誤： `Call to a member function getId() on array`.

<!-- MC-38521-->

* 具有包括訂單和送貨許可權的受限制許可權的管理員現在可以按預期檢視訂單頁面。 先前，當具有這些許可權的管理員嘗試檢視訂單時，applicationOpen Source會擲回錯誤。 [GitHub-14633](https://github.com/magento/magento2/issues/14633)

<!-- ACP2E-74-->

* 當設定最大允許數量限制時，購物者現在可以下訂單包含子項可設定產品。

## 付款方法

<!-- AC-1830-->

* 購物者現在可以使用Braintree，在啟用3DS的部署中使用帳單地址下訂單，而無需設定地區。 先前，購物者點按時，結帳會凍結 **下訂單**，且無法完成購買。 [GitHub-34204](https://github.com/magento/magento2/issues/34204)

<!-- AC-1229-->

* 現在支援Venmo付款選項。

<!-- AC-1228-->

* PayPal現在可以透過BN程式碼追蹤。

<!-- AC-493-->

* `bin/magento setup:upgrade` 從Magento Open Source2.4.2-p1升級時，現在會如預期般執行。 之前，applicationOpen Source擲回此錯誤： `Unable to apply data patch Magento\Paypal\Setup\Patch\Data\UpdateBmltoPayLater for module Magento_Paypal`. [GitHub-33678](https://github.com/magento/magento2/issues/33678)

<!-- MC-42830-->

* 現在，管理員下單期間，可使用正確的商店ID來擷取儲存的信用卡。 現在，儲存的信用卡會根據網站範圍組態設定在訂單下單時顯示。 先前，當管理員嘗試從管理員建立客戶的訂單並選取「儲存的信用卡」方法時，儲存的卡沒有可用的選項。

<!-- AC-344-->

* 已解決禮品卡金額的PayPal信用卡顯示異常。 先前，啟用PayPal信用卡並設定多個禮品卡金額時，如果購物者變更禮品卡金額值，店面不會更新分期付款的金額。 這是Magento Open Source2.4.3中的已知問題。

### PayPal

<!-- MC-42154-->

* 使用PayPal Express付款方式結帳時，Magento Open Source不再顯示錯誤。 之前，雖然結帳程式已完成，但應用程式Open Source會顯示此錯誤： `Something went wrong`.

<!-- AC-722-->

* PayPal Express現在可從購物車正常運作。 先前，當您按一下 **PayPal** 按鈕以從購物車開始快速結帳，應用程式Open Source擲回此錯誤：  `To check out, please sign in with your email address`. [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42279-->

* PayPal Payflow Pro現在會在部署中使用正確的上層交易ID執行延遲擷取，其中PayPal Payflow Pro閘道具有 **付款動作** 設為 **Authorization**. A **銷售** 交易會傳送至Payflow，並包含簽出時建立的儲存庫權杖的父交易ID。 先前， **延遲擷取**  已建立交易並傳送至PayPal Payflow。 [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42442-->

* 透過PayPal付款完成進階付款後，購物者現在會如預期重新導向至成功頁面。 以前，即使成功處理付款且未記錄任何錯誤，購物者也不會重新導向至此頁面。

### 效能

<!-- MC-42158-->

* 模組清單載入執行時間已改善。

<!-- AC-932-->

* 熱門搜尋字詞快取的效能已改善。 之前，值越大 `search_query` 表格，完成搜尋查詢所花的時間。 [GitHub-27559](https://github.com/magento/magento2/issues/27559)

<!-- MC-42892-->

* 依預設，Magento Open Source會在產品儲存期間同步調整影像大小。 商戶現在可以透過對進行微幅編輯將影像大小調整為背景非同步程式 `di.xml` 檔案。

<!-- ENGCOM-9168-->

* 在多存放區部署中，已改善類別產品索引器的效能。 [GitHub-33984](https://github.com/magento/magento2/issues/33984)

<!-- AC-1179-->

* 新的記憶體內快取記憶體 `glob()` 系統呼叫可減少系統呼叫的數量，進而提升效能 `glob()` 呼叫。  [GitHub-34025](https://github.com/magento/magento2/issues/34025)

<!-- ACP2E-63-->

* 已改善非同步順序格線重新索引程式的效能。

<!-- ACP2E-117-->

* 產品匯出期間的記憶體耗用量已最佳化。

### 定價

<!-- MC-42243-->

* 當產品價格接近或等於零，且啟用共用目錄時，價格排序現在會如預期般運作。 以前，在價格重新索引時，零級價格會被忽略。

### 產品警報

<!-- MC-41917-->

* 新 `product_alert` consumer透過建立佇列訊息、執行使用者並改善執行時間，來改善客戶警報的傳送。 先前，當傳送超過100,000個產品警示時，applicationOpen Source會擲回記憶體不足例外狀況。 應用程式Open Source也花了20多個小時來傳送所有警示。

<!-- ACP2E-87-->

* 如果「類別」頁面上的價格篩選不含第二個值，則Magento Open Source不再擲回錯誤。 之前，applicationOpen Source在記錄檔中擲回例外狀況。

### 產品影片

<!-- MC-42105-->

* Magento Open Source現在會啟用 **儲存** 當您在新增影片時輸入不完整的URL時，按鈕和自動完成欄位（管理員） **目錄**  > **產品** > **新增視訊**)。 先前， **儲存** 按鈕已停用，且欄位未填入。

### 評論

* 產品清單檢視現在會顯示產品的正確開始評分。 [GitHub-30196](https://github.com/magento/magento2/issues/30196)

<!-- ACP2E-89-->

* 當購物者點按時，檢閱現在會如預期般顯示 **檢閱** 在店面產品頁面上。

<!-- ACP2E-111-->

* 現在，店面產品清單頁面上的格線和清單檢視中的產品星級是一致的。 過去，相同產品在格線和清單檢視模式中可能有不同的評等。

### 銷售

<!-- MC-42025-->

* 升級至MariaDB 10.2.34後，已改善具有大型資料集的表格在非同步模式下更新銷售網格的效能。

<!-- MC-42531-->

* Magento Open Source現在會如預期從店面移除HTML標籤 **帳戶** > **我的訂單** > **檢視訂單** 頁面。 之前，applicationOpen Source會在店面客戶訂單評論區段中顯示HTML標籤。

<!-- MC-42377-->

* 驗證索引存在的自動化測試涵蓋範圍 `sales_shipment_grid.order_id` 已新增。

<!-- MC-43163-->

* `POST V1/orders` 呼叫現在會更新擴充功能屬性，而不會發生錯誤。 以前發生SQL語法錯誤。

### 搜尋 {#search-heading}

<!-- MC-42799-->

* 價格範圍的分層導覽選項現在與自訂價格屬性可如預期運作。 在篩選自訂價格屬性時，「開放原始碼」應用程式會使用價格瀏覽步驟的設定。 之前，applicationOpen Source使用手動步驟設定。

<!-- MC-42545-->

* 店面現在會在分層導覽中顯示目前類別的所有子類別，無論目錄中可用的類別數量為何。

<!-- MC-41706-->

* Elasticsearch目錄搜尋現在不區分變音符號。 以前，搜尋沒有重音的詞語所產生的結果與搜尋相同辭彙的重音結果不同。

<!-- ACP2E-8-->

* 現在已正確設定包含特殊字元的SKU屬性上的搜尋權數。

<!-- ACP2E-36-->

* `category_name` 已新增至系統保留的產品屬性代碼。 如果使用者嘗試使用屬性代碼建立產品屬性，應用程式Open Source現在會顯示錯誤 `category_name`. 以前，產品未列在預期的類別中，並記錄了Elasticsearch錯誤。

<!-- ACP2E-68-->

* 每次GraphQL搜尋查詢後，熱門搜尋字詞現在都會更新。

<!-- ACP2E-249-->

* Magento Open Source現在會將正確的價格欄位新增至Elasticsearch價格指數對應。 以往，系統會使用商店ID而非網站ID將不正確的價格欄位新增至索引。

### 送貨

<!-- MC-42758-->

* 出貨電子郵件現在僅包含目前出貨的追蹤編號。 以前，當訂單包含數個出貨時，每個出貨的電子郵件都會包含與訂單相關之所有出貨的追蹤編號。

<!-- MC-42396-->

* 現在，當購物者在多送貨模式中從購物車中刪除產品，然後切換到單一送貨地址時，Magento Open Source會成功更新迷你購物車。 以前，產品價格未按預期更新。

<!-- AC-267-->

* 使用S3儲存配接卡時，現在匯入表格速率可如預期運作。 之前，applicationOpen Source會顯示此錯誤： `File "https://[bucket].s3.eu-central-1.amazonaws.com/[prefix]/tmp/phpLjGmHf" not found`. [GitHub-33072](https://github.com/magento/magento2/issues/33072)

<!-- magento/magento2/pull/33232-->

* 您現在可以按預期停用出貨更新電子郵件，從 **商店**  > **設定**  >  **銷售**  >  **銷售電子郵件**. [GitHub-33165](https://github.com/magento/magento2/issues/33165)

<!-- ACP2E-31-->

* Magento Open Source現在會在「管理員」和「店面」發票頁的總數上顯示免運費(0)。 先前，當訂單的出貨量為零時，應用模組「開放原始碼」不會在商業發票頁面的出貨總計中顯示出貨金額。

<!-- ACP2E-120-->

* 對線上出貨承運人的費率要求已從數個要求減少至一個。 現在可以正確計算每個專案/套件的套件保險與處理價格。 之前，applicationOpen Source對FedEx送貨方法顯示不正確的送貨費率。

<!-- ACP2E-174-->

* Magento Open Source現在在建立從波多黎各出貨的運送標籤時顯示UPS費率。 之前，applicationOpen Source不會顯示這些UPS速率。

<!-- ACP2E-227-->

* 從輸入方塊中移除後，出貨街道地址現在會如預期完全清除。 先前，刪除地址後，文字方塊會保留一或多個字元。

### 儲存

<!-- MC-42884-->

* 「以客戶身分登入」功能現在可在不同URL上包含多個存放區的部署中正常運作。 以前，即使存取正確的存放區網域，applicationOpen Source也不會載入正確的存放區。

### 稅金

<!-- MC-41924-->

* 當客戶選擇送貨至多個地址後刪除料號時，Magento Open Source現在可以正確計算迷你購物車小計。

<!-- MC-41945-->

* 當購物車僅包含虛擬產品時，Magento Open Source現在會在所有結帳頁面上顯示相同的稅率。

<!-- AC-714-->

* 可設定產品層級價格現在會在店面顯示準確的包含與排除稅捐值。 過去，包含的稅捐與排除的稅捐會顯示相同的值。 [GitHub-33673](https://github.com/magento/magento2/issues/33673)

### 測試

<!-- magento/magento2/pull/34798-->

* WebAPI測試現在與PHP 8.1相容。 [GitHub-34653](https://github.com/magento/magento2/issues/34653)

<!-- magento/magento2/pull/34820-->

* 整合測試現在相容於PHP 8.1。 [GitHub-34567](https://github.com/magento/magento2/issues/34567)， [GitHub-34569](https://github.com/magento/magento2/issues/34569)

<!-- AC-1225-->

* 商戶現在可以測試購物者所在國家/地區的購物者體驗，而不是商戶的位置。

* 功能測試已針對PHP 8.x相容性穩定。 [GitHub-34327](https://github.com/magento/magento2/issues/34327)， [GitHub-34188](https://github.com/magento/magento2/issues/34188)

<!-- magento/magento2/pull/34198-->

* 修正WebAPI測試中的功能問題。 [GitHub-34196](https://github.com/magento/magento2/issues/34196)

<!-- AC-1207-->

* 修正導致靜態測試誤判的錯誤。 [GitHub-34056](https://github.com/magento/magento2/issues/34056)

<!-- magento/magento2/pull/34300-->

* 已更新的測試涵蓋範圍 `call_user_func_array`. [GitHub-34301](https://github.com/magento/magento2/issues/34301)

<!-- AC-1978-->

* 此 `Magento\GraphQl\CatalogGraphQl\ProductSearchTest` 使用AWSElasticsearch執行時，測試不再擲回此錯誤： `Magento\GraphQl\CatalogGraphQl\ProductSearchTest::testSearchSuggestions Failed asserting that an array is not empty. /var/www/html/dev/tests/api-functional/testsuite/Magento/GraphQl/CatalogGraphQl/ProductSearchTest.php:94 /var/www/html/dev/tests/api-functional/framework/Magento/TestFramework/TestCase/GraphQlAbstract.php:257`.

<!-- magento/magento2/pull/33699-->

* 已藉由重新命名所有模擬變數以包含 `Mock` 尾碼和移除已棄用Object Manager類別的參考。 [GitHub-33695](https://github.com/magento/magento2/issues/33695)

* 此 `Magento\Framework\MessageQueue\TopologyTest` 測試現在與的AWS MQ相容 [!DNL RabbitMQ] 服務。 之前，此測試失敗並出現以下訊息： `Invalid exchange configuration: magento-topic-based-exchange1 Failed asserting that two arrays are equal`. <!-- AC-1248-->

<!-- magento/magento2/pull/34454-->

* 單元測試現在與PHP 8.1相容。 [GitHub-34441](https://github.com/magento/magento2/issues/34441)

#### 單元測試

下列單元測試已重構為使用 `PHPUnit` 而非 `AspectMock`：

`AllureHelperTest` [GitHub-33294](https://github.com/magento/magento2/issues/33294)

`ObjectHandlerUtil` [GitHub-33584](https://github.com/magento/magento2/issues/33584)

`MockModuleResolverBuilder` [GitHub-33583](https://github.com/magento/magento2/issues/33583)

`MagentoTestCase`  [GitHub-33582](https://github.com/magento/magento2/issues/33582)

`ModuleResolverTest` [GitHub-33308](https://github.com/magento/magento2/issues/33308)

`ParallelGroupSorterTest` [GitHub-33306](https://github.com/magento/magento2/issues/33306)

`SuiteGeneratorTest` [GitHub-33299](https://github.com/magento/magento2/issues/33299)

`OperationDataArrayResolverTest`  [GitHub-33296](https://github.com/magento/magento2/issues/33296)

### 主題

<!-- MC-41887-->

* 當Magento Open Source的基本URL中已設定子路徑時，通知訊息現在可以正確顯示。

<!-- MC-42469-->

* 已新增 `aria-label` 元素至storefront頁面範本，以指出當購物者按一下連結時將會導覽至的頁面。 過去，相同的連結文字會用於不同頁面的連結。 [GitHub-33075](https://github.com/magento/magento2/issues/33075)

<!-- ACP2E-73-->

* 載入具有預先存在的自訂主題的存放區首頁時，Magento Open Source不再顯示錯誤訊息。 之前，applicationOpen Source會顯示以下訊息：  `The store will not work correctly in the case when cookies are disabled`.

### 翻譯與地區設定

<!-- AC-285-->

* 此 `UserExpiration` 驗證器不再失敗 `de_DE` 和 `uk_UA` 地區設定。 先前，當管理員嘗試從管理員建立新使用者，並將語言環境設定為時，applicationOpen Source會擲回錯誤 `de_DE` 或 `uk_UA`. [GitHub-32497](https://github.com/magento/magento2/issues/32497)

<!-- magento/magento2/pull/33787-->

* 在建立或編輯地址表單時，瑞士地區名稱現在會一致地以英文顯示。 [GitHub-32602](https://github.com/magento/magento2/issues/32602)

<!-- magento/magento2/pull/33128-->

* 已更新 `zip_codes.xml` 格恩西島的模式，以支援薩克島的GY10郵遞區號。 [GitHub-33144](https://github.com/magento/magento2/issues/33144)

<!-- AC-1080-->

* 將白俄羅斯地區新增至 `directory_country_region` 表格。 [GitHub-33924](https://github.com/magento/magento2/issues/33924)

<!-- AC-1178-->

* 顯示執行菲律賓（菲律賓）地區設定的店面異常已解決。 [GitHub-33996](https://github.com/magento/magento2/issues/33996)

<!-- AC-1308-->

* 在設定為葡萄牙文（葡萄牙）地區設定的商店中建立新帳戶時，您現在可以成功輸入客戶出生日期。 之前，當您嘗試建立帳戶時，Magento Open Source會擲回錯誤。 [GitHub-34130](https://github.com/magento/magento2/issues/34130)

<!-- ACP2E-457-->

* 產品詳細資料頁面現在以阿拉伯文（沙烏地阿拉伯）地區設定成功顯示。 之前，此地區設定會破壞產品詳細資料頁面。

### UI

<!-- AC-258-->

* 已更正使用之MFTF測試的錯誤 `maps.googleapis.com`.

<!-- MC-41850-->

* Magento Open Source現在會修剪「聯絡我們」表單電子郵件輸入欄位中的不斷行空格字元。 以前，提交表單時沒有從電子郵件輸入中移除不間斷的空格字元（如果給定），這會造成記錄檔案中的錯誤。 此 **回覆** 產生的連絡人電子郵件訊息中亦缺少欄位給商店管理員。

<!-- MC-42793-->

* Magento Open Source現在會根據相關產品、向上銷售產品和交叉銷售產品在管理員中的位置，顯示這些產品。

<!-- MC-42502-->

* `.action-close` 按鈕現在可在以下情況下如預期運作： `Multiselect` 用於強制回應視窗中。 先前， `action-close` 按鈕無法運作，因為它繼承了  `.action-close` 強制回應視窗按鈕。 [GitHub-27240](https://github.com/magento/magento2/issues/27240)

<!-- AC-1217-->

* 產品檢視的主要價格欄位現在顯示選件豐富的程式碼片段。 之前，在產品檢視的相關產品區塊中，此欄位缺少此程式碼片段，導致Google搜尋結果顯示不正確的價格。 [GitHub-34063](https://github.com/magento/magento2/issues/34063)

<!-- AC-1584-->

* 執行iOS之裝置上的強制回應視窗高度問題已解決。 [GitHub-34467](https://github.com/magento/magento2/issues/34467)

<!-- MC-40106-->

* 「動作」下拉式功能表現在在整個店面中正確定位。 [GitHub-31379](https://github.com/magento/magento2/issues/31379)

<!-- AC-1589-->

* 已解決在購物車和結帳頁面上導覽的協助工具錯誤。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* 熒幕助讀程式現在可以讀取產品頁面上的所有相關表單元素。

<!-- AC-872-->

* 店面目錄產品Widget排序順序(**目錄** > **類別** > **產品**)現在符合管理員中設定的順序。 [GitHub-27126](https://github.com/magento/magento2/issues/27126)

<!-- AC-725-->

* 區域選擇器現在在建立帳戶頁面上按預期運作。 [GitHub-30099](https://github.com/magento/magento2/issues/30099)

<!-- MC-42750-->

* Admin客戶格線現在顯示所有客戶資料，包括新新增的資料 `date` 自訂屬性（如預期）。 先前，applicationOpen Source擲回錯誤，且在 `date` 屬性集已設定為欄。

<!-- AC-1280-->

* 在上輸入標籤 **目錄**  >  **產品** 詳細資訊頁面已變更，以準確反映輸入的目的。 不需要使用者輸入的欄位不再顯示帶有星號的標籤。

<!-- AC-1275-->

* 現在可以使用Tab鍵存取RTF編輯器工具列。

<!-- AC-1284-->

* 控制項的可存取名稱現在包含其可見標籤的文字，以顯示每頁專案數的下拉式清單。

<!-- AC-1287-->

* 表格控制於 **目錄** > **產品** 現在，當表格摺疊時，「詳細資訊」頁面具有可見的標籤和可存取的名稱。

<!-- AC-1285-->

* 店面各處的按鈕現在都有唯一的、描述性的可存取名稱。 先前，分割按鈕與文字按鈕和相鄰的下箭頭圖示按鈕具有相同的可存取名稱。

<!-- AC-1168-->

* 已新增 **今天** 「管理訂單」與「金額」儀表板圖表的檢視選項，以提供一天的銷售與訂單彙總。 [GitHub-34008](https://github.com/magento/magento2/issues/34008)

<!-- AC-1481-->

* 多重選取的啟動（按一下）狀態 **關閉** 按鈕現在會一致運作。 [GitHub-34338](https://github.com/magento/magento2/issues/34338)

<!-- magento/magento2/pull/31879-->

* Cookie限制模式停用時，升級後Magento Open Source不再顯示此訊息： `The store will not work correctly in the case when cookies are disabled`. [GitHub-33811](https://github.com/magento/magento2/issues/33811)

<!-- ACP2E-7-->

* 全熒幕產品影像現在可正確顯示在行動裝置上具有垂直縮圖導覽方向的主題上。 先前，全熒幕模式中行動裝置上垂直縮圖導覽方向的主題無法正確縮放或隱藏產品影像。

<!-- ACP2E-23-->

* 產品詳細資料頁面中的錯誤訊息不再會在以下情況下快速消失： **將Widget產品與後端儲存裝置同步** 已啟用組態設定。

<!-- ACP2E-70-->

* 負值的驗證已新增至 **要退貨的數量** 「建立新回訪」表單上的欄位。

<!-- ACP2E-105-->

* 購物者點按時，Magento Open Source不再顯示重複的地址 **變更地址** 在部署中的「複查與付款」頁面上， **地址搜尋** 已啟用組態設定。

<!-- ACP2E-136-->

* 此 **新增產品** 在「管理員類別」頁面上的存放區檢視範圍內工作時，具有受限制許可權的管理員現在可按預期啟用按鈕。

<!-- ACP2E-169-->

* 現在，各Magento Open Source的檢視中斷點是一致的。

<!-- ACP2E-199-->

* Magento Open Source現在會在「管理客戶」頁面上正確顯示自訂客戶日期屬性與自訂地區設定。

<!-- MC-41760-->

* 以瀏覽器視窗寬度768px顯示時，使用「頁面產生器」新增的影像不再在店面中重複。 以往，使用此瀏覽器視窗寬度時，應用程式Open Source會同時顯示行動版和案頭版的影像，以複製店面的影像。

### URL重寫

<!-- AC-1510-->

* 在執行建立新存放區檢視期間，不再為所有存放區檢視重新產生URL重寫 `bin/magento setup:upgrade`. [GitHub-32954](https://github.com/magento/magento2/issues/32954)

### Web API框架

<!-- MC-42008-->

* 啟用永久購物車時，自行授權客戶資源的Web API請求不再擲回授權錯誤。

<!-- MC-42313-->

* 您現在可以使用以下的子類別來建立物件： `\Magento\Framework\Api\AbstractSimpleObjectBuilder` 在PHP 7.3上。先前， `preg_match` 當Magento Open Source在具有PHP 7.3的Redhat上託管時拋出此警告訊息： `Warning: preg_match(): Compilation failed: unrecognized character follows...`.

<!-- MC-24548-->

* 由以下專案擷取的總計： `PUT /V1/guest-carts/:cartId/collect-totals` 要求現在由正確的更新 `shippingMethod`. [GitHub-18508](https://github.com/magento/magento2/issues/18508)

<!-- MC-30627 AC-796-->

* 將新的還原序列化程式新增至REST API時，不再移除其他還原序列化程式。 之前，REST API接受新的內容型別，但API的核心定義內容型別不再運作，並傳回400錯誤。 [GitHub-26433](https://github.com/magento/magento2/issues/26433)

<!-- AC-698-->

* 您現在可以移除中定義之引數的覆寫 `webapi.xml`檔案。 [GitHub-33843](https://github.com/magento/magento2/issues/33843)

<!-- AC-1212-->

* Magento Open Source現在會產生 `customertoken` 在多次連續失敗的登入嘗試後，依預期執行GraphQL或REST API要求。 之前，applicationOpen Source不會檢查的 `lock_expires_at` 在 `oauth_token_request_log` 大於目前的日期和時間，且一律會傳回失敗嘗試次數，這會阻止客戶登入。 [GitHub-34067](https://github.com/magento/magento2/issues/34067)

<!-- AC-1190-->

* 新增遮罩的報價識別碼至 `QuoteRepository::getList` 不再造成無限回圈。 以前，使用依賴REST API的付款處理程式來更新訂單會觸發此行為。 [GitHub-33675](https://github.com/magento/magento2/issues/33675)

<!-- MC-41612-->

* 此 `/rest/all/V1/categories/<above_created_category_id>`  PUT呼叫現在遵循以下專案指定的值： `available_sort_by`.  先前，已選取「可用產品清單排序依據」下拉式清單，其中包含「類別」頁面上的所有可能選項，以及 **使用全部** 核取方塊已選取。 [GitHub-32596](https://github.com/magento/magento2/issues/32596)

<!-- ACP2E-11-->

* 建立客戶Token的REST API要求效能已有所改善。

<!-- ACP2E-91-->

* 修正下列情況下發生的錯誤： **將存放區代碼新增至Url** 設為 **是** 和REST呼叫不包含商店代碼。 雖然裝載有效，但呼叫傳回下列錯誤： `Fatal error: Allowed memory size of ********** bytes exhausted (tried to allocate **** bytes) in vendor/magento/module-store/Model/StoreRepository.php on line 75`.

<!-- ACP2E-153-->

* 現在可使用REST API同時建立相同訂單的部分商業發票。

### 希望清單

<!-- MC-41880-->

* 當Magento Open Source符合以下條件時，類別側邊欄中就不會再呈現願望清單 **在側欄中顯示** 希望清單選項已停用。 之前，applicationOpen Source會忽略此選項。

### 所見即所得

<!-- ACP2E-17-->

* PageBuilder現在可以使用WYSIWYG編輯器正確轉譯自訂Widget。

## 已知問題

**問題**：在從Adobe Commerce 2.4.4升級至Adobe Commerce 2.4.4-p1期間，商家可能會發現套件版本降級通知。 可以忽略這些訊息。 套件版本中的差異是由於產生套件期間出現異常所導致。 沒有產品功能受到影響。 請參閱 [從2.4.4升級至2.4.4-p1後，套件已降級](https://support.magento.com/hc/en-us/articles/8214752983949)  知識庫文章，用於討論受影響的案例和因應措施。

**問題**：在「管理員」中未選取任何選項時，購物者無法將產品新增至購物車 **儲存** >  **設定** > **一般** > **國家/地區選項** > **允許國家/地區**. 應用程式Open Source改為顯示下列主控台錯誤： `Failed to load resource: the server responded with a status of 400 (Bad Request)`. <!-- AC-2564-->

**問題**： Dotdigital on的說明 **尋找合作夥伴和擴充功能** > **Magento Marketplace** 已過時。 以下是更新的說明：

Dotdigital是客戶參與平台，可協助數位行銷人員和開發人員在客戶歷程中提供溝通。 隨著品牌的成長與擴展，我們利用客戶資料的力量，促進品牌互動、轉換和忠誠度。 客戶喜歡我們易用的平台，此平台可連線各系統中的第一方資料、呈現強大的深入分析並自動化預測性跨管道訊息。

Dotdigital的350多名員工服務全球各行各業的中端市場與企業公司。 我們渴望激發負責任的行銷活動，並致力於可持續性、隱私權和安全性。 Dotdigital自豪地成為世界第一個碳中和行銷自動化平台，通過ISO 14001、ISO 27701和ISO 27001的認證。

另請參閱 [Dotdigital — 行銷自動化](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html) 以取得購買和下載資訊。

## 社群貢獻

我們感謝更廣泛的Magento Open Source社群，並感謝他們為此版本所做的貢獻。

社群工程團隊 [Magento貢獻者](https://magento.com/magento-contributors) 維護按月、季和年排列的優秀貢獻個人和合作夥伴清單。 在「貢獻者」頁面中，您可以透過連結前往GitHub上合併的PR。

### 合作夥伴協助撰寫

下表重點說明合作夥伴所做的貢獻。 此表格列出提出提取請求的合作夥伴、外部提取請求編號，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-4-partner.md}}

### 個人貢獻者

下表列出我們社群成員的貢獻。 此表格列出提出提取請求的社群成員、外部提取請求編號，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-4-issues.md}}

### 系統需求

我們的技術棧疊是以PHP和MySQL為基礎所建置。 如需詳細資訊，請參閱 [系統需求](../../../installation/system-requirements.md).

### 安裝和升級指示

您可以使用以下專案安裝Magento Open Source2.4.4： [Composer](../../../installation/composer.md).

## 移轉工具套件

資料移轉工具可協助將現有Magento1.x存放區資料傳輸至Magento2.x。此命令列介麵包含驗證、進度追蹤、記錄和測試功能。 如需安裝指示，請參閱 [安裝資料移轉工具](../../../tools/data-migration-tool/install.md). 考慮探索或貢獻 [資料移轉存放庫](https://github.com/magento/data-migration-tool).

此 [程式碼移轉工具組](https://github.com/magento-commerce/code-migration) 協助將現有Magento1.x存放區擴充功能和自訂內容轉移至Magento2.x。命令列介麵包含轉換Magento1.x模組和版面的指令碼。
