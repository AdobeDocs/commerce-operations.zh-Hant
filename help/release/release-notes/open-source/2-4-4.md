---
title: Magento Open Source 2.4.4發行說明
description: 瞭解2.4.4 Magento Open Source版本中的新功能、增強功能、錯誤修正和已知問題。
recommendations: noCatalog
exl-id: 877e2517-3487-4f54-9e08-a0b67e0de057
source-git-commit: 2e62c49dd0c338f0913ce5f725f396c2cfa95122
workflow-type: tm+mt
source-wordcount: '10568'
ht-degree: 0%

---

# Magento Open Source 2.4.4發行說明

Magento Open Source 2.4.4推出對PHP 8.1的支援。已更新所有專案程式庫和相依性，以與PHP 8.1相容。核心撰寫器相依性和協力廠商程式庫也已升級至與PHP 8.1相容的最新版本。此版本也支援OpenSearch 1.2。

此版本包含近250項品質修正和增強功能。

>[!NOTE]
>
>感謝我們的合作夥伴[Atwix](https://www.atwix.com/)為使2.4.4架構相容於PHP 8.1所作出的重大貢獻。

{{bics}}

## 套用AC-3022.patch以繼續提供DHL作為運送業者

DHL已匯入schema 6.2版，並將在不久的未來淘汰schema 6.0版。 支援DHL整合的Adobe Commerce 2.4.4及舊版僅支援6.0版。部署這些版本的商戶應儘早套用`AC-3022.patch`，以繼續提供DHL作為運送承運商。 請參閱[套用修補程式，以繼續提供DHL作為運送業者](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier)知識庫文章，以取得有關下載和安裝修補程式的資訊。

## 其他發行資訊

雖然這些功能的程式碼已與Magento Open Source核心程式碼的每季發行捆綁在一起，但其中數個專案也獨立發行。 這些專案的錯誤修正記錄在每個專案檔案中提供的個別專案特定發行資訊中。

>[!NOTE]
>
>除Braintree外，所有廠商隨附的擴充功能均已從Magento Open Source 2.4.4中移除。

>[!NOTE]
>
>Composer 2.2引進了安全性功能，要求商家在執行外掛程式之前，先識別其`composer.json`檔案中受信任的外掛程式。 目前，會自動安裝`composer.json`檔案中包含但未標示為受信任的外掛程式。 不過，自2022年7月起，Composer將不會載入外掛程式，除非明確允許它們。 請參閱Adobe Commerce 2.4.4[知識庫文章中的](https://support.magento.com/hc/en-us/articles/6215997614093-Composer-plugins-issues-when-upgrading-to-Adobe-Commerce-2-4-4)Composer外掛程式問題，瞭解如何修改`composer.json`檔案以明確允許外掛程式載入的說明。

### 此版本中包含的Hotfix

Magento Open Source 2.4.4包含針對Adobe Commerce和Magento Open Source 2.4.3、2.4.3-p1及2.3.7-p2提供的下列Hotfix解決的所有問題：

* `MDVA-43395_EE_2.4.3-p1_COMPOSER_v1.patch`和`MDVA-43443_EE_2.4.3-p1_COMPOSER_v1.patch`所處理的漏洞已在此版本中解決。

* `AC-384_Fix_Incompatible_PHP_Method__2.4.3_ce.patch`。 此修補程式可解決升級期間發生的嚴重PHP錯誤。 請參閱[Adobe Commerce升級2.4.3、2.3.7-p1 PHP嚴重錯誤Hotfix](https://support.magento.com/hc/en-us/articles/4408021533069-Adobe-Commerce-upgrade-2-4-3-2-3-7-p1-PHP-Fatal-error-Hotfix)知識庫文章。

## Magento Open Source 2.4.4重要功能

請檢視此版本中的下列重點專案。

### 安全性增強功能

此版本包含一項安全性修正和平台安全性改善。 此安全性修正已反向移植至Magento Open Source 2.4.3-p2和Magento Open Source 2.3.7-p3。

目前尚未發生與這些問題相關的已確認攻擊。 但是，某些漏洞可能會被用來存取客戶資訊或接管管理員工作階段。 這些問題大多需要攻擊者先取得Admin的存取權。 因此，我們提醒您採取一切必要步驟來保護您的管理員，包括但不限於這些工作：

* IP允許清單
* [雙因素驗證](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)
* 使用VPN
* 使用唯一位置而非`/admin`
* 良好的密碼衛生

如需這些已修正問題的最新討論，請參閱[Adobe安全性公告](https://helpx.adobe.com/tw/security/products/magento/apsb22-13.html)。

#### 其他安全性增強功能

此版本的安全性改善專案可改善對最新安全性最佳實務的合規性，包括：

* 在2.3.4中，已棄用電子郵件變數，這是安全性風險降低的一部分，以支援更嚴格的變數語法。 此舊版行為已完全移除，作為該安全性風險緩解措施的延續。

  因此，在舊版Magento Open Source中有效的電子郵件或電子報範本在升級至Adobe Commerce 2.4.4或Magento Open Source 2.4.4後可能無法正常運作。受影響的範本包括自訂模組或第三方擴充功能的管理員覆寫、主題、子主題和範本。 即使使用[Upgrade相容性工具](https://experienceleague.adobe.com/docs/commerce-operations/upgrade-guide/upgrade-compatibility-tool/overview.html?lang=zh-Hant)修正已棄用的使用方式，您的部署仍可能受到影響。 請參閱[移轉自訂電子郵件範本](https://developer.adobe.com/commerce/frontend-core/guide/templates/email-migration/)，以取得移轉受影響範本的潛在影響和准則相關資訊。

* 整合權杖無法再用於API持有人權杖驗證。 以前，整合權杖可用作權杖型驗證的獨立金鑰。 不過，由於永不過期的存取權杖的安全性影響，此行為已預設停用。 先前的行為可透過命令列或Admin啟用。 請參閱[權杖型驗證](https://developer.adobe.com/commerce/webapi/get-started/authentication/gs-authentication-token/)。<!-- AC-1619 -->

* 工作階段ID不再儲存在資料庫中。<!-- AC-522-->

* OAuth存取權杖和密碼重設權杖現在儲存於資料庫時經過加密。<!-- AC-520 1323-->

* 已加強驗證，以防止上傳非英數字元的副檔名。<!-- AC-479-->

* 新增reCAPTCHA對優惠券代碼的支援。<!-- AC-461-->

* Magento Open Source處於生產模式時，Swagger現在預設為停用。<!-- AC-1450-->

* Magento Open Source店面現已預設啟用HTTPS。 預設會啟用&#x200B;**在店面上使用安全URL**&#x200B;和&#x200B;**在管理員設定中使用安全URL**，而且所有內建的Cookie現在都已設定為安全。 <!-- AC-1173-->

* 所有Magento Open Source安裝現在都需要相依性混淆外掛程式。 之前，只有Composer型安裝需要此外掛程式。 現在允許信任的版本。 商家可以略過此外掛程式中設定的限制，這些限制會禁止某些組合的Composer安裝。 對於受信任的版本，可略過這些限制，Magento Open Source現在會在繼續安裝之前顯示警告。 <!-- AC-501 970-->

* 開發人員現在可以根據每個端點，設定Magento Open Source RESTful端點接受的陣列大小限制。 檢視[API安全性](https://developer.adobe.com/commerce/webapi/get-started/api-security/)。<!-- AC-465-->

* 新增機制來限制使用者可在系統範圍內透過Web API要求的大小和資源數量，以及覆寫個別模組的預設值。 如此可解決`MC-43048__set_rate_limits__2.4.3.patch`所解決的問題。 檢視[API安全性](https://developer.adobe.com/commerce/webapi/get-started/api-security/)。<!-- AC-1120-->

### 平台增強功能

Magento Open Source 2.4.4現在支援PHP 8.1。已更新所有專案程式庫和相依性，以與PHP 8.1相容。其他平台增強功能包括：

* Magento Open Source 2.4.4支援Elasticsearch 7.16和OpenSearch 1.2。部署於內部部署託管的應用程式Open Source商家可以使用任一解決方案。 不過，OpenSearch現在是雲端託管之Magento Open Source 2.4.4部署的預設搜尋引擎。 所有使用雲端部署的客戶若升級至2.4.4版，都必須使用OpenSearch。 請參閱[在Cloud 2.4.4](https://support.magento.com/hc/en-us/articles/4419942355725-Switching-to-OpenSearch-for-Adobe-Commerce-on-Cloud-2-4-4)上切換至Adobe Commerce的OpenSearch

* `JQuery`程式庫已升級至3.6版。`jquery-ui`程式庫已升級至1.13.0版。已將其他多個JavaScript程式庫更新至最新版本。

* 現在支援TinyMCE 5.8.1。 TinyMCE 4已從程式碼基底中移除。<!-- AC-41-->

* `RequireJS`程式庫已升級至最新版本(v2.3.6)。 [GitHub-33672](https://github.com/magento/magento2/issues/33672) <!-- AC-40 422-->

* PHPUnit已升級至最新版本(9.5.x)。 已更新測試和測試架構，以與新版本相容。<!-- AC-404-->

* 大部分Laminas相依性已升級至與PHP 8.1相容的最新版本。已從程式碼基底移除三個Laminas相依性，以減少相依性的數量。

#### jQuery UI升級

jQuery UI已升級至最新版本(v1.13.0)。 下列v1.10.0 jQuery元件已移除：

* 索引標籤的`ajaxOptions`和`cache`選項。 檢視[標籤](https://jqueryui.com/changelog/1.10.0/#tabs)。

* `.zIndex()`。 jQuery UI v1.12.1包含`jquery/z-index.js`，其支援使用`.zIndex()`。 請參閱[UI核心](https://jqueryui.com/changelog/1.12.0/#ui-core)。

* Widget名稱的資料遞補。 您必須使用`.data()`金鑰的全名。

* Widget中類別（例如`ui-corner-all`）的硬式編碼。

### GraphQL

此版本包含這些GraphQL增強功能：

* **效能改善**：

   * GraphQL購物車操作的效能已改善。 `collectQuoteTotals()`方法現在只在GraphQL要求期間呼叫一次，以減少回應時間。<!-- PWA-2110-->

   * 變更GraphQL請求的快取方式，已改善店面效能。 Fastly和Varnish現在會快取隨`auth`權杖傳送的GraphQL要求。<!-- PWA-1817-->

* **新店面相關管理組態設定**。 `storeConfig`查詢現在會傳回「零小計結帳」與「支票/匯票」付款方式的組態設定。<!-- PWA-1576-->

* **已更新核心GraphQL資料庫**。 可讓核心GraphQL運作的`webonyx`程式庫已升級至^14.9版。<!-- PWA-2137 2184 -->

* **已修正GraphQL中多網站和多語言存放區的翻譯問題**。 GraphQL解析器現在會依預期根據存放區範圍傳回翻譯字串。<!-- PWA-1946-->

* GraphQL現在為New Relic提供描述性交易名稱，有助於除錯。 [GitHub-30915](https://github.com/magento/magento2/issues/30915) <!-- PWA-1311-->

如需這些增強功能的詳細資訊，請參閱[GraphQL開發人員指南](https://developer.adobe.com/commerce/webapi/graphql/)。

### 廠商套件擴充功能

除了[Braintree](https://experienceleague.adobe.com/zh-hant/docs/commerce-admin/stores-sales/payments/braintree)之外，所有廠商隨附的擴充功能都已從Magento Open Source 2.4.4程式碼基底中移除。 商戶應移轉至可在[Commerce Marketplace](https://marketplace.magento.com/extensions.html)上取得的正式副檔名。

[Amazon Pay](https://experienceleague.adobe.com/zh-hant/docs/commerce-admin/stores-sales/payments/payments)

[dotdigital](https://experienceleague.adobe.com/zh-hant/docs/commerce-admin/systems/introduction#variables-and-customer-communications)

[Klarna](https://experienceleague.adobe.com/zh-hant/docs/commerce-admin/stores-sales/payments/payments)

[頂點](https://experienceleague.adobe.com/zh-hant/docs/commerce-admin/stores-sales/site-store/taxes/taxes)

[YotPo](https://experienceleague.adobe.com/zh-hant/docs/commerce-admin/marketing/merchandising/product-reviews/product-reviews)

### PayPal付款增強功能

* 現在支援Venmo付款選項。 <!-- AC-1229-->

* 「先買後付」已新增為購物者的選項，依據購物者地點而非商家地點而定。

* 商戶現在可以在他們選擇的國家/地區測試購物者體驗時，設定購物者國家/地區。 之前，測試僅限於針對商家所在國家/地區的測試。 此變更僅在沙箱模式中有效。

* 結帳頁面上的訊息現在會顯示準確的訊息，說明使用「稍後付款」時，購物者預計要支付多少及增量金額。

### 協助工具更新

此版本增強了對標準無障礙指引的合規性。 其中包括改良的工具提示、可存取的熒幕元素命名和標籤，以及重新設計的圖示和按鈕。 這些修正中有80%以上有助於改善視力缺佳或視力缺佳使用者的購物體驗。

### 頁面產生器

商戶現在可以將替代文字(`alt_text`)新增至影像（影像、橫幅、幻燈片），以提升內容可存取性。 [GitHub-746](https://github.com/magento/magento2-page-builder/issues/746) <!-- PB-1193-->

## 已修正的問題

我們正在修正Magento Open Source 2.4.4核心程式碼中的數百個問題。 這些已修正問題的子集說明如下。

### 安裝、升級、部署

<!-- MC-42026-->

* Magento Open Source現在會如預期在組建記錄檔中記錄靜態內容部署錯誤。

<!-- MC-43094-->

* 資料修正程式無法再忽略表格的唯一限制，並將重複值插入MySQL資料庫表格。 以前，修補程式可能會插入重複的值，這會損壞資料庫。

<!-- AC-1480-->

* 商戶現在可以成功從具有Klarna的Magento Open Source 2.4.2部署升級至Magento Open Source 2.4.3。[GitHub-33760](https://github.com/magento/magento2/issues/33760)

<!-- ACP2E-77-->

* 現在可以從命令列成功變更Sitemap產生器設定。 先前，當您嘗試在管理員以外變更Sitemap設定時，applicationOpen Source會顯示此錯誤： `Import failed: Notice: Trying to access array offset on value of type null in app/code/Magento/Cron/Model/Config/Backend/Sitemap.php on line 78`。  [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- ACP2E-215-->

* 當您更新`bin/magento app:config:import`中的`time`值時，`config.php`命令現在會無錯誤地執行。 之前，以手動編輯（即不使用管理員）變更產品警報設定會導致錯誤。

### 協助工具

<!-- AC-1589-->

* 已解決在購物車和結帳頁面上導覽的協助工具錯誤。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* 熒幕助讀程式現在可以讀取產品頁面上的所有相關表單元素。

<!-- AC-1277-->

* 整個店面的影像刪除和移動圖示按鈕的對比已得到改善，以改善弱視使用者的可讀性。

<!-- AC-1272-->

* 用來在整個產品介面中執行搜尋的放大鏡圖示，已被指派可存取的名稱和替代文字。

<!-- AC-1275-->

* 現在可以使用Tab鍵存取RTF編輯器工具列。

<!-- AC-1283-->

* **此專案在**&#x200B;目錄&#x200B;**>**&#x200B;產品&#x200B;**詳細資料頁面上有重量**&#x200B;選取輸入，現在有可見的標籤和可存取的名稱。

<!-- AC-1284-->

* 控制項的存取許可權名稱現在包含其可見標籤的文字，以顯示每頁下拉式清單的專案數。

<!-- AC-1287-->

* 當資料表摺疊時，**目錄** > **產品**&#x200B;詳細資訊頁面上的資料表控制項現在具有可見的標籤和可存取的名稱。

<!-- AC-1288-->

* 「產品」表格中的「編輯連結」現在會有獨特、有意義的連結文字。

<!-- AC-1276-->

* 展開工具提示的觸發器現在會提供文字名稱。

<!-- AC-1285-->

* 店面各處的按鈕現在都有唯一、描述性的可存取名稱。 先前，分割按鈕與文字按鈕和相鄰的向下箭頭圖示按鈕具有相同的可存取名稱。

<!-- AC-1277-->

* 整個店面的影像刪除和移動圖示按鈕的對比已得到改善，以改善弱視使用者的可讀性。

<!-- AC-1279-->

* 當商家編輯「搜尋引擎最佳化」摺疊式功能表的輸入專案時，鉛筆圖示就會顯示，已在圖示中新增替代文字。

<!-- AC-1272-->

* 用來在整個產品介面中執行搜尋的放大鏡圖示，已被指派可存取的名稱和替代文字。

<!-- AC-1286-->

* 產品頁面&#x200B;**新檢視**&#x200B;文字輸入欄位現在具有可存取的名稱。

<!-- AC-1283-->

* **此專案在**&#x200B;目錄&#x200B;**>**&#x200B;產品&#x200B;**詳細資料頁面上有重量**&#x200B;選取輸入，現在有可見的標籤和可存取的名稱。

### 後端

<!-- MC-43161-->

* 管理員現在可以在已設定自訂管理員路徑且已啟用機密金鑰的部署中登入管理員。 之前，applicationOpen Source會顯示此錯誤： `Invalid security or form key. Please refresh the page`。

<!-- MC-41949-->

* 多存放區階層變更時，Magento Open Source不再重新導向至所有存放區檢視範圍。 先前，儲存階層後，購物者會重新導向至不正確的商店URL，而系統會在多商店部署中選取「所有商店檢視」範圍。

### 套裝產品

<!-- MC-42885-->

* 購物者現在可以新增捆綁產品（含固定產品稅和兩個選項）至購物車。 之前，applicationOpen Source未新增產品並顯示此錯誤： `We can't add this item to your shopping cart right now`。

<!-- MC-42249-->

* `data-validate`和`min`屬性形式的表單驗證已新增到購物車數量欄位，以防止套件組合產品的負值。

<!-- MC-41794-->

* 現在，當子產品在存放區檢視層級上停用時，`products`查詢會正確篩選套件組合產品。 以前，查詢會傳回在商店檢視層級停用的子產品。

<!-- MC-42811-->

* `cron`現在會在`indexer_update_all_views`執行期間如預期般清除產品類別快取。 先前，在類別中大量更新許多產品後，applicationOpen Source在類別頁面上顯示不正確的產品計數。

<!-- MC-42811-->

* 當套件組合產品重新上架時，Magento Open Source現在會依預期更新類別產品快取。

<!-- AC-715-->

* 現在，使用不同貨幣的多商店部署中，針對套件產品購買進行的電子郵件確認會如預期般進行貨幣轉換。 [GitHub-33426](https://github.com/magento/magento2/issues/33426)

<!-- ACP2E-64-->

* 現在，對於在產品格中帶有%首碼的套件組合產品，進階定價特殊價格折扣可正確顯示。 以前，產品格線中以$前置詞格式顯示的%折扣不正確，而非%。

<!-- ACP2E-262-->

* 現在，當相關產品變更其狀態時，管理員中的套件組合產品狀態會自動更新。

<!-- ACP2E-326-->

* 套件組合產品的GraphQL解析器現在會檢查是否已停用子套件組合產品。 以前，不會進行這項檢查，而且類似`categoryList`的查詢會傳回無法銷售的子產品。

<!-- MC-43223-->

* `cart`個查詢回應現在會針對具有動態價格的套件組合產品傳回精確折扣。 以前，查詢回應包括個別套用至每個套件產品的折扣。

### 快取

<!-- MC-42811-->

* 已最佳化重新索引期間執行的快取清除演演算法。 重新索引期間快取類別時，現在套件產品會如預期般顯示。 先前，在重新索引期間快取產品類別後，套件產品不會顯示數小時。

<!-- AC-328-->

* 在一般使用情況下，頁面快取不再快速成長。 [GitHub-9458](https://github.com/magento/magento2/issues/9458)

<!-- magento/magento2/pull/33468-->

* 下訂單不會再導致從Varnish快取中移除與訂購產品相關的所有快取標籤。 [GitHub-30128](https://github.com/magento/magento2/issues/30128)

<!-- AC-1478-->

* 當您從最熱門的類別更新產品，或執行索引以更新產品屬性或庫存狀態時，不會再清除全網站頁面快取。 之前，清漆快取會將最上層的選單類別ID新增至所有頁面快取標籤。 [GitHub-33465](https://github.com/magento/magento2/issues/33465)

### 購物車與結帳

<!-- MC-41494-->

* 最低廣告價格&#x200B;**這是什麼？購物車頁面上的**&#x200B;連結現在可供點按，並如預期開啟資訊快顯視窗。 之前，按一下此連結沒有任何效果。

<!-- MC-42639-->

* 在啟用永久購物車的部署中，購物者現在可以在工作階段逾時後下訂單，而不會發生錯誤。 之前，applicationOpen Source會在工作階段逾時後顯示付款錯誤。

<!-- MC-42638-->

* 將高排序順序值指派給客戶地址屬性不會再導致結帳頁面上的效能降低。

<!-- MC-42813-->

* 如果更新數量無效，Magento Open Source現在會將購物車產品數量回覆為先前的值。

<!-- MC-42347-->

* 按一下「最近檢視」區段中的「**新增至購物車**」按鈕，現在會如預期重新導向至產品詳細資料頁面。 之前，購物者會重新導向至產品清單頁面。

<!-- MC-33705-->

* 訪客購物者現在可以使用包含數種自訂客戶地址屬性的客戶地址成功結帳。 以前，在簽出期間顯示自訂屬性的值時，其值格式不正確。 [GitHub-30290](https://github.com/magento/magento2/issues/30290)

<!-- MC-24379-->

* 現在起，啟用表格費率時，Magento Open Source可正確將免運費臨界值套用至訂單。 [GitHub-21832](https://github.com/magento/magento2/issues/21832)

<!-- AC-271-->

* 您現在可以使用`POST /V1/guest-carts/:cartId/items`將具有不同選項的簡單產品加入購物車。 之前，這個呼叫會變更您新增的第一個簡單產品的數量，而非新增第二個具有指定選項的簡單產品。 [GitHub-32302](https://github.com/magento/magento2/issues/32302)

<!-- AC-1089-->

* 當部署設定為`Poland`國家/地區和`PLN`貨幣時，結帳頁面的「訂單摘要」區段現在會顯示正確的貨幣和金額。 以前，購物車和結帳頁面顯示的金額為&#x200B;**PLN 0**。

<!-- MC-32805-->

* 在變更迷你購物車中的產品數量後，當購物者按一下&#x200B;**更新購物車**&#x200B;時，Magento Open Source不再擲回錯誤。 之前，applicationOpen Source會顯示此錯誤： `The quote item isn't found. Verify the item and try again`。

<!-- MC-43176-->

* 針對特定商店中可設定產品的GraphQL `products`查詢現在只會傳回指定商店上的產品價格範圍。 之前，請求會傳回非指定商店中簡單產品的價格範圍。

<!-- AC-691-->

* 當購物者新增的帳單地址缺少街道欄位時，Magento Open Source不再擲回此錯誤： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`。 [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- AC-1625-->

* 在已移除迷你購物車的商店中結帳時，Magento Open Source不再擲回主控台錯誤。 [GitHub-34513](https://github.com/magento/magento2/issues/34513)

<!-- AC-691-->

* 當帳單地址缺少街道欄位值或街道欄位值不是陣列時，在付款階段結帳不再失敗。 之前，簽出失敗，錯誤為： `Uncaught TypeError: Unable to process binding "text: function(){return currentBillingAddress().street.join(', ') }"`。 [GitHub-33826](https://github.com/magento/magento2/issues/33826)

<!-- ACP2E-10-->

* 當兩個購物車規則套用至符合這些條件的訂單時，Magento Open Source現在會正確計算折扣：一個購物車規則套用優惠券代碼和&#x200B;**整張購物車的固定價格**&#x200B;條件，而第二個購物車價格規則沒有優惠券和&#x200B;**產品價格折扣百分比**&#x200B;條件。 先前，當先前的購物車規則已對某些產品套用折扣時，相關演演算法無法在購物車產品之間適當地按比例分割折扣。

<!-- ACP2E-22-->

* 現在，在優惠券報表網格中可正確計算銷售總計。 以前，銷售總額不包含運費金額。

<!-- ACP2E-44-->

* 當購物者切換送貨方式時，現在會正確計算整張購物車折扣。

<!-- ACP2E-159-->

* 管理員建立順序頁面上&#x200B;**狀態**&#x200B;欄位的下拉式清單現在由所選國家/地區的預先定義值填入。 之前，此欄位是輸入文字欄位，而非下拉式功能表。

<!-- ACP2E-172-->

* 在您使用`addConfigurableProductsToCart`突變在變更商店檢視後直接將可設定產品加入購物車後，Magento Open Source不再擲回錯誤。

<!-- ACP2E-176-->

* 當您使用`addConfigurableProductsToCart`突變將可設定產品的已停用子項新增至購物車時，Magento Open Source不再擲回錯誤。 之前，applicationOpen Source擲回完整性限制違規錯誤。

<!-- ACP2E-157-->

* 如果抵用券的套用順序失敗，抵用券使用值將不再變更。  以前，在購物車中套用優惠券後，一次性自動產生的優惠券會標籤為無效，但未下訂單。

<!-- ACP2E-137-->

* 已將驗證新增至結帳工作流程，以比較客戶的街道地址與預設值。 如果驗證程式識別變更，則會將`customer_address_id`設為`null`以將其視為新的客戶地址。 先前，如果客戶在結帳時儲存地址而未驗證，且同一客戶嘗試在將驗證套用至結帳欄位後使用相同地址下訂單，則應用程式Open Source不接受編輯的地址並擲回例外狀況。

### 購物車價格規則

<!-- MC-42288-->

* 在啟用`auto`選項的情況下儲存相關購物車價格規則之前，現在禁止產生抵用券。 如果您嘗試在未啟用`auto`選項的情況下儲存此規則，應用程式Open Source會顯示此訊息： `Rule is not saved with auto generate option enabled. Please save the rule and try again`。

<!-- MC-42743-->

* 新增確認購物車價格規則折扣正確套用的測試。

<!-- ACP2E-213-->

* 使用具有&#x200B;**之SKU條件的購物車價格規則如果在購物車中找到/找不到專案，且所有條件/任何條件true**，則現在可如預期使用可設定產品。

<!-- ACP2E-225-->

* 現在已為固定價格的套用產品正確套用購物車價格規則。 先前，至少有一個子項產品在規則條件中指定了相同的屬性集時，購物車價格規則不適用於這些產品。

<!-- ACP2E-285-->

* 現在，當Magento Open Source設定為整個購物車&#x200B;**購物車價格規則的**&#x200B;固定金額折扣時，價格為0的產品就可以成功新增到購物車中。 之前，applicationOpen Source會顯示此錯誤： `report.ERROR: Warning: Division by zero in /home/mer33515/public_html/ee24develop/app/code/Magento/SalesRule/Helper/CartFixedDiscount.php on line 85`。

<!-- ACP2E-306-->

* 修正啟用具有固定金額折扣的購物車規則時，`cart`查詢傳回錯誤折扣金額的條件。

### 目錄

<!-- MC-41796-->

* 當產品具有`datetime`屬性時，Magento Open Source不再在產品格線上執行大量屬性更新動作時擲回例外狀況。

<!-- MC-42571-->

* GraphQL查詢現在會根據子產品的可見度篩選設定，傳回可設定產品之子產品的結果。

<!-- MC-41853-->

* 當可設定的產品屬性變更時，Magento Open Source不再修改相關的產品價格。 之前，可設定產品的最低廣告價格(MAP)會覆寫商店前方相關產品的價格。

<!-- MC-41796-->

* 當產品具有`datetime`屬性時，Magento Open Source不再在產品格線上執行大量屬性更新動作時擲回例外狀況。

<!-- MC-42132-->

* 管理員產品格線的下拉式清單/多選屬性值以及篩選器現在會如預期般從管理員設定中衍生。 以前，屬性值衍生自預設商店設定。

<!-- MC-43010-->

* GraphQL類別查詢會如預期傳回階段類別變更的相關資訊。

<!-- AC-711-->

* 在部署中，產品清單現在可在「管理員」中準確呈現，產品會同時指派至父類別及其子類別，但位於每個類別的不同位置。 之前，產品清單演算失敗，錯誤為： `Item (Magento\Catalog\Model\Product\Interceptor) with the same ID "<ID>" already exists`。 [GitHub-33145]&#x200B;(https://github.com/magento/magento2/issues/33145

<!-- AC-1148-->

* 現在可以將具有許多選項（超過150個）的多選屬性指派給新產品。 以前，屬性選項儲存在`catalog_product_entity_varchar`表格中，當您在Admin中重新開啟產品時，並非所有選項都存在。 [GitHub-33486](https://github.com/magento/magento2/issues/33486)

<!-- AC-904-->

* 新增驗證功能，適用於路由器無法具現化從URL收集的動作類別的情況。 應用程式開啟Source現在會顯示標準錯誤訊息。 之前，applicationOpen Source會顯示此錯誤： `PHP Error: Cannot instantiate abstract class Magento\Catalog\Controller\Product\Compare`。

<!-- ACP2E-115-->

* 將許多產品（約10,000）指派到類別不會再導致瀏覽器當機。

<!-- ACP2E-122-->

* 無論是從管理員中儲存還是匯入，影像屬性現在都會一致地儲存在資料庫中。 以前，影像ALT文字值儲存方式不一致。 如果影像存在且標籤設定為null，則資料庫中不會重設標籤值。

<!-- ACP2E-155-->

* 目錄Widget SQL查詢已最佳化。 以前，大型MySQL查詢會減緩頁面載入速度，並導致MySQL中斷。

<!-- ACP2E-165-->

* 價格篩選器現在可以正確用於沒有庫存的可設定產品。 以往，沒有庫存的可設定產品無法顯示在其正確的價格範圍內。

<!-- ACP2E-330-->

* 更新子產品不再移除在部分索引過程中從其父可設定產品繼承的目錄規則折扣。 先前，當我們將可設定產品指派給類別，但沒有指派其關聯的簡單產品，然後使用該類別建立目錄規則時，應用程式Open Source在部分索引過程中移除了指派給簡單產品的目錄規則。

<!-- ACP2E-216-->

* 新增產品選項時，分組和可設定產品的網格檢視清單現在僅包含簡單和虛擬產品。 之前，應用程式包含帶有選項的簡單產品。

### 目錄規則

<!-- MC-41807-->

* 每日更新目錄規則不會再導致效能降低。 先前，部分目錄產品價格索引不會移除舊價格或日期。

<!-- MC-38263-->

* 在部分重新索引期間，Magento Open Source不再移除可設定產品的目錄價格規則。 以前，在可設定的產品重新編制索引時，只會重新編制子產品的索引。

<!-- ACP2E-331-->

* 具有&#x200B;**類別的目錄價格規則不是category_id**&#x200B;條件，現在會套用至不屬於任何類別的產品。

### 可設定的產品

<!-- MC-42188-->

* 可設定的產品選項標簽名稱現在會根據管理員訂單建立期間選取的商店檢視。 之前，applicationOpen Source使用預設商店檢視的標簽名稱。

<!-- MC-42187-->

* 當啟用顯示無庫存產品的全域標幟時，產品清單現在會正確包含無庫存產品的子產品。 先前，如果啟用此旗標時有數個子產品選項缺貨，則產品清單不會包含子產品。

<!-- MC-42340-->

* 您現在可以使用`addConfigurableProductsToCart`突變，在非預設商店檢視中將可設定的產品加入購物車。 以前，當網站ID和商店ID不同時，您無法將可設定的產品新增到購物車。 [GitHub-30948](https://github.com/magento/magento2/issues/30948)

<!-- MC-43051-->

* GraphQL `products`查詢不再傳回有關可設定產品之已停用子產品的資料。

<!-- ACP2E-101-->

* 為可設定產品建立新設定不再覆寫現有設定中的變更。 先前，產生新變數後，現有變數的狀態會以預設狀態`enabled`覆寫。

<!-- ACP2E-175-->

* 當您嘗試將可設定產品的已停用子項新增至購物車時，Magento Open Source不再擲回內部錯誤。

### 客戶

<!-- MC-24204-->

* Magento Open Source現在會在建立訂單時，考量管理員地區設定的網站範圍。 以前，訂單詳細資料（例如客戶地址屬性）只有在多網站部署中，才能在一個網站上正常運作。 [GitHub-23254](https://github.com/magento/magento2/issues/23254)

### 電子郵件

<!-- MC-42592-->

* 當客戶嘗試使用無效的電子郵件帳戶登入時，簽出登入快顯視窗中的電子郵件欄位驗證錯誤現在符合客戶登入頁面上的電子郵件驗證錯誤。

<!-- MC-42764-->

* 當從管理員新增出貨評論且&#x200B;**通知客戶**&#x200B;核取方塊啟動時，Magento Open Source不再在出貨詳細資料電子郵件中包含錯誤訊息。 以前，送貨確認電子郵件包含此訊息： `We're sorry, an error has occurred while generating this content`。

<!-- MC-42486-->

* 電子郵件範本中的地區和國家/地區ID值現在可正確轉換。 先前，當您從管理員電子郵件範本按一下&#x200B;**預覽連結**&#x200B;時，無法正確顯示國家/地區和地區名稱。

<!-- MC-36262-->

* 管理員針對非預設商店檢視傳送的銷售更新電子郵件現在包含正確的訂單狀態標籤。 以前，這些電子郵件總是從預設商店顯示狀態。 [GitHub-29263](https://github.com/magento/magento2/issues/29263)

<!-- AC-721-->

* Magento Open Source現在會依預期在電子郵件中包含`Content-Disposition: inline`標頭。 [GitHub-29258](https://github.com/magento/magento2/issues/29258)

<!-- magento/magento2/pull/32720-->

* 使用Microsoft Outlook和MS Exchange Server的部署中，訂單和出貨通知電子郵件現在可如預期運作。 以前，電子郵件內文是空的，但包含標籤為ATT*的附件。 [GitHub-25076](https://github.com/magento/magento2/issues/25076)

<!-- ACP2E-47-->

* 現在，訂購電子郵件會包含使用購物者地區設定的本地化資料，如預期所示。 以前，使用管理員地區設定來排序電子郵件。

<!-- ACP2E-107-->

* 按一下任何電子郵件範本的預覽，現在會依預期在個別視窗中開啟範本預覽。  之前，applicationOpen Source會從「電子郵件範本」格線並在快顯視窗中同時開啟範本預覽。

<!-- ACP2E-127-->

* 從非預設網站傳送的非同步訂購電子郵件，現在包含適當網站的標誌URL。 以前，這些電子郵件一律包含預設或主要網站的標誌。 (具有`storeCode`值的預設索引鍵已指派給傳遞至`UrlInterface` `getUrl`函式的第二個陣列引數。 此值可區分不同商店/網站的URL，並針對傳送給客戶的電子郵件內容產生正確的`baseUrl`。)

### 框架

<!-- AC-515-->

* 現在，將數字轉換為字串並比較字串，即可進行數字與非數字字串之間的非嚴格比較。 數字與數值字串之間的比較仍如往常般運作。 這表示`0 == "not-a-number"`現在被視為false。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-1338-->

* 協助程式`Magento\Payment\Helper\Data`不再在建構函式中建立新版面。 先前，當此協助程式用於自訂命令而未指定區碼時，Magento Open Source會擲回錯誤。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1068-->

* 已更新`allure-framework/allure-php-api`撰寫器相依性。

<!-- MC-42091-->

* 現在，當bootstrap檔案中發生例外狀況時，Magento Open Source會傳回500回應代碼。 之前，applicationOpen Source傳回200 OK狀態代碼。 [GitHub-22196](https://github.com/magento/magento2/issues/22196)

<!-- AC-1318-->

* 貨幣符號現在會如預期般載入店面產品詳細資訊頁面上。 以前，重新載入JavaScript頁面後，這個符號有時會消失。

<!-- AC-719-->

* 更新`symfony/console`不再導致執行`bin/magento setup:di:compile`時失敗。 [GitHub-33595](https://github.com/magento/magento2/issues/33595)

<!-- AC-1504-->

* 新的必要選項已新增到隨Magento Open Source散發以支援PHP 8.x的`.htaccess`和`nginx.conf`檔案。 過時的選項也已移除。 [GitHub-34358](https://github.com/magento/magento2/issues/34358)

<!-- MC-42448-->

* 商戶現在可以上傳多個產品的影片。 現在，只有當上傳的檔案名稱包含副檔名時，檔案產生程式才會將副檔名附加至檔案名稱。 先前，當商家嘗試為兩個不同的產品上傳然後儲存相同的視訊時，應用程式Open Source擲回此錯誤： `Notice: Undefined index: extension in /app/7ha7zds7wvqys_stg/vendor/magento/framework/File/Uploader.php on line 699`。 發生此狀況是因為Magento Open Source嘗試將副檔名附加至檔案名稱，不論上傳的檔案名稱是否有副檔名。

<!-- magento/magento2/pull/34106-->

* 已修正`sprintf(__())`和`sprintf(Magento\Framework\Phrase())`建構的問題，以在整個程式碼基底中與PHP 8.x相容。 之前，applicationOpen Source擲回這種型別的錯誤： `Expected parameter of type 'string', 'Magento\Framework\Phrase' provided`。 [GitHub-34085](https://github.com/magento/magento2/issues/34085)

<!-- AC-1605-->

<!-- MC-42934-->

* 改善進階搜尋查詢引數的驗證。 [GitHub-33589](https://github.com/magento/magento2/issues/33589)

<!-- ACP2E-69-->

* 執行`bin/magento support:backup:code`現在會如預期建立備份。 之前，applicationOpen Source已建立備份，但擲回錯誤。

<!-- ACP2E-82-->

* 已成功執行的`cron`個處理程式現在已指派狀態`success`。 之前，相同的`cron`處理序可能會執行兩次，因為成功的`cron`處理序已被指派為`pending`狀態。

<!-- ACP2E-102-->

* `Magento_Logging`模組現在支援IPv6。

### 一般修正

<!-- MC-42506-->

* Magento Open Source現在會在複製產品時，根據欄位定義的範圍複製所有產品欄位。 先前，**名稱**&#x200B;和&#x200B;**描述**&#x200B;欄位已重設為`global`範圍。

<!-- MC-42612-->

* 當產品價格為0時，Magento Open Source不再將差異舍入套用至折扣。 之前，applicationOpen Source計算的是負折扣金額。

<!-- MC-42215-->

* 現在可以成功儲存指派了空白開始日期和到期結束日期且具有&#x200B;**設定為「新**」屬性的產品。 先前，當您使用下列設定儲存產品時，applicationOpen Source擲回此錯誤： `Make sure the To Date is later than or the same as the From Date`。

<!-- MC-42775-->

* 管理員現在可以重試已超過最大處理時間執行的操作。 預設最大值為12小時。

<!-- MC-42514-->

* 由於消費者的未確認訊息，在大量動作處理期間不再發生中斷管道錯誤。 預先擷取計數屬性現在會限制消費者的這些訊息，並避免錯誤。 先前執行`bin/magento queue:consumers:start async.operations.all`會產生此錯誤： `Broken pipe or closed connection`。

<!-- MC-42075-->

* 第二次嘗試登入失敗後，購物者現在會如預期重新導向回登入頁面。 之前，在第二次嘗試登入失敗後，購物者會被重新導向至404頁面。 [GitHub-32885](https://github.com/magento/magento2/issues/32885)

<!-- magento/magento2/pull/25279-->

* 密碼重設權杖的有效性已延長，以避免在提交密碼變更頁面期間發生競爭條件。 [GitHub-29647](https://github.com/magento/magento2/issues/29647)

<!-- AC-1316-->

* 指派給新整合的許可權現在已生效。 [GitHub-33347](https://github.com/magento/magento2/issues/33347)

<!-- AC-1328-->

* 修正了影響「聯絡我們」表單例外記錄中遺留訊息的回歸問題。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- magento/magento2/pull/31654-->

* 解決JavaScript載入客戶資料時的多個問題。 [GitHub-30498](https://github.com/magento/magento2/issues/30498)

<!-- magento/magento2/pull/33324-->

* 在擴充功能中使用`QuoteIdToMaskedQuoteId`不再大幅增加回應時間。 [GitHub-33676](https://github.com/magento/magento2/issues/33676)

<!-- AC-720-->

* `BundleDiscountPrice`中的類別`magento2/app/code/Magento/Bundle/Pricing/Price/ConfiguredPrice.php`現在已宣告為預期。 之前，applicationOpen Source擲回此錯誤： `Class Magento\Bundle\Pricing\Price\BundleDiscountPrice not found`。 [GitHub-33334](https://github.com/magento/magento2/issues/33334)

<!-- AC-1239-->

* AWS S3介面卡寫入的逸出CSV欄位值現在與其他檔案系統介面卡寫入的資料相符。

<!-- MC-43046-->

* 現在支援S3相容儲存裝置。 [GitHub-32114](https://github.com/magento/magento2/issues/32114)

<!-- ACP2E-123-->

* 從一部裝置登出後，購物者不會再從其他裝置自動登出。

### GraphQL

<!-- PWA-1938-->

* `generateCustomerToken`與`revokeCustomerToken`變動現在可提供使用者狀態的正確快取ID。 以前，這些變動使用無效的`x-magento-cache-id`，這會降低效能。

<!-- PWA-1506-->

* `setBillingAddressToCart`突變現在正確使用`same_as_shipping`引數來設定帳單地址，以符合預期的送貨地址。 之前，applicationOpen Source會顯示此錯誤： `The shipping method is missing. Select the shipping method and try again`。 [GitHub-30924](https://github.com/magento/magento2/issues/30924)

<!-- PWA-1980-->

* GraphQL購物車作業現在僅在查詢請求時計算購物車總計。 以前，購物車作業一律會計算總計，這是耗用大量資源的作業。

<!-- MC-42781-->

* `addProductsToCart`突變現在只會將指派給標題中定義之存放區的產品加入購物車。

<!-- MC-42783-->

* 使用分層導覽篩選器的`products`個查詢現在會傳回正確的子類別清單。 [GitHub-33387](https://github.com/magento/magento2/issues/33387)

<!-- MC-42831-->

* 傳回`ConfigurableCartItem`物件的查詢與變動包含設定變體的相關資訊，與預期相符。

<!-- MC-42082-->

* `products`查詢現在會傳回組態產品選項值和變數屬性值。 以前，這些值在查詢回應中為空白。

<!-- MC-41794-->

* 現在，當子產品在存放區檢視層級上停用時，`products`查詢會正確篩選套件組合產品。 以前，查詢會傳回在商店檢視層級停用的子產品。

<!-- MC-42903-->

* 當`setShippingAddressesOnCart`顯示電話&#x200B;**管理員組態設定設為選擇性時，**&#x200B;突變現在支援在購物車上設定具有空白電話號碼值的送貨地址。 之前，applicationOpen Source擲回此錯誤： `Field CartAddressInput.telephone of required type String! was not provided`。

<!-- MC-42970-->

* 已修正`addSimpleProductsToCart`突變允許您新增簡單產品至購物車但未指派給目標網站的問題。

<!-- MC-42600-->

* 已針對使用搜尋引數來縮小搜尋結果的GraphQL `products`查詢最佳化MySQL查詢。

<!-- MC-43189-->

* 如果產品未包含在要求的範圍中，`addConfigurableProductToCart`突變不再支援將產品加入購物車。

<!-- MC-42666-->

* `products`查詢現在只會傳回指派給請求儲存檢閱的可設定變體。 先前，系統會傳回請求之可設定產品的所有變體。

<!-- MC-42652-->

* `addSimpleProductsToCart`個要求現在可以順利平行執行。 先前，對相同SKU的多個請求會為相同的購物車ID建立重複的行專案，而不是如預期增加產品數量。

<!-- AC-856-->

* `addProductsToCompareList`突變現在可用於比較可設定產品的變體。

<!-- MC-42443-->

* 當從後端更新層級產品的價格時，新價格會在客戶的購物車上正確更新。 先前，雖然購物車摘要區段中的小計已正確更新，但列小計並未更新。

<!-- AC-697-->

* `addProductsToCart`突變現在會新增所有選取的選項至購物車（當使用新增具有多個選取選項的組合產品時）。 以前，突變只會加入最後的選取範圍。 [GitHub-33123](https://github.com/magento/magento2/issues/33123)

<!-- MC-38815-->

* 當選擇性電話欄位的值設為空字串時，GraphQL查詢現在會如預期傳回帳單地址。 以前，查詢會傳回null位址值。 [GitHub-30218](https://github.com/magento/magento2/issues/30218)

<!-- ACP2E-51-->

* 當多個產品具有相同的關聯性或價格值時，`products`查詢回應現在會根據指定的排序順序列出產品。

<!-- ACP2E-75-->

* 並行的`addSimpleProductsToCart`與`addProductsToCart`請求不再產生重複的報價專案。

<!-- ACP2E-76-->

* `products`個查詢層級導覽篩選器現在會傳回正確的子類別清單。 當請求中提供`includeDirectChildrenOnly`旗標時，現在僅包含直接子類別。 先前，當產品指派給數個類別時，所有類別都會納入彙總區段的回應中。

<!-- ACP2E-132-->

* 新增GraphQL搜尋查詢的搜尋建議功能。

<!-- ACP2E-288-->

* `OrderAddress.telephone`欄位現在在`customer`查詢或傳回或修改客戶訂單地址的其他查詢與變動中為選用欄位。

<!-- ACP2E-278-->

* 現在，透過API變更群組ID時，可在店面和管理員中，為指定群組中的客戶正確更新價格。 以往，透過API變更群組ID時，無法正確更新這些價格。

### 影像

<!-- MC-42080-->

* 含有透明背景的浮水印影像在其覆蓋的透明產品影像上不再有白色背景。 先前，當浮水印影像和產品影像都有透明背景時，浮水印會顯示為白色背景。

<!-- AC-1240-->

* 啟用AWS S3時，現在會如預期上傳並顯示商業發票與出貨收據的圖志。

<!-- MC-42160-->

* 在部署中，與新增至CMS頁面的影像相關聯的媒體標籤，其管理員設定至與存放區URL不同的網域，現在會如預期包含存放區URL。 以前，媒體標籤包含靜態管理員URL，而不是預期的商店URL。 [GitHub-32930](https://github.com/magento/magento2/issues/32930)

<!-- ACP2E-315-->

* 當您同時在店面載入影像時清除影像快取時，Magento Open Source不再擲回錯誤。

### 匯入/匯出

<!-- AC-1486-->

* 當檔案名稱相似但只有一兩個字元不同時，`bin/magento remote-storage:sync`不再失敗。 先前，第一個影像已正確儲存，但第二個名稱類似的影像觸發同步失敗，而且此錯誤： `Notice: Undefined index: media/catalog/product/5/_ in /src/vendor/magento/module-remote-storage/Driver/Adapter/Cache/Generic.php on line 197`。 [GitHub-34337](https://github.com/magento/magento2/issues/34337)

<!-- MC-41672 23734-->

* Magento Open Source現在會在排程的匯出後，將匯出檔案名稱中的時間戳記轉換為使用者的時區。 以前，這些值不會轉換，因此Magento Open Source會顯示UTC時間戳記。

<!-- MC-42330-->

* 當相同的CSV檔案多次匯入時，Magento Open Source不會再在遠端儲存空間中建立重複的影像。

<!-- AC-1045-->

* 匯入不再失敗，並顯示此訊息： `Import failed: Area code not set: Area code must be set before starting a session`。 [GitHub-16171](https://github.com/magento/magento2/issues/16171)

<!-- AC-988-->

* 您現在可以在執行`bin/magento app:config:dump`並手動編輯`config.php`後成功匯入。 [GitHub-31428](https://github.com/magento/magento2/issues/31428)

<!-- MC-41672-->

* 非預設的多重值分隔符號現在可用於自訂的多重選取屬性。 之前，在匯入期間驗證失敗。 [GitHub-23156](https://github.com/magento/magento2/issues/23156)

<!-- ACP2E-86-->

* 現在，從CSV匯入期間，類別中的產品位置會正確指派。

### 索引

<!-- MC-42791-->

* 重新編制索引後，Magento Open Source現在會在店面如預期顯示產品。 先前，當前500項重新編列索引的產品有庫存，而後500項產品無庫存，店面不會顯示任何其他產品。

<!-- magento/magento2/pull/27212-->

* 已解決合併的`indexer.xml`檔案中的一致性問題。 `classType`中允許的值現在在未合併和合併的`indexer.xml`檔案中是相同的。 [GitHub-29609](https://github.com/magento/magento2/issues/29609)

<!-- AC-190-->

* 已在類別索引器中實施同步化機制，以防止完整和部分索引器並行執行。 先前，當這些索引器同時執行時，店麵類別頁面可能會暫時忽略產品，或者類別頁面可能會暫時清空產品。

### 基礎架構

<!-- AC-1172-->

* 不支援的`str_contains`方法已取代為支援的函式。 這是Magento Open Source 2.4.3的已知問題。[GitHub-33680](https://github.com/magento/magento2/issues/33680)

<!-- magento/partners-magento2ee/pull/573-->

* 已重構程式碼基底，以更正關鍵字`match`的使用，該關鍵字是PHP 8.x中的保留關鍵字。[GitHub-33626](https://github.com/magento/magento2/issues/33626)

* HTML標籤現在已正確巢狀和關閉，以符合JQuery 3.5.x中對包括自訂元素在內的非空白元素的標準。<!-- AC-1942-->

<!-- magento/magento2/pull/34234)-->

* 修正`abs()`和`round()`函式與PHP7.x和PHP8.x的相容性。 [GitHub-34322](https://github.com/magento/magento2/issues/34322)

<!-- AC-719-->

* 更新`symfony/console`時，執行`bin/magento setup:di:compile`時不再失敗。 [GitHub-33595](https://github.com/magento/magento2/issues/33595)

<!-- magento/magento2/pull/34175-->

* 已更正`colinmollenhour/cache-backend-redis` Composer相依性的限制。 [GitHub-34177](https://github.com/magento/magento2/issues/34177)

<!-- magento/magento2/pull/33932 magento/magento2/pull/33992-->

* 已重構程式碼基底，以移除對`phpunit/phpunit`的已棄用方法的呼叫。 [GitHub-33916](https://github.com/magento/magento2/issues/33916)

<!-- MC-42960-->

* 當具有唯讀`pubs/media`的管理員嘗試存取包含影像之產品的產品詳細資料頁面時，Magento Open Source現在會顯示資訊性錯誤。 之前，applicationOpen Source擲回PHP錯誤。 [GitHub-32819](https://github.com/magento/magento2/issues/32819)

<!-- AC-853-->

* 所有成員層級`@api`註解已在整個程式碼基底中移至其類別。

<!-- AC-1977-->

* `gift-card Cms` Widget資料已從`Magento/WidgetSampleData` (Magento Open Source)移至`Magento/GiftCardSampleData` (Adobe Commerce)。 這解決了在PHP8.1上安裝包含範例資料的(Magento Open Source)的問題。

<!-- AC-1001-->

* 視需要使用`@api`標籤整個Adobe Stock整合程式碼基底的介面。 [GitHub-32875](https://github.com/magento/magento2/issues/32875)

<!-- AC-1770-->

* 使用模擬的準備陳述式時，結果集中的整數和浮點數現在會使用原生PHP型別而不是字串傳回。 [GitHub-34625](https://github.com/magento/magento2/issues/34625)

<!-- AC-1697-->

* 已停用從false值自動建立陣列，以確保與PHP 8.1相容。

<!-- AC-1338-->

* 協助程式`Magento\Payment\Helper\Data`不再在建構函式中建立新版面。 先前，當此協助程式用於自訂命令而未指定區碼時，應用程式Open Source會擲回錯誤。 [GitHub-33908](https://github.com/magento/magento2/issues/33908)

<!-- AC-1077-->

* 您現在可以由`data`將`di.xml`引數傳遞至區塊執行個體建構函式。

<!-- MC-43096-->

* 已最佳化`Generator.php`的可讀性。 [GitHub-33809](https://github.com/magento/magento2/issues/33809)

<!-- AC-1313-->

* 改善`JwsManager`類別中的JWK檢查，以處理直接在標頭中設定演演算法的情況。 之前，此檢查會忽略此有效案例。 [GitHub-32636](https://github.com/magento/magento2/issues/32636)

#### JavaScript相依性更新

<!-- magento/magento2/pull/33871-->

* `jquery-validate`協力廠商程式庫[GitHub-33853](https://github.com/magento/magento2/issues/33853)

<!-- ENGCOM-8667-->

* `Less.js` (v3.13.1) [GitHub-32845](https://github.com/magento/magento2/issues/32845)

#### 程式庫移除與淘汰

* 下列程式庫已移除，因為Magento Open Source 2.4.x支援的所有瀏覽器已內建對此功能的支援：

   * `es6-collections.js`   <!-- AC-18-->
   * `MutationObserver.js` <!-- AC-15-->
   * `Modernizr` <!-- AC-12-->
   * `FormData.js`

* 已移除未使用的`jquery.hoverIntent` JavaScript資料庫。 [GitHub-33732](https://github.com/magento/magento2/issues/33732) <!-- AC-97-->

* `lib/internal/Magento/Framework/Filter/Money.php`已棄用。 它包含`money_format()`函式，該函式已在PHP 8.x中移除。[GitHub-33870](https://github.com/magento/magento2/issues/33870)<!-- magento/magento2/pull/34366)-->

* 已移除已棄用、不支援的`grunt-autoprefixer`套件。 [GitHub-34037](https://github.com/magento/magento2/issues/34037) <!-- magento/magento2/pull/34032-->

#### 程式庫升級

* 下列程式庫已升級至較新的版本：

   * `script.aculo.us` <!-- AC-363-->
   * `Chart.js`  <!-- AC-361-->
   * `moment.js` <!-- AC-11-->
   * `moment-timezone-with-data.js`   <!-- AC-10-->
   * `matchMedia.js` <!-- AC-8-->
   * `underscore.js`  <!-- AC-13-->
   * `PrototypeJS`  <!-- AC-17-->
   * `RequireJS`
   * `LessCSS`

### 發票

<!-- AC-1564-->

* 已針對自動遞增的商業發票ID （當前置詞為字串時）移除轉型至`int`。 因此，商業發票現在會針對以字串為前置詞的數字顯示0。 [GitHub-34451](https://github.com/magento/magento2/issues/34451)

### 記錄

<!-- MC-42360-->

* Magento Open Source不再為在&#x200B;**系統** > **大量動作**&#x200B;中執行大量動作的失敗API呼叫建立記錄專案。 之前，失敗的API呼叫的永久專案會新增到大量動作記錄中。

<!-- AC-1607-->

* 不再允許從false值自動建立陣列。 [GitHub-34499](https://github.com/magento/magento2/issues/34499)，[GitHub-34589](https://github.com/magento/magento2/issues/34589)

### Adobe Commerce編碼標準

<!-- magento/magento-coding-standard/pull/219-->

* 已將`phpunit/ phpunit`更新至`magento-coding-standard`存放庫的最新版本。 [GitHub-33622](https://github.com/magento/magento2/issues/33622)

<!-- magento/magento2/pull/33858-->

* 將Adobe Commerce編碼標準存放庫中的`webonyx/graphql-php`相依性更新為^14.9版。 [GitHub-32863](https://github.com/magento/magento2/issues/32863)

<!-- magento/magento-coding-standard/pull/322-->

* 新增嗅探`Magento2.PHP.ArrayAutovivification`至Adobe Commerce編碼標準，以識別從false值自動建立陣列。 [GitHub-34509](https://github.com/magento/magento2/issues/34509)

<!-- magento/magento-coding-standard/pull/325-->

* 新增sniff `Magento2.Functions.DeprecatedFunction`至Adobe Commerce編碼標準。 [GitHub-34547](https://github.com/magento/magento2/issues/34547)

<!-- magento/magento-coding-standard/pull/326-->

* 新增已棄用的函式，以便在Adobe Commerce編碼標準中探查`Magento2.Functions.DiscouragedFunction`。 [GitHub-34548](https://github.com/magento/magento2/issues/34548)

<!-- magento/magento-coding-standard/pull/335-->

* `Magento2.Annotation.MethodAnnotationStructure`探查不再因誤判而失敗。 [GitHub-34679](https://github.com/magento/magento2/issues/34679)

### 媒體集

<!-- AC-1054-->

* 在啟用AWS S3的部署中，`bin/magento media-gallery:sync`命令不再失敗。

<!-- AC-1000-->

* 現在當功能表專案超過11個，且已啟用&#x200B;**啟用舊媒體集**&#x200B;組態設定時，會顯示新增的媒體集內容字幕功能表標題。 [GitHub-33889](https://github.com/magento/magento2/issues/33889)

<!-- MC-42837-->

* 編輯含有許多影像的產品時，「媒體集」索引標籤的載入時間已改善。 [GitHub-33434](https://github.com/magento/magento2/issues/33434)

### MFTF

<!-- AC-516-->

* `CURLOPT_POSTFIELDS`不再接受物件做為陣列。 若要將物件解譯為陣列，請執行明確(`array`)轉換。 此作法也適用於接受陣列的其他選項。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

* `curl_init()`現在會傳回`CurlHandle`物件，而非資源。 `curl_close()`函式不再有效。 反之，如果不再參考`CurlHandle`執行個體，則會自動銷毀。 [GitHub-33781](https://github.com/magento/magento2/issues/33781)

<!-- AC-1397-->

* 修正可下載產品之MFTF測試中的錯誤。 [GitHub-34270](https://github.com/magento/magento2/issues/34270)

<!-- magento/magento2/pull/33530-->

* 已從`CliCacheFlushActionGroup`、`CatalogSearch`、`GroupedProduct`、`Newsletter`、`Paypal`和`Quote`模組移除`Review`。 [GitHub-33531](https://github.com/magento/magento2/issues/33531)

<!-- AC-515-->

* 現在，將數字轉換為字串並比較字串，即可進行數字與非數字字串之間的非嚴格比較。 數字與數值字串之間的比較仍如往常般運作。 這表示0==「非數字」現在視為false。 [GitHub-33780](https://github.com/magento/magento2/issues/33780)

<!-- AC-517-->

* `parse_url()`現在會區分不存在和空白的查詢和片段。 [GitHub-33782](https://github.com/magento/magento2/issues/33782)

<!-- magento/magento2-functional-testing-framework/pull/873-->

* 更新程式碼基底，以避免使用`ReflectionType::isBuiltin()`方法時發生嚴重錯誤。 [GitHub-34194](https://github.com/magento/magento2/issues/34194)

#### 新動作群組

`AdminCheckOrderStatusInGridActionGroup` [GitHub-33747](https://github.com/magento/magento2/issues/33747)

`StorefrontSelectFirstShippingMethodActionGroup` [GitHub-33773](https://github.com/magento/magento2/issues/33773)

`AdminClickUpdateChangesOnCreateOrderPageActionGroup` [GitHub-33689](https://github.com/magento/magento2/issues/33689)

#### 動作群組

下列測試中的重複動作已由動作群組取代：

`AdminAddInStockProductToTheCartTest` [GitHub-34512](https://github.com/magento/magento2/issues/34512)

`AdminAddBundleItemsTest` [GitHub-34312](https://github.com/magento/magento2/issues/34312)

`AdminConfigurableProductAddConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductBulkUpdateTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminConfigurableProductDisableAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductOutOfStockAndDeleteCombinationTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductOutOfStockTestDeleteChildrenTest` [GitHub-34316](https://github.com/magento/magento2/issues/34316)

`AdminConfigurableProductRemoveAnOptionTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminConfigurableProductRemoveConfigurationTest` [GitHub-34511](https://github.com/magento/magento2/issues/34511)

`AdminCreateAndEditSimpleProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateAndEditVirtualProductSettingsTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminCreateInactiveFlatCategoryTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminCreateInactiveInMenuFlatCategoryTest` [GitHub-34510](https://github.com/magento/magento2/issues/34510)

`AdminCreateDuplicateCategoryTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminCreateDuplicateProductTest` [GitHub-34414](https://github.com/magento/magento2/issues/34414)

`AdminDeleteSimpleProductTest` [GitHub-33783](https://github.com/magento/magento2/issues/33783)

`AdminEditRelatedBundleProductTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminMassDeleteBundleProductsTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`AdminNavigateMultipleUpSellProductsTest` [GitHub-34314](https://github.com/magento/magento2/issues/34314)

`AdminSimpleProductSetEditContentTest` [GitHub-34435](https://github.com/magento/magento2/issues/34435)

`AdminSimpleProductTypeSwitchingToConfigurableProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminConfigurableProductTypeSwitchingToVirtualProductTest` [GitHub-33788](https://github.com/magento/magento2/issues/33788)

`AdminCreateConfigurableProductWithDisabledChildrenProductsTest` [GitHub-33775](https://github.com/magento/magento2/issues/33775)

`AdminUpdateFlatCategoryAndAddProductsTest` [GitHub-34490](https://github.com/magento/magento2/issues/34490)

`AdminUpdateTopCategoryUrlWithNoRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`AdminUpdateTopCategoryUrlWithRedirectTest` [GitHub-33774](https://github.com/magento/magento2/issues/33774)

`CatalogProductListWidgetOperatorsTest` [GitHub-34579](https://github.com/magento/magento2/issues/34579)

`CreateProductAttributeEntityWithReservedKeysTest`[GitHub-34422](https://github.com/magento/magento2/issues/34422)

`EnableDisableBundleProductStatusTest` [GitHub-34313](https://github.com/magento/magento2/issues/34313)

`StorefrontCheckRefundGrandTotalActionGroup` [GitHub-34315](https://github.com/magento/magento2/issues/34315)

`StorefrontInactiveCatalogRuleTest` [GitHub-33556](https://github.com/magento/magento2/issues/33556)

`StorefrontConfigurableProductCantAddToCartTest` [GitHub-33786](https://github.com/magento/magento2/issues/33786)

`StorefrontConfigurableProductOptionsTest` [GitHub-33785](https://github.com/magento/magento2/issues/33785)

`StorefrontConfigurableProductCanAddToCartTest` [GitHub-33784](https://github.com/magento/magento2/issues/33784)

`StorefrontConfigurableProductGridViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontConfigurableProductListViewTest` [GitHub-34311](https://github.com/magento/magento2/issues/34311)

`StorefrontProductNameWithHTMLEntitiesTest` [GitHub-33806](https://github.com/magento/magento2/issues/33806)

`StorefrontProductNameWithDoubleQuoteTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

#### 新測試

`AdminCreateOrderWithCheckedAppendCommentCheckboxTest` [GitHub-32381](https://github.com/magento/magento2/issues/32381)

`CheckoutWithEnabledCaptchaTest` [GitHub-32991](https://github.com/magento/magento2/issues/32991)

`StorefrontAddProductWithBackordersAllowedOnProductLevelToCartTest` [GitHub-33635](https://github.com/magento/magento2/issues/33635)

`StorefrontGiftMessageForOrderOnCheckoutCartPageTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCaptchaCheckoutWithEnabledCaptchaTest` [GitHub-32821](https://github.com/magento/magento2/issues/32821)

`StorefrontCheckoutWithEnabledMinimumOrderAmountOptionTest` [GitHub-33460](https://github.com/magento/magento2/issues/33460)

#### 重構測試

`CaptchaWithDisabledGuestCheckoutTest` [GitHub-30828](https://github.com/magento/magento2/issues/30828)

### 電子報

<!-- ACP2E-147-->

* 具有適當許可權的使用者現在可以依預期管理客戶電子報訂閱。 以前，只有具有完整許可權的管理員才能在管理客戶帳戶頁面上管理客戶電子報訂閱。

### 訂購

<!-- MC-41981-->

* 購物者現在可以成功重新訂購包含產品的現有訂單，並包含店面和管理員中型別檔案和型別下拉式清單的自訂選項組合。 之前，applicationOpen Source擲回錯誤，不會處理重新排序。

<!-- MC-42332-->

* 管理員訂單詳細資訊頁面現在會如預期般載入。 先前，當載入含特定稅捐的訂單的訂單詳細資料頁面時，applicationOpen Source擲回下列錯誤： `Call to a member function getId() on array`。

<!-- MC-38521-->

* 具有包括訂單和送貨許可權的受限制許可權的管理員，現在可以如預期檢視訂單頁面。 之前，當具有這些許可權的管理員嘗試檢視訂單時，applicationOpen Source會擲回錯誤。 [GitHub-14633](https://github.com/magento/magento2/issues/14633)

<!-- ACP2E-74-->

* 當設定最大允許數量限制時，購物者現在可以下單包括子項可設定產品。

## 付款方法

<!-- AC-1830-->

* 購物者現在可以使用Braintree，在啟用3DS的部署中使用計費地址下訂單，而無需設定地區。 先前，當購物者按一下&#x200B;**下訂單**&#x200B;時，結帳會凍結，無法完成購買。 [GitHub-34204](https://github.com/magento/magento2/issues/34204)

<!-- AC-1229-->

* 現在支援Venmo付款選項。

<!-- AC-1228-->

* PayPal現在可以透過BN程式碼追蹤。

<!-- AC-493-->

* 從Magento Open Source 2.4.2-p1升級時，`bin/magento setup:upgrade`現在會如預期般執行。 之前，applicationOpen Source擲回此錯誤： `Unable to apply data patch Magento\Paypal\Setup\Patch\Data\UpdateBmltoPayLater for module Magento_Paypal`。 [GitHub-33678](https://github.com/magento/magento2/issues/33678)

<!-- MC-42830-->

* 現在，在管理員訂購期間，可使用正確的商店ID來擷取已儲存的信用卡。 現在，儲存的信用卡會根據網站範圍組態設定於下訂單時顯示。 先前，當管理員嘗試從管理員建立客戶訂單，並選取預存信用卡方法時，預存卡沒有可用選項。

<!-- AC-344-->

* 已解決禮品卡金額的PayPal信用卡顯示異常。 先前，啟用PayPal信用卡並設定多個禮品卡金額時，如果購物者變更了禮品卡價值的金額，店面不會更新分期付款的金額。 這是Magento Open Source 2.4.3中的已知問題。

### PayPal

<!-- MC-42154-->

* 使用PayPal Express付款方式結帳時，Magento Open Source不再顯示錯誤。 之前，雖然結帳程式已完成，但應用程式Open Source會顯示此錯誤： `Something went wrong`。

<!-- AC-722-->

* PayPal Express現在可從購物車正常運作。 先前，當您按一下&#x200B;**PayPal**&#x200B;按鈕以從購物車開始快速結帳時，應用程式Open Source擲回此錯誤： `To check out, please sign in with your email address`。 [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42279-->

* PayPal Payflow Pro現在會在部署中執行延遲擷取，並將具有&#x200B;**付款動作**&#x200B;的PayPal Payflow Pro閘道設為&#x200B;**授權**，並提供正確的父交易ID。 **Sale**&#x200B;交易會傳送至Payflow，並包含簽出時建立的儲存庫權杖的父交易ID。 先前已建立&#x200B;**延遲擷取**&#x200B;交易並傳送至PayPal Payflow。 [GitHub-33445](https://github.com/magento/magento2/issues/33445)

<!-- MC-42442-->

* 透過PayPal付款進階付款完成付款後，購物者現在會如預期重新導向至成功頁面。 以前，即使成功處理付款且未記錄任何錯誤，購物者也不會重新導向至此頁面。

### 效能

<!-- MC-42158-->

* 模組清單載入執行時間已改善。

<!-- AC-932-->

* 熱門搜尋字詞快取的效能已改善。 先前，`search_query`表格越大，完成搜尋查詢所需的時間就越久。 [GitHub-27559](https://github.com/magento/magento2/issues/27559)

<!-- MC-42892-->

* 依預設，Magento Open Source會在產品儲存期間同步調整影像大小。 商戶現在可以透過對`di.xml`檔案進行微幅編輯，將影像大小調整為背景非同步程式。

<!-- ENGCOM-9168-->

* 在多存放區部署中，已改善類別產品索引器的效能。 [GitHub-33984](https://github.com/magento/magento2/issues/33984)

<!-- AC-1179-->

* `glob()`系統呼叫的新記憶體內部快取會減少`glob()`呼叫數目，進而改善效能。  [GitHub-34025](https://github.com/magento/magento2/issues/34025)

<!-- ACP2E-63-->

* 已改善非同步順序格線重新索引程式的效能。

<!-- ACP2E-117-->

* 產品匯出期間的記憶體耗用量已最佳化。

### 定價

<!-- MC-42243-->

* 現在當產品價格接近或等於零，並且啟用共用目錄時，價格排序會如預期運作。 以前，在價格重新索引時，零級價格會被忽略。

### 產品警報

<!-- MC-41917-->

* 新的`product_alert`取用者可建立佇列訊息、執行取用者，並縮短執行時間，藉此改善客戶警示的傳送。 先前，當傳送超過100,000個產品警示時，applicationOpen Source會擲回記憶體不足例外狀況。 應用程式「開啟Source」也花了20多個小時才能傳送所有警報。

<!-- ACP2E-87-->

* 如果「類別」頁面上的價格篩選器不含第二個值，Magento Open Source就不會再擲回錯誤。 之前，applicationOpen Source在記錄檔中擲回例外狀況。

### 產品影片

<!-- MC-42105-->

* 新增視訊時，當您輸入不完整的URL時，Magento Open Source現在會啟用&#x200B;**儲存**&#x200B;按鈕並自動完成欄位（管理員&#x200B;**目錄** > **產品** > **新增視訊**）。 之前，**儲存**&#x200B;按鈕已停用，而且未填入欄位。

### 評論

* 產品清單檢視現在會顯示產品的正確星級評等。 [GitHub-30196](https://github.com/magento/magento2/issues/30196)

<!-- ACP2E-89-->

* 當購物者按一下店面產品頁面上的&#x200B;**檢閱**&#x200B;時，檢閱現在會如預期顯示。

<!-- ACP2E-111-->

* 現在，店面產品清單頁面上的格線和清單檢視中的產品星級是一致的。 之前，相同的產品在「格線」和「清單」檢視模式中可能有不同的評等。

### 銷售

<!-- MC-42025-->

* 升級至MariaDB 10.2.34後，針對具有大型資料集的表格，改善非同步模式下的銷售網格更新效能。

<!-- MC-42531-->

* Magento Open Source現在會依預期從店面&#x200B;**帳戶** > **我的訂單** > **檢視訂單**&#x200B;頁面移除HTML標籤。 之前，applicationOpen Source在店面客戶訂單評論區段中顯示HTML標籤。

<!-- MC-42377-->

* 已新增自動測試涵蓋範圍，以驗證`sales_shipment_grid.order_id`的索引是否存在。

<!-- MC-43163-->

* `POST V1/orders`個呼叫現在會更新擴充功能屬性，而不會發生錯誤。 之前，您會發生SQL語法錯誤。

### 搜尋 {#search-heading}

<!-- MC-42799-->

* 價格範圍的分層導覽選項，現在可以如預期搭配自訂價格屬性運作。 應用程式開啟Source在篩選自訂價格屬性時，會使用價格導覽步驟的設定。 之前，applicationOpen Source使用手動步驟設定。

<!-- MC-42545-->

* 店面現在會在階層導覽中顯示目前類別的所有子類別，無論目錄中可用的類別數量為何。

<!-- MC-41706-->

* Elasticsearch目錄搜尋現在不區分變音符號。 以前，搜尋沒有重音符號的辭彙時，會產生與搜尋相同辭彙有重音符號時不同的結果。

<!-- ACP2E-8-->

* 搜尋權重現在可以在包含特殊字元的SKU屬性上正確設定。

<!-- ACP2E-36-->

* `category_name`已新增至系統保留的產品屬性代碼。 如果使用者嘗試建立屬性代碼為`category_name`的產品屬性，應用程式「開啟Source」現在會顯示錯誤。 之前，產品未列在預期的類別中，且會記錄Elasticsearch錯誤。

<!-- ACP2E-68-->

* 熱門搜尋辭彙現在會在每個GraphQL搜尋查詢後更新。

<!-- ACP2E-249-->

* Magento Open Source現在將正確的價格欄位新增至Elasticsearch價格指數對應。 之前，不正確的價格欄位是使用商店ID而非網站ID新增至索引。

### 送貨

<!-- MC-42758-->

* 出貨電子郵件現在僅包含目前出貨的追蹤編號。 先前，當訂單包含數個出貨時，每個出貨的電子郵件會包含與訂單相關之所有出貨的追蹤編號。

<!-- MC-42396-->

* Magento Open Source現在會在購物者於多送貨模式從購物車中刪除產品，然後切換至單一送貨地址時，成功更新迷你購物車。 之前，產品價格未如預期更新。

<!-- AC-267-->

* 使用S3儲存配接卡時，現在匯入表格速率可如預期運作。 之前，applicationOpen Source會顯示此錯誤： `File "https://[bucket].s3.eu-central-1.amazonaws.com/[prefix]/tmp/phpLjGmHf" not found`。 [GitHub-33072](https://github.com/magento/magento2/issues/33072)

<!-- magento/magento2/pull/33232-->

* 您現在可以按預期停用&#x200B;**商店** > **組態** > **銷售** > **銷售電子郵件**&#x200B;中的出貨更新電子郵件。 [GitHub-33165](https://github.com/magento/magento2/issues/33165)

<!-- ACP2E-31-->

* Magento Open Source現在會在管理員和店面發票頁面總計上顯示免運費(0)。 先前，當訂單的出貨量為零時，應用程式「開啟Source」不會在商業發票頁面的出貨總計中顯示出貨金額。

<!-- ACP2E-120-->

* 對線上貨運業者的費率要求已從數個要求減少至一個。 現在可以正確計算每個專案/套件的套件保險與處理價格。 之前，applicationOpen Source針對FedEx送貨方法顯示不正確的送貨費率。

<!-- ACP2E-174-->

* 為從波多黎各出貨建立運送標籤時，Magento Open Source現在會顯示UPS費率。 之前，applicationOpen Source不會顯示這些UPS費用。

<!-- ACP2E-227-->

* 從輸入方塊移除後，出貨街道地址現在會如預期完全清除。 以前，刪除地址後，文字方塊會保留一或多個字元。

### 儲存

<!-- MC-42884-->

* 現在，在不同的URL上包含多個存放區的部署中，「以客戶身分登入」功能可如預期運作。 以往，applicationOpen Source不會載入正確的存放區，即使存取正確的存放區網域亦然。

### 稅金

<!-- MC-41924-->

* 現在，當客戶在選取送貨至多個地址後刪除專案，Magento Open Source會正確計算迷你購物車小計。

<!-- MC-41945-->

* 當購物車僅包含虛擬產品時，Magento Open Source現在會在所有結帳頁面上顯示相同的稅率。

<!-- AC-714-->

* 可設定產品之層級價格現在會在店面中顯示精確的包含與排除稅捐值。 過去，包含的稅捐與排除的稅捐會顯示相同的值。 [GitHub-33673](https://github.com/magento/magento2/issues/33673)

### 測試

<!-- magento/magento2/pull/34798-->

* WebAPI測試現在與PHP 8.1相容。[GitHub-34653](https://github.com/magento/magento2/issues/34653)

<!-- magento/magento2/pull/34820-->

* 整合測試現在與PHP 8.1相容。[GitHub-34567](https://github.com/magento/magento2/issues/34567)，[GitHub-34569](https://github.com/magento/magento2/issues/34569)

<!-- AC-1225-->

* 商戶現在可以測試購物者所在國家/地區的購物者體驗，而不是商戶的位置。

* 功能測試已經針對PHP 8.x相容性而穩定。 [GitHub-34327](https://github.com/magento/magento2/issues/34327)，[GitHub-34188](https://github.com/magento/magento2/issues/34188)

<!-- magento/magento2/pull/34198-->

* 修正WebAPI測試中的功能問題。 [GitHub-34196](https://github.com/magento/magento2/issues/34196)

<!-- AC-1207-->

* 修正導致靜態測試誤判的錯誤。 [GitHub-34056](https://github.com/magento/magento2/issues/34056)

<!-- magento/magento2/pull/34300-->

* 已更新`call_user_func_array`的測試涵蓋範圍。 [GitHub-34301](https://github.com/magento/magento2/issues/34301)

<!-- AC-1978-->

* 使用AWS Elasticsearch執行時，`Magento\GraphQl\CatalogGraphQl\ProductSearchTest`測試不再擲回此錯誤： `Magento\GraphQl\CatalogGraphQl\ProductSearchTest::testSearchSuggestions Failed asserting that an array is not empty. /var/www/html/dev/tests/api-functional/testsuite/Magento/GraphQl/CatalogGraphQl/ProductSearchTest.php:94 /var/www/html/dev/tests/api-functional/framework/Magento/TestFramework/TestCase/GraphQlAbstract.php:257`。

<!-- magento/magento2/pull/33699-->

* 已透過重新命名所有模擬變數以包含`Mock`尾碼並移除已棄用Object Manager類別的參照來修正許多非關鍵性單元測試警告。 [GitHub-33695](https://github.com/magento/magento2/issues/33695)

* `Magento\Framework\MessageQueue\TopologyTest`測試現在相容於[!DNL RabbitMQ]服務的AWS MQ。 之前，此測試失敗，訊息為： `Invalid exchange configuration: magento-topic-based-exchange1 Failed asserting that two arrays are equal`。<!-- AC-1248-->

<!-- magento/magento2/pull/34454-->

* 單元測試現在與PHP 8.1相容。[GitHub-34441](https://github.com/magento/magento2/issues/34441)

#### 單元測試

下列單元測試已重構為使用`PHPUnit`而非`AspectMock`：

`AllureHelperTest` [GitHub-33294](https://github.com/magento/magento2/issues/33294)

`ObjectHandlerUtil` [GitHub-33584](https://github.com/magento/magento2/issues/33584)

`MockModuleResolverBuilder` [GitHub-33583](https://github.com/magento/magento2/issues/33583)

`MagentoTestCase` [GitHub-33582](https://github.com/magento/magento2/issues/33582)

`ModuleResolverTest` [GitHub-33308](https://github.com/magento/magento2/issues/33308)

`ParallelGroupSorterTest` [GitHub-33306](https://github.com/magento/magento2/issues/33306)

`SuiteGeneratorTest` [GitHub-33299](https://github.com/magento/magento2/issues/33299)

`OperationDataArrayResolverTest` [GitHub-33296](https://github.com/magento/magento2/issues/33296)

### 主題

<!-- MC-41887-->

* 當Magento Open Source的基本URL中已設定子路徑時，通知訊息現在會正確顯示。

<!-- MC-42469-->

* 將`aria-label`元素新增至店面頁面範本，以指出購物者按一下連結時將會導覽至的頁面。 過去，不同頁面的連結會使用相同的連結文字。 [GitHub-33075](https://github.com/magento/magento2/issues/33075)

<!-- ACP2E-73-->

* 載入具有預先存在的自訂主題之存放區的首頁時，Magento Open Source不再顯示錯誤訊息。 之前，applicationOpen Source會顯示此訊息： `The store will not work correctly in the case when cookies are disabled`。

### 翻譯與地區設定

<!-- AC-285-->

* `UserExpiration`驗證器不會再失敗，因為`de_DE`和`uk_UA`地區設定。 先前，當管理員嘗試從管理員建立新使用者，並將地區設定設為`de_DE`或`uk_UA`時，applicationOpen Source會擲回錯誤。 [GitHub-32497](https://github.com/magento/magento2/issues/32497)

<!-- magento/magento2/pull/33787-->

* 在建立或編輯地址表單時，瑞士地區名稱現在會一致地以英文顯示。 [GitHub-32602](https://github.com/magento/magento2/issues/32602)

<!-- magento/magento2/pull/33128-->

* 更新根西島的`zip_codes.xml`模式，以支援沙克島的GY10郵遞區號。 [GitHub-33144](https://github.com/magento/magento2/issues/33144)

<!-- AC-1080-->

* 已將白俄羅斯地區新增至`directory_country_region`表格。 [GitHub-33924](https://github.com/magento/magento2/issues/33924)

<!-- AC-1178-->

* 顯示執行菲律賓（菲律賓）地區設定的店面異常已解決。 [GitHub-33996](https://github.com/magento/magento2/issues/33996)

<!-- AC-1308-->

* 現在，當您在設定為葡萄牙文（葡萄牙）地區設定的商店中建立新帳戶時，可以成功輸入客戶出生日期。 之前，當您嘗試建立帳戶時，Magento Open Source會擲回錯誤。 [GitHub-34130](https://github.com/magento/magento2/issues/34130)

<!-- ACP2E-457-->

* 產品詳細資料頁面現在會以阿拉伯文（沙烏地阿拉伯）地區設定成功顯示。 以前，這種地區設定會破壞產品詳細資料頁面。

### UI

<!-- AC-258-->

* 修正使用`maps.googleapis.com`的MFTF測試錯誤。

<!-- MC-41850-->

* Magento Open Source現在會修剪「聯絡我們」表單電子郵件輸入欄位中的不斷行空格字元。 以前，提交表單時沒有從電子郵件輸入中移除不間斷的空格字元（如果提供），這會導致記錄檔案中出現錯誤。 產生的連絡人電子郵件訊息中，也遺漏了&#x200B;**回覆**&#x200B;欄位。

<!-- MC-42793-->

* Magento Open Source現在會根據相關產品、追加銷售產品和交叉銷售產品在管理員中的位置，顯示這些產品。

<!-- MC-42502-->

* 在強制回應中使用`.action-close`時，`Multiselect`按鈕現在會如預期般運作。 之前，`action-close`按鈕無法運作，因為它繼承了強制回應視窗`.action-close`按鈕的CSS。 [GitHub-27240](https://github.com/magento/magento2/issues/27240)

<!-- AC-1217-->

* 產品檢視中的主要價格欄位現在顯示選件豐富的程式碼片段。 之前，在產品檢視中的相關產品區塊中，此欄位缺少此程式碼片段，導致Google搜尋結果顯示不正確的價格。 [GitHub-34063](https://github.com/magento/magento2/issues/34063)

<!-- AC-1584-->

* 執行iOS之裝置上的強制回應視窗高度問題已解決。 [GitHub-34467](https://github.com/magento/magento2/issues/34467)

<!-- MC-40106-->

* 現在，「動作」下拉式功能表在整個店面中都已正確定位。 [GitHub-31379](https://github.com/magento/magento2/issues/31379)

<!-- AC-1589-->

* 已解決在購物車和結帳頁面上導覽的協助工具錯誤。 [GitHub-34483](https://github.com/magento/magento2/issues/34483)

<!-- AC-1289-->

* 熒幕助讀程式現在可以讀取產品頁面上的所有相關表單元素。

<!-- AC-872-->

* Storefront目錄產品Widget排序順序（**目錄** > **類別** > **產品**）現在符合Admin中設定的順序。 [GitHub-27126](https://github.com/magento/magento2/issues/27126)

<!-- AC-725-->

* 「建立帳戶」頁面上的區域選取器現在會如預期般運作。 [GitHub-30099](https://github.com/magento/magento2/issues/30099)

<!-- MC-42750-->

* Admin客戶格線現在會依預期顯示所有客戶資料，包括新新增的`date`個自訂屬性。 先前，當`date`屬性集設定為欄時，applicationOpen Source擲回錯誤且無法正確顯示管理員客戶格線。

<!-- AC-1280-->

* **目錄** > **產品**&#x200B;詳細資訊頁面上的輸入標籤已變更，以正確反映輸入的目的。 不需要使用者輸入的欄位不再顯示帶有星號的標籤。

<!-- AC-1275-->

* 現在可以使用Tab鍵存取RTF編輯器工具列。

<!-- AC-1284-->

* 控制項的存取許可權名稱現在包含其可見標籤的文字，以顯示每頁下拉式清單的專案數。

<!-- AC-1287-->

* 當資料表摺疊時，**目錄** > **產品**&#x200B;詳細資訊頁面上的資料表控制項現在具有可見的標籤和可存取的名稱。

<!-- AC-1285-->

* 店面各處的按鈕現在都有唯一、描述性的可存取名稱。 先前，分割按鈕與文字按鈕和相鄰的向下箭頭圖示按鈕具有相同的可存取名稱。

<!-- AC-1168-->

* 新增&#x200B;**Today**&#x200B;檢視選項至「管理訂單」與「金額」儀表板圖表，以提供全天銷售與訂單的摘要。 [GitHub-34008](https://github.com/magento/magento2/issues/34008)

<!-- AC-1481-->

* 多重選取&#x200B;**關閉**&#x200B;按鈕的活動（點按）狀態現在會一致地運作。 [GitHub-34338](https://github.com/magento/magento2/issues/34338)

<!-- magento/magento2/pull/31879-->

* 停用Cookie限制模式時，升級後Magento Open Source不再顯示此訊息： `The store will not work correctly in the case when cookies are disabled`。 [GitHub-33811](https://github.com/magento/magento2/issues/33811)

<!-- ACP2E-7-->

* 全熒幕產品影像現在可以在行動裝置上具有垂直縮圖導覽方向的主題上正確顯示。 先前，全熒幕模式中行動裝置上擁有垂直縮圖導覽方向的主題上，產品影像無法正確縮放或隱藏。

<!-- ACP2E-23-->

* 啟用&#x200B;**與後端儲存裝置同步Widget產品**&#x200B;組態設定時，產品詳細資料頁面中的錯誤訊息不再快速消失。

<!-- ACP2E-70-->

* 負值的驗證已新增至[建立新退貨]表單上的&#x200B;**要退貨的數量**&#x200B;欄位。

<!-- ACP2E-105-->

* 在啟用&#x200B;**位址搜尋**&#x200B;組態設定的部署中，當購物者按一下[檢閱與付款]頁面上的&#x200B;**變更位址**&#x200B;時，Magento Open Source不再顯示重複位址。

<!-- ACP2E-136-->

* 在[管理類別]頁面上的存放區檢視範圍中工作時，**新增產品**&#x200B;按鈕現在已如預期為具有受限制許可權的管理員啟用。

<!-- ACP2E-169-->

* 檢視中斷點現在在Magento Open Source中保持一致。

<!-- ACP2E-199-->

* Magento Open Source現在會在「管理客戶」頁面上正確顯示自訂客戶日期屬性以及自訂地區。

<!-- MC-41760-->

* 使用頁面產生器新增的影像，在瀏覽器視窗寬度為768px時不再在店面重複。 以往，使用此瀏覽器視窗寬度時，應用程式「開啟Source 」會顯示行動版和案頭版的影像，從而在店面複製影像。

### URL重新寫入

<!-- AC-1510-->

* 執行`bin/magento setup:upgrade`時，在建立新存放區檢視期間，不再為所有存放區檢視重新產生URL重寫。 [GitHub-32954](https://github.com/magento/magento2/issues/32954)

### Web API框架

<!-- MC-42008-->

* 啟用持續性購物車時，針對自行授權客戶資源的Web API請求不再擲回授權錯誤。

<!-- MC-42313-->

* 您現在可以在PHP 7.3上使用`\Magento\Framework\Api\AbstractSimpleObjectBuilder`的子類別來建立物件。之前，當Magento Open Source在Redhat上以PHP 7.3裝載時，`preg_match`擲回此警告訊息： `Warning: preg_match(): Compilation failed: unrecognized character follows...`。

<!-- MC-24548-->

* `PUT /V1/guest-carts/:cartId/collect-totals`要求擷取的總數現在由正確的`shippingMethod`更新。 [GitHub-18508](https://github.com/magento/magento2/issues/18508)

<!-- MC-30627 AC-796-->

* 將新的還原序列化程式新增至REST API時，不再移除其他還原序列化程式。 之前，REST API接受新的內容型別，但CORE為API定義的內容型別不再運作並傳回400錯誤。 [GitHub-26433](https://github.com/magento/magento2/issues/26433)

<!-- AC-698-->

* 您現在可以移除`webapi.xml`檔案中定義之引數的覆寫。 [GitHub-33843](https://github.com/magento/magento2/issues/33843)

<!-- AC-1212-->

* Magento Open Source現在會在多次連續失敗的登入嘗試後，如預期般產生GraphQL或REST API要求的`customertoken`。 之前，applicationOpen Source不會檢查`lock_expires_at`中的`oauth_token_request_log`值是否大於目前的日期和時間，且一律會傳回嘗試失敗次數，因此客戶無法登入。 [GitHub-34067](https://github.com/magento/magento2/issues/34067)

<!-- AC-1190-->

* 新增遮罩的引號ID至`QuoteRepository::getList`不再造成無限回圈。 先前，依靠REST API更新訂單的付款處理程式觸發此行為。 [GitHub-33675](https://github.com/magento/magento2/issues/33675)

<!-- MC-41612-->

* `/rest/all/V1/categories/<above_created_category_id>`  PUT呼叫現在會遵守`available_sort_by`所指定的值。  以前，可用的產品清單排序方式下拉式清單已選取類別頁面上所有可能的選項，並且&#x200B;**使用全部**&#x200B;核取方塊已選取。 [GitHub-32596](https://github.com/magento/magento2/issues/32596)

<!-- ACP2E-11-->

* 建立客戶Token的REST API要求效能已改善。

<!-- ACP2E-91-->

* 已修正&#x200B;**將存放區代碼新增至URL**&#x200B;設為&#x200B;**是**&#x200B;且REST呼叫不包含存放區代碼時發生的錯誤。 雖然裝載有效，但呼叫傳回下列錯誤： `Fatal error: Allowed memory size of **&#x200B;**&#x200B;**&#x200B;**&#x200B;**&#x200B; bytes exhausted (tried to allocate &#x200B;**&#x200B;** bytes) in vendor/magento/module-store/Model/StoreRepository.php on line 75`。

<!-- ACP2E-153-->

* 現在可使用REST API同時建立相同訂單的部分商業發票。

### 希望清單

<!-- MC-41880-->

* 停用&#x200B;**在側邊欄中顯示**&#x200B;希望清單選項時，Magento Open Source不再在類別側邊欄中呈現希望清單。 之前，applicationOpen Source會忽略此選項。

### WYSIWYG

<!-- ACP2E-17-->

* PageBuilder現在可以使用WYSIWYG編輯器正確轉譯自訂Widget。

## 已知問題

**問題**：商家在從Adobe Commerce 2.4.4升級至Adobe Commerce 2.4.4-p1時，可能會發現套件版本降級通知。 可以忽略這些訊息。 套件版本中的差異是因為產生套件期間發生異常所導致。 沒有任何產品功能受到影響。 請參閱從2.4.4升級為2.4.4-p1[知識庫文章後降級的](https://support.magento.com/hc/en-us/articles/8214752983949)套件，瞭解受影響的案例和因應措施。

**問題**：當在管理&#x200B;**商店** > **設定** > **一般** > **國家/地區選項** > **允許國家/地區**&#x200B;中未選取任何選項時，購物者無法新增產品至購物車。 應用程式「開啟Source」改為顯示下列主控台錯誤： `Failed to load resource: the server responded with a status of 400 (Bad Request)`。<!-- AC-2564-->

**問題**： **尋找合作夥伴和擴充功能** > **Magento Marketplace**&#x200B;上的Dotdigital說明已過時。 以下是更新的說明：

Dotdigital是客戶參與平台，可協助數位行銷人員和開發人員在客戶歷程中提供溝通。 我們利用客戶資料的力量，促進參與度、轉換率，以及品牌在成長和擴展時的忠誠度。 客戶喜歡我們易用的平台，此平台可跨系統連線第一方資料、呈現強大的深入見解並自動化預測性跨管道訊息。

Dotdigital擁有350多名員工，為全球各行各業的中端市場及企業公司提供服務。 我們渴望激發負責任的行銷活動，並致力於可持續性、隱私權和安全性。 Dotdigital自豪地成為世界第一個碳中性行銷自動化平台，通過ISO 14001、ISO 27701和ISO 27001認證。

如需購買和下載資訊，請參閱[Dotdigital — Marketing Automation](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html)。

## 社群貢獻

我們感謝更廣泛的Magento Open Source社群，並感謝他們為此版本所作出的貢獻。

社群工程團隊[Magento貢獻者](https://magento.biterg.io/app/kibana)會依月份、季度和年度維護最佳貢獻個人和合作夥伴的清單。 從該貢獻者頁面，您可以前往GitHub上的合併個人資料連結。

### 合作夥伴貢獻

下表重點說明合作夥伴所做的貢獻。 下表列出提出提取請求的合作夥伴、外部提取請求編號，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-4-partner.md}}

### 個人貢獻者

下表列出我們社群成員的貢獻。 此表格列出提供提取請求的社群成員、外部提取請求編號，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-4-issues.md}}

### 系統需求

我們的技術棧疊是以PHP和MySQL為基礎所建置。 如需詳細資訊，請參閱[系統需求](../../../installation/system-requirements.md)。

### 安裝和升級指示

您可以使用[Composer](../../../installation/composer.md)安裝Magento Open Source 2.4.4。

## 移轉工具套件

資料移轉工具可協助將現有Magento 1.x存放區資料傳輸至Magento 2.x。此命令列介麵包含驗證、進度追蹤、記錄和測試功能。 如需安裝指示，請參閱[安裝資料移轉工具](../../../tools/data-migration-tool/install.md)。 請考慮探索或參與[資料移轉存放庫](https://github.com/magento/data-migration-tool)。

[程式碼移轉工具組](https://github.com/magento-commerce/code-migration)可協助將現有的Magento 1.x存放區擴充功能和自訂功能傳輸至Magento 2.x。命令列介麵包含轉換Magento 1.x模組和版面的指令碼。

<!-- Last updated from includes: 2022-10-13 13:44:41 -->
