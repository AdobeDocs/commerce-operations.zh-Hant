---
title: Magento Open Source 2.4.1發行說明
description: 瞭解2.4.1Magento Open Source版本中的新功能、增強功能、錯誤修正和已知問題。
recommendations: noCatalog
exl-id: 63d04bfc-96c9-4fe3-b3c1-252f1243459a
source-git-commit: 79c8a15fb9686dd26d73805e9d0fd18bb987770d
workflow-type: tm+mt
source-wordcount: '13110'
ht-degree: 0%

---

# Magento Open Source 2.4.1發行說明

Magento Open Source2.4.1引進了效能和安全性增強功能。 安全性增強功能包括支援Cookie的`SameSite`屬性，以及針對付款相關和訂單相關API端點，以及下單店面頁面新增驗證碼保護。

此版本包含2.4.0中包含的所有核心品質改善、超過150項核心程式碼的新修正，以及超過15項安全性增強。 其中包括我們社群成員解決近300個GitHub問題的方案。 這些社群貢獻的內容包括核心程式碼的少量清理，以及GraphQL中的重大增強功能。

此版本已修正2.4.0中確認的所有已知問題。

{{bics}}

## 有可用的安全性修補程式

商家現在可以安裝時效性安全修復程式，而無需應用完整季度版本（例如 2.4.0-p1）提供的數百個功能修復和增強功能。 補丁 2.4.0.1（Composer 包 2.4.0-p1）是一個安全補丁，為我們之前的季度版本 2.4.0 中已識別的漏洞提供修復。套用至 2.4.0 版的所有 Hotfix 都包含在此安全修補程式中。 （*Hot Fix*&#x200B;提供已發行版本的修正，該版本可解決特定問題或錯誤。）

如需安全性修補程式的一般資訊，請參閱[引入新的安全性修補程式版本](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287)。 如需有關下載和套用安全性修補程式（包括修補程式2.3.5-p2）的說明，請參閱[快速入門內部部署](../../../installation/composer.md)。 安全性修補程式僅包含安全性錯誤修正，不包含完整修補程式中包含的其他安全性增強功能。

## 套用`AC-3022.patch`以繼續提供DHL作為運送承運商

DHL已匯入schema 6.2版，並將在不久的未來淘汰schema 6.0版。 支援DHL整合的Adobe Commerce 2.4.4及舊版僅支援6.0版。部署這些版本的商戶應儘早套用`AC-3022.patch`，以繼續提供DHL作為運送承運商。 請參閱[套用修補程式，以繼續提供DHL作為運送業者](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier)知識庫文章，以取得有關下載和安裝修補程式的資訊。

## 其他發行資訊

雖然這些功能的程式碼隨季度發行捆綁，但其中幾個專案(例如Progressive Web Application (PWA) Studio)也獨立發行。 這些專案的錯誤修正記錄在每個專案檔案中提供的個別專案特定發行資訊中。

## 反白顯示

請檢視此版本中的下列重點專案。

### 大幅增強安全性

此版本包含超過15項安全性修正和平台安全性改善。 所有安全性修正已反向移植至2.4.0-p1和2.3.6。

#### 超過15項安全性增強功能，有助於關閉遠端程式碼執行(RCE)和跨網站指令碼(XSS)漏洞

目前尚未發生與這些問題相關的已確認攻擊。 但是，某些漏洞可能會被用來存取客戶資訊或接管管理員工作階段。 這些問題大多需要攻擊者先取得Admin的存取權。 因此，我們提醒您採取一切必要步驟來保護您的管理員，包括但不限於：IP允許清單、[雙因素驗證](https://developer.adobe.com/commerce/testing/functional-testing-framework/two-factor-authentication/)、使用VPN、使用唯一位置而非`/admin`以及良好的密碼衛生。 請參閱[可用於Magento](https://helpx.adobe.com/security/products/magento/apsb20-59.html)的安全性更新，以取得這些已修正問題的討論。

#### 其他安全增強功能

此版本的安全性改進包括：

* **驗證碼** 保護已添加到以下產品領域：

   * 下單店面頁面以及 REST 和 GraphQL 端點 <!-- MC-36067-->
   * 付款相關的REST和GraphQL端點。<!-- MC-36064-->

  預設會停用這些額外頁面的驗證碼保護。 它可以像 CAPTCHA 涵蓋的其他頁面一樣在管理員上啟用。 此保護已新增為反暴力機制，可保護存放區免受梳理攻擊。 請參閱 [CAPTCHA。](https://experienceleague.adobe.com/en/docs/commerce-admin/systems/security/captcha/security-captcha)

* **支援 SameSite 屬性的 Cookie**。 為了支持 Google 鉻黃強制執行新的 Cookie 分類 系統，處理 Cookie 的 應用程式 類已更新為支持 `SameSite` Cookie 属性。 此屬性預設設為 ， `Lax` 但可以顯式覆蓋。 <!-- MC-35389-->

* **增強的安全掃描工具**。Adobe Systems已與[防止數位略讀的領導者Sanguine Security](https://sansec.io/)合作，將其包含8700多個威脅簽名的資料庫集成到安全掃描工具中。 此合作夥伴關係可透過主動偵測惡意程式碼並減少誤判，讓商家即時洞察其網站的安全狀態。 商家可以造訪https://account.magento.com/scanner來註冊此工具。 如需詳細資訊，請參閱[使用增強式安全性掃描工具保護您的店面](https://magento.com/blog/magento-news/secure-your-storefront-enhanced-magento-security-scan-tool)部落格。

{{cve-notice}}

### 基礎架構改良

此版本包含核心品質的增強功能，可改善架構的品質，並包含下列功能區域：客戶帳戶、目錄、CMS、OMS、匯入/匯出、促銷活動與鎖定目標、購物車與結帳，以及測試與預覽。

### 效能改良

* **減少Redis與Magento**&#x200B;之間的網路傳輸大小。 外掛程式 清單 配置現在在命令執行 `bin/magento di:compile` 期間生成。 此配置信息將根據範圍寫入生成的中繼資料資料夾。 以前，此資訊存儲在緩存中。 由此產生的性能改進包括減少許多方案的網路緩存大小和執行時間。<!-- MC-31617-->

* **增強了消息佇列消費者性能**。 三個新的組態設定支援減少消費者佇列CPU耗用量。 這些選擇性引數可加強對使用者的控制，並節省伺服器資源。 請參閱[設定訊息佇列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/)以取得`maxIdleTime`、`sleep`和`onlySpawnWhenMessageAvailable`引數的說明。

* **改善`bin/magento`命令的執行時間**。

### Adobe Stock整合

此版本包含 Adobe Stock Integration v2.1.0。

### 新增媒體集

Admin現已預設啟用新媒體集。 商家現在可以在「媒體集」中的影像上執行下列動作：

* 大量刪除影像
* 識別店面未使用的重複影像和影像，最佳化媒體儲存空間
* 依使用的店面區域篩選影像，包括產品和類別內容以及CMS區塊
* 使用影像中繼資料
   * 從上傳至Media Gallery的影像檢視中繼資料
   * 編輯影像中繼資料（標題、說明和關鍵字）
   * 依影像的中繼資料搜尋影像

### GraphQL

此版本新增GraphQL涵蓋下列功能：

* **產品評論**。 客戶和來賓可以撰寫產品評論。 客戶可以擷取其產品檢閱記錄。 請參閱[建立產品評論](https://developer.adobe.com/commerce/webapi/graphql/mutations/create-product-review.html)和[productReviewRatingsMetadata查詢](https://developer.adobe.com/commerce/webapi/graphql/queries/product-review-ratings-metadata.html)，以取得擷取評論基礎結構相關資訊的資訊。<!-- MC-32349-->

* **贈品選項**。 所有客戶和來賓都可以在訂單中加入禮品訊息。 客戶也可以新增禮品包裝、禮品收據和列印卡到訂單中。 檢視[`setGiftOptionsOnCart`突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/set-gift-options.html)和[`updateCartItems`突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/update-cart-items.html)<!-- MC-32345-->

* **訂單歷史記錄**。 所有客戶都可以檢視其訂單記錄的詳細資料，包括發票、出貨及退款。<!-- MC-20635-->

* **加入購物車**。 [`addProductsToCart`突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/add-products-to-cart.html)可讓您將任何型別的產品加入使用中的購物車。 我們建議使用此突變，而非單一用途的突變，例如`addSimpleProductsToCart`。 _Yaroslav Rogoza在提取要求[27914](https://github.com/magento/magento2/pull/27914)_&#x200B;中提交的修正。 [GitHub-28524](https://github.com/magento/magento2/issues/28524) <!-- MC-21513-->

* **已儲存的付款方法**。 登入的客戶現在可以在「我的帳戶」中儲存付款詳細資料(包括Braintree信用卡和使用PayPal的Braintree)。

* **支援Magento Open Source**&#x200B;中的願望清單。 您可以[將專案](https://developer.adobe.com/commerce/webapi/graphql/mutations/add-products-to-wishlist.html)新增至，[更新專案](https://developer.adobe.com/commerce/webapi/graphql/mutations/update-products-in-wishlist.html)，以及[從希望清單移除專案](https://developer.adobe.com/commerce/webapi/graphql/mutations/remove-products-from-wishlist.html)。

* **已改善客戶帳戶管理**。 我們已新增[`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/mutations/create-customer-v2.html)和[`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/mutations/update-customer-v2.html)變動來管理客戶帳戶。 這些新的變動需要與`createCustomer`和`updateCustomer`變動不同的輸入物件。 若要變更客戶的電子郵件地址，請使用新的[`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/mutations/update-customer-email.html)變異。

* **支援Payflow Pro儲存庫**。 新增[Payflow Pro Vault](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/payflow-pro-vault.html)付款方式的GraphQL Vault支援。 _Oleh Usik在提取要求[28821](https://github.com/magento/magento2/pull/28821)_&#x200B;中提交的修正。 [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* 已更新GraphQL [`storeConfig`查詢](https://developer.adobe.com/commerce/webapi/graphql/queries/store-config.html)以包含新的客戶組態設定。 _Oleh Usik在提取要求[27876](https://github.com/magento/magento2/pull/27876)_&#x200B;中提交的修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 新增[`requestPasswordResetEmail`突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/request-password-reset-email.html)，這會觸發所提供電子郵件地址的密碼重設電子郵件。 _Oleh Usik在提取要求[27876](https://github.com/magento/magento2/pull/27876)_&#x200B;中提交的修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* **GraphQL**。 在[Klarna的付款方式](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/klarna.html)和[`createKlarnaPaymentsSession`](https://developer.adobe.com/commerce/webapi/graphql/mutations/create-klarna-payments-session.html)中新增或更新有關Klarna GraphQL的主題

如需這些增強功能的詳細資訊，請參閱[GraphQL開發人員指南](https://developer.adobe.com/commerce/webapi/graphql/)。

### PWA Studio

PWA Studio v8.0.0 引入了新功能和增強功能：

* 更新了適用於設計令牌、排版、顏色、核心元件和頁面佈局的 Venia 樣式指南。 <!-- PWA-519 419-->

* 改善Venia迷你購物車體驗<!-- PWA-236-->

* Venia店面<!-- PWA-295-->上多重地區設定和本地化內容的初始支援

* Venia店面<!-- PWA-247-->的「我的帳戶」體驗獲得多項改善

有關PWA Studio版本及其兼容版本的清單，請參閱 [兼容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 。 有關增強功能和錯誤修復的資訊，請參閱 [PWA Studio版本](https://github.com/magento/pwa-studio/releases)。

### 功能測試框架 （MFTF）

MFTF 3.1.0 現已可用。 請參閱[功能測試架構變更記錄檔](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md)。

### 廠商開發的擴充功能

請參閱下列文章，瞭解此版本功能和變更的更新：

* [Amazon支付](https://marketplace.magento.com/amzn-amazon-pay-magento-2-module.html)

* [Braintree](https://experienceleague.adobe.com/docs/commerce-admin/stores-sales/payments/braintree.html)

* [dotdigital Engagement Cloud](https://marketplace.magento.com/dotdigital-dotdigital-magento2-os-package.html)

* [克拉納](https://marketplace.magento.com/klarna-m2-klarna.html)

* [頂點雲](https://marketplace.magento.com/vertexinc-vertex-tax-module.html)

* [Yotpo產品評論](https://marketplace.magento.com/yotpo-module-yotpo.html)

## 已修正的問題

我們已修正2.4.1核心程式碼中的數百個問題。

### 安裝、升級、部署

<!-- MC-36113-->

* 在CLI命令中使用依賴於Store模組API的協力廠商擴充功能進行安裝時不再失敗。 以前，應用程式會顯示此錯誤訊息： `The default website isn't defined. Set the website and try again`。 這是2.4.0中的已知問題。

<!-- MC-33273-->

* `bin/magento setup:di:compile`不再擲回嚴重錯誤。 以前，應用程式在您第一次執行此命令時擲回錯誤，但第二次執行會導致編譯成功。

<!-- MC-34429-->

* 在`Magento\Framework\Encryption\Encryptor`上宣告外掛程式時，升級不再失敗。

<!-- MC-36231-->

* 執行`bin/magento setup:static-content:deploy`後未部署某些主題時，應用程式現在會顯示資訊性錯誤訊息。 先前，當部署成功完成但未部署所有套件時，應用程式不會顯示錯誤。 當在啟用平行處理的情況下執行命令，並且每個主題需要部署的時間超過指定的最大執行時間時，儘管未部署主題，此命令可以成功完成。

<!-- MC-35001-->

* 網站範圍變更時，Klarna付款的&#x200B;**使用預設**&#x200B;核取方塊（**商店** > **組態** > **銷售** > **付款方式** > **Klarna**）現在仍會如預期般保持核取狀態。

<!-- MC-33788-->

* 升級不會再導致Galera叢集突然失敗。 先前，Galera叢集在升級後立即重新索引後突然退出。 在升級期間，索引表格已變更，引擎已從`MEMORY`變更為`InnoDB`。 此時，這些表格的內容在Galera叢集的節點之間變得不同步。 [GitHub-25334](https://github.com/magento/magento2/issues/25334)

<!-- MC-34254-->

* 停用PageBuilder模組不再影響產品頁面的轉譯。 過去，當模組停用時，產品頁面上的自訂版面配置會消失，而應用程式會顯示空白頁面。

<!-- ENGCOM-7219-->

* 使用Composer安裝Magento Open Source後，您現在可以使用`bin/magento sampledata:deploy`如預期部署範例資料。 之前，應用程式擲回此錯誤： `Git installations must deploy sample data from GitHub; see [Clone sample data Git repositories](../../../installation/sample-data/git-repositories.md) for more information`。 _Andrii Beziazychnyi在提取要求[27481](https://github.com/magento/magento2/pull/27481)_&#x200B;中提交的修正。 [GitHub-19481](https://github.com/magento/magento2/issues/19481)

<!-- ENGCOM-7459-->

* 店面效能已因消除`Datepicker`元件的不必要載入而改善。 _Mateusz Krzeszowiak在提取要求[27860](https://github.com/magento/magento2/pull/27860)_&#x200B;中提交的修正。 [GitHub-28823](https://github.com/magento/magento2/issues/28823)

<!-- ENGCOM-7265-->

* 執行`bin/magento setup:upgrade`時不再顯示無關的快取資訊。 _Sathish Subramanian在提取要求[中提交的修正27567](https://github.com/magento/magento2/pull/27567)_。 [GitHub-27091](https://github.com/magento/magento2/issues/27091)

<!-- MC-17959 ENGCOM-7629-->

* 執行`bin/magento config:show <vendor_module>/general/value`現在會如預期傳回`0`或空字串。 先前傳回`Configuration for path: "vendor_module/general/value" doesn't exist`。 _Vadim Malesh在提取要求[28549](https://github.com/magento/magento2/pull/28549)_&#x200B;中提交的修正。 [GitHub-23290](https://github.com/magento/magento2/issues/23290)

<!-- ENGCOM-7853-->

* `bin/magento setup:static-content:deploy --language=all`現在會部署店面上使用的所有語言，以及管理員使用者未設定語言引數時設定的所有語言。 （`en_US`依預設一律部署。） _Anton Evers在提取要求[28922](https://github.com/magento/magento2/pull/28922)_&#x200B;中提交的修正。 [GitHub-29218](https://github.com/magento/magento2/issues/29218)

<!-- ENGCOM-7883-->

* 當備份功能停用時，應用程式不再顯示備份功能表。 _Eden Duong在提取要求[29222](https://github.com/magento/magento2/pull/29222)_&#x200B;中提交的修正。 [GitHub-29280](https://github.com/magento/magento2/issues/29280)

<!-- ENGCOM-7987-->

* 目錄影像協助程式初始化現在使用產品模型，而非`DataObject`。 _Jmonteros422在提取要求[29435](https://github.com/magento/magento2/pull/29435)_&#x200B;中提交的修正。 [GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- MC-37226-->

* 管理員使用者現在可以儲存空的&#x200B;**客戶權杖存留期（小時）**&#x200B;欄位（管理員&#x200B;**商店** > **設定** > **服務** > **OAuth** > **存取權杖有效期**）。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7724 -->

* 根據預設，類別現已停用舊URL的&#x200B;**建立永久重新導向**&#x200B;設定。 _Vadim Malesh在提取要求[28752](https://github.com/magento/magento2/pull/28752)_&#x200B;中提交的修正。 [GitHub-24922](https://github.com/magento/magento2/issues/24922)

### Adobe Stock整合

<!-- ENGCOM-7776-->

* 清除Adobe Stock影像網格線中的影像篩選器現在已正確對齊。 _修復由 Nazar Klovanych 在 提取 請求 [28366](https://github.com/magento/magento2/pull/28366)_ 中提交。 [GitHub-824](https://github.com/magento/adobe-stock-integration/issues/824)、 [GitHub-972](https://github.com/magento/adobe-stock-integration/issues/972)

<!-- ENGCOM-7709 -->

* Adobe Stock相簿影像詳細資料頁面的&#x200B;**用於**&#x200B;欄位現在可以正確識別該影像是否與產品相關聯。 _修復由 Nazar Klovanych 在 提取 請求 [28798](https://github.com/magento/magento2/pull/28798)_ 中提交。 [GitHub-1474](https://github.com/magento/adobe-stock-integration/issues/1474)

<!-- ENGCOM-7873 -->

* `\Magento\MediaGallery\Model\ResourceModel\Keyword\SaveAssetsKeywords::execute`現在會刪除引數上未指定之關鍵字的連結，並在編輯影像詳細資料時刪除關鍵字標籤時插入新連結。 _Jmonteros422在提取要求[29207](https://github.com/magento/magento2/pull/29207)_&#x200B;中提交的修正。 [GitHub-1391](https://github.com/magento/adobe-stock-integration/issues/1391)

<!-- ENGCOM-7981 -->

* 當商家針對先前儲存的未授權Adobe Stock影像按一下&#x200B;**授權**&#x200B;時，應用程式顯示的`Login failed`訊息不再包含HTML標籤。 _您的使用者在提取要求[29398](https://github.com/magento/magento2/pull/29398)_&#x200B;中提交的修正。 [GitHub-1684](https://github.com/magento/adobe-stock-integration/issues/1684)

<!-- ENGCOM-7976 -->

* 按一下影像「詳細資訊」頁面之&#x200B;**用於**&#x200B;區段中的連結，現在會顯示一個格線，其中顯示影像篩選的所有實體。 資產篩選器也已正確設定和顯示。 之前，應用程式未在&#x200B;**套用的篩選器**&#x200B;區段中顯示資產標題。 _Nazar Klovanych在提取要求[29367](https://github.com/magento/magento2/pull/29367)_&#x200B;中提交的修正。 [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-7976 -->

* 影像未使用時，應用程式不再顯示影像[詳細資料]頁面的&#x200B;**用於**&#x200B;區段。 _Nazar Klovanych在提取要求[29367](https://github.com/magento/magento2/pull/29367)_&#x200B;中提交的修正。 [GitHub-1699](https://github.com/magento/adobe-stock-integration/issues/1699)

<!-- ENGCOM-7976 -->

* 修正新增超過最大字元數的新影像標籤時的顯示問題。 _Nazar Klovanych在提取要求[29367](https://github.com/magento/magento2/pull/29367)_&#x200B;中提交的修正。 [GitHub-1702](https://github.com/magento/adobe-stock-integration/issues/1702)

<!-- ENGCOM-7976 -->

* 現在可以使用影像詳細資料&#x200B;**用於**&#x200B;區段上的資產篩選器，依預期檢查Assets。 _修復由 Nazar Klovanych 在 提取 請求 [29367](https://github.com/magento/magento2/pull/29367)_ 中提交。 [GitHub-1704](https://github.com/magento/adobe-stock-integration/issues/1704)

<!-- ENGCOM-7976 -->

* 有關不同實體使用的圖像（例如， `page` 和 `category`）的信息現在在「圖像詳細資訊」頁面中進行了更正。 _修復由 Nazar Klovanych 在 提取 請求 [29367](https://github.com/magento/magento2/pull/29367)_ 中提交。 [GitHub-1747](https://github.com/magento/adobe-stock-integration/issues/1747)

<!-- ENGCOM-8006-->

* 媒體收藏館停用時，當商家嘗試儲存產品及其相關影像時，應用程式不再擲回例外狀況。 _Nazar Klovanych在提取要求[29492](https://github.com/magento/magento2/pull/29492)_&#x200B;中提交的修正。 [GitHub-1750](https://github.com/magento/adobe-stock-integration/issues/1750)

<!-- ENGCOM-8019-->

* 按一下Media Gallery中影像的「使用位置」區段中的連結，現在會依預期開啟影像篩選的實體格點。 以前，影像標題不會顯示在格線的已套用濾鏡區段中。 _Nazar Klovanych在提取要求[29429](https://github.com/magento/magento2/pull/29429)_&#x200B;中提交的修正。 [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019-->

* 現在，當您在「媒體集」中連續編輯多個影像時，應用程式會正確新增標籤。 _Nazar Klovanych在提取要求[29429](https://github.com/magento/magento2/pull/29429)_&#x200B;中提交的修正。 [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015-->

* 商家刪除標記並保存圖像詳細資訊后，應用程式現在會刪除Adobe Stock圖像的標籤。 以前，在重新整理頁面之前，不會刪除標記。 _修復由 Honeymay Louiese Ignacio 在 提取 請求 [29400](https://github.com/magento/magento2/pull/29400)_ 中提交。 [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

### Amazon Pay

* Amazon Pay現在會在轉譯付款選項前，檢查使用者是否已登入。

* 多因素身份驗證和廢棄購物車的問題已得到解決。

* Amazon Pay現在會在電子郵件和其他顯示的位置中正確填入`store name`。  如果Amazon Pay設定中的&#x200B;**商店名稱**&#x200B;欄位空白，擴充功能會擷取商店的預設名稱（也就是您在Admin中提供的名稱）。

* 已解決拒絕案例的本地化/翻譯問題。 顯示的文字不再一律為英文。

### 套裝產品

<!-- MC-36281-->

* 當您嘗試在已安裝詳細目錄但`Magento_InventoryBundleProduct`模組已停用的部署中建立產品時，應用程式不會再擲回例外狀況。

<!-- MC-34261-->

* 應用程式現在會正確計算包含組合產品的訂單的離線退款。

<!-- MC-24363-->

* 迷你購物車現在會顯示套裝產品的正確價格，同時為簡單產品指定層級價格。 [GitHub-22807](https://github.com/magento/magento2/issues/22807)

<!-- ENGCOM-7499-->

* 商戶現在可以建立套件組合產品的銷退折讓單，提供退款而不要求退貨產品。 之前，應用程式擲回錯誤。 _Dzung Nguyen在提取要求[27455](https://github.com/magento/magento2/pull/27455)_&#x200B;中提交的修正。 [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7655-->

* 當購物者新增套件產品至購物車而未選取必要選項時，應用程式不再顯示多餘的驗證訊息。 _Dzung Nguyen在提取要求[27455](https://github.com/magento/magento2/pull/27455)_&#x200B;中提交的修正。 [GitHub-23440](https://github.com/magento/magento2/issues/23440)

<!-- ENGCOM-7985 -->

_Michal Derlatka在提取要求[29256](https://github.com/magento/magento2/pull/29256)_&#x200B;中提交的修正。 [GitHub-26110](https://github.com/magento/magento2/issues/26110)

### 快取

<!-- MC-36096-->

* 本機快取存放區現在會保留在&#x200B;**存放區** > **組態** > **一般** > **網頁** > **預設Cookie設定**&#x200B;中設定的時段。 先前，Cookie的到期日會以硬式編碼撰寫為一天，因此不會與此設定同步。 因此，歡迎訊息沒有在預期期間內保留回訪的客戶資訊。

<!-- ENGCOM-7780-->

* 對頁面快取`config`的呼叫次數已減少。 _Lukasz Bajsarowicz在提取要求[28992](https://github.com/magento/magento2/pull/28992)_&#x200B;中提交的修正。 [GitHub-29159](https://github.com/magento/magento2/issues/29159)

<!-- ENGCOM-7073-->

* 依排程重新索引大型目錄時，清漆不再擲回`Connection reset by peer`錯誤。 _Matthew O&#39;Loughlin在提取要求[中提交的修正26256](https://github.com/magento/magento2/pull/26256)_。 [GitHub-8815](https://github.com/magento/magento2/issues/8815)

<!-- MC-29069-->

* 在Admin中編輯產品後，不再為不相關的產品清除完整頁面快取。 [GitHub-25670](https://github.com/magento/magento2/issues/25670)

### 購物車與結帳

<!-- ENGCOM-7950-->

* 直接SQL查詢已由資料提供者取代，這已改善簽出效能。 _Lukasz Bajsarowicz在提取要求[29376](https://github.com/magento/magento2/pull/29376)_&#x200B;中提交的修正。 [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- MC-36252-->

* 「比較」和「最近比較的產品」清單中的產品現在可正常運作。 以前，展開比較清單時，應用程式不顯示產品，平均儘管該部分指示清單包含產品。

<!-- MC-35329-->

* **現在，當選取多列時，客戶**「管理購物車&#x200B;**」頁面的「**&#x200B;依SKU **新增至購物車」區域刪除**&#x200B;按鈕即可正常運作。

<!-- MC-34999-->

* 當您嘗試以SKU訂購產品時，若您輸入的數字元合有效的SKU，但大小寫不同，應用程式不會再擲回錯誤。 先前，當您在&#x200B;**我的帳戶** > **Order by SKU**&#x200B;輸入SKU時，與有效的SKU不完全相符，應用程式擲回錯誤。

<!-- MC-25042-->

* 現在，當客戶的地址位於允許國家/地區清單上所識別的國家/地區，並且該清單僅包含該國家/地區時，結帳時預設會選取客戶的送貨地址。 之前，應用程式未選取預設位址，且顯示此錯誤訊息： `Please specify a regionId in shipping address`。

<!-- MC-24043-->

* 商戶現在可以在&#x200B;**行銷** > **購物車價格規則** > **新增規則**&#x200B;的[動作]索引標籤中，啟用&#x200B;**套用至運送金額**，同時套用&#x200B;**整個購物車的固定金額折扣**。 [GitHub-24422](https://github.com/magento/magento2/issues/24422)

<!-- MC-23992-->

* 當購物者開始結帳，然後導覽至店面首頁後嘗試取消設定持續性Cookie時，應用程式不再擲回例外狀況。 先前，當購物者按一下&#x200B;**不是您時？** 連結首頁，應用程式拋出了這個異常： `The shipping address is missing. Set the address and try again`。 [GitHub-24218](https://github.com/magento/magento2/issues/24218)

<!-- MC-33899-->

* 現在，當客戶將缺貨產品新增至其購物車時，應用程式會顯示「新增至購物車成功」訊息。 之前已新增產品，但應用程式未顯示成功訊息。

<!-- MC-35989-->

* 自訂地址屬性現在按預期包含在結帳工作流程付款步驟顯示的表單中。

<!-- MC-36060-->

* “**州/省/地區**”輸入框現在按預期在“我的帳戶>****&#x200B;通訊錄&#x200B;**”>**“添加新地址&#x200B;**”上**&#x200B;啟用。

<!-- ENGCOM-7746-->

* 現在啟用「套用至裝運金額&#x200B;**」時，**&#x200B;折扣會按預期套用至運費。_修復由 Andrii Kalinich 在 提取 請求 [28839](https://github.com/magento/magento2/pull/28839)_ 中提交。 [GitHub-26723](https://github.com/magento/magento2/issues/26723)

<!-- ENGCOM-7752-->

* 支援關閉迷你購物車的程式碼已重構為移除`closeSidebar`函式。 已將適當的點選繫結新增至`[data-action="close"]`專案。 _由lumnn在提取要求[28906](https://github.com/magento/magento2/pull/28906)_&#x200B;中提交的修正。 [GitHub-29161](https://github.com/magento/magento2/issues/29161)

<!-- ENGCOM-7585-->

* 購物車頁面&#x200B;**組態設定上的新**&#x200B;顯示[清除購物車]按鈕可控制購物車檢視頁面上顯示&#x200B;**清除購物車**&#x200B;按鈕。 默認情況下，此設置處於禁用狀態。 _修復由 Pavlo Sydorenko 在 提取 請求 [27917](https://github.com/magento/magento2/pull/27917)_ 中提交。 [GitHub-28705](https://github.com/magento/magento2/issues/28705)

<!-- ENGCOM-7457-->

* 已在結帳工作流程的「電話」欄位中新增驗證。 _Oleh Usik 在 提取 請求 [27537](https://github.com/magento/magento2/pull/27537)_ 中提交的修復。 [GitHub-28800](https://github.com/magento/magento2/issues/28800)

<!-- ENGCOM-5629-->

* 當購物車包含可下載的產品時，當已停用&#x200B;**可共用**&#x200B;和&#x200B;**如果購物車包含可下載的專案，則停用訪客簽出**&#x200B;設定時，訪客簽出現在會如預期般停用。 _Rani Priya在提取要求[23972](https://github.com/magento/magento2/pull/23972)_&#x200B;中提交的修正。 [GitHub-23971](https://github.com/magento/magento2/issues/23971)

<!-- ENGCOM-7949-->

* 當購物者從客戶帳戶側边欄向其購物車添加產品時，應用程式显示的成功消息現在包含購物者購物車的連結。 _修復由 Ajith 在 提取 請求 [27977](https://github.com/magento/magento2/pull/27977)_ 中提交。 [GitHub-29097](https://github.com/magento/magento2/issues/29097)

<!-- ENGCOM-7825-->

* 應用程式現在預設會為結帳工作流程上的前綴下拉選項功能表選擇一個空值。 _修復由 瓦迪姆·馬萊什 在 提取 請求 [28238](https://github.com/magento/magento2/pull/28238)_ 中提交。 [GitHub-18823](https://github.com/magento/magento2/issues/18823)

<!-- ENGCOM-8004-->

* 從購物車中刪除多個專案時，應用程式顯示的快顯視窗消息現在準確地描述了已選擇要刪除的實體的數量和類型。 _修復由 Nazar Klovanych 在 提取 請求 [29490](https://github.com/magento/magento2/pull/29490)_ 中提交。 [GitHub-1749](https://github.com/magento/adobe-stock-integration/issues/1749)

<!-- MC-36418-->

* 當訪客使用者完成結帳時，應用程式現在會顯示客戶登錄檔單。

<!-- MC-35607-->

* 自訂客戶地址屬性欄位現在會如預期顯示在店面結帳工作流程中。

<!-- ENGCOM-7793-->

* 應用程式現在會在結帳期間擷取使用中報價的目前客戶群組。 以前，應用程式使用首次將產品新增到購物車時處於作用中狀態的客戶群組，如果該客戶群組在結帳前被刪除，則應用程式會擲回錯誤。 _Konstantin在提取要求[28902](https://github.com/magento/magento2/pull/28902)_&#x200B;中提交的修正。 [GitHub-29327](https://github.com/magento/magento2/issues/29327)

### 目錄

<!-- MC-31068-->

* 應用程式現在會在結帳前，從購物車的購物車移除已停用的產品。 先前，當購物者新增在結帳完成前停用的產品至購物車時，應用程式會從購物車中移除停用的產品，但產品仍保留在報價中，購物者無法結帳。 [GitHub-26680](https://github.com/magento/magento2/issues/26680)

<!-- MC-30624-->

* 應用程式現在會依預期排序最暢銷的產品。 先前，產品計數和排序結果的分頁均不正確。 [GitHub-25955](https://github.com/magento/magento2/issues/25955)

<!-- ENGCOM-7292-->

* 購物者現在可以按一下比較產品側邊欄中的產品名稱，開啟產品的詳細資訊頁面。 _Eduard Chitoraga在提取要求[27451](https://github.com/magento/magento2/pull/27451)_&#x200B;中提交的修正。 [GitHub-21101](https://github.com/magento/magento2/issues/21101)

<!-- ENGCOM-7513-->

* 當管理員刪除類別時，`children_count`值現在保持為正數。 先前，當管理員刪除類別時，剩餘類別的`children_count`為負值。 _Vitaliy Prokopov在提取要求[28044](https://github.com/magento/magento2/pull/28044)_&#x200B;中提交的修正。 [GitHub-27969](https://github.com/magento/magento2/issues/27969)

<!-- MC-34314-->

* 應用程式現在會使用您在建立新產品時為`page_layout`屬性選取的預設選項（**組態** > **網頁** > **預設配置** > **預設產品配置**）。 之前，系統不會套用您選取的預設值，

<!-- MC-34258-->

* 您現在可以成功對「庫存管理系統」產品存貨執行整批作業。 以前，當您嘗試對存貨產品存貨執行整批作業時，應用模組會顯示空白頁面。 如果您在開發人員模式中使用應用程式執行此動作，應用程式會擲回此錯誤： `Notice: Undefined offset: 32000 in /Users/kodithuw/sites/m23inventory/inventory/InventoryCatalogAdminUi/view/adminhtml/templates/catalog/product/edit/action/inventory.phtml on line 24`。

<!-- MC-32552-->

* 當您按兩下「產品」標籤上「 **添加產品** 」時顯示的總記錄計數類別不再根據產品排序順序而更改。

<!-- ENGCOM-7854 -->

* `{products(filter: {sku: {eq: "some sku"}}) {…}`查詢現在返回已轉換為預期貨幣的值。以前， `price_tiers.final_price.value` 以基礎貨幣顯示特殊價格。 _修復由 Petkovski Marjan 在 提取 請求 [28890](https://github.com/magento/magento2/pull/28890)_ 中提交。 [GitHub-26121](https://github.com/magento/magento2/issues/26121)

### Cleanup

<!-- ENGCOM-7281-->

* 已修正「管理銷售訂單方格」核取方塊的對齊錯誤。 _Tu Nguyen在提取要求[27642](https://github.com/magento/magento2/pull/27642)_&#x200B;中提交的修正。 [GitHub-27633](https://github.com/magento/magento2/issues/27633)

<!-- ENGCOM-7723-->

* 修正銷售訂單地址儲存處理常式中送貨地址ID getter的拼字錯誤。 _Konstantin在提取要求[28810](https://github.com/magento/magento2/pull/28810)_&#x200B;中提交的修正。 [GitHub-28982](https://github.com/magento/magento2/issues/28982)

<!-- ENGCOM-7745-->

* 已將 `getRegionNameExpresion` 方法名稱更正為 `getRegionNameExpression`。 _Pierre Grimaud在提取要求[28832](https://github.com/magento/magento2/pull/28832)_&#x200B;中提交的修正。 [GitHub-28829](https://github.com/magento/magento2/issues/28829)

<!-- ENGCOM-7657-->

* 已從`app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/Website.php`和`app/code/Magento/AdvancedPricingImportExport/Model/Import/AdvancedPricing/Validator/TierPriceType.php`移除多餘的`init`方法。 _Oleh Usik在提取要求[28650](https://github.com/magento/magento2/pull/28650)_&#x200B;中提交的修正。 [GitHub-29009](https://github.com/magento/magento2/issues/29009)

<!-- ENGCOM-7698-->

* `localStorage` polyfill已從`base`移至`frontend`。 _Ihor Sviziev在提取要求[28749](https://github.com/magento/magento2/pull/28749)_&#x200B;中提交的修正。 [GitHub-28900](https://github.com/magento/magento2/issues/28900)

<!-- ENGCOM-7753-->

* 更新 Adobe Systems Commerce 標誌，並從存放庫的主 `magento/magento2` README 檔案中刪除多餘的空格。 _Rafael Cora r̻Gomes在提取要求[28891](https://github.com/magento/magento2/pull/28891)_&#x200B;中提交的修正。 [GitHub-29056](https://github.com/magento/magento2/issues/29056)

<!-- ENGCOM-7771-->

* 不必要的 `overflowed` 類已從小型側邊欄 widget 購物車移除。 _由 lumnn 在 提取 請求 [28963](https://github.com/magento/magento2/pull/28963)_ 中提交的修復。 [GitHub-29160](https://github.com/magento/magento2/issues/29160)

<!-- ENGCOM-7658-->

* 貨件頁面中不正確的 CSS 選擇器已更正。 _Tu Nguyen 在 提取 請求 [28639](https://github.com/magento/magento2/pull/28639)_ 中提交的修復程序。 [GitHub-29261](https://github.com/magento/magento2/issues/29261)

<!-- ENGCOM-7680-->

* 透過最佳化邏輯以及移除多餘的變數指派和函式內傳回的過度使用，已簡化`lib/internal/Magento/Framework/App/Request/Http.php`檔案。 _Chris Snedaker在提取要求[中提交的修正28608](https://github.com/magento/magento2/pull/28608)_。 [GitHub-29381](https://github.com/magento/magento2/issues/29381)

<!-- ENGCOM-7925-->

* `bin/magento module:status`命令現在接受多個模組名稱做為引數。 _Chandru Rajendran在提取要求[28250](https://github.com/magento/magento2/pull/28250)_&#x200B;中提交的修正。 [GitHub-29344](https://github.com/magento/magento2/issues/29344)

<!-- ENGCOM-7983-->

* 修正`\Magento\Downloadable\Block\Sales\Order\Email\Items\Downloadable`的類別說明中的錯字。 _Benjamin Rosenberger在提取要求[29451](https://github.com/magento/magento2/pull/29451)_&#x200B;中提交的修正。 [GitHub-29470](https://github.com/magento/magento2/issues/29470)

<!-- ENGCOM-7993-->

* 已重構`TierPriceManagement`類別以移除多餘的程式碼。 _Lukasz Bajsarowicz在提取要求[29202](https://github.com/magento/magento2/pull/29202)_&#x200B;中提交的修正。 [GitHub-29477](https://github.com/magento/magento2/issues/29477)

<!-- ENGCOM-7830-->

* 已重構`autoload.php`以提高可讀性和回訪速度。 _Vitaliy Ryaboy在提取要求[28923](https://github.com/magento/magento2/pull/28923)_&#x200B;中提交的修正。 [GitHub-29527](https://github.com/magento/magento2/issues/29527)

### CMS內容

<!-- MC-35971-->

* 所選預設商店檢視的「階層」標籤現在會如預期顯示所選的上層頁面。

<!-- ENGCOM-7602-->

* 當新的存放區檢視包含的CMS頁面與其他存放區檢視中的頁面具有相同的URL索引鍵時，應用程式不會再在建立存放區檢視期間擲回錯誤。 _Vadim Malesh 在 提取 請求 [28421](https://github.com/magento/magento2/pull/28421)_ 中提交的修復。 [GitHub-28357](https://github.com/magento/magento2/issues/28357)

### 可配置產品

<!-- MC-33523-->

* “可配置產品編輯當前變體”清單的分页問題已得到糾正。

<!-- MC-33406-->

* 當購物者選取可設定產品的選項時，應用程式不再更新「相關產品」價格方塊。 以前，每當購物者為可設定產品選取選項時，應用程式就會更新價格方塊。

<!-- MC-29882-->

* 應用程式現在會在「管理員建立訂單」頁面上，針對具有可自訂選項的可設定產品顯示正確的價格。 如預期，顯示的價格是子產品的價格與自訂選項價格的總和。 以前，應用程式只會顯示自訂選項價格。 [GitHub-25766](https://github.com/magento/magento2/issues/25766)

<!-- MC-33745-->

* 套用購物車價格規則時，訂單摘要現在會顯示正確的折扣金額。 以往，規則在計算運費折扣時無法正確舍入金額。

<!-- MC-33765-->

* 從具有受限範圍的管理員帳戶創建的管理員用戶帳戶現在可以按預期創建具有屬性的可配置產品。 之前，應用程式拋出此錯誤： `Notice: Undefined index: value_index in 23develop/app/code/Magento/ConfigurableProduct/Helper/Product/Options/Factory.php on line 101`。

<!-- ENGCOM-7787-->

* 當您對值為 `int` 0 的可配置產品使用POST`/V1/products`時，應用程式不再引發驗證錯誤。之前，應用程式拋出此錯誤： `Product with id "%1" does not contain required attribute "%2"."` _Vadim Malesh 在 提取 請求 [29001](https://github.com/magento/magento2/pull/29001)_ 中提交的修復。 [GitHub-13210](https://github.com/magento/magento2/issues/13210)

<!-- ENGCOM-7214-->

* 父級產品的組態選項屬性不再指派給新可設定產品的`size`屬性。 _Abel Truong在提取要求[27339](https://github.com/magento/magento2/pull/27339)_&#x200B;中提交的修正。 [GitHub-26449](https://github.com/magento/magento2/issues/26449)

### Cookie

<!-- ENGCOM-7156-->

* 應用程式現在會為每個工作階段建立最多一個`mage-translation-file-version`和`mage-translation-storage`個Cookie。 _Ihor Sviziev在提取要求[27364](https://github.com/magento/magento2/pull/27364)_&#x200B;中提交的修正。 [GitHub-27355](https://github.com/magento/magento2/issues/27355)

### cron

<!-- MC-35884-->

* 新增訊息佇列使用者配置已擴展為新參數，這些參數有助於控制使用者並節省伺服器資源，並可能降低消費者佇列 CPU 消耗：

   * `maxIdleTime` 定義來自佇列的新消息的最長等待時間（以秒為單位）。
   * `sleep`指定在檢查佇列中是否有新訊息可用之前的睡眠時間（秒）。
   * `onlySpawnWhenMessageAvailable` 標識是否應僅在相關佇列中存在可用消息時才應生成消費者。 默認情況下，為所有消費者全域啟用此設置，但可以按消費者配置此設置。

<!-- ENGCOM-7863-->

* `cron` 表達式（如 ）`3/10 * * * *` 現在按預期計劃。 _修復由 Anton Evers 在 提取 請求 [28930](https://github.com/magento/magento2/pull/28930)_ 中提交。 [GitHub-29240](https://github.com/magento/magento2/issues/29240)

<!-- ENGCOM-7193-->

* `sales_clean_quotes`不再一次載入所有過期報價。 以前，應用程式失敗並出現以下致命錯誤，因為所有過期的引號都是同時載入的： `PHP Fatal error: Allowed memory size of 2147483648 bytes exhausted (tried to allocate 20480 bytes) in /path/to/magento2/vendor/magento/framework/Model/AbstractModel.php on line 359`，

### CSS

<!-- ENGCOM-7678-->

* 啟用&#x200B;**關鍵CSS**&#x200B;時，應用程式不再重複CSS。 _Tu Nguyen在提取要求[28480](https://github.com/magento/magento2/pull/28480)_&#x200B;中提交的修正。 [GitHub-26498](https://github.com/magento/magento2/issues/26498)

<!-- MC-24981-->

* 伺服器端LESS編譯器現在會在您執行`bin/magento setup:static-content:deploy -f`時，依預期匯入所有遠端CSS檔案。 之前，應用程式未匯入遠端檔案，並擲回錯誤。 [GitHub-25119](https://github.com/magento/magento2/issues/25119)

### 客戶

<!-- MC-33679-->

* Admin客戶地址中的地區名稱現在會如預期般轉譯。

<!-- MC-36226-->

* **州/省**&#x200B;欄位現在已如預期在[編輯地址]頁面上填入（**我的帳戶** > **通訊錄**）。

<!-- MC-34655-->

* 當客戶在啟用隱藏的reCAPTCHA的店面中多次點選表單上的&#x200B;**Submit**&#x200B;按鈕時，應用程式不再擲回錯誤。 之前，按多次此按鈕會導致類似以下的內部錯誤： `Internal error: Make sure you are using reCaptcha V3 api keys`。

<!-- MC-33522-->

* 從管理員儲存已刪除的客戶現在只會產生錯誤訊息。 以前，應用程式顯示空白頁面，並產生包含此字串的報告： `"0":"No such entity with customerId = 3","1":"#1 Magento\\Customer\\Model CustomerRegistry->retrieve() called at [app\/code\/Magento\/Customer\/Model\/ResourceModel\/CustomerRepository.php:340"`。

<!-- MC-33357-->

* 當管理員嘗試為帳戶剛剛被刪除的客戶儲存地址時，應用程式現在會如預期顯示錯誤訊息。 以前，應用程式會顯示一個空白訊息方塊。

<!-- MC-33150-->

* 已編輯簽出工作流程與通訊錄中通訊欄位的標籤，以維持一致性。

<!-- ENGCOM-7244 -->

* 現在，如果前端標籤的值不是Null，則前端標籤會回復到儲存標籤。 以前，客戶屬性使用預設前端卷標。 _Toan Nguyen 在 提取 請求 [27064](https://github.com/magento/magento2/pull/27064)_ 中提交的修復程序。 [GitHub-27063](https://github.com/magento/magento2/issues/27063)

<!-- ENGCOM-7147 -->

* 已更正版面XML中的`sortOrder`個連結。 以前，這個順序會被顛倒並使用降序。 _Tu Nguyen在提取要求[27340](https://github.com/magento/magento2/pull/27340)_&#x200B;中提交的修正。 [GitHub-27162](https://github.com/magento/magento2/issues/27162)

### 目錄

<!-- MC-32271-->

* 州/省下拉式功能表的格式現在在管理員中保持一致。

### dotdigital

* 當訂單包含目錄中不再存在的產品SKU時，訂單同步不再失敗。

* 網頁分析資料中不再包含空白產品類別。

* 網站行為追蹤現在適用於具有特定主題設定的商家。 新的備援選擇器可解決此問題。

* 訂户狀態數據欄位 no loner 在使用 cron 運行時包含空值客戶同步。 （應用程式模擬可解決此問題。）

* 當在默認級別啟用 dotdigital 帳戶但為主網站禁用時，通訊錄映射現在按預期工作。

* 現在，系統會為包含加号 （&#39;+&#39;） 的電子郵件地址生成抵用券（使用產生抵用券的外部動態內容URL）。

* 當連絡人的`last_subscribed_at`值為Null時，不再重新訂閱連絡人。

* 影響舊版的升級錯誤（4.5.2版）已解決。

* 4.5.3中引入的回歸問題已修復，該問題在準備訂閱者匯出時影響使用方法取得訂閱者狀態。

* 現在可以正確計算同步訂閱者的總人數（顯示在記錄檔和畫面上）。

### 下載

<!-- MC-35026-->

* “我的可下載產品”區域現在顯示指向已購買的可下載產品的鏈接，這些產品按預期屬於分組產品的一部分。

<!-- MC-34262-->

* 單擊管理員產品頁面中可下載產品的示例&#x200B;****&#x200B;按鈕，現在會按預期下載示例。先前，當您按一下&#x200B;**範例**&#x200B;時，應用程式會顯示此錯誤： `The product that was requested doesn't exist. Verify the product and try again`。

<!-- ENGCOM-7757-->

* 購物者現在可以下載無庫存的可下載產品範例。 先前，當購物者嘗試下載範例時，應用程式會開啟新的索引標籤，但未顯示資訊訊息或開始下載程式。 _Vadim Malesh在提取要求[28898](https://github.com/magento/magento2/pull/28898)_&#x200B;中提交的修正。 [GitHub-23638](https://github.com/magento/magento2/issues/23638)

<!-- ENGCOM-7796-->

* 改善當購物者嘗試設定可下載產品的送貨地址時，應用程式顯示的例外訊息。 _Michal Derlatka在提取要求[28904](https://github.com/magento/magento2/pull/28904)_&#x200B;中提交的修正。 [GitHub-26107](https://github.com/magento/magento2/issues/26107)

<!-- ENGCOM-7715 -->

* 更新產品的`stock_item`資料，而且當您使用RESTPUT呼叫更新`stock_item`值時，可下載的產品連結和範例會如預期般保留。 之前，產品更新後，產品不再包含下載內容的連結。 _Vadim Malesh在提取要求[28799](https://github.com/magento/magento2/pull/28799)_&#x200B;中提交的修正。 [GitHub-21811](https://github.com/magento/magento2/issues/21811)

<!-- MC-29905-->

* 當客戶針對僅包含可下載產品的訂單設定送貨地址時，應用程式現在會顯示資訊更豐富的訊息。

### 電子郵件

<!-- MC-32789-->

* 如果客戶電子郵件在訂單建立後已變更，應用程式現在會將訂單變更的電子郵件通知傳送至正確的客戶電子郵件。

<!-- MC-36015-->

* 傳送給客戶的訂單更新電子郵件現在包含正確的訂單狀態。 先前，如果訂單狀態從`processing`變更為其他狀態，則訂單電子郵件不會反映狀態變更。

<!-- MC-34107-->

* 應用程式不會再於訪客結帳期間顯示有關現有帳戶的誤導性訊息。 先前，當訪客導覽至結帳頁面，然後導覽回送貨頁面時，應用程式會顯示此錯誤： `You already have an account with us. Sign in or continue as guest`。

<!-- MC-33905-->

* 自訂電子郵件範本現在會載入與原生預設電子郵件範本相同的元素。 過去，有些元素遺失，包括變數值。

<!-- ENGCOM-7576-->

* 已從電子郵件預覽範本移除不必要的CSS。 _Tu Nguyen在提取要求[27828](https://github.com/magento/magento2/pull/27828)_&#x200B;中提交的修正。 [GitHub-27543](https://github.com/magento/magento2/issues/27543)

<!-- ENGCOM-7177-->

* 已移除電子郵件範本中重複頁尾已顯示之文字的文字。 _Pawel Tylek在提取要求[27356](https://github.com/magento/magento2/pull/27356)_&#x200B;中提交的修正。 [GitHub-28433](https://github.com/magento/magento2/issues/28433)

<!-- ENGCOM-7506-->

* 產品警報電子郵件現在會從訂閱警報的商店傳送。 以前，此電子郵件一律從預設商店傳送。 _Maciej Pawlowski在提取要求[26534](https://github.com/magento/magento2/pull/26534)_&#x200B;中提交的修正。 [GitHub-28968](https://github.com/magento/magento2/issues/28968)

<!-- ENGCOM-7815-->

* 已從電子郵件範本移除重複的`customer.name`變數。 _Pawel Tylek在提取要求[29054](https://github.com/magento/magento2/pull/29054)_&#x200B;中提交的修正。 [GitHub-29087](https://github.com/magento/magento2/issues/29087)

<!-- MC-33700-->

* 您現在可以建立電子郵件範本，以傳送電子郵件  `Content-Type: "text/plain"`。 之前，應用程式會忽略範本中指定的內容型別。 _由 twoonesixdigital 在 提取 請求 [26474](https://github.com/magento/magento2/pull/26474)_ 中提交的修復。 [GitHub-26471](https://github.com/magento/magento2/issues/26471)

### 框架

<!-- MC-35893-->

* 「管理儲存>設定」>「一般」>進階報表&#x200B;**」頁面的「傳送數據**&#x200B;的時間」字段現已&#x200B;**可正確顯示。** **** ****

<!-- MC-34153-->

* 當訂單清單跨越多個頁面時，顧客現在可以更改每個頁面顯示的訂單數。 以前，當購物者導航到最後頁面的訂單並嘗試更改每個頁面顯示的訂單數時，應用程式會顯示以下消息：`You have placed no orders`。 這是2.4.0的已知問題。

<!-- MC-35020-->

* 您現在可在實作第2級快取時將產品新增至類別。

<!-- MC-29755-->

* `X-Magento-Tags`標頭不再超過HTTP規格允許的大小。 先前，包含許多產品的類別頁面傳回`X-Magento-Tag`標題，導致503錯誤。

<!-- MC-34257-->

* 使用REST API建立出貨時，`sales_order_shipment_track_save_commit_after`現在會如預期觸發。

<!-- MC-33898-->

* 當`di compile`因不存在相依性而失敗時，應用程式現在會顯示資訊性錯誤訊息。 以前，顯示的訊息不會識別發生例外狀況的類別。

<!-- MC-32929-->

* Redis使用所有允許的記憶體時，應用程式不再擲回下列嚴重錯誤： `report.CRITICAL: OOM command not allowed when used memory > 'maxmemory'.`

<!-- MC-18021-->

* `Persistent`模組停用時，購物者現在可以將多個產品新增到購物車。 [GitHub-14486](https://github.com/magento/magento2/issues/14486)

### 一般修正

<!-- MC-36048-->

* 在管理員（**商店** > **屬性** > **產品**）上排序產品現在會顯示符合搜尋條件的所有產品。 以前，應用程式不顯示記錄，若要排序記錄，您必須瀏覽到搜尋結果的第一個頁面。

<!-- MC-36343-->

* 已移除`tracking.phtml`中URL周圍不必要的引號和逸出。

<!-- MC-35998-->

* 現在，當使用者嘗試存取靜態目錄下的非現有資源檔案，並啟用SCD OnDemand和生產模式時，`var/log/system.log`會顯示更準確的訊息。 應用程式現在會記錄 404 錯誤。 以前，應用程式記錄的消息與在開發人員模式下發生錯誤時記錄的消息相同。

<!-- ENGCOM-7286-->

* JavaScript縮製現在可以正常運作。 縮小文件解析程序不再將變數洩漏到全域範圍。 之前， `ctx`視窗下的 、`origNameToUrl`、 和`baseUrl`變數已洩露。 _Mateusz Krzeszowiak在提取要求[27622](https://github.com/magento/magento2/pull/27622)_&#x200B;中提交的修正。 [GitHub-28110](https://github.com/magento/magento2/issues/28110)

<!-- ENGCOM-7532-->

* 當您對阻止建立物件的錯誤進行偵錯時，應用程式現在會列印並記錄原始的例外訊息。 以前只會記錄訊息。 _Marvin Hinz在提取要求[26572](https://github.com/magento/magento2/pull/26572)_&#x200B;中提交的修正。 [GitHub-26550](https://github.com/magento/magento2/issues/26550)

<!-- ENGCOM-7577-->

* 已改善認可資料庫變更後的回呼執行。 先前，如果一個回呼失敗並出現例外狀況，則所有回呼都會失敗。 _Alok Patel在提取要求[27134](https://github.com/magento/magento2/pull/27134)_&#x200B;中提交的修正。 [GitHub-28167](https://github.com/magento/magento2/issues/28167)

<!-- ENGCOM-7447-->

* 未定義相依性之模組的Mixin不再擲回此錯誤： `TypeError: Cannot read property 'map' of null`。 _Mateusz Krzeszowiak在提取要求[27690](https://github.com/magento/magento2/pull/27690)_&#x200B;中提交的修正。 [GitHub-28340](https://github.com/magento/magento2/issues/28340)

<!-- ENGCOM-7299-->

* 儲存體Polyfill現在已載入並套用，但前提是`localStorage`或`sessionStorage`無法使用。 _Mateusz Krzeszowiak在提取要求[27619](https://github.com/magento/magento2/pull/27619)_&#x200B;中提交的修正。 [GitHub-28381](https://github.com/magento/magento2/issues/28381)

<!-- ENGCOM-7610-->

* 現在，當購物者從第二個或後續結果頁面變更每頁顯示的結果數量時，多頁店面訂單清單的行為與預期相同。 先前，當購物者變更&#x200B;**我的帳戶** > **我的訂單**&#x200B;清單中顯示的搜尋結果數目時，應用程式會顯示此錯誤： `You have placed no orders`。 _Vadim Malesh在提取要求[28417](https://github.com/magento/magento2/pull/28417)_&#x200B;中提交的修正。 [GitHub-28488](https://github.com/magento/magento2/issues/28488)

<!-- ENGCOM-7565-->

* 已棄用的`addWarning`方法已由安全性模組中的`addWarningMessage`方法取代。 _Kishorekumarkesavan在提取要求[28264](https://github.com/magento/magento2/pull/28264)_&#x200B;中提交的修正。 [GitHub-28308](https://github.com/magento/magento2/issues/28308)

<!-- ENGCOM-7588-->

* 使用`bin/magento`命令列命令產生的程式碼現在符合需求和編碼標準。 _Lukasz Bajsarowicz在提取要求[28351](https://github.com/magento/magento2/pull/28351)_&#x200B;中提交的修正。 [GitHub-28376](https://github.com/magento/magento2/issues/28376)

<!-- ENGCOM-7511-->

* 儲存具有`backend_type = static`的屬性時，不再移除`frontend_class`欄位的內容。 _Jiten-patel在提取要求[27369](https://github.com/magento/magento2/pull/27369)_&#x200B;中提交的修正。 [GitHub-27051](https://github.com/magento/magento2/issues/27051)

<!-- ENGCOM-7462-->

* 已從主題載入的檔案中移除不必要的程式碼和`responsive.js`。 _Mateusz Krzeszowiak在提取要求[27617](https://github.com/magento/magento2/pull/27617)_&#x200B;中提交的修正。 [GitHub-28811](https://github.com/magento/magento2/issues/28811)

<!-- ENGCOM-7856-->

* 已將驗證新增至Admin CAPTCHA設定頁面上的&#x200B;**符號數**&#x200B;欄位。 _Eden Duong在提取要求[29199](https://github.com/magento/magento2/pull/29199)_&#x200B;中提交的修正。 [GitHub-29198](https://github.com/magento/magento2/issues/29198)

<!-- ENGCOM-7999-->

* RSS摘要現在會正確載入。 以前，摘要不會第一次載入，不過在頁面重新整理時會如預期般載入。 _Vadim Malesh在提取要求[29455](https://github.com/magento/magento2/pull/29455)_&#x200B;中提交的修正。 [GitHub-25211](https://github.com/magento/magento2/issues/25211)

<!-- MC-35550-->

* 購物者重新登入時，過期的持續工作階段現在會如預期般更新。

<!-- MC-35230-->

* 已在&#x200B;**存放區** > **組態** > **進階** > **管理員**&#x200B;中設定密碼存留期。 先前，如果您按一下&#x200B;**忘記密碼？**&#x200B;當提示您重設密碼時，您可以略過密碼重設。

<!-- MC-34369-->

* 優惠券代碼現在只會套用至指定的產品。 之前，應用程式會將優惠券代碼套用至購物車中的所有產品。 [GitHub-28246](https://github.com/magento/magento2/issues/28246)

<!-- MC-35008-->

* 發生庫存或價格更新時，不再重新設置購物車有效期設置。 以前，當購物車設置為在 24 小時後過期，並且發生庫存更新或價格更新時，索引器會填充 `updated_at table`，這會重新設置到期時間。

<!-- MC-33313-->

* 當管理員將具有活動購物車的客戶分配給客戶群組時，應用程式不再引發致命錯誤。

<!-- ENGCOM-7834 -->

* 在運行鉻黃瀏覽器時，從產品頁面上的“開發人員工具&#x200B;**”>**“網络&#x200B;**”中選擇**&#x200B;工具欄選項不再初始化`toolbar.js`兩次。_修復由 Paweł Tylek 在 提取 請求 [28838](https://github.com/magento/magento2/pull/28838)_ 提交。 [GitHub-25934](https://github.com/magento/magento2/issues/25934)

<!-- ENGCOM-7420-->

* 應用程式現在將管理員用戶的 ACL 角色 ID 新增至產品類別樹狀結構高速緩存 ID。 這將限制範圍有限的管理員可以按預期看到的類別樹。 _Quangdo-Aligent 在 提取 請求 [27429](https://github.com/magento/magento2/pull/27429)_ 中提交的修復。 [GitHub-28306](https://github.com/magento/magento2/issues/28306)

### GraphQL

<!-- ENGCOM-7661 7662 7559 MC-35646 32345-->

* 購物者可以在結帳時選擇禮品贈言選項。 GraphQL 現在涵蓋不同類型的購物車物品的禮品贈言選項。 請參閱 [`setGiftOptionsOnCart` 突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/set-gift-options.html) 和 [`updateCartItems` 突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/update-cart-items.html)。 Oleh Usik在提取要求[28519](https://github.com/magento/magento2/pull/28105)、[27956](https://github.com/magento/magento2/pull/27956)、[28072](https://github.com/magento/magento2/pull/28072)、[28072](https://github.com/magento/magento2/pull/28072)中提交的_Fix。 [GitHub-28519](https://github.com/magento/magento2/issues/28519)

<!-- ENGCOM-7508 -->

* 客戶和來賓可以撰寫產品評論。 客戶也可以擷取其產品檢閱記錄。 請參閱[建立產品評論](https://developer.adobe.com/commerce/webapi/graphql/mutations/create-product-review.html)和[productReviewRatingsMetadata查詢](https://developer.adobe.com/commerce/webapi/graphql/queries/product-review-ratings-metadata.html)，以取得擷取評論基礎結構相關資訊的資訊。 _Eduard Chitoraga在提取要求[27882](https://github.com/magento/magento2/pull/27882)_&#x200B;中提交的修正。 [GitHub-28523](https://github.com/magento/magento2/issues/28523)

<!-- ENGCOM-7968 -->

* [`addProductsToCart`突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/add-products-to-cart.html)可讓您將任何型別的產品加入使用中的購物車。 我們建議使用此突變，而非單一用途的突變，例如`addSimpleProductsToCart`。 _Yaroslav Rogoza在提取要求[27914](https://github.com/magento/magento2/pull/27914)_&#x200B;中提交的修正。 [GitHub-28524](https://github.com/magento/magento2/issues/28524)

<!-- MC-34187-->

* 新的`availableStores`查詢會傳回相同網站下多個可用存放區的組態屬性清單（根據目前存放區）。 它不會公開網站清單。 請參閱[`availableStores`查詢](https://developer.adobe.com/commerce/webapi/graphql/queries/available-stores.html)。 _Dmitriy Gallyamov在提取要求[28794](https://github.com/magento/magento2/pull/28794)_&#x200B;中提交的修正。 [GitHub-28569](https://github.com/magento/magento2/issues/28569)

<!-- ENGCOM-7512 -->

* GraphQL現在僅使用授權權杖來擷取使用者型別及其ID。 之前，GraphQL在授權權杖為空白時使用作用中客戶的Cookie來擷取此資訊。 _Alexander Taranovsky在提取要求[27373](https://github.com/magento/magento2/pull/27373)_&#x200B;中提交的修正。 [GitHub-28040](https://github.com/magento/magento2/issues/28040)

<!-- ENGCOM-7839 32949-->

* 我們已新增[`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/mutations/create-customer-v2.html)和[`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/mutations/update-customer-v2.html)變動來管理客戶帳戶。 這些新的變動需要與`createCustomer`和`updateCustomer`變動不同的輸入物件。 若要變更客戶的電子郵件地址，請使用新的[`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/mutations/update-customer-email.html)變異。 _修復由 Michał Derlatka 在 提取 請求 [28888](https://github.com/magento/magento2/pull/28888)_ 提交。 [GitHub-28570](https://github.com/magento/magento2/issues/28570)

<!-- ENGCOM-7750 -->

* `updateCustomer`突變不再允許您在`gender`引數中設定無效的`INT`值。 _Alexander Taranovsky在提取要求[28487](https://github.com/magento/magento2/pull/28487)_&#x200B;中提交的修正。 [GitHub-28481](https://github.com/magento/magento2/issues/28481)

<!-- ENGCOM-7663 -->

* 您可以使用`subscribeEmailToNewsletter`突變來讓客戶訂閱電子報。 請參閱[`subscribeEmailToNewsletter`突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/subscribe-email-to-newsletter.html)。 _Alexander Taranovsky在提取要求[27586](https://github.com/magento/magento2/pull/27586)_&#x200B;中提交的修正。 [GitHub-27337](https://github.com/magento/magento2/issues/27337)

<!-- ENGCOM-7216 -->

* 已移除`setShippingMethodsOnCart`突變解析程式中的多餘邏輯。 _Alexander Taranovsky在提取要求[27349](https://github.com/magento/magento2/pull/27349)_&#x200B;中提交的修正。 [GitHub-28262](https://github.com/magento/magento2/issues/28262)

<!-- ENGCOM-7638 -->

* 已新增與`sendEmailToFriend`突變相關的`Please provide Email of sender`錯誤的測試涵蓋範圍。 _Alexander Taranovsky在提取要求[28034](https://github.com/magento/magento2/pull/28034)_&#x200B;中提交的修正。 [GitHub-28138](https://github.com/magento/magento2/issues/28138)

<!-- ENGCOM-7743 34485-->

* `products`查詢現在會如預期傳回預設商店檢視的產品屬性選項標籤。 之前，此查詢會傳回為管理員設定的產品屬性選項標籤。 _Dmitriy Gallyamov在提取要求[28647](https://github.com/magento/magento2/pull/28647)_&#x200B;中提交的修正。 [GitHub-28568](https://github.com/magento/magento2/issues/28568)

<!-- ENGCOM-7743 -->

* 自訂屬性彙總現在會傳回存放區特有的選項值。 _Dmitriy Gallyamov在提取要求[28647](https://github.com/magento/magento2/pull/28647)_&#x200B;中提交的修正。 [GitHub-28572](https://github.com/magento/magento2/issues/28572)

<!-- ENGCOM-7707 -->

* 產品彙總中傳回的價格間隔現在只能是數字（不允許萬用字元）。 _Dmitriy Gallyamov在提取要求[28745](https://github.com/magento/magento2/pull/28745)_&#x200B;中提交的修正。 [GitHub-28628](https://github.com/magento/magento2/issues/28628)

<!-- ENGCOM-7729 -->

* 使用片段時，`categoryList`查詢現在會傳回正確的回應。 _Ulzii在提取要求[28710](https://github.com/magento/magento2/pull/28710)_&#x200B;中提交的修正。 [GitHub-28584](https://github.com/magento/magento2/issues/28584)

<!-- ENGCOM-7732 7733-->

* GraphQL產品搜尋現在會考量已設定的類別許可權。 之前，產品搜尋已忽略&#x200B;**啟用**&#x200B;設定（**商店** > **設定** > **目錄** > **目錄** > **類別許可權**）。 _修正由Petkovski Marjan在提取要求[28757](https://github.com/magento/magento2/pull/28757)中提交的修正，並在私人存放庫`partners-magento2ee`_&#x200B;中提交提取要求271。 [GitHub-28563](https://github.com/magento/magento2/issues/28563)

<!-- MC-31084-->

* 當購物車中的其他專案無存貨時，您現在可以使用`addSimpleProductToCart`將產品新增到購物車中。 之前，應用程式傳回此錯誤： `Some of the products are out of stock`。 [GitHub-26683](https://github.com/magento/magento2/issues/26683)

* 預設GraphQL `Category`方法現在會依類別位置依預期排序。 _Derrik Nyomo在提取要求[29301](https://github.com/magento/magento2/pull/29301)_&#x200B;中提交的修正。 [GitHub-104](https://github.com/magento/catalog-storefront/issues/104)

* 新增對Magento Open Source中願望清單的支援。 您可以[將專案](https://developer.adobe.com/commerce/webapi/graphql/mutations/add-products-to-wishlist.html)新增至，[更新專案](https://developer.adobe.com/commerce/webapi/graphql/mutations/update-products-in-wishlist.html)，以及[從希望清單移除專案](https://developer.adobe.com/commerce/webapi/graphql/mutations/remove-products-from-wishlist.html)。 _Eduard Chitoraga在提取要求[28205](https://github.com/magento/magento2/pull/28205)_&#x200B;中提交的修正。 [GitHub-28551](https://github.com/magento/magento2/issues/28551)

* 我們已新增[`createCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/mutations/create-customer-v2.html)和[`updateCustomerV2`](https://developer.adobe.com/commerce/webapi/graphql/mutations/update-customer-v2.html)變動來管理客戶帳戶。 這些新的變動需要與`createCustomer`和`updateCustomer`變動不同的輸入物件。 若要變更客戶的電子郵件地址，請使用新的[`updateCustomerEmail`](https://developer.adobe.com/commerce/webapi/graphql/mutations/update-customer-email.html)變異。

* 新增[Payflow Pro Vault](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/payflow-pro-vault.html)付款方式的GraphQL Vault支援。 _Oleh Usik在提取要求[28821](https://github.com/magento/magento2/pull/28821)_&#x200B;中提交的修正。 [GitHub-28520](https://github.com/magento/magento2/issues/28520)

* 已更新GraphQL [`storeConfig`查詢](https://developer.adobe.com/commerce/webapi/graphql/queries/store-config.html)以包含新的客戶組態設定。 _Oleh Usik在提取要求[27876](https://github.com/magento/magento2/pull/27876)_&#x200B;中提交的修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 已新增[`resetPassword`突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/reset-password.html)。 _Oleh Usik在提取要求[27876](https://github.com/magento/magento2/pull/27876)_&#x200B;中提交的修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 已新增[`resetPassword`突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/reset-password.html)。 _Oleh Usik在提取要求[27876](https://github.com/magento/magento2/pull/27876)_&#x200B;中提交的修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 新增[`requestPasswordResetEmail`突變](https://developer.adobe.com/commerce/webapi/graphql/mutations/request-password-reset-email.html)，這會觸發所提供電子郵件地址的密碼重設電子郵件。 _Oleh Usik在提取要求[27876](https://github.com/magento/magento2/pull/27876)_&#x200B;中提交的修正。 [GitHub-28521](https://github.com/magento/magento2/issues/28521)

* 在[Klarna的付款方式](https://developer.adobe.com/commerce/webapi/graphql/payment-methods/klarna.html)和[`createKlarnaPaymentsSession`](https://developer.adobe.com/commerce/webapi/graphql/mutations/create-klarna-payments-session.html)中新增或更新有關Klarna GraphQL的主題

### 影像

<!-- ENGCOM-7691-->

* 改善縮圖影像的HTML標籤。 _Tu Nguyen在提取要求[28642](https://github.com/magento/magento2/pull/28642)_&#x200B;中提交的修正。 [GitHub-29468](https://github.com/magento/magento2/issues/29468)

### 匯入/匯出

<!-- MC-35479-->

* `error_report.csv`檔案現在會下載包含內容的檔案，而且可以如預期在`var/import_history/`目錄中取得。 以前，此檔案不會在匯入後產生。

<!-- ENGCOM-7616-->

* 使用CSV檔案匯入產品現在會如預期產生`error_report.csv`檔案。 以前，應用程式會生成檔，但在導入完成後將其刪除。 _Vadim Malesh 在 提取 請求 [28460](https://github.com/magento/magento2/pull/28460)_ 中提交的修復。 [GitHub-28420](https://github.com/magento/magento2/issues/28420)

<!-- ENGCOM-7673-->

* 刪除了整個代碼庫中的冗餘類導入。 _修復由 Oleh Usik 在 提取 請求 [28696](https://github.com/magento/magento2/pull/28696)_ 中提交。 [GitHub-29012](https://github.com/magento/magento2/issues/29012)

<!-- MC-33730-->

* 該應用程式現在已成功導入包含未定義區域的國家/地區的區域的客戶地址。 之前，應用程式擲回此錯誤： `Please enter a valid region`。

<!-- MC-33277-->

* 現在，當商家在排程新匯出時選取實體型別時，應用程式會載入正確的實體屬性集。

<!-- MC-32956-->

* 當管理員在管理員中建立產品並將其指派給類別時，`catalog_category_product`表格中產品的位置現在會如預期般更新。 過去，新產品的位置一律會指派為0值。

<!-- MC-34939-->

* 客戶資料現在已成功從管理員匯出，匯出資料網格會如預期顯示客戶資料。 先前，在匯出期間發生與記憶體配置相關的錯誤。

<!-- MC-34657-->

* 匯入的CSV檔案現在會如預期擷取相關的產品資訊。 先前，在首次匯入CSV檔案時，相關的產品資訊無法一致上傳。

<!-- MC-37424-->

* 已移除`AdvancedPricing.php`中未使用的建構引數。 [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### 索引

<!-- ENGCOM-7073-->

* 執行`PURGE`時，`Magento_CacheInvalidate`現在可以正確處理大型標籤模式。 `sendPurgeRequest`已重構為處理標籤陣列，而不是要求呼叫者使用`implode()`。 _Matthew O&#39;Loughlin在提取要求[中提交的修正26256](https://github.com/magento/magento2/pull/26256)_。 [GitHub-26255](https://github.com/magento/magento2/issues/26255)

<!-- MC-30568-->

* 重新索引後執行`bin/magento indexer:status`之後，共用索引子現在會顯示&#x200B;**有效**&#x200B;的狀態。 先前，共用索引子在完整重新索引後有&#x200B;**無效的**&#x200B;狀態。

### 基礎架構

<!-- MC-37243-->

* 在執行PHP 7.4.9的部署中載入目錄和產品頁面時不再發生問題。 先前，當您嘗試載入目錄和產品頁面時，應用程式擲回這個錯誤： `There has been an error processing your request. Exception printing is disabled by default for security reasons`。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-7994-->

* 所有在配置以生產模式轉譯時發生的例外狀況現在記錄在例外狀況記錄檔(`var/report`)中。 以前，應用程式會在系統記錄中將這些訊息記錄為嚴重問題。

<!-- ENGCOM-7154-->

* 由於`ipcre.backtrack_limi`t和`pcre.recursion_limit`增加到大約1000000，規則運算式現在可正確用於大型頁面。 _Mateusz Krzeszowiak在提取要求[27270](https://github.com/magento/magento2/pull/27270)_&#x200B;中提交的修正。 [GitHub-26026](https://github.com/magento/magento2/issues/26026)

<!-- ENGCOM-7483-->

* 已改善攔截器產生機制。 已從攔截器移除`} else {`個陳述式，且`array_map`已取代`foreach`。 _Lukasz Bajsarowicz在提取要求[27902](https://github.com/magento/magento2/pull/27902)_&#x200B;中提交的修正。 [GitHub-28383](https://github.com/magento/magento2/issues/28383)

<!-- ENGCOM-7651-->

* 整個類別(`app/code/Magento/Sales/Model/Order/Pdf/Items/Invoice/DefaultInvoice.php`)的陣列建立現在是一致的。 _Nathan de Graaf在提取要求[28515](https://github.com/magento/magento2/pull/28515)_&#x200B;中提交的修正。 [GitHub-28795](https://github.com/magento/magento2/issues/28795)

<!-- ENGCOM-7484-->

* 外掛程式已移出框架，以遵循框架名稱空間中禁止外掛程式的最佳做法。 _Lukasz Bajsarowicz在提取要求[27965](https://github.com/magento/magento2/pull/27965)_&#x200B;中提交的修正。 [GitHub-27962](https://github.com/magento/magento2/issues/27962)

<!-- ENGCOM-7778-->

* 您現在可以使用新的`UrlFilterApplier`元件，透過GETURL引數在產品、`cms_page`和`cms_block`網格上套用篩選器。 _Gabriel da Gama在提取要求[28932](https://github.com/magento/magento2/pull/28932)_&#x200B;中提交的修正。 [GitHub-1501](https://github.com/magento/adobe-stock-integration/issues/1501)

<!-- ENGCOM-7713-->

* 產生攔截器時，應用程式不再擲回`Undefined class constant`錯誤。 _Vova Yatsyuk在提取要求[28797](https://github.com/magento/magento2/pull/28797)_&#x200B;中提交的修正。 [GitHub-28981](https://github.com/magento/magento2/issues/28981)

<!-- ENGCOM-7523-->

* 現在，當您使用已使用的名稱儲存整合時，應用程式擲回整合例外狀況時，表單資料會持續存在。 _Aditya Yadav在提取要求[26660](https://github.com/magento/magento2/pull/26660)_&#x200B;中提交的修正。 [GitHub-28143](https://github.com/magento/magento2/issues/28143)

<!-- ENGCOM-7756-->

* 應用程式不再將`X-Forwarded-For`標頭截斷為32個字元。 _Ihor Sviziev在提取要求[27221](https://github.com/magento/magento2/pull/27221)_&#x200B;中提交的修正。 [GitHub-28693](https://github.com/magento/magento2/issues/28693)

<!-- ENGCOM-7820-->

* 現在，使用自訂管理網域時，檢查重新導向是否為內部重新導向的邏輯可在管理中正常運作。 以前，此邏輯的問題會導致許多管理員重新導向到預設存放區的首頁。 _Vadim Malesh在提取要求[29066](https://github.com/magento/magento2/pull/29066)_&#x200B;中提交的修正。 [GitHub-28943](https://github.com/magento/magento2/issues/28943)

<!-- ENGCOM-7758-->

* 已消除`styles-old.less`檔案的問題，而且Linting不再識別錯誤。 _Tu Nguyen在提取要求[28895](https://github.com/magento/magento2/pull/28895)_&#x200B;中提交的修正。 [GitHub-24004](https://github.com/magento/magento2/issues/24004)

<!-- ENGCOM-7781-->

* `NonComposerComponentRegistration.php`已重構。 _Vitaliy Ryaboy在提取要求[28975](https://github.com/magento/magento2/pull/28975)_&#x200B;中提交的修正。 [GitHub-29308](https://github.com/magento/magento2/issues/29308)

<!-- ENGCOM-7926-->

* `ResourceConnection.php`已重構以改善類別可讀性。 _Lukasz Bajsarowicz在提取要求[29341](https://github.com/magento/magento2/pull/29341)_&#x200B;中提交的修正。 [GitHub-29389](https://github.com/magento/magento2/issues/29389)

<!-- ENGCOM-7910-->

* 內建Web伺服器的README檔案已更新為包含所有Elasticsearch引數。 _Yevhenii Dumskyi在提取要求[29300](https://github.com/magento/magento2/pull/29300)_&#x200B;中提交的修正。 [GitHub-29299](https://github.com/magento/magento2/issues/29299)

<!-- ENGCOM-7814-->

* `Magento\CmsUrlRewrite\Plugin\Cms\Model\Store\View::aftersSave`外掛程式現在會如預期傳回值。 之前，此外掛程式不會傳回值，因此儲存存放區檢視會產生錯誤。 _Pieter Hoste在提取要求[29035](https://github.com/magento/magento2/pull/29035)_&#x200B;中提交的修正。 [GitHub-29034](https://github.com/magento/magento2/issues/29034)

<!-- ENGCOM-7566-->

* 新增下列對`DataObject`的魔術方法的支援：

   * 新的延伸功能可支援`get/set/has/uns`個魔術方法（使用`__call`）
   * 支援SessionManager，可將所有呼叫轉送至DataObject容器
   * 擴充功能的測試涵蓋範圍
   * 已更新篩選錯誤檢查的測試
   * 將PHPStan檢查層級從0增加到1。 _Oleksandr Kravchuk在提取要求[27905](https://github.com/magento/magento2/pull/27905)_&#x200B;中提交的修正。 [GitHub-28303](https://github.com/magento/magento2/issues/28303)

<!-- ENGCOM-7906-->

* `ScopeConfigInterface`現在可以超過字串。 `magentoConfigFixture`對字串的限制只限於先前提取要求的意外結果，且已還原。 _由Kristof， Fooman在提取要求[中提交的修正29305](https://github.com/magento/magento2/pull/29305)_。 [GitHub-29345](https://github.com/magento/magento2/issues/29345)

<!-- ENGCOM-8000-->

* 由於傳送不正確的引數給`Phrase`建構函式，`convertConfigTimeToUtc`方法不再擲回嚴重錯誤。 _Kos Rafal在提取要求[中提交的修正29483](https://github.com/magento/magento2/pull/29483)_。 [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7962 -->

* 當`Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getCondition`和`Magento\Backend\Block\Widget\Grid\Column\Filter\Price::getValue()`傳回索引包含`from`或`to`字串資料的陣列時，價格篩選器現在可在網格資料上如預期運作。 之前，應用程式擲回此錯誤： `Notice: A non well formed numeric value encountered in vendor/magento/module-backend/Block/Widget/Grid/Column/Filter/Price.php on line 197`。 _Nikita Sarychev在提取要求[29214](https://github.com/magento/magento2/pull/29214)_&#x200B;中提交的修正。 [GitHub-29213](https://github.com/magento/magento2/issues/29213)

<!-- ENGCOM-7911 -->

* 新增擴充點以支援將HTML新增至類別頁面。 這可修正先前提取請求所導致的錯誤。 _iGerchak在提取要求[中提交的修正29291](https://github.com/magento/magento2/pull/29291)_。 [GitHub-29286](https://github.com/magento/magento2/issues/29286)

### 分層導覽

<!-- MC-25043-->

* 階層式導覽側邊欄現在會顯示具有兩個選項(**yes**/**no**)和相符產品計數的Boolean屬性。 以前，分層導覽在使用 Elasticsearch 的部署中不會為布爾屬性返回 **no** 選項。

<!-- ENGCOM-7493-->

* 色票階層導覽篩選器現在與整個Magento Open Source中使用的標準篩選器一致。 _Bartlomiej Szubert在提取要求[28015](https://github.com/magento/magento2/pull/28015)_&#x200B;中提交的修正。 [GitHub-28011](https://github.com/magento/magento2/issues/28011)

### 記錄

<!-- ENGCOM-7692-->

* 現在當部署僅處於開發人員模式時，會記錄所有中斷的參考錯誤。 之前，在生產模式中也會為部署記錄一個錯誤，這會使錯誤記錄膨脹。 _Bartlomiej Szubert在提取要求[28735](https://github.com/magento/magento2/pull/28735)_&#x200B;中提交的修正。 [GitHub-26504](https://github.com/magento/magento2/issues/26504)

### 媒體集

<!-- ENGCOM-8014-->

* 媒體集組態UI (管理員&#x200B;**商店** > **組態** >   **進階** > **系統** )已重新組織。 _由Shankar Konar在提取要求[29433](https://github.com/magento/magento2/pull/29433)_&#x200B;中提交的修正。 [GitHub-28011](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-7972 -->

* 新增測試，以涵蓋媒體集中影像的&#x200B;**用於**&#x200B;連結。 _Nazar Klovanych在提取要求[29392](https://github.com/magento/magento2/pull/29392)_&#x200B;中提交的修正。 [GitHub-1969](https://github.com/magento/adobe-stock-integration/issues/1693)

### MFTF

<!-- ENGCOM-7963 -->

* `AdminSubmitAdvancedInventoryFormActionGroup`、`AdminClickOnAdvancedInventoryLinkActionGroup`和  根據最佳實務，測試中使用`AdminSetStockStatusConfigActionGroup`動作群組。 _Oleh USIA在提取要求[29386](https://github.com/magento/magento2/pull/29386)_&#x200B;中提交的修正。 [GitHub-29420](https://github.com/magento/magento2/issues/29420)

<!-- ENGCOM-7964 -->

* `SearchProductGridByKeywordActionGroup`現在用於產品格線中的搜尋。 _Oleh Usik在提取要求[29385](https://github.com/magento/magento2/pull/29385)_&#x200B;中提交的修正。 [GitHub-29434](https://github.com/magento/magento2/issues/29434)

<!-- ENGCOM-7915 -->

* `AdminCategoriesClickDoneButtonOnPopupActionGroup`現在用於在[搜尋類別]快顯視窗中按一下&#x200B;**完成**。 _Oleh Usik在提取要求[28989](https://github.com/magento/magento2/pull/28989)_&#x200B;中提交的修正。 [GitHub-29380](https://github.com/magento/magento2/issues/29380)

<!-- ENGCOM-7529 -->

* `LoginToStorefrontActionGroup` 現在用來取代用於前端客戶登入動作商店序列。 _修復由 Sathish Subramanian 在 提取 請求 [28113](https://github.com/magento/magento2/pull/28113)_ 中提交。 [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7590 -->

* `AdminUpdateCustomURLRewritesPermanentTest` 已重構以滿足 MFTF 最佳做法。 _修復由 Kate Kyzyma 在 提取 請求 [28361](https://github.com/magento/magento2/pull/28361)_ 中提交。 [GitHub-28393](https://github.com/magento/magento2/issues/28393)

<!-- ENGCOM-7343 -->

* 已變更測試名稱以符合MFTF慣例。 _修復由 Evgeny Levinsky 在 提取 請求 [27839](https://github.com/magento/magento2/pull/27839)_ 中提交。 [GitHub-28305](https://github.com/magento/magento2/issues/28305)

#### 新動作群組

<!-- ENGCOM-7991 -->

* `StorefrontCheckoutClickNextButtonActionGroup`_修復由 Oleh Usik 在 提取 請求 [29472](https://github.com/magento/magento2/pull/29472)_ 中提交。[GitHub-29539](https://github.com/magento/magento2/issues/29539)

<!-- ENGCOM-7857 -->

* `AdminProductFormSaveActionGroup`_修復由 Oleh Usik 在 提取 請求 [29142](https://github.com/magento/magento2/pull/29142)_ 中提交。 [GitHub-29292](https://github.com/magento/magento2/issues/29292)

<!-- ENGCOM-7928 -->

* `AdminSaveCategoryActionGroup`_修復由 Oleh Usik 在 提取 請求 [28993](https://github.com/magento/magento2/pull/28993)_ 中提交。[GitHub-29388](https://github.com/magento/magento2/issues/29388)

<!-- ENGCOM-7790 -->

* `AdminProductGridSectionClickFirstRowActionGroup` _Oleh Usik在提取要求[中提交的修正](https://github.com/magento/magento2/pull/29000)290004}。_[GitHub-29295](https://github.com/magento/magento2/issues/29295)

<!-- ENGCOM-7591 -->

* `AdminProductFormCategoryExistInCategoryListActionGroup`與`AdminProductFormCategoryNotExistInCategoryListActionGroup` _Alexander Steshuk在提取要求[28287](https://github.com/magento/magento2/pull/28287)_&#x200B;中提交的修正。 [GitHub-28392](https://github.com/magento/magento2/issues/28392)

<!-- ENGCOM-7867 -->

* `AdminExpandCategoryTreeActionGroup` _Oleh Usik在提取要求[中提交的修正](https://github.com/magento/magento2/pull/29133)291334}。_[GitHub-29289](https://github.com/magento/magento2/issues/29289)

<!-- ENGCOM-7881 -->

* `AdminTaxRateGridOpenPageActionGroup` _Oleh Usik在提取要求[中提交的修正](https://github.com/magento/magento2/pull/29007)290074}。_[GitHub-29281](https://github.com/magento/magento2/issues/29281)

<!-- ENGCOM-7868 -->

* `AdminNavigateNewCustomerActionGroup`_修復由 Oleh Usik 在 提取 請求 [29134](https://github.com/magento/magento2/pull/29134)_ 中提交。[GitHub-29287](https://github.com/magento/magento2/issues/29287)

#### 新測試

<!-- ENGCOM-7600 -->

* 新增以管理員用戶身分刪除 CMS 頁面的測試。 _Dmitry Tsymbal在提取要求[28112](https://github.com/magento/magento2/pull/28112)_&#x200B;中提交的修正。 [GitHub-28202](https://github.com/magento/magento2/issues/28202)

* 已新增與無效電子郵件地址共用客戶願望清單的`StorefrontShareCustomerWishlistActionGroup`測試。 已重構希望清單共用的現有測試(`StorefrontShareWishlistEntityTest`)。 `StorefrontCustomerShareWishlistActionGroup` 已遭取代。

<!-- ENGCOM-7682 -->

* 新增測試，以檢查&#x200B;**僅X剩餘Threshold**&#x200B;組態設定的實作。 _Oleh Usik在提取要求[27549](https://github.com/magento/magento2/pull/27549)_&#x200B;中提交的修正。 [GitHub-28755](https://github.com/magento/magento2/issues/28755)

### 電子報

<!-- MC-34714-->

* 使用`EXCEL XML`選項匯出Newsletter訂閱者清單現在會如預期匯出所有列。 先前，匯出的資料僅包含頁面分頁值，不包含所有列。

<!-- ENGCOM-7522-->

* Newsletter訂閱電子郵件現在會使用與其他與Newsletter相關電子郵件相同的HTML標籤。 _Pawel Tylek在提取要求[27357](https://github.com/magento/magento2/pull/27357)_&#x200B;中提交的修正。 [GitHub-28165](https://github.com/magento/magento2/issues/28165)

<!-- ENGCOM-7788-->

* 新增以管理員使用者身分刪除Newsletter訂閱者的測試。 _Dmitry Tsymbal在提取要求[28972](https://github.com/magento/magento2/pull/28972)_&#x200B;中提交的修正。 [GitHub-29032](https://github.com/magento/magento2/issues/29032)

<!-- ENGCOM-7739-->

* 針對在設定陳述式中有不允許選項的來賓，新增電子報訂閱測試。 此測試會取代已棄用的`VerifyRegistredLinkDisplayedForGuestSubscriptionNoTest`和`StorefrontCreateNewSubscriberActionGroup`。 _Dmitry Tsymbal在提取要求[28872](https://github.com/magento/magento2/pull/28872)_&#x200B;中提交的修正。 [GitHub-29039](https://github.com/magento/magento2/issues/29039)

### 訂購

<!-- ENGCOM-7858-->

* `GetAssetIdByContentFieldInterface`及其在`MediaContent`模組上的實作現在允許Adobe Stock整合延伸`MediaGallery`篩選功能。 _Gabriel da Gama在提取要求[29058](https://github.com/magento/magento2/pull/29058)_&#x200B;中提交的修正。 [GitHub-1464](https://github.com/magento/magento2/issues/1464)

<!-- ENGCOM-7885-->

* 新建立客戶的`CustomerAddressId`值現在會在引號中驗證。 _Andrii Kalinich在提取要求[29139](https://github.com/magento/magento2/pull/29139)_&#x200B;中提交的修正。 [GitHub-28793](https://github.com/magento/magento2/issues/28793)

<!-- ENGCOM-7798-->

* 總金額為零的銷退折讓單的訂單狀態為`Closed`。 之前，應用程式將其訂單狀態回報為`Complete`。 _Andrii Kalinich在提取要求[29023](https://github.com/magento/magento2/pull/29023)_&#x200B;中提交的修正。 [GitHub-22762](https://github.com/magento/magento2/issues/22762)

### 付款方法

<!-- MC-34363-->

* 應用程式現在會顯示訊息，在您按一下[管理員訂單]的[提交] **時，會提示您輸入必要的信用卡資料，而不輸入有效的付款資訊。**&#x200B;先前，當付款輸入欄位無效且頁面變成非使用中時，Braintree卡驗證器沒有擲回錯誤。

<!-- MC-33494-->

* 您現在可以變更從Admin針對帳戶具有已儲存信用卡(Braintree)的客戶所建立之訂單的送貨方式。 先前，當您選取不同的送貨方式時，系統並未選取儲存的卡片，且應用程式並未下訂單。

#### PayPal

<!-- MC-33879-->

* 結帳工作流程的「訂單稽核」頁面現在會顯示PayPal的正確出貨金額，此金額是透過結帳期間已變更出貨方式的Braintree訂單計算得出的。 以前，當客戶在結帳工作流程的「PayPal訂單稽核」頁面上變更送貨方法時，應用程式未使用正確的方法更新訂單總計。

<!-- MC-34152-->

* 商戶現在可以成功取消使用PayPal授權的訂單。 之前，應用程式未取消訂單，且顯示這個錯誤： `Declined: 10601-Authorization has expired`。

<!-- MC-33330-->

* 當您先完成另一張訂單後，關閉PayPal付款快顯視窗來取消訂單時，應用模組不會再清空您的購物車。

### 效能

* 三個新的組態設定支援減少消費者佇列CPU耗用量。 這些選擇性引數可加強對使用者的控制，並節省伺服器資源。 請參閱[設定訊息佇列](https://developer.adobe.com/commerce/php/development/components/message-queues/configuration/)以取得`maxIdleTime`、`sleep`和`onlySpawnWhenMessageAvailable`引數的說明。

<!-- MC-31617-->

* 外掛程式清單設定現在會在`di:compile`命令執行期間產生。 此設定資訊會根據範圍寫入產生的中繼資料資料夾。 以前，此資訊儲存在快取中。 由此帶來的效能改善包括：

   * 網路快取大小已減少
   * 許多案例的執行時間已得到改善。

<!-- ENGCOM-7290-->

* 應用程式現在會隨選載入適當的滑桿Widget，進而改善頁面載入情形。 觸控滑桿Widget自訂功能已移至另一個檔案，因此僅能載入相容裝置上。 現在，只有當頁面上實際使用範圍繫結時，才會載入適當的滑桿Widget型別。 _Mateusz Krzeszowiak在提取要求[27616](https://github.com/magento/magento2/pull/27616)_&#x200B;中提交的修正。 [GitHub-28807](https://github.com/magento/magento2/issues/28807)

<!-- MC-33107-->

* 已改善多筆同時訂購的結帳效能。

<!-- MC-25062-->

* 當匯入處理執行大量插入且重新索引處理同時從選取執行大量插入時，不再發生死結。 以前，應用程式顯示這個錯誤： `PDOException: SQLSTATE[40001]: Serialization failure: 1213 Deadlock found when trying to get lock`。 [GitHub-8933](https://github.com/magento/magento2/issues/8933)

### 評論

<!-- MC-33405-->

* `entity_pk_value-entity_type-store_id`的唯一索引鍵已新增至`review_entity_summary`資料表，以防止為相同的產品ID (`entity_pk_value`)建立重複資料列。 以前，由於缺少唯一鍵，相同產品 ID 會導致重複行和 SQL 錯誤。

### 銷售

<!-- MC-35675-->

* 開立需要零付款的訂單商業發票後，應用模組不再指定`Complete`狀態。

<!-- MC-35888-->

* REST API產生的「新出貨」電子郵件現在包含與從「管理員」手動建立的出貨相同的出貨和客戶資訊。 以往，此電子郵件不包含客戶名稱、追蹤資訊、訂購的產品和其他訂單資訊。

<!-- MC-35837-->

* 從管理員載入或自訂電子郵件時，來賓使用者名稱現在會如預期顯示在發票和出貨相關電子郵件中。

<!-- MC-35707-->

* PDF 發票現在已翻譯成下訂單的商店視圖的語言。 以前，PDF 發票以管理員的語言翻譯。

<!-- MC-35858-->

* 您現在可以按預期從貸項通知單頁面發放退款。 [GitHub-29014](https://github.com/magento/magento2/issues/29014)

<!-- MC-35353-->

* 顯示在店面訂單頁面上的本地化區域名稱現在可以正確翻譯。 以前，除非在管理中編輯區域名稱，否則不會根據指定的地區設置。

<!-- MC-35633-->

* 通過POST `/rest/V1/shipment` 端點創建的貨件現在可以正確更新訂單。 之前，應用程式已建立出貨，但出貨狀態仍維持在處理狀態。

<!-- ENGCOM-7639 -->

* 銷退折讓單現在會顯示從訂單所在商店範圍衍生的付款方式。 先前，銷退折讓單會顯示預設存放區範圍所定義的名稱。 _Ledian Hymetlari在提取要求[27582](https://github.com/magento/magento2/pull/27582)_&#x200B;中提交的修正。 [GitHub-27570](https://github.com/magento/magento2/issues/27570)

### 搜尋 {#search-heading}

<!-- MC-31304-->

* 您現在可以使用QuickSearch，依屬性從管理員客戶檢視中搜尋產品。 之前，目錄搜尋結果頁面上發生例外狀況。

<!-- MC-32518-->

* 新增產品屬性後，應用程式現在會依預期在類別頁面上顯示可設定的產品。

<!-- MC-33952-->

* Elasticsearch結果現在包含每個存放區檢視屬性選項的正確值。 如果`Dropdown`或`Multiple Select`屬性在非預設存放區檢視中的選項值與在預設存放區檢視中的選項值不同，Elasticsearch現在會編制該值的索引，或在結果中傳回具有該值的產品。 之前，Elasticsearch不會索引該值，也不會在結果中傳回具有該值的產品。

<!-- MC-35013-->

* 透過SKU搜尋現在可在具有Elasticsearch的進階搜尋中按預期運作。 先前，當您嘗試依SKU搜尋時，應用程式會顯示此錯誤訊息： `We can't find any items matching these search criteria. Modify your search`。

<!-- ENGCOM-7222-->

* 進階搜尋不再讓購物者篩選負價格。 _Rohan Hapani在提取要求[27359](https://github.com/magento/magento2/pull/27359)_&#x200B;中提交的修正。 [GitHub-27358](https://github.com/magento/magento2/issues/27358)

<!-- ENGCOM-7917-->

* 範圍值現在會在「新增同義字群組」表單上按預期重設。 _Sathish Subramanian在提取要求[中提交的修正29206](https://github.com/magento/magento2/pull/29206)_。 [GitHub-28947](https://github.com/magento/magento2/issues/28947)

### 送貨

<!-- MC-34734-->

* 升級後，應用程式現在會正確計算出貨表格費率。 以前，運費表費率是根據排除了VAT的淨價來計算。

<!-- MC-33737-->

* 對於將FedEx指定為出貨方式的訂單，應用程式現在會在結帳工作流程中以正確貨幣顯示出貨費率。

<!-- MC-33267-->

* UPS所出貨之訂單的出貨標籤的多頁PDF現在會顯示正確的計數。

<!-- MC-35514-->

* 建立套件頁面的JavaScript元件問題已解決。 之前，應用程式未在此頁面上顯示&#x200B;**建立送貨標籤**&#x200B;核取方塊，而且您無法建立現有訂單的送貨標籤。

### Sitemap

<!-- ENGCOM-7924-->

* `robots.txt`中的Sitemap現在為商店專用。 _Vadim Malesh在提取要求[29331](https://github.com/magento/magento2/pull/29331)_&#x200B;中提交的修正。 [GitHub-28901](https://github.com/magento/magento2/issues/28901)

<!-- MC-34617-->

* 已正確逸出`sitemap.xml`檔案中的編碼值。 先前，您在產品名稱或影像標題中加入編碼字元時，產生的網站地圖無效。

### 儲存

<!-- MC-35853-->

* 刪除以前創建的商店視圖不再會導致使用拆分資料庫配置的部署中出錯。 之前，應用程式擲回例外狀況。

<!-- MC-32634-->

* 您現在可以從一個網站匯出`config.php`和預設網站程式碼，在多網站部署的第二個網站上安裝並設定應用程式。 以前，匯出後預設商店和檢視會消失，店面也會發生錯誤。

### Swagger

<!-- ENGCOM-7720-->

* 您現在可以使用Swagger產生客戶權杖。 先前，輸入有效的客戶存取資訊時，Swagger沒有產生回應代碼，且應用程式顯示此錯誤： `The account sign-in was incorrect or your account is disabled temporarily. Please wait and try again later`。 _Vadim Malesh在提取要求[28822](https://github.com/magento/magento2/pull/28822)_&#x200B;中提交的修正。 [GitHub-27098](https://github.com/magento/magento2/issues/27098)

### 色票

<!-- ENGCOM-7845-->

* 當購物者按一下購物車中的&#x200B;**編輯**&#x200B;時，具有色票的可設定產品現在會顯示層級定價。 之前，應用程式在結帳前不會在購物車中顯示階層價格。 _Sathish Subramanian在提取要求[中提交的修正29137](https://github.com/magento/magento2/pull/29137)_。 [GitHub-28270](https://github.com/magento/magento2/issues/28270)

<!-- MC-33147-->

* 應用程式現在會針對可設定的產品變化，依預期顯示層級價格。

### 稅金

<!-- MC-36049-->

* 當商家從產品的屬性集中取消指定某項產品的固定產品稅捐屬性後，應用程式就不會再在店面顯示該產品。

### 測試

<!-- ENGCOM-7874-->

* 已在單元測試中修正PHPUnit 9錯誤。 _Anton Evers在提取要求[29244](https://github.com/magento/magento2/pull/29244)_&#x200B;中提交的修正。 [GitHub-29329](https://github.com/magento/magento2/issues/29329)

<!-- ENGCOM-7995-->

* 新增單位測試，以核准自此已到期且具有折扣的採購單，將會全額下單，而不會更新採購單總計。 _Joan He在提取要求[18](https://github.com/magento/partners-magento2-infrastructure/pull/18)_&#x200B;中提交的修正。 [GitHub-204](https://github.com/magento/partners-magento2b2b/issues/204)

<!-- ENGCOM-8003-->

* `SynchronizeFilesInterface`現在由整合測試涵蓋。 _Jmonteros422在提取要求[29493](https://github.com/magento/magento2/pull/29493)_&#x200B;中提交的修正。 [GitHub-1742](https://github.com/magento/magento2/issues/1742)

<!-- ENGCOM-8009-->

* 已新增函式至`\Magento\TestFramework\TestCase\WebapiAbstract`，可比較測試中預期和實際結果的大型巢狀陣列，並允許測試者忽略實際結果中的無關索引鍵。 _Jekabs在提取要求[29458](https://github.com/magento/magento2/pull/29458)_&#x200B;中提交的修正。 [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-7887 -->

* 修正預期值與`app/code/Magento/Newsletter/Test/Unit/Model/SubscriptionManagerTest.php`中實際值的反轉。 _Lukasz Bajsarowicz在提取要求[29271](https://github.com/magento/magento2/pull/29271)_&#x200B;中提交的修正。 [GitHub-29283](https://github.com/magento/magento2/issues/29283)

<!-- ENGCOM-7142 -->

* 已解決執行連續測試時靜態屬性的序列化和取消序列化問題。 _Pavel Bystritsky在提取要求[26175](https://github.com/magento/magento2/pull/26175)_&#x200B;中提交的修正。 [GitHub-28319](https://github.com/magento/magento2/issues/28319)，[GitHub-29313](https://github.com/magento/magento2/issues/29313)

<!-- ENGCOM-7886 -->

* 在 `ObjectManager` 單元測試中，用于在測試期間實例化類已被新關鍵字所取代。 _修復由 Lukasz Bajsarowicz 在 提取 請求 [29272](https://github.com/magento/magento2/pull/29272)_ 中提交。 [GitHub-29346](https://github.com/magento/magento2/issues/29346)

<!-- ENGCOM-7593 -->

* 為這些突變病例 `updateCustomer`增加了測試覆蓋率：無效出生日期、無效電子郵件地址和空客戶姓氏。 _亞歷山大·塔拉諾夫斯基在 提取 請求 [28304](https://github.com/magento/magento2/pull/28304)_ 中提交的修復。 [GitHub-28394](https://github.com/magento/magento2/issues/28394)

<!-- MC-30844-->

* `ApiFunctional TestFramework` GraphQL使用者端現在可正確剖析標題。 [GitHub-26425](https://github.com/magento/magento2/issues/26425)

### 主題

<!-- MC-34397-->

* 當您執行`bin/magento catalog:images:resize`時，使用者代理程式規則中新增的主題現在會如預期般受到影響。 以前，執行`bin/magento catalog:images:resize`時，只會影響指派給商店的主題。

### 翻譯與地區設定

<!-- MC-20372-->

* 當管理員在管理員產品創建期間更改“ **日期** ”字段或在管理員區域設置為中文或日文時保存時，應用程式不再引發錯誤。 [GitHub-24696](https://github.com/magento/magento2/issues/24696)

<!-- ENGCOM-7829-->

* 應用程式現在會在轉譯內嵌轉譯標籤之前檢查區域（前端或`adminhtml`）。 先前，在啟用內嵌翻譯時以錯誤的認證對`POST /V1/integration/admin/token`進行API呼叫，會導致在API回應中包含有關錯誤訊息的內嵌翻譯標示。 _修復由 Zach Nanninga 在 提取 請求 [28856](https://github.com/magento/magento2/pull/28856)_ 中提交。 [GitHub-28656](https://github.com/magento/magento2/issues/28656)

<!-- ENGCOM-7536-->

* 保加利亞地區已新增至`directory_country_region`表格。 _Nikola Lardev在提取要求[27957](https://github.com/magento/magento2/pull/27957)_&#x200B;中提交的修正。 [GitHub-28215](https://github.com/magento/magento2/issues/28215)

<!-- ENGCOM-7535-->

* 現在可以翻譯“管理&#x200B;**客戶”>**&#x200B;添加新位址&#x200B;**“和**&#x200B;編輯產品&#x200B;**>**&#x200B;進階庫存&#x200B;**模式上的**&#x200B;標題和按鈕。_修復由 Sathish Subramanian 在 提取 請求 [28174](https://github.com/magento/magento2/pull/28174)_ 中提交。 [GitHub-28201](https://github.com/magento/magento2/issues/28201)

<!-- ENGCOM-7521-->

* FPT字詞現在可以在「管理員&#x200B;**商店** > **組態** > **銷售** > **稅捐** > **固定產品稅捐**」上翻譯。 _Vadim Malesh在提取要求[28108](https://github.com/magento/magento2/pull/28108)_&#x200B;中提交的修正。 [GitHub-5477](https://github.com/magento/magento2/issues/5477)

<!-- ENGCOM-7631 -->

* 結帳工作流程送貨地址模式上的&#x200B;**送貨地點**&#x200B;按鈕標籤已變更，以符合其他按鈕所使用的駝峰式大小寫。 此案例現在與翻譯檔案中使用的案例相符。 之前，因為大小寫不符，所以不會轉譯此標籤。 _WK在提取要求[28547](https://github.com/magento/magento2/pull/28547)_&#x200B;中提交的修正。 [GitHub-28685](https://github.com/magento/magento2/issues/28685)

### UI

<!-- ENGCOM-7514-->

* 現在，當隱私權與Cookie原則頁面顯示時，頁尾中的隱私權與Cookie原則連結會顯示為作用中的連結。 _Sathish Subramanian在提取要求[中提交的修正28004](https://github.com/magento/magento2/pull/28004)_。 [GitHub-27985](https://github.com/magento/magento2/issues/27985)

<!-- MC-36260-->

* 已修正您從管理員&#x200B;**銷售** > **訂單**&#x200B;中選取之訂單之相關商業發票的[商業發票註解]文字區域中的游標未對齊問題。

<!-- MC-36044-->

* 「建立新訂單」頁面現在會依預期顯示&#x200B;**依SKU新增產品**&#x200B;和&#x200B;**新增產品**&#x200B;按鈕。

<!-- MC-35974-->

* 當選取的產品有可用的產品評等時，應用程式現在會正確顯示「編輯評論」頁面。

<!-- MC-35475-->

* 應用程式現在會在執行Safari的iPhone上正確顯示管理員客戶編輯頁面。

<!-- MC-35370-->

* 更正「建立新訂單」頁面上不必要的捲動。

<!-- MC-35345-->

* 直接按一下[新增稅捐規則]頁面的[匯出稅率] **[匯出稅率]**&#x200B;按鈕（**商店** > **稅捐規則**），現在會如預期般下載`tax_rates.csv`檔案。 之前，商家必須按一下&#x200B;**匯出稅率**&#x200B;按鈕的邊緣。 這是2.4.0中的已知問題。

<!-- MC-35313-->

* 購物車底部的&#x200B;**將選取專案新增至我的購物車**&#x200B;按鈕現在可如預期般運作。 這是2.4.0中的已知問題。

<!-- MC-35296-->

* 客戶活動頁面之&#x200B;**最近檢視的產品**&#x200B;區段的&#x200B;**重新整理**&#x200B;按鈕現在可如預期運作。 先前，當您按一下&#x200B;**重新整理**&#x200B;時，產品清單不會重新整理，且頁面會捲動。

<!-- MC-35412-->

* 應用程式現在會在&#x200B;**客戶** > **區段** > **新增區段**&#x200B;的「條件」標籤上，正確顯示用於選取客戶出生日期的行事曆圖示。

<!-- MC-35658-->

* 當購物者在Internet Explorer 11.x上捲動瀏覽此頁面時，結帳工作流程的結帳摘要區段不再閃爍。

<!-- MC-34602-->

* 應用程式現在會在店麵類別頁面上正確顯示依SKU排序的Widget。 之前，未轉譯此Widget的HTML程式碼，且應用程式未顯示&#x200B;**載入SKU清單**&#x200B;連結。

<!-- MC-37444-->

* 已停用 `this.disabled(true)` 的元件UI不再顯示在店面上。 [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7264-->

* 應用程式現在可在行動裝置視圖中正確顯示最近檢視的產品介面工具集。 _修復由 Tu Nguyen 在 提取 請求 [27572](https://github.com/magento/magento2/pull/27572)_ 中提交。 [GitHub-27058](https://github.com/magento/magento2/issues/27058)

<!-- ENGCOM-7575-->

* 從管理員更改產品的位置現在反映在店面的產品位置中。 _Oleg Aleksin在提取要求[28150](https://github.com/magento/magento2/pull/28150)_&#x200B;中提交的修正。 [GitHub-28149](https://github.com/magento/magento2/issues/28149)

<!-- ENGCOM-7507-->

* 登入表單樣式現在與空白主題中其他表單上的樣式一致。 已移除設定容器控制項換行輸入欄位寬度的不必要樣式。 _Tu Nguyen在提取要求[28084](https://github.com/magento/magento2/pull/28084)_&#x200B;中提交的修正。 [GitHub-28059](https://github.com/magento/magento2/issues/28059)

<!-- ENGCOM-7578-->

* 迷你購物車刪除產品確認快顯視窗上的&#x200B;**確定**&#x200B;按鈕現在會如預期般運作。 _Tu Nguyen在提取要求[28083](https://github.com/magento/magento2/pull/28083)_&#x200B;中提交的修正。 [GitHub-27095](https://github.com/magento/magento2/issues/27095)

<!-- ENGCOM-7456-->

* 頁面載入期間，產品收藏館元素不再閃爍。 _修復由 Mateusz Krzeszowiak 在 提取 請求 [27871](https://github.com/magento/magento2/pull/27871)_ 中提交。 [GitHub-28339](https://github.com/magento/magento2/issues/28339)

<!-- ENGCOM-8007-->

* 控制欄位寬度的 CSS 類現在在整個管理中按預期應用於開始時間元素。 _Shankar Konar 在 提取 請求 [29511](https://github.com/magento/magento2/pull/29511)_ 中提交的修復。 [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992-->

* 條款與條件文字卷標現在可以正確显示較長文字字符串。 _Bartlomiej Szubert在提取要求[29413](https://github.com/magento/magento2/pull/29413)_&#x200B;中提交的修正。 [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7967-->

* 訂單失敗頁面的標題已重寫為精確性。 先前，當購物者取消訂單時，應用程式會顯示具有此標題的頁面： `We received your order!`。 _Angelo Romano在提取要求[29410](https://github.com/magento/magento2/pull/29410)_&#x200B;中提交的修正。 [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-7770-->

* 已取消訂單檢視頁面上的已取消專案總數，現在可以在已取消訂單檢視頁面上正確識別。 之前，此欄位標示為&#x200B;**總到期日**。 _修復由 Madhu Rajawat 在 提取 請求 [27516](https://github.com/magento/magento2/pull/27516)_ 中提交。 [GitHub-26191](https://github.com/magento/magento2/issues/26191)

<!-- ENGCOM-7579 -->

* 現在，「建立可設定產品」頁面上的切換按鈕可正常運作。 _Tu Nguyen在提取要求[28032](https://github.com/magento/magento2/pull/28032)_&#x200B;中提交的修正。 [GitHub-22702](https://github.com/magento/magento2/issues/22702)

<!-- ENGCOM-7579 -->

* 「進階屬性特性」頁面上的進階屬性特性區塊圖示現在會如預期般運作。 _Tu Nguyen在提取要求[28032](https://github.com/magento/magento2/pull/28032)_&#x200B;中提交的修正。 [GitHub-26022](https://github.com/magento/magento2/issues/26022)

<!-- ENGCOM-7619 -->

* 系統配置頁面的“管理”部分現在會展開，以便在您嘗試保存新模組的配置設置時按預期顯示必填字段。 _修復由 Bartłomiej Szubert 在 提取 請求 [28285](https://github.com/magento/magento2/pull/28285)_ 中提交。 [GitHub-26427](https://github.com/magento/magento2/issues/26427)

<!-- ENGCOM-7826 -->

* 糾正了模式設置為 `inside`時放大鏡的行為。 _Sean van Zuidam 在 提取 請求 [29077](https://github.com/magento/magento2/pull/29077)_ 中提交的修復。 [GitHub-29076](https://github.com/magento/magento2/issues/29076)

<!-- ENGCOM-7010 -->

* 更正了當購物者在頁面页腳的訂閱欄位中輸入無效電子郵件地址時產生的分散注意力的長輸入字段寬度。 _修復由 Dipesh Rangani 在 提取 請求 [27106](https://github.com/magento/magento2/pull/27106)_ 中提交。 [GitHub-27099](https://github.com/magento/magento2/issues/27099)

<!-- ENGCOM-7972 -->

* 當您新增標籤並將滑鼠游標移至開發主控台上方時，`Uncaught ReferenceError`錯誤不再出現。 _Nazar Klovanych在提取要求[29392](https://github.com/magento/magento2/pull/29392)_&#x200B;中提交的修正。 [GitHub-1700](https://github.com/magento/magento2/issues/1700)

### URL重新寫入

<!-- MC-34483-->

* 將商店檢視移至其他網站時，不再重設URL。 之前，應用程式錯誤地重新產生CMS和產品URL重寫。

<!-- MC-33028-->

* 將存放區檢視指派給其他存放區時，應用程式現在會保留現有的目錄URL重寫，與預期一樣。 之前，應用程式刪除了商店專屬的URL重寫。

### 亮漆

<!-- ENGCOM-7761-->

* 重新啟動Varnish不再導致503錯誤。 _Ihor Sviziev在提取要求[28137](https://github.com/magento/magento2/pull/28137)_&#x200B;中提交的修正。 [GitHub-24353](https://github.com/magento/magento2/issues/24353)

### 儲存庫

<!-- MC-34674-->

* 未選取結帳工作流程付款區段上的&#x200B;**儲存以供稍後使用**&#x200B;核取方塊時，應用程式不再儲存信用卡號碼。

### Web API框架

<!-- MC-35838-->

* 擁有多個網站的商戶現在可以使用REST API來建立和更新產品，同時保留影像和影像角色繼承。 先前，當商家使用REST API來建立和更新產品，以及更新產品以供商店檢視時，系統會為該商店檢視載入並儲存預設影像角色。 因此，存放區 — 檢視影像角色在更新後停止從預設範圍繼承。

<!-- MC-36419-->

* 當資源許可權允許存取時，未設定範圍的整合使用者帳戶現在可以透過REST API存取資源。

<!-- MC-35975-->

* 搜尋條件篩選器現在可如預期般用於建立可設定產品期間使用的產品屬性。 [GitHub-29126](https://github.com/magento/magento2/issues/29126)

<!-- ENGCOM-7785 -->

* 現在已針對POST`/rest/V1/customers`要求驗證客戶群組識別碼。 先前，當您在這些要求中使用無效的`group_id`時，應用程式沒有顯示錯誤訊息。 _Vadim Malesh在提取要求[28903](https://github.com/magento/magento2/pull/28903)_&#x200B;中提交的修正。 [GitHub-28064](https://github.com/magento/magento2/issues/28064)

<!-- ENGCOM-7611 -->

* 默認情況下，不會為匿名 REST 調用創建 PHP 工作階段。 以前，會話在不必要的平均啟動。 _Maciej Pawlowski在提取要求[26032](https://github.com/magento/magento2/pull/26032)_&#x200B;中提交的修正。 [GitHub-7213](https://github.com/magento/magento2/issues/7213)

<!-- ENGCOM-7612 -->

* 使用各種 REST 端點更新包含自訂選項的訂單不再刪除自訂選項資訊。 先前，`info_buyRequest`中的值已刪除。 _Vadim Malesh在提取要求[28483](https://github.com/magento/magento2/pull/28483)_&#x200B;中提交的修正。 [GitHub-22431](https://github.com/magento/magento2/issues/22431)

<!-- ENGCOM-7665 -->

* 擷取使用者資訊時，使用GET`V1/customers/me`現在會遵循&#x200B;**共用客戶帳戶**&#x200B;設定（管理員&#x200B;**存放區** > **組態** > **客戶** > **客戶組態** > **帳戶共用選項**）。 _Pavel Bystritsky在提取要求[28213](https://github.com/magento/magento2/pull/28213)_&#x200B;中提交的修正。 [GitHub-26089](https://github.com/magento/magento2/issues/26089)

<!-- ENGCOM-7563 -->

* 與地址相關的擴展屬性可以設置為數據數位。 以前，當包含的POST請求時，應用程式會擲回錯誤  `extension_attributes`已傳送至`estimate-shipping-methods`。 此錯誤是由先前的認可所引進，它影響了`Magento\Quote\Api\Data\AddressInterface`上設定的不是物件的任何擴充屬性。 _修復由 Alexander Menk 在 提取 請求 [27338](https://github.com/magento/magento2/pull/27338)_ 中提交。 [GitHub-26682](https://github.com/magento/magento2/issues/26682)

<!-- ENGCOM-7618 -->

* 更新具有PUT`V1/customers/:id`端點的客戶時，您現在可以指定單一欄位。 過去，端點需要您指定客戶電子郵件和建立客戶所需的其他欄位。 _Vadim Malesh在提取要求[28332](https://github.com/magento/magento2/pull/28332)_&#x200B;中提交的修正。 [GitHub-21237](https://github.com/magento/magento2/issues/21237)

### 希望清單

<!-- MC-35622-->

* 客戶現在可以從願望清單本身變更願望清單中產品的數量。 之前，應用程式不會更新產品數量，也不會显示訊息。

<!-- MC-35618-->

* 客户現在可以從願望清單本身更改願望清單分組產品數量。 之前，應用程式不會更新產品數量或显示訊息。

<!-- ENGCOM-7580-->

* 、`WeakMap`、`FormData``MutationObserver`、 的`Map`填充，現在僅在需要時載入。_修正由 Dmitry Tsymbal 在 提取 請求 [28330](https://github.com/magento/magento2/pull/28330)_ 中提交。 [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7561-->

* 願望清單更新過程現在支持同時更新願望清單項及其描述。 _Eduard Chitoraga在提取要求[28222](https://github.com/magento/magento2/pull/28222)_&#x200B;中提交的修正。 [GitHub-28261](https://github.com/magento/magento2/issues/28261)

<!-- ENGCOM-7660-->

* 新增測試，以便與超過允許數量的電子郵件共用客戶的願望清單。 _Dmitry Tsymbal在提取要求[28641](https://github.com/magento/magento2/pull/28641)_&#x200B;中提交的修正。 [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- MC-36250-->

* 管理員現在可以設定客戶從非預設存放區新增至願望清單的可設定產品。 先前，當客戶也從非預設存放區新增可設定產品時，應用程式擲回錯誤。

<!-- ENGCOM-7660-->

* 新增測試，以便與超過允許數量的電子郵件共用客戶的願望清單。 _Dmitry Tsymbal在提取要求[28641](https://github.com/magento/magento2/pull/28641)_&#x200B;中提交的修正。 [GitHub-28720](https://github.com/magento/magento2/issues/28720)

<!-- ENGCOM-7674-->

* 新增從客戶的願望清單中刪除專案（以管理員使用者身分）的測試。 _Dmitry Tsymbal在提取要求[28632](https://github.com/magento/magento2/pull/28632)_&#x200B;中提交的修正。 [GitHub-28721](https://github.com/magento/magento2/issues/28721)

<!-- ENGCOM-7675-->

* 新增停用希望清單功能的測試。 _Dmitry Tsymbal在提取要求[28635](https://github.com/magento/magento2/pull/28635)_&#x200B;中提交的修正。 [GitHub-28744](https://github.com/magento/magento2/issues/28744)

<!-- ENGCOM-7580-->

* 已新增在共用客戶希望清單時使用無效電子郵件地址的測試。 `StorefrontShareWishlistEntityTest`已重構。 `StorefrontCustomerShareWishlistActionGroup`已棄用。 _Dmitry Tsymbal在提取要求[28330](https://github.com/magento/magento2/pull/28330)_&#x200B;中提交的修正。 [GitHub-28377](https://github.com/magento/magento2/issues/28377)

<!-- ENGCOM-7717-->

* 新增分享超過允許文字長度限制之客戶願望清單的測試。 _修復由 Dmitry Tsymbal 在 提取 請求 [28812](https://github.com/magento/magento2/pull/28812)_ 中提交。 [GitHub-28969](https://github.com/magento/magento2/issues/28969)

## 已知問題

**問題**：使用協力廠商付款提供者時，用於結帳的新CAPTCHA功能在「下訂單」頁面上無法如預期運作。 執行2.3.6或2.4.1且已在下單店面頁面上啟用驗證碼保護的商家，在使用第三方支付提供者（例如PayPal： `Please provide CAPTCHA code and try again`）結帳時，將會看到此錯誤。 **因應措施**：現已修正此問題。 請參閱簽出中的[Magento Open Sourcev2.3.6/2.4.1 CAPTCHA無法運作](https://support.magento.com/hc/en-us/articles/360051235772)知識庫文章。 我們的下一季修補程式(Q12021)中也會包含修正。

**問題**：沒有系統管理員許可權的使用者目前無法設定其個人2FA存取權。 2FA包含兩個ACL角色。 一個角色會影響全域系統設定，只有在設定系統時才需要該角色。 第二個ACL角色會影響個別使用者2FA帳戶。 管理員用戶必須配置第二種類型的 2FA ACL。 **解決辦法**：用戶登錄並看到“拒絕訪問”屏幕後，他們可以造訪`https://<magento store>/<admin_path>/tfa/tfa/requestconfig/`強制配置。 注意：我們不建議禁用安全設置。 但是，此解決方法僅在禁用管理員URL密鑰時有效。

**問題**：如果購物者輸入了無效的資料，則「建立新帳戶」頁面上的&#x200B;**建立帳戶**&#x200B;按鈕仍會停用。 這可防止購物者在發生錯誤後重新嘗試建立帳戶。 **解決方法**：套用修補程式`MC-38509`。 我們的下一季版本（2.4.2、2.4.1-p1和2.3.6-p1）也包含修正，這些版本預計在2021年第1季度發行。 請參閱[2.4.1和2.3.6建立帳戶按鈕停用Hotfix](https://support.magento.com/hc/en-us/articles/360051130212)知識庫文章。  [GitHub-30513](https://github.com/magento/magento2/issues/30513)

**問題**：啟用dotdigital時，商家無法從Safari中的Admin登入dotdigital。 [請参閱啟用](https://support.magento.com/hc/en-us/articles/360050092291) dotdigital 帳戶時無法通過管理面板在 dotdigital 中登入知識庫文章。

**問題**：當購物者選取與帳單地址不同的送貨地址時，在付款期間頂點地址驗證無法運作。 此問題將在 2.4.2 中修復。 [請參閱 2.4.1 已知問題：更新地址](https://support.magento.com/hc/en-us/articles/360050139631) 知識庫文章后，頂點地址驗證消息不會消失。

**問題**：當商家在 Safari 瀏覽器上保存 dotdigital 頁面 Builder 表單時，應用程式顯示一個空頁面。 **解決辦法**：重新載入頁面以應用更改。 請參閱[2.4.1已知問題：儲存dotdigital Page Builder表單](https://support.magento.com/hc/en-us/articles/360049819092)知識庫文章後的空白頁面。

**問題**：在某些情況下，應用程式會自動將客戶登錄到以前使用過的Amazon帳戶，而不是提示他們在結帳時使用 Amazon Pay 登錄。 請參閱[2.4.1已知問題：無法在Google Chrome](https://support.magento.com/hc/en-us/articles/360049814152)知識庫文章中變更Amazon帳戶。

**問題**：當選取PayPalBraintree付款和多重地址運送時，應用程式會在結帳工作流程的帳單頁面上短暫顯示錯誤訊息。 [請參閱 2.4.1 已知問題：使用Braintree知識庫文章結帳時彈出錯誤PayPal](https://support.magento.com/hc/en-us/articles/360050253211)。

**問題**：當訪客客戶嘗試使用PayPal到Braintree下訂單時，當訪客結帳被禁用時，應用程式會顯示一條非信息性錯誤消息。 [請參閱 2.4.1 已知問題：客人結帳期間使用PayPal知識庫文章顯示Braintree](https://support.magento.com/hc/en-us/articles/360050368111)資訊性錯誤消息。

## 社群貢獻

我們感謝更廣泛的Magento Open Source社群，並按讚感謝他們對此次發佈的貢獻。 查看以下方式，瞭解對我們當前版本的社群貢獻：

* 如果社群成員已提供此版本的修正，我們會在這些備註的「已修正問題」區段中以「*社群成員提供的修正*」這個短語來識別修正。

* 社群工程團隊[Magento貢獻者](https://magento.biterg.io/app/kibana)會依月、季和年維護最佳貢獻個人和合作夥伴的清單。 從該貢獻者頁面，您可以前往GitHub上的合併個人資料連結。

### 合作夥伴貢獻

下表重點說明合作夥伴所做的貢獻。 下表列出提出提取請求的合作夥伴、外部提取請求，以及與之相關聯的GitHub問題編號（若有）。

{{$include /help/_includes/release-notes/engcomm-2-4-1-partner.md}}

### 個人貢獻者

下表列出我們社群成員的貢獻。 此表格列出外部提取請求、與其相關聯的GitHub問題編號（如果有的話），以及提出提取請求的社群成員。

{{$include /help/_includes/release-notes/engcomm-2-4-1-issues.md}}

### 系統需求

我們的技術棧疊是以PHP和MySQL為基礎所建置。 如需詳細資訊，請參閱[系統需求](../../../installation/system-requirements.md)。

### 安裝和升級指示

您可以使用撰寫器安裝Magento Open Source2.4.1。

## 遷移工具包

資料移轉工具可協助將現有Magento1.x存放區資料傳輸至Magento2.x。此命令列介麵包含驗證、進度追蹤、記錄和測試功能。 有關安裝說明，請參閱 [安裝數據遷移工具](../../../tools/data-migration-tool/install.md)。 考慮探索或參與 [數據遷移存放庫](https://github.com/magento/data-migration-tool)。

[程式碼移轉工具組](https://github.com/magento-commerce/code-migration)可協助將現有的Magento1.x存放區擴充功能和自訂功能傳輸至Magento2.x。命令列介麵包含轉換Magento1.x模組和版面的指令碼。
