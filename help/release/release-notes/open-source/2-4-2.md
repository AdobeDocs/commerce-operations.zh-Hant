---
title: Magento Open Source2.4.2發行說明
description: 瞭解2.4.2Magento Open Source版中的新功能、增強功能、錯誤修復和已知問題。
exl-id: 01e90bcb-d43c-4daa-9669-44e3370102af
source-git-commit: 95ffff39d82cc9027fa633dffedf15193040802d
workflow-type: tm+mt
source-wordcount: '13940'
ht-degree: 0%

---

# Magento Open Source2.4.2發行說明

Magento Open Source2.4.2引入了效能和安全性的增強，並對平台進行了重大改進。 安全增強包括擴展對 `SameSite` 屬性。 Elasticsearch7.9.x和Redis 6.x現在受支援。

此版本包括280多項對核心代碼的新修復和35項安全增強。 它包括由我們的社區成員解決近290個GitHub問題。 這些社區貢獻包括對核心代碼的輕微清理，以及GraphQL的重大改進。

本版本中已解決2.4.1中確定的所有已知問題。

{{bics}}

## 應用 `AC-3022.patch` 繼續提供DHL作為航運公司

DHL已引入架構版本6.2，並將在不久的將來棄用架構版本6.0。 Adobe Commerce2.4.4和支援DHL整合的早期版本僅支援6.0版。部署這些版本的商家應適用 `AC-3022.patch` 盡早便繼續提供敦豪作為航運公司。 查看 [應用修補程式以繼續將DHL作為運輸承運商提供](https://support.magento.com/hc/en-us/articles/7707818131597-Apply-a-patch-to-continue-offering-DHL-as-shipping-carrier) 有關下載和安裝修補程式的資訊，請參閱知識庫文章。

## 安全修補程式可用

商家現在可以安裝時間敏感型安全修復程式，而無需應用完整的季度版本提供的數百個功能修復和增強(例如2.4.1-p1)。 修補程式2.4.0.12(Composer軟體包2.4.1-p1)是一個安全修補程式，它針對我們上一季度發行版2.4.1中已發現的漏洞提供了修復。此安全修補程式中包含應用於2.4.1版的所有熱修復程式。 (A) *熱修復* 提供對已發佈版本的修復，以解決特定問題或錯誤。)

有關安全修補程式的一般資訊，請參見 [介紹新的安全修補程式版本](https://community.magento.com/t5/Magento-DevBlog/Introducing-the-New-Security-Patch-Release/ba-p/141287)。 有關下載和應用安全修補程式(包括修補程式2.4.1-p1)的說明，請參見 [快速啟動本地安裝](../../../installation/composer.md)。 安全修補程式僅包括安全錯誤修復，而不包括完整修補程式中包含的附加安全增強。

## 其他發佈資訊

雖然這些功能的代碼與季度版本捆綁在一起，但其中幾個項目(例如Progressive Web Application(PWA)Studio)也是獨立發佈的。 這些項目的錯誤修復程式都記錄在每個項目文檔中提供的獨立、特定於項目的發行資訊中。

## 亮點

在此版本中查找以下亮點。

### 大量安全增強

此版本包括35多個安全修復和平台安全改進。 所有安全修復都已備份到2.4.1-p1和2.3.6-p1。

#### 超過35項安全增強功能，可幫助關閉遠程代碼執行(RCE)和跨站點指令碼(XSS)漏洞

迄今未發生與這些問題相關的已確認攻擊。 但是，某些漏洞可能被利用來訪問客戶資訊或接管管理員會話。 大多數這些問題都要求攻擊者首先獲得對管理員的訪問權限。 因此，我們提醒您採取一切必要步驟保護您的管理員，包括但不限於以下工作：IP允許， [雙因素認證](https://devdocs.magento.com/guides/v2.4/security/two-factor-authentication.html)，使用VPN，使用唯一位置而不是 `/admin`以及良好的密碼衛生。 請參閱 [Adobe安全公告](https://helpx.adobe.com/security/products/magento/apsb21-08.html) 來討論這些固定問題。

#### 其他安全增強功能

此版本的安全改進包括：

* 所有核心Cookie現在都支援 `SameSite` 屬性。

* 當用戶嘗試在這些欄位中保存值時，應用程式現在會顯示消息，這些消息標識產品和類別說明欄位中可能存在惡意的內容。

* 跨元件的檔案系統操作已標準化並加強了安全性，以防止惡意上載。

* 核心內容安全策略(CSP)違規已修復。

{{cve-notice}}

### 基礎架構改進

本版本包含對核心質量的增強，這些提高了框架的質量和以下功能領域：客戶帳戶、目錄、CMS、OMS、導入/導出、促銷和目標，以及購物車和結帳。

### 平台增強

* [**Elasticsearch7.9.x現在受支援**](../../../installation/system-requirements.md)。 儘管我們建議運行Elasticsearch7.9.x，但版本2.4.x仍與Elasticsearch7.4.x相容。 <!-- MC-36867-->

* 2.4.2已通過 [清漆6.4](../../../installation/system-requirements.md)。 版本2.4.x仍與清漆6.x相容。

* [**現在支援Redis 6.x**](../../../installation/system-requirements.md)。 版本2.4.x仍與Redis 5.x相容。 <!-- MC-34853-->

* 2.4.2現在與 **作曲家2.x**。 我們建議商家遷移到Composer 2.x。雖然您可以使用Composer 1.x安裝此版本，但Composer 1.x很快就會終止。 有關Composer 2.x功能的概述，請參見 [作曲家2.0現已推出！](https://blog.packagist.com/composer-2-0-is-now-available/)

在此版本中，配置安裝以使用剝離資料庫的功能已棄用。 當前使用拆分資料庫的商家應開始計畫還原到單個資料庫或遷移到單個資料庫，或使用替代方法。 查看 [在Magento Open Source中棄用剝離資料庫功能](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) 有關此問題的概述的DevBlog帖子。  請參閱 [從拆分資料庫還原到單個資料庫](../../../configuration/storage/revert-split-database.md) 的子菜單。

### 效能增強

此版本包括代碼增強功能，可提高具有大目錄的部署的API效能和管理響應時間。 多種可擴充性增強使2.4.2能夠以本機方式支援較以前版本高20倍的複雜目錄。

### Adobe Stock整合

本版本包括Adobe Stock整合v2.1.1。

### GraphQL

此版本增加了GraphQL對以下功能的覆蓋範圍：

* 為 [比較清單](https://devdocs.magento.com/guides/v2.4/graphql/queries/compare-list.html)。 購物者可 [建立](https://devdocs.magento.com/guides/v2.4/graphql/mutations/create-compare-list.html) 和 [刪除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/delete-compare-list.html) 比較清單和 [添加](https://devdocs.magento.com/guides/v2.4/graphql/mutations/add-products-to-compare-list.html) 和 [刪除](https://devdocs.magento.com/guides/v2.4/graphql/mutations/remove-products-from-compare-list.html) 清單中。 此外，作為來賓建立比較清單的購物者可以作為客戶登錄， [保留](https://devdocs.magento.com/guides/v2.4/graphql/mutations/assign-compare-list-to-customer.html) 他們的比較清單。

* 已添加 [`generateCustomerTokenAsAdmin`](https://devdocs.magento.com/guides/v2.4/graphql/mutations/generate-customer-token-as-admin.html) 變異和更新 `Customer` 用於支援遠程購買幫助的對象。

* 添加了跨商店的本地化支援，以支援更改語言、購物車和貨幣等任務。 <!-- MC-37801-->

* 支援GraphQL的工會。 [GitHub-29425](https://github.com/magento/magento2/issues/29425) <!-- ENGCOM-8291 -->

* GraphQL模式已得到增強，以優化具有多種變型的可配置產品的產品資料檢索。 <!-- MC-36138-->

* 已棄用整數類型對象ID，以支援 `uid` 類型ID的屬性。 <!-- MC-36346-->

* 已添加 `staging` 屬性 [`ProductInterface`](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/product-interface.html) 和 [`CategoryInterface`](https://devdocs.magento.com/guides/v2.4/graphql/interfaces/category-interface.html) 確定產品是否已提貨並查看其關聯的市場活動資訊。 <!-- MC-33897-->

查看 [GraphQL開發人員指南](https://devdocs.magento.com/guides/v2.4/graphql/) 獲取這些增強功能的詳細資訊。

### PWA Studio

此版本的PWA Studio包括：

* 國際化和本地化。 Venia現在為多種語言和貨幣提供支援。

* 通過擴展支援代碼更改的改進擴展性框架。

* 「我的帳戶」相關功能的初始元件，如願望清單、已保存付款、通訊簿和訂單歷史記錄。

* 各種效能優化和錯誤修復。

有關增強和錯誤修復的資訊，請參見 [PWA Studio版本](https://github.com/magento/pwa-studio/releases)。 請參閱 [相容性](https://developer.adobe.com/commerce/pwa-studio/integrations/adobe-commerce/version-compatibility/) 的子菜單。

### 媒體集

**媒體集的新角色資源**。 此版本允許商家僅限制管理員對媒體集的訪問權限，並控制哪些人可以執行以下操作：

* 將媒體資產插入內容

* 上載資產

* 編輯資產詳細資訊

* 從媒體集中刪除資產

* 管理資料夾結構。

**內容中的Web優化影像**。 商家現在可以使用 [Web優化影像格式副本](https://docs.magento.com/user-guide/cms/media-gallery-image-optimization.html) 而不是高解析度影像。 原始影像在媒體集中保持不變，當影像插入內容時動態生成影像再現。

### 功能測試框架(MFTF)

MFTF 3.2.1現已提供。 此版本在test和test套件的生成中引入了容錯功能。 其他增強功能和錯誤修復在 [功能測試框架更改日誌](https://github.com/magento/magento2-functional-testing-framework/blob/develop/CHANGELOG.md)。

### 供應商開發的擴展

有關此版本的功能和更改的更新，請參閱以下文章：

* [Amazon](https://docs.magento.com/user-guide/payment/amazon-pay.html)

* [Braintree](https://docs.magento.com/user-guide/payment/braintree.html)

* [Dotdigital Engagement雲](https://docs.magento.com/user-guide/marketing/dotdigital/engagement-cloud.html)

* [克拉爾納](https://docs.magento.com/user-guide/payment/klarna.html)

* [頂點雲](https://docs.magento.com/user-guide/tax/vertex.html)

* [Yotpo產品評論](../../../upgrade/modules/upgrade.md)

### AWSS3支援增強

Amazon簡單儲存服務(AWSS3)支援已得到增強，以包括對以下項的支援：

* 對象儲存和未來擴展性

* [儲存媒體檔案](../../../configuration/remote-storage/remote-storage.md) AWSS3

## 已修復問題

我們解決了核心代碼中的數2.4.2問題。

### 安裝、升級、部署

<!-- MC-38429-->

* 在此版本中，配置安裝以使用剝離資料庫的功能已棄用。 查看 [在Magento Open Source中棄用剝離資料庫功能](https://community.magento.com/t5/Magento-DevBlog/Deprecation-of-Split-Database-in-Magento-Commerce/ba-p/465187) DevBlog帖子。

<!-- MC-36472-->

* 商家現在可以成功將運行MySQL 8.x的開源部署升級為Commerce部署。 以前，應用程式在 `AUTO_INCREMENT` 值已還原為所有表的初始值，其中 `row_id` 已在升級過程中添加。

<!-- ENGCOM-7280 -->

* 應用程式現在顯示一條錯誤消息，該消息標識在運行時出錯時用於建立修補程式的路徑 `bin/magento/setup:db:generate-patch`。 [GitHub-27523](https://github.com/magento/magento2/issues/27523)

<!-- ENGCOM-8029 -->

* `block_html`。 `full_page`, `layout` 快取現在按預期在 `bin/magento/setup:upgrade` 執行。  [GitHub-28186](https://github.com/magento/magento2/issues/28186)

<!-- ENGCOM-8184 -->

* 中所需的最低PHP版本 `bootstrap.php` 已更新。 [GitHub-30004](https://github.com/magento/magento2/issues/30004)

<!-- MC-38788-->

* 現在可以執行 `bin/magento/setup:upgrade` 安裝示例資料後。 以前，當你試圖 `bin/magento/setup:upgrade`，應用程式顯示以下錯誤： `unable to apply data patch magento\catalogrulesampledata\setup\patch\data\installcatalogrulesampledata for module magento_catalogrulesampledata`。 應用程式還在系統日誌中顯示以下錯誤： `main.ERROR: Sample Data error: Unable to unserialize value. Error: Syntax error`。 [GitHub-30685](https://github.com/magento/magento2/issues/30685)

<!-- MC-36785-->

* 現在，您可以按照預期從命令行設定YouTubeAPI密鑰。 以前，當您嘗試執行 `bin/magento config:sensitive:set catalog/product_video/youtube_api_key`: `There are no sensitive configurations to fill`。

<!-- ENGCOM-8163 -->

* 現在申請表 `maxMessages` 在中定義的值 `queue_consumer.xml`。 以前，應用程式僅使用部署配置值。 [GitHub-29522](https://github.com/magento/magento2/issues/29522)

<!-- ENGCOM-8243 -->

* 新儲存的URL生成現在在使用 `bin/magento setup:config:import`。 以前，在生產環境中未生成URL重寫。 [GitHub-30025](https://github.com/magento/magento2/issues/30025)

<!-- ENGCOM-8230 -->

* 嘗試更改時，應用程式不再引發錯誤 `backend-frontname` 使用 `ssh` 安裝Magento Open Source後的容器。 [GitHub-26762](https://github.com/magento/magento2/issues/26762)

<!-- ENGCOM-8230 -->

* 運行時，應用程式不再顯示此問題 `bin/magento setup:install` 要連接到現有資料庫： `Overwrite the existing configuration for db-ssl-verify?[Y/n]`。 [GitHub-29612](https://github.com/magento/magento2/issues/29612)

### Adobe Stock整合

<!-- ENGCOM-8020-->

* 增加了對讀取的支援 `exif_image.png` 或 `exif-image.jpeg` 元資料。 [GitHub-1449](https://github.com/magento/adobe-stock-integration/issues/1449)

<!-- ENGCOM-8194 8094 8147-->

* 按一下媒體集的預設視圖書籤時顯示的內容不再過濾。 以前，預設視圖包含從 `url-filter` 應用程式。 [GitHub-1813](https://github.com/magento/adobe-stock-integration/issues/1813)。 [GitHub-1789](https://github.com/magento/adobe-stock-integration/issues/1789)。 [GitHub-1780](https://github.com/magento/adobe-stock-integration/issues/1780)

<!-- ENGCOM-8070 -->

* 邏輯已從WYSIWYG OnInsert控制器(`Magento\Cms\Controller\Adminhtml\Wysiwyg\Images\OnInsert::execute()`)並添加到 `Model\Wysiwyg\Images\PrepareImage::execute()` 模型。 [GitHub-1504](https://github.com/magento/adobe-stock-integration/issues/1504)

<!-- ENGCOM-8081 -->

* 已從 `media-content:sync` 命令(`\Magento\MediaContentSynchronization\Console\Command\Synchronize::execute`)。 [GitHub-1784](https://github.com/magento/adobe-stock-integration/issues/1784)

### 分析

<!-- MC-37137-->

* Advanced Reporting現在可以像預期的那樣適用於同一域中的多個環境。 以前，由Advanced Reporting生成的CSV檔案失敗，因為雙引號是用反斜線轉義的，而不是按照CSV標準RFC4180的要求用另一雙引號轉義的。

<!-- MC-35996-->

* 的 `analytics_collect_data` 現在，當使用預設或非預設埠連接到MySQL時，作業將成功運行 `env.php`。 以前， `analytics_collect_data` 使用非預設埠時引發錯誤。

<!-- MC-35407-->

* 由生成的CSV檔案 `analytics_collect_data` 現在正確逃出。 以前，這些檔案沒有生成正確的轉義符，因此無法生成清單報告。

### Braintree

* 購物者現在可以使用Apple支付成功訂購虛擬產品。 以前，應用程式引發了以下錯誤： `There are no shipping methods available for you right now. Please try again or use an alternative payment method`。

* 預設的PayPal Express結帳付款方法現在與Braintree信用卡付款方法一致。 以前，應用程式未顯示 **貝帕爾** 的子菜單。

### 捆綁產品

<!-- MC-34063-->

* 應用產品不再在報價中為固定價格捆綁產品子項目設定價格。

<!-- MC-38050-->

* 目前，當捆綁產品包括庫存不足的產品時，價格分類會按預期方式進行。 以前，按降序排序的價格沒有按降序顯示產品。

<!-- MC-38576-->

* 現在，當存在許多選項時，應用產品將自動對捆綁產品選項應用預設數量1。 以前，商家必須手動為每個選項分配預設數量。

<!-- ENGCOM-8159 -->

* 訂單發票建立頁現在按預期顯示捆綁產品的子產品。 [GitHub-27350](https://github.com/magento/magento2/issues/27350)

<!-- MC-38460 -->

* 現在，當您以自定義價格重新訂購作為捆綁產品一部分的簡單產品時，應用程式將分配正確的產品價格。 以前，在捆綁產品上設定自定義價格會導致重新訂購時附加的簡單產品的價格不正確。 [GitHub-30343](https://github.com/magento/magento2/issues/30343)

<!-- MC-30348 -->

* 呼叫POST `/V1/order/{orderId}/ship` 要發運包含捆綁產品的訂單，請立即將訂單標籤為預期完成。 以前，應用程式顯示以下錯誤消息： `You can't create a shipment without products`。 [GitHub-9762](https://github.com/magento/magento2/issues/9762)

### 購物車和結帳

<!-- MC-34264-->

* 當在簽出工作流的發運步驟中存在自定義地址屬性時，發運方法估計器現在可以按預期工作。 以前，應用程式顯示以下錯誤消息： `{"message":"Error occurred during \"custom_attributes\" processing. A custom attribute is specified with a missing attribute code. Verify the code and try again."}` [GitHub-27505](https://github.com/magento/magento2/issues/27505)

<!-- MC-35783-->

* 應用程式現在顯示 `You have no items in your shopping cart` 當購物者刪除購物車中的唯一物品時，會按預期在迷你購物車中顯示消息。 以前，未更新購物車資料 `checkout/cart/removeFailed` 當購物者刪除了單個物品，並且應用程式顯示以下消息時： `1 product requires your attention`。

<!-- MC-36088-->

* 應用產品不再顯示不適用發運方法的訂單的發運成本。 以前，應用產品在結帳工作流中顯示不適用發運方法的價格0。

<!-- MC-36598-->

* 現在，在 **我的帳單地址和發貨地址相同** 複選框。

<!-- MC-37351-->

* 購物者在不同域中從一個商店切換到另一個商店時，購物車內容不再丟失。

<!-- MC-38000-->

* 當使用多種發運方法時，購物者現在可以使用「多地址簽出」成功完成訂單。 以前，應用程式顯示以下錯誤： `There has been an error processing your request`。 [GitHub-30197](https://github.com/magento/magento2/issues/30197)

<!-- MC-38048-->

* 當購物者從購物車更改商店視圖時，應用產品現在在結帳工作流的發運頁上顯示正確的預設國家/地區。

<!-- MC-38309-->

* 當來賓購物者登錄時，註銷後密碼重置後，當清理客戶會話時，應用程式現在排除當前會話。 以前，當購物者重設密碼時，應用程式清空了購物車。

<!-- MC-36884-->

* 當購物者在購物車中更改商店視圖時，應用產品現在顯示商店視圖的正確預設國家/地區。 以前，當購物車中的商店視圖更改時，預設國家/地區不正確。

<!-- MC-38746-->

* 對 `/rest/V1/guest-carts/cart_id/totals-information` 已刪除購物車上的端點，這提高了購物車效能。 以前，當購物者將產品添加到購物車中，然後查看購物車時，應用程式將 `collectAddressTotals` 方法多次。

<!-- MC-38833-->

* 應用程式不再顯示 **區域** 在 **如果國家/地區為可選狀態，則允許選擇狀態** 設定已禁用。 [GitHub-30747](https://github.com/magento/magento2/issues/30747)

<!-- MC-38813-->

* 當從管理員重新訂購訂單時，應用程式不再在店面簽出工作流中重複發運地址。

<!-- MC-38814-->

* 修正的問題 `AdminMediaGalleryInsertLargeImageFileSizeTest`。

<!-- MC-37321-->

* 中的所有新記錄 `quote` 現在為來賓分配的表中的值為1 `customer_is_guest field`。 以前，對於將產品添加到購物車中的每個新來賓，在`quote.customer_is_guest` 的子菜單。

<!-- ENGCOM-8091 -->

* 的 **提交** 已將結帳工作流的「複查和付款」部分上的按鈕移到內部 `<form id="purchaseorder-form"...></form>`，這使隱式表單提交成為可能，而不會更改任何JavaScript。 [GitHub-27925](https://github.com/magento/magento2/issues/27925)

<!-- ENGCOM-8428 -->

* 應用程式不再顯示 **區域** 在 **如果國家/地區為可選狀態，則允許選擇狀態** 設定已禁用。 [GitHub-30747](https://github.com/magento/magento2/issues/30747)

<!-- ENGCOM-8442 -->

* 當購物者按一下時，應用程式現在可以正確更新購物車的物料小計 **更新購物車** 同時簽出多個地址。 [GitHub-30408](https://github.com/magento/magento2/issues/30408)

<!-- ENGCOM-8283 -->

* 應用程式在 `config.xml` 當前未安裝的付款方法存在節點。 以前，應用程式在簽出期間引發異常。 [GitHub-29555](https://github.com/magento/magento2/issues/29555)

<!-- ENGCOM-8215 -->

* 現在，應用程式將在迷你購物車中正確呈現包含特殊字元的產品名稱。 [GitHub-29075](https://github.com/magento/magento2/issues/29075)

<!-- ENGCOM-8308 -->

* 應用程式現在為表費率設定正確的折扣包。 以前，應用產品在計算表費率時沒有應用在購物車上設定折扣的購物車規則。 [GitHub-30169](https://github.com/magento/magento2/issues/30169)

### 購物車價格規則

* 當計算訂單小計而不計入稅時，現在按預期應用購物車價格規則。 新 `Subtotal (Incl. Tax)` 已將選項添加為購物車價格規則條件。

<!-- MC-37884-->

* 使用GraphQL將價格規則與優惠券一起應用，在 **整個購物車的固定金額折扣** 操作。

### 目錄

<!-- MC-34100-->

* 應用程式現在會按預期方式在店面中顯示所有重新啟用的產品。 以前，當禁用並重新啟用產品時，應用程式在清漆頁快取被清除或儲存重新索引之前不會顯示產品，因為重新啟用產品後頁面快取未失效。

<!-- MC-37745-->

* 大目錄的部分重新索引現在可以按預期方式工作。 以前，在使用 `catalogsearch_fulltext` 部分索引器。

<!-- MC-35123-->

* 購物者現在可以根據預期重新訂購具有可定製選項的產品的發票訂單。 以前，當購物者嘗試重新訂購時，應用程式會拋出此錯誤： `{"0":"The product's required option(s) weren't entered. Make sure the options are entered and try again`。

<!-- MC-35212-->

* 您現在可以成功設定 **佈局** 將「類別設計」頁上的設定設定為 **無佈局更新**。 以前，應用程式還原為 **類別 — 全寬** 指配時 **無佈局更新** 值。

<!-- MC-35490-->

* 解決了店面產品排序問題。 以前，當應用程式為產品價格編製索引時，它偶爾會設定可配置產品的 `min_price` 和 `max_price` 到0 `catalog_product_index_price` 表，影響了店面的價格排序順序。

<!-- MC-35608-->

* 應用程式現在成功更新已標籤的屬性 `Product Type`。 以前，因為 `product_type` 屬性已保留在代碼中，當您嘗試更新時，應用程式顯示此消息 `Product Type` 屬性： `An attribute with the same code (product_type) already exists.`

<!-- MC-36214-->

* 在您保存產品時，應用程式不再更改上載的視頻在產品詳細資訊頁面的「影像和視頻」部分中的位置。 以前，為新影像位置分配了索引值（位置在清單中），如果現有影像位置未與其索引值對齊，則新影像在清單中放錯位置。

<!-- MC-36548-->

* 的 **添加到購物車** 功能現在可以按預期工作 **添加到購物車** 按鈕。 以前，如果在等待產品頁載入時多次按一下此按鈕，則應用程式拋出了以下錯誤： `Invalid Form Key. Please refresh the page`。

<!-- MC-37006 36835-->

* 當商家向類別添加或刪除禁用的產品或從類別中刪除禁用的產品時，應用程式不再刷新類別快取。 以前，應用程式刷新了相關類別的快取（儘管產品狀態）。 在保存類別時，類別也未分配，這導致類別快取被刷新。

<!-- MC-37347-->

* 目錄產品篩選 **所有儲存視圖** 範圍現在正常工作。 以前，狀態為 `Enabled` 或 `Disabled` 在僅篩選已啟用或已禁用的產品時顯示在網格中。

<!-- MC-38038-->

* 部分重新索引不再導致遺漏的產品和空類別。

<!-- MC-38315-->

* 重新訂購現在按預期工作 **使用JavaScript日曆** 已啟用(**商店** > **配置** > **目錄** > **日期和時間自定義選項**)。 以前，啟用此設定時，當您嘗試從管理員重新排序以前下達的訂單時，應用程式會顯示此錯誤： `Please specify date required option(s)`。

<!-- MC-38719-->

* 在層價格建立期間，應用程式現在在多站點部署中顯示正確的幣種。

<!-- MC-38914-->

* 產品映像自定義屬性現在已正確轉義。 的 `data-src` 屬性的值與 `src` 屬性，如預期。 以前，URL特殊符號被轉義。

<!-- MC-37665-->

* 通過REST API更新類別不再禁用 **使用預設值** 在「啟用類別」、「包括在菜單中」和「URL鍵」屬性上進行設定。

<!-- MC-35363-->

* 現在，保存類別只刷新與此類別相關的塊快取。 以前，應用程式刷新了所有類別塊的快取。

<!-- MC-30626-->

* 在多商店部署中，具有百分比價格的自定義選項的價格現在按預期轉換為活動商店的基本貨幣。 以前，使用百分比價格的自定義選項的價格被錯誤轉換。 [GitHub-26432](https://github.com/magento/magento2/issues/26432)

<!-- MC-38890-->

* 現在，應用程式成功重新建立影像，當商家使用POST發送媒體集資料時，這些影像在管理員中會按預期顯示 `rest/all/V1/products`。 以前，應用程式重新建立了這些影像，但是當商家通過POST發送媒體集資料時刪除了這些影像 `rest/all/V1/products` 如果在 `pub/media` 但是媒體上還有記錄，還有這些影像的記錄。 因此，商家只在管理員中看到佔位符，因為映像是在更新過程中建立和刪除的。

<!-- MC-36903-->

* 當您從網站中取消分配項目時，現在將按預期刪除記錄。 以前，影像在POST `rest/all/V1/products` 被處決。

<!-- MC-38413-->

* 的 `/V1/categories/{categoryId}/products` call現在將返回屬於父類別的所有產品的清單（如預期）。 以前，如果某個產品屬於父類別的多個子類別，則應用程式會引發以下類型的錯誤： `Internal Error. Details are available in the application log file. Report ID: webapi-5f8579e37db54`。  [GitHub-30461](https://github.com/magento/magento2/issues/30461)

<!-- MC-32996-->

* 的 `/V1/products/attributes/:attributeCode/options` REST終結點現在支援更新現有屬性選項。

<!-- MC-30626 ENGCOM-8475-->

* 在多商店部署中，具有百分比價格的自定義選項的價格現在按預期轉換為活動商店的基本貨幣。 以前，使用百分比價格的自定義選項的價格被錯誤轉換。 [GitHub-26432](https://github.com/magento/magento2/issues/26432)

<!-- ENGCOM-8395 -->

* 商家現在可以在產品建立期間成功保存新屬性。 以前，應用程式未保存屬性，並在商家嘗試保存屬性時將其重定向到商店視圖首頁。 [GitHub-30362](https://github.com/magento/magento2/issues/30362)

<!-- ENGCOM-7997 -->

* 上的產品網格 **銷售** > **訂單** 和 **目錄** > **產品** 頁面現在會列出所有相關的商店，而不只是最近建立的商店。 [GitHub-29267](https://github.com/magento/magento2/issues/29267)

<!-- ENGCOM-6698 -->

* 產品儲存庫現在使用 `store_id` 保存現有產品的屬性值時。  以前，產品儲存庫類會覆蓋產品儲存區ID並始終分配預設儲存區ID。 [GitHub-29933](https://github.com/magento/magento2/issues/29933)

### 目錄規則

<!-- MC-35065-->

* 目錄價格規則現在可以按預期方式與產品詳細資訊頁面上的自定義選項一起使用。 以前，該頁上的產品價格不反映適用的目錄價格規則。 [GitHub-22856](https://github.com/magento/magento2/issues/22856)

<!-- MC-34265-->

* 產品和目錄快取現在按計畫過期。 以前，每天快取過期，因為 `сron` 跑 `catalogrule_apply_all` 每天一次任務，重新為所有目錄規則和相關索引器編製索引，並清除所有產品和類別的快取。

### 清理

#### 拼寫和語法清理

<!-- ENGCOM-7967 -->

* 已對「訂單失敗」頁的標題進行了準確性修訂。 以前，本頁的標題是： **我們收到你的命令！**.  [GitHub-29416](https://github.com/magento/magento2/issues/29416)

<!-- ENGCOM-8101 -->

* 已刪除中的不必要空間 `app/code/Magento/Contact/view/frontend/templates/form.phtml`。 [GitHub-29779](https://github.com/magento/magento2/issues/29779)

<!-- ENGCOM-7716 -->

* 已更正幫助消息中的錯誤 `bin/magento/setup:config:set` 命令。  [GitHub-28802](https://github.com/magento/magento2/issues/28802)

<!-- ENGCOM-8058 -->

* 在PHPDoc中為 `framework/Registry.php` 的子菜單。 [GitHub-29661](https://github.com/magento/magento2/issues/29661)

<!-- ENGCOM-8273 -->

* 從中刪除多餘的空白 `app/code/Magento/Catalog/Helper/Product/View.php`。 [GitHub-30601](https://github.com/magento/magento2/issues/30601)

<!-- ENGCOM-8181 -->

* 已更正中函式名稱中的類型 `app/code/Magento/Ui/view/base/web/js/form/element/ui-select.js`。 [GitHub-29987](https://github.com/magento/magento2/issues/29987)

<!-- ENGCOM-8478 -->

* 已更正迷你購物車中的「物料」的多個化，並已結帳訂單摘要。 [GitHub-29920](https://github.com/magento/magento2/issues/29920)

<!-- ENGCOM-8309 -->

* 已刪除標籤分層導航篩選器中內聯元素中的空白。 [GitHub-30448](https://github.com/magento/magento2/issues/30448)

<!-- ENGCOM-8056 -->

* `rl` 已更正為 `url` 在  `\Magento\Framework\Filter\Template\Tokenizer\Parameter`。 [GitHub-29185 ](https://github.com/magento/magento2/issues/29185)

#### 代碼清理

<!-- MC-37922-->

* 無關的HTML `<br>` 已從的「檢查資料」消息區域中刪除標籤  **系統**  >  **導入** 的子菜單。

<!-- ENGCOM-8028 -->

* `ChangeQuoteControl` 已重新計算。 [GitHub-29673](https://github.com/magento/magento2/issues/29673)

<!-- ENGCOM-8027 -->

* `AccessChangeQuoteControl` 其單位test已重新計算。 [GitHub-29672](https://github.com/magento/magento2/issues/29672)

<!-- ENGCOM-8053 -->

* 已更正中返回類型聲明的代碼樣式 `app/code/Magento/Captcha/CustomerData/Captcha.php`。 [GitHub-29712](https://github.com/magento/magento2/issues/29712)

<!-- ENGCOM-8288 -->

* 已更正「新建屬性」頁上按鈕清單的位置。

<!-- ENGCOM-8315 -->

* 已為前端添加正確的塊類 `viewModel` 參照示例 `\Magento\Framework\View\Element\Template` 類。 [GitHub-30450](https://github.com/magento/magento2/issues/30450)

<!-- ENGCOM-8090 -->

* 已刪除「銷售規則」表單中的冗餘欄位集。 [GitHub-29599](https://github.com/magento/magento2/issues/29599)

<!-- ENGCOM-8448 -->

* 已從 `hierarchy/edit.phtml` 的下界。

<!-- ENGCOM-8446 -->

* 已更正中的PHPdoc注釋 `app/code/Magento/CatalogImportExport/Model/Export/Product.php`。 [GitHub-30833](https://github.com/magento/magento2/issues/30833)

<!-- ENGCOM-8277 -->

* 的docblock注釋 `PublisherInterface` 已更正消息。 [GitHub-30190](https://github.com/magento/magento2/issues/30190)

<!-- ENGCOM-8264 -->

* 已更正 `getStatusByState` 的雙曲餘切值。 [GitHub-30173](https://github.com/magento/magento2/issues/30173)

<!-- ENGCOM-8235 -->

* 中的更正方法說明 `app/code/Magento/Quote/Model/Cart/Totals/ItemConverter.php`。 [GitHub-30125](https://github.com/magento/magento2/issues/30125)

<!-- ENGCOM-8242 -->

* 已刪除多個檔案中同一行中的冗餘變數分配。 [GitHub-30133](https://github.com/magento/magento2/issues/30133)

<!-- ENGCOM-8263 -->

* 已更改 `@param string $attribute` 至 `@param AbstractAttribute|string[]|string $attribute` 在 `EntityAbstract.php`。 [GitHub-30191](https://github.com/magento/magento2/issues/30191)

<!-- ENGCOM-8142 -->

* 無效的標籤(例如， `@package` 和 `@subpackage`)已從整個代碼庫中的docblocks中刪除。 [GitHub-30061](https://github.com/magento/magento2/issues/30061)

<!-- ENGCOM-8117 -->

* 構造中未使用的參數 `AdvancedPricing` 類已被刪除。 [GitHub-29531](https://github.com/magento/magento2/issues/29531)

### 可配置產品

<!-- MC-35016-->

* 按價格篩選出庫可配置產品，現在將結果顯示在正確的價格範圍內。

<!-- MC-38930-->

* 當虛擬產品的狀態從啟用更改為禁用時（反之亦然），虛擬產品不再更改類型。 以前，當產品的狀態更改時，應用程式將其類型從虛擬更改為簡單。

<!-- MC-38197-->

* 的 `getValue()` 方法在更新操作站時不再觸發致命錯誤。

<!-- MC-34444-->

* 在多個網站上提供的可配置產品不再顯示未分配給特定網站的簡單子產品。 [GitHub-28291](https://github.com/magento/magento2/issues/28291)

<!-- ENGCOM-8202 -->

* 店面產品頁面現在顯示層價格，而不按預期徵稅。 [GitHub-12225](https://github.com/magento/magento2/issues/12225)

<!-- ENGCOM-8134 8174-->

* 可配置產品的MSRP價格現已正確轉換為所選貨幣。 以前，應用程式以錯誤的幣種顯示價格並拋出以下錯誤：  `Call to a member function setAppliedTaxes() on null`。 [GitHub-26526](https://github.com/magento/magento2/issues/26526)。 [GitHub-29603](https://github.com/magento/magento2/issues/29603)

<!-- ENGCOM-8234 -->

* 商家現在可以將特定於商店的文本樣本屬性選項標籤保存為值0（零）。 以前，值0被「管理標籤」選項值替換。 [GitHub-30073](https://github.com/magento/magento2/issues/30073)

### 克隆

<!-- MC-37712-->

* 系統消息清單現在可準確反映產品更新後 `cron` 已運行，應用程式已按計畫更新產品。

<!-- ENGCOM-8164 -->

* 基於 `schedule_id` 和 `status` 已添加到 `cron_schedule` 的子菜單。 [GitHub-29601](https://github.com/magento/magento2/issues/29601)

### 自定義客戶屬性

<!-- MC-23545-->

* 應用程式現在顯示類型的客戶屬性 `file` 在「帳戶資訊」頁面上。 以前，當您嘗試保存此類型的新屬性時，應用程式會顯示以下錯誤： `The "newAttribute" attribute value is empty. Set the attribute and try again` 和 `Validation is failed`。

<!-- MC-23544-->

* 應用程式現在可以正確顯示多行自定義客戶屬性值。 以前，未顯示所有資料。

<!-- MC-36978-->

* 當購物者在建立帳戶時輸入無效的出生日期時，此應用程式現在會提醒他們。 以前，驗證程式忽略區域設定，購物者被重定向到「建立新客戶帳戶」頁，並出現無效日期錯誤。

<!-- MC-38846-->

* 現在，在結帳工作流的「付款」步驟中，將按照預期包含自定義地址屬性。

<!-- MC-38114-->

* 現在，在來賓簽出期間和「管理員和我的帳戶」訂單詳細資訊頁面上，可正確顯示自定義地址多選屬性。

<!-- MC-37101-->

* 現在，您可以在以下情況下刪除自定義客戶屬性中的前導零： `Input Type` 設定為 `Text` 和 `Input Validation` 設定為 `Numeric Only`。

<!-- MC-36721-->

* 應用程式現在成功導出包含自定義性別屬性值的客戶資料。

### 客戶

<!-- MC-35771-->

* 店面客戶帳戶頁面出生日期欄位的日曆構件現在使用指定的儲存區域設定。

<!-- MC-38498-->

* 在從管理員中籤出現有客戶的重新訂單期間，應用程式不再保存客戶地址的重複條目。

<!-- MC-37393-->

* 現在，從管理員中刪除多個客戶的所有地址將從客戶地址清單中刪除所有地址，並刪除預設開單地址和發運地址。 以前，應用產品從客戶地址清單中刪除了地址，但未刪除預設開單地址和發運地址。

<!-- MC-37377-->

* 管理員執行成批刪除地址後，「管理員客戶地址」標籤現在可以正確顯示地址計數。 以前，應用程式在其計數中包括已刪除的地址。

<!-- MC-36718-->

* 的DateTime格式 **出生日期** 已更正客戶註冊頁上的欄位。 以前，在一天前的前導零丟失。

<!-- MC-36024-->

* 日期格式驗證 **出生日期** 現在，在購物者點擊 **建立帳戶** 按鈕 以前，購物者可以輸入無效格式的值，當他們按一下 **建立帳戶** 按鈕，購物者被重定向到「建立新客戶帳戶」頁，其日期錯誤無效。

<!-- MC-33867-->

* 當管理員嘗試保存包含屬性無效資料的新客戶帳戶時，應用程式不再引發致命錯誤。

<!-- MC-36258-->

* 當客戶嘗試在以前安裝Magento Shipping且當前部署預設Luma主題的部署中訪問其購物車時，應用程式不再引發400錯誤。 以前，應用程式在向伺服器發送請求之前未過濾出以前安裝的/啟用的模組建立的節名稱，這些模組在向伺服器發送請求之前不受支援，這會生成錯誤。

<!-- MC-35812-->

* 此時，當購物者建立來賓帳戶時，應用程式將按照預期顯示一條消息 **要求確認電子郵件** 設定已啟用， `Magento\Customer\Controller\Account\CreatePost` 已覆蓋。 以前，應用程式不允許用戶註冊過程的這種類型的自定義，在這些情況下，用戶的電子郵件確認狀態被視為已完成，新用戶被自動登錄，並且未顯示錯誤消息。

<!-- ENGCOM-8039 -->

* 現在，當購物者在商店中與非預設客戶組下單時，應用程式會將購物者分配給正確的客戶組 **啟用自動分配至客戶組** 的子菜單。 [GitHub-26976](https://github.com/magento/magento2/issues/26976)

<!-- MC-39783-->

* 當索引設定為時，非預設網站在多站點部署中被刪除時，「管理員客戶」網格現在可按預期使用 **按計畫更新**。 以前，應用程式未顯示網格並引發以下錯誤：  `[2020-12-09 11:31:54] report.CRITICAL: The website with id 2 that was requested wasn't found. Verify the website and try again. \{"exception":"[object] (Magento\\Framework\\Exception\\NoSuchEntityException(code: 0): The website with id 2 that was requested wasn't found. Verify the website and try again. at /var/www/html/magento24ee/vendor/magento/module-store/Model/WebsiteRepository.php:110)"}`

### 數位

* 從Dotdigital Engagement Cloud檢索程式清單時，錯誤處理得到了改進。

* 在來賓同步期間在儲存名列中同步的值現在是預期的儲存視圖名稱。 以前，此列中包含網站名稱。

* 在保存訂單後，在訂單狀態自動化之前添加了陣列檢查。

* 解決了Composer升級的問題，這些問題是dotdigital模組依賴於 `magento/module-authorization`。

### 可下載

<!-- ENGCOM-7679 -->

* 在「我的下載產品」頁籤中，應用程式所屬訂單已部分退還後，將不再列出可下載產品。 [GitHub-28388](https://github.com/magento/magento2/issues/28388)

### 電視

<!-- MC-35934-->

* 使用的自定義屬性 `\Magento\Eav\Model\Entity\Attribute\Backend\ArrayBackend` 現在，如果在API調用建立產品時負載中未提供值，則使用預設值。

### 電子郵件

<!-- ENGCOM-7961 -->

* `\Magento\Config\Model\Config\Source\Email\Template::toOptionArray` 在 `setPath()` 未調用之前 `toOptionArray()`。 [GitHub-29315](https://github.com/magento/magento2/issues/29315)

<!-- MC-36777-->

* 當您按一下「HTML」時，應用程式現在可以正確將純文字檔案轉換為 **返回HTML版本** 載入電子郵件模板時。

<!-- MC-34803-->

* 發送給包含部分發票的客戶的電子郵件現在包含準確的項目小計。 以前，此電子郵件中的小計是訂購數量的總和，而不是開票數量的總額。

<!-- MC-38337-->

* 應用程式現在向所有具有有效電子郵件地址的相關客戶發送電子郵件提醒。 以前，應用程式在遇到一個無效地址後停止向客戶發送提醒電子郵件。

<!-- ENGCOM-7517 -->

* 在將產品從目錄中刪除後，以非同步模式發送銷售電子郵件現在可以按預期方式工作。 以前，非同步電子郵件發送被阻止，應用程式顯示了以下錯誤：  `main.ERROR: Cron Job sales_send_order_invoice_emails has an error: Call to a member function getData() on null. Statistics: {"sum":0,"count":1,"realmem":0,"emalloc":0,"realmem_start":73400320,"emalloc_start":37177640} [] []main.CRITICAL: Error when running a cron job {"exception":"[object] (RuntimeException(code: 0): Error when running a cron job at /var/www/html/vendor/magento/module-cron/Observer/ProcessCronQueueObserver.php:327, Error(code: 0): Call to a member function getData() on null at /var/www/html/vendor/magento/module-catalog/Helper/Image.php:502)"} []`。 [GitHub-26878](https://github.com/magento/magento2/issues/26878)

<!-- ENGCOM-8381 -->

* 在以下情況下，應用程式不再複製客戶訂單確認電子郵件 `sales_email/order_comment/enabled` 已禁用， `sales_email/order_comment/copy_method` 設定為 `bcc`。 [GitHub-29915](https://github.com/magento/magento2/issues/29915)

### 框架

<!-- MC-24195-->

* 現在，在搜索客戶時可以正確應用自定義篩選器組。 以前， `afterSearch` 函式未按預期方式執行或篩選器。 [GitHub-24576](https://github.com/magento/magento2/issues/24576)

<!-- MC-36942-->

* 現在，商店首頁上的映像已成功呈現。 以前，頁面源HTML已損壞，因為映像的base64代碼中的三個連續斜槓被誤解為注釋。

<!-- MC-37369-->

* 使用阿拉伯語區域設定篩選商店中的「管理訂單」清單中的訂單時，DatePicker現在可以正常工作(`ar_SA - Saudi Arabia`)。

<!-- MC-38344-->

* 在商家將購物車價格規則保存到部署中後，DatePicker現在會顯示正確的日期。 [GitHub-30382](https://github.com/magento/magento2/issues/30382)

<!-- MC-31085-->

* 應用程式現在正確表示阿拉伯數千分組和阿拉伯數小數分隔符符號。 以前，阿拉伯文符號被修剪。 [GitHub-26676](https://github.com/magento/magento2/issues/26676)

<!-- MC-30631-->

* 應用程式現在從資料庫中刪除過期的資料庫會話 `session` 表格。

### 常規修復

<!-- MC-38105-->

* 現在，您可以配置與中定義的處理程式不同的本機會話處理程式 `php.ini`。 以前， `SessionManager` 未將memcache設定為 `save_handler`，但是使用了 `session_handler`。 應用程式引發了此錯誤： `main.CRITICAL: Warning: SessionHandler::read(): open(127.0.0.1:11211/sess_0imeeaqmnvemdg4e3h57tat0ik, O_RDWR) failed: No such file or directory (2) in../vendor/magento/framework/Session/SaveHandler/Native.php on line 22 {"exception":"[object] (Exception(code: 0): Warning: SessionHandler::read(): open(127.0.0.1:11211/sess_0imeeaqmnvemdg4e3h57tat0ik, O_RDWR) failed: No such file or directory (2) in ../vendor/magento/framework/Session/SaveHandler/Native.php on line 22 at ../vendor/magento/framework/App/ErrorHandler.php:61)"}`。 [GitHub-24717](https://github.com/magento/magento2/issues/24717)

<!-- ENGCOM-8052 -->

* 以下對 `LoginAsCustomer` 模組：

   * 已更換 `around` 插件 `after`

   * 已刪除冗餘代碼

   * 已更換 `(bool)->getValue()` 與 `isSetFlag`。 [GitHub-29689](https://github.com/magento/magento2/issues/29689)

<!-- ENGCOM-8093 -->

* 通過通配符(*)重新載入所有客戶資料節不再導致請求 `customer/section/load` 拋出400個錯誤。 [GitHub-28154](https://github.com/magento/magento2/issues/28154)

<!-- ENGCOM-7994 -->

* 現在，應用程式會將在生產模式下呈現佈局時發生的異常傳遞給 `var/report`。 [GitHub-29606](https://github.com/magento/magento2/issues/29606)

<!-- MC-35058-->

* 商家現在可以按照預期從類別中取消分配產品。 以前，應用程式拋出了與此錯誤類似的錯誤： `Could not save product "4" with position 0 to category 3`。

<!-- ENGCOM-7527 -->

* 當不存在的客戶請求重置密碼時，應用程式現在會引發異常。 [GitHub-26288](https://github.com/magento/magento2/issues/26288)

<!-- MC-33687 ENGCOM-8497-->

* 當管理員在上載具有此屬性值的檔案時嘗試保存包含客戶屬性無效值的客戶帳戶時，應用程式現在會顯示一條資訊性錯誤消息。 以前，應用程式引發了致命錯誤。 [GitHub-30295](https://github.com/magento/magento2/issues/30295)

<!-- ENGCOM-8400 -->

* 應用程式現在應用 **HTML打印視圖徽標** 配置設定，按預期儲存發票PDF。 [GitHub-24730](https://github.com/magento/magento2/issues/24730)

<!-- ENGCOM-8425 -->

* `static::` 已替換為 `self::` 訪問專用常數的代碼庫。 [GitHub-30781](https://github.com/magento/magento2/issues/30781)

<!-- ENGCOM-8395 -->

* 現在，當商家按一下 **建立新屬性** 按鈕。 以前，應用程式顯示一個空頁面並拋出錯誤。 [GitHub-30361](https://github.com/magento/magento2/issues/30361)

<!-- ENGCOM-8426 -->

* 應用程式不再顯示 `The coupon code has been accepted` 已刪除優惠券後的消息。 [GitHub-30255](https://github.com/magento/magento2/issues/30255)

<!-- ENGCOM-8396 -->

* 管理員現在可以將小部件分配給特定類別。 [GitHub-30009](https://github.com/magento/magento2/issues/30009)

<!-- ENGCOM-8216 -->

* 屬性選擇器 `input[type=datetime]` 已替換為較少特定的輸入類型選擇器。 [GitHub-30064](https://github.com/magento/magento2/issues/30064)

<!-- ENGCOM-8282 -->

* 應用程式現在顯示與自定義類別屬性關聯的特定儲存的值（如預期）。 [GitHub-13440](https://github.com/magento/magento2/issues/13440)

<!-- ENGCOM-8287 -->

* 此時，應用程式將顯示一個提示，詢問您按一下 **驗證增值稅編號** 地址和發運目的地屬於不同歐盟國家時，按鈕。 [GitHub-29652](https://github.com/magento/magento2/issues/29652)

<!-- ENGCOM-8031 -->

* 的 `\Magento\Catalog\Model\ImageUploader` 類已重新構造為使用新 `moveFileFromTmp` 的雙曲餘切值。 [GitHub-29598](https://github.com/magento/magento2/issues/29598)

<!-- ENGCOM-8178 -->

* 當商家嘗試建立產品屬性時，應用程式現在會顯示一條更詳盡的錯誤消息 `product_type` 和 `type_id` 代碼更具說明性。 [GitHub-28479](https://github.com/magento/magento2/issues/28479)

<!-- ENGCOM-8135 -->

* 已更正的驗證邏輯 **客戶令牌生存時間（小時）**  和 **管理令牌生存時間（小時）** 管理員上的欄位 **商店**  >  **配置** >  **服務**  > **OAuth** 的子菜單。 [GitHub-29502](https://github.com/magento/magento2/issues/29502)

<!-- ENGCOM-8132 -->

* 應用程式現在可以正確解析包含 `}}` 在「小部件內容」欄位中。 [GitHub-12087](https://github.com/magento/magento2/issues/12087)

<!-- ENGCOM-8098 -->

* 現在，您可以從「產品類別」頁中刪除篩選器。 以前，當您嘗試刪除篩選器時，應用程式不允許您刪除篩選器並顯示以下錯誤：  `Something went wrong`。 [GitHub-8538](https://github.com/magento/magento2/issues/8538)

<!-- ENGCOM-8050 -->

* `Magento\Framework\MessageQueue\ConfigInterface` 現在可在可選模組時實例化 `Magento_MessageQueue` 已禁用。 以前，應用程式引發了以下錯誤： `PHP Fatal error:  Uncaught Error: Cannot instantiate interface Magento\Framework\MessageQueue\ConfigInterface in /var/www/magento2/magento2/lib/internal/Magento/Framework/ObjectManager/Factory/AbstractFactory.php:121`。 [GitHub-26080](https://github.com/magento/magento2/issues/26080)

<!-- ENGCOM-7312 -->

* 確定應用程式何時可以從永久儲存中檢索電子郵件值的邏輯已得到改進。 以前，當未註冊用戶在首次完成電子郵件欄位後返回簽出頁時，在簽出頁上顯示的應用程式填充了密碼欄位。 [GitHub-26903](https://github.com/magento/magento2/issues/26903)

<!-- ENGCOM-7777 -->

* 失蹤 `aclResource` 屬性已添加到管理標題 `AdminNotification` 工具欄。 以前，即使管理員用戶沒有角色資源權限查看管理員通知工具欄條目也是可見的。 [GitHub-29067](https://github.com/magento/magento2/issues/29067)

<!-- ENGCOM-8022 -->

* 的 `framework/database/select` `where` 函式現在處理 `type` 正確。 [GitHub-29590](https://github.com/magento/magento2/issues/29590)

<!-- ENGCOM-8260 -->

* 低效使用 `array_merge` in循環在整個代碼庫中都得到了改進，這在幾個地方（包括靜態內容部署過程中）提高了效能。 [GitHub-30183](https://github.com/magento/magento2/issues/30183)

<!-- ENGCOM-8445 -->

* 預設的管理會話生存期已從加密模組移動到安全模組。 [GitHub-30859](https://github.com/magento/magento2/issues/30859)

<!-- ENGCOM-8425 -->

* 應用程式現在檢查類中的專用常數，並顯示警告（如果有） `static::` 打給他們。 以前，應用程式引發了以下錯誤： `Undefined class constant`。

<!-- ENGCOM-8326 -->

* 添加對符號連結的支援 `root` 在錯誤頁和維護模式下。 以前，如果 `root` 或 `magento/pub` 被連結到另一個目錄，錯誤處理器(`Magento\Framework\Error\Processor`)未生成正確的視圖檔案URL。 [GitHub-30296](https://github.com/magento/magento2/issues/30296)

<!-- ENGCOM-8087 -->

* 已添加缺失 `order_data` 陣列 `EmailSender` 類。 這使這些類與Magento的建議一致，即使用標量變數而不是電子郵件模板中的對象。 [GitHub-29604](https://github.com/magento/magento2/issues/29604)

### GraphQL

<!-- MC-37615-->

* 現在，GraphQLURL解析程式正確處理查詢參數。 以前，在處理帶參數的SEO友好URL時返回NULL。

<!-- ENGCOM-8422 -->

* 現在，GraphQLURL解析程式正確處理CMS頁層次。 以前，它返回NULL。 [GitHub-30474](https://github.com/magento/magento2/issues/30474)

<!-- MC-38209-->

* 產品的查詢 `categories.breadcrumbs` 資料不再返回父類別被禁用的類別的breadcrumb資料。 [GitHub-30468](https://github.com/magento/magento2/issues/30468)

<!-- MC-38407-->

* 禁用URL重寫後，類別影像的路徑將正確返回。

<!-- MC-36648-->

* 當在GraphQL密碼重置操作期間發生錯誤時，應用程式現在返回更詳細的消息。 [GitHub-30179](https://github.com/magento/magento2/issues/30179)

<!-- MC-38078-->

* 現在，當快取查詢結果時，產品位置將按GraphQL查詢結果中的預期更新。

<!-- MC-35355-->

* 的 `products` 查詢現在返回預期結果 `category_id`  篩選器是使用 `in` 的雙曲餘切值。 [GitHub-30349](https://github.com/magento/magento2/issues/30349)

<!-- ENGCOM-8219 -->

* 將規則添加到 `editorconfig` 支援縮進JSON和YAML檔案兩個空格。 [GitHub-30066](https://github.com/magento/magento2/issues/30066)。 [GitHub-30063](https://github.com/magento/magento2/issues/30063)

<!-- ENGCOM-8079 -->

* 的 `FlushCacheByTags` 類已更新為使用後插件，而不是使用後插件。 [GitHub-29558](https://github.com/magento/magento2/issues/29558)

<!-- ENGCOM-8370 -->

* 中的代碼 `checkout_index_index.xml` 檔案已通過刪除 `sortOrder` 從 `messages`。 `authentication`。 `progressBar`。 `estimation`, `sidebar checkout` 元件。 [GitHub-30550](https://github.com/magento/magento2/issues/30550)

<!-- ENGCOM-8379 -->

* 內容 `calc` 現在已被轉移，這樣就正確了 `calc` CSS輸出檔案中的值。 以前，應用程式返回的錯誤 `calc` 值。 [GitHub-30542](https://github.com/magento/magento2/issues/30542)

<!-- ENGCOM-8030 -->

* URL重寫生成器現在設定類別對象 `url_key`。 `url_path`,  `store_id` 在保存全局作用域的類別URL重寫時預設儲存值。 以前，它保存了 `url_key`。 `url_path`, `store_id` 上次處理的儲存ID的值。 [GitHub-29585](https://github.com/magento/magento2/issues/29585)###分組產品

<!-- MC-35361-->

* 產品查詢現在將返回分組產品的所有預期資料。 以前， `product_links` 是空陣列。

<!-- MC-37718-->

* 當所有子簡單產品都出貨時，分組產品現在在產品編輯頁面上列為出貨。

<!-- MC-37249-->

* 當其子簡單產品的狀態更改為庫存不足時，分組產品的狀態現在會在產品編輯頁面上正確更新。 以前，已分組產品的父庫存物料在其子庫存狀態更改後未更新。

<!-- ENGCOM-8250 -->

* `\Magento\Widget\Controller\Adminhtml\Widget\Instance\Validate` 現在，將短語結果值識別為錯誤消息，並在構件驗證期間將其輸出給用戶。 [GitHub-27397](https://github.com/magento/magento2/issues/27397)

<!-- ENGCOM-8311 -->

* 中類別屬性的硬編碼清單  `Magento\Catalog\Model\Category\DataProvider::getFieldsMap()` 已替換為從快取生成的屬性清單。 [GitHub-13440](https://github.com/magento/magento2/issues/13440)

<!-- ENGCOM-7759 -->

* 冗餘散列 `req.http.host/client.ip` 清漆內置VCL處理散列。 [GitHub-29988](https://github.com/magento/magento2/issues/29988)

<!-- ENGCOM-8302 -->

* 已向 `Magento_Ui` 檔案上載程式。 [GitHub-29557](https://github.com/magento/magento2/issues/29557)

<!-- ENGCOM-8405 -->

* 安 `acl.xml` 不一致時 `Magento_LoginAsCustomerAssistance` 已啟用，但 `Magento_LoginAsCustomerAdminUi` 或 `Magento_LoginAsCustomerLog` 已禁用。 以前，當具有這些憑據的管理員嘗試登錄到管理員時，應用程式顯示一個空白頁，並在以下情況下拋出此錯誤：  `Exception #0 (LogicException): Could not create an acl object: Invalid Document Element 'resource': The attribute 'title' is required but missing. Line: 13`。 [GitHub-30680](https://github.com/magento/magento2/issues/30680)

<!-- ENGCOM-8157 -->

* 應用程式不再拋出 `Undefined class constant` 錯誤 `Interceptor` 在插件建立過程中生成。 [GitHub-28981](https://github.com/magento/magento2/issues/28981)。 [GitHub-29879](https://github.com/magento/magento2/issues/29879)

<!-- ENGCOM-8108 -->

* 應用程式現在可以正確處理非同步批量操作的消息傳遞和日誌記錄。 以前，雖然產品已更新，但 `magento_operation` 和 `queue_message_status` 表更新不正確，系統消息不正確。 [GitHub-29718](https://github.com/magento/magento2/issues/29718)

<!-- ENGCOM-8388 -->

* 現在，當購物者按一下「設定新密碼」頁時，會按照預期將其重定向到「設定新密碼」頁 **設定新密碼** 重置密碼電子郵件 **要求確認電子郵件** 為儲存啟用。 此前，購物者被重定向回 **忘記密碼** 按鈕。 [GitHub-27954](https://github.com/magento/magento2/issues/27954)

<!-- ENGCOM-8337 -->

* 使用預設值保存行系統配置時，已更正陣列到字串轉換錯誤。 [GitHub-30314](https://github.com/magento/magento2/issues/30314)

<!-- ENGCOM-8440 -->

* 現在可以為消息隊列設定參數。 [GitHub-30216](https://github.com/magento/magento2/issues/30216)

<!-- ENGCOM-8384 -->

* 基本檔案收集器現在注意到 `AppState->emulateAreaCode()`。 [GitHub-39656](https://github.com/magento/magento2/issues/29656)

<!-- ENGCOM-8441 -->

* 新 `BlockByIdentifier` 類支援基於CMS塊標識符檢索佈局塊。 因此，當CMS塊從快取中刪除時，應用程式也會清除佈局塊快取。 [GitHub-28309](https://github.com/magento/magento2/issues/28309)

<!-- ENGCOM-8385 -->

* 已更正隊列中數字參數轉換的問題。 以前，當您聲明隊列時使用數字 `type` 參數 `queue_topology.xml`，參數值被轉換為字串。 [GitHub-29615](https://github.com/magento/magento2/issues/29615)

### GraphQL

<!-- MC-37615-->

* 的 `urlResolver` 查詢現在可以正確處理查詢參數。

<!-- ENGCOM-8422 -->

* 的 `urlResolver` 當將自定義CMS節點和頁指定為輸入時，query不再返回NULL。 [GitHub-30474](https://github.com/magento/magento2/issues/30474)

<!-- MC-38209 ENGCOM-8386-->

* 的 `category` 查詢不再返回已禁用的父類別的子類別。 [GitHub-30468](https://github.com/magento/magento2/issues/30468)

<!-- MC-38407-->

* 的 `category` 當禁用URL重寫時，query現在返回類別影像的正確路徑。

<!-- MC-36648 8321-->

* 的 `resetPassword` 現在，當發生錯誤時，突變將返回更具資訊性的消息。 [GitHub-30179](https://github.com/magento/magento2/issues/30179)

<!-- MC-38078 ENGCOM-8504-->

* 快取的 `products` 當產品職位更改時，查詢將按預期無效。 [GitHub-30467](https://github.com/magento/magento2/issues/30467)

<!-- MC-35355 ENGCOM-8404-->

* 的 `products` 查詢現在返回預期結果 `category_id` 篩選器是使用 `in` 的雙曲餘切值。 [GitHub-30349](https://github.com/magento/magento2/issues/30349)

<!-- ENGCOM-8373 -->

* 的 `categories` 和 `categoryList` 查詢現在根據類別權限配置和父類別ID考慮類別可用性。 [GitHub-29880](https://github.com/magento/magento2/issues/29880)。 [GitHub-30624](https://github.com/magento/magento2/issues/30624)

<!-- MC-37603-->

* 的 `updateProductsInWishList` 現在，變異正確驗證wishlist項。 [GitHub-30467](https://github.com/magento/magento2/issues/30467)

<!-- ENGCOM-8430 PWA-1107-->

* 中的多個屬性已棄用 `ProductInterface` 和 `CategoryInterface` 防止在店面使用。 [GitHub-30625](https://github.com/magento/magento2/issues/30625)

* 當將類別權限設定為隱藏價格時，價格現在將隱藏在產品查詢結果中。 [GitHub-29926](https://github.com/magento/magento2/issues/29926)

<!-- MC-36898 PWA-1299-->

* 您現在可以使用 `addProductsToWishList` 變異，將具有用戶定義的量的捆綁產品添加到願望清單。

<!-- MC-36946 -->

* GraphQL添加到購物車操作的響應時間已縮短。

<!-- ENGCOM-8099 -->

* 的 `products` 查詢現在按預期返回層價格值。 [GitHub-29168](https://github.com/magento/magento2/issues/29168)

<!-- ENGCOM-7528 -->

* 已刪除冗餘 `getMappedNums` 從循環 `lib/internal/Magento/Framework/GraphQl/Query/EnumLookup.php`。 [GitHub-30031](https://github.com/magento/magento2/issues/30031)

<!-- ENGCOM-8172 -->

* 的 `products` 查詢在查詢的產品具有禁用的相關產品時不再返回錯誤。 [GitHub-28892](https://github.com/magento/magento2/issues/28892)

<!-- MC-37395 -->

* 的 `cart` 查詢現在返回已轉換為正確貨幣（預設顯示貨幣）的價格。 以前，查詢以基本貨幣返回物料價格值，並且貨幣代碼以預設顯示貨幣返回。

<!-- MC-37388-->

* GraphQL現在尊重目錄權限。 應用程式將限制返回的項目 `products` 基於購物者客戶組的查詢。

<!-- MC-39690-->

* 已添加 `customizable_option` 屬於實現的多個資料類型 `CartItemInterface`。

<!-- MC-39744-->

* 添加的屬性 `storeConfig` 查詢以返回儲存、儲存組和網站資訊。

<!-- MC-37414-->

* 恢復 `SelectedCustomizableOption.type` 屬性。 另外， `customizable_options` 屬性 `CartItemInterface` 現在為非null。

<!-- MC-23860-->

* 的搜索功能 `products` 查詢不再返回已啟用類別權限的項目。

<!-- MC-37726-->

* 的 `products` query為具有多幣種的儲存視圖返回正確的貨幣。

<!-- MC-37727-->

* 標籤 `products` 查詢篩選器現在可返回轉換的值（如果適用於非預設儲存視圖）。

<!-- MC-37728-->

* 購物車禮品卡上的固定儲存貨幣金額。

<!-- MC-38443-->

* 已添加 `ConfigurableProductOptionsSelection` 資料類型，它包含與產品的可選可配置選項對應的元資料。 在 `products` 查詢以最小化購物者選擇可配置產品選項時顯示的媒體集項目數。

### 影像

<!-- MC-36942-->

* 現在，商店首頁上的映像已成功呈現。 以前，頁面源HTML已損壞，因為映像的base64代碼中的三個連續斜槓被誤解為注釋。

<!-- ENGCOM-8116 -->

* 對 `fileinfo` 已從CMS模組中刪除擴展。 以前，當您嘗試使用映像上載程式上載映像時，應用程式拋出錯誤，當您按一下 **插入影像** 按鈕。 [GitHub-24332](https://github.com/magento/magento2/issues/24332)。 [GitHub-16531](https://github.com/magento/magento2/issues/16531)。 [GitHub-29852](https://github.com/magento/magento2/issues/29852)

<!-- ENGCOM-8020 -->

* 增加了對讀取的支援 `exif_image.png` 或 `exif-image.jpeg` 元資料。 [GitHub-1449](https://github.com/magento/adobe-stock-integration/issues/1449)

<!-- ENGCOM-8296 -->

* CMYK影像顏色現在已正確呈現。 當Imack適配器現在檢測到開啟的影像具有CMYK色彩空間時，色彩空間將轉換為SRGB。 以前，這些影像是用反相顏色呈現的。 [GitHub-22375](https://github.com/magento/magento2/issues/22375)

<!-- ENGCOM-8251 -->

* 布爾值不再設定為 `image_with_border.phtml`。 冗餘 `max-width` 和 `height` 已從中刪除設定 `.product-image-photo`。 （這些值已通過重置樣式在影像上全局設定。） [GitHub-30186](https://github.com/magento/magento2/issues/30186)

### 導入/導出

<!-- MC-35081-->

* 客戶地址 `region_id` 不再分配 `NULL` 使用CSV檔案導入客戶地址時的值(`entity type = "customer address"` 和 `import behavior = "add/update"`)，從中刪除某些欄位值。

<!-- MC-35295-->

* 現在，您可以在導入期間在店面隱藏產品影像。

<!-- MC-35836-->

* 當導入的產品 `qty` 設定為0但 `is_in_stock set` 在CSV檔案中，產品未列在類別頁面中，產品詳細資訊頁面將其標識為庫存不足。 以前，導入後，這些值的產品在店面上可見。

<!-- MC-38433-->

* CSV導入不再忽略 `dropdown` 和 `textarea` 附加屬性的值。 以前，導入期間未更新這些屬性值。

<!-- MC-37933-->

* 產品導出CSV檔案現在按預期顯示在導出CSV檔案的「管理」清單中。 以前，運行以下命令時，應用程式引發錯誤： `bin/magento queue:consumers:start exportProcessor --single-thread --max-messages=10000`。

<!-- MC-37672-->

* 在導入包含孟加拉語（孟加拉語）字母表字元的CSV資料時，應用程式不再引發錯誤。

<!-- MC-36410-->

* 管理員按一下時，應用程式現在會顯示一條資訊性錯誤消息 **檢查資料** 在Chrome中工作時，導入自導出以來已更改的檔案。 以前，應用程式顯示控制台錯誤，但未告訴用戶如何繼續。

<!-- ENGCOM-8252 -->

* 當您多次導入同一產品CSV資料時，應用程式不再複製產品映像。 [GitHub-21885](https://github.com/magento/magento2/issues/21885)

<!-- ENGCOM-8262 -->

* 中的影像檔案名限制為90個字元 `vendor/magento/framework/File/Uploader.php` 已刪除。  以前，目錄和檔案名長度不能超過255個字元。 應用程式導入的產品包含的映像的檔案名超過此限制，但未導入映像檔案。 [GitHub-29377](https://github.com/magento/magento2/issues/29377)

<!-- ENGCOM-8153 -->

* 現在可以成功將優惠券代碼導出為CSV或XML。 以前，當您按一下時，應用程式顯示404錯誤 **導出CSV** 或 **導出XML** 當你試圖出口優惠券時。 [GitHub-29277](https://github.com/magento/magento2/issues/29277)

<!-- ENGCOM-8252 -->

* 導入包含映像的CSV檔案後，現在將刪除重複的產品映像。 [GitHub-14398](https://github.com/magento/magento2/issues/14398)。 [GitHub-21885](https://github.com/magento/magento2/issues/21885)

### 索引

<!-- MC-38003-->

* 我們改進了部分索引器的效能。 現在，應用程式將清除每個1000-ID批小版本更改的快取ID。 快取上下文不再累積ID。 以前，快取上下文為每個1000-ID批小版本累計的快取ID，並清除每個小版本上的相同ID集。

<!-- ENGCOM-7929 -->

* 已糾正部分重新索引系統和完全重新索引系統之間的不一致。 現在，兩個索引系統都使用相同的代碼，這些代碼工作正常。 以前，兩個索引系統都使用了關於共用索引器的不同邏輯，這可能導致索引器在每次運行部分重新索引系統後都被失效。 [GitHub-29478](https://github.com/magento/magento2/issues/29478)。 [GitHub-29297](https://github.com/magento/magento2/issues/29297)

<!-- MC-38168-->

* 我們解決了手動索引器導致類別頁空或類別頁上產品計數減少的問題。 在以下情況下發生類別頁或產品計數不完整的問題：

   * 這樣 `catalogsearch_fulltext` 和 `catalog_product_price` 部分索引器在大型目錄上執行，直到這些索引器完成執行。

   * 已在 `catalog_category_product` 或 `catalog_product_category` 同時，對其中一個指數執行了完全的重新指數。 這兩個索引過程可能會發生衝突，導致類別頁中缺少產品。

   * `bin/magento indexer:reindex inventory` 在大目錄上執行。 類別頁中缺少產品，直到 `catalogsearch_fulltext` 部分索引器已完成執行。

<!-- MC-39700-->

* 索引器已添加到 `Magento_Bulk` MySQL表，它提高了批量操作的效能。

<!-- MC-38806-->

* 現在，資料庫表中的注釋可以準確地反映重新編製索引後的表狀態(`bin/magento indexer:reindex`)。 以前，重新編製索引後的表注釋包含的值與重新安裝後包含的注釋的值相同。

<!-- ENGCOM-7542 -->

* 的 `SELECT entity_id IN` 在實施MariaDB v.10.3.18的部署中改進了語句，這提高了目錄類別索引的效能。 [GitHub-25199](https://github.com/magento/magento2/issues/25199)

<!-- ENGCOM-8237 -->

* Magento Open Source通過消除每個索引器實例多次刷新標籤而提高了快取效能。 [GitHub-29890](https://github.com/magento/magento2/issues/29890)

### 基礎設施

<!-- MC-34353-->

* 你現在可以 `app/etc/env.php` 將消息代理從MYSQL更改為AMQP。

<!-- MC-38242-->

* 在相關的JavaScript庫中已更正了產品數量的小數值余數計算問題。 應用程式先前錯誤地計算了超過兩位的小數分數，隨後顯示了不正確的消息。

<!-- MC-38993 ENGCOM-8473-->

* 的 `\Magento\Authorization\Model\Rules::update` 方法已棄用。  [GitHub-29128](https://github.com/magento/magento2/issues/29128)

<!-- ENGCOM-8000 -->

* 當從UTC轉換日期對象時，應用程式不再引發致命錯誤。 以前，在特定條件下， `convertConfigTimeToUtc` 方法引發異常。 [GitHub-29525](https://github.com/magento/magento2/issues/29525)

<!-- ENGCOM-7987 -->

* `DataObject` 已替換為 `\Magento\MediaGalleryCatalogUi\Ui\Component\Listing\Columns\Thumbnail::prepareDataSource`。[GitHub-1711](https://github.com/magento/adobe-stock-integration/issues/1711)

<!-- ENGCOM-7914 -->

* 的 `RequireJS` 解析程式不再無法檢測到被阻止的資源。 以前，解析程式未正確檢測是否載入或處理了頁面上的所有資源，而且該頁面仍在載入。 [GitHub-28116](https://github.com/magento/magento2/issues/28116)

<!-- ENGCOM-8229 -->

* 屬性儲存庫代碼驗證現在涉及 `Magento\Eav\Model\Entity\Attribute::ATTRIBUTE_CODE_MAX_LENGTH` 而不是硬編碼值。 [GitHub-29017](https://github.com/magento/magento2/issues/29017)

<!-- MC-35699-->

* HTML小化不再從PHTML檔案中的HTML字串中去除三斜槓(//)。 以前，在進行精簡時，三斜槓會被解釋為注釋，在部署時，生成的PHTML檔案中將完全刪除其餘的線。

<!-- MC-38201-->

* 商家現在可以在表列級別而不是表級別上配置索引器預訂。 已將新參數添加到 `\Magento\Framework\Mview\View\Subscription` 允許對特定視圖或表組合忽略列。 [GitHub-30243](https://github.com/magento/magento2/issues/30243)

<!-- MC-30171-->

* 按一下 **添加到購物車** 「產品」頁之前的按鈕JavaScript已完全初始化，不再導致重複 `form_key` 值。 以前，產品可以通過快取添加到購物車 `form_key` 觸發異常的值。 當 **添加到購物車** 在JavaScript完全初始化之前按一下，然後 `form_key` 在表單資料中發送的值與用戶會話不匹配，並且產品未添加到購物車。 [GitHub-13746](https://github.com/magento/magento2/issues/13746)

<!-- ENGCOM-8107 -->

* 當前cURL客戶端現在會考慮不區分大小寫的標頭名稱。 以前， `Set-Cookie` 比較區分大小寫，這可能導致某些HTTP伺服器出現問題。 [GitHub-29524](https://github.com/magento/magento2/issues/29524)

<!-- ENGCOM-8360 -->

* 已更新XSD URN格式 `api-functional` 和test案例XML檔案。 [GitHub-30552](https://github.com/magento/magento2/issues/30552)

<!-- ENGCOM-8295 -->

* 事件前置詞和事件對象已添加到目錄產品選項值集合中，以改進集合載入的定製 `\Magento\Catalog\Model\ResourceModel\Product\Option\Value\Collection`。 [GitHub-29621](https://github.com/magento/magento2/issues/29621)

<!-- ENGCOM-8261 -->

* 所有出現的 `array_merge` 已重構為使用編碼標準中推薦的格式。 [GitHub-30005](https://github.com/magento/magento2/issues/30005)

<!-- ENGCOM-7718 -->

* A `head.additional` 類型塊 `\Magento\Framework\View\Element\Text\ListText` 已添加到 `adminhtml` `default` 佈局(按 `magento2/module-base`)。 [GitHub-29165](https://github.com/magento/magento2/issues/29165)

<!-- ENGCOM-8312 -->

* 已將缺少的轉義URL方法添加到佈局模板模組構件。 [GitHub-30036](https://github.com/magento/magento2/issues/30036)

<!-- ENGCOM-8127 -->

* 的 `\Magento\Framework\Filesystem\Io\File::read()` 方法現在與 `\Magento\Framework\Filesystem\Io\IoInterface::read()`。 [GitHub-27866](https://github.com/magento/magento2/issues/27866)

### 克拉爾納

* 已刪除對PayPal模組的依賴項。 [GitHub-29421](https://github.com/magento/magento2/issues/29421)

### 記錄

<!-- ENGCOM-8443 -->

* 的 `Magento_Logging` 現在，模組正確註冊了新值以及前面的值。 以前，「更改前值」列中的值顯示N/A，而不管這是第一次更改還是下一次更改，或是當返回預設值時。 [GitHub-26943](https://github.com/magento/magento2/issues/26943)

### 媒體集

<!-- ENGCOM-8014 -->

* 管理員 **商店**  >  **配置**  >  **高級**  >  **系統** 已更新頁面以顯示正確的產品名稱（媒體集）。 包括了對用戶介面的次要重新設計。 [GitHub-1738](https://github.com/magento/adobe-stock-integration/issues/1738)

<!-- ENGCOM-8019 -->

* 「媒體集」影像說明的「在中使用」部分中的連結現在顯示一個網格，該網格已按照預期被選定影像過濾。 以前，顯示的網格的標題不正確，清單條目也不準確。 [GitHub-1694](https://github.com/magento/adobe-stock-integration/issues/1694)

<!-- ENGCOM-8019 -->

* 現在，您可以成功編輯媒體集中的多個影像。 以前，在向一個影像添加標籤後，無法將標籤添加到第二個影像。 [GitHub-1755](https://github.com/magento/adobe-stock-integration/issues/1755)

<!-- ENGCOM-8015 -->

* 在從媒體集中的影像中刪除標籤後，「標籤」下拉菜單現在按預期為空。  [GitHub-1703](https://github.com/magento/adobe-stock-integration/issues/1703)

<!-- ENGCOM-8146 -->

* 現在支援對媒體集同步隊列消息進行批處理。 [GitHub-1724](https://github.com/magento/adobe-stock-integration/issues/1724)

<!-- ENGCOM-8064 -->

* 當您嘗試開啟媒體集時，應用程式現在會按預期顯示404頁 **增強的媒體集** 已禁用。 [GitHub-1760](https://github.com/magento/adobe-stock-integration/issues/1760)

<!-- ENGCOM-8072 -->

* `MediaGalleryMetadata` 現在，如果出現異常，跳過段讀取器，而是解析並按預期顯示影像元資料。 以前，由於 `exif_read_data` 段讀取器。 [GitHub-1782](https://github.com/magento/adobe-stock-integration/issues/1782)

<!-- ENGCOM-8069 -->

* 資料夾名稱長度不再阻止將影像上載到媒體集。 媒體集現在將路徑列設定為類型 `text`。 [GitHub-1778](https://github.com/magento/adobe-stock-integration/issues/1778)

<!-- ENGCOM-8217 -->

* 當從媒體集插入格式副本時，影像上載程式現在顯示正確的影像大小。 [GitHub-1806](https://github.com/magento/adobe-stock-integration/issues/1806)

<!-- ENGCOM-8467 -->

* 路徑驗證已添加到 `Mediagallery` 上載程式插件。 以前，驗證失敗，應用程式在 **啟用舊媒體集** 已禁用。 [GitHub-30649](https://github.com/magento/magento2/issues/30649)

<!-- ENGCOM-8057 -->

* `Magento_Cms::media_gallery` 已為新媒體集添加並強制ACL子資源，以支援為以下離散操作配置的權限：

   * 上載資產
   * 將資產插入內容
   * 刪除資產
   * 建立資料夾
   * 刪除資料夾。 [GitHub-1487](https://github.com/magento/adobe-stock-integration/issues/1487)

<!-- ENGCOM-8047 -->

* 不再裁剪長媒體集文本字串和資料夾名稱。 以前，應用程式顯示剪切的文本和影像並顯示以下消息：  `We couldn't find any records`。 [GitHub-1763 ](https://github.com/magento/adobe-stock-integration/issues/1763)。 [GitHub-1758 ](https://github.com/magento/adobe-stock-integration/issues/1758)

<!-- ENGCOM-8042 -->

* 應用程式不再顯示 **添加選定項** 按鈕。 [GitHub-1769](https://github.com/magento/adobe-stock-integration/issues/1769)

<!-- ENGCOM-8047 -->

* 現在，篩選器將按預期在 **內容**  >  **媒體集** 類別網格。 [GitHub-1763 ](https://github.com/magento/adobe-stock-integration/issues/1763)

<!-- ENGCOM-8183 -->

* 庫多斷點選項配置現在可以按預期工作。 以前，斷點選項配置無法正常工作，因為 `mediaCheck` 已在頁面載入時觸發退出媒體查詢功能。 [GitHub-29933](https://github.com/magento/magento2/issues/29933)

### MFTF

<!-- ENGCOM-8359 -->

* 將重複操作替換為操作組 `CheckStaticBlocksTest`。 [GitHub-30561](https://github.com/magento/magento2/issues/30561)

<!-- ENGCOM-8267 -->

* `AdminUpdateCategoryAndMakeInactiveTest` 和 `VerifyChildCategoriesShouldNotIncludeInMenuTest` 已重新分類，以符合MFTF的最佳做法。 [GitHub-30058](https://github.com/magento/magento2/issues/30058)

<!-- ENGCOM-8458 -->

* 已刪除重複 `AdminOpenCMSBlocksGridActionGroup`。 [GitHub-30896](https://github.com/magento/magento2/issues/30896)

<!-- ENGCOM-8156 -->

* 已更換 `AdminOpentCmsBlockActionGroup` 與AdminOpenCmsBlockActionGroup一起使用。 [GitHub-29839](https://github.com/magento/magento2/issues/29839)

<!-- ENGCOM-8226 -->

* 已棄用 `GoToAttributeGridPageActionGroup`。 [GitHub-30103](https://github.com/magento/magento2/issues/30103)

<!-- ENGCOM-8061 -->

* 已將操作組添加到 `Analytics` 中。 [GitHub-29500](https://github.com/magento/magento2/issues/29500)

<!-- ENGCOM-7334 -->

* 已更新 `CheckCheckoutSuccessPageAsRegisterCustomerTest` 和 `CheckCheckoutSuccessPageAsGuestTest` 以在test運行後取消建立的訂單。 [GitHub-28324](https://github.com/magento/magento2/issues/28324)

<!-- ENGCOM-8214 -->

* 已刪除 `AdminNavigateToPageGridActionGroup` 因為冗餘。 [GitHub-29838](https://github.com/magento/magento2/issues/29838)

<!-- ENGCOM-8122 -->

* 已實施 `ActionGroup` 導航至簽出頁。 [GitHub-29843](https://github.com/magento/magento2/issues/29843)

<!-- ENGCOM-8124 -->

* 已實施 `AdminOpenCreateNewCMSPageActionGroup` 導航以建立新CMS頁。 [GitHub-29824](https://github.com/magento/magento2/issues/29824)

<!-- ENGCOM-8268 -->

* 已更正媒體集的MFTFtest頁中跳過的問題。 [GitHub-30164](https://github.com/magento/magento2/issues/30164)

#### 新test

<!-- ENGCOM-7804 -->

* 已添加test，用於向管理員中的好友啟用電子郵件。 [GitHub-29145](https://github.com/magento/magento2/issues/29145)

<!-- ENGCOM-8316 -->

* 已添加一個test，以便管理員從網格中刪除CMS塊。 [GitHub-30372](https://github.com/magento/magento2/issues/30372)

<!-- ENGCOM-7933 -->

* 已添加test，用於將購物車規則應用於單個捆綁產品。 [GitHub-28921](https://github.com/magento/magento2/issues/28921)

<!-- ENGCOM-8075 -->

* 添加test以檢查 **用於** 刪除實體後，將顯示媒體集影像的資訊。 [GitHub-1774](https://github.com/magento/adobe-stock-integration/issues/1774)

#### 新建操作組

* `AssertStorefrontCustomerLogoutSuccessPageActionGroup`. [GitHub-29841](https://github.com/magento/magento2/issues/29841) <!-- ENGCOM-8121 -->

* `AdminOpenConfigurationStoresPageActionGroup`. [GitHub-29848](https://github.com/magento/magento2/issues/29848) <!-- ENGCOM-8259 -->

* `ReloadPageActionGroup`. [GitHub-30683](https://github.com/magento/magento2/issues/30683) <!-- ENGCOM-8394 -->

* `StorefrontClickRefundTabCustomerOrderViewActionGroup`. [GitHub-30032](https://github.com/magento/magento2/issues/30032) <!-- ENGCOM-8203 -->

* `AdminOpenAdminThreeDSecurePageActionGroup`. [GitHub-29845](https://github.com/magento/magento2/issues/29845) <!-- ENGCOM-8115 -->

* `AdminCustomerClickFirstRowEditLinkActionGroup`.  [GitHub-29501](https://github.com/magento/magento2/issues/29501) <!-- ENGCOM-8043 -->

* `StorefrontClickAddToCartButtonActionGroup`. [GitHub-29823](https://github.com/magento/magento2/issues/29823) <!-- ENGCOM-8113 -->

* `AdminDeleteTaxRateActionGroup`. [GitHub-29940](https://github.com/magento/magento2/issues/29940) <!-- ENGCOM-8192 -->

* `AdminOpenWebConfigurationPageActionGroup`. [GitHub-29846](https://github.com/magento/magento2/issues/29846) <!-- ENGCOM-8126 -->

* `AdminOpenGeneralConfigurationPageActionGroup`. [GitHub-29847](https://github.com/magento/magento2/issues/29847) <!-- ENGCOM-8114 -->

* `AdminOrderClickSubmitOrderActionGroup`. [GitHub-29649](https://github.com/magento/magento2/issues/29649) <!-- ENGCOM-8023 -->

* `AdminOpenCatalogProductPageActionGroup`. [GitHub-29941](https://github.com/magento/magento2/issues/29941) <!-- ENGCOM-8209 -->

* `AdminClickInvoiceButtonIntoOrderActionGroup`. [GitHub-25399](https://github.com/magento/magento2/issues/25399) <!-- ENGCOM-8210 -->

* `AdminGridBulkActionGroup`. [GitHub-28324](https://github.com/magento/magento2/issues/28324)<!-- ENGCOM-7334 -->

* `AdminGridColumnShowActionGroup`. [GitHub-28324](https://github.com/magento/magento2/issues/28324)<!-- ENGCOM-7334 -->

* `AdminOpenIndexManagementPageActionGroup`. [GitHub-29825](https://github.com/magento/magento2/issues/29825) <!-- ENGCOM-8123 -->

* `AdminOpenCatalogSearchTermIndexPageActionGroup`. [GitHub-29844](https://github.com/magento/magento2/issues/29844) <!-- ENGCOM-8128 -->

* `AdminClickAddProductToggleAndSelectProductTypeActionGroup`. [GitHub-30917](https://github.com/magento/magento2/issues/30917) <!-- ENGCOM-8439 -->

* `StorefrontCheckoutClickSaveAddressButtonActionGroup`. [GitHub-30916](https://github.com/magento/magento2/issues/30916) <!-- ENGCOM-8454 -->

* `AdminOpenCurrencyRatesPageActionGroup`. [GitHub-30783](https://github.com/magento/magento2/issues/30783) <!-- ENGCOM-8432 -->

* `AdminClickGetShippingMethodsAndRatesActionGroup`. [GitHub-30782](https://github.com/magento/magento2/issues/30782) <!-- ENGCOM-8436 -->

* `AdminSelectFixedShippingMethodActionGroup`. [GitHub-30782](https://github.com/magento/magento2/issues/30782) <!-- ENGCOM-8436 -->

* `StorefrontClickProceedToCheckoutActionGroup`. [GitHub-30926](https://github.com/magento/magento2/issues/30926) <!-- ENGCOM-8438 -->

* `StorefrontOpenMyAccountPageActionGroup`. [GitHub-29842](https://github.com/magento/magento2/issues/29842) <!-- ENGCOM-8143 -->

### 新聞稿

<!-- MC-38789-->

* 管理員用戶現在可以在客戶訂閱排隊的新聞簡報時按照預期編輯客戶帳戶。 [GitHub-30645](https://github.com/magento/magento2/issues/30645)

<!-- ENGCOM-8034 -->

* 如果購物者不確認他們的新聞稿訂閱，則該應用程式現在會重新發送新聞稿訂閱確認。 [GitHub-28422](https://github.com/magento/magento2/issues/28422)

<!-- ENGCOM-8429 -->

* 現在，您可以按照預期在客戶訂閱排隊的新聞簡報時編輯客戶帳戶。 [GitHub-30645](https://github.com/magento/magento2/issues/30645)

### 付款方法

<!-- MC-35161-->

* 現在，將按照多儲存部署中的預期，在管理員中載入所有網站的付款方法。

<!-- MC-35152-->

* 當購物者的姓名包含帶重音字母時，應用程式現在可以成功完成Payflow Pro付款。 以前，付款未完成，應用程式記錄了以下錯誤： `report.CRITICAL: String to be escaped was not valid UTF-8 or could not be converted`。

#### 貝帕爾

<!-- MC-35692-->

* 現在，在從使用信用卡的付款方法切換到非信用卡付款方法後，商家可以成功地從管理員下單。 以前，當商戶按一下 **提交訂單** 按鈕，載入進程已啟動但從未完成，並且未下訂單。

<!-- MC-37649-->

* 在使用PayPal Express下達訂單時，應用程式不再建立重複訂單。 此前，當購物者試圖用PayPal Express支付訂單，但PayPal返回錯誤時，申請仍建立了訂單。 這導致商家網站上的訂單重複。 [GitHub-13952](https://github.com/magento/magento2/issues/13952)

<!-- MC-38829-->

* PayPal結算報表現在可在 **報告** > **銷售** > **PayPal結算** 如預期。 以前，應用程式未在PayPal結算報表網格中列出這些報表並顯示以下消息： `We couldn't find any records`。

<!-- MC-39442-->

* 按一下 **貝帕爾** 簽出期間的按鈕不再觸發冗餘 `web-api` 呼叫。 此前，有兩項請求被觸發，使產品費用翻了一番。

<!-- ENGCOM-8173 -->

* 現在，客戶購物者可在 **自動分配給客戶組** 的子菜單。 付款在PayPal網關上處理，訂單以Magento方式建立，購物者看到訂單感謝頁。 以前，在PayPal網關上已成功處理訂單，但未在Magento Open Source中建立訂單。 反之，購物者被重定向到訂單審閱頁，應用程式在該頁顯示以下錯誤： `Failed address validation: %1" error`。 [GitHub-25399](https://github.com/magento/magento2/issues/25399)

### 效能

<!-- MC-37705-->

* 中的效能問題 `module-catalog-import-export/Model/Import/Product/Option.php` 已被處理。 減少了100 000多條記錄的出口或進口所需時間。 查看 [由於有大量產品選項，導入/導出所需時間比預期長](https://support.magento.com/hc/en-us/articles/360050695772) 知識庫文章。

<!-- MC-37799-->

* `Magento_Csp/Model/BlockCache` 已重新構造，以減少記憶體消耗和產生不必要的大型快取字串。 以前，包含動態白名單指令碼和樣式的頁面經常遇到效能問題。 [GitHub-29964](https://github.com/magento/magento2/issues/29964)

<!-- MC-37816 -->

* 我們已改進了計畫出口的目錄，其中包括10萬多種使用消費者的產品。

<!-- MC-38306 -->

* 在將禁用的產品添加或保存到類別時，應用程式不再刷新類別快取。 以前，應用程式會刷新相關類別的快取，儘管產品狀態會影響伺服器效能。

<!-- MC-38518 -->

* 在購物車中更新產品數量的頁面載入時間已經得到改善。 以前，應用程式對購物車中的每個產品執行多個單獨的查詢，這增加了頁面載入時間。

<!-- MC-39700 -->

* 索引器已添加到 `Magento_Bulk`  MySQL表，它提高了批量操作的效能。

<!-- MC-38593 -->

* 應用程式現在快取可配置產品的子ID。 這通過減少資料庫請求數量提高了頁載入效能。 [GitHub-30585 ](https://github.com/magento/magento2/issues/30585)

<!-- MC-37594 -->

* 已改進管理儀表板的載入。 以前，在頁面載入完成之前，應用程式將頁籤名稱顯示為清單。

<!-- MC-37417 -->

* 通過增加佈局快取的期限限制，Redis快取管理得到了改進。 以前，在大型部署中， Redis快取快速達到分配的最大記憶體，並且應用程式在寫操作時拋出錯誤。

<!-- ENGCOM-8016 -->

* 通過刪除中的冗餘資料庫查詢，檢出效能得到改善 `app/code/Magento/Catalog/Model/CategoryLink.php`。 [GitHub-29453](https://github.com/magento/magento2/issues/29453)

<!-- ENGCOM-8290 -->

* `Magento\Framework\DB\Adapter\Pdo\Mysql->isTableExists` 已重新構造，以提高效能。 冗餘呼叫 `SHOW TABLE STATUS` 檢查表是否存在已減少。 [GitHub-29662](https://github.com/magento/magento2/issues/29662)

<!-- ENGCOM-8258 -->

* `getPageLayoutsConfig` 現在保存在快取中，這提高了配置生成器效能。 [GitHub-29546](https://github.com/magento/magento2/issues/29546)

### 持久

<!-- MC-36647 -->

* 啟用永久購物車後，購物者在其會話cookie過期後無法再下訂單。 相反，應用程式會顯示登錄頁，以便購物者可以登錄。 以前，應用程式會下訂單。 應用程式未正確驗證永久客戶 `PHPSESSID` 已過期 `customerSession` 是從永久資訊中重新建立的。

<!-- MC-39127-->

* 現在，在購物者登錄到啟用了永久購物車的商店後，應用程式將按預期顯示歡迎消息。 以前，應用程式顯示 **不是嗎？** 登錄後的消息。

<!-- MC-38269-->

* 應用程式不再顯示 **不是嗎？** 當客戶選擇 **記住我** 選項登錄到啟用了永久購物車的部署時。

<!-- MC-37109-->

* 客戶會話過期後，應用程式不再顯示客戶購物車的內容。 以前，當來賓客戶嘗試在啟用永久購物車時簽出時，應用程式顯示此錯誤： `No such entity with cartid = 0`。

### 定價

<!-- MC-34394-->

* 連續的非同步價格更新不再互相干擾，並且每個操作都分配了正確的狀態。 以前，如果非同步價格更新失敗，則所有以下非同步價格更新都將失敗，直到相應隊列使用者重新啟動。 [GitHub-27865](https://github.com/magento/magento2/issues/27865)

### 報告

<!-- MC-36652 38925-->

* **報告** > **營銷** > **購物車中的產品** 現在僅顯示生成報告的用戶允許範圍中的記錄。 以前，所有資料都可用於所有作用域。

<!-- MC-38074-->

* 在「購物車中的產品」報表中顯示產品幣種時，應用程式現在使用在生成報告的商家的角色範圍中指定的幣種。

<!-- MC-37934-->

* 最近查看和最近比較的產品功能現在顯示管理員中不同商店和網站的統計資訊，如多商店部署中預期的那樣。 以前，這些功能沒有考慮所有商店或網站。

<!-- MC-37217-->

* 訂單報表中的價格現在使用正確的貨幣符號。

<!-- ENGCOM-8314 -->

* 當用戶按一下管理儀表板時，應用程式現在將驗證令牌是否存在 **轉到高級報告** 按鈕  如果令牌存在，應用程式將顯示「高級報告」頁。 如果未配置令牌，則應用程式將在《使用手冊》中顯示一個資訊頁。 [GitHub-25411](https://github.com/magento/magento2/issues/25411)

### 評論

<!-- MC-37117-->

* 按一下「新建審閱」(New Review)頁面時，將按預期載入 **新建審閱** 按鈕 **營銷** > **所有評論**。 按一下此頁上的某個產品將開啟該產品的預期新審閱表單。

<!-- ENGCOM-8383 -->

* 當您嘗試編輯管理員的訂單時，應用程式不再引發此錯誤 **營銷**  >  **所有評論**: `Uncaught TypeError: Event.observe is not a function`。  [GitHub-30388](https://github.com/magento/magento2/issues/30388)

### 銷售

<!-- MC-36219-->

* 的 `order_created_at` 列 `sales_shipment_grid` 現在按每次更新後的預期更新。

<!-- MC-36405-->

* 現在，您可以成功地從商店重新訂購具有自定義選項日期的產品， **使用JavaScript日曆** 的子菜單。 以前，當您嘗試重新訂購時，應用程式未將物料添加到購物車中並顯示以下錯誤： `Could not add the product with SKU "simp1" to the shopping cart: Please specify date required option(s).`

<!-- MC-36533-->

* 在啟用零小計結帳方法的部署中，當購物者簽出由總成本為0美元的虛擬產品組成的訂單時，應用程式不再立即關閉訂單。

<!-- MC-36755-->

* 應用程式在處理訂單之前不再存檔訂單。 以前，管理訂單網格上的多選操作會影響未選定訂單。

<!-- MC-37371-->

* 當沙特里亞爾(SAR)設定為基本貨幣時，貸項通知單網格現在顯示正確的貨幣符號。

<!-- MC-37880-->

* 此時，在結帳期間，應用產品將始終如一地在訂單頁上顯示發運地址資訊。

<!-- MC-38666-->

* 值 `total_qty` 現在與 `total_qty_ordered` 在銷售發票中。

<!-- MC-38717-->

* 現在，非同步發送銷售電子郵件只會為上次更新日期之後建立的訂單發送電子郵件。 以前，應用程式未按啟用非同步發送的日期篩選電子郵件。

<!-- MC-39135-->

* 現在，當從管理員處下訂單時，應用程式會按照預期發送發票電子郵件。

<!-- MC-38917-->

* 現在，當商家從管理員為客戶建立新訂單時，應用程式會在會話期間清除現有訂單資料。

<!-- MC-38915-->

* 現在，您可以更改通過管理訂單建立的新客戶的客戶組 **啟用自動分配至客戶組** 的子菜單。 您還可以根據增值稅驗證來分配客戶組。 以前，在驗證增值稅編號時，請求對象未檢查分配的請求 `group_id`。 預設情況下，它使用 `group_id`。

<!-- MC-37539-->

* 應用程式不再更改自定義訂單狀態的狀態 `Suspected Fraud` 狀態 `Processing` 在商家使用REST API建立部分發運後。

### 銷售規則

<!-- MC-34793-->

* 當購物者更改發運方法時，已基於發運方法應用的優惠券代碼將不再應用。 此前，當購物者改變送貨方式時，該應用沒有清除優惠券代碼。

<!-- MC-34649-->

* 購物者應用優惠券代碼的頻率不能比 **每個客戶的使用** 設定許可。 以前，如果購物者開啟了多個瀏覽器窗口並同時下了多個訂單，則每個訂單都會收到折扣，即使 **每個客戶的使用** 設定的值為 **1**。

### 搜索 {#search-heading}

<!-- MC-35095-->

* Elasticsearch在購物者搜索搜索同義詞時不再引發未知修飾符錯誤。 以前，擒縱器在規則運算式中缺少轉義斜槓符號，這會導致致命錯誤。

<!-- MC-37577-->

* 當將子產品配置為可見性設定為時，高級搜索不再將可配置產品的子產品作為單個搜索結果返回 **不單獨顯示**。

<!-- MC-37954-->

* 搜索結果中產品名稱的Elasticsearch排序不再區分大小寫。

<!-- ENGCOM-8329 -->

* 現在，搜索結果頁面將按照預期在 **將快取的頂級搜索結果數設定為0** 已在管理中啟用設定 **商店**  >  **配置**  >  **目錄**  >  **目錄**  > **目錄搜索**。

<!-- MC-36807-->

* 目錄搜索索引器現在執行，而不會由於Elasticsearch欄位限制而引發錯誤。 以前，應用程式引發了以下錯誤： `Limit of total fields [xxx] in index [m24dev_product_1_v10] has been exceeded`。

<!-- MC-35491-->

* 目錄搜索的效能得到了改善。 禁用 **啟用搜索建議** (**商店** > **配置** > **目錄** > **目錄搜索** )按預期工作。 以前，應用程式查詢MySQL `search_query` 表，而不是Elasticsearch自動完成搜索建議。 [GitHub-25534](https://github.com/magento/magento2/issues/25534)

<!-- MC-35256-->

* Elasticsearch現在篩選與MySQL相同的產品價格。 欄位類型 `price_*`  從 `float` 至 `double` 在Elasticsearch指數中提高精度並修正浮點誤差。

<!-- ENGCOM-8393 -->

* 已向管理員添加一個按鍵事件偵聽器，以便在輸入正斜槓時激活全局搜索表單。 [GitHub-29551](https://github.com/magento/magento2/issues/29551)

<!-- MC-24217-->

* Elasticsearch不再引發錯誤，而是在 `string` 值用於按屬性篩選產品， `integer` 或 `decimal` 後端類型。 以前，應用程式在 `exception.log`: `number format exception`。

<!-- ENGCOM-8303 -->

* Elasticsearch在搜索詞包含  `/`。  [GitHub-25886](https://github.com/magento/magento2/issues/25886)。 [GitHub-25110](https://github.com/magento/magento2/issues/25110)

* 現在，在以下情況下，將按預期禁用搜索產品查詢中選定的客戶組 **不允許目錄搜索依據** 啟用常規類別權限中的配置設定。 [GitHub-29927](https://github.com/magento/magento2/issues/29927)

<!-- ENGCOM-8466 -->

* 搜索結果不再包含同一單詞的多個引號。 [GitHub-30104](https://github.com/magento/magento2/issues/30104)

### 裝運

<!-- MC-38247 -->

* 當網路中斷中斷到DHL傳送方法的連接時，檢出過程不再失敗。 相反，應用產品會顯示其他可用的發運方法。 以前，當與DHL發運的連接中斷時，簽出過程將停止，應用程式顯示以下錯誤： `Sorry, no quotes are available for this order at this time`。 [GitHub-29902](https://github.com/magento/magento2/issues/29902)

<!-- MC-35194-->

* 描述Admin上UPS交付方法的欄位 **商店** > **配置** > **銷售** > **傳遞方法** 現在按預期啟用。

<!-- MC-35633-->

* 通過POST建立的發運 `/rest/V1/shipment` 終結點現在正確更新訂單。 以前，應用產品建立了發運，但發運狀態仍處於處理狀態。

<!-- MC-37120-->

* 在使用「收貨方多個地址」簽出之前，如果從購物車中移除其他產品，則應用程式不再從購物車中刪除簡單產品。 [GitHub-30259](https://github.com/magento/magento2/issues/30259)

<!-- MC-38031-->

* 此時，「訂單複查」頁將按預期顯示發運至多個地址的訂單的發運金額之前的稅額。

<!-- ENGCOM-8257 -->

* UPS發運跟蹤現在表示狀態 `Delivered On` 只有在已交付包時。 [GitHub-30032](https://github.com/magento/magento2/issues/30032)

<!-- MC-38825-->

* 當購物者從多個地址簽出返回購物車時，應用產品現在顯示包含虛擬產品的訂單的正確購物車小計。

<!-- MC-38682-->

* 現在，商家可以在啟用JavaScript捆綁後，從發運頁為使用FedEx發運的現有訂單建立發運標籤。 以前，當商戶按一下 **建立發運標籤** 按鈕

<!-- MC-36953-->

* 發送給客戶的發運確認電子郵件中的發運跟蹤連結現在按預期工作。 以前，此連結返回了404錯誤。

<!-- ENGCOM-8025 -->

* 當購物者使用多個地址簽出時，應用程式現在會顯示一條資訊性錯誤消息，然後刪除除虛擬產品之外的所有產品。 [GitHub-25595](https://github.com/magento/magento2/issues/25595)

<!-- ENGCOM-8253 -->

* 現在，您可以按照部分訂單的預期建立發運標籤。 以前，當您嘗試從訂單中僅為一個物料建立發運標籤時，應用程式會將所有產品添加到包中，驗證失敗。 [GitHub-29552](https://github.com/magento/magento2/issues/29552)

<!-- ENGCOM-8154 -->

* 調用時不再跳過發運方法的驗證 `/V1/guest-carts/:cartId/totals-information`。 [GitHub-25147](https://github.com/magento/magento2/issues/25147)

### 站點地圖

<!-- MC-37306-->

* 由 `cron` 現在包含正確的影像URL。 以前，在多儲存部署中生成的快取映像路徑不正確。

### 儲存

<!-- ENGCOM-7543 -->

* 管理員和主儲存交換機現在反映對管理員中儲存排序順序所做的更改。 [GitHub-13401](https://github.com/magento/magento2/issues/13401)

<!-- ENGCOM-8274 -->

* 應用程式現在會在商店視圖的頂級URL鍵更改後為類別和產品建立正確的URL。 以前，當儲存視圖的類別樹包含修改時  `url_keys`，如果類別鍵未更改，但類別父項鍵更改，則原始代碼將在建立URL時使用類別的預設儲存視圖。 [GitHub-28633](https://github.com/magento/magento2/issues/28633)

### 目標規則

<!-- MC-34998-->

* 已優化產品詳細資訊頁面的載入。 我們為資料庫表添加了索引，這些索引可針對許多情況優化目標規則條件查詢。

### 稅

<!-- MC-37666-->

* 來賓訂單的增值稅驗證不再導致應用程式使用不正確的客戶稅分類保存報價。 [GitHub-30018](https://github.com/magento/magento2/issues/30018)

<!-- MC-37761-->

* 在配置FPT時，現在可在結帳期間保存要發運到多個地址的訂單。 以前，在完成多個地址的訂單後，應用程式將顯示一個空白頁，而不是訂單成功頁。

<!-- ENGCOM-8158 -->

* 店面產品詳細資訊頁面現在按預期顯示有稅和無稅的新舊價格。 [GitHub-27500](https://github.com/magento/magento2/issues/27500)。 [GitHub-11998](https://github.com/magento/magento2/issues/11998)

### Test

<!-- MC-37364-->

* `bin/magento dev:tests:run` 現在按預期啟動以下test:all 、 unit 、 integration 、 integration-all 、 static 、 static-all 、 integrity 、 legacy和default。

<!-- MC-38488-->

* `AdminMediaGalleryInsertLargeImageFileSizeTest` 已重新計算。

<!-- ENGCOM-8158 -->

* 設備test現在與PHPUnit 8相容。 [GitHub-29779](https://github.com/magento/magento2/issues/29779)

<!-- ENGCOM-8009 -->

* `\Magento\TestFramework\TestCase\WebapiAbstract` 現在包含一個函式，它支援比較test中預期結果和實際結果的大型嵌套陣列。 結果中的無關鍵現在可以忽略。 [GitHub-29498](https://github.com/magento/magento2/issues/29498)

<!-- ENGCOM-8024 -->

* `AdminMediaGalleryCatalogUiEditCategoryGridPageTest` 不再是隨機失敗。 [GitHub-1764](https://github.com/magento/adobe-stock-integration/issues/1764)

<!-- ENGCOM-8041 -->

* `dev/tests/integration/testsuite/Magento/Customer/Controller/AccountTest` 已經改善。 (`assert` 現在基於 `XPath` 選擇器 `assertStringContainsString`。) [GitHub-29700](https://github.com/magento/magento2/issues/29700)

<!-- ENGCOM-8017 -->

* 為添加的test範圍 `AdminAnalytics` 中。 [GitHub-29500](https://github.com/magento/magento2/issues/29500)

<!-- ENGCOM-8266 -->

* 整合和API功能test現在與PHPUnit 9.3相容。 [GitHub-30146](https://github.com/magento/magento2/issues/30146)

<!-- MC-35798 -->

* 更正了與GraphQL的問題 `testRequestCacheTagsForCategoryListOnMultipleIds` test。 [GitHub-29372](https://github.com/magento/magento2/issues/29372)

<!-- ENGCOM-7762 -->

* 現在，包含URL的標頭值將在中正確分析 `ApiFunctional TestFramework`。 [GitHub-26425](https://github.com/magento/magento2/issues/26425)

<!-- MC-35798 8109-->

* 更正了與GraphQL的問題 `testRequestCacheTagsForCategoryListOnMultipleIds` test。 [GitHub-29372](https://github.com/magento/magento2/issues/29372)

<!-- ENGCOM-8382 -->

* `—no-tablespaces` 已添加到 `mysqldump`允許整合test在不使用 `PROCESS` 權限(自MySQL 5.7.31 / 8.0.21運行以來必需 `mysqldump` )。 [GitHub-30566](https://github.com/magento/magento2/issues/30566)

### 主題

<!-- ENGCOM-8419 -->

* 新 `--no-parent` 標誌已添加到 `bin/magento setup:static-content:deploy` 命令，該命令可防止編譯主題的父項。 通過避免不必要的編譯，此新標誌可以顯著提高靜態內容部署過程的效能。 請注意，使用 `compact` 策略。 [GitHub-30184](https://github.com/magento/magento2/issues/30184)

<!-- MC-37630 -->

* 設計配置不再生成DDL操作。 以前，在更新設計配置時，應用程式生成了可觸發MySQL錯誤的DDL語句。

<!-- ENGCOM-8112 -->

* 中的冗餘代碼 `Magento_ConfigurableProduct` 「管理」主題中的模組已被刪除。  [GitHub-29857](https://github.com/magento/magento2/issues/29857)

<!-- ENGCOM-8144 -->

* 已刪除「空白」主題中的冗餘較少樣式導航和未使用的屬性。 [GitHub-29914](https://github.com/magento/magento2/issues/29914)

<!-- ENGCOM-8285 -->

* 已將可折疊導航功能添加到移動視圖中的空白主題。 [GitHub-30237](https://github.com/magento/magento2/issues/30237)

<!-- ENGCOM-7803 -->

* 已優化主題的Web字型載入。  [GitHub-29526](https://github.com/magento/magento2/issues/29526)

<!-- ENGCOM-8068 -->

* 開發人員現在可以在主題中聲明自定義字型時指定字型類型。 [GitHub-29719](https://github.com/magento/magento2/issues/29719)

### 翻譯和區域設定

<!-- MC-36836 -->

* 管理訂單網格日期選取器現在在管理區域設定為阿拉伯語時按預期工作(`ar_SA - Saudi Arabia`)。

<!-- MC-38476 -->

* 註冊或添加新地址時，當購物者使用有效的郵遞區號輸入阿根廷地址時，應用程式不再顯示錯誤消息。 以前，應用程式顯示以下錯誤： `Provided Zip/Postal Code seems to be invalid. Example: 1234. If you believe it is the right one you can ignore this notice.`

<!-- MC-38663-->

* 當購物者為韓語地址輸入五位數的郵遞區號時，該應用程式不再引發錯誤。

<!-- ENGCOM-8244 -->

* 增加對烏拉圭區域的支援，這些區域在 [ISO 3166-2:UY](https://en.wikipedia.org/wiki/ISO_3166-2:UY)。 [GitHub-29729](https://github.com/magento/magento2/issues/29729)

<!-- ENGCOM-8220 -->

* `zip_codes.xml` 已更新，以強制執行巴西郵遞區號的八位數。 [GitHub-29984](https://github.com/magento/magento2/issues/29984)

<!-- ENGCOM-8304 -->

* 改進了剩餘未本地化短語的本地化。 [GitHub-11175](https://github.com/magento/magento2/issues/11175)

<!-- ENGCOM-8380 -->

* 現在可以翻譯網格搜索輸入佔位符。 [GitHub-30510](https://github.com/magento/magento2/issues/30510)

<!-- ENGCOM-8018 -->

* 應用程式現在僅在啟用JavaScript模組時才下載內聯翻譯。  [GitHub-29553](https://github.com/magento/magento2/issues/29553)

### UI

<!-- MC-38509-->

* 的 **建立帳戶** 當購物者輸入無效資料時，「建立新帳戶」頁上的按鈕仍處於活動狀態。 以前，此按鈕被禁用，這防止購物者在出錯後重新嘗試建立帳戶。 這是2.4.1中的已知問題。 [GitHub-30513](https://github.com/magento/magento2/issues/30513)

<!-- MC-38698-->

* 已改進「管理訂單編輯」頁上裝運網格的載入。

<!-- MC-37870-->

* 應用程式現在顯示  **與開單地址相同** 按SKU將產品添加到購物車時，在訂單頁上應選中此複選框。

<!-- ENGCOM-8007 -->

* 定義有限寬度的CSS類現在應用到 **開始時間** 管理員上的欄位 **儲存**  >  **配置**  >  **目錄**  >  **XML站點地圖**  >  **層代設定**。  [GitHub-29496](https://github.com/magento/magento2/issues/29496)

<!-- ENGCOM-7992 -->

* 已更正「條款和條件」複選框標籤的顯示問題。  [GitHub-24060](https://github.com/magento/magento2/issues/24060)

<!-- ENGCOM-7948 -->

* 當層價格不可用時，應用程式不再在產品頁上顯示層價格塊的CSS代碼。 [GitHub-29194](https://github.com/magento/magento2/issues/29194)

<!-- ENGCOM-8084 -->

* 已重新排序影像視圖詳細資訊頁面上按鈕的位置，以符合用戶介面指南。  [GitHub-1783](https://github.com/magento/adobe-stock-integration/issues/1783)

<!-- ENGCOM-8342 -->

* 優惠券代碼文本欄位現在在Internet Explorer/EDGE瀏覽器中以適當寬度顯示。

<!-- ENGCOM-7630 -->

* 的 `@button__border-radius` 變數現在在 `lib/web/css/source/lib/variables/_buttons.less` 的下界。  `border-radius` 具有預設值 `3px`。 以前， `border-radius` 是硬編碼的。  [GitHub-28674](https://github.com/magento/magento2/issues/28674)

<!-- ENGCOM-8067 -->

* 現在，迷你搜索欄位中的提交搜索按鈕（放大鏡）將被禁用，直到達到最小搜索字串長度。 [GitHub-29704](https://github.com/magento/magento2/issues/29704)

<!-- MC-38807-->

* 的 **預覽模板** 按鈕現在可以按「編輯隊列」頁中的預期工作。

<!-- MC-31892-->

* 現在，當您將屬性從一個組移動到另一個組時，應用程式將保留該屬性的值。

<!-- ENGCOM-8085 -->

* 已將字型粗細變數添加到 `lib/web/css/source/lib/variables/_typography.less`。 [GitHub-29778](https://github.com/magento/magento2/issues/29778)

<!-- ENGCOM-8211 -->

* 篩選器可見性現在可與管理網格中預期的列可見性一起使用。  [GitHub-30345](https://github.com/magento/magento2/issues/30345)

<!-- ENGCOM-8152 -->

* UI選擇元件選項在 `this.disabled(true)` 的子菜單。 [GitHub-29098](https://github.com/magento/magento2/issues/29098)

<!-- ENGCOM-7901 -->

* 的 `@font-family-name__base` 載入開啟的Sans字型時不再使用變數。 [GitHub-29515](https://github.com/magento/magento2/issues/29515)

<!-- ENGCOM-8120 -->

* WAI-ARIA屬性 `aria-atomic="true"` 已添加到錯誤容器標籤。 [GitHub-29560](https://github.com/magento/magento2/issues/29560)

<!-- ENGCOM-8175 -->

* UI元件網格現在顯示選定項的準確計數。 以前，當搜索按關鍵字選擇所有網格項目時，網格指示了錯誤的選擇數，購物者隨後在選中標題複選框前取消選擇某些項目。 [GitHub-29968](https://github.com/magento/magento2/issues/29968)

<!-- ENGCOM-8118 -->

* 應用產品不再在發票和發運概覽頁上顯示未呈現的HTML。 [GitHub-29958](https://github.com/magento/magento2/issues/29958)

<!-- ENGCOM-8066 -->

* 按一下 **選項** 管理員 **商店**  >  **貨幣匯率**  現在將用戶引導到「系統配置」頁的「擴展貨幣選項」部分。 [GitHub-29336](https://github.com/magento/magento2/issues/29336)

<!-- ENGCOM-8361 -->

* 用於根據其它條件顯示小部件的改進支援 `adminhtml` 使用選擇器小部件類型時的小部件。 [GitHub-13316](https://github.com/magento/magento2/issues/13316)。 [GitHub-7252](https://github.com/magento/magento2/issues/7252)。 [GitHub-6868](https://github.com/magento/magento2/issues/6868)

<!-- ENGCOM-8336 -->

* 改進了Luma主題中確認彈出對話框中文本的填充。 [GitHub-30452](https://github.com/magento/magento2/issues/30452)

### 保管庫

<!-- MC-39109-->

* 的 `Vault` 模組現在從支付資訊管理服務的請求中識別支付方式代碼。 以前，當購物者使用已保存的Braintree信用卡下單時，即使使用了有效的付款方法，申請也會拋出此錯誤： `The requested Payment Method is not available`。

<!-- ENGCOM-7977 -->

* 當用戶滾動時，應用程式在「管理員登錄為客戶」頁面上顯示的標題現在仍位於頁面頂部。 [GitHub-29354](https://github.com/magento/magento2/issues/29354)

### 頂點

* 地址建議現在將按修改地址時的預期刪除。

* 已解決阻止某些客戶在其帳戶面板中保存其地址的競爭條件。

* 在某些情況下，頂點地址驗證不再將「地址編輯」頁添加到全頁快取中。

* 現在，在為包含稅的金額配置免費發運時，將考慮頂點計算的稅。

### Web API框架

<!-- MC-23904 ENGCOM-8421-->

* 現在可以使用POST `V1/invoice/:invoiceId/refund` 退還產品數量為零且發運費用為零的發票(例如， `{"items": [{"qty": 0, "orderItemId": 6, "extensionAttributes": {}}], "appendComment": false, "notify": true, "isOnline": true, "arguments": {"adjustment_negative": 0.0, "adjustment_positive": 0.99, "shipping_amount": 0}}.` )以前，應用程式引發了以下錯誤： `You can't create a creditmemo without products`。 [GitHub-23069](https://github.com/magento/magento2/issues/23069)

<!-- MC-33732 -->

* 現在可以使用POST `V1/categories` 建立或更新類別。 以前，如果 `default_sort_by` 值已設定為陣列。 當 `default_sort_by` 值被設定為字串，應用程式拋出了以下錯誤： `Error occurred during \"custom_attributes\" processing. Attribute \"default_sort_by\" has invalid value. The \"string\" value's type is invalid. The \"string[]\" type was expected. Verify and try again.`

<!-- MC-35740 -->

* 使用POST `V1/invoices/:id/capture` 捕獲付款資訊，現在可以按預期工作。 以前，應用程式授權了訂單，但僅在付款網關的站點上捕獲了訂單。

<!-- MC-37794 -->

* 使用POST `V1/order/:orderId/ship` 要建立部分發運，終結點將返回正確數量的已發運產品。

<!-- MC-38425-->

* 使用POST建立的發票 `V1/order/:orderID/invoice` 現在按商店信用準確反映部分支付。 以前，當用商店貸記部分支付訂單時，建立發票時未考慮商店貸記。

<!-- MC-36830-->

* GET `rest/all/V1/categories` 和GET `rest/all/V1/categories?rootCategoryId=2` 立即返回填充 `name` 和 `product_count` 欄位，如樹中所有類別所需。 以前，類別欄位值為空。 表名解析程式插件返回了用於按類別提取產品計數的不正確表名。

<!-- ENGCOM-8286 -->

* PUT `V1/categories/:id` 當類別URL鍵的重定向 `save_rewrites_history` 提供了自定義屬性。 [GitHub-29174](https://github.com/magento/magento2/issues/29174)。 [GitHub-30240](https://github.com/magento/magento2/issues/30240)

### 願望清單

<!-- MC-33626-->

* 現在，當將產品分配給自定義庫存源時，購物者可以將產品添加到願望清單。 [GitHub-3018](https://github.com/magento/inventory/issues/3018)

<!-- MC-35416-->

* 在客戶從店面將產品添加到其願望清單後，管理員現在可以從「管理」客戶頁訪問「管理購物車」頁。 以前，當管理員按一下 **管理購物車** 按鈕： `An error has occurred. See error log for details`。

<!-- MC-35573-->

* 的 **添加到購物車** 「共用願望清單」頁上的按鈕現在可以按預期對未登錄的匿名用戶、來賓和用戶使用。

<!-- ENGCOM-8062 -->

* 應用程式現在將按預期方式在願望清單頁中顯示選定的可配置產品屬性選項。  [GitHub-24091](https://github.com/magento/magento2/issues/24091)。  [GitHub-22503](https://github.com/magento/magento2/issues/22503)

<!-- ENGCOM-7779 -->

* 已實施 `ActionInterface` 為 `\Magento\Wishlist\Controller\Shared\Allcart`。 [GitHub-29537](https://github.com/magento/magento2/issues/29537)

## 已知問題

**問題**:的 `[magento_root]/index.php` 檔案已刪除，應用程式現在從 `/pub` 預設情況下。 從子資料夾提供的儲存將無法按預期工作，並可能顯示404個錯誤。 **解決方法**:使用符號連結將安裝模擬到子資料夾中。 以下示例使用 `https://shop01.com/shop/` 說明如何使用符號連結模擬子資料夾中的安裝。

1. 建立子目錄 `https://shop01.com/shop/`:

   ```bash
   mkdir magento_root/pub/shop01
   ```

   ```bash
   cd magento_root/pub/shop01
   ```

1. 為新建立的目錄中儲存的父目錄建立符號連結：

   ```bash
   ln -s ../media media
   ```

   ```bash
   ln -s ../static static
   ```

   ```bash
   ln -s ../../../pub pub
   ```

   ```bash
   ln -s ../.htaccess .htaccess
   ```

   ```bash
   ln -s ../health_check.php health_check.php
   ```

1. 建立 `index.php` 檔案位於新目錄(`magento_root/pub/shop01/index.php`)並添加此內容：

```php
   <?php
   require realpath(__DIR__) . '/../../../app/bootstrap.php';

   switch ($_SERVER['HTTP_HOST']) {
       case 'shop01.com':
       case 'www.shop01.com':
           $params = $_SERVER;
           $params[\Magento\Store\Model\StoreManager::PARAM_RUN_CODE] = 'shop01';
           $params[\Magento\Store\Model\StoreManager::PARAM_RUN_TYPE] = 'website';
           $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $params);
           $app = $bootstrap->createApplication(\Magento\Framework\App\Http::class);
           $bootstrap->run($app);
           break;

       default:
           $bootstrap = \Magento\Framework\App\Bootstrap::create(BP, $_SERVER);
           /** @var \Magento\Framework\App\Http $app */
           $app = $bootstrap->createApplication(\Magento\Framework\App\Http::class);
           $bootstrap->run($app);
       break;
   }
```

1. 配置Apache伺服器以指向新子目錄。 部署配置可能差異很大。 下面是伺服器配置示例：

```xml
   <VirtualHost *:80>
       DocumentRoot "magento_root/pub/shop1"
       ServerName shop01.com
   </VirtualHost>
```

**問題**:當購物者在付款頁的驗證碼欄位中輸入正確的代碼時，應用產品不會像預期的那樣提交付款資訊，但會顯示以下錯誤：  `There has been an error processing your request`。 只有當購物者試圖不輸入驗證碼代碼或錯誤地輸入訂單時，才會發生這種情況。  **解決方法**:刷新頁面。 <!-- MC-40506-->

**問題**:當購物者點擊Braintree時，應用程式會按預期建立訂單 **使用Venmo付款**，但不在管理員中建立訂單。 查看 [2.4.2已知問題：BraintreeVenmo付款無效](https://support.magento.com/hc/en-us/articles/360054662652/) 知識庫文章。  <!-- BUNDLE-2894-->

**問題**:不能使用 `addConfigurableProductToCart` GraphQL變異，用於在運行Inventory的多商店部署的非預設儲存視圖中將可配置產品添加到購物車。 （盧瑪店面不受影響。） 應用程式顯示以下錯誤： `Could not add item to cart. Please check required options and try again`。 **解決方法**:使用 `addProductsToCart` 而是變異。 [GitHub-31660](https://github.com/magento/magento2/issues/31660)<!-- PWA-1298-->

## 社區捐款

我們感謝廣大Magento Open Source，並願承認他們對本新聞稿的貢獻。

社區工程團隊 [Magento撰稿人](https://magento.com/magento-contributors) 按月、季度和年度保存一份最佳貢獻個人和合作夥伴清單。 在該「參與者」頁中，您可以在GitHub上跟蹤到其合併公關的連結。

### 合作夥伴貢獻

下表重點介紹了合作夥伴的貢獻。 此表列出了提供拉入請求的合作夥伴、外部拉入請求以及與其關聯的GitHub發行號（如果可用）。

{{$include /help/_includes/release-notes/engcomm-2-4-2-partner.md}}

### 個人捐款人

下表列出了社區成員的貢獻。 此表列出了外部拉入請求、與其關聯的GitHub發行號（如果可用）以及提供拉入請求的社區成員。

{{$include /help/_includes/release-notes/engcomm-2-4-2-issues.md}}

### 系統要求

我們的技術堆棧構建在PHP和MySQL上。 有關詳細資訊，請參見 [系統要求](../../../installation/system-requirements.md)。

### 安裝和升級說明

您可以使用 [作曲家](../../../installation/composer.md)。

## 遷移工具包

資料遷移工具幫助將現有Magento1.x儲存資料傳輸到Magento2.x。此命令行介面包括驗證、進度跟蹤、日誌記錄和測試功能。 有關安裝說明，請參見 [安裝資料遷移工具](../../../tools/data-migration-tool/install.md)。 考慮探索或幫助 [資料遷移儲存庫](https://github.com/magento/data-migration-tool)。

的 [代碼遷移工具包](https://github.com/magento-commerce/code-migration) 幫助將現有Magento1.x儲存擴展和自定義內容傳輸到Magento2.x。命令行介面包括用於轉換Magento1.x模組和佈局的指令碼。
