---
title: '[!DNL Cloud Automation Patching Service (CAPS)]疑難排解指南'
description: 疑難排解 [!DNL Cloud Automation Patching Service (CAPS)]中的常見問題和錯誤訊息
hide: true
hidefromtoc: true
source-git-commit: eff8c0ae9e1d9db6b46ba7cfbb915685ab5b194d
workflow-type: tm+mt
source-wordcount: '946'
ht-degree: 0%

---

# [!DNL Cloud Automation Patching Service (CAPS)]疑難排解指南

使用[!DNL CAPS]進行修補程式操作時，您可能會遇到錯誤訊息和問題，這些訊息和問題可能會阻止修補程式應用程式成功或進行重新版本。 本指南提供最常見問題的解決方案。

## 快速疑難排解步驟

### 如果修補作業失敗

* 檢查操作狀態以瞭解哪個階段失敗
* 檢閱特定失敗原因的錯誤訊息
* 檢查錯誤記錄檔以取得技術詳細資訊
* 請遵循本指南中提供的解決方案

### 修補作業持續時間

對於大多數環境，下列時間表說明修補作業需要多久時間，但視環境大小和複雜度而定，可能需要更長的時間：

* **預先處理：** 2-5分鐘
* **正在修補：** 5-15分鐘
* **後續處理：** 10-40分鐘
* **總計：** 15-60分鐘

### 取消進行中的修補程式

>[!WARNING]
>
>修補程式作業開始後，應允許其完成。 即使作業失敗，系統也會包含執行的清理程式。 中斷程式可能會讓您的環境處於不一致的狀態。

## 常見成功訊息

* **「工作已成功完成」** — 修補程式已成功套用/回覆，沒有任何問題。

* **「已套用修補程式」** — 您正在嘗試套用已套用的修補程式。 系統偵測到您的環境中已有此修補程式。 不需要採取任何動作。

* **「修補程式已還原」** — 您正在嘗試還原已還原的修補程式。 系統偵測到目前未套用修補程式。 不需要採取任何動作。

## 常見錯誤訊息與解決方案

### 修補應用程式錯誤

#### 「無法套用修補程式，因為[!DNL CAPS]偵測到您的程式碼基底或修補程式檔案發生這些問題」

**發生時：**&#x200B;初步檢查期間

**原因：**&#x200B;修補程式與您目前的程式碼基底衝突，或是修補程式本身有問題

**解決方案：**

* 檢閱提供的詳細錯誤記錄檔，以識別是否為程式碼基底或修補程式問題
* 檢查您的程式碼中是否有衝突的自訂
* 確認修補程式與您的Adobe Commerce版本相容
* 請考慮手動解決衝突或聯絡支援人員

#### 「此修補程式並非由[!DNL CAPS]管理。 無法回覆」

**發生時：**&#x200B;還原作業期間

**原因：**&#x200B;您正在嘗試還原未透過[!DNL CAPS]套用的修補程式

**解決方案：**&#x200B;使用與原來套用修補程式相同的方法，或連絡支援人員以取得手動協助

### 環境和驗證錯誤

#### 「環境與父系不同步」

**發生時：**&#x200B;驗證期間

**原因：**&#x200B;您的整合環境與上層環境不同

**解決方案：**

* 將您的環境與父分支同步
* 重試修補程式操作
* 如果同步問題仍然存在，請聯絡支援人員

#### 「不符合生產環境防護規定」

**發生時：**&#x200B;生產環境的初步檢查期間

**原因：**&#x200B;生產環境不符合必要的安全條件

**解決方案：**

* 為您的生產存放區啟用維護模式
* 在您的生產環境中停用cron工作
* 在重試之前，請確認兩個條件都符合

>[!IMPORTANT]
>
> [!DNL CAPS]不會自動啟用維護模式或停用cron工作 — 這些工作必須由您從外部完成

#### 「已套用修補程式，但健康情況檢查失敗。 請考慮回覆」

**發生時：**&#x200B;在驗證期間修補應用程式之後

**原因：**&#x200B;已成功套用修補程式，但健康情況檢查失敗

**解決方案：**

* 檢閱應用程式記錄檔中的特定錯誤
* 手動測試關鍵功能
* 如果問題仍然存在，請考慮回覆修補程式
* 如果您需要協助，請聯絡支援人員

### 驗證和存取錯誤

#### 「Adobe Commerce存放庫驗證失敗」

**發生時間：**&#x200B;在任何階段中

**原因：**&#x200B;無效或過期的Adobe Commerce存放庫認證

**解決方案：**

解決此問題的建議選項有兩種：

**選項1：修正`env:COMPOSER_AUTH`環境層級變數（建議）**

* 確定您已為`env:COMPOSER_AUTH`設定正確的認證。
* 按一下雲端專案UI左上角的齒輪圖示，然後選取「**變數**」標籤，以存取全域設定。
* 請確定您選取&#x200B;_在建置時間期間可用_，並取消選取&#x200B;_在執行時間期間可用_。

如果選項1無法解決問題，請繼續選項2。

**選項2：手動建立及部署`auth.json`檔案**

* SSH連線至您的伺服器。
* 使用以下專案擷取您目前`env:COMPOSER_AUTH`變數的內容：\
  `echo $COMPOSER_AUTH`
* 複製上述步驟的所有內容（JSON格式）。
* 使用這些內容建立名為`auth.json`的新檔案。
* 將這個新建立的`auth.json`檔案提交到存放庫的根目錄。
* 觸發新部署。

#### 「環境存取許可權不足」

**發生時：**&#x200B;環境建立或存取期間

**原因：**&#x200B;您的使用者帳戶缺少必要的許可權

**解決方案：**

* 檢查您的使用者角色和許可權
* 請連絡您的系統管理員
* 確認您擁有環境管理許可權
* 確保您擁有部署許可權

### 資源與配額錯誤

#### 「已超出環境配額」

**發生時間：**&#x200B;環境建立期間

**原因：**&#x200B;您已達到您的環境限制

**解決方案：**

* 停用未使用的環境
* 清理舊分支和部署
* 請連絡支援以要求增加配額
* 考慮升級您的計畫

#### 「作業的資源不足」

**發生時間：**&#x200B;在任何階段中

**原因：**&#x200B;您的環境缺少足夠的CPU、記憶體或儲存空間

**解決方案：**

* 檢查您的環境資源使用情況
* 清除檔案以釋放資源
* 等待資源變為可用
* 如果資源問題仍然存在，請聯絡支援人員

## 取得協助

**何時連絡支援：**

若發生下列情況，請聯絡Adobe Commerce Cloud支援：

* 錯誤訊息不清楚或缺少足夠的詳細資訊
* 修補程式操作一致失敗
* 您需要手動衝突解決協助
* 健康情況檢查失敗，但原因不明
* 您需要有關環境同步問題的協助

**要提供的資訊：**

聯絡支援時，請提供：

* **專案識別碼** — 您的Adobe Commerce Cloud專案識別碼
* **環境ID** — 發生問題的特定環境
* **作業識別碼** - [!DNL CAPS]作業識別碼
* **錯誤詳細資料** — 完整的錯誤訊息和記錄
* **要再現的步驟** — 發生錯誤時您正在做什麼
* **先前嘗試** — 您已經嘗試解決的問題

### 其他資源

如需更詳細的技術資訊：

* 檢閱隨失敗操作提供的完整錯誤記錄檔
* 請檢視Adobe Commerce檔案以取得修補程式特定指南
* 請聯絡Adobe Commerce Cloud支援以取得特定於環境的問題

### 相關主題

* [Adobe Commerce Cloud檔案](https://experienceleague.adobe.com/en/docs/commerce-cloud-service/user-guide/overview.html)
* [Adobe Commerce安裝指南](https://experienceleague.adobe.com/en/docs/commerce-operations/installation-guide/overview.html)
* [大寫字介紹](intro.md)
* [如何存取](access.md)
* [工作流程](workflow.md)
* [最佳實務](best-practices.md)
